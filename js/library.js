(function(e){function n(e,t,n){var i=Error.call(this,e);this.name="CM_Exception";this.stack=i.stack;this.message=i.message;this.isPublic=Boolean(t);this.metaInfo=n||{};return this}n.prototype=Object.create(Error.prototype,{"constructor":{"value":n,"writable":true,"configurable":true}});var i={};i["CM_Exception"]=n;n.extend=function(e){var t=function(){n.apply(this,arguments);this.name=e};t.prototype=Object.create(n.prototype);t.prototype.constructor=n;i[e]=t;return t};n.factory=function(e){if(!i[e]){window[e]=i[e]=n.extend(e)}return i[e]};e["CM_Exception"]=n})(window);var CM_Class_Abstract=function(){this.initialize.apply(this,arguments)};CM_Class_Abstract.prototype={"initialize":function(){}};CM_Class_Abstract.extend=Backbone.Model.extend;window.CM_Exception_AuthRequired=CM_Exception.extend("CM_Exception_AuthRequired");window.CM_Exception_BadRequest=CM_Exception.extend("CM_Exception_BadRequest");window.CM_Exception_FormFieldValidation=CM_Exception.extend("CM_Exception_FormFieldValidation");CM_Exception_FormFieldValidation.prototype.setErrorList=function(e){this._errorList=e;this.message=e.join()};CM_Exception_FormFieldValidation.prototype.getErrorList=function(){return this._errorList||null};window.CM_Exception_Invalid=CM_Exception.extend("CM_Exception_Invalid");window.CM_Exception_Nonexistent=CM_Exception.extend("CM_Exception_Nonexistent");window.CM_Exception_RequestFailed=CM_Exception.extend("CM_Exception_RequestFailed");var CM_Frontend_AbstractTrait={"traitProperties":{},"applyImplementation":function(n){if(!_.isObject(n)){throw new Error("Trait must be applied to an Object.")}var i=this.abstractMethod;_.each(this.traitProperties,function(e,t){if(!(t in n)){if(e===i){throw new Error(t+" not implemented.")}else{n[t]=e}}});return n},"isImplementedBy":function(n){if(_.isObject(n)){return _.every(this.traitProperties,function(e,t){return t in n})}return false},"abstractMethod":function(){throw new Error("Abstract method.")}};var CM_Frontend_JsonSerializable=Backbone.Model.extend({"_class":"CM_Frontend_JsonSerializable","constructor":function(){CM_Frontend_SynchronizableTrait.applyImplementation(CM_Frontend_JsonSerializable.prototype);return Backbone.Model.prototype.constructor.apply(this,arguments)},"sync":function(s){if(!(s instanceof CM_Frontend_JsonSerializable)){throw Error("Failed to update the model, incompatible parameter.")}var r={"removed":[],"added":{},"updated":{}};var e=function(n){_.each(n,function(e,t){if(_.isEmpty(e)){delete n[t]}});return _.isEmpty(n)?null:n};if(!this.equals(s)){var t=_.union(this.keys(),s.keys());_.each(t,function(e){var t=this.get(e);var n=s.get(e);var i=this.has(e)?r.updated:r.added;if(!s.has(e)){if(_.isObject(t)&&_.isFunction(t.trigger)){t.trigger("remove")}r.removed.push(e);this.unset(e)}else if(this.isSynchronizable(t)&&t.isSynchronizable(n)){var o=t.sync(n);if(o){i[e]=o}}else if(!_.isEqual(t,n)){this.set(e,n);var a={};a[e]=n;_.extend(i,a)}},this)}if(r=e(r)){this.trigger("sync",this,r)}return r},"equals":function(i){if(!this.isSynchronizable(i)){return false}var e=_.union(this.keys(),i.keys());return _.every(e,function(e){var t=this.get(e);var n=i.get(e);if(this.isSynchronizable(n)){return n.equals(t)}else{return _.isEqual(n,t)}},this)},"toJSON":function(){var o=function(i){_.each(i,function(e,n){if(this.isSynchronizable(e)){i[n]=e.toJSON()}else if(_.isArray(e)){_.each(e,function(e,t){i[n][t]=this.isSynchronizable(e)?e.toJSON():o(e)},this)}},this);return i}.bind(this);return o(Backbone.Model.prototype.toJSON.apply(this,arguments))},"getClass":function(){return this._class},"destruct":function(){},"fetch":function(){throw new Error("Not implemented.")}});var CM_Frontend_SynchronizableTrait=_.clone(CM_Frontend_AbstractTrait);CM_Frontend_SynchronizableTrait.traitProperties={"sync":CM_Frontend_AbstractTrait.abstractMethod,"equals":CM_Frontend_AbstractTrait.abstractMethod,"toJSON":CM_Frontend_AbstractTrait.abstractMethod,"isSynchronizable":function(e){return CM_Frontend_SynchronizableTrait.isImplementedBy(e)}};var CM_MessageStream_Adapter_Abstract=CM_Class_Abstract.extend({"initialize":function(e){},"subscribe":function(e,t,n){throw"Not implemented"},"unsubscribe":function(e){throw"Not implemented"},"publish":function(e,t,n){throw"Not implemented"}});var CM_MessageStream_Adapter_SocketRedis=CM_MessageStream_Adapter_Abstract.extend({"_socketRedis":null,"initialize":function(e){this._socketRedis=new SocketRedis(e.sockjsUrl);this._socketRedis.open()},"subscribe":function(e,t,n){this._socketRedis.subscribe(e,cm.options.renderStamp,t,n)},"unsubscribe":function(e){this._socketRedis.unsubscribe(e)},"publish":function(e,t,n){this._socketRedis.publish(e,t,n)}});var CM_Model_Abstract=CM_Frontend_JsonSerializable.extend({"_class":"CM_Model_Abstract","idAttribute":"_compoundId","initialize":function(){var e=this.get("_id");if(!$.isPlainObject(e)){throw new Error("`_id` field must be a hash object")}var t=_.values(e).concat(this.get("_type"));this.set("_compoundId",t.join("-"))},"getId":function(){return this.get("_id")["id"]},"toJSON":function(){return{"_id":this.get("_id"),"_type":this.get("_type"),"_class":this._class}}});var CM_Paging_Abstract=Backbone.Collection.extend({"_class":"CM_Paging_Abstract","constructor":function(e,t){var n=e;if(_.isObject(e)&&_.isArray(e.items)){n=e.items}CM_Frontend_SynchronizableTrait.applyImplementation(CM_Paging_Abstract.prototype);return Backbone.Collection.prototype.constructor.call(this,n,t)},"model":function(e,t){return new CM_Frontend_JsonSerializable(e,t)},"sync":function(t){if(!(t instanceof CM_Paging_Abstract)){throw Error("Failed to update the collection, incompatible parameter.")}var n={"removed":[],"added":[],"updated":{}};var e=function(n){_.each(n,function(e,t){if(_.isEmpty(e)){delete n[t]}});return _.isEmpty(n)?null:n};t.chain().filter(function(e){return!!this.get(e)},this).each(function(e){var t=this.get(e);if(t.isSynchronizable(e)&&!t.equals(e)){n.updated[t.id]=t.sync(e)}},this);t.chain().filter(function(e){return!this.get(e)},this).each(function(e){this.add(e);n.added.push(e)},this);this.chain().filter(function(e){return!t.get(e)},this).each(function(e){this.remove(e);n.removed.push(e)},this);if(n=e(n)){this.trigger("list:sync",this,n)}return n},"equals":function(e){if(!e||!(e instanceof CM_Paging_Abstract)||this.size()!==e.size()){return false}var n=[];return e.every(function(e){var t=this.get(e);if(t&&!_.contains(n,t.cid)){n.push(t.cid);return this._compareModels(t,e)}return false},this)},"toJSON":function(){return Backbone.Collection.prototype.toJSON.apply(this,arguments)},"get":function(t){var e=Backbone.Collection.prototype.get.call(this,t);if(!e&&t instanceof Backbone.Model){e=this.find(function(e){return this._compareModels(t,e)},this)}return e},"getClass":function(){return this._class},"destruct":function(){},"fetch":function(){throw new Error("Not implemented.")},"_compareModels":function(e,t){if(CM_Frontend_SynchronizableTrait.isImplementedBy(e)){return e.equals(t)}else{return _.isEqual(e.toJSON(),t.toJSON())}}});var CM_Paging_List=CM_Paging_Abstract.extend({"_class":"CM_Paging_List"});var CM_StreamChannel_Definition=CM_Frontend_JsonSerializable.extend({"_class":"CM_StreamChannel_Definition","getKey":function(){return this.get("key")},"getType":function(){return this.get("type")},"addActionEventListener":function(e,t,n){e=this._extractActionInfo(e);cm.action.bind(e.verb,e.type,this.getKey(),this.getType(),function(e){t.call(n,e.action,e.model,e.data)})},"removeActionEventListeners":function(e){e=this._extractActionInfo(e);cm.action.unbind(e.verb,e.type,this.getKey(),this.getType())},"addStreamEventListener":function(e,t,n,i){cm.stream.bind(this.getKey(),this.getType(),e,t,n,i)},"removeStreamEventListeners":function(e,t,n){cm.stream.unbind(this.getKey(),this.getType(),e,t,n)},"_extractActionInfo":function(e){if(!/^(\S+)\s+(.+)$/.test(e)){throw new Error("StreamChannel action syntax error.")}var t=e.match(/^(\S+)\s+(.+)$/);if(!_.isNumber(cm.action.types[t[1]])){throw new Error("StreamChannel action type not found.")}return{"type":cm.action.types[t[1]],"verb":t[2]}}});var CM_Type_Enum=CM_Class_Abstract.extend({"_class":"CM_Type_Enum","_value":null,"constructor":function(e){var t=this.constructor;if(0===t.getConstantList().length){throw new Error("Enum values are not defined for "+this._class+" enum class")}var n=_.isObject(e)&&"value"in e?e.value:e;if(_.isUndefined(n)){n=t.getDefaultValue()}if(!this._isValidValue(n)){throw new Error("Invalid value `"+n+"` for "+this._class+" enum class")}this._value=n},"_isValidValue":function(t){var n=this.constructor;return _.any(n.getConstantList(),function(e){return t===n[e]})},"toString":function(){return String(this._value)}},{"getConstantList":function(){var t=this;return _.chain(Object.getOwnPropertyNames(t)).difference(Object.getOwnPropertyNames(CM_Class_Abstract)).filter(function(e){return!_.isObject(t[e])&&!_.isFunction(t[e])}).value()},"getDefaultValue":function(){throw new Error("Default value in not defined for "+this.prototype._class+" enum class")}});var CM_View_Abstract=Backbone.View.extend({"_class":"CM_View_Abstract","_children":[],"constructor":function(e){this.options=e||{};Backbone.View.apply(this,arguments)},"initialize":function(){this._children=[];if(this.getParent()){this.getParent().registerChild(this)}this.events=this.collectEvents();if(this.actions){this._bindActions(this.actions)}if(this.streams){this._bindStreams(this.streams)}if(this.childrenEvents){this._bindChildrenEvents(this.childrenEvents)}if(this.appEvents){this._bindAppEvents(this.appEvents)}this.on("all",function(e,t){cm.viewEvents.trigger.apply(cm.viewEvents,[this].concat(_.toArray(arguments)))})},"collectEvents":function(){var e=[],t=this.constructor,n=t.prototype;do{if(n.hasOwnProperty("events")){e.unshift(n.events)}}while(t=(n=t.__super__)&&n.constructor);e.unshift({});return _.extend.apply(_,e)},"ready":function(){},"_ready":function(){this.ready();_.each(this.getChildren(),function(e){e._ready()});this.trigger("ready")},"registerChild":function(e){this._children.push(e);e.options.parent=this},"getChildren":function(t){if(!t){return this._children}return _.filter(this._children,function(e){return e.hasClass(t)})},"findChild":function(t){return _.find(this.getChildren(),function(e){return e.hasClass(t)})||null},"getChild":function(e){var t=this.findChild(e);if(!t){throw new Error("Failed to retrieve `"+e+"` child view of `"+this.getClass()+"`.")}return t},"getParent":function(){if(this.options.parent){return this.options.parent}return null},"findParent":function(e){var t=this.getParent();if(!t){return null}if(t.hasClass(e)){return t}return t.findParent(e)},"getComponent":function(){if(this.hasClass("CM_Component_Abstract")){return this}return this.findParent("CM_Component_Abstract")},"getViewInfoList":function(){var e={"CM_Component_Abstract":null,"CM_View_Abstract":this._getArray()};var t=this.getComponent();if(t){e.CM_Component_Abstract=t._getArray()}return e},"getAutoId":function(){if(!this.el.id){this.el.id=cm.getUuid()}return this.el.id},"getParams":function(){return this.options.params||{}},"getClasses":function(){var e=[this.getClass()];if("CM_View_Abstract"!=this.getClass()){e=e.concat(this.constructor.__super__.getClasses())}return e},"getClass":function(){return this._class},"hasClass":function(e){return _.contains(this.getClasses(),e)},"remove":function(){this.trigger("destruct");this.$el.detach();_.each(_.clone(this.getChildren()),function(e){e.remove()});if(this.getParent()){var e=this.getParent().getChildren();for(var t=0,n;n=e[t];t++){if(n.getAutoId()==this.getAutoId()){e.splice(t,1)}}}delete cm.views[this.getAutoId()];this.$el.remove();this.stopListening()},"replaceWithHtml":function(e){var t=this.el.parentNode;t.replaceChild(e[0],this.el);this.remove()},"disable":function(){this.$().disable()},"enable":function(){this.$().enable()},"ajax":function(e,t,n){n=_.defaults(n||{},{"modal":false,"view":this});t=t||{};var i=this;if(n.modal){this.disable()}var o={};if(n.retry===false){o.retry=false}var a=this.try(function(){return cm.ajax("ajax",{"viewInfoList":n.view.getViewInfoList(),"method":e,"params":t},o)}).then(function(e){if(e.exec){new Function(e.exec).call(i)}return e.data}).finally(function(){if(n.modal){i.enable()}});this.on("destruct",function(){a.cancel()});return a},"ajaxModal":function(e,t,n){n=_.defaults(n||{},{"modal":true});return this.ajax(e,t,n)},"loadComponent":function(e,t,n){n=_.defaults(n||{},{"modal":true,"method":"loadComponent"});t=t||{};t.className=e;return this.try(function(){return this.ajax(n.method,t,n)}).then(function(e){return this._injectView(e)})},"prepareComponent":function(e,t,n){return this.loadComponent(e,t,n).then(function(e){e._ready();return e})},"popOutComponent":function(e,t,n){return this.prepareComponent(e,t,n).then(function(e){e.popOut({},true);return e})},"bindAction":function(e,t,n,i,o){if(!n&&!i){if(!cm.options.stream.channel){return}n=cm.options.stream.channel.key;i=cm.options.stream.channel.type}var a=function(e){o.call(this,e.action,e.model,e.data)};cm.action.bind(e,t,n,i,a,this);this.on("destruct",function(){cm.action.unbind(e,t,n,i,a,this)})},"bindStream":function(e,t,n,i,o){cm.stream.bind(e,t,n,i,this,o);this.on("destruct",function(){cm.stream.unbind(e,t,n,i,this)},this)},"unbindStream":function(e,t,n,i){cm.stream.unbind(e,t,n,i,this)},"bindChildrenEvent":function(e,t,n){cm.viewEvents.bind(this,e,t,n,this);this.on("destruct",function(){cm.viewEvents.unbind(this,e,t,n,this)})},"bindAppEvent":function(e,t){cm.event.bind(e,t,this);this.on("destruct",function(){cm.event.unbind(e,t,this)})},"setInterval":function(e,t){var n=this;var i=window.setInterval(function(){e.call(n)},t);this.on("destruct",function(){window.clearInterval(i)});return i},"setTimeout":function(e,t){var n=this;var i=window.setTimeout(function(){e.call(n)},t);this.on("destruct",function(){window.clearTimeout(i)});return i},"createGlobalFunction":function(e){var t=this;var n="cm_global_"+cm.getUuid().replace(/-/g,"_");window[n]=function(){e.apply(t,arguments)};this.on("destruct",function(){delete window[n]});return n},"bindJquery":function(e,t,n){var i=this;var o=function(){n.apply(i,arguments)};e.on(t,o);this.on("destruct",function(){e.off(t,o)})},"storageSet":function(e,t){cm.storage.set(this.getClass()+":"+e,t)},"storageGet":function(e){return cm.storage.get(this.getClass()+":"+e)},"storageDelete":function(e){cm.storage.del(this.getClass()+":"+e)},"cacheGet":function(e,t){return cm.cache.get(this.getClass()+":"+e,t,this)},"renderTemplate":function(t,e){var n=this.cacheGet("template-"+t,function(){var e=this.$('> script[type="text/template"].'+t);if(!e.length){throw new CM_Exception("Template `"+t+"` does not exist in `"+this.getClass()+"`")}return e.html()});return cm.template.render(n,e)},"try":function(e){return Promise.try(e.bind(this)).bind(this)},"delay":function(e){return Promise.delay(e).bind(this)},"wait":function(t,e){var n=new cm.lib.Observer;var i=e||this;var o=new Promise(function(e){n.listenTo(i,t,e)});return o.finally(function(){n.stopListening();n=null})},"cancellable":function(e,t,n){var i=n||this;var o=new cm.lib.Observer;var a=null;o.listenTo(i,t,function(){if(a){a.cancel()}});a=e.apply(this);return a.finally(function(){o.stopListening();o=null})},"_bindActions":function(e,a,s){_.each(e,function(t,e){var n=e.match(/^(\S+)\s+(.+)$/);var i=cm.action.types[n[1]];var o=n[2].split(/\s*,\s*/);_.each(o,function(e){this.bindAction(e,i,a,s,t)},this)},this)},"_bindStreams":function(e){if(!cm.options.stream.channel){return}_.each(e,function(e,t){this.bindStream(cm.options.stream.channel.key,cm.options.stream.channel.type,this.getClass()+":"+t,e)},this)},"_bindChildrenEvents":function(e){_.each(e,function(t,e){var n=e.match(/^(\S+)\s+(.+)$/);var i=n[1];var o=n[2].split(/\s*,\s*/);_.each(o,function(e){this.bindChildrenEvent(i,e,t)},this)},this)},"_bindAppEvents":function(e){_.each(e,function(t,e){var n=e.split(/[\s]+/);_.each(n,function(e){this.bindAppEvent(e,t)},this)},this)},"_getArray":function(){return{"className":this.getClass(),"id":this.getAutoId(),"params":this.getParams(),"parentId":this.getParent()?this.getParent().getAutoId():null}},"_injectView":function(e){cm.window.appendHidden(e.html);new Function(e.js).call(this);var t=cm.views[e.autoId];this.registerChild(t);return t},"_replaceView":function(e){cm.window.appendHidden(e.html);new Function(e.js).call(this);var t=cm.views[e.autoId];this.getParent().registerChild(t);this.replaceWithHtml(t.$el);t._ready();return t}});var CM_View_Document=CM_View_Abstract.extend({"_class":"CM_View_Document","_loadPageThrottled":promiseThrottler(function(o){return this.try(function(){var e=this.getLayout();e.createPagePlaceholder();e.chargeSpinnerTimeout();return this.ajaxModal("loadPage",{"path":o,"currentLayout":e.getClass()})}).finally(function(){this.getLayout().clearSpinnerTimeout()}).then(function(e){if(e.redirectExternal){window.location.replace(e.redirectExternal);return}this._updateHistory(o,e.url);this._updateTitle(e.title);this._activateMenuEntries(e.menuEntryHashList);if(e.jsTracking){this._updateTracking(e.jsTracking)}var t=this.getLayout();var n=false;if(e.layoutRendering){t=this._replaceLayout(e.layoutRendering);n=true}var i=t._injectView(e.pageRendering);t.removePagePlaceholder(i.$el);if(n){t.afterPageInjected()}i._ready();return i}).catch(function(e){if(!(e instanceof Promise.CancellationError)){this.getLayout().errorPagePlaceholder(e);this._deactivateMenuEntries();throw e}})},{"cancelLeading":true}),"getLayout":function(){return this.getChild("CM_Layout_Abstract")},"loadPage":function(e){return this._loadPageThrottled(e)},"_replaceLayout":function(e){var t=this.getLayout();var n=this._injectView(e);t.replaceWithHtml(n.$el);n._ready();return n},"_updateHistory":function(e,t){var n=cm.router._getFragmentByUrl(t);if(e===n+window.location.hash){n=e}window.history.replaceState(null,null,n)},"_updateTitle":function(e){cm.window.title.setText(e)},"_activateMenuEntries":function(e){this._deactivateMenuEntries();var t=_.map(e,function(e){return"[data-menu-entry-hash="+e+"]"});$(t.join(",")).addClass("active")},"_deactivateMenuEntries":function(){$("[data-menu-entry-hash]").removeClass("active")},"_updateTracking":function(e){new Function(e).call(this)}});var SK_Behaviour_Entity_Open=CM_Class_Abstract.extend({"_view":null,"initialize":function(e){this._view=e},"handleClick":function(e,t,n,i){i=i||{};switch(t){case cm.model.types.SK_Entity_Photo:e.preventDefault();e.stopPropagation();return this._view.popOutComponent("SK_Component_PhotoGallery",{"photo":n,"entityList":i.entityList});case cm.model.types.SK_Entity_MailboxConversation:e.preventDefault();e.stopPropagation();return this.openConversation(SK_Entity_MailboxConversation.fromID(n))}return null},"openConversation":function(e){var t=cm.findView("SK_Component_Chat");if(t&&t.getConversationsEnabled()){return t.openChatByConversation(e)}return cm.router.route(cm.getUrl("/messages",{"conversation":e.getId()}))},"openConversationByRecipient":function(e){var t=cm.findView("SK_Component_Chat");if(t&&t.getConversationsEnabled()){return t.openChatByUser(e)}return cm.router.route(cm.getUrl("/messages",{"recipient":e}))}});var SK_Entity_MailboxConversation=CM_Model_Abstract.extend({"_class":"SK_Entity_MailboxConversation","initialize":function(){CM_Model_Abstract.prototype.initialize.apply(this,arguments);if(this.get("user")){var e=_.filter(this.get("members"),function(e){return!e||e.id!=this.get("user").id}.bind(this));this.set("participants",e)}},"getUserData":function(e){var t=this.get("userData");if(e){return t&&t[e]}return t},"setUserData":function(e,t){var n=this.getUserData();if(n){n[e]=t}else{throw new Error("Can not set value on empty user data")}},"isOwnedByViewer":function(){return this.get("user").id==cm.viewer.id}},{"fromID":function(e){var t=cm.model.types.SK_Entity_MailboxConversation;return new SK_Entity_MailboxConversation({"_id":{"id":e},"_type":t})}});var SK_Paging_MailboxConversation_JsonSerialized=CM_Paging_List.extend({"_class":"SK_Paging_MailboxConversation_JsonSerialized","setMailbox":function(e){switch(e){case"unread":case"inbox":this.comparator=function(e){return-e.get("userData")["receiveStamp"]};break;case"sent":this.comparator=function(e){return-e.get("userData")["sendStamp"]};break;case"all":case"spam":this.comparator=function(e){return-Math.max(e.get("userData")["sendStamp"],e.get("userData")["receiveStamp"])};break}}});var SK_View_Document=CM_View_Document.extend({"_class":"SK_View_Document"});var SKService_Streamate_User=CM_Frontend_JsonSerializable.extend({"_class":"SKService_Streamate_User","isLoggedIn":function(){return SKService_Streamate_User_Status.SM_LOGGED_IN===String(this.getStatus())},"isDialogRequired":function(){return _.contains([SKService_Streamate_User_Status.SM_VERIFYING_EMAIL,SKService_Streamate_User_Status.SM_REQUIRES_PREPAY,SKService_Streamate_User_Status.SM_DAILY_LIMIT_REACHED,SKService_Streamate_User_Status.SM_REQUIRES_SUPPORT,SKService_Streamate_User_Status.SM_REQUIRES_PAYMENT_INFO],String(this.getStatus()))},"getStatus":function(){return this.get("status")},"setStatus":function(e){this.set("status",new SKService_Streamate_User_Status(String(e)))},"getReason":function(){return this.get("reason")},"getSakey":function(){return this.get("sakey")},"getMessage":function(){return this.get("message")},"getClientUserId":function(){return this.get("clientUserId")}});var SKService_Streamate_User_Reason=CM_Type_Enum.extend({"_class":"SKService_Streamate_User_Reason"},{"NOT_APPLICABLE":"NOT_APPLICABLE","USER_ACCOUNT_CLOSED":"USER_ACCOUNT_CLOSED","USER_ACCOUNT_RESTRICTED":"USER_ACCOUNT_RESTRICTED","USER_SPENDING_RESTRICTED":"USER_SPENDING_RESTRICTED","PAYMENT_INFO_FAILED":"PAYMENT_INFO_FAILED","getDefaultValue":function(){return this.NOT_APPLICABLE}});var SKService_Streamate_User_Status=CM_Type_Enum.extend({"_class":"SKService_Streamate_User_Status"},{"NONE":"NONE","SM_LOGGED_IN":"SM_LOGGED_IN","SM_REQUIRES_PAYMENT_INFO":"SM_REQUIRES_PAYMENT_INFO","SM_VERIFYING_EMAIL":"SM_VERIFYING_EMAIL","SM_REQUIRES_PREPAY":"SM_REQUIRES_PREPAY","SM_DAILY_LIMIT_REACHED":"SM_DAILY_LIMIT_REACHED","SM_REQUIRES_SUPPORT":"SM_REQUIRES_SUPPORT","getDefaultValue":function(){return this.NONE}});var CM_App=CM_Class_Abstract.extend({"views":{},"logger":cm.logger||null,"lib":cm.lib||{},"viewer":null,"options":{},"ready":function(){this.logger.configure({"dev":cm.options.debug});this.promise.ready();this.error.ready();this.dom.ready();this.window.ready();this.date.ready();this.template.ready();this.router.ready();this.stream.ready()},"getDeployVersion":function(){return cm.options.deployVersion},"getSiteType":function(){return cm.options.site._type},"findView":function(t){if(!t){var e=_.find(cm.views,function(e){return!e.getParent()});if(!e){throw new CM_Exception("Cannot find root component")}return e}return _.find(this.views,function(e){return e.hasClass(t)})||null},"getViewList":function(t){if(!t){return this.views}return _.filter(this.views,function(e){return e.hasClass(t)})},"getLayout":function(){var e=this.findView("CM_Layout_Abstract");if(!e){throw new CM_Exception("Cannot find layout")}return e},"getDocument":function(){var e=this.findView("CM_View_Document");if(!e){throw new CM_Exception("Cannot find document")}return e},"rand":function(e,t){return e+Math.floor(Math.random()*(t-e+1))},"getUuid":function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=Math.random()*16|0,n=e=="x"?t:t&3|8;return n.toString(16)})},"retryDelayed":function(t,n,i){t*=1e3;n*=1e3;var o=t;var a;var s=function(){o=t;window.clearTimeout(a)};var r=function(){var e=this;window.clearTimeout(a);a=window.setTimeout(function(){i.call(e,r,s);o=Math.min(Math.max(t,o*2),n)},o)};i.call(this,r,s)},"getUrl":function(e,t,n){e=e||"";t=t||null;n=n||false;if(t){e+="?"+jQuery.param(t)}if(!n){e=cm.options.url+e}return e},"getUrlStatic":function(e){var t=cm.options.urlCdn+"/static";if(e){t+=e+"?"+cm.options.deployVersion}return t},"getUrlResource":function(e,t){var n=cm.options.urlCdn;if(e&&t){var i=[];i.push(e);if(cm.options.language){i.push(cm.options.language.abbreviation)}i.push(cm.getSiteType());i.push(cm.options.deployVersion);i=i.concat(t.split("/"));n+="/"+i.join("/")}return n},"getUrlServiceWorker":function(){return cm.options.urlServiceWorker},"getUrlUserContent":function(e){var t=e.match(new RegExp("^([^/]+)/"));if(null===t){throw new CM_Exception("Cannot detect namespace for user-content file `"+e+"`.")}var n=t[1];var i=cm.options.urlUserContentList;var o=_.has(i,n)?i[n]:i["default"];return o+"/"+e},"getUrlAjax":function(e){var t="/"+e;if(cm.options.language){t+="/"+cm.options.language.abbreviation}return this.getUrl(t)},"getClientId":function(){return $.cookie("clientId")},"getContext":function(){var e={};e[cm.options.name]={"client":cm.getClientId(),"browserWindow":cm.window.getId()};if(cm.viewer){e[cm.options.name].user=cm.viewer.id}return e},"factory":{"create":function(e){return this._create(e)},"_create":function(n){if($.isPlainObject(n)||_.isArray(n)){_.each(n,function(e,t){n[t]=this._create(e)}.bind(this))}if(this._isCmObject(n)){return this._toCmObject(n)}return n},"_isCmObject":function(e){var t=e&&e["_class"];var n=t&&window[t];var i=e instanceof Backbone.Model||e instanceof Backbone.Collection;return n&&!i},"_toCmObject":function(e){return new window[e["_class"]](e)}},"promise":{"ready":function(){var e={};if(cm.options.debug){e["warnings"]={"wForgottenReturn":false}}else{e["warnings"]=false}Promise.config(e)}},"error":{"_handlers":[],"ready":function(){$(window).on("unhandledrejection",function(e){e.preventDefault();var t=e.originalEvent;var n=null;if(t.detail&&t.detail.reason){n=t.detail.reason}else if(t.reason){n=t.reason}else{n=new Error("Unhandled promise rejection without reason.")}if(!(n instanceof Promise.CancellationError)){cm.error.handle(n)}})},"registerHandlers":function(e,n){_.each(e,function(e,t){cm.error.registerHandler(t,e,n)})},"registerHandler":function(e,t,n){n=n||window;cm.error._handlers.push({"errorName":e,"callback":t,"context":n})},"unregisterHandler":function(t,n,i){cm.error._handlers=_.reject(cm.error._handlers,function(e){return t===e.errorName&&(_.isFunction(n)?n===e.callback:true)&&(!_.isUndefined(i)?i===e.context:true)})},"log":function(e){_.defer(function(){cm.logger.addRecordError(e);throw e})},"handle":function(t){var e=true;if(t instanceof CM_Exception){var n=_.filter(cm.error._handlers,function(e){return e.errorName===t.name});if(0!==n.length){e=false;_.every(n,function(e){return false!==e.callback.call(e.context,t)})}else{cm.window.hint(t.message)}}if(e){throw t}}},"debug":{"viewTree":function(e){if(!(e instanceof CM_View_Abstract)){e=cm.findView(e?String(e):e)}if(!e){throw new Error("View not found")}console.group(e.getClass(),e.el);_.each(e.getChildren(),function(e){cm.debug.viewTree(e)});console.groupEnd()},"log":function(e){var t=_.toArray(arguments);var n=t.shift();var i="[CM]";cm.logger.debug.apply(cm.logger,[i+" "+n].concat(t))}},"dom":{"_swfId":0,"ready":function(){window.viewportUnitsBuggyfill.init()},"setup":function(e){e.find(".timeago").timeago();e.find(".clipSlide").clipSlide();e.find(".toggleNext").toggleNext();e.find(".tabs").tabs();e.find(".fancySelect").fancySelect();this._setupContentPlaceholder(e)},"_setupContentPlaceholder":function(e){var t=$();e.find(".clipSlide").each(function(){var e=$(this).find(".contentPlaceholder:gt(0)");t=t.add(e);$(this).on("toggle.clipSlide",function(){$(this).find(".contentPlaceholder:gt(0)").lazyImageSetup()})});e.find(".contentPlaceholder").not(t).lazyImageSetup()},"teardown":function(e){e.find(".openerDropdown").opener("close");e.find(".timeago").timeago("dispose");e.find("img.lazy").trigger("destroy.unveil")},"createAudio":function(e,t){e=_.isString(e)?[e]:e;var n=new cm.lib.Media.Audio;n.setOptions(t);n.setSources(e);return n}},"string":{"padLeft":function(e,t,n){n=n||" ";var i=String(e);return new Array(t-i.length+1).join(n)+i}},"date":{"ready":function(){$.timeago.settings.allowFuture=true;$.timeago.settings.autoDispose=false;$.timeago.settings.strings={"prefixAgo":cm.language.get(".date.timeago.prefixAgo",{"count":"%d"}),"prefixFromNow":cm.language.get(".date.timeago.prefixFromNow",{"count":"%d"}),"suffixAgo":cm.language.get(".date.timeago.suffixAgo",{"count":"%d"}),"suffixFromNow":cm.language.get(".date.timeago.suffixFromNow",{"count":"%d"}),"seconds":cm.language.get(".date.timeago.seconds",{"count":"%d"}),"minute":cm.language.get(".date.timeago.minute",{"count":"%d"}),"minutes":cm.language.get(".date.timeago.minutes",{"count":"%d"}),"hour":cm.language.get(".date.timeago.hour",{"count":"%d"}),"hours":cm.language.get(".date.timeago.hours",{"count":"%d"}),"day":cm.language.get(".date.timeago.day",{"count":"%d"}),"days":cm.language.get(".date.timeago.days",{"count":"%d"}),"month":cm.language.get(".date.timeago.month",{"count":"%d"}),"months":cm.language.get(".date.timeago.months",{"count":"%d"}),"year":cm.language.get(".date.timeago.year",{"count":"%d"}),"years":cm.language.get(".date.timeago.years",{"count":"%d"}),"wordSeparator":" ","numbers":[]};$.cookie("timezoneOffset",(new Date).getTimezoneOffset()*60)},"timestamp":function(){return(new Date).getTime()},"iso8601":function(e){return e.getUTCFullYear()+"-"+cm.string.padLeft(e.getUTCMonth()+1,2,"0")+"-"+cm.string.padLeft(e.getUTCDate(),2,"0")+"T"+cm.string.padLeft(e.getUTCHours(),2,"0")+":"+cm.string.padLeft(e.getUTCMinutes(),2,"0")+":"+cm.string.padLeft(e.getUTCSeconds(),2,"0")+"."+cm.string.padLeft(e.getUTCMilliseconds(),3,"0")+"Z"},"timeago":function(e,t){var n;if(e){n=new Date(e*1e3)}else{n=new Date}var i=n.toLocaleString();var o=this.iso8601(n);t+=" timeago";return'<time datetime="'+o+'" class="'+t+'">'+i+"</time>"}},"language":{"_keys":{},"set":function(e,t){this._keys[e]=t},"setAll":function(e){this._keys=e},"get":function(e,t){if(this._keys[e]===undefined){cm.rpc("CM_Model_Language.requestTranslationJs",{"languageKey":e});this.set(e,e)}var n=this._keys[e];if(t){_.each(t,function(e,t){n=n.replace("{$"+t+"}",e)})}return n}},"cache":{"_values":{},"get":function(e,t,n){if(!(e in this._values)){this._values[e]=t.call(n)}return this._values[e]}},"ui":{"confirm":function(e,t,n){var i=$('<input type="button" class="button button-default" />').val(cm.language.get("Ok"));var o=$('<input type="button" class="button button-default" />').val(cm.language.get("Cancel"));var a=$('<div class="box"><div class="box-header nowrap"><h2></h2></div><div class="box-body"></div><div class="box-footer"></div></div>');a.find(".box-header h2").text(cm.language.get("Confirmation"));a.find(".box-body").text(e);a.find(".box-footer").append(i,o);a.floatbox();i.click(function(){a.floatbox("close");t.call(n)});o.click(function(){a.floatbox("close")});i.focus()}},"template":{"ready":function(){_.templateSettings={"evaluate":/\[\[(.+?)\]\]/g,"interpolate":/\[\[=(.+?)\]\]/g,"escape":/\[\[-(.+?)\]\]/g}},"render":function(e,t){var n=$(this.renderHtml(e,t));cm.dom.setup(n);return n},"renderHtml":function(e,t){var n=_.template(e);return n(t).replace(/^\s+|\s+$/g,"")}},"window":{"_id":null,"_hasFocus":true,"_$hidden":null,"getId":function(){if(!this._id){this._id=cm.getUuid()}return this._id},"focus":{"_get":function(){var e=cm.storage.get("focusWindows");if(e===null){e=[]}return e},"_set":function(e){cm.storage.set("focusWindows",e)},"add":function(e){if(this.isLast(e)){return}this.remove(e);var t=this._get();t.push(e);this._set(t)},"remove":function(e){var t=this._get();var n=t.indexOf(e);if(n!==-1){t.splice(n,1);this._set(t)}},"isLast":function(e){var t=this._get();var n=t.indexOf(e);return n!==-1&&n===t.length-1}},"ready":function(){var e=this;e.focus.add(e.getId());$(window).on("beforeunload",function(){e.focus.remove(e.getId())});$(window).focus(function(){e.focus.add(e.getId());e._hasFocus=true}).blur(function(){e._hasFocus=false});this.title.ready()},"isLastFocus":function(){return this.focus.isLast(this.getId())},"hasFocus":function(){return this._hasFocus},"appendHidden":function(e){if(!this._$hidden){this._$hidden=$('<div style="display:none;" />').appendTo("body")}this._$hidden.append(e)},"isHidden":function(e){if(!this._$hidden){return false}return $.contains(this._$hidden[0],e)},"hint":function(e){$.windowHint(e)},"fastScroll":{"_instance":null,"enable":function(){if(!this._instance){this._instance=new FastScroll}},"disable":function(){if(this._instance){this._instance.destroy();this._instance=null}}},"title":{"_prefix":null,"_text":"","ready":function(){this.setText(document.title)},"setPrefix":function(e){this._prefix=e;this._update()},"setText":function(e){this._text=e;this._update()},"_update":function(){var e="";if(this._prefix){e+=this._prefix+" "}if(this._text){e+=this._text}document.title=e}}},"storage":{"set":function(e,t){this._getPersistentStorage().set(e,t)},"get":function(e){var t=this._getPersistentStorage().get(e);return!_.isUndefined(t)?t:null},"del":function(e){this._getPersistentStorage().del(e)},"_data":null,"_getPersistentStorage":function(){if(!this._data){this._data=new cm.lib.PersistentStorage(cm.options.name+":"+cm.getSiteType(),localStorage,cm.logger)}return this._data}},"ajax":function(e,o,a){a=_.defaults(a||{},{"retry":true});var s=this.getUrlAjax(e);var r;var c=new Promise(function(t,i,e){r=$.ajax(s,{"data":JSON.stringify(o),"type":"POST","dataType":"json","contentType":"application/json","cache":false});var n=a.retry?3:1;r.retry({"times":n,"statusCodes":[405,500,503]}).done(function(e){if(cm.getDeployVersion()!=e.deployVersion){cm.router.forceReload()}if(e.error){i(new(CM_Exception.factory(e.error.type))(e.error.msg,e.error.isPublic,e.error.metaInfo))}else{t(cm.factory.create(e.success))}}).fail(function(e,t){if(e.status===0){if(window.navigator.onLine){c.cancel()}else{i(new CM_Exception_RequestFailed(cm.language.get("No Internet connection")))}}else{var n=cm.language.get("An unexpected connection problem occurred.");if(cm.options.debug){n=e.responseText||t}i(new CM_Exception(n))}});e(function(){if(r){r.abort()}})});return c},"rpc":function(e,t){return this.ajax("rpc",{"method":e,"params":t}).then(function(e){if(typeof e.result==="undefined"){throw new CM_Exception("RPC response has undefined result")}return e.result})},"stream":{"_adapter":null,"_channelDispatchers":{},"ready":function(){if(!cm.options.stream.enabled){return}if(!cm.options.stream.channel){return}if(cm.options.stream.channel.key&&cm.options.stream.channel.type){var e=cm.options.stream.channel.key+":"+cm.options.stream.channel.type;this._subscribe(e)}},"bind":function(e,t,n,i,o,a){var s=e+":"+t;if(!cm.options.stream.enabled){return}if(!e||!t){throw new CM_Exception("No channel provided")}if(!this._channelDispatchers[s]){this._subscribe(s)}this._channelDispatchers[s].on(this._getEventNames(n,a),i,o)},"unbind":function(e,t,n,i,o){var a=e+":"+t;if(!this._channelDispatchers[a]){return}if(!e||!t){throw new CM_Exception("No channel provided")}this._channelDispatchers[a].off(this._getEventNames(n,true),i,o);if(this._getBindCount(a)===0){this._unsubscribe(a)}},"publish":function(e,t,n,i){var o=e+":"+t;this._getAdapter().publish(o,n,i)},"_getEventNames":function(e,t){var n=e;if(e&&t){n+=" client-"+e}return n},"_getBindCount":function(e){if(!this._channelDispatchers[e]||!this._channelDispatchers[e]._events){return 0}return _.size(this._channelDispatchers[e]._events)},"_getAdapter":function(){if(!this._adapter){this._adapter=new window[cm.options.stream.adapter](cm.options.stream.options)}return this._adapter},"_subscribe":function(n){var i=this;this._channelDispatchers[n]=_.clone(Backbone.Events);this._getAdapter().subscribe(n,{"sessionId":$.cookie("sessionId")},function(e,t){if(i._channelDispatchers[n]){t=cm.factory.create(t);cm.debug.log("Stream channel (`%s): event `%s`: %o",n,e,t);i._channelDispatchers[n].trigger(e,t)}});cm.debug.log("Stream channel (`%s`): subscribe",n)},"_unsubscribe":function(e){if(this._channelDispatchers[e]){delete this._channelDispatchers[e]}this._adapter.unsubscribe(e);cm.debug.log("Stream channel (`%s`): unsubscribe",e)}},"viewEvents":{"_dispatcher":_.clone(Backbone.Events),"_getEventName":function(e,t,n){return e.getAutoId()+":"+t+":"+n},"bind":function(e,t,n,i,o){this._dispatcher.on(this._getEventName(e,t,n),i,o)},"unbind":function(e,t,n,i,o){this._dispatcher.off(this._getEventName(e,t,n),i,o)},"trigger":function(e,t,n){var i=e;var o=_.toArray(arguments).slice(2);while(i=i.getParent()){this._dispatcher.trigger.apply(this._dispatcher,[this._getEventName(i,e.getClass(),t),e].concat(o))}}},"event":{"_dispatcher":_.clone(Backbone.Events),"bind":function(e,t,n){this._dispatcher.on(e,t,n)},"unbind":function(e,t,n){this._dispatcher.off(e,t,n)},"trigger":function(e,t){this._dispatcher.trigger(e,t)}},"model":{"types":{}},"action":{"verbs":{},"types":{},"bind":function(e,t,n,i,o,a){cm.stream.bind(n,i,"CM_Action_Abstract:"+e+":"+t,o,a)},"unbind":function(e,t,n,i,o,a){cm.stream.unbind(n,i,"CM_Action_Abstract:"+e+":"+t,o,a)}},"keyCode":{"ALT":18,"BACKSPACE":8,"CAPS_LOCK":20,"COMMA":188,"COMMAND":91,"COMMAND_LEFT":91,"COMMAND_RIGHT":93,"CONTROL":17,"DELETE":46,"DOWN":40,"END":35,"ENTER":13,"ESCAPE":27,"HOME":36,"INSERT":45,"LEFT":37,"MENU":93,"NUMPAD_ADD":107,"NUMPAD_DECIMAL":110,"NUMPAD_DIVIDE":111,"NUMPAD_ENTER":108,"NUMPAD_MULTIPLY":106,"NUMPAD_SUBTRACT":109,"PAGE_DOWN":34,"PAGE_UP":33,"PERIOD":190,"RIGHT":39,"SHIFT":16,"SPACE":32,"TAB":9,"UP":38,"WINDOWS":91},"router":{"_shouldReload":false,"hrefInitialIgnore":null,"ready":function(){var a=this;this.hrefInitialIgnore=location.href;$(window).on("popstate",function(){if(a.hrefInitialIgnore===location.href){a.hrefInitialIgnore=null;return}a.hrefInitialIgnore=null;a._navigateToUrl(location.href)});var s=cm.getUrl();$(document).on("click","a[href]:not([data-router-disabled=true]):not([target=_blank])",function(e){var t=e.ctrlKey||e.metaKey||e.shiftKey;var n=0===this.href.indexOf(s);if(!t&&n){var i=this.href.substr(s.length);var o=$(this).data("force-reload");a.route(i,o);e.preventDefault()}})},"forceReload":function(){this._shouldReload=true},"route":function(e,t,n){t=this._shouldReload||t||false;n=n||false;var i=cm.getUrl();if("/"==e.charAt(0)){e=i+e}var o=this._getFragmentByUrl(e);if(t||0!==e.indexOf(i)){window.location.assign(e);return Promise.resolve()}if(o!==this._getFragment()){if(n){this.replaceState(o)}else{this.pushState(o)}}return this._navigateToUrl(e)},"pushState":function(e){this.hrefInitialIgnore=null;window.history.pushState(null,null,e)},"replaceState":function(e){this.hrefInitialIgnore=null;window.history.replaceState(null,null,e)},"_getFragment":function(){return this._getFragmentByLocation(window.location)},"_getLocationByUrl":function(e){var t=document.createElement("a");if(e){t.href=e}return t},"_getFragmentByLocation":function(e){return e.pathname+e.search+e.hash},"_getFragmentByUrl":function(e){return this._getFragmentByLocation(this._getLocationByUrl(e))},"_navigateToUrl":function(e){Promise.try(function(){cm.event.trigger("navigate:start",{"url":e})}).then(function(){return this._handleLocationChange(e)}.bind(this)).then(function(){cm.event.trigger("navigate:end",{"url":e})})},"_handleLocationChange":function(e){var t=null;var n=cm.getLayout().findPage();if(n&&n.hasStateParams()){var i=this._getLocationByUrl(n.getUrl());var o=this._getLocationByUrl(e);if(i.pathname===o.pathname){var a=cm.request.parseQueryParams(i.search);var s=cm.request.parseQueryParams(o.search);var r=n.getStateParams();var c=_.pick(a,_.difference(_.keys(a),r));var l=_.pick(s,_.difference(_.keys(s),r));if(_.isEqual(c,l)){t=_.pick(s,_.intersection(_.keys(s),r))}}}if(t){if(false!==cm.getLayout().getPage().routeToState(t,e)){return Promise.resolve()}}var u=cm.getUrl();var h=cm.options.urlBase;if(0===e.indexOf(u)){var d=e.substr(h.length);return cm.getDocument().loadPage(d)}else{window.location.assign(e);return Promise.resolve()}}},"request":{"parseQueryParams":function(e){var a=queryString.parse(e);var s=/^(\w+)\[(\w+)]$/;_.each(a,function(e,t){var n=s.exec(t);if(n){var i=n[1];var o=n[2];delete a[t];if(!a[i]){a[i]={}}a[i][o]=e}});return a}},"userAgent":function(e){return window.UserAgentParser.parse(e)}(navigator.userAgent||"")});var CM_Component_Abstract=CM_View_Abstract.extend({"_class":"CM_Component_Abstract","_ready":function(){CM_View_Abstract.prototype._ready.call(this);cm.dom.setup(this.$());this.on("destruct",function(){cm.dom.teardown(this.$())})},"repaint":function(){},"bindRepaintOnWindowResize":function(){var e=this;var t=function(){e.repaint()};$(window).on("resize",t);this.on("destruct",function(){$(window).off("resize",t)})},"$":function(e){if(!e){return this.$el}return $(e,this.el)},"popOut":function(e,t){this.repaint();var n=new $.floatbox(e);n.show(this.$el);this.repaint();if(t){var i=this;n.$floatbox.one("floatbox-close",function(){i.remove()})}},"popIn":function(e){if(e){this.$el.floatbox("setOptions",e)}this.$el.floatbox("close")},"error":function(e){cm.window.hint(e)},"message":function(e){cm.window.hint(e)},"reload":function(e,t){t=_.defaults(t||{},{"modal":true,"method":"reloadComponent"});e=e||{};return this.try(function(){return this.ajax(t.method,e,t)}).then(function(e){return this._replaceView(e)})},"replaceWithComponent":function(e,t,n){if(!this.getParent()){throw new CM_Exception("Cannot replace root component")}var i=this;n=_.defaults(n||{},{"modal":false});return this.getParent().prepareComponent(e,t,n).then(function(e){e.replaceWithHtml(this.$el);return e})}});var CM_Component_Debug=CM_Component_Abstract.extend({"_class":"CM_Component_Debug","active":false,"cacheNames":null,"events":{"click .toggleDebugBar":"toggleDebugBar","click .clearCache":"clearCache","click .toggleWindow":function(e){this.toggleWindow($(e.currentTarget).data("name"))}},"ready":function(){var n=this;$(window).bind("keydown.debugBar",function(e){if(e.ctrlKey||e.metaKey){return}if(e.which===68){var t=e.target.tagName.toLowerCase();if(t==="input"||t==="textarea"||!!e.target.getAttribute("contenteditable")){return}n.toggleDebugBar()}if(n.active&&e.which===67){n.clearCache()}});this.on("destruct",function(){$(window).unbind("keydown.debugBar")})},"toggleDebugBar":function(){var e=this.$(".debugBar");if(this.active){e.stop().transition({"x":"-100%"},"400ms","snap");this.active=false}else{e.stop().transition({"x":0},"400ms","snap");this.active=true}},"toggleWindow":function(e){this.$('.panel:not([data-name="'+e+'"])').removeClass("active");this.$('.panel[data-name="'+e+'"]').toggleClass("active");this.$(".window:not(."+e+")").hide();this.$(".window."+e).toggle()},"clearCache":function(){var t={};_.each(this.cacheNames,function(e){t[e]=this.$("."+e).is(":checked")});this.ajax("clearCache",t).then(function(){location.reload()})}});var CM_Component_EmailPreview=CM_Component_Abstract.extend({"_class":"CM_Component_EmailPreview","html":null,"ready":function(){var e=this.$(".preview-html");e.attr("src","data:text/html;base64;charset=utf-8,"+this.html)}});var CM_Component_Example=CM_Component_Abstract.extend({"_class":"CM_Component_Example","uname":null,"profile":null,"pingCount":0,"events":{"click .reloadComponent":"reloadChinese","click .popoutComponent":"popOut","click .popinComponent":"popIn","click .multiLevelPopoutComponent":"multiLevelPopout","click .loadComponent":"loadExample","click .loadComponent_callback":"loadExampleInline","click .removeComponent":"myRemove","click .callRpcTime":"callRpc","click .callAjaxTest":"callAjaxTest","click .throwError_500_text_callback":"error_500_text_callback","click .throwError_599_text":"error_599_text","click .throwError_CM_Exception_public_callback":"error_CM_Exception_public_callback","click .throwError_CM_Exception_public":"error_CM_Exception_public","click .throwError_CM_Exception":"error_CM_Exception","click .throwError_CM_Exception_AuthRequired_public_callback":"error_CM_Exception_AuthRequired_public_callback","click .throwError_CM_Exception_AuthRequired_public":"error_CM_Exception_AuthRequired_public","click .throwError_CM_Exception_AuthRequired":"error_CM_Exception_AuthRequired","click .callAjaxPing":"ping","click .confirmAction":"confirmAction","click .toggleWindow":function(e){var t=$(e.currentTarget);this.toggleWindow(t)}},"streams":{"ping":function(e){this.$(".stream .output").append(e.number+": "+e.message+"<br />").scrollBottom()}},"ready":function(){this.message("Component ready, uname: "+this.uname)},"multiLevelPopout":function(){var o=function(t){var n=t.children(".innerPopoutComponent");var i=t.children(".innerPopinComponent");var e=t.children(".innerPopup");t.hide();e.hide();n.on("click",function(){o(e);e.floatbox()});i.on("click",function(){t.floatbox("close")});t.on("floatbox-open",function(e){e.stopPropagation();t.show()});t.on("floatbox-close",function(e){e.stopPropagation();n.off("click");i.off("click");t.off("floatbox-open floatbox-close");t.hide()})};var e=this.$(".innerPopup.first").clone();o(e);e.floatbox()},"showTab":function(e){this.$(".example-navigation.tabs").tabs(e)},"reloadChinese":function(){this.reload({"foo":"some chinese.. 百度一下，你就知道 繁體字!"})},"myRemove":function(){this.remove()},"loadExample":function(){this.popOutComponent(this.getClass(),{"foo":"value2","site":this.getParams().site})},"loadExampleInline":function(){var t=this;this.getParent().prepareComponent(this.getClass(),{"foo":"value3","site":this.getParams().site}).then(function(e){e.$el.hide().insertBefore(t.$el).slideDown(600)})},"callAjaxTest":function(){var t=this;return this.ajax("test",{"x":"myX"}).then(function(e){t.message("ajax_test(): "+e)})},"callRpc":function(){return cm.rpc(this.getClass()+".time",[]).then(function(e){cm.window.hint("Time: "+e)})},"error_500_text_callback":function(){var t=this;this.ajax("error",{"status":500,"text":"Errortext"}).catch(CM_Exception,function(e){t.error("callback( type:"+e.name+", msg:"+e.message+" )")})},"error_599_text":function(){this.ajax("error",{"status":599,"text":"Errortext"})},"error_CM_Exception_public_callback":function(){var t=this;this.ajax("error",{"exception":"CM_Exception","text":"Errortext","public":true}).catch(CM_Exception,function(e){t.error("callback( type:"+e.name+", msg:"+e.message+" )")})},"error_CM_Exception_public":function(){this.ajax("error",{"exception":"CM_Exception","text":"Errortext","public":true})},"error_CM_Exception":function(){this.ajax("error",{"exception":"CM_Exception","text":"Errortext"})},"error_CM_Exception_AuthRequired_public_callback":function(){var t=this;this.ajax("error",{"exception":"CM_Exception_AuthRequired","text":"Errortext","public":true}).catch(CM_Exception,function(e){t.error("callback( type:"+e.name+", msg:"+e.message+" )")})},"error_CM_Exception_AuthRequired_public":function(){this.ajax("error",{"exception":"CM_Exception_AuthRequired","text":"Errortext","public":true})},"error_CM_Exception_AuthRequired":function(){this.ajax("error",{"exception":"CM_Exception_AuthRequired","text":"Errortext"})},"ping":function(){this.ajax("ping",{"number":this.pingCount});this.pingCount++},"confirmAction":function(){cm.window.hint("Action Confirmed!")},"toggleWindow":function(e){var t=e.children(".panel");var n=e.children(".window");n.toggleModal(function(){n.toggle();t.toggleClass("active")})}});var CM_Component_Graph=CM_Component_Abstract.extend({"_class":"CM_Component_Graph","series":null,"flotOptions":null,"ready":function(){this.updateGraph(this.series)},"updateGraph":function(e){var t=[];_.each(e,function(e){var i={};i.label=e.label;i.data=[];_.each(e.data,function(e,t){var n=t;if("time"==this.flotOptions.xaxis.mode){n=t+"000"}i.data.push([n,e])},this);t.push(i)},this);$.plot(this.$(),t,this.flotOptions)}});var CM_Component_LogList=CM_Component_Abstract.extend({"_class":"CM_Component_LogList","level":null,"type":null,"events":{"click .flushLog":"flushLog"},"flushLog":function(){this.ajaxModal("flushLog",{"level":this.level,"type":this.type})}});var CM_Component_NotAllowed=CM_Component_Abstract.extend({"_class":"CM_Component_NotAllowed"});var CM_Component_Notfound=CM_Component_Abstract.extend({"_class":"CM_Component_Notfound"});var CM_Form_Abstract=CM_View_Abstract.extend({"_class":"CM_Form_Abstract","autosave":null,"requiredFieldNames":null,"actionNames":null,"_fields":{},"_autosaveFields":[],"_autosaveSubmitThrottled":promiseThrottler(function(){return this.try(function(){return this._submitOnly(this.autosave,false)}).then(function(){this._autosaveFields.forEach(function(e){e.success()});this._autosaveFields=[]}).catch(CM_Exception_FormFieldValidation,function(e){this._autosaveFields=[];this._displayValidationError(e)})},{"cancelLeading":true}),"initialize":function(){CM_View_Abstract.prototype.initialize.call(this);this._fields={}},"events":{"reset":function(){_.each(this._fields,function(e){e.reset()});this.resetErrors()}},"ready":function(){},"_ready":function(){var i=this;_.each(this.getActionNames(),function(e){var t=$("#"+this.getAutoId()+"-"+e+"-button");var n=t.data("event");if(!n){n="click"}t.on(n,{"action":e},function(e){e.preventDefault();e.stopPropagation();return i.submit(e.data.action)})},this);if(this.autosave){this.on("change",function(e){if(e){i._autosaveFields.push(e);i._autosaveSubmitThrottled()}})}else{this.$el.on("submit",function(){i.$el.find('input[type="submit"], button[type="submit"]').first().click();return false})}this.$el.on("reset",function(){_.defer(function(){i.trigger("reset")})});CM_View_Abstract.prototype._ready.call(this)},"registerField":function(e){this._fields[e.getName()]=e;e.on("change",function(){this.trigger("change",e)},this)},"getField":function(e){if(!this._fields[e]){throw new CM_Exception(this.getClass()+" cannot find form field `"+e+"`")}return this._fields[e]},"hasField":function(e){return!!this._fields[e]},"$":function(e){if(!e){return this.$el}e=e.replace("#","#"+this.getAutoId()+"-");return $(e,this.el)},"getFieldNames":function(){return _.keys(this._fields)},"getFields":function(){return _.values(this._fields)},"getActionNames":function(){if(null===this.actionNames){throw new CM_Exception("Missing `actionNames` on form",false,{"form":this.getClass()})}return this.actionNames},"getData":function(){var t={};_.each(this._fields,function(e){if(e.getEnabled()){t[e.getName()]=e.getValue()}});return t},"submit":function(e){return this.try(function(){return this._submitOnly(e,true)}).catch(CM_Exception_FormFieldValidation,function(e){this._displayValidationError(e)})},"_submitOnly":function(o,e){var t=this.getData();var n=this._getErrorListRequired(t);this.resetErrors();if(_.size(n)){var i=new CM_Exception_FormFieldValidation;i.setErrorList(n);return Promise.reject(i)}return this.try(function(){if(e){this.disable()}this.trigger("submit",[t]);return cm.ajax("form",{"viewInfoList":this.getViewInfoList(),"actionName":o,"data":t},{"retry":false})}).then(function(e){if(e.errors){var t=new CM_Exception_FormFieldValidation;t.setErrorList(e.errors);this.trigger("error error."+o,t);throw t}if(e.exec){this.evaluation=new Function(e.exec);this.evaluation()}if(e.messages){for(var n=0,i;i=e.messages[n];n++){this.message(i)}}this.trigger("success success."+o,e.data);return e.data}).finally(function(){if(e){this.enable()}})},"_displayValidationError":function(e){var t=e.getErrorList();for(var n=t.length-1,i;i=t[n];n--){if(_.isArray(i)){this.getField(i[1]).error(i[0])}else{this.error(i)}}},"reset":function(){this.el.reset()},"disable":function(){this.$().disable()},"enable":function(){this.$().enable()},"error":function(e){cm.window.hint(e)},"message":function(e){cm.window.hint(e)},"resetErrors":function(){_.each(this._fields,function(e){e.error(null)})},"_isRequiredField":function(e){return _.include(this.requiredFieldNames,e)},"_getErrorListRequired":function(o){var a=[];_.each(this._fields,function(e,t){var n=this._isRequiredField(t);if(n){if(e.isEmpty(o[t])){var i=this._getFieldLabel(e);if(i){a.push([cm.language.get("{$label} is required.",{"label":i}),t])}else{a.push([cm.language.get("Required"),t])}}}},this);return a},"_getFieldLabel":function(e){var t=this.$('label[for="'+e.getAutoId()+'-input"]');if(t.length){return t.first().text()}if(e.getInput().attr("placeholder")){return e.getInput().attr("placeholder")}return null}});var CM_Form_Example=CM_Form_Abstract.extend({"_class":"CM_Form_Example","ready":function(){var t=this;this.getFields().forEach(function(e){e.on("ready",function(){e.on("change",t.logData.bind(t))})});this.on("success",function(e){cm.window.hint("Form successfully submitted. See browser console for response.");console.debug("Response:",e)})},"logData":promiseThrottler(function(){var n=this._getDataTable();var e=this.getData();return this.ajax("validate",{"data":this.getData()}).then(function(e){_.each(e,function(e,t){n[t]["value (server)"]=e["value"];n[t]["empty (server)"]=e["empty"];n[t]["validation (server)"]=e["validationError"]});console.clear();console.table(n)})},{"cancelLeading":true}),"_getDataTable":function(){var n={};this.getFieldNames().forEach(function(e){var t=this.getField(e);n[e]={"value (client)":t.getValue(),"empty (client)":t.isEmpty(t.getValue())}}.bind(this));return n}});var CM_Form_ExampleAutosave=CM_Form_Abstract.extend({"_class":"CM_Form_ExampleAutosave"});var CM_Form_ExampleIcon=CM_Form_Abstract.extend({"_class":"CM_Form_ExampleIcon","events":{"click .iconBox":function(e){this.selectIcon($(e.currentTarget))}},"ready":function(){this.on("change",function(){this._updateCss()},this);this._updateCss()},"selectIcon":function(e){e.addClass("active").siblings().removeClass("active");this.$(".iconMarkup").text('<span class="icon icon-'+e.find(".label").text()+'"></span>')},"_getShadowValue":function(){return[this.getField("shadowColor").getValue()||"#fff",this.getField("shadowX").getValue()+"px",this.getField("shadowY").getValue()+"px",this.getField("shadowBlur").getValue()+"px"].join(" ")},"_updateCss":function(){var e={};e["background-color"]=this.$(".iconBox").css("background-color",this.getField("colorBackground").getValue()).css("background-color");e["text-shadow"]=this.$(".iconBox .icon").css("text-shadow",this._getShadowValue()).css("text-shadow");e["color"]=this.$(".iconBox .icon").css("color",this.getField("color").getValue()).css("color");e["font-size"]=this.$(".iconBox .icon").css("font-size",this.getField("sizeSlider").getValue()+"px").css("font-size");this.$(".iconCss").html(_.reduce(e,function(e,t,n){return e+n+": "+t+";<br />"},""))}});var CM_FormField_Abstract=CM_View_Abstract.extend({"_class":"CM_FormField_Abstract","fieldOptions":{},"initialize":function(){CM_View_Abstract.prototype.initialize.call(this);this.fieldOptions={}},"ready":function(){},"validate":function(){return this.try(function(){var t=this.getValue();if(this.isEmpty(t)){this.error(null);return}var n=this;return this.ajax("validate",{"userInput":t,"form":this.getForm().getClass(),"fieldName":this.getName()}).then(function(){if(t==n.getValue()){n.error()}}).catch(CM_Exception,function(e){if(e instanceof CM_Exception_FormFieldValidation){n.error(e.message)}else if(t==n.getValue()){throw e}})})},"reset":function(){},"getForm":function(){return this.getParent()},"$":function(e){if(!e){return this.$el}return $(e,this.el)},"getName":function(){return this.options.params.name},"getInput":function(){var e=this.$("input:first, select:first");if(e.length===0){throw new CM_Exception("Can't find input for `"+this.getName()+"` field")}return e},"getValue":function(){return this.getInput().val()},"setValue":function(e){this.getInput().val(e)},"getEnabled":function(){return this.getInput().is(":enabled")},"getOptions":function(){return this.fieldOptions},"getOption":function(e){var t=this.getOptions();if(null===t[e]||""===t[e]){return null}return t[e]},"setFocus":function(){this.getInput().focus()},"success":function(){this.error(null);this.$el[0].dataset.formfieldSuccess=true},"error":function(e){var t=this.$(".messages");var n=t.find(".formField-error");var i=this.$el[0];delete i.dataset.formfieldError;delete i.dataset.formfieldSuccess;if(e){if(t.length){this.$el.triggerReflow();i.dataset.formfieldError=true;if(n.length){n.html(e)}else{n=$('<div class="formField-error"></div>').hide().appendTo(t);n.html(e);n.slideDown("fast")}}else{throw new CM_Exception("FormField `"+this.getName()+"`: "+e)}}else{n.remove()}},"isEmpty":function(e){if(_.isNull(e)){return true}if(_.isArray(e)){return 0===e.length}if(_.isBoolean(e)){return false}return 0===String(e).trim().length}});var CM_FormField_Boolean=CM_FormField_Abstract.extend({"_class":"CM_FormField_Boolean","events":{"change input":function(){this.trigger("change")}},"getInput":function(){return this.$("input[type=checkbox]")},"getValue":function(){return this.getInput().is(":checked")},"setValue":function(e){if(e){this.getInput().prop("checked","checked")}else{this.getInput().removeAttr("checked")}}});var CM_FormField_Captcha=CM_FormField_Abstract.extend({"_class":"CM_FormField_Captcha","ready":function(){var e=this;this.$(".captcha:eq(0)").find(".refreshCaptcha").click(function(){e.refresh()});this.getForm().bind("error",function(){e.refresh()})},"refresh":function(){this.ajax("createNumber",{}).then(function(e){var t=this.$(".captcha:eq(0)");var n=t.find("img");n.attr("src",n.attr("src").replace(/\?[^\?]+$/,"?id="+e));t.find("input[name*=id]").val(e);t.find("input[name*=value]").val("").focus()})},"getInput":function(){return this.$("input[name*=id], input[name*=value]")},"getValue":function(){return{"id":this.$("input[name*=id]").val(),"value":this.$("input[name*=value]").val()}},"setValue":function(e){this.$("input[name*=id]").val(e.id);this.$("input[name*=value]").val(e.value)}});var CM_FormField_Color=CM_FormField_Abstract.extend({"_class":"CM_FormField_Color","events":{"input input":function(){this.trigger("change")}}});var CM_FormField_Date=CM_FormField_Abstract.extend({"_class":"CM_FormField_Date","ready":function(){this.bindJquery(this.$("select"),"change",function(){this.trigger("change")})},"isEmpty":function(e){return _.isEmpty(e.day)||_.isEmpty(e.month)||_.isEmpty(e.year)},"getInput":function(){return this.$("select")},"getValue":function(){return{"day":this.$("select.day").val(),"month":this.$("select.month").val(),"year":this.$("select.year").val()}},"setValue":function(e){this.$("select.day").val(e.day);this.$("select.month").val(e.month);this.$("select.year").val(e.year)}});var CM_FormField_DateTimeInterval=CM_FormField_Abstract.extend({"_class":"CM_FormField_DateTimeInterval","ready":function(){this.bindJquery(this.getInput(),"change",function(){this.trigger("change")})},"isEmpty":function(e){return _.isEmpty(e.day)||_.isEmpty(e.month)||_.isEmpty(e.year)||_.isEmpty(e.start)||_.isEmpty(e.end)},"getInput":function(){return this.$("select, input")},"getValue":function(){return{"day":this.$("select.day").val(),"month":this.$("select.month").val(),"year":this.$("select.year").val(),"start":this.$("input.start").val(),"end":this.$("input.end").val()}},"setValue":function(e){this.$("select.day").val(e.day);this.$("select.month").val(e.month);this.$("select.year").val(e.year);this.$("input.start").val(e.year);this.$("input.end").val(e.year)}});var CM_FormField_File=CM_FormField_Abstract.extend({"_class":"CM_FormField_File","events":{"click .deleteFile":function(e){$(e.currentTarget).closest(".preview").remove()}},"ready":function(){var o=this;var t=this.getInput();var a=o.getOption("allowedExtensions");var s=_.isEmpty(a)?null:new RegExp(".("+a.join("|")+")$","i");var r=0;if(!Modernizr.fileinput){t.prop("disabled",true);o.$(".uploadButton").addClass("disabled");o.$(".notSupported").show()}var e=navigator.userAgent.match(/iP(ad|hone|od)/i);if(e||o.getOption("cardinality")==1){t.removeAttr("multiple")}t.fileupload({"dataType":"json","url":cm.getUrl("/upload",{"field":o.getClass()},true),"dropZone":this.$el,"formData":function(e){return t},"send":function(e,t){r++;o.error(null);_.each(t.files,function(e){if(s&&!s.test(e.name)){o.error(cm.language.get("{$file} has an invalid extension. Only {$extensions} are allowed.",{"file":e.name,"extensions":a.join(", ")}));e.error=true}});t.files=_.reject(t.files,function(e){return e.error});var n=o.getOption("cardinality");var i=n&&n<=o.$(".previews .preview").length;if(i){o.error(cm.language.get("You can only select {$cardinality} items.",{"cardinality":n}))}if(_.isEmpty(t.files)||i){t.skipFailMessage=true;return false}t.$preview=$('<li class="preview"></li>');o.$(".previews").append(t.$preview);o.showSpinner(true)},"done":function(e,t){if(t.result.success){t.$preview.html(t.result.success.preview+'<input type="hidden" name="'+o.getName()+'[]" value="'+t.result.success.id+'"/>')}else if(t.result.error){t.$preview.remove();o.error(t.result.error.msg)}},"fail":function(e,t){if(t.$preview){t.$preview.remove()}if(!t.skipFailMessage){o.error("Upload error")}},"always":function(e,t){r--;if(r===0){o.showSpinner(false);if(o.getValue().length>0){o.trigger("uploadComplete",t.files)}}}});this.bindJquery($(document),"dragenter",function(){o.$el.addClass("dragover")});this.bindJquery($(document),"drop",function(){o.$el.removeClass("dragover")});this.bindJquery($(document),"drop dragover",function(e){e.preventDefault()})},"getInput":function(){return this.$('input[type="file"]')},"getValue":function(){var e=this.$('input[name="'+this.options.params.name+'[]"]').map(function(){return $(this).val()}).get();e=_.compact(e);return e},"setValue":function(e){throw new CM_Exception("Not implemented")},"reset":function(){this.$(".previews").empty()},"showSpinner":function(e){this.$(".uploadButton").attr("data-progress",e?"":null)}});var CM_FormField_FileImage=CM_FormField_File.extend({"_class":"CM_FormField_FileImage"});var CM_FormField_GeoPoint=CM_FormField_Abstract.extend({"_class":"CM_FormField_GeoPoint","isEmpty":function(e){return _.isEmpty(e.latitude)||_.isEmpty(e.longitude)},"getValue":function(){return{"latitude":this.$("[name*=latitude]").val(),"longitude":this.$("[name*=longitude]").val()}},"setValue":function(e){this.$("[name*=latitude]").val(e.latitude);this.$("[name*=longitude]").val(e.longitude)}});var CM_FormField_Hidden=CM_FormField_Abstract.extend({"_class":"CM_FormField_Hidden"});var CM_FormField_Set=CM_FormField_Abstract.extend({"_class":"CM_FormField_Set","events":{"change input":function(){this.trigger("change")}},"getInput":function(){return this.$(':checkbox[name="'+this.options.params.name+'[]"]')},"getValue":function(){return this.getInput().filter(":enabled:checked").get().map(function(e){return $(e).val()})},"setValue":function(e){this.getInput().removeAttr("checked");_.each(e,function(e){this.getInputByValue(e).prop("checked","checked")},this)},"getInputByValue":function(e){var t=this.getInput().filter("[value="+e+"]");if(!t.length){throw new CM_Exception("Invalid value `"+e+"` for `"+this.getName()+"` form field")}return t}});var CM_FormField_SliderAbstract=CM_FormField_Abstract.extend({"_class":"CM_FormField_SliderAbstract","_$noUiHandle":null,"_slider":null,"sliderStart":null,"ready":function(){var n=this;var e=this.$(".noUiSlider");var t=this._slider=e[0];var i=[true,false];for(var o=0;o<this._getCardinality()-1;o++){i.unshift(false)}noUiSlider.create(this._slider,{"range":{"min":n.getOption("min"),"max":n.getOption("max")},"start":this.sliderStart,"step":n.getOption("step"),"connect":i,"behaviour":"tap","tooltips":true,"format":{"to":function(e){return Math.round(e*1e3)/1e3},"from":function(e){return e}}});this._$noUiHandle=e.find(".noUi-handle");this._$noUiHandle.attr("tabindex","0");t.noUiSlider.on("change",function(e,t){n._onChange()});t.noUiSlider.on("slide",function(e,t){n._onSlide()});this.bindJquery($(window),"keydown",this._onKeyDown)},"getInput":function(){return this.$(".noUiSlider")},"getValue":function(){var e=null;if(this._slider){e=this._slider.noUiSlider.get()}return e},"setValue":function(e){this._slider.noUiSlider.set(e)},"getEnabled":function(){return!this._slider.getAttribute("disabled")},"setEnabled":function(e){if(e){this._slider.removeAttribute("disabled")}else{this._slider.setAttribute("disabled","disabled")}},"_getCardinality":function(){return this.getOption("cardinality")},"_onChange":function(){this.trigger("change")},"_onSlide":function(){this.trigger("slide")},"_onKeyDown":function(e){if(this._$noUiHandle.is(":focus")&&this.getEnabled()&&1===this._getCardinality()){if(e.which===cm.keyCode.LEFT||e.which===cm.keyCode.DOWN){this.setValue(this.getValue()-this.getOption("step"));e.preventDefault()}if(e.which===cm.keyCode.RIGHT||e.which===cm.keyCode.UP){this.setValue(this.getValue()+this.getOption("step"));e.preventDefault()}}}});var CM_FormField_SliderRange=CM_FormField_SliderAbstract.extend({"_class":"CM_FormField_SliderRange"});var CM_FormField_Suggest=CM_FormField_Abstract.extend({"_class":"CM_FormField_Suggest","_$input":null,"ready":function(){var i=this;var n=this.getOption("cardinality");this._$input=this.$('input[type="text"]');var e=this._$input.data("pre-populate");this._$input.removeClass("textinput");this._$input.select2({"width":"off","tags":null,"allowClear":true,"openOnEnter":false,"maximumSelectionSize":n,"formatResult":this._formatItem,"formatSelection":this._formatItemSelected,"escapeMarkup":function(e){return e},"query":promiseThrottler(function(t){return i.ajax("getSuggestions",{"term":t.term,"options":i.getOptions()}).then(function(e){t.callback({"results":e})})},{"cancelLeading":true}),"createSearchChoice":function(e,t){if(i.getOption("enableChoiceCreate")){var n=$(t).filter(function(){return this.name.toLowerCase().localeCompare(e.toLowerCase())===0});if(n.length===0){return{"id":e,"name":e,"new":1}}}},"formatSelectionTooBig":null}).select2("data",e);this.$(".select2-choices").addClass("textinput");this._$input.on("change",function(e){if(!_.isUndefined(e.added)){var t=i._$input.select2("data");if(n&&t.length>n){t.pop();i._$input.select2("data",t);i.error(cm.language.get("You can only select {$cardinality} items.",{"cardinality":n}));return false}i.trigger("add",e.added)}if(!_.isUndefined(e.removed)){i.trigger("delete",e.removed)}i.trigger("change")});if(1==n){this._$input.on("select2-open",function(e){i._$input.select2("data",null)})}this._$input.on("select2-open",function(){i.trigger("open")});this._$input.on("select2-close",function(){i.trigger("close");if(!_.isEmpty(e)&&_.isEmpty(i.getValue())){i.trigger("change")}});this.getForm().$el.bind("reset",function(){i._$input.select2("data",null)})},"blur":function(){this.setTimeout(function(){this.$("input.select2-input").blur()},10)},"getInput":function(){return this._$input},"getValue":function(){return this._$input.select2("data")},"setValue":function(e){this._$input.select2("data",e)},"_formatItem":function(e){var t="select2-item";if(e.class){t+=" "+_.escape(e.class)}var n='<div class="'+t+'">';if(e.img){n+='<div class="select2-item-image"><img src="'+e.img+'" /></div>'}n+='<span class="select2-item-name">'+_.escape(e.name)+"</span>";if(e.description){n+='<small class="select2-item-description">'+_.escape(e.description)+"</small>"}n+="</div>";return n},"_formatItemSelected":function(e){var t=_.escape(e.name);if(e.img){t='<div class="select2-item-image"><img src="'+e.img+'" /></div>'+t}return t}});var CM_FormField_SuggestOne=CM_FormField_Suggest.extend({"_class":"CM_FormField_SuggestOne","getValue":function(){var e=CM_FormField_Suggest.prototype.getValue.call(this);if(e.length===0){return null}return e[0]},"setValue":function(e){var t=[];if(null!==e){t.push(e)}return CM_FormField_Suggest.prototype.setValue.call(this,t)}});var CM_FormField_Text=CM_FormField_Abstract.extend({"_class":"CM_FormField_Text","_valueLast":null,"events":{"blur input":function(){this.trigger("blur")},"focus input":function(){this.trigger("focus")},"change input":function(){this.triggerChange()},"input input":function(){this.triggerChange()}},"ready":function(){this._valueLast=this.getValue()},"setValue":function(e){this.getInput().val(e);this._valueLast=this.getValue()},"hasFocus":function(){return this.getInput().is(":focus")},"triggerChange":function(){var e=this.getValue();var t=this._valueLast;if(t!==e){this._valueLast=e;this.trigger("change",{"previous":t,"new":e})}},"disableTriggerChangeOnInput":function(){this.delegateEvents(_(this.events).omit("input input"))}});var CM_FormField_Textarea=CM_FormField_Text.extend({"_class":"CM_FormField_Textarea","events":{"blur [contenteditable]":function(){this.trigger("blur");this.triggerChange()},"focus [contenteditable]":function(){this.trigger("focus")},"input [contenteditable]":function(){this.triggerChange()},"change [contenteditable]":function(){this.triggerChange()},"keydown [contenteditable]":function(e){if(this.getOptions().lengthMax>0){var t=_.contains([cm.keyCode.DELETE,cm.keyCode.BACKSPACE,cm.keyCode.INSERT],e.which);var n=e.altKey||e.ctrlKey||e.metaKey||e.shiftKey;var i=this.getValue().length>this.getOptions().lengthMax;if(!t&&!n&&i){e.preventDefault()}this._checkLengthMax()}},"paste [contenteditable]":function(e){var t=this.getInput();if("plaintext-only"!==t.attr("contenteditable")){e.stopPropagation();e.preventDefault();var n=(e.originalEvent||e).clipboardData||window.clipboardData;var i=n.getData("text/plain");var o=this._convertTextToHtml(i);document.execCommand("insertHTML",false,o);this._checkLengthMax()}}},"ready":function(){CM_FormField_SuggestOne.prototype.ready.call(this);this.on("change",function(){this._cleanEmptyWhiteSpace()});if(Modernizr.plaintextonly){this.getInput().attr("contenteditable","plaintext-only")}},"getInput":function(){return this.$("[contenteditable]")},"getValue":function(){var e=this.getInput().get(0);var t=e.innerText;t=t.replace(/\r?\n$/,"");return t},"setValue":function(e){var t=this._convertTextToHtml(e);this.getInput().html(t)},"getEnabled":function(){return true},"reset":function(){this.setValue("")},"disableTriggerChangeOnInput":function(){this.delegateEvents(_(this.events).omit("input [contenteditable]"))},"_convertTextToHtml":function(e){var t=_.escape(e);t=t.replace(/\r?\n/g,"<br>");return"<div>"+t+"</div>"},"_cleanEmptyWhiteSpace":function(){if(""===this.getValue()){this.getInput().empty()}},"_checkLengthMax":function(){if(this.getOptions().lengthMax&&this.getValue().length>this.getOptions().lengthMax){this.error(cm.language.get("Too long"))}else{this.error(null)}}});var CM_FormField_Time=CM_FormField_Text.extend({"_class":"CM_FormField_Time"});var CM_FormField_TreeSelect=CM_FormField_Abstract.extend({"_class":"CM_FormField_TreeSelect","events":{"click .selectNode":function(e){this.selectNode($(e.currentTarget))},"click .toggleSubtree":function(e){this.toggleSubtree($(e.currentTarget))},"click .toggleWindow":"toggleWindow","click .unselectNode":"unselectNode"},"$input":null,"$selector":null,"$options":null,"defaultSelectorLabel":null,"ready":function(){var i=this;this.$input=this.$("input");this.$selector=this.$(".selector");this.$options=this.$(".options");this.defaultSelectorLabel=this.$selector.text();this.on("change",function(){i.$(".selected").removeClass("selected");var e=i.getSelectedItem();if(e.length){e.addClass("selected");i.$selector.find(".label").text(e.data("path"))}else{i.$selector.find(".label").text(i.defaultSelectorLabel)}});this.$input.watch("disabled",function(e,t,n){i.$selector.toggleClass("disabled",n)});this.selectNode(this.getSelectedItem())},"toggleWindow":function(){this.$options.toggleModal();if(this.$options.is(":visible")){this.getSelectedItem().parent().parents(".CM_FormField_TreeSelect li").addClass("active").find("> .toggleSubtree").addClass("active")}},"close":function(){this.$options.toggleModal("hide")},"selectNode":function(e){this.$input.val(e?e.data("id"):null);this.trigger("change");this.close()},"toggleSubtree":function(e){e.closest("li").toggleClass("active");e.toggleClass("active")},"unselectNode":function(){this.$input.val(null);this.trigger("change");this.close()},"getSelectedItem":function(){return this.$('.node[data-id="'+this.getValue()+'"]')}});var CM_FormField_Url=CM_FormField_Text.extend({"_class":"CM_FormField_Url"});var CM_FormField_Geometry_Vector2=CM_FormField_Abstract.extend({"_class":"CM_FormField_Geometry_Vector2","events":{"change input":function(){this.trigger("change")}},"isEmpty":function(e){return _.isEmpty(e.x)||_.isEmpty(e.y)},"getValue":function(){return{"x":this.$("[name*=xCoordinate]").val(),"y":this.$("[name*=yCoordinate]").val()}},"setValue":function(e){this.$("[name*=xCoordinate]").val(e.x);this.$("[name*=yCoordinate]").val(e.y)}});var CM_FormField_Geometry_Vector3=CM_FormField_Geometry_Vector2.extend({"_class":"CM_FormField_Geometry_Vector3","isEmpty":function(e){return CM_FormField_Geometry_Vector2.prototype.isEmpty.call(this,e)||_.isEmpty(e.z)},"getValue":function(){return _.extend(CM_FormField_Geometry_Vector2.prototype.getValue.call(this),{"z":this.$("[name*=zCoordinate]").val()})},"setValue":function(e){CM_FormField_Geometry_Vector2.prototype.setValue.call(this,e);this.$("[name*=zCoordinate]").val(e.z)}});var CM_FormField_Set_Select=CM_FormField_Set.extend({"_class":"CM_FormField_Set_Select","events":{"change select":function(){this.trigger("change")}},"getInput":function(){return this.$("input, select")},"getValue":function(){if(this._isRadio()){var e=this.getInput().filter(":checked");if(0===e.length){return null}else{return e.val()}}else{return this.getInput().val()}},"setValue":function(e){if(this._isRadio()){this.getInputByValue(e).prop("checked","checked")}else{this.getInput().val(e);this.getInput().trigger("fancyselect:update")}},"_isRadio":function(){return this.getInput().is("[type=radio]")}});var CM_Layout_Abstract=CM_Component_Abstract.extend({"_class":"CM_Layout_Abstract","_$pagePlaceholder":null,"_timeoutLoading":null,"_ready":function(){if(this.$(".page-placeholder").length){this._$pagePlaceholder=this.$(".page-placeholder")}CM_Component_Abstract.prototype._ready.apply(this,arguments)},"afterPageInjected":function(){},"findPage":function(){return this.findChild("CM_Page_Abstract")},"getPage":function(){return this.getChild("CM_Page_Abstract")},"scrollTo":function(e){var t=0;var n=this.findPage();if(n){t=n.$el.offset().top}$(document).scrollTop(e.offset().top-t)},"chargeSpinnerTimeout":function(){this.clearSpinnerTimeout();this._timeoutLoading=this.setTimeout(function(){this.getPagePlaceholder().html('<div class="spinner spinner-expanded" />')},750)},"clearSpinnerTimeout":function(){clearTimeout(this._timeoutLoading)},"hasPagePlaceholder":function(){return!!this._$pagePlaceholder},"getPagePlaceholder":function(){if(!this.hasPagePlaceholder()){this.createPagePlaceholder()}return this._$pagePlaceholder},"createPagePlaceholder":function(){if(!this.hasPagePlaceholder()){this._$pagePlaceholder=$('<div class="page-placeholder" />');this.getPage().replaceWithHtml(this._$pagePlaceholder);this._onPageTeardown()}else{this._$pagePlaceholder.removeClass("error").html("")}},"removePagePlaceholder":function(e){this.getPagePlaceholder().replaceWith(e);this._$pagePlaceholder=null},"errorPagePlaceholder":function(e){this.getPagePlaceholder().addClass("error").html("<pre>"+e.message+"</pre>")},"_onPageTeardown":function(){$(document).scrollTop(0);$(".floatbox").floatbox("close")}});var CM_Page_Abstract=CM_Component_Abstract.extend({"_class":"CM_Page_Abstract","_stateParams":null,"_state":null,"_url":null,"_ready":function(){CM_Component_Abstract.prototype._ready.call(this);if(this.hasStateParams()){var e=window.location;var t=cm.request.parseQueryParams(e.search);var n=_.pick(t,_.intersection(_.keys(t),this.getStateParams()));this.routeToState(n,e.href)}},"getUrl":function(){return this._url},"hasStateParams":function(){return null!==this._stateParams},"getStateParams":function(){if(!this.hasStateParams()){throw new CM_Exception("Page has no state params")}return this._stateParams},"getState":function(){if(!this.hasStateParams()){throw new CM_Exception("Page has no state params")}return this._state},"setState":function(e){if(!_.isEmpty(_.difference(_.keys(e),this.getStateParams()))){throw new CM_Exception("Invalid state")}this._state=e},"routeToState":function(e,t){this._url=t;this.setState(e);return this._changeState(e)},"_changeState":function(e){return false}});var CM_Page_Example=CM_Page_Abstract.extend({"_class":"CM_Page_Example","_stateParams":["tab"],"_changeState":function(e){if(e["tab"]){this.findChild("CM_Component_Example").showTab(e["tab"])}}});var CM_Page_Error_AuthRequired=CM_Page_Abstract.extend({"_class":"CM_Page_Error_AuthRequired"});var CM_Page_Error_NotAllowed=CM_Page_Abstract.extend({"_class":"CM_Page_Error_NotAllowed"});var CM_Page_Error_NotFound=CM_Page_Abstract.extend({"_class":"CM_Page_Error_NotFound"});var SK_App=CM_App.extend({"ready":function(){CM_App.prototype.ready.call(this);this.error.registerHandlers({"CM_Exception_AuthRequired":function(e){var t=cm.findView("SK_Component_AuthRequired");var n=cm.viewer!==null;if(t){var i=t.$el.closest(".floatbox").length;if(!i){t.popOut()}}else{cm.findView().popOutComponent("SK_Component_AuthRequired",{"hadViewer":n})}},"CM_Exception_Nonexistent":function(e){cm.window.hint(cm.language.get("The content you tried to interact with has been deleted."))},"SK_Exception_PremiumRequired":function(e){cm.router.route(cm.getUrl("/account/premium"))},"SK_Exception_InsufficientFunds":function(e){cm.router.route(cm.getUrl("/account/coins"))}})},"user":{"getThumbnailUrl":function(e,t,n){if(true!==n){n=false}if(null===e){return cm.getUrlResource("layout","img/placeholder_sex_deleted.jpg")}var i=cm._getUserThumbnail(e,t,n);if(i){return i}var o={"1":"placeholder_sex_female.jpg","2":"placeholder_sex_male.jpg","4":"placeholder_sex_couple.jpg"};if(o.hasOwnProperty(e.sex)){return cm.getUrlResource("layout","img/"+o[e.sex])}return cm.getUrlResource("layout","img/placeholder_sex.jpg")},"getUsername":function(e){if(null===e){return cm.language.get("Deleted Member")}else{return e["displayName"]}},"getUsernameHtml":function(e,t){t=_.defaults(t||{},{"href":true});var n=this.getUsername(e);var i=$('<span class="username nowrap"></span>');if(e){if(t.href){i=$('<a class="username nowrap"></a>').attr("href",cm.getUrl(e["path"]))}i.addClass("sex-"+e["sex"])}$('<span class="username-name"></span>').append(document.createTextNode(n)).appendTo(i);return i[0].outerHTML},"getThumbnailHtml":function(e,t){t=_.defaults(t||{},{"href":true,"circular":false,"onlineIndication":true,"size":null});var n=this.getUsername(e);var i=this.getThumbnailUrl(e,t.size);var o=cm.language.get("Online");var a;if(t.href&&e&&e["path"]){a=$('<a class="user-thumb"></a>').attr("href",cm.getUrl(e["path"]))}else{a=$('<div class="user-thumb"></div>')}if(t.circular){a.addClass("circular")}a.append($("<img/>").attr({"title":n,"src":i}));var s=$('<div class="online-indication"></div>').attr("title",o);if(!e||!e["visible"]||!t.onlineIndication){s.hide()}a.append(s);return a[0].outerHTML}},"number":{"formatMax":function(e){return e>99?"99+":e}},"getBehaviourEntityOpen":function(e){return new window[cm.options.site.behaviourEntityOpen._class](e)},"getConversationView":function(e){var t=cm.findView("SK_Component_Chat");if(t&&t.getConversationsEnabled()){var n=t.findChatByConversation(e);if(n&&n.isExpanded()){return n}}var i=cm.findView("SK_Component_Mailbox");if(i&&i.isConversationVisible(e)){return i.getConversationView()}return null},"_getUserThumbnail":function(e,t,n){var i=n?"thumbAllAgeSafe":"thumbExplicit";if(e[i]){if("medium"===t&&e[i].pathMedium){return cm.getUrlUserContent(e[i].pathMedium)}else if("large"===t&&e[i].pathLarge){return cm.getUrlUserContent(e[i].pathLarge)}else if(e[i].path){return cm.getUrlUserContent(e[i].path)}}return null}});var SK_Component_Abstract=CM_Component_Abstract.extend({"_class":"SK_Component_Abstract"});var SK_Component_Account=SK_Component_Abstract.extend({"_class":"SK_Component_Account","events":{"click .changePassword":"changePassword"},"changePassword":function(){this.popOutComponent("SK_Component_ChangePassword")}});var SK_Component_AccountMembership=SK_Component_Abstract.extend({"_class":"SK_Component_AccountMembership"});var SK_Component_AccountUnregister=SK_Component_Abstract.extend({"_class":"SK_Component_AccountUnregister"});var SK_Component_AccountVerification=SK_Component_Abstract.extend({"_class":"SK_Component_AccountVerification"});var SK_Component_AgeVerification=SK_Component_Abstract.extend({"_class":"SK_Component_AgeVerification","events":{"click .exit":function(){this._ageVerificationExit()},"click .enter":function(){this._ageVerificationEnter()}},"_ageVerificationExit":function(){top.location.replace("https://www.google.com")},"_ageVerificationEnter":function(){$.cookie("ageVerificationConfirmed",true,{"expires":365});this.popIn({"closable":true});this.remove()}});var SK_Component_Alerts=SK_Component_Abstract.extend({"_class":"SK_Component_Alerts","showEmailVerification":null,"showAccountVerification":null,"showPremiumNotification":null,"permanentAlertList":[],"actions":{"SK_Action_User CONNECT_REQUEST":function(e,t,n){if(t.id==cm.viewer.id){this.addTempAlert({"user":e.actor,"msg":cm.language.get("{$user} wants to be your friend.",{"user":cm.user.getUsername(e.actor)}),"icon":"member-add","href":cm.getUrl(e.actor.path)})}},"SK_Action_User CONNECT":function(e,t,n){if(t.id==cm.viewer.id){this.addTempAlert({"user":e.actor,"msg":cm.language.get("{$user} accepted your friend request.",{"user":cm.user.getUsername(e.actor)}),"icon":"member-add","href":cm.getUrl(e.actor.path)})}},"SK_Action_Entity_MailboxConversation_Message CREATE":function(e,t,n){this._onActionConversationMessage(e,n.conversation)},"SK_Action_User VIEW":function(e,t,n){if(e.actor.id!=cm.viewer.id){this.addTempAlert({"user":e.actor,"msg":cm.language.get("{$user} just viewed your profile.",{"user":cm.user.getUsername(e.actor)}),"icon":"view","href":cm.getUrl(e.actor.path)})}}},"events":{"click .closeAlert":function(e){$(e.target).parentsUntil(".SK_Component_Alerts",".alert").trigger("close");return false}},"ready":function(){if(!this._shouldShowAlerts()){return}if(this.showAccountVerification){this.addPermanentAlert({"msg":cm.language.get("Verify your account!"),"icon":"lock","href":cm.getUrl("/account/verification"),"cssClass":"account notClosable","targetBlank":true})}if(this.showEmailVerification){this.addPermanentAlert({"msg":cm.language.get("Please verify your email address!"),"icon":"message","href":cm.getUrl("/account/email-verification?alert=true"),"cssClass":"notClosable","targetBlank":true})}if(this.showPremiumNotification){this.addPermanentAlert({"msg":cm.language.get("Buy a premium subscription today!"),"icon":"premium","href":cm.getUrl("/account/premium"),"cssClass":"premium notClosable"})}this._showPermanentAlert()},"addPermanentAlert":function(e){e.isPermanent=true;this.permanentAlertList.push(e)},"addTempAlert":function(n){var i=this;this._queue(function(e){var t=i._renderAlert(n);i._appendAlert(t).then(function(){t[0].timeout=setTimeout(function(){i._cleanTempAlerts(t)},8e3);t.on("close",function(){if(this.timeout){clearTimeout(this.timeout)}});e()})});this._queue(function(e){i._checkAndCleanTempAlerts().then(e)})},"_showPermanentAlert":function(){this.$(".alert.permanent").remove();if(this.permanentAlertList.length){var e=this.permanentAlertList.shift();this.permanentAlertList.push(e);var t=this._renderAlert(e);this._appendAlert(t);this.setTimeout(function(){this._showPermanentAlert()},30*60*1e3)}},"_renderAlert":function(t){t.href=t.href||"javascript:;";var e="";if(t.cssClass){e=t.cssClass}if(t.isPermanent){e+=" permanent"}if(t.icon){e+=" hasIcon"}var n;if(t.user){e+=" hasUserThumb";n=t.user.displayName}var i;if(t.image){i=t.image}if(t.user){var o=cm.options.site.isAllAgeSafe;i=cm.user.getThumbnailUrl(t.user,null,o)}var a=_.extend({},t,{"username":n,"imageSrc":i,"cssClass":e});var s=this.renderTemplate("tpl-alert",a);s.on("close",function(){$(this).remove()});var r=s.find(".alert-link");r.on("click",function(e){if(t.targetBlank){e.preventDefault();e.stopPropagation();window.open(t.href,"_blank")}s.trigger("close")});if(t.clickListener){var c=this;r.on("click",function(e){t.clickListener.call(c,e)})}return s},"_queue":function(){this.$el.queue.apply(this.$el,arguments)},"_checkAndCleanTempAlerts":function(){return this.try(function(){var e=3;var t=this.$(".alert:not(.permanent)");if(t.length>e){return this._cleanTempAlerts(t.slice(0,t.length-e))}})},"_cleanTempAlerts":function(e){var t=this.$(".alert:not(.permanent)");return t.transit({"y":"100%"},"400ms","snap").promise().then(function(){e.trigger("close");t.transit({"y":0},0)})},"_appendAlert":function(e){return e.prependTo(this.$el).transit({"y":"0"},"400ms","snap").promise()},"_onActionConversationMessage":function(e,t){if(e.actor.id!=cm.viewer.id){if(!cm.getConversationView(t)){this.addTempAlert({"user":e.actor,"msg":cm.language.get("{$user} sent you a message.",{"user":cm.user.getUsername(e.actor)}),"icon":"message","clickListener":function(e){cm.getBehaviourEntityOpen(this).handleClick(e,t.get("_type"),t.get("id"))}})}}},"_shouldShowAlerts":function(){var e=false;var t=this.findParent("CM_Layout_Abstract").findPage();if(null!==t){e=_.isEqual("SK_Page_Account_Verification",t.getClass())}return!e}});var SK_Component_AuthRequired=SK_Component_Abstract.extend({"_class":"SK_Component_AuthRequired"});var SK_Component_Billing=SK_Component_Abstract.extend({"_class":"SK_Component_Billing"});var SK_Component_BlogpostView=SK_Component_Abstract.extend({"_class":"SK_Component_BlogpostView","blogpost":null,"events":{"click .editBlogpost":function(){this.editBlogpost(true)},"click .cancelEdit":function(){this.editBlogpost(false)},"click .deleteBlogpost":"deleteBlogpost"},"childrenEvents":{"SK_Form_Blogpost success":function(){this.reload()}},"deleteBlogpost":function(){this.ajaxModal("delete",{"blogpost":this.blogpost})},"editBlogpost":function(e){this.$(".blogpostEdit").toggle(e);this.$(".blogpostView").toggle(!e);this.$(".editBlogpost").toggle(!e)}});var SK_Component_ChangePassword=SK_Component_Abstract.extend({"_class":"SK_Component_ChangePassword"});var SK_Component_Chat=SK_Component_Abstract.extend({"_class":"SK_Component_Chat","audioEnabled":null,"userVisible":null,"friends":null,"matches":null,"_animation":null,"_menu":null,"_$menu":null,"_chatList":null,"_conversationsEnabled":null,"_audioNotification":null,"STATE":{"LARGE":"barLarge","MEDIUM":"barMedium","LIGHT":"barLight"},"_state":null,"_queuedChatRequest":promiseThrottler(function(e){return e()},{"queue":true}),"USER_TYPE":{"FRIEND":"friend","MATCH":"match"},"actions":{"SK_Action_User VISIBLE":function(e,t,n){if(e.actor.id==cm.viewer.id){this._onSetUserVisible(true)}if(n.isFriend){this.addFriend(t)}},"SK_Action_User INVISIBLE, DELETE":function(e,t,n){if(e.actor.id==cm.viewer.id){this._onSetUserVisible(false)}else{this.removeUser(t.id)}},"SK_Action_Entity_MailboxConversation_Message CREATE":function(e,t,n){if(this.getConversationsEnabled()){this._processNewUnreadMessage(e,n.conversation)}},"SK_Action_User CONNECT":function(e,t,n){var i=e.actor.id==cm.viewer.id?t:e.actor;if(i.visible){this.addFriend(i)}},"SK_Action_User DISCONNECT":function(e,t,n){var i=e.actor.id==cm.viewer.id?t:e.actor;this.removeFriend(i.id)}},"streams":{"openChat":function(t){if(!this.getConversationsEnabled()){return}var n=this;this.requestChatByConversation(t.conversation).then(function(e){if(!n.isConversationMailboxActive(t.conversation)){e.expand()}})},"closeChat":function(e){if(!this.getConversationsEnabled()){return}var t=this.findChatByConversation(e.conversation);if(t){t.remove()}},"setAudio":function(e){this._setAudio(e.state)}},"events":{"click .openerDropdown-window .menu-sub > li":"closePreferences","click .enableAudio":function(e){this.setAudio(true);return false},"click .disableAudio":function(e){this.setAudio(false);return false},"click .userVisibleOn":function(){this.setUserVisible(true);return false},"click .userVisibleOff":function(){this.setUserVisible(false);return false},"click .requestChat":function(e){var t=$(e.currentTarget).data("user-id");cm.getBehaviourEntityOpen(this).openConversationByRecipient(t);if(this.STATE.LIGHT==this.getState()){this._menu.collapse()}return false},"click .visitProfile":function(e){var t=$(e.currentTarget).data("href");cm.router.route(t);if(this.STATE.LIGHT==this.getState()){this._menu.collapse()}return false},"click .toggleMenu":function(){this._menu.toggle()}},"childrenEvents":{"SK_Component_ChatConversation destruct":function(e){this._unregisterChat(e)},"SK_Component_ChatConversation close":function(e){this.ajax("closeChat",{"conversation":e.conversation})},"SK_Component_ChatConversation expand":function(e){this.repaint(e);this.updateActiveChats()},"SK_Component_ChatConversation collapse":function(e){this.repaint(e);this.updateActiveChats()}},"appEvents":{"navigate:end":function(){this._updatePanelVisibility()}},"ready":function(){this._setupChat();var e=this;var t={"match":function(){e.setModeBarLight()}};var n={"match":function(){e.setModeBarMedium()}};var i={"match":function(){e.setModeBarLarge()}};enquire.register("(max-width: 799px)",t);enquire.register("(min-width: 800px) and (max-width: 1399px)",n);enquire.register("(min-width: 1400px)",i);this.on("destruct",function(){enquire.unregister("(min-width: 600px)",t);enquire.unregister("(min-width: 995px) and (max-width: 1399px)",n);enquire.unregister("(min-width: 1400px)",i)})},"_setupChat":function(){this._audioNotification=cm.dom.createAudio([cm.getUrlResource("layout","audio/notification.mp3"),cm.getUrlResource("layout","audio/notification.ogg")]);this._$menu=this.$(".menu");this._menu=new OpenerWindow(this._$menu);this._animation=true;this._chatList=[];this._conversationsEnabled=false;this.renderUsers();this._updatePanelVisibility();var t=this;this.setInterval(function(){this.ajax("getMatches").then(function(e){t.updateMatches(e)})},3e4);this.bindJquery($(window),"resize",function(){t.repaint()})},"getState":function(){return this._state},"getConversationsEnabled":function(){return this._conversationsEnabled},"setConversationsEnabled":function(e){e=!!e;if(e!==this._conversationsEnabled){this._conversationsEnabled=e;if(e){this._loadChats()}else{_.invoke(this._chatList,"remove");this._chatList=[]}}},"updateConversationsEnabled":function(){var e=this.userVisible&&this.STATE.LIGHT!==this.getState();this.setConversationsEnabled(e)},"setModeBarLight":function(){if(this.STATE.LIGHT!==this.getState()){this._setState(this.STATE.LIGHT);this._menu.setPreventHiding(false);this._menu.setModal(true);this._menu.collapse()}},"setModeBarMedium":function(){if(this.STATE.MEDIUM!==this.getState()){this._setState(this.STATE.MEDIUM);this._menu.setPreventHiding(false);this._menu.setModal(false)}},"setModeBarLarge":function(){if(this.STATE.LARGE!==this.getState()){this._setState(this.STATE.LARGE);this._menu.setPreventHiding(true);this._menu.setModal(false);this._menu.expand()}},"_setState":function(e){this._state=e;this.$el.attr("data-mode",e);this.updateConversationsEnabled()},"openChatByUser":function(e){return this.requestChatByUser(e).then(this._openChat)},"requestChatByUser":function(t){var n=this;return this._queuedChatRequest(function(){var e=n._findChatByUser(t);if(e){return Promise.resolve(e)}return n.ajax("loadChatByUser",{"recipient":t},{"modal":true}).then(function(e){var t=n._injectView(e);return n._prepareChat(t)})}).catch(function(e){n.removeUser(t);throw e})},"openChatByConversation":function(e){return this.requestChatByConversation(e).then(this._openChat)},"requestChatByConversation":function(t){var n=this;return this._queuedChatRequest(function(){var e=n.findChatByConversation(t);if(e){return Promise.resolve(e)}return n.ajax("loadChatByConversation",{"conversation":t},{"modal":true}).then(function(e){var t=n._injectView(e);return n._prepareChat(t)})})},"_prepareChat":function(e){this._$menu.after(e.$el.addClass("opener chat"));this._chatList.push(e);e._ready();return e},"_openChat":function(e){e.expand();e.focus();return e},"_unregisterChat":function(e){this._chatList=_.without(this._chatList,e)},"setAudio":function(e){var t=this;this.ajax("setAudio",{"state":e}).then(function(e){t._setAudio(e)})},"_setAudio":function(e){this.audioEnabled=e;this._$menu.toggleClass("state-audio",e)},"setUserVisible":function(e){if(e===this.userVisible){return Promise.resolve(e)}var t=this;return this.ajaxModal("setUserVisible",{"state":e}).then(function(){t._onSetUserVisible(e)})},"_onSetUserVisible":function(e){if(e===this.userVisible){return}this.userVisible=e;this.updateConversationsEnabled();if(!e){this._menu.collapse()}this._$menu.toggleClass("state-userVisible",e)},"_loadChats":function(){var n=this;return this._queuedChatRequest(function(){return n.ajax("loadOpenChats").then(function(e){_.each(e,function(e){if(!n.findChatByConversation(e.conversation)){var t=n._injectView(e.component);n._prepareChat(t)}})})}).then(function(){n._openActiveChats()})},"_playMessageSound":function(){this._audioNotification.play()},"addFriend":function(e){this.removeMatch(e.id);this._addUserByType(e,this.USER_TYPE.FRIEND)},"addMatch":function(e){this._addUserByType(e,this.USER_TYPE.MATCH)},"_addUserByType":function(e,t){var n=this._getUserListByType(t);if(_.findWhere(n,{"id":e.id})){return}this._renderUserByType(e,t);n.push(e);this._renderFriendsCount()},"removeUser":function(e){this.removeMatch(e);this.removeFriend(e)},"removeFriend":function(e){this._removeUserByType(e,this.USER_TYPE.FRIEND);this._renderFriendsCount()},"removeMatch":function(e){this._removeUserByType(e,this.USER_TYPE.MATCH)},"_removeUserByType":function(e,t){var n=this._getUserListByType(t);var i=_.indexOf(_.pluck(n,"id"),e);if(i===-1){return}var o=this._$menu.find("."+t+"List");o.find("[data-user-id="+e+"]").closest("li").fadeOut(function(){$(this).remove()});n.splice(i,1)},"renderUsers":function(){_.each(this.friends,function(e){this._renderUserByType(e,this.USER_TYPE.FRIEND)},this);this._renderFriendsCount();_.each(this.matches,function(e){this._renderUserByType(e,this.USER_TYPE.MATCH)},this)},"_renderUserByType":function(e,t){var n=this._$menu.find("."+t+"List");var i=cm.options.site.isAllAgeSafe;var o=this.renderTemplate("userListItem",{"thumbUrl":cm.user.getThumbnailUrl(e,null,i),"name":e.displayName,"id":e.id,"href":cm.getUrl(e.path)});if(this._animation){o.hide().fadeIn()}var a=n.children().toArray().map(function(e){return $(e).text().trim()});var s=_.sortedIndex(a,e.displayName);if(n.children().length===0||s>=n.children().length){n.append(o)}else{n.children().eq(s).before(o)}},"_renderFriendsCount":function(){this._$menu.find(".contactsCount").text(this.friends.length)},"_getUserListByType":function(e){switch(e){case this.USER_TYPE.MATCH:return this.matches;case this.USER_TYPE.FRIEND:return this.friends}throw new Error("Unknown Chat USER_TYPE")},"updateMatches":function(t){_.each(t,function(e){var t=_.findWhere(this.matches,{"id":e.id});var n=_.findWhere(this.friends,{"id":e.id});if(!t&&!n){this.addMatch(e)}},this);var n=[];_.each(this.matches,function(e){if(!_.findWhere(t,{"id":e.id})){n.push(e)}},this);_.each(n,function(e){this.removeMatch(e.id)},this)},"closePreferences":function(){this._$menu.find(".openerDropdown-window").toggleModal("hide")},"updateActiveChats":function(){var e=_.filter(this._chatList,function(e){return e.isExpanded()});this.storageSet("activeChats",_.map(e,function(e){return e.conversation.id}))},"_getActiveChats":function(){var t=this.storageGet("activeChats");return _.filter(this._chatList,function(e){return _.contains(t,e.conversation.id)})},"_openActiveChats":function(){_.invoke(this._getActiveChats(),"expand")},"repaint":function(e){var t;var n=this.$el.width();while(this._getBarWidth()>n){t=_.without(this._chatList,e);if(t.length){var i=_.find(t,function(e){return!e.isExpanded()})||t[0];i.close()}else{break}}},"_getBarWidth":function(){var e=_.reduce(this._chatList,function(e,t){return e+t.$el.outerWidth(true)},this._$menu.outerWidth(true));var t=10;return e+t},"_findChatByUser":function(t){return _.find(this._chatList,function(e){return e.isPersonal()&&e.containsUser(t)})},"findChatByConversation":function(t){return _.find(this._chatList,function(e){return t.id==e.conversation.id})},"_processNewUnreadMessage":function(e,t){var n=e.actor.id;if(n==cm.viewer.id||this.isConversationMailboxActive(t)){return}var i=this;this.requestChatByConversation(t).then(function(){if(i.audioEnabled&&!cm.window.hasFocus()){i._playMessageSound()}})},"isConversationMailboxActive":function(e){var t=cm.findView("SK_Component_Mailbox");if(!t){return false}return t.isConversationVisible(e)},"_updatePanelVisibility":function(){var e=cm.getLayout().findPage();var t=e&&e.hasClass("SK_Page_Messages");this._setPanelVisibility(!t)},"_setPanelVisibility":function(e){this.$el.toggleClass("menu-panel-invisible",!e);if(!e){this._menu.collapse()}}});var SK_Component_CoinPurchase=SK_Component_Abstract.extend({"_class":"SK_Component_CoinPurchase","purchasable":null,"events":{"click .purchaseItem":"purchaseItem"},"purchaseItem":function(){var e=this;this.ajaxModal("purchase",{"purchasable":this.purchasable}).then(function(){e.trigger("success")})}});var SK_Component_CommentAdd=SK_Component_Abstract.extend({"_class":"SK_Component_CommentAdd","entity":null,"events":{"focus .textinput":function(){this.inputFocus()},"keypress .textinput":function(e){if(e.keyCode==cm.keyCode.ENTER&&!e.altKey&&!e.ctrlKey){this.findChild("SK_Form_CommentAdd").submit("Process");return false}}},"inputFocus":function(){var t=this;this.$(".SK_Form_CommentAdd").toggleModal("show",function(e){this.toggleClass("hasFocus",e);if(e){t.trigger("inputFocus")}else{t.trigger("inputBlur");this.find(".textinput").blur()}})}});var SK_Component_CommentAdvertisement=SK_Component_Abstract.extend({"_class":"SK_Component_CommentAdvertisement"});var SK_Component_Comments=SK_Component_Abstract.extend({"_class":"SK_Component_Comments","entity":null,"events":{"click .deleteComment":function(e){var t=$(e.currentTarget).closest(".comment").data("comment-id");this.deleteComment(t)}},"deleteComment":function(e){var t=this;this.ajaxModal("deleteComment",{"commentId":e,"entity":this.entity}).then(function(){t.trigger("commentsUpdated")})}});var SK_Component_ContactLink=SK_Component_Abstract.extend({"_class":"SK_Component_ContactLink"});var SK_Component_Conversation=SK_Component_Abstract.extend({"_class":"SK_Component_Conversation","conversation":null,"msgSectionTimeout":null,"hasMoreMessages":null,"moreMessagesRequest":null,"_isActive":false,"$scrollable":null,"events":{"click .close":function(e){this.trigger("close")},"click .deleteConversation":function(e){this.deleteConversation();$(e.currentTarget).opener("close")},"click .blockConversation":function(e){this.setBlockedConversation(true);$(e.currentTarget).opener("close")},"click .unblockConversation":function(e){this.setBlockedConversation(false);$(e.currentTarget).opener("close")},"click .unreadConversation":function(e){this.trigger("unreadConversationClick");this.setAsUnread();$(e.currentTarget).opener("close");return false},"click .showParticipantsList":"showParticipantsList","keydown .textinput":function(e){if(e.which==cm.keyCode.ENTER&&(e.metaKey||e.ctrlKey)){this.sendMessage();return false}},"click .usertext img:not(.emoticon):not(.gift-image)":function(e){var t=$(e.currentTarget);t.floatbox()},"click .showIcebreakerInfo":function(e){var t=$(e.currentTarget).siblings(".icebreakerInfo");t.toggleModal("show",function(e){if(e){t.slideDown()}else{t.slideUp()}})}},"childrenEvents":{"SK_Form_ConversationMessage success.ReplyText":function(e,t){this._addMessage(t.message,t.response.isViewable,t.response.html)},"SK_Component_TextFormatterConversation image":function(e,t){this.ajax("sendImageAsMessage",{"image":t,"conversation":this.conversation})}},"actions":{"SK_Action_Entity_MailboxConversation_Message CREATE":function(e,t,n){if(this.conversation&&this.conversation.id==n.conversation.id){this._addMessage(t,n.response.isViewable,n.response.html)}},"SK_Action_Entity_MailboxConversation DELETE":function(e,t,n){var i=this.conversation&&this.conversation.id==t.id;var o=cm.viewer.id==e.actor.id;if(i&&o){this.trigger("close");this.remove()}},"SK_Action_Entity_MailboxConversation UPDATE":function(e,t,n){if(this.conversation&&this.conversation.id==n.conversation.id){this._setReadState(n.conversation.getUserData("read"))}}},"actionsRecipients":{"SK_Action_User VISIBLE":function(e,t,n){this._setOnline(e.actor,true)},"SK_Action_User INVISIBLE":function(e,t,n){this._setOnline(e.actor,false)}},"ready":function(){SK_Component_Abstract.prototype.ready.call(this);this.$(".messagesContainer").scrollShadow();this.setScrollable(this.$(".messagesContainer"));this.$(".scrollable").lazyImageSetup();if(null!==this.conversation){this._subscribeMemberStreams()}},"containsUser":function(t){return _.some(this.conversation.get("members"),function(e){return e.id==t})},"isPersonal":function(){return this.conversation.get("members").length===2},"setScrollable":function(e){if(this.$scrollable===e){return}var t="scrollTop."+this.getClass();if(this.$scrollable){this.$scrollable.off(t)}this.$scrollable=e;this.$scrollable.on(t,_.bind(this.loadMoreMessages,this))},"loadMoreMessages":function(){if(!this.$scrollable){throw new CM_Exception("Scrollable not set")}if(!this.hasMoreMessages||this.moreMessagesRequest){return}var i=this;this.moreMessagesRequest=this.ajax("loadMessages",{"messagesLoaded":this._getMessageCount()}).then(function(e){var t=i.$scrollable.getScrollHeight();cm.dom.setup($(e.html).prependTo(i.$(".messagesContainer")));var n=i.$scrollable.getScrollHeight();i.$scrollable.scrollTop(i.$scrollable.scrollTop()+n-t);i.hasMoreMessages=e.hasMoreMessages;return e}).finally(function(){i.moreMessagesRequest=null})},"scrollToBottom":function(){_.defer(function(){this.$(".scrollShadow").scrollBottom()}.bind(this))},"scrollToTop":function(){_.defer(function(){this.$(".scrollShadow").scrollTop(0)}.bind(this))},"deleteConversation":function(){var e=this;this.ajaxModal("deleteConversation",{"conversation":this.conversation}).then(function(){e.trigger("delete",e.conversation)})},"setBlockedConversation":function(e){var t=this;this.ajaxModal("setBlockedConversation",{"conversation":this.conversation,"blocked":e}).then(function(){t.$(".conversationMeta .actions").toggleClass("state-spam",e);t.trigger("spam",t.conversation)})},"showParticipantsList":function(){var n=this;return this.prepareComponent("SK_Component_EntityList_Profile_ConversationParticipants",{"conversation":this.conversation,"count":15,"itemTemplate":"modal"}).then(function(e){var t=n.renderTemplate("participants-dialog",{});t.find(".content-template").replaceWith(e.$el);t.floatbox()})},"sendMessage":function(){this.findChild("SK_Form_ConversationMessage").$('[type="submit"]').click()},"setActive":function(e){this._isActive=e},"setAsUnread":function(){this.setReadState(false)},"setAsRead":function(){this.setReadState(true)},"setReadState":function(e){if(!this.conversation){return}e=!!e;if(e==this.conversation.getUserData("read")||!this.conversation.isOwnedByViewer()){return}this._setReadState(e);this.ajax("setConversationRead",{"conversation":this.conversation,"state":e})},"_setReadState":function(e){if(!this.conversation){return}this.conversation.setUserData("read",e)},"_hasMessage":function(e){return this.$('.messagesContainer .message[data-conversation-message-id="'+e+'"]').length>0},"_addMessage":function(e,t,n){if(this._hasMessage(e.id)){return}var i=this.$(".sectionList > .section:last");var o=i[0]&&i[0].hasAttribute("data-icebreaker");var a=o!==e.isIcebreaker;if(!i.is(".section--message")||i.data("user-id")!=e.user.id||i.data("updated")<e.created-this.msgSectionTimeout||a){var s=null;if(e.hasReports&&e.user&&e.user.id!=cm.viewer.id){s=e}i=this._addMessageSection(e.user,e.userId,e.created,e.isIcebreaker,s,e.isAdvertisement)}i.data("updated",e.created);var r=this.renderTemplate("message",{"message":e,"isViewable":t,"html":n});i.find(".messageList").append(r);if(e.user.id!=cm.viewer.id){if(this._isActive){this.setAsRead()}else{this._setReadState(false)}}this.trigger("new-content")},"_addMessageSection":function(e,t,n,i,o,a){var s=this.renderTemplate("section--message",{"user":e,"userId":t,"created":n,"updated":n,"isIcebreaker":i,"messageToReport":o,"isAdvertisement":a});this.$(".sectionList").append(s);return s},"_getMessageCount":function(){return this.$(".message.usertext").length},"_setOnline":function(e,t){this.$(".section--message[data-user-id="+e.id+"] .online-indication").toggle(t)},"_subscribeMemberStreams":function(){var t=this;_.each(this.conversation.get("members"),function(e){t._bindActions(t.actionsRecipients,e.id,cm.model.types.SK_User_StreamChannelAbout)})}});var SK_Component_CookiesDisclaimer=SK_Component_Abstract.extend({"_class":"SK_Component_CookiesDisclaimer","events":{"click .dismiss":function(){this.hideCookiesDisclaimer()}},"ready":function(){var e=$.cookie("cookiesDisclaimer.dismissed");if(!e){this.$el.show()}},"hideCookiesDisclaimer":function(){$.cookie("cookiesDisclaimer.dismissed",true,{"expires":365});this.$el.slideUp("fast")}});var SK_Component_EmailUnsubscribe=SK_Component_Abstract.extend({"_class":"SK_Component_EmailUnsubscribe"});var SK_Component_EmailVerify=SK_Component_Abstract.extend({"_class":"SK_Component_EmailVerify","events":{"click .toggleEmailChange":"toggleEmailChange"},"toggleEmailChange":function(){this.$(".email-change").toggle()}});var SK_Component_EntityInteraction=SK_Component_Abstract.extend({"_class":"SK_Component_EntityInteraction","entity":null,"events":{"click .showUserLikeList":"showUserLikeList","click .showAllComments":"showAllComments"},"childrenEvents":{"SK_Component_CommentAdd inputFocus":function(){this.$().addClass("commentAdd-expanded")},"SK_Component_CommentAdd inputBlur":function(){this.$().removeClass("commentAdd-expanded")},"SK_Form_CommentAdd success":function(){this.showCommentFeedback()},"SK_Component_Comments commentsUpdated":function(){this.reload()},"SK_Component_Rating ratingUpdated":function(){this.reload()}},"showUserLikeList":function(){var n=this;return this.prepareComponent("SK_Component_EntityList_Profile_RatingLike",{"entity":this.entity,"count":15,"itemTemplate":"modal"}).then(function(e){var t=n.renderTemplate("likers-dialog",{});t.find(".content-template").replaceWith(e.$el);t.floatbox()})},"showAllComments":function(){this.$(".showAllComments").hide();this.findChild("SK_Component_Comments").reload({"showall":true})},"showCommentFeedback":function(){var e=this;var t=this.$el.find(".comment-feedback");t.fadeIn(1e3,function(){t.fadeOut(3e3,function(){e.reload()})})}});var SK_Component_EntityList=SK_Component_Abstract.extend({"_class":"SK_Component_EntityList","enableDynamicLayout":null,"entityList":null,"events":{"click .entity-link":function(e){var t=$(e.currentTarget).closest(".entity");var n=t.data("entity-id");var i=t.data("entity-type");return cm.getBehaviourEntityOpen(this).handleClick(e,i,n,{"entityList":this.entityList})},"click .deleteEntity":function(e){var t=$(e.currentTarget).closest(".entity");var n=t.data("entity-id");var i=t.data("entity-type");this.deleteEntity(i,n);return false}},"ready":function(){var t=this.$("> .entityList");if(t.length&&this.enableDynamicLayout){t.imagesLoaded(function(){t.packery({"itemSelector":".entityList > .entityListItem"})});this.on("destruct",function(){var e=t.data("packery");if(e){e.destroy()}})}},"deleteEntity":function(e,t){this.ajaxModal("deleteEntity",{"entityType":e,"entityId":t})}});var SK_Component_EntityQuery=SK_Component_Abstract.extend({"_class":"SK_Component_EntityQuery","urlPage":null,"paramListCurrent":null,"paramListDefault":null,"events":{"change .filter-select select":function(e){var t=$(e.currentTarget).attr("name");var n=$(e.currentTarget).val();this._redirectSingle(t,n)},'change .filter-checkbox input[type="checkbox"]':function(e){var t=$(e.currentTarget).attr("name");var n=$(e.currentTarget).is(":checked")?"1":"0";this._redirectSingle(t,n)},"click .toggleAdvancedQueryTools":function(){var e=!this.el.hasAttribute("data-advanced-query-tools");this._showAdvancedQueryTools(e)},"click .submitAdvancedSearch":function(){this._submitAdvancedSearch();this._showAdvancedQueryTools(false)},"click .resetAdvancedSearch":function(){cm.router.route(cm.getUrl(this.urlPage))}},"childrenEvents":{"SK_Form_EntityQuery change":function(){this._checkParamChanges()}},"_getParamValueByFormField":function(e){var t=e.getValue();if(e.isEmpty(t)){return null}var n=e.getClasses();switch(true){case _.contains(n,"SK_FormField_AgeRange"):t={"from":t[0]+"","to":t[1]+""};break;case _.contains(n,"CM_FormField_Location"):t={"level":t["id"]["level"],"id":t["id"]["id"]};break;case _.contains(n,"CM_FormField_Distance"):t=""+t*1609;break;case _.contains(n,"CM_FormField_Set"):t=t.filter(function(e){return e});break;case _.contains(n,"CM_FormField_Boolean"):t=t?"1":"0";break;case _.contains(n,"SK_CamShows_CamShow_FormField_Country"):var i=[];_.each(t,function(e){i.push(e.id.toLowerCase())});t=i;break}return t},"_submitAdvancedSearch":function(){this._redirect(this._getAdvancedParams())},"_redirectSingle":function(e,t){var n=this._getAdvancedParams();n[e]=t;var i=_.isEqual(e,"sex")||_.isEqual(e,"category");var o=_.isEqual(e,"sex");this._redirect(n,o,i)},"_getAdvancedParams":function(){var t={};var e=this.findChild("SK_Form_EntityQuery");if(e){e.getFields().forEach(function(e){t[e.getName()]=this._getParamValueByFormField(e)}.bind(this))}return t},"_redirect":function(e,t,n){if(_.isUndefined(t)){t=false}if(_.isUndefined(n)){n=false}var i=JSON.parse(JSON.stringify(this.paramListCurrent));_.extend(i,e);i=this._removeDefaults(i,this.paramListDefault);if(t){i=this._resetCategory(i)}if(n){i=this._resetAdvancedParams(i)}var o=this._removeDefaults(this.paramListCurrent,this.paramListDefault);if(JSON.stringify(i)==JSON.stringify(o)){return}cm.router.route(cm.getUrl(this.urlPage,i))},"_removeDefaults":function(n,i){_.each(n,function(e,t){if(_.isEqual(e,i[t])){delete n[t]}},this);return n},"_showAdvancedQueryTools":function(e){this.$el.attr("data-advanced-query-tools",e?"":null)},"_checkParamChanges":function(){var e=this._getAdvancedParams();var t=!_.isEmpty(this._removeDefaults(e,this.paramListCurrent));this.$el.attr("data-advanced-query-changed",t?"":null)},"_resetCategory":function(e){delete e.category;return e},"_resetAdvancedParams":function(n){var e=this._getAdvancedParams();_.each(e,function(e,t){delete n[t]},this);return n}});var SK_Component_Example=CM_Component_Example.extend({"_class":"SK_Component_Example","events":{"click .loadList":"loadList"},"loadList":function(){this.popOutComponent("SK_Component_EntityList_Profile_Friends",{"user":cm.viewer,"count":15,"itemTemplate":"modal"})}});var SK_Component_Faq=SK_Component_Abstract.extend({"_class":"SK_Component_Faq"});var SK_Component_Feed=SK_Component_Abstract.extend({"_class":"SK_Component_Feed","maxPages":15,"user":null,"viewClassName":null,"page":null,"isGuestFeed":null,"initialPage":null,"hasMore":null,"context":null,"request":null,"events":{"click .showMore":"showMore","click .showNextPage":"showNextPage"},"ready":function(){var e=this.findChild("SK_Component_FeedList_Abstract");this.initialPage=this.page;this.hasMore=e.hasMore;this.context=e.context;this._toggleShowMore();this.bindJquery($(window),"scrollBottom",function(){this.showMore()});$(window).trigger("scroll");cm.window.fastScroll.enable();this.on("destruct",function(){cm.window.fastScroll.disable()})},"showMore":function(){if(this.request||!this.hasMore){return}if($("html").hasClass("floatbox-active")){return}this._toggleShowMoreActive(true);this.request=this.try(function(){return this.prepareComponent(this.viewClassName,{"user":this.user,"page":this.page+1,"isGuestFeed":this.isGuestFeed,"context":this.context},{"modal":false})}).then(function(e){this.$(".showMore").before(e.$());this._toggleShowMoreActive(false);this.page=e.page;this.hasMore=e.hasMore;this.context=e.context;this._toggleShowMore();$(window).trigger("scroll");return e}).finally(function(){this._toggleShowMoreActive(false);this.request=null})},"showNextPage":function(){$("body").animate({"scrollTop":0},"fast");this.$(".showNextPage").addClass("active");this.reload({"viewClassName":this.viewClassName,"user":this.user,"page":this.page+1,"isGuestFeed":this.isGuestFeed,"context":this.context})},"reloadWithClass":function(e){return this.reload({"viewClassName":e,"page":1})},"_toggleShowMore":function(){if(this.page-this.initialPage>this.maxPages){this.hasMore=false;this.$(".showNextPage").show()}this.$(".showMore").toggle(this.hasMore)},"_toggleShowMoreActive":function(e){if(e){this.$(".showMore").disable().addClass("active")}else{this.$(".showMore").enable().removeClass("active")}}});var SK_Component_ForgotPassword=SK_Component_Abstract.extend({"_class":"SK_Component_ForgotPassword"});var SK_Component_HeaderBar=SK_Component_Abstract.extend({"_class":"SK_Component_HeaderBar","_isPlainMode":false,"_coinBalance":null,"events":{"click .showNavigation":"showNavigation","click .showShare":function(){this.showShare()},"click .showNotifications":"showNotifications","click .signUp":function(){this.popOutComponent("SK_Component_SignUp")}},"actions":{"SK_Action_User UPDATE_THUMBNAIL":function(e,t,n){var i=cm.options.site.isAllAgeSafe;this.$(".profile .user-thumb img").attr("src",cm.user.getThumbnailUrl(t,null,i))},"SK_Action_CoinTransaction CREATE":function(e,t,n){var i=Number.parseInt(n["balance"]);this._updateCoinBalance(i)}},"appEvents":{"notification:count":function(e){this.setNotificationCount(e)},"navigate:start":function(){this._hideDropdown(true)}},"childrenEvents":{"SK_Component_Notifications navigate":function(){this._hideDropdown(true)}},"ready":function(){this._updateCoinBalance(this._coinBalance)},"setNotificationCount":function(e){this.$(".navButton.notification").toggleClass("empty",e==0).find(".indication").text(cm.number.formatMax(e))},"showNavigation":function(){cm.findView("SK_Layout_Essential").toggleOffCanvas()},"showShare":function(e){this._popupShare(e)},"showNotifications":function(){this._toggleDropdown(this.$(".SK_Component_Notifications"),this.$(".showNotifications"))},"_toggleDropdown":function(e,t){if(e.is(".shown")){this._hideDropdown()}else{this._hideDropdown(true);this._showDropdown(e,t)}},"_showDropdown":function(e,t){var n=this.$(".dropdown");e.addClass("shown");n.addClass("shown").transition({"y":0});this._toggleNavButton(t,true);this._getDropdownModalClose().enable()},"_hideDropdown":function(e){var t=this.$(".dropdown");var n=t.find("> .dropdown-content > .shown");var i=this.$(".navButton.active");var o=e?0:200;var a=this;t.queue(function(){a._toggleNavButton(i,false);$(this).dequeue()});t.transition({"y":"-100%"},o,function(){n.removeClass("shown");t.removeClass("shown")});this._getDropdownModalClose().disable()},"_getDropdownModalClose":function(){if(!this._dropdownModalClose){this._dropdownModalClose=new ModalClose(this.$(".dropdown")[0],this._hideDropdown.bind(this))}return this._dropdownModalClose},"_toggleNavButton":function(e,t){e.toggleClass("active",t);e.toggleClass("hideTriangle",!t)},"_popupShare":function(t){this.prepareComponent("SK_Component_Share").then(function(e){e.popOut({"focusElement":e.$el.find("input,textarea,select").filter(":first")[0]});e.switchTab(t)})},"_updateCoinBalance":function(e){this._$coinBalance=this.$(".navButton.coins");this._coinBalance=e;if(e>0){this._$coinBalance.removeClass("hideLabel");this._$coinBalance.find("span.label").text(this._coinBalance)}else{this._$coinBalance.addClass("hideLabel")}}});var SK_Component_HotOrNot=SK_Component_Abstract.extend({"_class":"SK_Component_HotOrNot","_$swipeLike":null,"_loadNextThrottled":promiseThrottler(function(e){return this._loadNext(e)},{"queue":true}),"events":{"click .setLike":function(){this._$swipeLike.swipeLike("like")},"click .setDislike":function(){this._$swipeLike.swipeLike("dislike")},"swipe":function(e,t){this._hotOrNot(t.pane,t.like)}},"ready":function(){this._$swipeLike=this.$(".swipeLike").swipeLike({"animationRevertSpeed":200,"animationSpeed":400,"likeSelector":".like","dislikeSelector":".dislike"})},"_loadNext":function(e){return this.ajax("loadNext",e).then(function(e){if(e){this._renderNext(e)}else{if(!this.$(".swipeLike-item").length){this.$(".playground").slideUp();this.$el.attr("data-empty",true)}}}.bind(this))},"_renderNext":function(e){var t=this.renderTemplate("tpl-swipeLike-item",{"user":e});this._$swipeLike.swipeLike("pushPane",t);return t},"_hotOrNot":function(e,t){var n=this;if(e.length){this.ajax("hotOrNot",{"user":e.data("user-id"),"like":t}).then(function(){n._updateProfileLink()});var i=_.map(this.$("li.swipeLike-item"),function(e){return $(e).data("user-id")});this._loadNextThrottled({"excludedUserIds":i})}},"_updateProfileLink":function(){var e=this.$(".swipeLike-item").last().data("user-url");this.$(".button-user").attr("href",e)}});var SK_Component_IcebreakerTerms=SK_Component_Abstract.extend({"_class":"SK_Component_IcebreakerTerms","events":{"click .acceptTerms":"_acceptTerms"},"_acceptTerms":function(){var e=this;return this.ajax("acceptTerms").then(function(){e.$el.floatbox("setOptions",{"closable":true});e.$el.floatbox("close")})}});var SK_Component_ImageCropper=SK_Component_Abstract.extend({"_class":"SK_Component_ImageCropper","photo":null,"imageFile":{},"_cropper":null,"_zoomSlider":null,"_cropImageMinWidth":null,"_zoomFactor":null,"_minRatio":null,"_maxRatio":null,"_initialRatio":null,"_skipZoomEvent":null,"events":{"click .cropImage":"previewCroppedImage","click .cancelCrop":"cancelCrop","click .cancelSave":"cancelSave","click .saveImage":"saveImage","zoom":function(e){if(!this._skipZoomEvent){var t=Math.round(e.detail.ratio*100)/100;if(t>this._maxRatio){e.preventDefault();this._cropper.zoomTo(this._maxRatio)}else{if(this._zoomSlider.noUiSlider){this._zoomSlider.noUiSlider.set(t)}}}}},"ready":function(){var e=this;_.defer(function(){e.setupCropper()})},"setupCropper":function(){var e=this.$(".photoContainer img").get(0);this._zoomSlider=this.$(".zoomSlider").get(0);var n=this;this._cropper=new Cropper(e,{"aspectRatio":1,"viewMode":1,"dragMode":"move","guides":false,"center":false,"highlight":false,"minCropBoxWidth":150,"minCropBoxHeight":150,"cropBoxMovable":false,"cropBoxResizable":false,"toggleDragModeOnDblclick":false,"ready":function(){var e=n._cropper.getImageData();var t=n._cropper.getCropBoxData();n._minRatio=Math.ceil(t.width/Math.min(e.naturalWidth,e.naturalHeight)*100)/100;n._maxRatio=Math.floor(t.width/n._cropImageMinWidth*100)/100;n._initialRatio=t.width/n._cropper.getData(true).width;n._setupSlider()}})},"previewCroppedImage":function(){var e=document.createElement("img");this.imageFile.data=e.src=this._cropper.getCroppedCanvas().toDataURL(this.imageFile.type);this.$(".result").html(e);this._goToStep("result")},"saveImage":function(){var e=this;this.ajaxModal("updateThumbnail",{"photo":this.photo,"data":this._cropper.getData(true),"zoomFactor":this._zoomFactor}).then(function(){e._closeFloatbox();e.trigger("thumbnail-updated")})},"cancelSave":function(){this._goToStep("crop")},"cancelCrop":function(){this._cropper.destroy();if(this._zoomSlider.noUiSlider){this._zoomSlider.noUiSlider.destroy()}this._closeFloatbox();this.trigger("cancel")},"_setupSlider":function(){if(this._maxRatio<=this._minRatio){return}noUiSlider.create(this._zoomSlider,{"range":{"min":this._minRatio,"max":this._maxRatio},"start":this._initialRatio,"step":.01,"connect":true,"behaviour":"tap","format":{"to":function(e){return Math.round(e*100)/100},"from":function(e){return e}}});var n=this;this._zoomSlider.noUiSlider.on("slide",function(e,t){n._skipZoomEvent=true;n._cropper.zoomTo(this.get())});this._zoomSlider.noUiSlider.on("change",function(e,t){n._skipZoomEvent=false})},"_goToStep":function(e,t){if(t){this.$(".step").hide();this.$(".step--"+e).show()}else{this.$(".step").slideUp();var n=this;_.defer(function(){n.$(".step--"+e).slideDown()})}},"_closeFloatbox":function(){this.$el.floatbox("setOptions",{"closable":true});this.$el.floatbox("close")}});var SK_Component_ImportantAnnouncements=SK_Component_Abstract.extend({"_class":"SK_Component_ImportantAnnouncements","events":{"click .dismiss":function(){var e=$("#confirmDismiss").is(":checked");this.hideImportantAnnouncements(e)}},"ready":function(){var e=$.cookie("importantAnnouncements.dismissed");if(!e){this.$el.show()}},"hideImportantAnnouncements":function(e){if(e){$.cookie("importantAnnouncements.dismissed",true,{"expires":365})}this.popIn({"closable":true})}});var SK_Component_LanguageSelector=SK_Component_Abstract.extend({"_class":"SK_Component_LanguageSelector","events":{"click .setLanguage":function(e){var t=$(e.currentTarget).data("id");if(cm.viewer){this.setLanguage(t);return false}}},"setLanguage":function(e){this.ajaxModal("setLanguage",{"language":e})}});var SK_Component_Leaderboard=SK_Component_Abstract.extend({"_class":"SK_Component_Leaderboard"});var SK_Component_Mailbox=SK_Component_Abstract.extend({"_class":"SK_Component_Mailbox","mailbox":null,"user":null,"_singleColumnView":null,"_conversationActive":null,"_activeConversation":null,"_loadConversationThrottled":promiseThrottler(function(e){return this._loadConversation(e)},{"cancelLeading":true}),"_$textInput":this.$(".writeMessage .textinput"),"_textInputHeight":null,"childrenEvents":{"SK_Component_ConversationList_Mailbox remove":function(e,t){this.hideConversationView(t)},"SK_Component_Conversation close":function(e){this.showConversationList();cm.router.route(cm.getUrl("/messages",{"mailbox":this.mailbox}))},"SK_Component_Conversation unreadConversationClick":function(e){this.hideConversationView(this._activeConversation)},"SK_Component_Conversation new-content":function(){if(this.isConversationVisible()){this.scrollToLastConversationMessage()}},"SK_Component_ConversationList_Mailbox show":function(e,t){this.showConversationView(t)},"SK_Form_ConversationMessage success.Send":function(e,t){cm.router.route(cm.getUrl("/messages",{"mailbox":"sent","conversation":t.getId()}))},"CM_FormField_Textarea change":function(){if(this._textInputHeight!==this._$textInput.height()){this._textInputHeight=this._$textInput.height();this.scrollToLastConversationMessage()}}},"ready":function(){var t=this;this.bindRepaintOnWindowResize();this._singleColumnView=this.$(".stateContainer").has(".state-singleColumn");this._conversationActive=this.$(".stateContainer").is(".state-conversationActive");var e=this.getConversationView();if(e.conversation){this.setActiveConversationView(e)}this.on("ready",function(){var e=t._getConversationListView();e.setScrollable(t.$(".conversationListContainer"))});var n={"match":function(){t._singleColumnView=false;t.repaint()}};var i={"match":function(){t._singleColumnView=true;t.repaint()}};enquire.register("(min-width: 600px)",n);enquire.register("(max-width: 599px)",i);this.on("destruct",function(){enquire.unregister("(min-width: 600px)",n);enquire.unregister("(max-width: 599px)",i)})},"repaint":function(){var e=this.$(".stateContainer");e.toggleClass("state-singleColumn",this.isSingleColumnView());e.toggleClass("state-conversationActive",this._conversationActive);this.$(".conversationListContainer").scrollShadow();this._textInputHeight=this._$textInput.height()},"setHeight":function(e){if(!this.isSingleColumnView()){e=e-this.$(".mailboxHeader").height()}var t=0;var n=this.$("#mailbox-header-ad");if(n){t=n.height()}var i=0;var o=this.$("#mailbox-footer-ad");if(o){i=o.height()}var a=0;if(this.isSingleColumnView()&&this.$("#mailbox-footer-ad:visible").length){var s=this.$(".mailboxHeader");if(s){a=s.height()}}this.$(".setHeight").css({"height":e-(t+i+a)})},"showConversationList":function(){this._getConversationListView().disableActiveConversation();if(this._activeConversation&&this.isSingleColumnView()){this._activeConversation=null}this._conversationActive=false;this.repaint()},"showNewConversationView":function(){this.showConversationView(null);this.$el.addClass("new-conversation")},"hideConversationView":function(e){var t=this._activeConversation===e;var n=this._activeConversation&&this._activeConversation.id==e.id;if(t||n){if(n){this.getConversationView().setActive(false)}if(this.isSingleColumnView()){this.showConversationList()}else{this.showNewConversationView()}}},"toggleConversationView":function(e){this.$el.removeClass("new-conversation");switch(true){case e==="new":this.showNewConversationView();break;case _.isUndefined(e):this.hideConversationView(this._activeConversation);break;default:this.showConversationView(e)}},"showConversationView":function(e){this._conversationActive=true;this.repaint();var t=this;this._loadConversationThrottled(e).then(function(){t.repaint();if(t.isConversationVisible()){t.scrollToLastConversationMessage();t.getConversationView().setAsRead()}t.trigger("show",e)});if(this.isConversationVisible()){this._getConversationListView().setActiveConversation(e)}},"setActiveConversationView":function(e){this._activeConversation=e.conversation;e.setActive(true);this._getConversationListView().setActiveConversation(this._activeConversation)},"scrollToLastConversationMessage":function(){if(this._conversationActive){this.getConversationView().scrollToBottom()}},"getConversationView":function(){var e=this._getConversationView();if(!e){throw new CM_Exception("No conversationView found")}return e},"isConversationVisible":function(e){var t=!this.isSingleColumnView()||this._conversationActive;if("undefined"===typeof e){return t}else{var n=this._activeConversation&&e.id==this._activeConversation.id;return t&&n}},"isSingleColumnView":function(){return this._singleColumnView},"_getConversationView":function(){return _.first(this._getConversationViewList())},"_getConversationViewList":function(){return this.getChildren("SK_Component_Conversation")},"_getConversationListView":function(){var e=this.findChild("SK_Component_ConversationList_Mailbox");if(!e){throw new CM_Exception("Cannot find conversationList")}return e},"_loadConversation":function(e){var t=this._activeConversation&&e&&e.id==this._activeConversation.id;if(t){return Promise.resolve()}else{this._activeConversation=null;_.each(this._getConversationViewList(),function(e){e.remove()},this);var n=this.$(".conversationContainer");n.html('<div class="spinner spinner-expanded"></div>');var i=this;return this.prepareComponent("SK_Component_Conversation",{"conversation":e,"mailbox":this.mailbox,"user":this.user},{"modal":false}).then(function(e){n.html(e.$el);i.setActiveConversationView(e);return e}).catch(CM_Exception,function(e){n.html("<pre>"+e.message+"</div>");throw e})}}});var SK_Component_MemberFeedback=SK_Component_Abstract.extend({"_class":"SK_Component_MemberFeedback","childrenEvents":{"SK_Form_MemberFeedback_Topic change":function(e){this._setTopic()}},"ready":function(){this._setTopic()},"_setTopic":function(){this.$(".topicList > *").hide();var e=this.findChild("SK_Form_MemberFeedback_Topic");if(!e){return}var t=e.getField("topic").getValue();switch(t){case"Support":case"Billing":case"General":case"Complaints":case"Cancellation":var n=this.findChild("SK_Form_MemberFeedback");if(n){n.getField("feedback_to").getInput().val(t);this.$(".topic-message").show()}break}}});var SK_Component_MenuContext=SK_Component_Abstract.extend({"_class":"SK_Component_MenuContext"});var SK_Component_MetartIframe=SK_Component_Abstract.extend({"_class":"SK_Component_MetartIframe","iframeUrl":null,"loginToken":null,"ready":function(){if(null===this.loginToken){var t=this;this._requestLoginToken().then(function(e){t.loginToken=e;t._loadIframe()})}else{this._loadIframe()}},"_requestLoginToken":function(){var n=this;return new Promise(function(t,e){n.ajaxModal("getLoginToken").then(function(e){if(e&&e.loginToken){t(e.loginToken)}})})},"_loadIframe":function(){var e=this.$(".metart-iframe");e.bind("load",this._showIframe());e.attr("src",this.iframeUrl+"?userToken="+this.loginToken)},"_showIframe":function(){this.$(".iframe-loader").remove();this.$(".metart-iframe").removeClass("loading")}});var SK_Component_Navigation=SK_Component_Abstract.extend({"_class":"SK_Component_Navigation","events":{"click .processLogout":function(){return this.logout()}},"actions":{"SK_Action_User UPDATE_THUMBNAIL":function(e,t,n){var i=cm.options.site.isAllAgeSafe;this.$(".user-thumb img").attr("src",cm.user.getThumbnailUrl(t,null,i))}},"appEvents":{"notification:conversation:unreadCount":function(e){this.setConversationCount(e)},"notification:friendRequest:count":function(e){this.setFriendRequestCount(e)}},"ready":function(){this.$(".navigation-live-girls a").attr("data-router-disabled","true").attr("target","_blank")},"logout":function(){var e=this;return this.ajax("logout",{}).then(function(){e.trigger("success")})},"setFriendRequestCount":function(e){this.$(".SK_Page_Users_Friends .indication").toggleClass("empty",e==0).text(cm.number.formatMax(e))},"setConversationCount":function(e){this.$(".SK_Page_Messages .indication").toggleClass("empty",e==0).text(cm.number.formatMax(e))}});var SK_Component_Notifications=SK_Component_Abstract.extend({"_class":"SK_Component_Notifications","friendRequestCount":null,"conversationCount":null,"actions":{"SK_Action_User CONNECT_REQUEST, CONNECT_UNREQUEST":function(e,t,n){this.setFriendRequestCount(n.friendRequestCount)},"SK_Action_Entity_MailboxConversation_Message CREATE":function(e,t,n){if(n&&!_.isUndefined(n.conversationUnreadCount)){this._setNewConversationUnread(n.conversation,n.conversationUnreadCount)}},"SK_Action_Entity_MailboxConversation DELETE, BLOCK, UNBLOCK":function(e,t,n){if(n&&!_.isUndefined(n.conversationUnreadCount)){this._setNewConversationUnread(n.conversation,n.conversationUnreadCount)}},"SK_Action_Entity_MailboxConversation UPDATE":function(e,t,n){this.setConversationCount(n.conversationUnreadCount)}},"events":{"click .notificationLink":function(){this.trigger("navigate")}},"ready":function(){this.setConversationCount(this.conversationCount);this.setFriendRequestCount(this.friendRequestCount)},"setFriendRequestCount":function(e){this.friendRequestCount=e;cm.event.trigger("notification:friendRequest:count",e);this.notifySumCount();this.$(".friendRequest").toggleClass("empty",e==0).find(".indication").text(cm.number.formatMax(e))},"setConversationCount":function(e){this.conversationCount=e;cm.event.trigger("notification:conversation:unreadCount",e);this.notifySumCount();this.$(".conversation").toggleClass("empty",e==0).find(".indication").text(cm.number.formatMax(e))},"notifySumCount":function(){var e=this.conversationCount+this.friendRequestCount;if(e>0){cm.window.title.setPrefix("("+cm.number.formatMax(e)+")")}else{cm.window.title.setPrefix(null)}cm.event.trigger("notification:count",e)},"_setNewConversationUnread":function(e,t){if(!e||!cm.getConversationView(e)){this.setConversationCount(t)}}});var SK_Component_PaymentOptions=SK_Component_Abstract.extend({"_class":"SK_Component_PaymentOptions"});var SK_Component_PhotoAdOverlay=SK_Component_Abstract.extend({});var SK_Component_PhotoDescription=SK_Component_Abstract.extend({"_class":"SK_Component_PhotoDescription","photo":null,"events":{"click .deletePhoto":"deletePhoto","click .editPhoto":function(){this.editPhoto(true)},"click .cancelEdit":function(){this.editPhoto(false)},"click .rotateCw":function(){this.rotate(90)},"click .rotateCcw":function(){this.rotate(270)}},"childrenEvents":{"SK_Component_CommentAdd inputFocus":function(){this.$(".scrollBox").scrollBottom()}},"rotate":function(e){var t=this;this.ajaxModal("rotate",{"photo":this.photo,"angle":e}).then(function(){t.trigger("rotate")})},"deletePhoto":function(){var e=this;this.ajaxModal("delete",{"photo":this.photo}).then(function(){e.trigger("delete")})},"editPhoto":function(e){this.$(".descriptionEdit").toggle(e);this.$(".descriptionView").toggle(!e)}});var SK_Component_PhotoGallery=SK_Component_Abstract.extend({"_class":"SK_Component_PhotoGallery","_$resizeContainer":null,"entityList":null,"photoInfo":{"position":null,"count":null,"photo":null,"photoViewSerialized":null,"photoViewCmp":null},"_gallery":null,"_showAdOverlay":false,"_loadPhotoDescriptionThrottled":promiseThrottler(function(){return this.prepareComponent("SK_Component_PhotoDescription",{"photo":this.photoInfo.photo},{"modal":false}).then(function(e){this.$(".photoSidebar").html(e.$el);return e}.bind(this))},{"cancelLeading":true}),"events":{"click .SK_Component_PhotoView .showPrevious":function(e){this.showPrevious();return false},"click .SK_Component_PhotoView .showNext":function(e){this.showNext();return false}},"childrenEvents":{"SK_Component_PhotoDescription delete":function(e){this.onDeletePhoto(e)},"SK_Component_PhotoView showNext":function(e){this.showNext()},"SK_Component_PhotoView showPrevious":function(e){this.showPrevious()},"SK_Component_PhotoDescription rotate":function(e){if(e===this._getPhotoDescription()){var t=_.clone(this.photoInfo);this.photoInfo.photoViewCmp.reload({"photo":t.photo}).finally(function(){if(this.photoInfo.count==t.count){t.photoViewCmp=_.find(this.getChildren("SK_Component_PhotoView"),function(e){return e.photo.id==t.photo.id},this);if(this.photoInfo.photo.id==t.photo.id){this.photoInfo.photoViewCmp=t.photoViewCmp}this._setPhotoInfoToGallery(t)}}.bind(this))}},"SK_Form_PhotoEdit success":function(e){this._loadPhotoDescription()}},"ready":function(){var t=this;this.$el.on("floatbox-open",function(){t._gallery=new SK.BackboneViewGallery({"container":t.$(".backboneViewGallery"),"position":t.photoInfo.position,"count":t.photoInfo.count,"requestView":function(e){return Promise.try(function(){return t._loadPhoto(e)}).then(function(e){return{"view":e.photoViewCmp,"position":e.position,"count":e.count}})}});t.on("destruct",function(){t._gallery.destroy()});t._gallery.on("change",function(e){t.photoInfo.photoViewCmp=e.view;t.photoInfo.photo=e.view.photo;t.photoInfo.position=e.position;t.photoInfo.count=e.count;t._loadPhotoDescription();t.photoInfo.photoViewCmp.trackView()});t.photoInfo.photoViewCmp=t.getChild("SK_Component_PhotoView");t._setPhotoInfoToGallery();t.photoInfo.photoViewCmp.trackView();t.bindRepaintOnWindowResize();t.repaint()});if(this._showAdOverlay){this._displayAdOverlay("SK_Component_PhotoAdOverlay")}},"showPrevious":function(){this._gallery.showPrev()},"showNext":function(){this._gallery.showNext()},"onDeletePhoto":function(e){if(e===this._getPhotoDescription()){if(this.photoInfo.count===1){this.popIn();this.remove();return}this._gallery.deleteCurrent()}},"repaint":function(){if(!this._$resizeContainer){this._$resizeContainer=$(window)}this.$el.css({"min-height":this._$resizeContainer.height()+"px"})},"_loadPhoto":function(e){var t={"current":this.photoInfo.photo,"offset":e};if(this.entityList){t.entityList=this.entityList}return this.ajax("loadPhoto",t).then(function(e){return this._renderPhotoInfo(e)}.bind(this))},"_renderPhotoInfo":function(e){var t=this._injectView(e.photoViewSerialized);t._ready();e.photoViewCmp=t;return e},"_setPhotoInfoToGallery":function(e){e=e||this.photoInfo;this._gallery.setView({"view":e.photoViewCmp,"position":e.position,"count":e.count})},"_getPhotoDescription":function(){return this.findChild("SK_Component_PhotoDescription")},"_loadPhotoDescription":function(){var e=this._getPhotoDescription();if(e){e.remove()}this.$(".photoSidebar").html('<div class="spinner spinner-expanded"></div>');this._loadPhotoDescriptionThrottled()},"_displayAdOverlay":function(t){this.try(function(){var e=this.findChild(t);if(!e){e=this.prepareComponent(t)}return e}).then(function(e){e.popOut({"closable":true,"fullscreen":true},true);e.on("destruct",function(){e.popIn({"closable":true})})})}});var SK_Component_PhotoUpload=SK_Component_Abstract.extend({"_class":"SK_Component_PhotoUpload"});var SK_Component_PhotoVerification=SK_Component_Abstract.extend({"_class":"SK_Component_PhotoVerification"});var SK_Component_PhotoView=SK_Component_Abstract.extend({"_class":"SK_Component_PhotoView","photo":null,"_$resizeContainer":null,"_$photoFrameWrap":null,"events":{"click img":function(e){var t=$(e.currentTarget).outerWidth();var n=e.offsetX;if(n/t>1/3){this.trigger("showNext")}else{this.trigger("showPrevious")}return false}},"ready":function(){this.bindRepaintOnWindowResize();this.repaint()},"getPhoto":function(){return this.photo},"repaint":function(){if(!this._$resizeContainer){this._$resizeContainer=$(window)}if(!this._$photoFrameWrap){this._$photoFrameWrap=this.$el}var e=this._$resizeContainer.height();this._$photoFrameWrap.css({"height":e+"px"})},"trackView":function(){return this.ajax("trackView")}});var SK_Component_PinboardView=SK_Component_Abstract.extend({"_class":"SK_Component_PinboardView","pinboard":null,"events":{"click .editPinboard":function(){this.showPinboardEdit(true)},"click .cancelEdit":function(){this.showPinboardEdit(false)},"click .deletePinboard":"deletePinboard"},"deletePinboard":function(){this.ajaxModal("delete",{"pinboard":this.pinboard})},"showPinboardEdit":function(e){this.$(".editPinboard").toggle(!e);this.$(".editPanel").slideToggle(e)}});var SK_Component_ProfileCamShow=SK_Component_Abstract.extend({"_class":"SK_Component_ProfileCamShow"});var SK_Component_ProfileCanopy=SK_Component_Abstract.extend({"_class":"SK_Component_ProfileCanopy","user":null,"thumbnailPhoto":null,"events":{"click .openSharePhoto":"openSharePhoto","click .selectThumbnail":"selectThumbnail","click .showIcebreakerInfo":"_showIcebreakerInfo","click .icon-premium-vip":"_showPremiumVipInfo","click .openPhoto":function(e){e.preventDefault();return this.showPhoto($(e.currentTarget).data("photo-id"))},"click .openThumbnailPhoto":function(e){e.preventDefault();if(this.thumbnailPhoto){return this.showPhoto(this.thumbnailPhoto.id)}}},"childrenEvents":{"SK_Component_ImageCropper thumbnail-updated":function(e){this.reload()}},"actions":{"SK_Action_User UPDATE_THUMBNAIL":function(e,t,n){var i=cm.options.site.isAllAgeSafe;this.$(".user-thumb img").attr("src",cm.user.getThumbnailUrl(t,"large",i))}},"openSharePhoto":function(){cm.findView("SK_Component_HeaderBar").showShare("photo")},"selectThumbnail":function(){return this.popOutComponent("SK_Component_Selector_ProfilePicture",{"user":this.user})},"showPhoto":function(e){return this.popOutComponent("SK_Component_PhotoGallery",{"photo":e})},"_showIcebreakerInfo":function(){this.$(".icebreaker-info").toggleModal()},"_showPremiumVipInfo":function(){var e;var t=this.$(".profile-polaroid .icon-premium-vip");if(t.is(":empty")){e=this.renderTemplate("tpl-premium-vip-info");t.append(e)}else{e=t.find(".premiumVipInfo")}e.toggleModal()}});var SK_Component_ProfileEdit=SK_Component_Abstract.extend({"_class":"SK_Component_ProfileEdit","events":{"click .menu-tabs a":function(e){return this.changeTab($(e.currentTarget).attr("rel"))}},"changeTab":function(e){return this.reload({"tab":e})}});var SK_Component_ProfileFields=SK_Component_Abstract.extend({"_class":"SK_Component_ProfileFields","childrenEvents":{"SK_Component_ProfileKarma focus":function(e){this.$(".clipSlide").clipSlide("toggle",true)}}});var SK_Component_ProfileKarma=SK_Component_Abstract.extend({"_class":"SK_Component_ProfileKarma","events":{"click .showKarmaInfo":function(e){this.$(".karma-info").floatbox()}}});var SK_Component_ProfileProgress=SK_Component_Abstract.extend({"_class":"SK_Component_ProfileProgress"});var SK_Component_Rating=SK_Component_Abstract.extend({"_class":"SK_Component_Rating","entity":null,"likesCount":null,"events":{"click .setScoreUp":function(){return this.setHot(true)},"click .deleteVote":function(){return this.setHot(false)}},"setHot":function(e){var t=this;return this.ajaxModal("setHot",{"hot":e,"likesCount":this.likesCount}).then(function(){t.trigger("ratingUpdated")})}});var SK_Component_Report=SK_Component_Abstract.extend({"_class":"SK_Component_Report","ready":function(){var t=this;this.$("form.report .formField:has([name=reason])").hide();this.$("form.report input").change(function(){var e=t.$("form.report li.reportType-value-1 input").is(":checked");t.$("form.report .formField:has([name=reason])").toggle(e)})}});var SK_Component_ResetPassword=SK_Component_Abstract.extend({"_class":"SK_Component_ResetPassword"});var SK_Component_ResponsiveMenu=SK_Component_Abstract.extend({"_class":"SK_Component_ResponsiveMenu","ready":function(){this._repaintMenu();this.bindRepaintOnWindowResize()},"repaint":function(){this._repaintMenu()},"_repaintMenu":function(){var e=this.$(".menu.responsiveMenu");var t=e.children(":not(.more)");var n=e.children(".more");t.show();var i=e.find(".menu.menu-more");var o=i.children();var a=t.filter(function(){return $(this).is(":visible")&&Math.floor($(this).position().left+$(this).outerWidth())<=e.width()}).length;var s=a;var r=t.length>a;if(r){s=t.filter(function(){return $(this).is(":visible")&&Math.floor($(this).position().left+$(this).outerWidth())<=e.width()-n.outerWidth()}).length;if(s===a){s-=1}}e.toggleClass("hasMore",r);t.each(function(e){$(this).toggle(e<s)});o.each(function(e){$(this).toggle(e>=s)});e.find(".more").toggleClass("active",i.find("li.active").css("display")!="none");this.$el.attr("data-ready","")}});var SK_Component_Review=SK_Component_Abstract.extend({"_class":"SK_Component_Review","user":null,"events":{"click .setReview":function(e){var t=$(e.currentTarget).data("reviewtype");this.setReview(t)}},"setReview":function(e){var t=this;this.ajaxModal("setReview",{"user":this.user.id,"type":e}).then(function(){t.trigger("review",{"user":t.user,"type":e});t.reload()})}});var SK_Component_SendConversationMessageGift=SK_Component_Abstract.extend({"_class":"SK_Component_SendConversationMessageGift","events":{"click .giftList .gift":function(e){var t=$(e.currentTarget);this.selectGift(t)}},"childrenEvents":{"SK_Form_ConversationMessageGift submit":function(e){this.onSend(e)}},"ready":function(){this.findChild("SK_Form_ConversationMessageGift").$(".submit").disable()},"selectGift":function(e){$(".giftList .gift").removeClass("selected");e.addClass("selected");this.findChild("SK_Form_ConversationMessageGift").$(".submit").enable()},"onSend":function(e){this.popIn();e.reset()}});var SK_Component_ServiceBundleView=SK_Component_Abstract.extend({"_class":"SK_Component_ServiceBundleView","events":{"click .cancelTransactionGroup":function(e){var t=$(e.currentTarget).data("transactiongroup-id");this.cancelTransactionGroup(t)}},"cancelTransactionGroup":function(e){this.ajaxModal("cancelTransactionGroup",{"transactionGroup":e})}});var SK_Component_ServiceFeatures=SK_Component_Abstract.extend({"_class":"SK_Component_ServiceFeatures"});var SK_Component_Share=SK_Component_Abstract.extend({"_class":"SK_Component_Share","showAccountVerification":null,"events":{"tabs.changed .tabs > *":function(e,t){t.content.find(":focusable:first").focus();$(window).trigger("resize.floatbox");this.trigger("highlight")},"focus .textinput":function(){this.trigger("highlight")}},"ready":function(){_.each(this.getChildren(),function(e){e.bind("success",function(){this.reset();cm.router.route(cm.getUrl(cm.viewer.path))})});if(this.showAccountVerification){this.$(".account-verification").show()}},"switchTab":function(e){if(!e){this.$(".menu-tabs a:first").click()}else{this.$(".menu-tabs a[rel="+e+"]").click()}}});var SK_Component_SignIn=SK_Component_Abstract.extend({"_class":"SK_Component_SignIn","ready":function(){var e=this;this.$(".forgotPW").click(function(){e.popOutComponent("SK_Component_ForgotPassword")})}});var SK_Component_SignUp=SK_Component_Abstract.extend({"_class":"SK_Component_SignUp"});var SK_Component_SiteAnnouncements=SK_Component_Abstract.extend({"_class":"SK_Component_SiteAnnouncements"});var SK_Component_SocialFollow=SK_Component_Abstract.extend({"_class":"SK_Component_SocialFollow","ready":function(){if(window.twttr&&window.twttr.widgets){window.twttr.widgets.load()}}});var SK_Component_SocialShare=SK_Component_Abstract.extend({"_class":"SK_Component_SocialShare","ready":function(){if(window.twttr&&window.twttr.widgets){$(".twitter-share-button").attr("data-url",window.location.href).attr("data-text",document.title);window.twttr.widgets.load()}}});var SK_Component_StatusView=SK_Component_Abstract.extend({"_class":"SK_Component_StatusView"});var SK_Component_Support=SK_Component_Abstract.extend({"_class":"SK_Component_Support"});var SK_Component_Tags=SK_Component_Abstract.extend({"_class":"SK_Component_Tags","model":null,"tagType":null,"events":{"click .deleteTag":function(e){var t=$(e.currentTarget).closest(".tag").data("name");this.deleteTag(t)},"click .addTag":function(e){var t=$(e.currentTarget).data("name");this.addTag(t)}},"deleteTag":function(e){e=String(e);this.ajaxModal("deleteTag",{"name":e,"model":this.model,"tagType":this.tagType})},"addTag":function(e){e=String(e);this.ajaxModal("addTag",{"name":e,"model":this.model,"tagType":this.tagType})}});var SK_Component_Testimonials=SK_Component_Abstract.extend({"_class":"SK_Component_Testimonials"});var SK_Component_TextFormatter=SK_Component_Abstract.extend({"_class":"SK_Component_TextFormatter","targetName":null,"_$target":null,"events":{"click .showEmoticons":"toggleEmoticons","click .control-emoticon .menu-tabs a":function(e){this.showEmoticonTab($(e.currentTarget).parent("li").index());return false},"click .control-emoticon .emoticon":function(e){this.addEmoticon($(e.currentTarget).data("code"));return false},"click .showPhotoSelector":"togglePhotoSelector"},"childrenEvents":{"SK_Component_Selector_TextFormatterImage select":function(e,t){this.addTextFormatterImage(t);this.toggleWindows("photo")}},"ready":function(){var e=this.$().closest("form");this._$target=e.find('[name="'+this.targetName+'"].textinput')},"showEmoticonTab":function(e){this.$(".control-emoticon .menu-tabs > *:eq("+e+")").addClass("active").siblings().removeClass("active");this.$(".control-emoticon .section:eq("+e+")").show().siblings(".section").hide();this._loadVisibleEmoticons()},"_loadVisibleEmoticons":function(){_.defer(function(){this.$(".control-emoticon .emoticon:visible[data-src]").each(function(){var e=$(this);e.attr("src",e.data("src")).removeAttr("data-src")})}.bind(this))},"addEmoticon":function(e){this.addText(e)},"addText":function(e){this._$target.focus();document.execCommand("insertText",false,e);this.trigger("addText",e)},"addTextFormatterImage":function(e){this.addText(this.getTextFormatterImageText(e))},"getTextFormatterImageText":function(e){return"![formatter]("+e.id+"-"+e.hash+")"},"toggleEmoticons":function(){this.toggleWindows("emoticon");this._loadVisibleEmoticons()},"togglePhotoSelector":function(){var e=this.findChild("SK_Component_Selector_TextFormatterImage");if(!e){var t=this;this.prepareComponent("SK_Component_Selector_TextFormatterImage",{"count":12}).then(function(e){t.$(".control-photo .control-window").html(e.$el);t.toggleWindows("photo")})}else{this.toggleWindows("photo")}},"toggleWindows":function(e){var t=this.$(".control-"+e);var n=t.find(".control-window");if(n.is(":hidden")){this.$(".control").removeClass("control-active");this.$(".control-window").slideUp("fast",function(){_.defer(function(){t.addClass("control-active");n.slideDown("fast")})})}else{n.slideUp("fast");t.removeClass("control-active")}},"hideWindows":function(){this.$(".control").removeClass("control-active");var e=this.$(".control-window");e.hide()}});var SK_Component_TextFormatterConversation=SK_Component_TextFormatter.extend({"_class":"SK_Component_TextFormatterConversation","addTextFormatterImage":function(e){this.trigger("image",this.getTextFormatterImageText(e))}});var SK_Component_UserInteraction=SK_Component_Abstract.extend({"_class":"SK_Component_UserInteraction","user":null,"events":{"click .addFriend":function(){this.toggleFriend(cm.language.get("Friend request sent!"))},"click .confirmFriend":function(){this.toggleFriend(cm.language.get("You are now friends with {$user}",{"user":this.user.displayName}))},"click .sendGift":"sendGift","click .sendMessage":"sendMessage","click .removeFriend":"removeFriend","click .toggleBlock":"toggleBlock","click .reportUser":"reportUser"},"toggleFriend":function(e){var t=this;return this.ajaxModal("toggleFriend",{"user":this.user}).then(function(){t.message(e)})},"sendMessage":function(){return cm.getBehaviourEntityOpen(this).openConversationByRecipient(this.user.id)},"sendGift":function(){return this.popOutComponent("SK_Component_SendConversationMessageGift",{"recipient":this.user})},"toggleBlock":function(){this.ajaxModal("toggleBlock",{"user":this.user})},"removeFriend":function(){this.ajaxModal("toggleFriend",{"user":this.user})},"reportUser":function(){this.popOutComponent("SK_Component_Report",{"user":this.user})}});var SK_Component_UserPreference=SK_Component_Abstract.extend({"_class":"SK_Component_UserPreference"});var SK_Component_WebcamPin=SK_Component_Abstract.extend({"_class":"SK_Component_WebcamPin"});var SK_Component_WelcomeSingleStep=SK_Component_Abstract.extend({"_class":"SK_Component_WelcomeSingleStep","user":null,"actions":{"SK_Action_User UPDATE_THUMBNAIL":function(e,t,n){var i=cm.options.site.isAllAgeSafe;this.$(".user-thumb img").attr("src",cm.user.getThumbnailUrl(t,"medium",i))}},"events":{"click .selectThumbnail":"selectThumbnail","click .SK_FormField_PhotoUpload .formField-error":"openFileDialog"},"childrenEvents":{"SK_Component_ImageCropper thumbnail-updated":function(e){this.reload()},"SK_Component_ImageCropper cancel":function(e){this.reload()},"SK_Form_Welcome_SingleStep success":function(){this._onSuccess()}},"selectThumbnail":function(){return this.popOutComponent("SK_Component_Selector_ProfilePicture",{"user":this.user})},"openFileDialog":function(){this.$('.SK_FormField_PhotoUpload input[name="photo-file"]').trigger("click")},"_onSuccess":function(){cm.getLayout().setDisplayWelcome(false);this.$el.floatbox("setOptions",{"closable":true});this.$el.floatbox("close")}});var SK_Component_CoinTransactionList_Abstract=SK_Component_Abstract.extend({"_class":"SK_Component_CoinTransactionList_Abstract"});var SK_Component_CoinTransactionList_User=SK_Component_CoinTransactionList_Abstract.extend({"_class":"SK_Component_CoinTransactionList_User"});var SK_Component_ConversationList_Mailbox=SK_Component_Abstract.extend({"_class":"SK_Component_ConversationList_Mailbox","user":null,"$scrollable":null,"hasMore":null,"mailbox":null,"pageUrl":null,"_loadMoreThrottled":null,"_conversationList":null,"_conversationListView":null,"events":{"click .showConversation":function(e){if(!this.pageUrl){var t=$(e.currentTarget).closest(".conversation");var n=this._conversationList.findWhere({"id":t.data("id")});this.trigger("show",n);return false}}},"actions":{"SK_Action_Entity_MailboxConversation_Message CREATE":function(e,t,n){this._updateConversation(n.conversation)},"SK_Action_Entity_MailboxConversation UPDATE, BLOCK, UNBLOCK":function(e,t,n){if("unread"==this.mailbox&&n.conversation.getUserData("read")){return}this._updateConversation(n.conversation)},"SK_Action_Entity_MailboxConversation DELETE":function(e,t,n){this._conversationList.remove(n.conversation)}},"ready":function(){var t=this;var n=Backbone.View.extend({"render":function(){var e=_.extend({},this.model.attributes,{"mailbox":t.mailbox,"pageUrl":t.pageUrl,"lastMessage":this._getMessagePlain(this.model.get("lastMessage")),"firstMessage":this._getMessagePlain(this.model.get("firstMessage"))});this.setElement(t.renderTemplate("section--conversation",e));return this},"remove":function(){cm.dom.teardown(this.$el);return Backbone.View.prototype.remove.call(this)},"_getMessagePlain":function(e){if(e&&e.html){var t=_.clone(e);var n=$("<p>"+e.html+"</p>");n.find("img").remove();t.html=n.text();return t}return null}});var e=Backbone.View.extend({"initialize":function(){this._conversationViews=[];this.collection.each(function(e){this.add(e)}.bind(this));_(this).bindAll("add","remove","updateSingleView");this.collection.bind("add",this.add);this.collection.bind("remove",this.remove);this.collection.bind("change",this.updateSingleView)},"updateSingleView":function(t){var e=_.find(this._conversationViews,function(e){return e.model===t});e.remove().render();this._conversationViews=_.without(this._conversationViews,e);this.insertAt(t,e)},"get":function(e){var t=this.collection.get(e);var n=this.collection.indexOf(t);return this._conversationViews[n]},"add":function(e){var t=new n({"model":e});t.render();this.insertAt(e,t);this.$el.toggleClass("hasContent",this.collection.size()>0)},"insertAt":function(e,t){var n=this.collection.indexOf(e);this._conversationViews.splice(n,0,t);if(n>=this._conversationViews.length-1){this.$el.find(".content").append(t.el)}else{var i=this._conversationViews[n+1];i.$el.before(t.el)}},"remove":function(t){var e=_.find(this._conversationViews,function(e){return e.model===t});this._conversationViews=_.without(this._conversationViews,e);e.$el.transition({"scale":.1,"delay":500},function(){e.remove()});this.$el.toggleClass("hasContent",this.collection.size()>0)}});this._conversationList.on("remove",function(e){t.trigger("remove",e)});this._conversationList.setMailbox(this.mailbox);this._conversationListView=new e({"el":this.$(".conversations"),"collection":this._conversationList});this._loadMoreThrottled=promiseThrottler(function(){return t.ajax("loadMore",{"loadedCount":t._conversationList.size()}).then(function(e){t._conversationList.add(e.conversationList.models,{"merge":true});t.hasMore=e.hasMore;return e})},{"cancelTrailing":true})},"_updateConversation":function(e){if(this.user.id!=cm.viewer.id){return}if(this._inMailbox(e)){this._conversationList.add(e,{"merge":true})}else{this._conversationList.remove(e)}},"_inMailbox":function(e){var t=e.get("userData");if(t["deleted"]){return false}var n=[];if(!t["read"]&&t["receiveStamp"]&&!t["blocked"]){n.push("unread")}if(t["receiveStamp"]&&!t["blocked"]){n.push("inbox")}if(t["sendStamp"]&&!t["blocked"]){n.push("sent")}if(t["blocked"]){n.push("spam")}if((t["sendStamp"]||t["receiveStamp"])&&!t["blocked"]){n.push("all")}return _.contains(n,this.mailbox)},"setScrollable":function(e){if(this.$scrollable===e){return}var t="scrollBottom."+this.getClass();if(this.$scrollable){this.$scrollable.off(t)}this.$scrollable=e;this.$scrollable.on(t,_.bind(this.loadMore,this));this.$scrollable.trigger("scroll")},"loadMore":function(){if(!this.$scrollable){throw new CM_Exception("Scrollable not set")}if(!this.hasMore){return}this._loadMoreThrottled()},"setActiveConversation":function(e){this.disableActiveConversation();e=this._conversationList.get(e);if(e){e.set("active",true)}},"disableActiveConversation":function(){var e=this._conversationList.findWhere({"active":true});if(e){e.unset("active")}}});var SK_Component_EntityList_EntityQuery=SK_Component_EntityList.extend({"_class":"SK_Component_EntityList_EntityQuery"});var SK_Component_EntityList_Filter=SK_Component_EntityList.extend({"_class":"SK_Component_EntityList_Filter"});var SK_Component_EntityList_Pinboard=SK_Component_EntityList.extend({"_class":"SK_Component_EntityList_Pinboard"});var SK_Component_EntityList_Blogpost_User=SK_Component_EntityList.extend({"_class":"SK_Component_EntityList_Blogpost_User"});var SK_Component_EntityList_Photo_LandingPage=SK_Component_EntityList.extend({"_class":"SK_Component_EntityList_Photo_LandingPage"});var SK_Component_EntityList_Photo_User=SK_Component_EntityList.extend({"_class":"SK_Component_EntityList_Photo_User"});var SK_Component_EntityList_Pinboard_User=SK_Component_EntityList.extend({"_class":"SK_Component_EntityList_Pinboard_User"});var SK_Component_EntityList_Profile_ConversationParticipants=SK_Component_EntityList.extend({"_class":"SK_Component_EntityList_Profile_ConversationParticipants"});var SK_Component_EntityList_Profile_FriendRequestsGot=SK_Component_EntityList.extend({"_class":"SK_Component_EntityList_Profile_FriendRequestsGot"});var SK_Component_EntityList_Profile_FriendRequestsSent=SK_Component_EntityList.extend({"_class":"SK_Component_EntityList_Profile_FriendRequestsSent"});var SK_Component_EntityList_Profile_Friends=SK_Component_EntityList.extend({"_class":"SK_Component_EntityList_Profile_Friends"});var SK_Component_EntityList_Profile_HotList=SK_Component_EntityList.extend({"_class":"SK_Component_EntityList_Profile_HotList"});var SK_Component_EntityList_Profile_Matches=SK_Component_EntityList.extend({"_class":"SK_Component_EntityList_Profile_Matches"});var SK_Component_EntityList_Profile_RatingLike=SK_Component_EntityList.extend({"_class":"SK_Component_EntityList_Profile_RatingLike"});var SK_Component_EntityList_Profile_WhoViewedMe=SK_Component_EntityList.extend({"_class":"SK_Component_EntityList_Profile_WhoViewedMe"});var SK_Component_FeedList_Abstract=SK_Component_Abstract.extend({"_class":"SK_Component_FeedList_Abstract","page":null,"hasMore":null,"context":null,"events":{"click .item-SK_Entity_Photo a[data-photo-id]":function(e){e.preventDefault();var t=$(e.currentTarget).data("photo-id");return this.showPhoto(t)},"click .hideFromFeed":function(e){var t=$(e.currentTarget).cmView("SK_Component_MenuContext_Entity").entity;return this.hideFromFeed(t)}},"showPhoto":function(e){return this.popOutComponent("SK_Component_PhotoGallery",{"photo":e})},"hideFromFeed":function(e){var t=this;return this.ajaxModal("hideFromFeed",{"entity":e}).then(function(){t.reload()})}});var SK_Component_FeedList_Friends=SK_Component_FeedList_Abstract.extend({"_class":"SK_Component_FeedList_Friends"});var SK_Component_FeedList_Popular=SK_Component_FeedList_Abstract.extend({"_class":"SK_Component_FeedList_Popular"});var SK_Component_FeedList_User=SK_Component_FeedList_Abstract.extend({"_class":"SK_Component_FeedList_User"});var SK_Component_Layover_Abstract=SK_Component_Abstract.extend({"_class":"SK_Component_Layover_Abstract","events":{"click .background":"_ignoreOffer"},"_buyOffer":function(){this.ajaxModal("buyOffer");return false},"_ignoreOffer":function(){this.popIn()}});var SK_Component_Layover_FasterPremium=SK_Component_Layover_Abstract.extend({"_class":"SK_Component_Layover_FasterPremium","lat":null,"lon":null,"girlPinsCount":null,"showMap":null,"_map":null,"events":{"click .buyOffer":"_buyOffer"},"ready":function(){if(!this.showMap){var t=this;setInterval(function(){var e=t.$(".block-resizable.resize").removeClass("resize");if(!!e.next().length){e.next().addClass("resize")}else{t.$(".block-resizable").first().addClass("resize")}},1e3);return}var e=L.map("map",{"center":[this.lat,this.lon],"zoom":14,"zoomControl":false,"attributionControl":false,"scrollWheelZoom":false,"dragging":false,"tap":false});this._map=e;L.tileLayer("https://tile.openstreetmap.org/{z}/{x}/{y}.png",{"maxZoom":19,"attribution":"© OpenStreetMap"}).addTo(e);this.on("destruct",function(){e.remove()});for(var n=0;n<this.girlPinsCount;n++){var i=Math.floor(Math.random()*100);var o=Math.floor(Math.random()*100);var a=this.$("#girlPin"+(n+1));if(a){a.css("top",i+"%");a.css("left",o+"%")}}var s=this.$(".timer-container .timer");if(s.length){var r=5*60*1e3;var c=setInterval(function(){r-=1e3;var e=Math.floor(r/(60*1e3));var t=Math.floor((r-e*60*1e3)/1e3);if(r<=0){clearInterval(c)}else{var n=t<=9?e+":"+"0"+t:e+":"+t;s.html(n)}},1e3)}},"repaint":function(){if(!this.showMap){return}this._map.invalidateSize()},"_buyOffer":function(){this.ajax("buyOffer",{},{"retry":false});return false}});var SK_Component_Layover_PremiumSpecial=SK_Component_Layover_Abstract.extend({"_class":"SK_Component_Layover_PremiumSpecial","events":{"click .buyPremiumSpecial":"_buyOffer"}});var SK_Component_Layover_PremiumVip=SK_Component_Layover_Abstract.extend({"_class":"SK_Component_Layover_PremiumVip"});var SK_Component_Layover_PremiumVod=SK_Component_Layover_Abstract.extend({"_class":"SK_Component_Layover_PremiumVod"});var SK_Component_MenuContext_Entity=SK_Component_MenuContext.extend({"_class":"SK_Component_MenuContext_Entity","entity":null,"events":{"click .toggleWindow":function(e){var t=$(e.currentTarget);this.toggleWindow(t)},"click .reportContent":"reportContent","click .blockUser":"blockUser","click .deleteStatus":"deleteStatus"},"reportContent":function(){this.popOutComponent("SK_Component_Report",{"entity":this.entity})},"blockUser":function(){var e=this;this.ajaxModal("blockUser",{"entity":this.entity}).then(function(){e.getParent().reload()})},"deleteStatus":function(){var t=this;this.ajaxModal("deleteStatus",{"status":this.entity}).then(function(){var e=t.findParent("SK_Component_Feed");if(e){e.reload()}else{cm.router.route("/")}})}});var SK_Component_Payment_Abstract=SK_Component_Abstract.extend({"_class":"SK_Component_Payment_Abstract","useOneClick":null,"events":{"click .SK_Component_PaymentMean_Rocketgate .paymentMean-value-0":"showPaymentOptions"},"ready":function(){var e=this.setTimeout(function(){this.showPaymentForm()},15e3);this.$(".payment-form").on("load",function(){clearTimeout(e);this.showPaymentForm()}.bind(this))},"showPaymentForm":function(){this.$(".loading").hide();if(!this.useOneClick){this.$(".payment-form").show();this.$(".SK_Component_PaymentOptions").show()}},"showPaymentOptions":function(){this.$(".paymentMeans").hide();this.$(".paymentOptions").show();this.$(".payment-form").show()}});var SK_Component_Payment_Bigbucks=SK_Component_Payment_Abstract.extend({"_class":"SK_Component_Payment_Bigbucks"});var SK_Component_Payment_Ccbill=SK_Component_Payment_Abstract.extend({"_class":"SK_Component_Payment_Ccbill"});var SK_Component_Payment_OptIn=SK_Component_Abstract.extend({"_class":"SK_Component_Payment_OptIn","childrenEvents":{"SK_Form_Payment_OptIn success":function(){this.popIn({"closable":true})}},"appEvents":{"navigate:start":function(){this.popIn({"closable":true})}}});var SK_Component_Payment_Rocketgate=SK_Component_Payment_Abstract.extend({"_class":"SK_Component_Payment_Rocketgate"});var SK_Component_Payment_Segpay=SK_Component_Payment_Abstract.extend({"_class":"SK_Component_Payment_Segpay"});var SK_Component_Payment_Wts=SK_Component_Payment_Abstract.extend({"_class":"SK_Component_Payment_Wts"});var SK_Component_PaymentMean_Rocketgate=SK_Component_Abstract.extend({"_class":"SK_Component_PaymentMean_Rocketgate","childrenEvents":{"SK_Form_PaymentMean_Rocketgate submit":function(){this.$(".processing-payment").show()}}});var SK_Component_PaymentSelection_Abstract=SK_Component_Abstract.extend({"_class":"SK_Component_PaymentSelection_Abstract","childrenEvents":{"SK_FormField_ServiceBundle change":function(e){e.getForm().submit("Checkout")}}});var SK_Component_PaymentSelection_Coins=SK_Component_PaymentSelection_Abstract.extend({"_class":"SK_Component_PaymentSelection_Coins"});var SK_Component_PaymentSelection_Premium=SK_Component_PaymentSelection_Abstract.extend({"_class":"SK_Component_PaymentSelection_Premium"});var SK_Component_PaymentSelection_PremiumVip=SK_Component_PaymentSelection_Abstract.extend({"_class":"SK_Component_PaymentSelection_PremiumVip"});var SK_Component_PaymentSelection_PremiumVod=SK_Component_PaymentSelection_Abstract.extend({"_class":"SK_Component_PaymentSelection_PremiumVod"});var SK_Component_Payments_ShippingAddress=SK_Component_Abstract.extend({"_class":"SK_Component_Payments_ShippingAddress"});var SK_Component_Pinboard_DropdownList=SK_Component_Abstract.extend({"_class":"SK_Component_Pinboard_DropdownList","entity":null,"pinnedCount":null,"events":{"click .showWindow":function(e){this.showWindow();this.toggleAddActive(false)},"click .setPinned":"pin","click .addPin":function(e){var t=$(e.currentTarget).parent().data("id");this.addPin(t)},"click .removePin":function(e){var t=$(e.currentTarget).parent().data("id");this.removePin(t)},"focus .textinput":function(){this.toggleAddActive(true)}},"actions":{"SK_Action_Entity_Pinboard CREATE":function(e,t,n){this.addPinboard(t)},"SK_Action_Entity_Pinboard DELETE":function(e,t,n){this.removePinboard(t)}},"childrenEvents":{"SK_Form_Pinboard submit":function(){this.closeWindow()}},"addPin":function(e){this._executeAction("add",{"pinboard":e,"entity":this.entity})},"removePin":function(e){this._executeAction("remove",{"pinboard":e,"entity":this.entity})},"pin":function(){return this._executeAction("pin",{"entity":this.entity})},"toggleAddActive":function(e){if(!e&&""!=this.findChild("SK_Form_Pinboard").getField("name").getValue()){return}this.$(".newPinboard").toggleClass("active",e)},"showWindow":function(){var e=this.$(".opener");var t=e.find(".window");t.toggleModal(function(){$(this).toggle();e.toggleClass("open")});this.findChild("SK_Form_Pinboard").resetErrors()},"closeWindow":function(){var e=this.$(".opener .window");e.toggleModal("hide")},"addPinboard":function(e){var t=this.$('.pinItem[data-id="'+e.id+'"]');if(!t.length){this.renderTemplate("dropdownItem",{"id":e.id,"name":e.name,"privacy":e.privacy}).appendTo(this.$(".pinItemList"))}var n=this.$('.pinItem[data-id="0"]');if(n.hasClass("visible")){n.removeClass("visible");this._updateTitle(e.name)}},"removePinboard":function(e){this.$('.pinItem[data-id="'+e.id+'"]').remove();var t=this.$('.pinItem[data-id="0"]');if(!t.siblings().length){t.addClass("visible");this._updateTitle("Pinboard")}},"_executeAction":function(e,t){this.closeWindow();return this.ajaxModal(e,t)},"_updateTitle":function(e){var t=this.$(".pinButton");if("Pinboard"==e){t.attr("title",cm.language.get("Add to Pinboard"))}else{t.attr("title",cm.language.get("Add to {$pinboard}",{"pinboard":e}))}}});var SK_Component_ReportList_Abstract=SK_Component_Abstract.extend({"_class":"SK_Component_ReportList_Abstract"});var SK_Component_ReportList_ByUser=SK_Component_ReportList_Abstract.extend({"_class":"SK_Component_ReportList_ByUser"});var SK_Component_ReportList_OnUser=SK_Component_ReportList_Abstract.extend({"_class":"SK_Component_ReportList_OnUser"});var SK_Component_ReviewList_Abstract=SK_Component_Abstract.extend({"_class":"SK_Component_ReviewList_Abstract"});var SK_Component_ReviewList_User=SK_Component_ReviewList_Abstract.extend({"_class":"SK_Component_ReviewList_User"});var SK_Component_Selector_Abstract=SK_Component_Abstract.extend({"_class":"SK_Component_Selector_Abstract","items":[],"events":{"click .item":function(e){var t=$(e.target).closest(".item").index();this.trigger("select",this.items[t]);return false},"click .item .deleteItem":function(e){var t=$(e.target).closest(".item").index();this.ajax("delete",{"item":this.items[t]});return false}}});var SK_Component_Selector_ProfilePicture=SK_Component_Selector_Abstract.extend({"_class":"SK_Component_Selector_ProfilePicture","user":null,"events":{"click .item":function(e){var t=$(e.target).closest(".item").index();return this.prepareComponent("SK_Component_ImageCropper",{"photo":this.items[t]}).then(function(e){e.popOut({"closable":false},true)})},"click .deleteThumbnail":function(){this.$el.floatbox("close");return this.ajax("deleteThumbnail",{"user":this.user})}},"childrenEvents":{"SK_Form_PhotoUpload success":function(){this.reload()},"SK_Component_ImageCropper thumbnail-updated":function(e){this.$el.floatbox("close")}}});var SK_Component_Selector_TextFormatterImage=SK_Component_Selector_Abstract.extend({"_class":"SK_Component_Selector_TextFormatterImage","events":{"change .toggleTrash":function(e){this._toggleTrash($(e.currentTarget).is(":checked"))}},"ready":function(){if(this.storageGet("trashVisible")){this.$(".toggleTrash").prop("checked",true);this._toggleTrash(true)}},"_toggleTrash":function(e){this.$(".items .item-manage").toggle(e);this.storageSet("trashVisible",e)}});var SK_Component_UserList_Abstract=SK_Component_Abstract.extend({"_class":"SK_Component_UserList_Abstract"});var SK_Component_Vod_Catalog=SK_Component_Abstract.extend({"_class":"SK_Component_Vod_Catalog"});var SK_Component_Vod_View=SK_Component_Abstract.extend({"_class":"SK_Component_Vod_View","mediaItemLocation":null,"ready":function(){var e=document.getElementById("videoPlayer");var t=this.mediaItemLocation;if(e.canPlayType("application/vnd.apple.mpegurl")){e.src=t}else if(Hls.isSupported()){var n=new Hls;n.loadSource(t);n.attachMedia(e)}}});var SK_Form_Account=CM_Form_Abstract.extend({"_class":"SK_Form_Account"});var SK_Form_AccountVerification=CM_Form_Abstract.extend({"_class":"SK_Form_AccountVerification"});var SK_Form_Blogpost=CM_Form_Abstract.extend({"_class":"SK_Form_Blogpost"});var SK_Form_ChangePassword=CM_Form_Abstract.extend({"_class":"SK_Form_ChangePassword"});var SK_Form_CommentAdd=CM_Form_Abstract.extend({"_class":"SK_Form_CommentAdd"});var SK_Form_ConversationMessage=CM_Form_Abstract.extend({"_class":"SK_Form_ConversationMessage","ready":function(){this.on("submit",function(){this.findChild("SK_Component_TextFormatter").hideWindows();var e=this.getField("text");e.setValue("")})}});var SK_Form_ConversationMessageGift=CM_Form_Abstract.extend({"_class":"SK_Form_ConversationMessageGift"});var SK_Form_EmailVerify=CM_Form_Abstract.extend({"_class":"SK_Form_EmailVerify"});var SK_Form_EntityQuery=CM_Form_Abstract.extend({"_class":"SK_Form_EntityQuery","events":{"click .toggleMoreOption":function(e){var t=$(e.currentTarget).attr("data-profile-field");this._toggleMoreOption(t)},"change .moreOption-panel input":function(e){var t=$(e.currentTarget).closest(".moreOption-panel").attr("data-profile-field");this._updateMoreOptionIndication(t)}},"childrenEvents":{"CM_FormField_Location distance-enabled":function(e,t){this.$el.attr("data-location-has-distance",t?"":null)}},"ready":function(){var n=this;this.$(".moreOption-panel").each(function(){var e=$(this);var t=e.attr("data-profile-field");n._updateMoreOptionIndication(t)})},"_toggleMoreOption":function(e,t){var n=this.$('.moreOption-button[data-profile-field="'+e+'"]');if("undefined"===typeof t){t=!n.hasClass("active")}var i=this;this.$(".moreOption-button").not(n).each(function(){var e=$(this).attr("data-profile-field");i._setMoreOption(e,false)});this._setMoreOption(e,t)},"_setMoreOption":function(e,t){var n=this.$('.moreOption-button[data-profile-field="'+e+'"]');var i=this.$('.moreOption-panel[data-profile-field="'+e+'"]');n.toggleClass("active",t);i.toggle(t)},"_updateMoreOptionIndication":function(e){var t=this.$('.moreOption-button[data-profile-field="'+e+'"]');var n=this.$('.moreOption-panel[data-profile-field="'+e+'"]');var i=n.find(":checkbox").is(":checked");n.toggleClass("hasModifications",i);t.toggleClass("hasModifications",i)}});var SK_Form_Example=CM_Form_Example.extend({"_class":"SK_Form_Example"});var SK_Form_ForgotPassword=CM_Form_Abstract.extend({"_class":"SK_Form_ForgotPassword"});var SK_Form_FriendRequest=CM_Form_Abstract.extend({"_class":"SK_Form_FriendRequest"});var SK_Form_Logout=CM_Form_Abstract.extend({"_class":"SK_Form_Logout"});var SK_Form_MemberFeedback=CM_Form_Abstract.extend({"_class":"SK_Form_MemberFeedback"});var SK_Form_PaymentOptions=CM_Form_Abstract.extend({"_class":"SK_Form_PaymentOptions","ready":function(){var e=this;this.$(".paymentOption input:checked").closest(".paymentOption").addClass("active");this.$(".paymentOption input").change(function(){e.submit("Checkout")})}});var SK_Form_PaymentSelection=CM_Form_Abstract.extend({"_class":"SK_Form_PaymentSelection"});var SK_Form_PhotoEdit=CM_Form_Abstract.extend({"_class":"SK_Form_PhotoEdit"});var SK_Form_PhotoUpload=CM_Form_Abstract.extend({"_class":"SK_Form_PhotoUpload","childrenEvents":{"SK_FormField_PhotoUpload uploadComplete":function(e){e.showSpinner(true);this.submit("Process").finally(function(){e.showSpinner(false)})}},"ready":function(){this.on("success",function(){this.reset()})}});var SK_Form_PhotoUploadThumbnail=CM_Form_Abstract.extend({"_class":"SK_Form_PhotoUploadThumbnail","ready":function(){this.on("success",function(){this.reset()})},"childrenEvents":{"SK_FormField_PhotoUpload uploadComplete":function(){this.submit("Process").then(function(e){return this.prepareComponent("SK_Component_ImageCropper",{"photo":e}).then(function(e){e.popOut({"closable":false},true)})})}}});var SK_Form_PhotoVerification=CM_Form_Abstract.extend({"_class":"SK_Form_PhotoVerification"});var SK_Form_Pinboard=CM_Form_Abstract.extend({"_class":"SK_Form_Pinboard"});var SK_Form_ProfileStatus=CM_Form_Abstract.extend({"_class":"SK_Form_ProfileStatus"});var SK_Form_Report=CM_Form_Abstract.extend({"_class":"SK_Form_Report"});var SK_Form_ResetPassword=CM_Form_Abstract.extend({"_class":"SK_Form_ResetPassword"});var SK_Form_SignIn=CM_Form_Abstract.extend({"_class":"SK_Form_SignIn"});var SK_Form_SignUp=CM_Form_Abstract.extend({"_class":"SK_Form_SignUp","matchSexMap":null,"redirectUrl":null,"events":{"click .showSignIn":function(e){var t=$(e.currentTarget).data("email");cm.findView().popOutComponent("SK_Component_AuthRequired",{"login":t});return false}},"ready":function(){var t=this.getField("sex");var e=t.$("select, input");var n=this.getField("email");if(this.hasField("match_sex")){var i=this.getField("match_sex");var o=this;e.on("change",function(){var e=o.matchSexMap[t.getValue()];i.setValue(e)});if(t.getValue()&&i.isEmpty(i.getValue())){e.trigger("change")}}n.once("blur",function(){n.validate();n.on("change",function(){n.validate()})});this.on("success",function(){var e=cm.getUrl(this.redirectUrl);top.location.href=e})}});var SK_Form_Tags=CM_Form_Abstract.extend({"_class":"SK_Form_Tags"});var SK_Form_TextFormatterImage=CM_Form_Abstract.extend({"_class":"SK_Form_TextFormatterImage","childrenEvents":{"CM_FormField_FileImage uploadComplete":function(e){e.showSpinner(true);this.submit("Upload").finally(function(){e.showSpinner(false)})}}});var SK_Form_UnregisterProfile=CM_Form_Abstract.extend({"_class":"SK_Form_UnregisterProfile"});var SK_Form_UserPreference=CM_Form_Abstract.extend({"_class":"SK_Form_UserPreference"});var SK_Form_WtsCheck=CM_Form_Abstract.extend({"_class":"SK_Form_WtsCheck"});var SK_Form_MemberFeedback_Topic=CM_Form_Abstract.extend({"_class":"SK_Form_MemberFeedback_Topic"});var SK_Form_Payment_OptIn=CM_Form_Abstract.extend({"_class":"SK_Form_Payment_OptIn"});var SK_Form_PaymentMean_Rocketgate=CM_Form_Abstract.extend({"_class":"SK_Form_PaymentMean_Rocketgate"});var SK_Form_Payments_ShippingAddress=CM_Form_Abstract.extend({"_class":"SK_Form_Payments_ShippingAddress"});var SK_Form_ProfileEdit_Abstract=CM_Form_Abstract.extend({"_class":"SK_Form_ProfileEdit_Abstract","ready":function(){_.each(this.getFields(),function(e){if(e instanceof CM_FormField_Text){e.disableTriggerChangeOnInput()}})}});var SK_Form_ProfileEdit_Match=SK_Form_ProfileEdit_Abstract.extend({"_class":"SK_Form_ProfileEdit_Match"});var SK_Form_ProfileEdit_Me=SK_Form_ProfileEdit_Abstract.extend({"_class":"SK_Form_ProfileEdit_Me"});var SK_Form_Welcome_SingleStep=CM_Form_Abstract.extend({"_class":"SK_Form_Welcome_SingleStep"});var SK_FormField_Age=CM_FormField_Set_Select.extend({"_class":"SK_FormField_Age"});var SK_FormField_AgeRange=CM_FormField_SliderAbstract.extend({"_class":"SK_FormField_AgeRange"});var SK_FormField_FileDocumentUpload=CM_FormField_File.extend({"_class":"SK_FormField_FileDocumentUpload"});var SK_FormField_FullName=CM_FormField_Text.extend({"_class":"SK_FormField_FullName"});var SK_FormField_Gift=CM_FormField_Set_Select.extend({"_class":"SK_FormField_Gift"});var SK_FormField_LocationMulti=CM_FormField_Suggest.extend({"_class":"SK_FormField_LocationMulti"});var SK_FormField_PaymentOption=CM_FormField_Set_Select.extend({"_class":"SK_FormField_PaymentOption"});var SK_FormField_PaymentProvider=CM_FormField_Set_Select.extend({"_class":"SK_FormField_PaymentProvider"});var SK_FormField_PhotoUpload=CM_FormField_FileImage.extend({"_class":"SK_FormField_PhotoUpload"});var SK_FormField_Privacy=CM_FormField_Set_Select.extend({"_class":"SK_FormField_Privacy"});var SK_FormField_ServiceBundle=CM_FormField_Abstract.extend({"_class":"SK_FormField_ServiceBundle","_serviceBundleId":null,"events":{"click .selectServiceBundle":function(e){var t=$(e.currentTarget).closest(".serviceBundle").data("id");this.setValue(t);this.trigger("change")}},"ready":function(){this._updateDom();var e=this.$(".slick");var n=this.$(".timer-container");var t=this;if(e.length>0){e.each(function(){t._setupSlider($(this))})}if(n.length){var i=2*60*1e3;var o=setInterval(function(){i-=1e3;var e=Math.floor(i/(60*1e3));var t=Math.floor((i-e*60*1e3)/1e3);if(i<=0){clearInterval(o)}else{n.find(".timer .minutes").html(e);n.find(".timer .seconds").html(t<=9?"0"+t:t)}},1e3)}},"getValue":function(){return this._serviceBundleId},"setValue":function(e){this._serviceBundleId=e;this._updateDom()},"getEnabled":function(){return true},"setFocus":function(){throw new Error("Not implemented")},"_updateDom":function(){this.$el.find("li.serviceBundle").removeClass("active");if(this.getValue()){this.$el.find('li.serviceBundle[data-id="'+this.getValue()+'"]').addClass("active")}else{this.$el.find("li.serviceBundle:not([data-id])").addClass("active")}},"_setupSlider":function(e){e.slick({"accessibility":true,"dots":true,"autoplay":true,"autoplaySpeed":5e3,"arrows":false,"infinite":true,"speed":300,"slidesToShow":1,"slidesToScroll":1})}});var SK_FormField_Sex=CM_FormField_Set_Select.extend({"_class":"SK_FormField_Sex"});var SK_FormField_SexAndMatchSex=CM_FormField_Set_Select.extend({"_class":"SK_FormField_SexAndMatchSex"});var SK_FormField_SexSet=CM_FormField_Set.extend({"_class":"SK_FormField_SexSet"});var SK_FormField_Tags=CM_FormField_Suggest.extend({"_class":"SK_FormField_Tags"});var SK_FormField_Username=CM_FormField_Text.extend({"_class":"SK_FormField_Username","_blurredOnce":null,"ready":function(){this.on("blur",function(){this._blurredOnce=true;this.validate()});this.on("change",function(){if(this._blurredOnce){this.validate()}},this)}});var SK_FormField_UsernameFriends=CM_FormField_Suggest.extend({"_class":"SK_FormField_UsernameFriends"});var SK_FormField_UsernameSearch=CM_FormField_Suggest.extend({"_class":"SK_FormField_UsernameSearch"});var SK_FormField_PaymentMean_Rocketgate=CM_FormField_Set_Select.extend({"_class":"SK_FormField_PaymentMean_Rocketgate"});var SK_Layout_Essential=CM_Layout_Abstract.extend({"_class":"SK_Layout_Essential","showIcebreakerTerms":null,"showWelcome":null,"showImportantAnnouncements":null,"showPremiumSpecialPopup":null,"showPremiumVODPopup":null,"showPremiumVIPPopup":null,"showFasterPremiumPopup":null,"showAgeVerificationPopup":null,"viewerCreateStamp":null,"_modalsInitialized":false,"isBackButtonEnabled":false,"appEvents":{"navigate:start":function(){this.closeOffCanvas();$("#page").addClass("page-loading")},"navigate:end":function(){$("#page").triggerReflow().removeClass("page-loading");this._applyModalsVisibility(false)}},"ready":function(){var e=this.findPage();if(null!==e){this._initModals()}},"afterPageInjected":function(){this._initModals()},"toggleOffCanvas":function(){this.$(".canvas-navigation").toggleModal("toggle",this._toggleNavigation.bind(this))},"closeOffCanvas":function(){this.$(".canvas-navigation").toggleModal("close",this._toggleNavigation.bind(this))},"setDisplayWelcome":function(e){this.showWelcome=e},"_initModals":function(){if(this._modalsInitialized){return}this._applyModalsVisibility(true);if(this._shouldShowPremiumSpecialPopup(true)){this.setInterval(function(){this._showPremiumSpecial()},3e5)}if(this._shouldShowFasterPremiumPopup(true)){this.setInterval(function(){this._showFasterPremium()},24e4)}this._modalsInitialized=true},"_applyModalsVisibility":function(e){if(this.showIcebreakerTerms){this._showIcebreakerTerms()}if(this._shouldShowWelcome()){this._showWelcomeComponent()}else{this._closeWelcomeComponent()}if(this._shouldShowImportantAnnouncements()){this._showImportantAnnouncements()}else{this._closeImportantAnnouncements()}if(this._shouldShowAgeVerification(e)){this._showAgeVerificationComponent()}if(this._shouldShowPremiumSpecialPopup(e)){this.setTimeout(function(){this._showPremiumSpecial()},2e4)}else{this._closePremiumSpecial()}if(this._shouldShowFasterPremiumPopup(e)){this.setTimeout(function(){this._showFasterPremium()},9e4)}else{this._closeFasterPremium()}if(this._shouldShowPremiumVODPopup(e)){this._showPremiumVod()}else{this._closePremiumVod()}if(this._shouldShowPremiumVIPPopup(e)){this._showPremiumVip()}else{this._closePremiumVip()}},"_toggleNavigation":function(e){this.$el.toggleClass("offCanvasActive",e)},"_showIcebreakerTerms":function(){this.try(function(){var e=this.findChild("SK_Component_IcebreakerTerms");if(!e){e=this.prepareComponent("SK_Component_IcebreakerTerms")}return e}).then(function(e){e.popOut({"closable":false},true);e.on("destruct",function(){e.popIn({"closable":true})})})},"_showWelcomeComponent":function(){var e=cm.router._getFragment();if(this.isBackButtonEnabled){cm.router.pushState("/back-button")}cm.router.pushState(e);var t="SK_Component_WelcomeSingleStep";this.try(function(){var e=this.findChild(t);if(!e){e=this.prepareComponent(t)}return e}).then(function(e){e.popOut({"closable":false},true);e.on("destruct",function(){e.popIn({"closable":true})})})},"_closeWelcomeComponent":function(){var e=this.findChild("SK_Component_WelcomeSingleStep");if(e){e.popIn({"closable":true})}},"_showImportantAnnouncements":function(){var t="SK_Component_ImportantAnnouncements";this.try(function(){var e=this.findChild(t);if(!e){e=this.prepareComponent(t)}return e}).then(function(e){e.popOut({"closable":true},true);e.on("destruct",function(){e.popIn({"closable":true})})})},"_closeImportantAnnouncements":function(){var e=this.findChild("SK_Component_ImportantAnnouncements");if(e){e.popIn({"closable":true})}},"_showAgeVerificationComponent":function(){this.try(function(){var e=this.findChild("SK_Component_AgeVerification");if(!e){e=this.prepareComponent("SK_Component_AgeVerification")}return e}).then(function(e){e.popOut({"closable":false},true);e.on("destruct",function(){e.popIn({"closable":true})})})},"_showPremiumSpecial":function(){var e="SK_Component_Layover_PremiumSpecial";var t=this;setTimeout(function(){if(!t.findChild(e)){t._showLayover(e)}},100)},"_closePremiumSpecial":function(){this._closeLayover("SK_Component_Layover_PremiumSpecial")},"_showFasterPremium":function(){if(this._shouldShowWelcome()){return}var e="SK_Component_Layover_FasterPremium";var t=this;setTimeout(function(){if(!t.findChild(e)){t._showLayover(e)}},100)},"_showPremiumVip":function(){this._showLayover("SK_Component_Layover_PremiumVip")},"_closePremiumVip":function(){this._closeLayover("SK_Component_Layover_PremiumVip")},"_showPremiumVod":function(){this._showLayover("SK_Component_Layover_PremiumVod")},"_closePremiumVod":function(){this._closeLayover("SK_Component_Layover_PremiumVod")},"_closeFasterPremium":function(){this._closeLayover("SK_Component_Layover_FasterPremium")},"_showLayover":function(t){this.try(function(){var e=this.findChild(t);if(!e){e=this.prepareComponent(t)}return e}).then(function(e){e.popOut({"closable":true,"fullscreen":true},true);e.on("destruct",function(){e.popIn({"closable":true})})})},"_closeLayover":function(e){var t=this.findChild(e);if(t){t.popIn({"closable":true})}},"_shouldShowPremiumSpecialPopup":function(e){return this._shouldShowLayover(e,this.showPremiumSpecialPopup)},"_shouldShowFasterPremiumPopup":function(e){return this._shouldShowLayover(e,this.showFasterPremiumPopup)},"_shouldShowPremiumVODPopup":function(e){return this._shouldShowLayover(e,this.showPremiumVODPopup)},"_shouldShowPremiumVIPPopup":function(e){return this._shouldShowLayover(e,this.showPremiumVIPPopup)},"_shouldShowLayover":function(e,t){if(!t){return false}var n=this.findPage();if(null===n){return false}if(n.hasClass("SK_Page_Payment_Abstract")){return false}if(!e){return false}return true},"_shouldShowWelcome":function(){var e=["SK_Page_About","SK_Page_About_Billing","SK_Page_About_Contact","FB_Page_About_Contact","SK_Page_About_Dmca","SK_Page_About_Help","SK_Page_About_Icebreaker","SK_Page_About_Impressum","SK_Page_About_Privacy","SK_Page_About_RecordKeepingRequirements","SK_Page_About_Terms","SK_Page_Account_EmailVerification"];var t=this.findPage();if(null===t){return false}var n=_.contains(e,t.getClass());return this.showWelcome&&!n},"_shouldShowAgeVerification":function(e){var t=$.cookie("ageVerificationConfirmed");var n=this.showAgeVerificationPopup&&!t&&this.viewerCreateStamp===null;return this._shouldShowLayover(e,n)},"_shouldShowImportantAnnouncements":function(){var e=["SK_Page_About_Contact","SK_Page_About_Privacy","SK_Page_About_Terms"];var t=this.findPage();if(null===t){return false}var n=_.contains(e,t.getClass());var i=$.cookie("importantAnnouncements.dismissed");return this.showImportantAnnouncements&&!i&&!n}});var SK_Page_About=CM_Page_Abstract.extend({"_class":"SK_Page_About"});var SK_Page_Account=CM_Page_Abstract.extend({"_class":"SK_Page_Account"});var SK_Page_AdvertisementRedirect=CM_Page_Abstract.extend({"_class":"SK_Page_AdvertisementRedirect"});var SK_Page_Auth=CM_Page_Abstract.extend({"_class":"SK_Page_Auth"});var SK_Page_BackButton=CM_Page_Abstract.extend({"_class":"SK_Page_BackButton"});var SK_Page_Blog=CM_Page_Abstract.extend({"_class":"SK_Page_Blog"});var SK_Page_Blogpost=CM_Page_Abstract.extend({"_class":"SK_Page_Blogpost"});var SK_Page_Blogposts=CM_Page_Abstract.extend({"_class":"SK_Page_Blogposts","events":{"click .openShareBlogpost":"openShareBlogpost"},"openShareBlogpost":function(){cm.findView("SK_Component_HeaderBar").showShare("blogpost")}});var SK_Page_CamShow=CM_Page_Abstract.extend({"_class":"SK_Page_CamShow"});var SK_Page_Checkout=CM_Page_Abstract.extend({"_class":"SK_Page_Checkout"});var SK_Page_Example=CM_Page_Example.extend({"_class":"SK_Page_Example"});var SK_Page_ExtraTabs=CM_Page_Abstract.extend({"_class":"SK_Page_ExtraTabs"});var SK_Page_Feed=CM_Page_Abstract.extend({"_class":"SK_Page_Feed","events":{"click .feedTabs a":function(e){return this.changeTab($(e.currentTarget).attr("rel"))}},"childrenEvents":{"SK_Component_Share highlight":function(){this.highlightShareComponent()}},"changeTab":function(e){var t=this.$('.menu-tabs > li > a[rel="'+e+'"]').parent();t.siblings().removeClass("active");t.addClass("active");var n=this.findChild("SK_Component_Feed");return n.reloadWithClass(e)},"highlightShareComponent":function(){this.$(".SK_Component_Share").toggleModal("show",this._toggleHighlight.bind(this))},"_toggleHighlight":function(e){this.$el.toggleClass("share-highlighted",e)}});var SK_Page_HotOrNot=CM_Page_Abstract.extend({"_class":"SK_Page_HotOrNot"});var SK_Page_Index=CM_Page_Abstract.extend({"_class":"SK_Page_Index"});var SK_Page_InternalCoRegistrationRedirect=CM_Page_Abstract.extend({"_class":"SK_Page_InternalCoRegistrationRedirect"});var SK_Page_Live=CM_Page_Abstract.extend({"_class":"SK_Page_Live"});var SK_Page_LiveGirls=CM_Page_Abstract.extend({"_class":"SK_Page_LiveGirls"});var SK_Page_Login=CM_Page_Abstract.extend({"_class":"SK_Page_Login"});var SK_Page_Messages=CM_Page_Abstract.extend({"_class":"SK_Page_Messages","_stateParams":["conversation"],"conversationUnreadCount":null,"ready":function(){this.bindRepaintOnWindowResize();var e=cm.findView("SK_Component_Notifications");if(e){e.setConversationCount(this.conversationUnreadCount)}},"repaint":function(){var e=this.findChild("SK_Component_Mailbox");e.setHeight($(window).height()-e.$el.offset().top)},"_changeState":function(e){var t=this.findChild("SK_Component_Mailbox");var n=e["conversation"];if(n&&n!=="new"){n=SK_Entity_MailboxConversation.fromID(n)}t.toggleConversationView(n);this.repaint()}});var SK_Page_NotAvailable=CM_Page_Abstract.extend({"_class":"SK_Page_NotAvailable"});var SK_Page_Photos=CM_Page_Abstract.extend({"_class":"SK_Page_Photos","photo":null,"events":{"click .openSharePhoto":"openSharePhoto"},"ready":function(){if(this.photo){this.popOutComponent("SK_Component_PhotoGallery",{"photo":this.photo.id})}},"openSharePhoto":function(){cm.findView("SK_Component_HeaderBar").showShare("photo")}});var SK_Page_Pinboard=CM_Page_Abstract.extend({"_class":"SK_Page_Pinboard"});var SK_Page_Pinboards=CM_Page_Abstract.extend({"_class":"SK_Page_Pinboards"});var SK_Page_PremiumSpecial=CM_Page_Abstract.extend({"_class":"SK_Page_PremiumSpecial"});var SK_Page_PremiumVideos=CM_Page_Abstract.extend({"_class":"SK_Page_PremiumVideos"});var SK_Page_SignUp=CM_Page_Abstract.extend({"_class":"SK_Page_SignUp"});var SK_Page_Status=CM_Page_Abstract.extend({"_class":"SK_Page_Status"});var SK_Page_TogetherNetworksRedirect=CM_Page_Abstract.extend({"_class":"SK_Page_TogetherNetworksRedirect"});var SK_Page_User=CM_Page_Abstract.extend({"_class":"SK_Page_User","childrenEvents":{"SK_Component_Share highlight":function(){this.highlightShareComponent()}},"highlightShareComponent":function(){this.$(".SK_Component_Share").toggleModal("show",this._toggleHighlight.bind(this))},"_toggleHighlight":function(e){this.$el.toggleClass("share-highlighted",e)}});var SK_Page_WebcamLinkRedirect=CM_Page_Abstract.extend({"_class":"SK_Page_WebcamLinkRedirect"});var SK_Page_About_Billing=CM_Page_Abstract.extend({"_class":"SK_Page_About_Billing"});var SK_Page_About_Complaints=CM_Page_Abstract.extend({"_class":"SK_Page_About_Complaints"});var SK_Page_About_Contact=CM_Page_Abstract.extend({"_class":"SK_Page_About_Contact"});var SK_Page_About_Dmca=CM_Page_Abstract.extend({"_class":"SK_Page_About_Dmca"});var SK_Page_About_Help=CM_Page_Abstract.extend({"_class":"SK_Page_About_Help","_stateParams":["question"],"_changeState":function(e){var t=e["question"];if(t){var n=this.$(".question"+t);if(n.length){n.toggleNext("toggle",true);cm.getLayout().scrollTo(n)}}}});var SK_Page_About_Icebreaker=CM_Page_Abstract.extend({"_class":"SK_Page_About_Icebreaker"});var SK_Page_About_Impressum=CM_Page_Abstract.extend({"_class":"SK_Page_About_Impressum","ready":function(){this.injectImpressum()},"injectImpressum":function(){var t=this.$(".placeholder");this.prepareComponent("SK_Component_AboutImpressum").then(function(e){t.html(e.$el)})}});var SK_Page_About_Privacy=CM_Page_Abstract.extend({"_class":"SK_Page_About_Privacy","_stateParams":["section"],"_changeState":function(e){var t=e["section"];if(t){var n=this.$("[name="+JSON.stringify(t)+"]");if(n.length){window.setTimeout(function(){cm.getLayout().scrollTo(n)},0)}}}});var SK_Page_About_RecordKeepingRequirements=CM_Page_Abstract.extend({"_class":"SK_Page_About_RecordKeepingRequirements"});var SK_Page_About_Terms=CM_Page_Abstract.extend({"_class":"SK_Page_About_Terms","_stateParams":["section"],"_changeState":function(e){var t=e["section"];if(t){var n=this.$("[name="+JSON.stringify(t)+"]");if(n.length){window.setTimeout(function(){cm.getLayout().scrollTo(n)},0)}}}});var SK_Page_Account_Coins=CM_Page_Abstract.extend({"_class":"SK_Page_Account_Coins"});var SK_Page_Account_EmailUnsubscribe=CM_Page_Abstract.extend({"_class":"SK_Page_Account_EmailUnsubscribe"});var SK_Page_Account_EmailVerification=CM_Page_Abstract.extend({"_class":"SK_Page_Account_EmailVerification"});var SK_Page_Account_ForgotPassword=CM_Page_Abstract.extend({"_class":"SK_Page_Account_ForgotPassword"});var SK_Page_Account_PhotoVerification=CM_Page_Abstract.extend({"_class":"SK_Page_Account_PhotoVerification"});var SK_Page_Account_Premium=CM_Page_Abstract.extend({"_class":"SK_Page_Account_Premium"});var SK_Page_Account_PremiumDirect=CM_Page_Abstract.extend({"_class":"SK_Page_Account_PremiumDirect"});var SK_Page_Account_ResetPassword=CM_Page_Abstract.extend({"_class":"SK_Page_Account_ResetPassword"});var SK_Page_Account_Verification=CM_Page_Abstract.extend({"_class":"SK_Page_Account_Verification"});var SK_Page_Account_Vip=CM_Page_Abstract.extend({"_class":"SK_Page_Account_Vip"});var SK_Page_Discover_All=CM_Page_Abstract.extend({"_class":"SK_Page_Discover_All"});var SK_Page_Discover_Blogposts=CM_Page_Abstract.extend({"_class":"SK_Page_Discover_Blogposts"});var SK_Page_Discover_Movies=CM_Page_Abstract.extend({"_class":"SK_Page_Discover_Movies"});var SK_Page_Discover_Photos=CM_Page_Abstract.extend({"_class":"SK_Page_Discover_Photos"});var SK_Page_Discover_Pinboards=CM_Page_Abstract.extend({"_class":"SK_Page_Discover_Pinboards"});var SK_Page_Error_AffiliateBlocked=CM_Page_Abstract.extend({"_class":"SK_Page_Error_AffiliateBlocked"});var SK_Page_Error_AuthRequired=CM_Page_Error_AuthRequired.extend({"_class":"SK_Page_Error_AuthRequired"});var SK_Page_Login_Random=CM_Page_Abstract.extend({"_class":"SK_Page_Login_Random"});var SK_Page_Payment_Abstract=CM_Page_Abstract.extend({"_class":"SK_Page_Payment_Abstract","requiredOptIn":null,"orderId":null,"paymentOptionId":null,"_componentName":"SK_Component_Payment_OptIn","ready":function(){if(this.requiredOptIn){this._showOptInOverlay(this._componentName)}},"_showOptInOverlay":function(t){this.try(function(){var e=this.findChild(t);if(!e){e=this.prepareComponent(t,{"order":this.orderId,"paymentOption":this.paymentOptionId})}return e}).then(function(e){e.popOut({"closable":false,"fullscreen":false},true);e.on("destruct",function(){e.popIn({"closable":false})})})}});var SK_Page_Payment_Bigbucks=SK_Page_Payment_Abstract.extend({"_class":"SK_Page_Payment_Bigbucks"});var SK_Page_Payment_Ccbill=SK_Page_Payment_Abstract.extend({"_class":"SK_Page_Payment_Ccbill"});var SK_Page_Payment_Rocketgate=SK_Page_Payment_Abstract.extend({"_class":"SK_Page_Payment_Rocketgate"});var SK_Page_Payment_Segpay=SK_Page_Payment_Abstract.extend({"_class":"SK_Page_Payment_Segpay"});var SK_Page_Payment_Wts=SK_Page_Payment_Abstract.extend({"_class":"SK_Page_Payment_Wts"});var SK_Page_Payment_Landing_Abstract=CM_Page_Abstract.extend({"_class":"SK_Page_Payment_Landing_Abstract","_redirectUrl":null,"ready":function(){top.location.replace(this._redirectUrl)}});var SK_Page_Payment_Landing_AfterDenial=CM_Page_Abstract.extend({"_class":"SK_Page_Payment_Landing_AfterDenial"});var SK_Page_Payment_Landing_Denial=SK_Page_Payment_Landing_Abstract.extend({"_class":"SK_Page_Payment_Landing_Denial"});var SK_Page_Payment_Landing_Success=SK_Page_Payment_Landing_Abstract.extend({"_class":"SK_Page_Payment_Landing_Success"});var SK_Page_Payment_Landing_ThankYou=CM_Page_Abstract.extend({"_class":"SK_Page_Payment_Landing_ThankYou"});var SK_Page_User_About=CM_Page_Abstract.extend({"_class":"SK_Page_User_About","_stateParams":["edit"],"_toggleEditProfile":function(e){if(e){this.$(".profileInfo-view").hide();this.$(".profileInfo-edit").fadeIn()}else{this.$(".profileInfo-edit").hide();this.$(".profileInfo-view").fadeIn()}},"_changeState":function(e){var t=!!e["edit"];this._toggleEditProfile(t)}});var SK_Page_Users_Abstract=CM_Page_Abstract.extend({"_class":"SK_Page_Users_Abstract"});var SK_Page_Users_Friends=CM_Page_Abstract.extend({"_class":"SK_Page_Users_Friends"});var SK_Page_Users_HotList=SK_Page_Users_Abstract.extend({"_class":"SK_Page_Users_HotList"});var SK_Page_Users_Matches=SK_Page_Users_Abstract.extend({"_class":"SK_Page_Users_Matches"});var SK_Page_Users_WhoViewedMe=CM_Page_Abstract.extend({"_class":"SK_Page_Users_WhoViewedMe"});var SK_Page_Vod_View=CM_Page_Abstract.extend({"_class":"SK_Page_Vod_View"});var CM_FormField_Birthdate=CM_FormField_Date.extend({"_class":"CM_FormField_Birthdate"});var CM_FormField_ColorPalette=CM_FormField_Set_Select.extend({"_class":"CM_FormField_ColorPalette"});var CM_FormField_Email=CM_FormField_Text.extend({"_class":"CM_FormField_Email"});var CM_FormField_Enum=CM_FormField_Set_Select.extend({"_class":"CM_FormField_Enum"});var CM_FormField_Float=CM_FormField_Text.extend({"_class":"CM_FormField_Float"});var CM_FormField_Integer=CM_FormField_Float.extend({"_class":"CM_FormField_Integer"});var CM_FormField_Location=CM_FormField_SuggestOne.extend({"_class":"CM_FormField_Location","events":{"click .detectLocation":"detectLocation"},"ready":function(){CM_FormField_SuggestOne.prototype.ready.call(this);this.on("change",function(){this.updateDistanceField()},this);if(this.getDistanceField()){var e=this;this.getDistanceField().on("ready",function(){e.updateDistanceField()})}},"getDistanceField":function(){if(!this.getOption("distanceName")){return null}return this.getForm().getField(this.getOption("distanceName"))},"updateDistanceField":function(){if(this.getDistanceField()){var e=false;var t=this.getValue();if(t){e=t.id.level>=this.getOption("distanceLevelMin")}this.getDistanceField().setEnabled(e);this.trigger("distance-enabled",e)}},"detectLocation":function(){if(!"geolocation"in navigator){throw new CM_Exception("Geolocation support unavailable")}this.$(".detect-location").addClass("waiting");var t=this;return new Promise(function(e,t){navigator.geolocation.getCurrentPosition(e,t)}).then(function(e){return t._lookupCoordinates(e.coords.latitude,e.coords.longitude)}).then(function(e){if(e){t.setValue(e)}}).catch(function(e){t.error(cm.language.get("Unable to detect location"))}).finally(function(){t.$(".detect-location").removeClass("waiting")})},"_lookupCoordinates":function(e,t){return this.ajax("getSuggestionByCoordinates",{"lat":e,"lon":t,"levelMin":this.getOption("levelMin"),"levelMax":this.getOption("levelMax")})}});var CM_FormField_Money=CM_FormField_Float.extend({"_class":"CM_FormField_Money"});var CM_FormField_Password=CM_FormField_Text.extend({"_class":"CM_FormField_Password","_visibilityDesired":false,"_valueLast":"","events":{"click .togglePasswordVisibility":function(){this.togglePasswordVisibility();this.getInput().focus()}},"ready":function(){var e=this;var t;this.getForm().on("submit",function(){t=e._visibilityDesired;e.togglePasswordVisibility(false)}).on("error",function(){e.togglePasswordVisibility(t)})},"triggerChange":function(){var e=this.getInput().val();if(e.length-this._valueLast.length>1){this.togglePasswordVisibility(false)}CM_FormField_Text.prototype.triggerChange.apply(this,arguments)},"togglePasswordVisibility":function(e){if(_.isUndefined(e)){e=!this._visibilityDesired}this._visibilityDesired=e;this.$(".mode-text").toggle(e);this.$(".mode-password").toggle(!e);this._applyDesiredPasswordVisibility()},"_applyDesiredPasswordVisibility":function(){this._setInputTypeByState(this._visibilityDesired)},"_setInputTypeByState":function(e){this.getInput().attr("type",e?"text":"password")}});var CM_FormField_Search=CM_FormField_Text.extend({"_class":"CM_FormField_Search"});var CM_FormField_Site=CM_FormField_Set_Select.extend({"_class":"CM_FormField_Site"});var CM_FormField_Slider=CM_FormField_SliderAbstract.extend({"_class":"CM_FormField_Slider"});var FB_Component_HeaderBar=SK_Component_HeaderBar.extend({"_class":"FB_Component_HeaderBar"});var FB_Component_ProfileEdit=SK_Component_ProfileEdit.extend({"_class":"FB_Component_ProfileEdit"});var FB_Component_SignUp=SK_Component_SignUp.extend({"_class":"FB_Component_SignUp"});var FB_Component_Payment_Rocketgate=SK_Component_Payment_Rocketgate.extend({"_class":"FB_Component_Payment_Rocketgate"});var FB_Page_Index=SK_Page_Index.extend({"_class":"FB_Page_Index","_isBackButtonEnabled":false,"events":{"click .showSignUp":"showSignUp","click .showSignIn":function(e){$(e.currentTarget).hide();this.showSignIn()},"click .popoutAuthRequired":"popoutAuthRequired","click .scrollToSignUp":"scrollToSignUp","click .feedEntry:not(:has(.item-SK_CamShows_CamShow)) a":function(e){e.preventDefault();cm.findView().popOutComponent("SK_Component_AuthRequired");return false}},"ready":function(){if(this._isBackButtonEnabled){this._pushStateBackButton()}this.$(".slick .entityList").slick({"accessibility":true,"slidesToShow":4,"responsive":[{"breakpoint":800,"settings":{"slidesToShow":3}},{"breakpoint":600,"settings":{"slidesToShow":2}},{"breakpoint":400,"settings":{"slidesToShow":1}}]})},"showSignUp":function(){this.findChild("SK_Component_SignUp").popOut();return false},"showSignIn":function(){this.$(".SK_Component_SignIn").fadeIn()},"popoutAuthRequired":function(){this.findChild("SK_Component_AuthRequired").popOut()},"scrollToSignUp":function(){var e=this.$(".SK_Component_SignUp:first").offset().top;$(document).scrollTop(e)},"_pushStateBackButton":function(){var e=cm.router._getFragment();cm.router.pushState("/back-button");cm.router.pushState(e)}});var FB_Page_IndexSurvey=SK_Page_Index.extend({"_class":"FB_Page_IndexSurvey","events":{"click .showNextSlide":"showNextSlide"},"showNextSlide":function(){this.$(".slide.active").removeClass("active").hide().next(".slide").addClass("active").fadeIn()}});var SK_Component_About=SK_Component_Abstract.extend({"_class":"SK_Component_About"});var SK_Component_AboutCompanyAddress=SK_Component_Abstract.extend({"_class":"SK_Component_AboutCompanyAddress"});var SK_Component_AboutImpressum=SK_Component_Abstract.extend({"_class":"SK_Component_AboutImpressum"});var SK_Component_ChatConversation=SK_Component_Conversation.extend({"_class":"SK_Component_ChatConversation","opener":null,"events":{"keydown .textinput":function(e){if(e.which==cm.keyCode.ESCAPE){this.opener.collapse();return false}if(e.which==cm.keyCode.ENTER){this.sendMessage();return false}},"click .opener-header .participants":function(){this.opener.toggle()},"click .actions .closeChat":function(){this.close()},"click":function(){if(this.isExpanded()){this.focus()}},"openerWindow.expand":function(){this.scrollBottom();this.trigger("expand")},"openerWindow.collapse":function(){this.trigger("collapse")}},"ready":function(){SK_Component_Conversation.prototype.ready.call(this);this.setScrollable(this.$(".messagesContainer"));this.opener=new OpenerWindow(this.$el);this.on("new-content",function(){this.scrollBottom()});var e=this;this.$el[0].addEventListener("blur",function(){e.blur()},true);this.$el[0].addEventListener("focus",function(){if(!e._isActive){e.focus()}},true)},"expand":function(){this.opener.expand()},"isExpanded":function(){return this.opener.isVisible()},"focus":function(){this.setActive(true);this.setAsRead();var e=document.getSelection();var t=e.toString()&&(this.$el[0].contains(e.anchorNode)||this.$el[0].contains(e.focusNode));if(!t){this.$(".textinput").focus()}},"blur":function(){this.setActive(false)},"scrollBottom":function(){this.$(".messagesContainer").scrollBottom()},"close":function(){this.trigger("close");this.remove()},"_setReadState":function(e){SK_Component_Conversation.prototype._setReadState.apply(this,arguments);if(this.getParent().isConversationMailboxActive(this.conversation)){e=true}this.$(".state-read").toggleClass("unread",!e)}});var SK_FormField_Birthdate=CM_FormField_Birthdate.extend({"_class":"SK_FormField_Birthdate"});var SK_FormField_PasswordValid=CM_FormField_Password.extend({"_class":"SK_FormField_PasswordValid"});var SK_FormField_PasswordVerification=CM_FormField_Password.extend({"_class":"SK_FormField_PasswordVerification"});var SK_Layout_Default=SK_Layout_Essential.extend({"_class":"SK_Layout_Default"});var SK_Layout_Index=SK_Layout_Default.extend({"_class":"SK_Layout_Index"});var SK_Layout_IndexFeedGuest=SK_Layout_Default.extend({"_class":"SK_Layout_IndexFeedGuest","events":{"click .signUp":function(){this.popOutComponent("SK_Component_SignUp")}}});var SK_Layout_Plain=SK_Layout_Default.extend({"_class":"SK_Layout_Plain","events":{},"childrenEvents":{},"ready":function(){}});var SK_Layout_PlainHeaderBar=SK_Layout_Default.extend({"_class":"SK_Layout_PlainHeaderBar"});var SK_Layout_PlainHeaderBarClickable=SK_Layout_Default.extend({"_class":"SK_Layout_PlainHeaderBarClickable"});var SK_Layout_Plain_Fullwindow=SK_Layout_Plain.extend({"_class":"SK_Layout_Plain_Fullwindow"});var SK_Layout_Plain_Transparent=SK_Layout_Plain.extend({"_class":"SK_Layout_Plain_Transparent"});var SK_Page_Discover_Users=SK_Page_Users_Abstract.extend({"_class":"SK_Page_Discover_Users"});var CM_FormField_Distance=CM_FormField_Slider.extend({"_class":"CM_FormField_Distance"});var cm=new SK_App;cm.model.types={"SK_Entity_Profile":1,"SK_Entity_Photo":2,"SK_Entity_Blogpost":4,"SK_Entity_ConversationMessage_Text":7,"SK_Entity_ConversationMessage_Gift":8,"SK_Entity_TextFormatterImage":9,"SK_Entity_Status":10,"SK_ActionLimit_Bruteforce":11,"SK_ActionLimit_Daily":12,"CM_Model_User":13,"SK_ServiceBundle":14,"CM_Model_Splittest":16,"CM_Model_SplittestVariation":17,"CM_Model_StreamChannel_Message":18,"CM_Model_StreamChannel_Media":19,"CM_Model_Stream_Publish":21,"CM_Model_Stream_Subscribe":22,"CM_Model_Language":23,"CM_Model_Location":24,"CM_Model_StreamChannelArchive_Media":25,"CM_Model_Splittest_RequestClient":26,"CM_Model_Splittest_User":27,"CM_Model_StreamChannel_Message_User":29,"FB_Site_Fuckbook_Lust":30,"FB_Site_Fuckbook_Fuckbook":100,"FB_Site_Admin":101,"SK_User":102,"SK_PaymentTransaction_ServiceBundle":103,"SK_PaymentTransactionGroup":104,"SK_CoinTransaction_AdminGive":106,"SK_ReputationChange_Block":107,"SK_ReputationChange_EmailVerify":109,"SK_ReputationChange_Payment":110,"SK_ReputationChange_Report":111,"SK_ReputationChange_ReportedCorrectly":112,"SK_ReputationChange_ReportInappropriate":113,"SK_ReputationChange_ReviewLegit":114,"SK_ReputationChange_Transgression":116,"SK_Entity_Comment":117,"SK_CountryRedirect":121,"SK_ServiceBundleSet":127,"SK_Model_Affiliate":131,"SK_ReputationChange_ReportedIncorrectly":132,"SK_Entertainment_Schedule_Receive_Offline":134,"SK_Entertainment_Schedule_Receive_Online":135,"SK_Entertainment_ScheduleItem":136,"SK_Entertainment_MessageSet":137,"SK_Entertainment_Message":138,"SK_ReputationChange_PhotoApproved":139,"SK_Entity_Pinboard":140,"SK_Model_PaymentMean_Creditcard_Rocketgate":142,"SK_CoinTransaction_VideoView":143,"SK_CoinTransaction_Payment":144,"SK_CoinTransaction_PaymentCoinOnly":147,"SK_AffiliateProvider_Internal":148,"SK_ReputationChange_Like":154,"SK_ReputationChange_Pin":158,"SK_Model_PaymentMean_Ccbill":160,"FB_Site_Fuckbook_Xxx":161,"SK_Model_PaymentMean_Segpay":162,"SK_AffiliateProvider_Offerit":163,"SK_Model_ProfileField":165,"SK_Model_PaymentOption":166,"SK_Model_BillingCascade":168,"CM_Model_Location_City":170,"CM_Model_Location_Country":171,"CM_Model_Location_State":172,"CM_Model_Location_Zip":173,"SK_Model_PaymentProvider_MerchantAccount":177,"CM_Model_LanguageKey":181,"FB_Site_Fuckbook_Cougar":182,"SK_Model_ReviewCandidate":184,"FB_Site_Fuckbook_Housewife":188,"FB_Site_Fuckbook_Swing":189,"FB_Site_Fuckbook_Naughty":190,"SK_CoinTransaction_PaymentReversal":215,"SK_ReputationChange_Entertainer":219,"SK_Model_ExchangeRate":220,"SK_User_AuthToken":226,"CM_Model_Currency":228,"FB_Site_Fuckbook_Lov":230,"SK_Model_GiftTemplate":232,"SK_PayoutTransaction_Affiliate_Transaction":242,"SK_Payments_Bank":246,"SK_User_StreamChannelAbout":249,"FB_Site_Fuckbook_Alias_Lust":256,"FB_Site_Fuckbook_Alias_Cougar":258,"FB_Site_Fuckbook_Alias_Housewife":259,"FB_Site_Fuckbook_Alias_Naughty":260,"FB_Site_Fuckbook_Alias_Swing":261,"FB_Site_Fuckbook_Alias_Tv":262,"SK_Payments_PostalAddress":274,"SK_Payments_Order":275,"FB_Site_Fuckbook_PussyNearby":277,"FB_Site_Fuckbook_Datemtoday":278,"SK_Service_Premium":282,"SK_Service_Coin":283,"SK_Service_CrossSell_Metart":284,"CM_StreamChannel_Thumbnail":298,"SK_AffiliateProvider_Mistral":300,"SK_Entity_MailboxConversation":301,"SK_Api_Token":310,"SK_AffiliateProvider_Voluum":327,"SK_PaymentTransaction_Attempt":334,"FB_Site_Fuckbook_PornRoxxx":336,"FB_Site_Fuckbook_EvilAngel":337,"SK_CamShows_CamShow":342,"SK_CamShows_Image":343,"CM_Migration_Model":350,"SKService_Streamate_User":351,"FB_Site_Fuckbook_Cam":356,"SK_Model_PaymentOption_Rocketgate":357,"FB_Site_Fuckbook_WebOnlineDating":358,"FB_Site_Fuckbook_GoOnlineDates":359,"FB_Site_Fuckbook_PornRox":360,"SK_CoinTransaction_AmateurCommunitySession":361,"SK_Service_PremiumVip":363,"FB_Site_Fuckbook_Fuckkbook":365,"FB_Site_Fuckbook_FuckkbookNet":366,"FB_Site_Fuckbook_SuperOnlineDates":367,"FB_Site_Fuckbook_OnlineDatesPlus":368,"SK_Metart_UserData":369,"FB_Site_Fuckbook_Fucckbook":371,"FB_Site_Fuckbook_Tv":372,"FB_Site_Fuckbook_GirlsGoneWild":373,"FB_Site_Fuckbook_Flirt":374,"FB_Site_Fuckbook_Dating":375,"SKService_TrafficPartner_AffiliateProvider":378,"SK_CoinTransaction_RndmvrView":380,"SK_AffiliateProvider_Voluum2":382,"SK_AffiliateProvider_HasOffers":383,"FB_Site_Fuckbook_CheekyDates":387,"FB_Site_Fuckbook_Ezdatez":388,"FB_Site_Fuckbook_SlickDates":390,"FB_Site_Fuckbook_SexySinglez":391,"FB_Site_Fuckbook_FlirtyGirlz":392,"FB_Site_Fuckbook_HappyBabez":393,"FB_Site_Fuckbook_NaughtyBabez":394,"FB_Site_Fuckbook_ScoreToday":395,"FB_Site_Fuckbook_SweetHoneys":396,"FB_Site_Fuckbook_AdultSpace":397,"FB_Site_Fuckbook_Dailymatchmaker":398,"FB_Site_Fuckbook_Findlocaldates":399,"FB_Site_Fuckbook_Myfundate":400,"FB_Site_Fuckbook_Cooldatez":401,"FB_Site_Fuckbook_CutieDates":402,"FB_Site_Fuckbook_MyCandyDates":403,"FB_Site_Fuckbook_MyNaughtyDate":404,"FB_Site_Fuckbook_PeachDates":405,"FB_Site_Fuckbook_YoloChicks":406,"FB_Site_Fuckbook_YoloDates":407,"FB_Site_Fuckbook_CherryDating":408,"FB_Site_Fuckbook_CupidPie":409,"FB_Site_Fuckbook_CupCakeDating":410,"FB_Site_Fuckbook_CuteChicks":411,"FB_Site_Fuckbook_LonelyBabes":412,"FB_Site_Fuckbook_FlirtyBabes":413,"FB_Site_Fuckbook_LovDating":414,"FB_Site_Fuckbook_MillennialDates":415,"FB_Site_Fuckbook_MyNaughtyModels":416,"FB_Site_Fuckbook_LovDatingCom":417,"FB_Site_Fuckbook_MillennialFling":418,"FB_Site_Fuckbook_MillennialFlirts":419,"FB_Site_Fuckbook_MillennialHookups":420,"FB_Site_Fuckbook_MillennialsNearby":421,"FB_Site_Fuckbook_MyNaughtyDates":422,"FB_Site_Fuckbook_FuckbookMobile":423,"FB_Site_Fuckbook_YoloFlings":424,"FB_Site_Fuckbook_YoloFucks":425,"FB_Site_Fuckbook_YoloGirls":426,"FB_Site_Fuckbook_YoloHookups":427,"FB_Site_Fuckbook_ChickScout":428,"FB_Site_Fuckbook_FindHornyBabes":429,"FB_Site_Fuckbook_MillennialSingles":430,"FB_Site_Fuckbook_MyBabeScout":431,"FB_Site_Fuckbook_MyChickScout":432,"FB_Site_Fuckbook_MyHornyDates":433,"FB_Site_Fuckbook_MyMillennialDates":434,"FB_Site_Fuckbook_TheMillennialDates":435,"SK_Service_CrossSell_PremiumVod":436,"FB_Site_Fuckbook_CougarNet":438,"FB_Site_Fuckbook_HousewifeNet":439,"FB_Site_Fuckbook_LustNet":440,"FB_Site_Fuckbook_NaughtyNet":441,"FB_Site_Fuckbook_SwingNet":442,"FB_Site_Fuckbook_IndianFlirt":443,"FB_Site_Fuckbook_NaijaSingles":444,"FB_Site_Fuckbook_CuteDatesNet":445,"FB_Site_Fuckbook_DreamySinglesNet":446,"FB_Site_Fuckbook_HookupzNet":447,"FB_Site_Fuckbook_SoulSinglesNet":448,"FB_Site_Fuckbook_TeaseBabesNet":449,"FB_Site_Fuckbook_WinkyDates":450,"SK_Entertainment_Schedule_Send_Offline":452,"SK_Entertainment_Schedule_Send_Online":453,"FB_Site_Fuckbook_Fuckrbook":458,"FB_Site_Fuckbook_FuckWorld":459,"FB_Site_Fuckbook_FuckMeBook":460,"FB_Site_Fuckbook_SmileCutiePie":462,"FB_Site_Fuckbook_AttractiveSingle":463,"FB_Site_Fuckbook_LatinaZone":464,"FB_Site_Fuckbook_FWBDates":465,"FB_Site_Fuckbook_GreatHoneys":466,"FB_Site_Fuckbook_GoGetLaid":467,"FB_Site_Fuckbook_FuckbookSingles":468,"SK_Model_EmailInvalid":469,"FB_Site_Fuckbook_AliciaDate":477,"FB_Site_Fuckbook_DateAmbassador":478,"FB_Site_Fuckbook_DateAshley":479,"FB_Site_Fuckbook_DateBank":480,"FB_Site_Fuckbook_DateChickly":481,"FB_Site_Fuckbook_DateClerc":482,"FB_Site_Fuckbook_DateaSandra":483,"FB_Site_Fuckbook_DateSecretary":484,"FB_Site_Fuckbook_DateaKimberly":485,"FB_Site_Fuckbook_DatecoolChick":486,"FB_Site_Fuckbook_Datelee":487,"FB_Site_Fuckbook_DatingCommander":488,"FB_Site_Fuckbook_JoyClerk":489,"FB_Site_Fuckbook_LoveCashier":490,"FB_Site_Fuckbook_LoveClerk":491,"FB_Site_Fuckbook_MeganDate":492,"FB_Site_Fuckbook_Milf_Adviser":493,"FB_Site_Fuckbook_Milf_Researcher":494,"FB_Site_Fuckbook_PartyChick":495,"FB_Site_Fuckbook_PartyChicks":496,"FB_Site_Fuckbook_PassionClerk":497,"FB_Site_Fuckbook_YoloLike":498,"FB_Site_Fuckbook_YoloPassion":499,"FB_Site_Fuckbook_FuckForFree":500,"FB_Site_Fuckbook_Niche_Asian_SinglesMe":501,"FB_Site_Fuckbook_Niche_Asian_SinglesInfo":502,"FB_Site_Fuckbook_Niche_EbonySexDatesNet":503,"FB_Site_Fuckbook_Niche_EbonySexDating":504,"FB_Site_Fuckbook_Niche_Bbw_SexDatesClub":505,"FB_Site_Fuckbook_Niche_Bbw_SexDatesNet":506,"FB_Site_Fuckbook_GaySexDates":507,"FB_Site_Fuckbook_GaySexDatesNet":508,"FB_Site_Fuckbook_TransSexDates":509,"FB_Site_Fuckbook_TransSexDatesNet":510,"FB_Site_Fuckbook_SexMessenger":511,"SK_Model_EmailBanned":512,"FB_Site_Fuckbook_FuckbookMe":513,"FB_Site_Fuckbook_FuckbookNow":514,"FB_Site_Fuckbook_FuckbookOnline":515,"FB_Site_Fuckbook_FuckbookWeb":516,"SK_Model_EmailUnsubscribed":517,"FB_Site_Fuckbook_FbookPro":518,"FB_Site_Fuckbook_FuckbookArt":519,"FB_Site_Fuckbook_FuckbookBest":520,"FB_Site_Fuckbook_FuckbookNew":521,"FB_Site_Fuckbook_FuckbookSuper":522,"SK_Mail_LoadBalancer":523,"FB_Site_Fuckbook_FuckbookMobile_Org":529,"FB_Site_Fuckbook_FuckbookDating_Co":530,"FB_Site_Fuckbook_FuckbookDating_Link":531,"FB_Site_Fuckbook_FuckbookDating_Me":532,"FB_Site_Fuckbook_FuckbookDating_Org":533,"FB_Site_Fuckbook_FuckbookMobile_Link":534,"FB_Site_Fuckbook_FuckbookMobile_Me":535,"FB_Site_Fuckbook_FuckbookMobile_Net":536,"FB_Site_Fuckbook_Cougarcrush_Link":537,"FB_Site_Fuckbook_Cougarcrush_Me":538,"FB_Site_Fuckbook_Cougarcrush_Org":539,"FB_Site_Fuckbook_Cougarcrush_Tv":540,"SK_Entity_ConversationMessage_Advertisement":543,"FB_Site_Fuckbook_Fukbok":548,"FB_Site_Fuckbook_HottieCrush":550,"SKService_EmailServiceProvider_LoadBalancer_Rule":553,"FB_Site_Fuckbook_Niche_Asian_SinglesClubOrg":554,"FB_Site_Fuckbook_Niche_Asian_SinglesLink":555,"FB_Site_Fuckbook_Niche_Asian_SinglesNet":556,"FB_Site_Fuckbook_Niche_Bbw_SexDatesLink":557,"FB_Site_Fuckbook_Niche_Bbw_SexDatesMe":558,"FB_Site_Fuckbook_Niche_Bbw_SexDatesOrg":559,"FB_Site_Fuckbook_HoneyAffair":560,"FB_Site_Fuckbook_TinDates_Com":561,"FB_Site_Fuckbook_Niche_OnlyFanSpace":562,"FB_Site_Fuckbook_BunnyDates":563,"FB_Site_Fuckbook_MyFunDates":564,"FB_Site_Fuckbook_Milf_SexDates_Club":565,"FB_Site_Fuckbook_Milf_SexDates_Dating":566,"FB_Site_Fuckbook_Niche_Fetish_Dating_Info":567,"FB_Site_Fuckbook_Niche_Fetish_Dating_Link":568,"FB_Site_Fuckbook_GrannyDateClub":569,"FB_Site_Fuckbook_GrannyDateSingles":570,"FB_Site_Fuckbook_LesbianSinglesCo":571,"FB_Site_Fuckbook_LesbiansSingles":572,"FB_Site_Fuckbook_SwingSexLink":573,"FB_Site_Fuckbook_SwingSexNet":574,"FB_Site_Fuckbook_Teens18Dating":575,"FB_Site_Fuckbook_Teens18Singles":576,"FB_Site_Fuckbook_Niche_FansWorldNet":579,"FB_Site_Fuckbook_HottieCrushNet":580,"FB_Site_Fuckbook_Milf_SexDates_Link":581,"FB_Site_Fuckbook_Milf_SexDates_Net":582,"FB_Site_Fuckbook_Milf_SexDates_Org":583,"FB_Site_Fuckbook_Milf_SexDates_Xyz":584,"FB_Site_Fuckbook_Niche_Fetish_Dating_Biz":585,"FB_Site_Fuckbook_Niche_Fetish_Dating_Club":586,"FB_Site_Fuckbook_Niche_Fetish_Dating_Me":587,"FB_Site_Fuckbook_Niche_Fetish_Dating_Ninja":588,"FB_Site_Fuckbook_TinDates_Link":589,"FB_Site_Fuckbook_TinDates_Net":590,"FB_Site_Fuckbook_TinDates_Org":591,"FB_Site_Fuckbook_TinDates_Xyz":592,"FB_Site_Fuckbook_GirlsFuckDudes":594,"FB_Site_Fuckbook_Niche_FansWorldInfo":595,"FB_Site_Fuckbook_Niche_Kwiky":596,"FB_Site_Fuckbook_Niche_WinkyZone":597,"FB_Site_Fuckbook_Niche_XmastersxWorld":598,"FB_Site_Fuckbook_Niche_ReadyGifs":599,"FB_Site_Fuckbook_Niche_FetWorld":600,"FB_Site_Fuckbook_Fikporn":601,"SK_Vod_MediaItem":602,"FB_Site_Fuckbook_GaySexChatClub":603,"FB_Site_Fuckbook_GaySexChatXyz":604,"FB_Site_Fuckbook_LovApp":605,"FB_Site_Fuckbook_MyfunChat":606,"FB_Site_Fuckbook_TransSexChat":607,"FB_Site_Fuckbook_Milf_SexChat_Club":608,"FB_Site_Fuckbook_Milf_SexChat_Net":609,"FB_Site_Fuckbook_Niche_Asian_SexChatNet":610,"FB_Site_Fuckbook_Niche_Bbw_SexChatClub":611,"FB_Site_Fuckbook_Niche_Fetish_SexChatClub":612,"FB_Site_Fuckbook_TinDates_TindSexChat":613,"SK_Yoti_CoupleSession":617};cm.action.types={"CM_Action_Email":31,"SK_Action_CoinTransaction":33,"SK_Action_PaymentTransaction":34,"SK_Action_PaymentTransactionGroup":35,"SK_Action_User":36,"SK_Action_Entity_Blogpost":37,"SK_Action_Entity_MailboxConversation":39,"SK_Action_Entity_Photo":40,"SK_Action_Entity_Pinboard":41,"SK_Action_Entity_Status":43,"SK_Action_Entity_TextFormatterImage":185,"SK_Action_Entity_Comment":186,"SK_Action_Entity_Profile":187,"SK_Action_Entity_MailboxConversation_Message":303,"SK_CamShows_CamShow_Action":345,"SK_Action_Email":528,"SK_Action_Entity_MailboxConversation_MessageChatBot":551};