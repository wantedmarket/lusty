(function(){if(f){return}var f={"_uid":null,"_onerrorBackup":null,"_url":null,"_counter":null,"install":function(e,c,d,h){this._url=e;this._counter=0;this._uid=(Math.random()+1).toString(36).substring(7);if("function"==typeof window.onerror){this._onerrorBackup=window.onerror}window.onerror=function(e,t,i,n,r){r=r?r:{};f._counter++;var o=t.indexOf(f._url)>=0;var a=0===i;var s=c&&f._counter>c;var l=o||h&&a||s;if(!l){var u=null;if(cm&&cm.logger){u=cm.logger.getFormattedRecords()}f.report({"uid":f._uid,"counter":f._counter,"previousLog":u,"url":document.location.href,"error":{"message":r.message||e,"type":r.name||null,"stack":r.stack||null,"metaInfo":r.metaInfo||null,"source":{"url":t,"line":i,"col":n}}})}if(f._onerrorBackup){f._onerrorBackup(e,t,i,n,r)}if(d){return true}}},"report":function(e){var t=new XMLHttpRequest;t.open("POST",f._url);t.setRequestHeader("Content-Type","application/json");t.send(JSON.stringify(e))}};f.install("/jserror",10,false,false)}).call(this);!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;"undefined"!=typeof window?t=window:"undefined"!=typeof global?t=global:"undefined"!=typeof self&&(t=self),t.Promise=e()}}(function(){var define,module,exports;return function o(a,s,l){function u(i,e){if(!s[i]){if(!a[i]){var t=typeof _dereq_=="function"&&_dereq_;if(!e&&t)return t(i,!0);if(c)return c(i,!0);var n=new Error("Cannot find module '"+i+"'");throw n.code="MODULE_NOT_FOUND",n}var r=s[i]={"exports":{}};a[i][0].call(r.exports,function(e){var t=a[i][1][e];return u(t?t:e)},r,r.exports,o,a,s,l)}return s[i].exports}var c=typeof _dereq_=="function"&&_dereq_;for(var e=0;e<l.length;e++)u(l[e]);return u}({"1":[function(e,t,i){"use strict";var n;try{throw new Error}catch(e){n=e}var r=e("./schedule");var o=e("./queue");var a=e("./util");function s(){this._isTickUsed=false;this._lateQueue=new o(16);this._normalQueue=new o(16);this._haveDrainedQueues=false;this._trampolineEnabled=true;var e=this;this.drainQueues=function(){e._drainQueues()};this._schedule=r}s.prototype.enableTrampoline=function(){this._trampolineEnabled=true};s.prototype.disableTrampolineIfNecessary=function(){if(a.hasDevTools){this._trampolineEnabled=false}};s.prototype.haveItemsQueued=function(){return this._isTickUsed||this._haveDrainedQueues};s.prototype.fatalError=function(e,t){if(t){process.stderr.write("Fatal "+(e instanceof Error?e.stack:e));process.exit(2)}else{this.throwLater(e)}};s.prototype.throwLater=function(e,t){if(arguments.length===1){t=e;e=function(){throw t}}if(typeof setTimeout!=="undefined"){setTimeout(function(){e(t)},0)}else try{this._schedule(function(){e(t)})}catch(e){throw new Error("No async scheduler available\n\n    See http://goo.gl/MqrFmX\n")}};function l(e,t,i){this._lateQueue.push(e,t,i);this._queueTick()}function u(e,t,i){this._normalQueue.push(e,t,i);this._queueTick()}function c(e){this._normalQueue._pushOne(e);this._queueTick()}if(!a.hasDevTools){s.prototype.invokeLater=l;s.prototype.invoke=u;s.prototype.settlePromises=c}else{s.prototype.invokeLater=function(e,t,i){if(this._trampolineEnabled){l.call(this,e,t,i)}else{this._schedule(function(){setTimeout(function(){e.call(t,i)},100)})}};s.prototype.invoke=function(e,t,i){if(this._trampolineEnabled){u.call(this,e,t,i)}else{this._schedule(function(){e.call(t,i)})}};s.prototype.settlePromises=function(e){if(this._trampolineEnabled){c.call(this,e)}else{this._schedule(function(){e._settlePromises()})}}}s.prototype.invokeFirst=function(e,t,i){this._normalQueue.unshift(e,t,i);this._queueTick()};s.prototype._drainQueue=function(e){while(e.length()>0){var t=e.shift();if(typeof t!=="function"){t._settlePromises();continue}var i=e.shift();var n=e.shift();t.call(i,n)}};s.prototype._drainQueues=function(){this._drainQueue(this._normalQueue);this._reset();this._haveDrainedQueues=true;this._drainQueue(this._lateQueue)};s.prototype._queueTick=function(){if(!this._isTickUsed){this._isTickUsed=true;this._schedule(this.drainQueues)}};s.prototype._reset=function(){this._isTickUsed=false};t.exports=s;t.exports.firstLineError=n},{"./queue":19,"./schedule":22,"./util":26}],"2":[function(e,t,i){"use strict";t.exports=function(o,a,s,l){var u=false;var i=function(e,t){this._reject(t)};var c=function(e,t){t.promiseRejectionQueued=true;t.bindingPromise._then(i,i,null,this,e)};var d=function(e,t){if((this._bitField&50397184)===0){this._resolveCallback(t.target)}};var h=function(e,t){if(!t.promiseRejectionQueued)this._reject(e)};o.prototype.bind=function(e){if(!u){u=true;o.prototype._propagateFrom=l.propagateFromFunction();o.prototype._boundValue=l.boundValueFunction()}var t=s(e);var i=new o(a);i._propagateFrom(this,1);var n=this._target();i._setBoundTo(t);if(t instanceof o){var r={"promiseRejectionQueued":false,"promise":i,"target":n,"bindingPromise":t};n._then(a,c,undefined,i,r);t._then(d,h,undefined,i,r);i._setOnCancel(t)}else{i._resolveCallback(n)}return i};o.prototype._setBoundTo=function(e){if(e!==undefined){this._bitField=this._bitField|2097152;this._boundTo=e}else{this._bitField=this._bitField&~2097152}};o.prototype._isBound=function(){return(this._bitField&2097152)===2097152};o.bind=function(e,t){return o.resolve(t).bind(e)}}},{}],"3":[function(e,t,i){"use strict";var n;if(typeof Promise!=="undefined")n=Promise;function r(){try{if(Promise===o)Promise=n}catch(e){}return o}var o=e("./promise")();o.noConflict=r;t.exports=o},{"./promise":16}],"4":[function(l,e,t){"use strict";e.exports=function(e,t,i,n){var r=l("./util");var o=r.tryCatch;var a=r.errorObj;var s=e._async;e.prototype["break"]=e.prototype.cancel=function(){if(!n.cancellation())return this._warn("cancellation is disabled");var e=this;var t=e;while(e.isCancellable()){if(!e._cancelBy(t)){if(t._isFollowing()){t._followee().cancel()}else{t._cancelBranched()}break}var i=e._cancellationParent;if(i==null||!i.isCancellable()){if(e._isFollowing()){e._followee().cancel()}else{e._cancelBranched()}break}else{if(e._isFollowing())e._followee().cancel();t=e;e=i}}};e.prototype._branchHasCancelled=function(){this._branchesRemainingToCancel--};e.prototype._enoughBranchesHaveCancelled=function(){return this._branchesRemainingToCancel===undefined||this._branchesRemainingToCancel<=0};e.prototype._cancelBy=function(e){if(e===this){this._branchesRemainingToCancel=0;this._invokeOnCancel();return true}else{this._branchHasCancelled();if(this._enoughBranchesHaveCancelled()){this._invokeOnCancel();return true}}return false};e.prototype._cancelBranched=function(){if(this._enoughBranchesHaveCancelled()){this._cancel()}};e.prototype._cancel=function(){if(!this.isCancellable())return;this._setCancelled();s.invoke(this._cancelPromises,this,undefined)};e.prototype._cancelPromises=function(){if(this._length()>0)this._settlePromises()};e.prototype._unsetOnCancel=function(){this._onCancelField=undefined};e.prototype.isCancellable=function(){return this.isPending()&&!this.isCancelled()};e.prototype._doInvokeOnCancel=function(e,t){if(r.isArray(e)){for(var i=0;i<e.length;++i){this._doInvokeOnCancel(e[i],t)}}else if(e!==undefined){if(typeof e==="function"){if(!t){var n=o(e).call(this._boundValue());if(n===a){this._attachExtraTrace(n.e);s.throwLater(n.e)}}}else{e._resultCancelled(this)}}};e.prototype._invokeOnCancel=function(){var e=this._onCancel();this._unsetOnCancel();s.invoke(this._doInvokeOnCancel,this,e)};e.prototype._invokeInternalOnCancel=function(){if(this.isCancellable()){this._doInvokeOnCancel(this._onCancel(),true);this._unsetOnCancel()}};e.prototype._resultCancelled=function(){this.cancel()}}},{"./util":26}],"5":[function(t,e,i){"use strict";e.exports=function(d){var h=t("./util");var f=t("./es5").keys;var p=h.tryCatch;var g=h.errorObj;function e(l,u,c){return function(e){var t=c._boundValue();e:for(var i=0;i<l.length;++i){var n=l[i];if(n===Error||n!=null&&n.prototype instanceof Error){if(e instanceof n){return p(u).call(t,e)}}else if(typeof n==="function"){var r=p(n).call(t,e);if(r===g){return r}else if(r){return p(u).call(t,e)}}else if(h.isObject(e)){var o=f(n);for(var a=0;a<o.length;++a){var s=o[a];if(n[s]!=e[s]){continue e}}return p(u).call(t,e)}}return d}}return e}},{"./es5":11,"./util":26}],"6":[function(e,t,i){"use strict";t.exports=function(o){var a=false;var i=[];o.prototype._promiseCreated=function(){};o.prototype._pushContext=function(){};o.prototype._popContext=function(){return null};o._peekContext=o.prototype._peekContext=function(){};function s(){this._trace=new s.CapturedTrace(l())}s.prototype._pushContext=function(){if(this._trace!==undefined){this._trace._promiseCreated=null;i.push(this._trace)}};s.prototype._popContext=function(){if(this._trace!==undefined){var e=i.pop();var t=e._promiseCreated;e._promiseCreated=null;return t}return null};function e(){if(a)return new s}function l(){var e=i.length-1;if(e>=0){return i[e]}return undefined}s.CapturedTrace=null;s.create=e;s.deactivateLongStackTraces=function(){};s.activateLongStackTraces=function(){var e=o.prototype._pushContext;var t=o.prototype._popContext;var i=o._peekContext;var n=o.prototype._peekContext;var r=o.prototype._promiseCreated;s.deactivateLongStackTraces=function(){o.prototype._pushContext=e;o.prototype._popContext=t;o._peekContext=i;o.prototype._peekContext=n;o.prototype._promiseCreated=r;a=false};a=true;o.prototype._pushContext=s.prototype._pushContext;o.prototype._popContext=s.prototype._popContext;o._peekContext=o.prototype._peekContext=l;o.prototype._promiseCreated=function(){var e=this._peekContext();if(e&&e._promiseCreated==null)e._promiseCreated=this}};return s}},{}],"7":[function(J,e,t){"use strict";e.exports=function(a,i){var n=a._getDomain;var s=a._async;var l=J("./errors").Warning;var u=J("./util");var r=u.canAttachTrace;var o;var c;var d=/[\\\/]bluebird[\\\/]js[\\\/](release|debug|instrumented)/;var h=null;var f=null;var p=false;var g;var e=!!(u.env("BLUEBIRD_DEBUG")!=0&&(true||u.env("BLUEBIRD_DEBUG")||u.env("NODE_ENV")==="development"));var t=!!(u.env("BLUEBIRD_WARNINGS")!=0&&(e||u.env("BLUEBIRD_WARNINGS")));var v=!!(u.env("BLUEBIRD_LONG_STACK_TRACES")!=0&&(e||u.env("BLUEBIRD_LONG_STACK_TRACES")));var m=u.env("BLUEBIRD_W_FORGOTTEN_RETURN")!=0&&(t||!!u.env("BLUEBIRD_W_FORGOTTEN_RETURN"));a.prototype.suppressUnhandledRejections=function(){var e=this._target();e._bitField=e._bitField&~1048576|524288};a.prototype._ensurePossibleRejectionHandled=function(){if((this._bitField&524288)!==0)return;this._setRejectionIsUnhandled();s.invokeLater(this._notifyUnhandledRejection,this,undefined)};a.prototype._notifyUnhandledRejectionIsHandled=function(){R("rejectionHandled",o,undefined,this)};a.prototype._setReturnedNonUndefined=function(){this._bitField=this._bitField|268435456};a.prototype._returnedNonUndefined=function(){return(this._bitField&268435456)!==0};a.prototype._notifyUnhandledRejection=function(){if(this._isRejectionUnhandled()){var e=this._settledValue();this._setUnhandledRejectionIsNotified();R("unhandledRejection",c,e,this)}};a.prototype._setUnhandledRejectionIsNotified=function(){this._bitField=this._bitField|262144};a.prototype._unsetUnhandledRejectionIsNotified=function(){this._bitField=this._bitField&~262144};a.prototype._isUnhandledRejectionNotified=function(){return(this._bitField&262144)>0};a.prototype._setRejectionIsUnhandled=function(){this._bitField=this._bitField|1048576};a.prototype._unsetRejectionIsUnhandled=function(){this._bitField=this._bitField&~1048576;if(this._isUnhandledRejectionNotified()){this._unsetUnhandledRejectionIsNotified();this._notifyUnhandledRejectionIsHandled()}};a.prototype._isRejectionUnhandled=function(){return(this._bitField&1048576)>0};a.prototype._warn=function(e,t,i){return x(e,t,i||this)};a.onPossiblyUnhandledRejection=function(e){var t=n();c=typeof e==="function"?t===null?e:t.bind(e):undefined};a.onUnhandledRejectionHandled=function(e){var t=n();o=typeof e==="function"?t===null?e:t.bind(e):undefined};var y=function(){};a.longStackTraces=function(){if(s.haveItemsQueued()&&!M.longStackTraces){throw new Error("cannot enable long stack traces after promises have been created\n\n    See http://goo.gl/MqrFmX\n")}if(!M.longStackTraces&&A()){var e=a.prototype._captureStackTrace;var t=a.prototype._attachExtraTrace;M.longStackTraces=true;y=function(){if(s.haveItemsQueued()&&!M.longStackTraces){throw new Error("cannot enable long stack traces after promises have been created\n\n    See http://goo.gl/MqrFmX\n")}a.prototype._captureStackTrace=e;a.prototype._attachExtraTrace=t;i.deactivateLongStackTraces();s.enableTrampoline();M.longStackTraces=false};a.prototype._captureStackTrace=$;a.prototype._attachExtraTrace=H;i.activateLongStackTraces();s.disableTrampolineIfNecessary()}};a.hasLongStackTraces=function(){return M.longStackTraces&&A()};a.config=function(e){e=Object(e);if("longStackTraces"in e){if(e.longStackTraces){a.longStackTraces()}else if(!e.longStackTraces&&a.hasLongStackTraces()){y()}}if("warnings"in e){var t=e.warnings;M.warnings=!!t;m=M.warnings;if(u.isObject(t)){if("wForgottenReturn"in t){m=!!t.wForgottenReturn}}}if("cancellation"in e&&e.cancellation&&!M.cancellation){if(s.haveItemsQueued()){throw new Error("cannot enable cancellation after promises are in use")}a.prototype._clearCancellationData=N;a.prototype._propagateFrom=w;a.prototype._onCancel=B;a.prototype._setOnCancel=F;a.prototype._attachCancellationCallback=_;a.prototype._execute=b;E=w;M.cancellation=true}};a.prototype._execute=function(e,t,i){try{e(t,i)}catch(e){return e}};a.prototype._onCancel=function(){};a.prototype._setOnCancel=function(e){};a.prototype._attachCancellationCallback=function(e){};a.prototype._captureStackTrace=function(){};a.prototype._attachExtraTrace=function(){};a.prototype._clearCancellationData=function(){};a.prototype._propagateFrom=function(e,t){};function b(e,t,i){var n=this;try{e(t,i,function(e){if(typeof e!=="function"){throw new TypeError("onCancel must be a function, got: "+u.toString(e))}n._attachCancellationCallback(e)})}catch(e){return e}}function _(e){if(!this.isCancellable())return this;var t=this._onCancel();if(t!==undefined){if(u.isArray(t)){t.push(e)}else{this._setOnCancel([t,e])}}else{this._setOnCancel(e)}}function B(){return this._onCancelField}function F(e){this._onCancelField=e}function N(){this._cancellationParent=undefined;this._onCancelField=undefined}function w(e,t){if((t&1)!==0){this._cancellationParent=e;var i=e._branchesRemainingToCancel;if(i===undefined){i=0}e._branchesRemainingToCancel=i+1}if((t&2)!==0&&e._isBound()){this._setBoundTo(e._boundTo)}}function j(e,t){if((t&2)!==0&&e._isBound()){this._setBoundTo(e._boundTo)}}var E=j;function U(){var e=this._boundTo;if(e!==undefined){if(e instanceof a){if(e.isFulfilled()){return e.value()}else{return undefined}}}return e}function $(){this._trace=new P(this._peekContext())}function H(e,t){if(r(e)){var i=this._trace;if(i!==undefined){if(t)i=i._parent}if(i!==undefined){i.attachExtraTrace(e)}else if(!e.__stackCleaned__){var n=S(e);u.notEnumerableProp(e,"stack",n.message+"\n"+n.stack.join("\n"));u.notEnumerableProp(e,"__stackCleaned__",true)}}}function z(e,t,i,n,r){if(e===undefined&&t!==null&&m){if(r!==undefined&&r._returnedNonUndefined())return;if(i)i=i+" ";var o="a promise was created in a "+i+"handler but was not returned from it";n._warn(o,true,t)}}function W(e,t){var i=e+" is deprecated and will be removed in a future version.";if(t)i+=" Use "+t+" instead.";return x(i)}function x(e,t,i){if(!M.warnings)return;var n=new l(e);var r;if(t){i._attachExtraTrace(n)}else if(M.longStackTraces&&(r=a._peekContext())){r.attachExtraTrace(n)}else{var o=S(n);n.stack=o.message+"\n"+o.stack.join("\n")}k(n,"",true)}function G(e,t){for(var i=0;i<t.length-1;++i){t[i].push("From previous event:");t[i]=t[i].join("\n")}if(i<t.length){t[i]=t[i].join("\n")}return e+"\n"+t.join("\n")}function V(e){for(var t=0;t<e.length;++t){if(e[t].length===0||t+1<e.length&&e[t][0]===e[t+1][0]){e.splice(t,1);t--}}}function q(e){var t=e[0];for(var i=1;i<e.length;++i){var n=e[i];var r=t.length-1;var o=t[r];var a=-1;for(var s=n.length-1;s>=0;--s){if(n[s]===o){a=s;break}}for(var s=a;s>=0;--s){var l=n[s];if(t[r]===l){t.pop();r--}else{break}}t=n}}function T(e){var t=[];for(var i=0;i<e.length;++i){var n=e[i];var r="    (No stack trace)"===n||h.test(n);var o=r&&O(n);if(r&&!o){if(p&&n.charAt(0)!==" "){n="    "+n}t.push(n)}}return t}function K(e){var t=e.stack.replace(/\s+$/g,"").split("\n");for(var i=0;i<t.length;++i){var n=t[i];if("    (No stack trace)"===n||h.test(n)){break}}if(i>0){t=t.slice(i)}return t}function S(e){var t=e.stack;var i=e.toString();t=typeof t==="string"&&t.length>0?K(e):["    (No stack trace)"];return{"message":i,"stack":T(t)}}function k(e,t,i){if(typeof console!=="undefined"){var n;if(u.isObject(e)){var r=e.stack;n=t+f(r,e)}else{n=t+String(e)}if(typeof g==="function"){g(n,i)}else if(typeof console.log==="function"||typeof console.log==="object"){console.log(n)}}}function R(e,t,i,n){var r=false;try{if(typeof t==="function"){r=true;if(e==="rejectionHandled"){t(n)}else{t(i,n)}}}catch(e){s.throwLater(e)}var o=false;try{o=Q(e,i,n)}catch(e){o=true;s.throwLater(e)}var a=false;if(D){try{a=D(e.toLowerCase(),{"reason":i,"promise":n})}catch(e){a=true;s.throwLater(e)}}if(!o&&!r&&!a&&e==="unhandledRejection"){k(i,"Unhandled rejection ")}}function C(e){var t;if(typeof e==="function"){t="[function "+(e.name||"anonymous")+"]"}else{t=e&&typeof e.toString==="function"?e.toString():u.toString(e);var i=/\[object [a-zA-Z0-9$_]+\]/;if(i.test(t)){try{var n=JSON.stringify(e);t=n}catch(e){}}if(t.length===0){t="(empty array)"}}return"(<"+Z(t)+">, no stack trace)"}function Z(e){var t=41;if(e.length<t){return e}return e.substr(0,t-3)+"..."}function A(){return typeof I==="function"}var O=function(){return false};var X=/[\/<\(]([^:\/]+):(\d+):(?:\d+)\)?\s*$/;function L(e){var t=e.match(X);if(t){return{"fileName":t[1],"line":parseInt(t[2],10)}}}function Y(e,t){if(!A())return;var i=e.stack.split("\n");var n=t.stack.split("\n");var r=-1;var o=-1;var a;var s;for(var l=0;l<i.length;++l){var u=L(i[l]);if(u){a=u.fileName;r=u.line;break}}for(var l=0;l<n.length;++l){var u=L(n[l]);if(u){s=u.fileName;o=u.line;break}}if(r<0||o<0||!a||!s||a!==s||r>=o){return}O=function(e){if(d.test(e))return true;var t=L(e);if(t){if(t.fileName===a&&(r<=t.line&&t.line<=o)){return true}}return false}}function P(e){this._parent=e;this._promisesCreated=0;var t=this._length=1+(e===undefined?0:e._length);I(this,P);if(t>32)this.uncycle()}u.inherits(P,Error);i.CapturedTrace=P;P.prototype.uncycle=function(){var e=this._length;if(e<2)return;var t=[];var i={};for(var n=0,r=this;r!==undefined;++n){t.push(r);r=r._parent}e=this._length=n;for(var n=e-1;n>=0;--n){var o=t[n].stack;if(i[o]===undefined){i[o]=n}}for(var n=0;n<e;++n){var a=t[n].stack;var s=i[a];if(s!==undefined&&s!==n){if(s>0){t[s-1]._parent=undefined;t[s-1]._length=1}t[n]._parent=undefined;t[n]._length=1;var l=n>0?t[n-1]:this;if(s<e-1){l._parent=t[s+1];l._parent.uncycle();l._length=l._parent._length+1}else{l._parent=undefined;l._length=1}var u=l._length+1;for(var c=n-2;c>=0;--c){t[c]._length=u;u++}return}}};P.prototype.attachExtraTrace=function(e){if(e.__stackCleaned__)return;this.uncycle();var t=S(e);var i=t.message;var n=[t.stack];var r=this;while(r!==undefined){n.push(T(r.stack.split("\n")));r=r._parent}q(n);V(n);u.notEnumerableProp(e,"stack",G(i,n));u.notEnumerableProp(e,"__stackCleaned__",true)};var I=function e(){var t=/^\s*at\s*/;var i=function(e,t){if(typeof e==="string")return e;if(t.name!==undefined&&t.message!==undefined){return t.toString()}return C(t)};if(typeof Error.stackTraceLimit==="number"&&typeof Error.captureStackTrace==="function"){Error.stackTraceLimit+=6;h=t;f=i;var n=Error.captureStackTrace;O=function(e){return d.test(e)};return function(e,t){Error.stackTraceLimit+=6;n(e,t);Error.stackTraceLimit-=6}}var r=new Error;if(typeof r.stack==="string"&&r.stack.split("\n")[0].indexOf("stackDetection@")>=0){h=/@/;f=i;p=true;return function e(t){t.stack=(new Error).stack}}var o;try{throw new Error}catch(e){o="stack"in e}if(!("stack"in r)&&o&&typeof Error.stackTraceLimit==="number"){h=t;f=i;return function e(t){Error.stackTraceLimit+=6;try{throw new Error}catch(e){t.stack=e.stack}Error.stackTraceLimit-=6}}f=function(e,t){if(typeof e==="string")return e;if((typeof t==="object"||typeof t==="function")&&t.name!==undefined&&t.message!==undefined){return t.toString()}return C(t)};return null}([]);var D;var Q=function(){if(u.isNode){return function(e,t,i){if(e==="rejectionHandled"){return process.emit(e,i)}else{return process.emit(e,t,i)}}}else{var o=typeof self!=="undefined"?self:typeof window!=="undefined"?window:typeof global!=="undefined"?global:this!==undefined?this:null;if(!o){return function(){return false}}try{var e=document.createEvent("CustomEvent");e.initCustomEvent("testingtheevent",false,true,{});o.dispatchEvent(e);D=function(e,t){var i=document.createEvent("CustomEvent");i.initCustomEvent(e,false,true,t);return!o.dispatchEvent(i)}}catch(e){}var a={};a["unhandledRejection"]=("on"+"unhandledRejection").toLowerCase();a["rejectionHandled"]=("on"+"rejectionHandled").toLowerCase();return function(e,t,i){var n=a[e];var r=o[n];if(!r)return false;if(e==="rejectionHandled"){r.call(o,i)}else{r.call(o,t,i)}return true}}}();if(typeof console!=="undefined"&&typeof console.warn!=="undefined"){g=function(e){console.warn(e)};if(u.isNode&&process.stderr.isTTY){g=function(e,t){var i=t?"[33m":"[31m";console.warn(i+e+"[0m\n")}}else if(!u.isNode&&typeof(new Error).stack==="string"){g=function(e,t){console.warn("%c"+e,t?"color: darkorange":"color: red")}}}var M={"warnings":t,"longStackTraces":false,"cancellation":false};if(v)a.longStackTraces();return{"longStackTraces":function(){return M.longStackTraces},"warnings":function(){return M.warnings},"cancellation":function(){return M.cancellation},"propagateFromFunction":function(){return E},"boundValueFunction":function(){return U},"checkForgottenReturns":z,"setBounds":Y,"warn":x,"deprecated":W,"CapturedTrace":P}}},{"./errors":10,"./util":26}],"8":[function(e,t,i){"use strict";t.exports=function(n){function r(){return this.value}function o(){throw this.reason}n.prototype["return"]=n.prototype.thenReturn=function(e){if(e instanceof n)e.suppressUnhandledRejections();return this._then(r,undefined,undefined,{"value":e},undefined)};n.prototype["throw"]=n.prototype.thenThrow=function(e){return this._then(o,undefined,undefined,{"reason":e},undefined)};n.prototype.catchThrow=function(e){if(arguments.length<=1){return this._then(undefined,o,undefined,{"reason":e},undefined)}else{var t=arguments[1];var i=function(){throw t};return this.caught(e,i)}};n.prototype.catchReturn=function(e){if(arguments.length<=1){if(e instanceof n)e.suppressUnhandledRejections();return this._then(undefined,r,undefined,{"value":e},undefined)}else{var t=arguments[1];if(t instanceof n)t.suppressUnhandledRejections();var i=function(){return t};return this.caught(e,i)}}}},{}],"9":[function(e,t,i){"use strict";t.exports=function(e,i){var n=e.reduce;var t=e.all;function r(){return t(this)}function o(e,t){return n(e,t,i,i)}e.prototype.each=function(e){return this.mapSeries(e)._then(r,undefined,undefined,this,undefined)};e.prototype.mapSeries=function(e){return n(this,e,i,i)};e.each=function(e,t){return o(e,t)._then(r,undefined,undefined,e,undefined)};e.mapSeries=o}},{}],"10":[function(e,t,i){"use strict";var n=e("./es5");var r=n.freeze;var o=e("./util");var a=o.inherits;var s=o.notEnumerableProp;function l(t,i){function n(e){if(!(this instanceof n))return new n(e);s(this,"message",typeof e==="string"?e:i);s(this,"name",t);if(Error.captureStackTrace){Error.captureStackTrace(this,this.constructor)}else{Error.call(this)}}a(n,Error);return n}var u,c;var d=l("Warning","warning");var h=l("CancellationError","cancellation error");var f=l("TimeoutError","timeout error");var p=l("AggregateError","aggregate error");try{u=TypeError;c=RangeError}catch(e){u=l("TypeError","type error");c=l("RangeError","range error")}var g=("join pop push shift unshift slice filter forEach some "+"every map indexOf lastIndexOf reduce reduceRight sort reverse").split(" ");for(var v=0;v<g.length;++v){if(typeof Array.prototype[g[v]]==="function"){p.prototype[g[v]]=Array.prototype[g[v]]}}n.defineProperty(p.prototype,"length",{"value":0,"configurable":false,"writable":true,"enumerable":true});p.prototype["isOperational"]=true;var m=0;p.prototype.toString=function(){var e=Array(m*4+1).join(" ");var t="\n"+e+"AggregateError of:"+"\n";m++;e=Array(m*4+1).join(" ");for(var i=0;i<this.length;++i){var n=this[i]===this?"[Circular AggregateError]":this[i]+"";var r=n.split("\n");for(var o=0;o<r.length;++o){r[o]=e+r[o]}n=r.join("\n");t+=n+"\n"}m--;return t};function y(e){if(!(this instanceof y))return new y(e);s(this,"name","OperationalError");s(this,"message",e);this.cause=e;this["isOperational"]=true;if(e instanceof Error){s(this,"message",e.message);s(this,"stack",e.stack)}else if(Error.captureStackTrace){Error.captureStackTrace(this,this.constructor)}}a(y,Error);var b=Error["__BluebirdErrorTypes__"];if(!b){b=r({"CancellationError":h,"TimeoutError":f,"OperationalError":y,"RejectionError":y,"AggregateError":p});s(Error,"__BluebirdErrorTypes__",b)}t.exports={"Error":Error,"TypeError":u,"RangeError":c,"CancellationError":b.CancellationError,"OperationalError":b.OperationalError,"TimeoutError":b.TimeoutError,"AggregateError":b.AggregateError,"Warning":d}},{"./es5":11,"./util":26}],"11":[function(e,t,i){var n=function(){"use strict";return this===undefined}();if(n){t.exports={"freeze":Object.freeze,"defineProperty":Object.defineProperty,"getDescriptor":Object.getOwnPropertyDescriptor,"keys":Object.keys,"names":Object.getOwnPropertyNames,"getPrototypeOf":Object.getPrototypeOf,"isArray":Array.isArray,"isES5":n,"propertyIsWritable":function(e,t){var i=Object.getOwnPropertyDescriptor(e,t);return!!(!i||i.writable||i.set)}}}else{var r={}.hasOwnProperty;var o={}.toString;var a={}.constructor.prototype;var s=function(e){var t=[];for(var i in e){if(r.call(e,i)){t.push(i)}}return t};var l=function(e,t){return{"value":e[t]}};var u=function(e,t,i){e[t]=i.value;return e};var c=function(e){return e};var d=function(e){try{return Object(e).constructor.prototype}catch(e){return a}};var h=function(e){try{return o.call(e)==="[object Array]"}catch(e){return false}};t.exports={"isArray":h,"keys":s,"names":s,"defineProperty":u,"getDescriptor":l,"freeze":c,"getPrototypeOf":d,"isES5":n,"propertyIsWritable":function(){return true}}}},{}],"12":[function(i,e,t){"use strict";e.exports=function(a,s){var e=i("./util");var l=a.CancellationError;var u=e.errorObj;function r(e,t,i){this.promise=e;this.type=t;this.handler=i;this.called=false;this.cancelPromise=null}function c(e){this.finallyHandler=e}c.prototype._resultCancelled=function(){d(this.finallyHandler)};function d(e,t){if(e.cancelPromise!=null){if(arguments.length>1){e.cancelPromise._reject(t)}else{e.cancelPromise._cancel()}e.cancelPromise=null;return true}return false}function h(){return t.call(this,this.promise._target()._settledValue())}function f(e){if(d(this,e))return;u.e=e;return u}function t(e){var t=this.promise;var i=this.handler;if(!this.called){this.called=true;var n=this.type===0?i.call(t._boundValue()):i.call(t._boundValue(),e);if(n!==undefined){t._setReturnedNonUndefined();var r=s(n,t);if(r instanceof a){if(this.cancelPromise!=null){if(r.isCancelled()){var o=new l("late cancellation observer");t._attachExtraTrace(o);u.e=o;return u}else if(r.isPending()){r._attachCancellationCallback(new c(this))}}return r._then(h,f,undefined,this,undefined)}}}if(t.isRejected()){d(this);u.e=e;return u}else{d(this);return e}}a.prototype._passThrough=function(e,t,i,n){if(typeof e!=="function")return this.then();return this._then(i,n,undefined,new r(this,t,e),undefined)};a.prototype.lastly=a.prototype["finally"]=function(e){return this._passThrough(e,0,t,t)};a.prototype.tap=function(e){return this._passThrough(e,1,t)};return r}},{"./util":26}],"13":[function(o,e,t){"use strict";e.exports=function(c,d,h,f){var e=o("./util");var p=e.canEvaluate;var l=e.tryCatch;var u=e.errorObj;var g;if(!true){if(p){var t=function(e){return new Function("value","holder","                             \n            'use strict';                                                    \n            holder.pIndex = value;                                           \n            holder.checkFulfillment(this);                                   \n            ".replace(/Index/g,e))};var i=function(e){return new Function("promise","holder","                           \n            'use strict';                                                    \n            holder.pIndex = promise;                                         \n            ".replace(/Index/g,e))};var n=function(e){var t=new Array(e);for(var i=0;i<t.length;++i){t[i]="this.p"+(i+1)}var n=t.join(" = ")+" = null;";var r="var promise;\n"+t.map(function(e){return"                                                         \n                promise = "+e+";                                      \n                if (promise instanceof Promise) {                            \n                    promise.cancel();                                        \n                }                                                            \n            "}).join("\n");var o=t.join(", ");var a="Holder$"+e;var s="return function(tryCatch, errorObj, Promise) {           \n            'use strict';                                                    \n            function [TheName](fn) {                                         \n                [TheProperties]                                              \n                this.fn = fn;                                                \n                this.now = 0;                                                \n            }                                                                \n            [TheName].prototype.checkFulfillment = function(promise) {       \n                var now = ++this.now;                                        \n                if (now === [TheTotal]) {                                    \n                    promise._pushContext();                                  \n                    var callback = this.fn;                                  \n                    var ret = tryCatch(callback)([ThePassedArguments]);      \n                    promise._popContext();                                   \n                    if (ret === errorObj) {                                  \n                        promise._rejectCallback(ret.e, false);               \n                    } else {                                                 \n                        promise._resolveCallback(ret);                       \n                    }                                                        \n                }                                                            \n            };                                                               \n                                                                             \n            [TheName].prototype._resultCancelled = function() {              \n                [CancellationCode]                                           \n            };                                                               \n                                                                             \n            return [TheName];                                                \n        }(tryCatch, errorObj, Promise);                                      \n        ";s=s.replace(/\[TheName\]/g,a).replace(/\[TheTotal\]/g,e).replace(/\[ThePassedArguments\]/g,o).replace(/\[TheProperties\]/g,n).replace(/\[CancellationCode\]/g,r);return new Function("tryCatch","errorObj","Promise",s)(l,u,c)};var v=[];var m=[];var y=[];for(var r=0;r<8;++r){v.push(n(r+1));m.push(t(r+1));y.push(i(r+1))}g=function(e){this._reject(e)}}}c.join=function(){var e=arguments.length-1;var t;if(e>0&&typeof arguments[e]==="function"){t=arguments[e];if(!true){if(e<=8&&p){var i=new c(f);i._captureStackTrace();var n=v[e-1];var r=new n(t);var o=m;for(var a=0;a<e;++a){var s=h(arguments[a],i);if(s instanceof c){s=s._target();var l=s._bitField;if((l&50397184)===0){s._then(o[a],g,undefined,i,r);y[a](s,r)}else if((l&33554432)!==0){o[a].call(i,s._value(),r)}else if((l&16777216)!==0){i._reject(s._reason())}else{i._cancel()}}else{o[a].call(i,s,r)}}if(!i._isFateSealed()){i._setAsyncGuaranteed();i._setOnCancel(r)}return i}}}var u=[].slice.call(arguments);if(t)u.pop();var i=new d(u).promise();return t!==undefined?i.spread(t):i}}},{"./util":26}],"14":[function(t,e,i){"use strict";e.exports=function(a,s,e,l,u){var c=t("./util");var d=c.tryCatch;a.method=function(n){if(typeof n!=="function"){throw new a.TypeError("expecting a function but got "+c.classString(n))}return function(){var e=new a(s);e._captureStackTrace();e._pushContext();var t=d(n).apply(this,arguments);var i=e._popContext();u.checkForgottenReturns(t,i,"Promise.method",e);e._resolveFromSyncValue(t);return e}};a.attempt=a["try"]=function(e){if(typeof e!=="function"){return l("expecting a function but got "+c.classString(e))}var t=new a(s);t._captureStackTrace();t._pushContext();var i;if(arguments.length>1){u.deprecated("calling Promise.try with more than 1 argument");var n=arguments[1];var r=arguments[2];i=c.isArray(n)?d(e).apply(r,n):d(e).call(r,n)}else{i=d(e)()}var o=t._popContext();u.checkForgottenReturns(i,o,"Promise.try",t);t._resolveFromSyncValue(i);return t};a.prototype._resolveFromSyncValue=function(e){if(e===c.errorObj){this._rejectCallback(e.e,false)}else{this._resolveCallback(e,true)}}}},{"./util":26}],"15":[function(e,t,i){"use strict";var o=e("./util");var a=o.maybeWrapAsError;var n=e("./errors");var s=n.OperationalError;var l=e("./es5");function u(e){return e instanceof Error&&l.getPrototypeOf(e)===Error.prototype}var c=/^(?:name|message|stack|cause)$/;function d(e){var t;if(u(e)){t=new s(e);t.name=e.name;t.message=e.message;t.stack=e.stack;var i=l.keys(e);for(var n=0;n<i.length;++n){var r=i[n];if(!c.test(r)){t[r]=e[r]}}return t}o.markAsOriginatingFromRejection(e);return e}function r(r,o){return function(e,t){if(r===null)return;if(e){var i=d(a(e));r._attachExtraTrace(i);r._reject(i)}else if(!o){r._fulfill(t)}else{var n=[].slice.call(arguments,1);r._fulfill(n)}r=null}}t.exports=r},{"./errors":10,"./es5":11,"./util":26}],"16":[function(P,e,t){"use strict";e.exports=function(){var l=function(){return new h("circular promise resolution chain\n\n    See http://goo.gl/MqrFmX\n")};var s=function(){return new C.PromiseInspection(this._target())};var a=function(e){return C.reject(new h(e))};function u(){}var c={};var d=P("./util");var f;if(d.isNode){f=function(){var e=process.domain;if(e===undefined)e=null;return e}}else{f=function(){return null}}d.notEnumerableProp(C,"_getDomain",f);var e=P("./es5");var t=P("./async");var p=new t;e.defineProperty(C,"_async",{"value":p});var i=P("./errors");var h=C.TypeError=i.TypeError;C.RangeError=i.RangeError;var g=C.CancellationError=i.CancellationError;C.TimeoutError=i.TimeoutError;C.OperationalError=i.OperationalError;C.RejectionError=i.OperationalError;C.AggregateError=i.AggregateError;var v=function(){};var m={};var y={};var b=P("./thenables")(C,v);var _=P("./promise_array")(C,v,b,a,u);var n=P("./context")(C);var r=n.create;var w=P("./debuggability")(C,n);var o=w.CapturedTrace;var E=P("./finally")(C,b);var x=P("./catch_filter")(y);var T=P("./nodeback");var S=d.errorObj;var k=d.tryCatch;function R(e,t){if(typeof t!=="function"){throw new h("expecting a function but got "+d.classString(t))}if(e.constructor!==C){throw new h("the promise constructor cannot be invoked directly\n\n    See http://goo.gl/MqrFmX\n")}}function C(e){this._bitField=0;this._fulfillmentHandler0=undefined;this._rejectionHandler0=undefined;this._promise0=undefined;this._receiver0=undefined;if(e!==v){R(this,e);this._resolveFromExecutor(e)}this._promiseCreated()}C.prototype.toString=function(){return"[object Promise]"};C.prototype.caught=C.prototype["catch"]=function(e){var t=arguments.length;if(t>1){var i=new Array(t-1),n=0,r;for(r=0;r<t-1;++r){var o=arguments[r];if(d.isObject(o)){i[n++]=o}else{return a("expecting an object but got "+d.classString(o))}}i.length=n;e=arguments[r];return this.then(undefined,x(i,e,this))}return this.then(undefined,e)};C.prototype.reflect=function(){return this._then(s,s,undefined,this,undefined)};C.prototype.then=function(e,t){if(w.warnings()&&arguments.length>0&&typeof e!=="function"&&typeof t!=="function"){var i=".then() only accepts functions but was passed: "+d.classString(e);if(arguments.length>1){i+=", "+d.classString(t)}this._warn(i)}return this._then(e,t,undefined,undefined,undefined)};C.prototype.done=function(e,t){var i=this._then(e,t,undefined,undefined,undefined);i._setIsFinal()};C.prototype.spread=function(e){if(typeof e!=="function"){return a("expecting a function but got "+d.classString(e))}return this.all()._then(e,undefined,undefined,m,undefined)};C.prototype.toJSON=function(){var e={"isFulfilled":false,"isRejected":false,"fulfillmentValue":undefined,"rejectionReason":undefined};if(this.isFulfilled()){e.fulfillmentValue=this.value();e.isFulfilled=true}else if(this.isRejected()){e.rejectionReason=this.reason();e.isRejected=true}return e};C.prototype.all=function(){if(arguments.length>0){this._warn(".all() was passed arguments but it does not take any")}return new _(this).promise()};C.prototype.error=function(e){return this.caught(d.originatesFromRejection,e)};C.is=function(e){return e instanceof C};C.fromNode=C.fromCallback=function(e){var t=new C(v);t._captureStackTrace();var i=arguments.length>1?!!Object(arguments[1]).multiArgs:false;var n=k(e)(T(t,i));if(n===S){t._rejectCallback(n.e,true)}if(!t._isFateSealed())t._setAsyncGuaranteed();return t};C.all=function(e){return new _(e).promise()};C.cast=function(e){var t=b(e);if(!(t instanceof C)){t=new C(v);t._captureStackTrace();t._setFulfilled();t._rejectionHandler0=e}return t};C.resolve=C.fulfilled=C.cast;C.reject=C.rejected=function(e){var t=new C(v);t._captureStackTrace();t._rejectCallback(e,true);return t};C.setScheduler=function(e){if(typeof e!=="function"){throw new h("expecting a function but got "+d.classString(e))}var t=p._schedule;p._schedule=e;return t};C.prototype._then=function(e,t,i,n,r){var o=r!==undefined;var a=o?r:new C(v);var s=this._target();var l=s._bitField;if(!o){a._propagateFrom(this,3);a._captureStackTrace();if(n===undefined&&(this._bitField&2097152)!==0){if(!((l&50397184)===0)){n=this._boundValue()}else{n=s===this?undefined:this._boundTo}}}var u=f();if(!((l&50397184)===0)){var c,d,h=s._settlePromiseCtx;if((l&33554432)!==0){d=s._rejectionHandler0;c=e}else if((l&16777216)!==0){d=s._fulfillmentHandler0;c=t;s._unsetRejectionIsUnhandled()}else{h=s._settlePromiseLateCancellationObserver;d=new g("late cancellation observer");s._attachExtraTrace(d);c=t}p.invoke(h,s,{"handler":u===null?c:typeof c==="function"&&u.bind(c),"promise":a,"receiver":n,"value":d})}else{s._addCallbacks(e,t,a,n,u)}return a};C.prototype._length=function(){return this._bitField&65535};C.prototype._isFateSealed=function(){return(this._bitField&117506048)!==0};C.prototype._isFollowing=function(){return(this._bitField&67108864)===67108864};C.prototype._setLength=function(e){this._bitField=this._bitField&-65536|e&65535};C.prototype._setFulfilled=function(){this._bitField=this._bitField|33554432};C.prototype._setRejected=function(){this._bitField=this._bitField|16777216};C.prototype._setFollowing=function(){this._bitField=this._bitField|67108864};C.prototype._setIsFinal=function(){this._bitField=this._bitField|4194304};C.prototype._isFinal=function(){return(this._bitField&4194304)>0};C.prototype._unsetCancelled=function(){this._bitField=this._bitField&~65536};C.prototype._setCancelled=function(){this._bitField=this._bitField|65536};C.prototype._setAsyncGuaranteed=function(){this._bitField=this._bitField|134217728};C.prototype._receiverAt=function(e){var t=e===0?this._receiver0:this[e*4-4+3];if(t===c){return undefined}else if(t===undefined&&this._isBound()){return this._boundValue()}return t};C.prototype._promiseAt=function(e){return this[e*4-4+2]};C.prototype._fulfillmentHandlerAt=function(e){return this[e*4-4+0]};C.prototype._rejectionHandlerAt=function(e){return this[e*4-4+1]};C.prototype._boundValue=function(){};C.prototype._migrateCallback0=function(e){var t=e._bitField;var i=e._fulfillmentHandler0;var n=e._rejectionHandler0;var r=e._promise0;var o=e._receiverAt(0);if(o===undefined)o=c;this._addCallbacks(i,n,r,o,null)};C.prototype._migrateCallbackAt=function(e,t){var i=e._fulfillmentHandlerAt(t);var n=e._rejectionHandlerAt(t);var r=e._promiseAt(t);var o=e._receiverAt(t);if(o===undefined)o=c;this._addCallbacks(i,n,r,o,null)};C.prototype._addCallbacks=function(e,t,i,n,r){var o=this._length();if(o>=65535-4){o=0;this._setLength(0)}if(o===0){this._promise0=i;this._receiver0=n;if(typeof e==="function"){this._fulfillmentHandler0=r===null?e:r.bind(e)}if(typeof t==="function"){this._rejectionHandler0=r===null?t:r.bind(t)}}else{var a=o*4-4;this[a+2]=i;this[a+3]=n;if(typeof e==="function"){this[a+0]=r===null?e:r.bind(e)}if(typeof t==="function"){this[a+1]=r===null?t:r.bind(t)}}this._setLength(o+1);return o};C.prototype._proxy=function(e,t){this._addCallbacks(undefined,undefined,t,e,null)};C.prototype._resolveCallback=function(e,t){if((this._bitField&117506048)!==0)return;if(e===this)return this._rejectCallback(l(),false);var i=b(e,this);if(!(i instanceof C))return this._fulfill(e);if(t)this._propagateFrom(i,2);var n=i._target();var r=n._bitField;if((r&50397184)===0){var o=this._length();if(o>0)n._migrateCallback0(this);for(var a=1;a<o;++a){n._migrateCallbackAt(this,a)}this._setFollowing();this._setLength(0);this._setFollowee(n)}else if((r&33554432)!==0){this._fulfill(n._value())}else if((r&16777216)!==0){this._reject(n._reason())}else{var s=new g("late cancellation observer");n._attachExtraTrace(s);this._reject(s)}};C.prototype._rejectCallback=function(e,t,i){var n=d.ensureErrorObject(e);var r=n===e;if(!r&&!i&&w.warnings()){var o="a promise was rejected with a non-error: "+d.classString(e);this._warn(o,true)}this._attachExtraTrace(n,t?r:false);this._reject(e)};C.prototype._resolveFromExecutor=function(e){var t=this;this._captureStackTrace();this._pushContext();var i=true;var n=this._execute(e,function(e){t._resolveCallback(e)},function(e){t._rejectCallback(e,i)});i=false;this._popContext();if(n!==undefined){t._rejectCallback(n,true)}};C.prototype._settlePromiseFromHandler=function(e,t,i,n){var r=n._bitField;if((r&65536)!==0)return;n._pushContext();var o;if(t===m){if(!i||typeof i.length!=="number"){o=S;o.e=new h("cannot .spread() a non-array: "+d.classString(i))}else{o=k(e).apply(this._boundValue(),i)}}else{o=k(e).call(t,i)}var a=n._popContext();r=n._bitField;if((r&65536)!==0)return;if(o===y){n._reject(i)}else if(o===S||o===n){var s=o===n?l():o.e;n._rejectCallback(s,false)}else{w.checkForgottenReturns(o,a,"",n,this);n._resolveCallback(o)}};C.prototype._target=function(){var e=this;while(e._isFollowing())e=e._followee();return e};C.prototype._followee=function(){return this._rejectionHandler0};C.prototype._setFollowee=function(e){this._rejectionHandler0=e};C.prototype._settlePromise=function(e,t,i,n){var r=e instanceof C;var o=this._bitField;var a=(o&134217728)!==0;if((o&65536)!==0){if(r)e._invokeInternalOnCancel();if(i instanceof E){i.cancelPromise=e;if(k(t).call(i,n)===S){e._reject(S.e)}}else if(t===s){e._fulfill(s.call(i))}else if(i instanceof u){i._promiseCancelled(e)}else if(r||e instanceof _){e._cancel()}else{i.cancel()}}else if(typeof t==="function"){if(!r){t.call(i,n,e)}else{if(a)e._setAsyncGuaranteed();this._settlePromiseFromHandler(t,i,n,e)}}else if(i instanceof u){if(!i._isResolved()){if((o&33554432)!==0){i._promiseFulfilled(n,e)}else{i._promiseRejected(n,e)}}}else if(r){if(a)e._setAsyncGuaranteed();if((o&33554432)!==0){e._fulfill(n)}else{e._reject(n)}}};C.prototype._settlePromiseLateCancellationObserver=function(e){var t=e.handler;var i=e.promise;var n=e.receiver;var r=e.value;if(typeof t==="function"){if(!(i instanceof C)){t.call(n,r,i)}else{this._settlePromiseFromHandler(t,n,r,i)}}else if(i instanceof C){i._reject(r)}};C.prototype._settlePromiseCtx=function(e){this._settlePromise(e.promise,e.handler,e.receiver,e.value)};C.prototype._settlePromise0=function(e,t,i){var n=this._promise0;var r=this._receiverAt(0);this._promise0=undefined;this._receiver0=undefined;this._settlePromise(n,e,r,t)};C.prototype._clearCallbackDataAtIndex=function(e){var t=e*4-4;this[t+2]=this[t+3]=this[t+0]=this[t+1]=undefined};C.prototype._fulfill=function(e){var t=this._bitField;if((t&117506048)>>>16)return;if(e===this){var i=l();this._attachExtraTrace(i);return this._reject(i)}this._setFulfilled();this._rejectionHandler0=e;if((t&65535)>0){if((t&134217728)!==0){this._settlePromises()}else{p.settlePromises(this)}}};C.prototype._reject=function(e){var t=this._bitField;if((t&117506048)>>>16)return;this._setRejected();this._fulfillmentHandler0=e;if(this._isFinal()){return p.fatalError(e,d.isNode)}if((t&65535)>0){if((t&134217728)!==0){this._settlePromises()}else{p.settlePromises(this)}}else{this._ensurePossibleRejectionHandled()}};C.prototype._fulfillPromises=function(e,t){for(var i=1;i<e;i++){var n=this._fulfillmentHandlerAt(i);var r=this._promiseAt(i);var o=this._receiverAt(i);this._clearCallbackDataAtIndex(i);this._settlePromise(r,n,o,t)}};C.prototype._rejectPromises=function(e,t){for(var i=1;i<e;i++){var n=this._rejectionHandlerAt(i);var r=this._promiseAt(i);var o=this._receiverAt(i);this._clearCallbackDataAtIndex(i);this._settlePromise(r,n,o,t)}};C.prototype._settlePromises=function(){var e=this._bitField;var t=e&65535;if(t>0){if((e&16842752)!==0){var i=this._fulfillmentHandler0;this._settlePromise0(this._rejectionHandler0,i,e);this._rejectPromises(t,i)}else{var n=this._rejectionHandler0;this._settlePromise0(this._fulfillmentHandler0,n,e);this._fulfillPromises(t,n)}this._setLength(0)}this._clearCancellationData()};C.prototype._settledValue=function(){var e=this._bitField;if((e&33554432)!==0){return this._rejectionHandler0}else if((e&16777216)!==0){return this._fulfillmentHandler0}};function A(e){this.promise._resolveCallback(e)}function O(e){this.promise._rejectCallback(e,false)}C.defer=C.pending=function(){w.deprecated("Promise.defer","new Promise");var e=new C(v);return{"promise":e,"resolve":A,"reject":O}};d.notEnumerableProp(C,"_makeSelfResolutionError",l);P("./method")(C,v,b,a,w);P("./bind")(C,v,b,w);P("./cancel")(C,_,a,w);P("./direct_resolve")(C);P("./synchronous_inspection")(C);P("./join")(C,_,b,v,w);C.Promise=C;P("./timers.js")(C,v,w);P("./props.js")(C,_,b,a);P("./race.js")(C,v,b,a);P("./reduce.js")(C,_,a,b,v,w);P("./each.js")(C,v);d.toFastProperties(C);d.toFastProperties(C.prototype);function L(e){var t=new C(v);t._fulfillmentHandler0=e;t._rejectionHandler0=e;t._promise0=e;t._receiver0=e}L({"a":1});L({"b":2});L({"c":3});L(1);L(function(){});L(undefined);L(false);L(new C(v));w.setBounds(t.firstLineError,d.lastLineError);return C}},{"./async":1,"./bind":2,"./cancel":4,"./catch_filter":5,"./context":6,"./debuggability":7,"./direct_resolve":8,"./each.js":9,"./errors":10,"./es5":11,"./finally":12,"./join":13,"./method":14,"./nodeback":15,"./promise_array":17,"./props.js":18,"./race.js":20,"./reduce.js":21,"./synchronous_inspection":23,"./thenables":24,"./timers.js":25,"./util":26}],"17":[function(r,e,t){"use strict";e.exports=function(s,i,l,a,e){var u=r("./util");var t=u.isArray;function c(e){switch(e){case-2:return[];case-3:return{}}}function n(e){var t=this._promise=new s(i);if(e instanceof s){t._propagateFrom(e,3)}t._setOnCancel(this);this._values=e;this._length=0;this._totalResolved=0;this._init(undefined,-2)}u.inherits(n,e);n.prototype.length=function(){return this._length};n.prototype.promise=function(){return this._promise};n.prototype._init=function e(t,i){var n=l(this._values,this._promise);if(n instanceof s){n=n._target();var r=n._bitField;this._values=n;if((r&50397184)===0){this._promise._setAsyncGuaranteed();return n._then(e,this._reject,undefined,this,i)}else if((r&33554432)!==0){n=n._value()}else if((r&16777216)!==0){return this._reject(n._reason())}else{return this._cancel()}}n=u.asArray(n);if(n===null){var o=a("expecting an array or an iterable object but got "+u.classString(n)).reason();this._promise._rejectCallback(o,false);return}if(n.length===0){if(i===-5){this._resolveEmptyArray()}else{this._resolve(c(i))}return}this._iterate(n)};n.prototype._iterate=function(e){var t=this.getActualLength(e.length);this._length=t;this._values=this.shouldCopyValues()?new Array(t):this._values;var i=this._promise;var n=false;var r=null;for(var o=0;o<t;++o){var a=l(e[o],i);if(a instanceof s){a=a._target();r=a._bitField}else{r=null}if(n){if(r!==null){a.suppressUnhandledRejections()}}else if(r!==null){if((r&50397184)===0){a._proxy(this,o);this._values[o]=a}else if((r&33554432)!==0){n=this._promiseFulfilled(a._value(),o)}else if((r&16777216)!==0){n=this._promiseRejected(a._reason(),o)}else{n=this._promiseCancelled(o)}}else{n=this._promiseFulfilled(a,o)}}if(!n)i._setAsyncGuaranteed()};n.prototype._isResolved=function(){return this._values===null};n.prototype._resolve=function(e){this._values=null;this._promise._fulfill(e)};n.prototype._cancel=function(){if(this._isResolved()||!this._promise.isCancellable())return;this._values=null;this._promise._cancel()};n.prototype._reject=function(e){this._values=null;this._promise._rejectCallback(e,false)};n.prototype._promiseFulfilled=function(e,t){this._values[t]=e;var i=++this._totalResolved;if(i>=this._length){this._resolve(this._values);return true}return false};n.prototype._promiseCancelled=function(){this._cancel();return true};n.prototype._promiseRejected=function(e){this._totalResolved++;this._reject(e);return true};n.prototype._resultCancelled=function(){if(this._isResolved())return;var e=this._values;this._cancel();if(e instanceof s){e.cancel()}else{for(var t=0;t<e.length;++t){if(e[t]instanceof s){e[t].cancel()}}}};n.prototype.shouldCopyValues=function(){return true};n.prototype.getActualLength=function(e){return e};return n}},{"./util":26}],"18":[function(h,e,t){"use strict";e.exports=function(n,e,r,o){var t=h("./util");var a=t.isObject;var s=h("./es5");var l;if(typeof Map==="function")l=Map;var u=function(){var n=0;var r=0;function o(e,t){this[n]=e;this[n+r]=t;n++}return function e(t){r=t.size;n=0;var i=new Array(t.size*2);t.forEach(o,i);return i}}();var c=function(e){var t=new l;var i=e.length/2|0;for(var n=0;n<i;++n){var r=e[i+n];var o=e[n];t.set(r,o)}return t};function d(e){var t=false;var i;if(l!==undefined&&e instanceof l){i=u(e);t=true}else{var n=s.keys(e);var r=n.length;i=new Array(r*2);for(var o=0;o<r;++o){var a=n[o];i[o]=e[a];i[o+r]=a}}this.constructor$(i);this._isMap=t;this._init$(undefined,-3)}t.inherits(d,e);d.prototype._init=function(){};d.prototype._promiseFulfilled=function(e,t){this._values[t]=e;var i=++this._totalResolved;if(i>=this._length){var n;if(this._isMap){n=c(this._values)}else{n={};var r=this.length();for(var o=0,a=this.length();o<a;++o){n[this._values[o+r]]=this._values[o]}}this._resolve(n);return true}return false};d.prototype.shouldCopyValues=function(){return false};d.prototype.getActualLength=function(e){return e>>1};function i(e){var t;var i=r(e);if(!a(i)){return o("cannot await properties of a non-object\n\n    See http://goo.gl/MqrFmX\n")}else if(i instanceof n){t=i._then(n.props,undefined,undefined,undefined,undefined)}else{t=new d(i).promise()}if(i instanceof n){t._propagateFrom(i,2)}return t}n.prototype.props=function(){return i(this)};n.props=function(e){return i(e)}}},{"./es5":11,"./util":26}],"19":[function(e,t,i){"use strict";function o(e,t,i,n,r){for(var o=0;o<r;++o){i[o+n]=e[o+t];e[o+t]=void 0}}function n(e){this._capacity=e;this._length=0;this._front=0}n.prototype._willBeOverCapacity=function(e){return this._capacity<e};n.prototype._pushOne=function(e){var t=this.length();this._checkCapacity(t+1);var i=this._front+t&this._capacity-1;this[i]=e;this._length=t+1};n.prototype._unshiftOne=function(e){var t=this._capacity;this._checkCapacity(this.length()+1);var i=this._front;var n=(i-1&t-1^t)-t;this[n]=e;this._front=n;this._length=this.length()+1};n.prototype.unshift=function(e,t,i){this._unshiftOne(i);this._unshiftOne(t);this._unshiftOne(e)};n.prototype.push=function(e,t,i){var n=this.length()+3;if(this._willBeOverCapacity(n)){this._pushOne(e);this._pushOne(t);this._pushOne(i);return}var r=this._front+n-3;this._checkCapacity(n);var o=this._capacity-1;this[r+0&o]=e;this[r+1&o]=t;this[r+2&o]=i;this._length=n};n.prototype.shift=function(){var e=this._front,t=this[e];this[e]=undefined;this._front=e+1&this._capacity-1;this._length--;return t};n.prototype.length=function(){return this._length};n.prototype._checkCapacity=function(e){if(this._capacity<e){this._resizeTo(this._capacity<<1)}};n.prototype._resizeTo=function(e){var t=this._capacity;this._capacity=e;var i=this._front;var n=this._length;var r=i+n&t-1;o(this,0,this,t,r)};t.exports=n},{}],"20":[function(e,t,i){"use strict";t.exports=function(u,c,d,h){var f=e("./util");var p=function(t){return t.then(function(e){return i(e,t)})};function i(e,t){var i=d(e);if(i instanceof u){return p(i)}else{e=f.asArray(e);if(e===null)return h("expecting an array or an iterable object but got "+f.classString(e))}var n=new u(c);if(t!==undefined){n._propagateFrom(t,3)}var r=n._fulfill;var o=n._reject;for(var a=0,s=e.length;a<s;++a){var l=e[a];if(l===undefined&&!(a in e)){continue}u.cast(l)._then(r,o,undefined,n,null)}return n}u.race=function(e){return i(e,undefined)};u.prototype.race=function(){return i(this,undefined)}}},{"./util":26}],"21":[function(t,e,i){"use strict";e.exports=function(a,e,o,i,s,l){var u=a._getDomain;var c=t("./util");var d=c.tryCatch;function h(e,t,i,n){this.constructor$(e);var r=u();this._fn=r===null?t:r.bind(t);if(i!==undefined){i=a.resolve(i);i._attachCancellationCallback(this)}this._initialValue=i;this._currentCancellable=null;this._eachValues=n===s?[]:undefined;this._promise._captureStackTrace();this._init$(undefined,-5)}c.inherits(h,e);h.prototype._gotAccum=function(e){if(this._eachValues!==undefined&&e!==s){this._eachValues.push(e)}};h.prototype._eachComplete=function(e){this._eachValues.push(e);return this._eachValues};h.prototype._init=function(){};h.prototype._resolveEmptyArray=function(){this._resolve(this._eachValues!==undefined?this._eachValues:this._initialValue)};h.prototype.shouldCopyValues=function(){return false};h.prototype._resolve=function(e){this._promise._resolveCallback(e);this._values=null};h.prototype._resultCancelled=function(e){if(e===this._initialValue)return this._cancel();if(this._isResolved())return;this._resultCancelled$();if(this._currentCancellable instanceof a){this._currentCancellable.cancel()}if(this._initialValue instanceof a){this._initialValue.cancel()}};h.prototype._iterate=function(e){this._values=e;var t;var i;var n=e.length;if(this._initialValue!==undefined){t=this._initialValue;i=0}else{t=a.resolve(e[0]);i=1}this._currentCancellable=t;if(!t.isRejected()){for(;i<n;++i){var r={"accum":null,"value":e[i],"index":i,"length":n,"array":this};t=t._then(p,undefined,undefined,r,undefined)}}if(this._eachValues!==undefined){t=t._then(this._eachComplete,undefined,undefined,this,undefined)}t._then(f,f,undefined,t,this)};a.prototype.reduce=function(e,t){return r(this,e,t,null)};a.reduce=function(e,t,i,n){return r(e,t,i,n)};function f(e,t){if(this.isFulfilled()){t._resolve(e)}else{t._reject(e)}}function r(e,t,i,n){if(typeof t!=="function"){return o("expecting a function but got "+c.classString(t))}var r=new h(e,t,i,n);return r.promise()}function p(e){this.accum=e;this.array._gotAccum(e);var t=i(this.value,this.array._promise);if(t instanceof a){this.array._currentCancellable=t;return t._then(n,undefined,undefined,this,undefined)}else{return n.call(this,t)}}function n(e){var t=this.array;var i=t._promise;var n=d(t._fn);i._pushContext();var r;if(t._eachValues!==undefined){r=n.call(i._boundValue(),e,this.index,this.length)}else{r=n.call(i._boundValue(),this.accum,e,this.index,this.length)}if(r instanceof a){t._currentCancellable=r}var o=i._popContext();l.checkForgottenReturns(r,o,t._eachValues!==undefined?"Promise.each":"Promise.reduce",i);return r}}},{"./util":26}],"22":[function(e,t,i){"use strict";var n=e("./util");var r;var o=function(){throw new Error("No async scheduler available\n\n    See http://goo.gl/MqrFmX\n")};if(n.isNode&&typeof MutationObserver==="undefined"){var a=global.setImmediate;var s=process.nextTick;r=n.isRecentNode?function(e){a.call(global,e)}:function(e){s.call(process,e)}}else if(typeof MutationObserver!=="undefined"&&!(typeof window!=="undefined"&&window.navigator&&window.navigator.standalone)){r=function(){var n=document.createElement("div");var r={"attributes":true};var e=false;var t=document.createElement("div");var i=new MutationObserver(function(){n.classList.toggle("foo");e=false});i.observe(t,r);var o=function(){if(e)return;e=true;t.classList.toggle("foo")};return function e(t){var i=new MutationObserver(function(){i.disconnect();t()});i.observe(n,r);o()}}()}else if(typeof setImmediate!=="undefined"){r=function(e){setImmediate(e)}}else if(typeof setTimeout!=="undefined"){r=function(e){setTimeout(e,0)}}else{r=o}t.exports=r},{"./util":26}],"23":[function(e,t,i){"use strict";t.exports=function(e){function t(e){if(e!==undefined){e=e._target();this._bitField=e._bitField;this._settledValueField=e._isFateSealed()?e._settledValue():undefined}else{this._bitField=0;this._settledValueField=undefined}}t.prototype._settledValue=function(){return this._settledValueField};var i=t.prototype.value=function(){if(!this.isFulfilled()){throw new TypeError("cannot get fulfillment value of a non-fulfilled promise\n\n    See http://goo.gl/MqrFmX\n")}return this._settledValue()};var n=t.prototype.error=t.prototype.reason=function(){if(!this.isRejected()){throw new TypeError("cannot get rejection reason of a non-rejected promise\n\n    See http://goo.gl/MqrFmX\n")}return this._settledValue()};var r=t.prototype.isFulfilled=function(){return(this._bitField&33554432)!==0};var o=t.prototype.isRejected=function(){return(this._bitField&16777216)!==0};var a=t.prototype.isPending=function(){return(this._bitField&50397184)===0};var s=t.prototype.isResolved=function(){return(this._bitField&50331648)!==0};t.prototype.isCancelled=e.prototype._isCancelled=function(){return(this._bitField&65536)===65536};e.prototype.isCancelled=function(){return this._target()._isCancelled()};e.prototype.isPending=function(){return a.call(this._target())};e.prototype.isRejected=function(){return o.call(this._target())};e.prototype.isFulfilled=function(){return r.call(this._target())};e.prototype.isResolved=function(){return s.call(this._target())};e.prototype.value=function(){return i.call(this._target())};e.prototype.reason=function(){var e=this._target();e._unsetRejectionIsUnhandled();return n.call(e)};e.prototype._value=function(){return this._settledValue()};e.prototype._reason=function(){this._unsetRejectionIsUnhandled();return this._settledValue()};e.PromiseInspection=t}},{}],"24":[function(n,e,t){"use strict";e.exports=function(u,c){var d=n("./util");var h=d.errorObj;var r=d.isObject;function e(e,t){if(r(e)){if(e instanceof u)return e;var i=o(e);if(i===h){if(t)t._pushContext();var n=u.reject(i.e);if(t)t._popContext();return n}else if(typeof i==="function"){if(a(e)){var n=new u(c);e._then(n._fulfill,n._reject,undefined,n,null);return n}return s(e,i,t)}}return e}function t(e){return e.then}function o(e){try{return t(e)}catch(e){h.e=e;return h}}var i={}.hasOwnProperty;function a(e){return i.call(e,"_promise0")}function s(e,t,i){var n=new u(c);var r=n;if(i)i._pushContext();n._captureStackTrace();if(i)i._popContext();var o=true;var a=d.tryCatch(t).call(e,s,l);o=false;if(n&&a===h){n._rejectCallback(a.e,true,true);n=null}function s(e){if(!n)return;n._resolveCallback(e);n=null}function l(e){if(!n)return;n._rejectCallback(e,o,true);n=null}return r}return e}},{"./util":26}],"25":[function(e,t,i){"use strict";t.exports=function(n,r,o){var a=e("./util");var s=n.TimeoutError;var l=function(e,t,i){if(!e.isPending())return;var n;if(typeof t!=="string"){if(t instanceof Error){n=t}else{n=new s("operation timed out")}}else{n=new s(t)}a.markAsOriginatingFromRejection(n);e._attachExtraTrace(n);e._reject(n);if(o.cancellation()){i.cancel()}};var u=function(e){return t(+this).thenReturn(e)};var t=n.delay=function(e,t){var i;if(t!==undefined){i=n.resolve(t)._then(u,null,null,e,undefined)}else{i=new n(r);setTimeout(function(){i._fulfill()},+e)}i._setAsyncGuaranteed();return i};n.prototype.delay=function(e){return t(e,this)};function c(e){var t=this;if(t instanceof Number)t=+t;clearTimeout(t);return e}function d(e){var t=this;if(t instanceof Number)t=+t;clearTimeout(t);throw e}n.prototype.timeout=function(e,t){e=+e;var i=this.then();var n=i.then();var r=setTimeout(function e(){l(n,t,i)},e);if(o.cancellation()){n._setOnCancel({"_resultCancelled":function(){clearTimeout(r)}})}return n._then(c,d,undefined,r,undefined)}}},{"./util":26}],"26":[function(_dereq_,module,exports){"use strict";var es5=_dereq_("./es5");var canEvaluate=typeof navigator=="undefined";var errorObj={"e":{}};var tryCatchTarget;function tryCatcher(){try{var e=tryCatchTarget;tryCatchTarget=null;return e.apply(this,arguments)}catch(e){errorObj.e=e;return errorObj}}function tryCatch(e){tryCatchTarget=e;return tryCatcher}var inherits=function(t,i){var n={}.hasOwnProperty;function e(){this.constructor=t;this.constructor$=i;for(var e in i.prototype){if(n.call(i.prototype,e)&&e.charAt(e.length-1)!=="$"){this[e+"$"]=i.prototype[e]}}}e.prototype=i.prototype;t.prototype=new e;return t.prototype};function isPrimitive(e){return e==null||e===true||e===false||typeof e==="string"||typeof e==="number"}function isObject(e){return typeof e==="function"||typeof e==="object"&&e!==null}function maybeWrapAsError(e){if(!isPrimitive(e))return e;return new Error(safeToString(e))}function withAppended(e,t){var i=e.length;var n=new Array(i+1);var r;for(r=0;r<i;++r){n[r]=e[r]}n[r]=t;return n}function getDataPropertyOrDefault(e,t,i){if(es5.isES5){var n=Object.getOwnPropertyDescriptor(e,t);if(n!=null){return n.get==null&&n.set==null?n.value:i}}else{return{}.hasOwnProperty.call(e,t)?e[t]:undefined}}function notEnumerableProp(e,t,i){if(isPrimitive(e))return e;var n={"value":i,"configurable":true,"enumerable":false,"writable":true};es5.defineProperty(e,t,n);return e}function thrower(e){throw e}var inheritedDataKeys=function(){var r=[Array.prototype,Object.prototype,Function.prototype];var s=function(e){for(var t=0;t<r.length;++t){if(r[t]===e){return true}}return false};if(es5.isES5){var l=Object.getOwnPropertyNames;return function(e){var t=[];var i=Object.create(null);while(e!=null&&!s(e)){var n;try{n=l(e)}catch(e){return t}for(var r=0;r<n.length;++r){var o=n[r];if(i[o])continue;i[o]=true;var a=Object.getOwnPropertyDescriptor(e,o);if(a!=null&&a.get==null&&a.set==null){t.push(o)}}e=es5.getPrototypeOf(e)}return t}}else{var o={}.hasOwnProperty;return function(e){if(s(e))return[];var t=[];e:for(var i in e){if(o.call(e,i)){t.push(i)}else{for(var n=0;n<r.length;++n){if(o.call(r[n],i)){continue e}}t.push(i)}}return t}}}();var thisAssignmentPattern=/this\s*\.\s*\S+\s*=/;function isClass(e){try{if(typeof e==="function"){var t=es5.names(e.prototype);var i=es5.isES5&&t.length>1;var n=t.length>0&&!(t.length===1&&t[0]==="constructor");var r=thisAssignmentPattern.test(e+"")&&es5.names(e).length>0;if(i||n||r){return true}}return false}catch(e){return false}}function toFastProperties(obj){function FakeConstructor(){}FakeConstructor.prototype=obj;var l=8;while(l--)new FakeConstructor;return obj;eval(obj)}var rident=/^[a-z$_][a-z$_0-9]*$/i;function isIdentifier(e){return rident.test(e)}function filledRange(e,t,i){var n=new Array(e);for(var r=0;r<e;++r){n[r]=t+r+i}return n}function safeToString(e){try{return e+""}catch(e){return"[no string representation]"}}function markAsOriginatingFromRejection(e){try{notEnumerableProp(e,"isOperational",true)}catch(e){}}function originatesFromRejection(e){if(e==null)return false;return e instanceof Error["__BluebirdErrorTypes__"].OperationalError||e["isOperational"]===true}function canAttachTrace(e){return e instanceof Error&&es5.propertyIsWritable(e,"stack")}var ensureErrorObject=function(){if(!("stack"in new Error)){return function(e){if(canAttachTrace(e))return e;try{throw new Error(safeToString(e))}catch(e){return e}}}else{return function(e){if(canAttachTrace(e))return e;return new Error(safeToString(e))}}}();function classString(e){return{}.toString.call(e)}function copyDescriptors(e,t,i){var n=es5.names(e);for(var r=0;r<n.length;++r){var o=n[r];if(i(o)){try{es5.defineProperty(t,o,es5.getDescriptor(e,o))}catch(e){}}}}var asArray=function(e){if(es5.isArray(e)){return e}return null};if(typeof Symbol!=="undefined"&&Symbol.iterator){var ArrayFrom=typeof Array.from==="function"?function(e){return Array.from(e)}:function(e){var t=[];var i=e[Symbol.iterator]();var n;while(!(n=i.next()).done){t.push(n.value)}return t};asArray=function(e){if(es5.isArray(e)){return e}else if(e!=null&&typeof e[Symbol.iterator]==="function"){return ArrayFrom(e)}return null}}var isNode=typeof process!=="undefined"&&classString(process).toLowerCase()==="[object process]";function env(e,t){return isNode?process.env[e]:t}var ret={"isClass":isClass,"isIdentifier":isIdentifier,"inheritedDataKeys":inheritedDataKeys,"getDataPropertyOrDefault":getDataPropertyOrDefault,"thrower":thrower,"isArray":es5.isArray,"asArray":asArray,"notEnumerableProp":notEnumerableProp,"isPrimitive":isPrimitive,"isObject":isObject,"canEvaluate":canEvaluate,"errorObj":errorObj,"tryCatch":tryCatch,"inherits":inherits,"withAppended":withAppended,"maybeWrapAsError":maybeWrapAsError,"toFastProperties":toFastProperties,"filledRange":filledRange,"toString":safeToString,"canAttachTrace":canAttachTrace,"ensureErrorObject":ensureErrorObject,"originatesFromRejection":originatesFromRejection,"markAsOriginatingFromRejection":markAsOriginatingFromRejection,"classString":classString,"copyDescriptors":copyDescriptors,"hasDevTools":typeof chrome!=="undefined"&&chrome&&typeof chrome.loadTimes==="function","isNode":isNode,"env":env};ret.isRecentNode=ret.isNode&&function(){var e=process.versions.node.split(".").map(Number);return e[0]===0&&e[1]>10||e[0]>0}();if(ret.isNode)ret.toFastProperties(process);try{throw new Error}catch(e){ret.lastLineError=e}module.exports=ret},{"./es5":11}]},{},[3])(3)});if(typeof window!=="undefined"&&window!==null){window.P=window.Promise}else if(typeof self!=="undefined"&&self!==null){self.P=self.Promise}Promise.config({"cancellation":true});(function(e,s,d,h){var l=[];var t={"_version":"3.12.0","_config":{"classPrefix":"","enableClasses":true,"enableJSClass":true,"usePrefixes":true},"_q":[],"on":function(e,t){var i=this;setTimeout(function(){t(i[e])},0)},"addTest":function(e,t,i){l.push({"name":e,"fn":t,"options":i})},"addAsyncTest":function(e){l.push({"name":null,"fn":e})}};var u=function(){};u.prototype=t;u=new u;var c=[];function f(e,t){return typeof e===t}function i(){var e;var t;var i;var n;var r;var o;var a;for(var s in l){if(l.hasOwnProperty(s)){e=[];t=l[s];if(t.name){e.push(t.name.toLowerCase());if(t.options&&t.options.aliases&&t.options.aliases.length){for(i=0;i<t.options.aliases.length;i++){e.push(t.options.aliases[i].toLowerCase())}}}n=f(t.fn,"function")?t.fn():t.fn;for(r=0;r<e.length;r++){o=e[r];a=o.split(".");if(a.length===1){u[a[0]]=n}else{if(!u[a[0]]||u[a[0]]&&!(u[a[0]]instanceof Boolean)){u[a[0]]=new Boolean(u[a[0]])}u[a[0]][a[1]]=n}c.push((n?"":"no-")+a.join("-"))}}}}var p=d.documentElement;var r=p.nodeName.toLowerCase()==="svg";function o(e){var t=p.className;var i=u._config.classPrefix||"";if(r){t=t.baseVal}if(u._config.enableJSClass){var n=new RegExp("(^|\\s)"+i+"no-js(\\s|$)");t=t.replace(n,"$1"+i+"js$2")}if(u._config.enableClasses){if(e.length>0){t+=" "+i+e.join(" "+i)}if(r){p.className.baseVal=t}else{p.className=t}}}var a;(function(){var i={}.hasOwnProperty;if(!f(i,"undefined")&&!f(i.call,"undefined")){a=function(e,t){return i.call(e,t)}}else{a=function(e,t){return t in e&&f(e.constructor.prototype[t],"undefined")}}})();t._l={};t.on=function(e,t){if(!this._l[e]){this._l[e]=[]}this._l[e].push(t);if(u.hasOwnProperty(e)){setTimeout(function(){u._trigger(e,u[e])},0)}};t._trigger=function(e,i){if(!this._l[e]){return}var n=this._l[e];setTimeout(function(){var e,t;for(e=0;e<n.length;e++){t=n[e];t(i)}},0);delete this._l[e]};function g(e,t){if(typeof e==="object"){for(var i in e){if(a(e,i)){g(i,e[i])}}}else{e=e.toLowerCase();var n=e.split(".");var r=u[n[0]];if(n.length===2){r=r[n[1]]}if(typeof r!=="undefined"){return u}t=typeof t==="function"?t():t;if(n.length===1){u[n[0]]=t}else{if(u[n[0]]&&!(u[n[0]]instanceof Boolean)){u[n[0]]=new Boolean(u[n[0]])}u[n[0]][n[1]]=t}o([(!!t&&t!==false?"":"no-")+n.join("-")]);u._trigger(e,t)}return u}u._q.push(function(){t.addTest=g});var B;if(!r){(function(t,a){var e="3.7.3";var i=t.html5||{};var r=/^<|^(?:button|map|select|textarea|object|iframe|option|optgroup)$/i;var o=/^(?:a|b|code|div|fieldset|h1|h2|h3|h4|h5|h6|i|label|li|ol|p|q|span|strong|style|table|tbody|td|th|tr|ul)$/i;var n;var s="_html5shiv";var l=0;var u={};var c;(function(){try{var e=a.createElement("a");e.innerHTML="<xyz></xyz>";n="hidden"in e;c=e.childNodes.length==1||function(){a.createElement("a");var e=a.createDocumentFragment();return typeof e.cloneNode=="undefined"||typeof e.createDocumentFragment=="undefined"||typeof e.createElement=="undefined"}()}catch(e){n=true;c=true}})();function d(e,t){var i=e.createElement("p"),n=e.getElementsByTagName("head")[0]||e.documentElement;i.innerHTML="x<style>"+t+"</style>";return n.insertBefore(i.lastChild,n.firstChild)}function h(){var e=b.elements;return typeof e=="string"?e.split(" "):e}function f(e,t){var i=b.elements;if(typeof i!="string"){i=i.join(" ")}if(typeof e!="string"){e=e.join(" ")}b.elements=i+" "+e;y(t)}function p(e){var t=u[e[s]];if(!t){t={};l++;e[s]=l;u[l]=t}return t}function g(e,t,i){if(!t){t=a}if(c){return t.createElement(e)}if(!i){i=p(t)}var n;if(i.cache[e]){n=i.cache[e].cloneNode()}else if(o.test(e)){n=(i.cache[e]=i.createElem(e)).cloneNode()}else{n=i.createElem(e)}return n.canHaveChildren&&!r.test(e)&&!n.tagUrn?i.frag.appendChild(n):n}function v(e,t){if(!e){e=a}if(c){return e.createDocumentFragment()}t=t||p(e);var i=t.frag.cloneNode(),n=0,r=h(),o=r.length;for(;n<o;n++){i.createElement(r[n])}return i}function m(t,i){if(!i.cache){i.cache={};i.createElem=t.createElement;i.createFrag=t.createDocumentFragment;i.frag=i.createFrag()}t.createElement=function(e){if(!b.shivMethods){return i.createElem(e)}return g(e,t,i)};t.createDocumentFragment=Function("h,f","return function(){"+"var n=f.cloneNode(),c=n.createElement;"+"h.shivMethods&&("+h().join().replace(/[\w\-:]+/g,function(e){i.createElem(e);i.frag.createElement(e);return'c("'+e+'")'})+");return n}")(b,i.frag)}function y(e){if(!e){e=a}var t=p(e);if(b.shivCSS&&!n&&!t.hasCSS){t.hasCSS=!!d(e,"article,aside,dialog,figcaption,figure,footer,header,hgroup,main,nav,section{display:block}"+"mark{background:#FF0;color:#000}"+"template{display:none}")}if(!c){m(e,t)}return e}var b={"elements":i.elements||"abbr article aside audio bdi canvas data datalist details dialog figcaption figure footer header hgroup main mark meter nav output picture progress section summary template time video","version":e,"shivCSS":i.shivCSS!==false,"supportsUnknownElements":c,"shivMethods":i.shivMethods!==false,"type":"default","shivDocument":y,"createElement":g,"createDocumentFragment":v,"addElements":f};t.html5=b;y(a);var _=/^$|\b(?:all|print)\b/;var w="html5shiv";var E=!c&&function(){var e=a.documentElement;return!(typeof a.namespaces=="undefined"||typeof a.parentWindow=="undefined"||typeof e.applyElement=="undefined"||typeof e.removeNode=="undefined"||typeof t.attachEvent=="undefined")}();function x(e){var t,i=e.getElementsByTagName("*"),n=i.length,r=RegExp("^(?:"+h().join("|")+")$","i"),o=[];while(n--){t=i[n];if(r.test(t.nodeName)){o.push(t.applyElement(T(t)))}}return o}function T(e){var t,i=e.attributes,n=i.length,r=e.ownerDocument.createElement(w+":"+e.nodeName);while(n--){t=i[n];t.specified&&r.setAttribute(t.nodeName,t.nodeValue)}r.style.cssText=e.style.cssText;return r}function S(e){var t,i=e.split("{"),n=i.length,r=RegExp("(^|[\\s,>+~])("+h().join("|")+")(?=[[\\s,>+~#.:]|$)","gi"),o="$1"+w+"\\:$2";while(n--){t=i[n]=i[n].split("}");t[t.length-1]=t[t.length-1].replace(r,o);i[n]=t.join("}")}return i.join("{")}function k(e){var t=e.length;while(t--){e[t].removeNode()}}function R(s){var l,u,e=p(s),t=s.namespaces,i=s.parentWindow;if(!E||s.printShived){return s}if(typeof t[w]=="undefined"){t.add(w)}function c(){clearTimeout(e._removeSheetTimer);if(l){l.removeNode(true)}l=null}i.attachEvent("onbeforeprint",function(){c();var e,t,i,n=s.styleSheets,r=[],o=n.length,a=Array(o);while(o--){a[o]=n[o]}while(i=a.pop()){if(!i.disabled&&_.test(i.media)){try{e=i.imports;t=e.length}catch(e){t=0}for(o=0;o<t;o++){a.push(e[o])}try{r.push(i.cssText)}catch(e){}}}r=S(r.reverse().join(""));u=x(s);l=d(s,r)});i.attachEvent("onafterprint",function(){k(u);clearTimeout(e._removeSheetTimer);e._removeSheetTimer=setTimeout(c,500)});s.printShived=true;return s}b.type+=" print";b.shivPrint=R;R(a);if(typeof module=="object"&&module.exports){module.exports=b}})(typeof s!=="undefined"?s:this,d)}function v(){if(typeof d.createElement!=="function"){return d.createElement(arguments[0])}else if(r){return d.createElementNS.call(d,"http://www.w3.org/2000/svg",arguments[0])}else{return d.createElement.apply(d,arguments)}}(function(){var t=v("audio");u.addTest("audio",function(){var e=false;try{e=!!t.canPlayType;if(e){e=new Boolean(e)}}catch(e){}return e});try{if(!!t.canPlayType){u.addTest("audio.ogg",t.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""));u.addTest("audio.mp3",t.canPlayType('audio/mpeg; codecs="mp3"').replace(/^no$/,""));u.addTest("audio.opus",t.canPlayType('audio/ogg; codecs="opus"')||t.canPlayType('audio/webm; codecs="opus"').replace(/^no$/,""));u.addTest("audio.wav",t.canPlayType('audio/wav; codecs="1"').replace(/^no$/,""));u.addTest("audio.m4a",(t.canPlayType("audio/x-m4a;")||t.canPlayType("audio/aac;")).replace(/^no$/,""))}}catch(e){}})();(function(){var t=v("video");u.addTest("video",function(){var e=false;try{e=!!t.canPlayType;if(e){e=new Boolean(e)}}catch(e){}return e});try{if(!!t.canPlayType){u.addTest("video.ogg",t.canPlayType('video/ogg; codecs="theora"').replace(/^no$/,""));u.addTest("video.h264",t.canPlayType('video/mp4; codecs="avc1.42E01E"').replace(/^no$/,""));u.addTest("video.h265",t.canPlayType('video/mp4; codecs="hev1"').replace(/^no$/,""));u.addTest("video.webm",t.canPlayType('video/webm; codecs="vp8, vorbis"').replace(/^no$/,""));u.addTest("video.vp9",t.canPlayType('video/webm; codecs="vp9"').replace(/^no$/,""));u.addTest("video.hls",t.canPlayType('application/x-mpegURL; codecs="avc1.42E01E"').replace(/^no$/,""));u.addTest("video.av1",t.canPlayType('video/mp4; codecs="av01"').replace(/^no$/,""))}}catch(e){}})();var n="Moz O ms Webkit";var m=t._config.usePrefixes?n.split(" "):[];t._cssomPrefixes=m;function y(e,t){return!!~(""+e).indexOf(t)}var b={"elem":v("modernizr")};u._q.push(function(){delete b.elem});var _={"style":b.elem.style};u._q.unshift(function(){delete _.style});function w(){var e=d.body;if(!e){e=v(r?"svg":"body");e.fake=true}return e}function E(e,t,i,n){var r="modernizr";var o;var a;var s;var l;var u=v("div");var c=w();if(parseInt(i,10)){while(i--){s=v("div");s.id=n?n[i]:r+(i+1);u.appendChild(s)}}o=v("style");o.type="text/css";o.id="s"+r;(!c.fake?u:c).appendChild(o);c.appendChild(u);if(o.styleSheet){o.styleSheet.cssText=e}else{o.appendChild(d.createTextNode(e))}u.id=r;if(c.fake){c.style.background="";c.style.overflow="hidden";l=p.style.overflow;p.style.overflow="hidden";p.appendChild(c)}a=t(u,e);if(c.fake&&c.parentNode){c.parentNode.removeChild(c);p.style.overflow=l;p.offsetHeight}else{u.parentNode.removeChild(u)}return!!a}function x(e){return e.replace(/([A-Z])/g,function(e,t){return"-"+t.toLowerCase()}).replace(/^ms-/,"-ms-")}function T(e,t,i){var n;if("getComputedStyle"in s){n=getComputedStyle.call(s,e,t);var r=s.console;if(n!==null){if(i){n=n.getPropertyValue(i)}}else{if(r){var o=r.error?"error":"log";r[o].call(r,"getComputedStyle returning null, its possible modernizr test results are inaccurate")}}}else{n=!t&&e.currentStyle&&e.currentStyle[i]}return n}function S(e,t){var i=e.length;if("CSS"in s&&"supports"in s.CSS){while(i--){if(s.CSS.supports(x(e[i]),t)){return true}}return false}else if("CSSSupportsRule"in s){var n=[];while(i--){n.push("("+x(e[i])+":"+t+")")}n=n.join(" or ");return E("@supports ("+n+") { #modernizr { position: absolute; } }",function(e){return T(e,null,"position")==="absolute"})}return h}function k(e){return e.replace(/([a-z])-([a-z])/g,function(e,t,i){return t+i.toUpperCase()}).replace(/^-/,"")}function R(e,t,i,n){n=f(n,"undefined")?false:n;if(!f(i,"undefined")){var r=S(e,i);if(!f(r,"undefined")){return r}}var o,a,s,l,u;var c=["modernizr","tspan","samp"];while(!_.style&&c.length){o=true;_.modElem=v(c.shift());_.style=_.modElem.style}function d(){if(o){delete _.style;delete _.modElem}}s=e.length;for(a=0;a<s;a++){l=e[a];u=_.style[l];if(y(l,"-")){l=k(l)}if(_.style[l]!==h){if(!n&&!f(i,"undefined")){try{_.style[l]=i}catch(e){}if(_.style[l]!==u){d();return t==="pfx"?l:true}}else{d();return t==="pfx"?l:true}}}d();return false}var C=t._config.usePrefixes?n.toLowerCase().split(" "):[];t._domPrefixes=C;function F(e,t){return function(){return e.apply(t,arguments)}}function N(e,t,i){var n;for(var r in e){if(e[r]in t){if(i===false){return e[r]}n=t[e[r]];if(f(n,"function")){return F(n,i||t)}return n}}return false}function A(e,t,i,n,r){var o=e.charAt(0).toUpperCase()+e.slice(1),a=(e+" "+m.join(o+" ")+o).split(" ");if(f(t,"string")||f(t,"undefined")){return R(a,t,n,r)}else{a=(e+" "+C.join(o+" ")+o).split(" ");return N(a,t,i)}}t.testAllProps=A;var O=function(e){var t=I.length;var i=s.CSSRule;var n;if(typeof i==="undefined"){return h}if(!e){return false}e=e.replace(/^@/,"");n=e.replace(/-/g,"_").toUpperCase()+"_RULE";if(n in i){return"@"+e}for(var r=0;r<t;r++){var o=I[r];var a=o.toUpperCase()+"_"+n;if(a in i){return"@-"+o.toLowerCase()+"-"+e}}return false};t.atRule=O;var L=t.prefixed=function(e,t,i){if(e.indexOf("@")===0){return O(e)}if(e.indexOf("-")!==-1){e=k(e)}if(!t){return A(e,"pfx")}else{return A(e,t,i)}};u.addTest("objectfit",!!L("objectFit"),{"aliases":["object-fit"]});u.addTest("devicemotion","DeviceMotionEvent"in s);u.addTest("deviceorientation","DeviceOrientationEvent"in s);u.addTest("fileinput",function(){var e=navigator.userAgent;if(e.match(/(Android (1.0|1.1|1.5|1.6|2.0|2.1))|(Windows Phone (OS 7|8.0))|(XBLWP)|(ZuneWP)|(w(eb)?OSBrowser)|(webOS)|(Kindle\/(1.0|2.0|2.5|3.0))/)||e.match(/\swv\).+(chrome)\/([\w\.]+)/i)){return false}var t=v("input");t.type="file";return!t.disabled});u.addTest("fullscreen",!!(L("exitFullscreen",d,false)||L("cancelFullScreen",d,false)));u.addTest("classlist","classList"in p);u.addTest("requestanimationframe",!!L("requestAnimationFrame",s),{"aliases":["raf"]});function P(e,t,i){return A(e,h,h,t,i)}t.testAllProps=P;var j="CSS"in s&&"supports"in s.CSS;var U="supportsCSS"in s;u.addTest("supports",j||U);u.addTest("csstransforms3d",function(){return!!P("perspective","1px",true)});var I=t._config.usePrefixes?" -webkit- -moz- -o- -ms- ".split(" "):["",""];t._prefixes=I;var D=function(){var i=s.matchMedia||s.msMatchMedia;if(i){return function(e){var t=i(e);return t&&t.matches||false}}return function(e){var t=false;E("@media "+e+" { #modernizr { position: absolute; } }",function(e){t=T(e,null,"position")==="absolute"});return t}}();t.mq=D;u.addTest("touchevents",function(){if("ontouchstart"in s||s.TouchEvent||s.DocumentTouch&&d instanceof DocumentTouch){return true}var e=["(",I.join("touch-enabled),("),"heartz",")"].join("");return D(e)});u.addTest("peerconnection",!!L("RTCPeerConnection",s));i();o(c);delete t.addTest;delete t.addAsyncTest;for(var M=0;M<u._q.length;M++){u._q[M]()}e.Modernizr=u})(window,window,document);(function(e,t){if(typeof module==="object"&&typeof module.exports==="object"){module.exports=e.document?t(e,true):function(e){if(!e.document){throw new Error("jQuery requires a window with a document")}return t(e)}}else{t(e)}})(typeof window!=="undefined"?window:this,function(x,B){var e=[];var T=x.document;var c=e.slice;var F=e.concat;var N=e.push;var r=e.indexOf;var i={};var j=i.toString;var p=i.hasOwnProperty;var g={};var U="2.2.4",S=function(e,t){return new S.fn.init(e,t)},$=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,H=/^-ms-/,z=/-([\da-z])/gi,W=function(e,t){return t.toUpperCase()};S.fn=S.prototype={"jquery":U,"constructor":S,"selector":"","length":0,"toArray":function(){return c.call(this)},"get":function(e){return e!=null?e<0?this[e+this.length]:this[e]:c.call(this)},"pushStack":function(e){var t=S.merge(this.constructor(),e);t.prevObject=this;t.context=this.context;return t},"each":function(e){return S.each(this,e)},"map":function(i){return this.pushStack(S.map(this,function(e,t){return i.call(e,t,e)}))},"slice":function(){return this.pushStack(c.apply(this,arguments))},"first":function(){return this.eq(0)},"last":function(){return this.eq(-1)},"eq":function(e){var t=this.length,i=+e+(e<0?t:0);return this.pushStack(i>=0&&i<t?[this[i]]:[])},"end":function(){return this.prevObject||this.constructor()},"push":N,"sort":e.sort,"splice":e.splice};S.extend=S.fn.extend=function(){var e,t,i,n,r,o,a=arguments[0]||{},s=1,l=arguments.length,u=false;if(typeof a==="boolean"){u=a;a=arguments[s]||{};s++}if(typeof a!=="object"&&!S.isFunction(a)){a={}}if(s===l){a=this;s--}for(;s<l;s++){if((e=arguments[s])!=null){for(t in e){i=a[t];n=e[t];if(a===n){continue}if(u&&n&&(S.isPlainObject(n)||(r=S.isArray(n)))){if(r){r=false;o=i&&S.isArray(i)?i:[]}else{o=i&&S.isPlainObject(i)?i:{}}a[t]=S.extend(u,o,n)}else if(n!==undefined){a[t]=n}}}}return a};S.extend({"expando":"jQuery"+(U+Math.random()).replace(/\D/g,""),"isReady":true,"error":function(e){throw new Error(e)},"noop":function(){},"isFunction":function(e){return S.type(e)==="function"},"isArray":Array.isArray,"isWindow":function(e){return e!=null&&e===e.window},"isNumeric":function(e){var t=e&&e.toString();return!S.isArray(e)&&t-parseFloat(t)+1>=0},"isPlainObject":function(e){var t;if(S.type(e)!=="object"||e.nodeType||S.isWindow(e)){return false}if(e.constructor&&!p.call(e,"constructor")&&!p.call(e.constructor.prototype||{},"isPrototypeOf")){return false}for(t in e){}return t===undefined||p.call(e,t)},"isEmptyObject":function(e){var t;for(t in e){return false}return true},"type":function(e){if(e==null){return e+""}return typeof e==="object"||typeof e==="function"?i[j.call(e)]||"object":typeof e},"globalEval":function(e){var t,i=eval;e=S.trim(e);if(e){if(e.indexOf("use strict")===1){t=T.createElement("script");t.text=e;T.head.appendChild(t).parentNode.removeChild(t)}else{i(e)}}},"camelCase":function(e){return e.replace(H,"ms-").replace(z,W)},"nodeName":function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},"each":function(e,t){var i,n=0;if(G(e)){i=e.length;for(;n<i;n++){if(t.call(e[n],n,e[n])===false){break}}}else{for(n in e){if(t.call(e[n],n,e[n])===false){break}}}return e},"trim":function(e){return e==null?"":(e+"").replace($,"")},"makeArray":function(e,t){var i=t||[];if(e!=null){if(G(Object(e))){S.merge(i,typeof e==="string"?[e]:e)}else{N.call(i,e)}}return i},"inArray":function(e,t,i){return t==null?-1:r.call(t,e,i)},"merge":function(e,t){var i=+t.length,n=0,r=e.length;for(;n<i;n++){e[r++]=t[n]}e.length=r;return e},"grep":function(e,t,i){var n,r=[],o=0,a=e.length,s=!i;for(;o<a;o++){n=!t(e[o],o);if(n!==s){r.push(e[o])}}return r},"map":function(e,t,i){var n,r,o=0,a=[];if(G(e)){n=e.length;for(;o<n;o++){r=t(e[o],o,i);if(r!=null){a.push(r)}}}else{for(o in e){r=t(e[o],o,i);if(r!=null){a.push(r)}}}return F.apply([],a)},"guid":1,"proxy":function(e,t){var i,n,r;if(typeof t==="string"){i=e[t];t=e;e=i}if(!S.isFunction(e)){return undefined}n=c.call(arguments,2);r=function(){return e.apply(t||this,n.concat(c.call(arguments)))};r.guid=e.guid=e.guid||S.guid++;return r},"now":Date.now,"support":g});if(typeof Symbol==="function"){S.fn[Symbol.iterator]=e[Symbol.iterator]}S.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(e,t){i["[object "+t+"]"]=t.toLowerCase()});function G(e){var t=!!e&&"length"in e&&e.length,i=S.type(e);if(i==="function"||S.isWindow(e)){return false}return i==="array"||t===0||typeof t==="number"&&t>0&&t-1 in e}var t=function(B){var e,p,_,o,F,g,N,j,w,l,u,E,x,r,T,v,a,s,m,S="sizzle"+1*new Date,y=B.document,k=0,U=0,$=ce(),H=ce(),b=ce(),z=function(e,t){if(e===t){u=true}return 0},W=1<<31,G={}.hasOwnProperty,t=[],V=t.pop,q=t.push,R=t.push,K=t.slice,C=function(e,t){var i=0,n=e.length;for(;i<n;i++){if(e[i]===t){return i}}return-1},Z="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",c="[\\x20\\t\\r\\n\\f]",i="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",X="\\["+c+"*("+i+")(?:"+c+"*([*^$|!~]?=)"+c+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+i+"))|)"+c+"*\\]",Y=":("+i+")(?:\\(("+"('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|"+"((?:\\\\.|[^\\\\()[\\]]|"+X+")*)|"+".*"+")\\)|)",Q=new RegExp(c+"+","g"),A=new RegExp("^"+c+"+|((?:^|[^\\\\])(?:\\\\.)*)"+c+"+$","g"),J=new RegExp("^"+c+"*,"+c+"*"),ee=new RegExp("^"+c+"*([>+~]|"+c+")"+c+"*"),te=new RegExp("="+c+"*([^\\]'\"]*?)"+c+"*\\]","g"),ie=new RegExp(Y),ne=new RegExp("^"+i+"$"),d={"ID":new RegExp("^#("+i+")"),"CLASS":new RegExp("^\\.("+i+")"),"TAG":new RegExp("^("+i+"|[*])"),"ATTR":new RegExp("^"+X),"PSEUDO":new RegExp("^"+Y),"CHILD":new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+c+"*(even|odd|(([+-]|)(\\d*)n|)"+c+"*(?:([+-]|)"+c+"*(\\d+)|))"+c+"*\\)|)","i"),"bool":new RegExp("^(?:"+Z+")$","i"),"needsContext":new RegExp("^"+c+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+c+"*((?:-\\d)?\\d*)"+c+"*\\)|)(?=[^-]|$)","i")},re=/^(?:input|select|textarea|button)$/i,oe=/^h\d$/i,h=/^[^{]+\{\s*\[native \w/,ae=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,se=/[+~]/,le=/'|\\/g,f=new RegExp("\\\\([\\da-f]{1,6}"+c+"?|("+c+")|.)","ig"),O=function(e,t,i){var n="0x"+t-65536;return n!==n||i?t:n<0?String.fromCharCode(n+65536):String.fromCharCode(n>>10|55296,n&1023|56320)},ue=function(){E()};try{R.apply(t=K.call(y.childNodes),y.childNodes);t[y.childNodes.length].nodeType}catch(e){R={"apply":t.length?function(e,t){q.apply(e,K.call(t))}:function(e,t){var i=e.length,n=0;while(e[i++]=t[n++]){}e.length=i-1}}}function L(e,t,i,n){var r,o,a,s,l,u,c,d,h=t&&t.ownerDocument,f=t?t.nodeType:9;i=i||[];if(typeof e!=="string"||!e||f!==1&&f!==9&&f!==11){return i}if(!n){if((t?t.ownerDocument||t:y)!==x){E(t)}t=t||x;if(T){if(f!==11&&(u=ae.exec(e))){if(r=u[1]){if(f===9){if(a=t.getElementById(r)){if(a.id===r){i.push(a);return i}}else{return i}}else{if(h&&(a=h.getElementById(r))&&m(t,a)&&a.id===r){i.push(a);return i}}}else if(u[2]){R.apply(i,t.getElementsByTagName(e));return i}else if((r=u[3])&&p.getElementsByClassName&&t.getElementsByClassName){R.apply(i,t.getElementsByClassName(r));return i}}if(p.qsa&&!b[e+" "]&&(!v||!v.test(e))){if(f!==1){h=t;d=e}else if(t.nodeName.toLowerCase()!=="object"){if(s=t.getAttribute("id")){s=s.replace(le,"\\$&")}else{t.setAttribute("id",s=S)}c=g(e);o=c.length;l=ne.test(s)?"#"+s:"[id='"+s+"']";while(o--){c[o]=l+" "+D(c[o])}d=c.join(",");h=se.test(e)&&ge(t.parentNode)||t}if(d){try{R.apply(i,h.querySelectorAll(d));return i}catch(e){}finally{if(s===S){t.removeAttribute("id")}}}}}}return j(e.replace(A,"$1"),t,i,n)}function ce(){var i=[];function n(e,t){if(i.push(e+" ")>_.cacheLength){delete n[i.shift()]}return n[e+" "]=t}return n}function P(e){e[S]=true;return e}function I(e){var t=x.createElement("div");try{return!!e(t)}catch(e){return false}finally{if(t.parentNode){t.parentNode.removeChild(t)}t=null}}function de(e,t){var i=e.split("|"),n=i.length;while(n--){_.attrHandle[i[n]]=t}}function he(e,t){var i=t&&e,n=i&&e.nodeType===1&&t.nodeType===1&&(~t.sourceIndex||W)-(~e.sourceIndex||W);if(n){return n}if(i){while(i=i.nextSibling){if(i===t){return-1}}}return e?1:-1}function fe(i){return function(e){var t=e.nodeName.toLowerCase();return t==="input"&&e.type===i}}function pe(i){return function(e){var t=e.nodeName.toLowerCase();return(t==="input"||t==="button")&&e.type===i}}function n(a){return P(function(o){o=+o;return P(function(e,t){var i,n=a([],e.length,o),r=n.length;while(r--){if(e[i=n[r]]){e[i]=!(t[i]=e[i])}}})})}function ge(e){return e&&typeof e.getElementsByTagName!=="undefined"&&e}p=L.support={};F=L.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return t?t.nodeName!=="HTML":false};E=L.setDocument=function(e){var t,i,n=e?e.ownerDocument||e:y;if(n===x||n.nodeType!==9||!n.documentElement){return x}x=n;r=x.documentElement;T=!F(x);if((i=x.defaultView)&&i.top!==i){if(i.addEventListener){i.addEventListener("unload",ue,false)}else if(i.attachEvent){i.attachEvent("onunload",ue)}}p.attributes=I(function(e){e.className="i";return!e.getAttribute("className")});p.getElementsByTagName=I(function(e){e.appendChild(x.createComment(""));return!e.getElementsByTagName("*").length});p.getElementsByClassName=h.test(x.getElementsByClassName);p.getById=I(function(e){r.appendChild(e).id=S;return!x.getElementsByName||!x.getElementsByName(S).length});if(p.getById){_.find["ID"]=function(e,t){if(typeof t.getElementById!=="undefined"&&T){var i=t.getElementById(e);return i?[i]:[]}};_.filter["ID"]=function(e){var t=e.replace(f,O);return function(e){return e.getAttribute("id")===t}}}else{delete _.find["ID"];_.filter["ID"]=function(e){var i=e.replace(f,O);return function(e){var t=typeof e.getAttributeNode!=="undefined"&&e.getAttributeNode("id");return t&&t.value===i}}}_.find["TAG"]=p.getElementsByTagName?function(e,t){if(typeof t.getElementsByTagName!=="undefined"){return t.getElementsByTagName(e)}else if(p.qsa){return t.querySelectorAll(e)}}:function(e,t){var i,n=[],r=0,o=t.getElementsByTagName(e);if(e==="*"){while(i=o[r++]){if(i.nodeType===1){n.push(i)}}return n}return o};_.find["CLASS"]=p.getElementsByClassName&&function(e,t){if(typeof t.getElementsByClassName!=="undefined"&&T){return t.getElementsByClassName(e)}};a=[];v=[];if(p.qsa=h.test(x.querySelectorAll)){I(function(e){r.appendChild(e).innerHTML="<a id='"+S+"'></a>"+"<select id='"+S+"-\r\\' msallowcapture=''>"+"<option selected=''></option></select>";if(e.querySelectorAll("[msallowcapture^='']").length){v.push("[*^$]="+c+"*(?:''|\"\")")}if(!e.querySelectorAll("[selected]").length){v.push("\\["+c+"*(?:value|"+Z+")")}if(!e.querySelectorAll("[id~="+S+"-]").length){v.push("~=")}if(!e.querySelectorAll(":checked").length){v.push(":checked")}if(!e.querySelectorAll("a#"+S+"+*").length){v.push(".#.+[+~]")}});I(function(e){var t=x.createElement("input");t.setAttribute("type","hidden");e.appendChild(t).setAttribute("name","D");if(e.querySelectorAll("[name=d]").length){v.push("name"+c+"*[*^$|!~]?=")}if(!e.querySelectorAll(":enabled").length){v.push(":enabled",":disabled")}e.querySelectorAll("*,:x");v.push(",.*:")})}if(p.matchesSelector=h.test(s=r.matches||r.webkitMatchesSelector||r.mozMatchesSelector||r.oMatchesSelector||r.msMatchesSelector)){I(function(e){p.disconnectedMatch=s.call(e,"div");s.call(e,"[s!='']:x");a.push("!=",Y)})}v=v.length&&new RegExp(v.join("|"));a=a.length&&new RegExp(a.join("|"));t=h.test(r.compareDocumentPosition);m=t||h.test(r.contains)?function(e,t){var i=e.nodeType===9?e.documentElement:e,n=t&&t.parentNode;return e===n||!!(n&&n.nodeType===1&&(i.contains?i.contains(n):e.compareDocumentPosition&&e.compareDocumentPosition(n)&16))}:function(e,t){if(t){while(t=t.parentNode){if(t===e){return true}}}return false};z=t?function(e,t){if(e===t){u=true;return 0}var i=!e.compareDocumentPosition-!t.compareDocumentPosition;if(i){return i}i=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1;if(i&1||!p.sortDetached&&t.compareDocumentPosition(e)===i){if(e===x||e.ownerDocument===y&&m(y,e)){return-1}if(t===x||t.ownerDocument===y&&m(y,t)){return 1}return l?C(l,e)-C(l,t):0}return i&4?-1:1}:function(e,t){if(e===t){u=true;return 0}var i,n=0,r=e.parentNode,o=t.parentNode,a=[e],s=[t];if(!r||!o){return e===x?-1:t===x?1:r?-1:o?1:l?C(l,e)-C(l,t):0}else if(r===o){return he(e,t)}i=e;while(i=i.parentNode){a.unshift(i)}i=t;while(i=i.parentNode){s.unshift(i)}while(a[n]===s[n]){n++}return n?he(a[n],s[n]):a[n]===y?-1:s[n]===y?1:0};return x};L.matches=function(e,t){return L(e,null,null,t)};L.matchesSelector=function(e,t){if((e.ownerDocument||e)!==x){E(e)}t=t.replace(te,"='$1']");if(p.matchesSelector&&T&&!b[t+" "]&&(!a||!a.test(t))&&(!v||!v.test(t))){try{var i=s.call(e,t);if(i||p.disconnectedMatch||e.document&&e.document.nodeType!==11){return i}}catch(e){}}return L(t,x,null,[e]).length>0};L.contains=function(e,t){if((e.ownerDocument||e)!==x){E(e)}return m(e,t)};L.attr=function(e,t){if((e.ownerDocument||e)!==x){E(e)}var i=_.attrHandle[t.toLowerCase()],n=i&&G.call(_.attrHandle,t.toLowerCase())?i(e,t,!T):undefined;return n!==undefined?n:p.attributes||!T?e.getAttribute(t):(n=e.getAttributeNode(t))&&n.specified?n.value:null};L.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)};L.uniqueSort=function(e){var t,i=[],n=0,r=0;u=!p.detectDuplicates;l=!p.sortStable&&e.slice(0);e.sort(z);if(u){while(t=e[r++]){if(t===e[r]){n=i.push(r)}}while(n--){e.splice(i[n],1)}}l=null;return e};o=L.getText=function(e){var t,i="",n=0,r=e.nodeType;if(!r){while(t=e[n++]){i+=o(t)}}else if(r===1||r===9||r===11){if(typeof e.textContent==="string"){return e.textContent}else{for(e=e.firstChild;e;e=e.nextSibling){i+=o(e)}}}else if(r===3||r===4){return e.nodeValue}return i};_=L.selectors={"cacheLength":50,"createPseudo":P,"match":d,"attrHandle":{},"find":{},"relative":{">":{"dir":"parentNode","first":true}," ":{"dir":"parentNode"},"+":{"dir":"previousSibling","first":true},"~":{"dir":"previousSibling"}},"preFilter":{"ATTR":function(e){e[1]=e[1].replace(f,O);e[3]=(e[3]||e[4]||e[5]||"").replace(f,O);if(e[2]==="~="){e[3]=" "+e[3]+" "}return e.slice(0,4)},"CHILD":function(e){e[1]=e[1].toLowerCase();if(e[1].slice(0,3)==="nth"){if(!e[3]){L.error(e[0])}e[4]=+(e[4]?e[5]+(e[6]||1):2*(e[3]==="even"||e[3]==="odd"));e[5]=+(e[7]+e[8]||e[3]==="odd")}else if(e[3]){L.error(e[0])}return e},"PSEUDO":function(e){var t,i=!e[6]&&e[2];if(d["CHILD"].test(e[0])){return null}if(e[3]){e[2]=e[4]||e[5]||""}else if(i&&ie.test(i)&&(t=g(i,true))&&(t=i.indexOf(")",i.length-t)-i.length)){e[0]=e[0].slice(0,t);e[2]=i.slice(0,t)}return e.slice(0,3)}},"filter":{"TAG":function(e){var t=e.replace(f,O).toLowerCase();return e==="*"?function(){return true}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},"CLASS":function(e){var t=$[e+" "];return t||(t=new RegExp("(^|"+c+")"+e+"("+c+"|$)"))&&$(e,function(e){return t.test(typeof e.className==="string"&&e.className||typeof e.getAttribute!=="undefined"&&e.getAttribute("class")||"")})},"ATTR":function(i,n,r){return function(e){var t=L.attr(e,i);if(t==null){return n==="!="}if(!n){return true}t+="";return n==="="?t===r:n==="!="?t!==r:n==="^="?r&&t.indexOf(r)===0:n==="*="?r&&t.indexOf(r)>-1:n==="$="?r&&t.slice(-r.length)===r:n==="~="?(" "+t.replace(Q," ")+" ").indexOf(r)>-1:n==="|="?t===r||t.slice(0,r.length+1)===r+"-":false}},"CHILD":function(p,e,t,g,v){var m=p.slice(0,3)!=="nth",y=p.slice(-4)!=="last",b=e==="of-type";return g===1&&v===0?function(e){return!!e.parentNode}:function(e,t,i){var n,r,o,a,s,l,u=m!==y?"nextSibling":"previousSibling",c=e.parentNode,d=b&&e.nodeName.toLowerCase(),h=!i&&!b,f=false;if(c){if(m){while(u){a=e;while(a=a[u]){if(b?a.nodeName.toLowerCase()===d:a.nodeType===1){return false}}l=u=p==="only"&&!l&&"nextSibling"}return true}l=[y?c.firstChild:c.lastChild];if(y&&h){a=c;o=a[S]||(a[S]={});r=o[a.uniqueID]||(o[a.uniqueID]={});n=r[p]||[];s=n[0]===k&&n[1];f=s&&n[2];a=s&&c.childNodes[s];while(a=++s&&a&&a[u]||(f=s=0)||l.pop()){if(a.nodeType===1&&++f&&a===e){r[p]=[k,s,f];break}}}else{if(h){a=e;o=a[S]||(a[S]={});r=o[a.uniqueID]||(o[a.uniqueID]={});n=r[p]||[];s=n[0]===k&&n[1];f=s}if(f===false){while(a=++s&&a&&a[u]||(f=s=0)||l.pop()){if((b?a.nodeName.toLowerCase()===d:a.nodeType===1)&&++f){if(h){o=a[S]||(a[S]={});r=o[a.uniqueID]||(o[a.uniqueID]={});r[p]=[k,f]}if(a===e){break}}}}}f-=v;return f===g||f%g===0&&f/g>=0}}},"PSEUDO":function(e,o){var t,a=_.pseudos[e]||_.setFilters[e.toLowerCase()]||L.error("unsupported pseudo: "+e);if(a[S]){return a(o)}if(a.length>1){t=[e,e,"",o];return _.setFilters.hasOwnProperty(e.toLowerCase())?P(function(e,t){var i,n=a(e,o),r=n.length;while(r--){i=C(e,n[r]);e[i]=!(t[i]=n[r])}}):function(e){return a(e,0,t)}}return a}},"pseudos":{"not":P(function(e){var n=[],r=[],s=N(e.replace(A,"$1"));return s[S]?P(function(e,t,i,n){var r,o=s(e,null,n,[]),a=e.length;while(a--){if(r=o[a]){e[a]=!(t[a]=r)}}}):function(e,t,i){n[0]=e;s(n,null,i,r);n[0]=null;return!r.pop()}}),"has":P(function(t){return function(e){return L(t,e).length>0}}),"contains":P(function(t){t=t.replace(f,O);return function(e){return(e.textContent||e.innerText||o(e)).indexOf(t)>-1}}),"lang":P(function(i){if(!ne.test(i||"")){L.error("unsupported lang: "+i)}i=i.replace(f,O).toLowerCase();return function(e){var t;do{if(t=T?e.lang:e.getAttribute("xml:lang")||e.getAttribute("lang")){t=t.toLowerCase();return t===i||t.indexOf(i+"-")===0}}while((e=e.parentNode)&&e.nodeType===1);return false}}),"target":function(e){var t=B.location&&B.location.hash;return t&&t.slice(1)===e.id},"root":function(e){return e===r},"focus":function(e){return e===x.activeElement&&(!x.hasFocus||x.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},"enabled":function(e){return e.disabled===false},"disabled":function(e){return e.disabled===true},"checked":function(e){var t=e.nodeName.toLowerCase();return t==="input"&&!!e.checked||t==="option"&&!!e.selected},"selected":function(e){if(e.parentNode){e.parentNode.selectedIndex}return e.selected===true},"empty":function(e){for(e=e.firstChild;e;e=e.nextSibling){if(e.nodeType<6){return false}}return true},"parent":function(e){return!_.pseudos["empty"](e)},"header":function(e){return oe.test(e.nodeName)},"input":function(e){return re.test(e.nodeName)},"button":function(e){var t=e.nodeName.toLowerCase();return t==="input"&&e.type==="button"||t==="button"},"text":function(e){var t;return e.nodeName.toLowerCase()==="input"&&e.type==="text"&&((t=e.getAttribute("type"))==null||t.toLowerCase()==="text")},"first":n(function(){return[0]}),"last":n(function(e,t){return[t-1]}),"eq":n(function(e,t,i){return[i<0?i+t:i]}),"even":n(function(e,t){var i=0;for(;i<t;i+=2){e.push(i)}return e}),"odd":n(function(e,t){var i=1;for(;i<t;i+=2){e.push(i)}return e}),"lt":n(function(e,t,i){var n=i<0?i+t:i;for(;--n>=0;){e.push(n)}return e}),"gt":n(function(e,t,i){var n=i<0?i+t:i;for(;++n<t;){e.push(n)}return e})}};_.pseudos["nth"]=_.pseudos["eq"];for(e in{"radio":true,"checkbox":true,"file":true,"password":true,"image":true}){_.pseudos[e]=fe(e)}for(e in{"submit":true,"reset":true}){_.pseudos[e]=pe(e)}function ve(){}ve.prototype=_.filters=_.pseudos;_.setFilters=new ve;g=L.tokenize=function(e,t){var i,n,r,o,a,s,l,u=H[e+" "];if(u){return t?0:u.slice(0)}a=e;s=[];l=_.preFilter;while(a){if(!i||(n=J.exec(a))){if(n){a=a.slice(n[0].length)||a}s.push(r=[])}i=false;if(n=ee.exec(a)){i=n.shift();r.push({"value":i,"type":n[0].replace(A," ")});a=a.slice(i.length)}for(o in _.filter){if((n=d[o].exec(a))&&(!l[o]||(n=l[o](n)))){i=n.shift();r.push({"value":i,"type":o,"matches":n});a=a.slice(i.length)}}if(!i){break}}return t?a.length:a?L.error(e):H(e,s).slice(0)};function D(e){var t=0,i=e.length,n="";for(;t<i;t++){n+=e[t].value}return n}function me(s,e,t){var l=e.dir,u=t&&l==="parentNode",c=U++;return e.first?function(e,t,i){while(e=e[l]){if(e.nodeType===1||u){return s(e,t,i)}}}:function(e,t,i){var n,r,o,a=[k,c];if(i){while(e=e[l]){if(e.nodeType===1||u){if(s(e,t,i)){return true}}}}else{while(e=e[l]){if(e.nodeType===1||u){o=e[S]||(e[S]={});r=o[e.uniqueID]||(o[e.uniqueID]={});if((n=r[l])&&n[0]===k&&n[1]===c){return a[2]=n[2]}else{r[l]=a;if(a[2]=s(e,t,i)){return true}}}}}}}function ye(r){return r.length>1?function(e,t,i){var n=r.length;while(n--){if(!r[n](e,t,i)){return false}}return true}:r[0]}function be(e,t,i){var n=0,r=t.length;for(;n<r;n++){L(e,t[n],i)}return i}function M(e,t,i,n,r){var o,a=[],s=0,l=e.length,u=t!=null;for(;s<l;s++){if(o=e[s]){if(!i||i(o,n,r)){a.push(o);if(u){t.push(s)}}}}return a}function _e(f,p,g,v,m,e){if(v&&!v[S]){v=_e(v)}if(m&&!m[S]){m=_e(m,e)}return P(function(e,t,i,n){var r,o,a,s=[],l=[],u=t.length,c=e||be(p||"*",i.nodeType?[i]:i,[]),d=f&&(e||!p)?M(c,s,f,i,n):c,h=g?m||(e?f:u||v)?[]:t:d;if(g){g(d,h,i,n)}if(v){r=M(h,l);v(r,[],i,n);o=r.length;while(o--){if(a=r[o]){h[l[o]]=!(d[l[o]]=a)}}}if(e){if(m||f){if(m){r=[];o=h.length;while(o--){if(a=h[o]){r.push(d[o]=a)}}m(null,h=[],r,n)}o=h.length;while(o--){if((a=h[o])&&(r=m?C(e,a):s[o])>-1){e[r]=!(t[r]=a)}}}}else{h=M(h===t?h.splice(u,h.length):h);if(m){m(null,t,h,n)}else{R.apply(t,h)}}})}function we(e){var r,t,i,n=e.length,o=_.relative[e[0].type],a=o||_.relative[" "],s=o?1:0,l=me(function(e){return e===r},a,true),u=me(function(e){return C(r,e)>-1},a,true),c=[function(e,t,i){var n=!o&&(i||t!==w)||((r=t).nodeType?l(e,t,i):u(e,t,i));r=null;return n}];for(;s<n;s++){if(t=_.relative[e[s].type]){c=[me(ye(c),t)]}else{t=_.filter[e[s].type].apply(null,e[s].matches);if(t[S]){i=++s;for(;i<n;i++){if(_.relative[e[i].type]){break}}return _e(s>1&&ye(c),s>1&&D(e.slice(0,s-1).concat({"value":e[s-2].type===" "?"*":""})).replace(A,"$1"),t,s<i&&we(e.slice(s,i)),i<n&&we(e=e.slice(i)),i<n&&D(e))}c.push(t)}}return ye(c)}function Ee(v,m){var y=m.length>0,b=v.length>0,e=function(e,t,i,n,r){var o,a,s,l=0,u="0",c=e&&[],d=[],h=w,f=e||b&&_.find["TAG"]("*",r),p=k+=h==null?1:Math.random()||.1,g=f.length;if(r){w=t===x||t||r}for(;u!==g&&(o=f[u])!=null;u++){if(b&&o){a=0;if(!t&&o.ownerDocument!==x){E(o);i=!T}while(s=v[a++]){if(s(o,t||x,i)){n.push(o);break}}if(r){k=p}}if(y){if(o=!s&&o){l--}if(e){c.push(o)}}}l+=u;if(y&&u!==l){a=0;while(s=m[a++]){s(c,d,t,i)}if(e){if(l>0){while(u--){if(!(c[u]||d[u])){d[u]=V.call(n)}}}d=M(d)}R.apply(n,d);if(r&&!e&&d.length>0&&l+m.length>1){L.uniqueSort(n)}}if(r){k=p;w=h}return c};return y?P(e):e}N=L.compile=function(e,t){var i,n=[],r=[],o=b[e+" "];if(!o){if(!t){t=g(e)}i=t.length;while(i--){o=we(t[i]);if(o[S]){n.push(o)}else{r.push(o)}}o=b(e,Ee(r,n));o.selector=e}return o};j=L.select=function(e,t,i,n){var r,o,a,s,l,u=typeof e==="function"&&e,c=!n&&g(e=u.selector||e);i=i||[];if(c.length===1){o=c[0]=c[0].slice(0);if(o.length>2&&(a=o[0]).type==="ID"&&p.getById&&t.nodeType===9&&T&&_.relative[o[1].type]){t=(_.find["ID"](a.matches[0].replace(f,O),t)||[])[0];if(!t){return i}else if(u){t=t.parentNode}e=e.slice(o.shift().value.length)}r=d["needsContext"].test(e)?0:o.length;while(r--){a=o[r];if(_.relative[s=a.type]){break}if(l=_.find[s]){if(n=l(a.matches[0].replace(f,O),se.test(o[0].type)&&ge(t.parentNode)||t)){o.splice(r,1);e=n.length&&D(o);if(!e){R.apply(i,n);return i}break}}}}(u||N(e,c))(n,t,!T,i,!t||se.test(e)&&ge(t.parentNode)||t);return i};p.sortStable=S.split("").sort(z).join("")===S;p.detectDuplicates=!!u;E();p.sortDetached=I(function(e){return e.compareDocumentPosition(x.createElement("div"))&1});if(!I(function(e){e.innerHTML="<a href='#'></a>";return e.firstChild.getAttribute("href")==="#"})){de("type|href|height|width",function(e,t,i){if(!i){return e.getAttribute(t,t.toLowerCase()==="type"?1:2)}})}if(!p.attributes||!I(function(e){e.innerHTML="<input/>";e.firstChild.setAttribute("value","");return e.firstChild.getAttribute("value")===""})){de("value",function(e,t,i){if(!i&&e.nodeName.toLowerCase()==="input"){return e.defaultValue}})}if(!I(function(e){return e.getAttribute("disabled")==null})){de(Z,function(e,t,i){var n;if(!i){return e[t]===true?t.toLowerCase():(n=e.getAttributeNode(t))&&n.specified?n.value:null}})}return L}(x);S.find=t;S.expr=t.selectors;S.expr[":"]=S.expr.pseudos;S.uniqueSort=S.unique=t.uniqueSort;S.text=t.getText;S.isXMLDoc=t.isXML;S.contains=t.contains;var n=function(e,t,i){var n=[],r=i!==undefined;while((e=e[t])&&e.nodeType!==9){if(e.nodeType===1){if(r&&S(e).is(i)){break}n.push(e)}}return n};var V=function(e,t){var i=[];for(;e;e=e.nextSibling){if(e.nodeType===1&&e!==t){i.push(e)}}return i};var q=S.expr.match.needsContext;var K=/^<([\w-]+)\s*\/?>(?:<\/\1>|)$/;var Z=/^.[^:#\[\.,]*$/;function X(e,i,n){if(S.isFunction(i)){return S.grep(e,function(e,t){return!!i.call(e,t,e)!==n})}if(i.nodeType){return S.grep(e,function(e){return e===i!==n})}if(typeof i==="string"){if(Z.test(i)){return S.filter(i,e,n)}i=S.filter(i,e)}return S.grep(e,function(e){return r.call(i,e)>-1!==n})}S.filter=function(e,t,i){var n=t[0];if(i){e=":not("+e+")"}return t.length===1&&n.nodeType===1?S.find.matchesSelector(n,e)?[n]:[]:S.find.matches(e,S.grep(t,function(e){return e.nodeType===1}))};S.fn.extend({"find":function(e){var t,i=this.length,n=[],r=this;if(typeof e!=="string"){return this.pushStack(S(e).filter(function(){for(t=0;t<i;t++){if(S.contains(r[t],this)){return true}}}))}for(t=0;t<i;t++){S.find(e,r[t],n)}n=this.pushStack(i>1?S.unique(n):n);n.selector=this.selector?this.selector+" "+e:e;return n},"filter":function(e){return this.pushStack(X(this,e||[],false))},"not":function(e){return this.pushStack(X(this,e||[],true))},"is":function(e){return!!X(this,typeof e==="string"&&q.test(e)?S(e):e||[],false).length}});var Y,Q=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,J=S.fn.init=function(e,t,i){var n,r;if(!e){return this}i=i||Y;if(typeof e==="string"){if(e[0]==="<"&&e[e.length-1]===">"&&e.length>=3){n=[null,e,null]}else{n=Q.exec(e)}if(n&&(n[1]||!t)){if(n[1]){t=t instanceof S?t[0]:t;S.merge(this,S.parseHTML(n[1],t&&t.nodeType?t.ownerDocument||t:T,true));if(K.test(n[1])&&S.isPlainObject(t)){for(n in t){if(S.isFunction(this[n])){this[n](t[n])}else{this.attr(n,t[n])}}}return this}else{r=T.getElementById(n[2]);if(r&&r.parentNode){this.length=1;this[0]=r}this.context=T;this.selector=e;return this}}else if(!t||t.jquery){return(t||i).find(e)}else{return this.constructor(t).find(e)}}else if(e.nodeType){this.context=this[0]=e;this.length=1;return this}else if(S.isFunction(e)){return i.ready!==undefined?i.ready(e):e(S)}if(e.selector!==undefined){this.selector=e.selector;this.context=e.context}return S.makeArray(e,this)};J.prototype=S.fn;Y=S(T);var ee=/^(?:parents|prev(?:Until|All))/,te={"children":true,"contents":true,"next":true,"prev":true};S.fn.extend({"has":function(e){var t=S(e,this),i=t.length;return this.filter(function(){var e=0;for(;e<i;e++){if(S.contains(this,t[e])){return true}}})},"closest":function(e,t){var i,n=0,r=this.length,o=[],a=q.test(e)||typeof e!=="string"?S(e,t||this.context):0;for(;n<r;n++){for(i=this[n];i&&i!==t;i=i.parentNode){if(i.nodeType<11&&(a?a.index(i)>-1:i.nodeType===1&&S.find.matchesSelector(i,e))){o.push(i);break}}}return this.pushStack(o.length>1?S.uniqueSort(o):o)},"index":function(e){if(!e){return this[0]&&this[0].parentNode?this.first().prevAll().length:-1}if(typeof e==="string"){return r.call(S(e),this[0])}return r.call(this,e.jquery?e[0]:e)},"add":function(e,t){return this.pushStack(S.uniqueSort(S.merge(this.get(),S(e,t))))},"addBack":function(e){return this.add(e==null?this.prevObject:this.prevObject.filter(e))}});function ie(e,t){while((e=e[t])&&e.nodeType!==1){}return e}S.each({"parent":function(e){var t=e.parentNode;return t&&t.nodeType!==11?t:null},"parents":function(e){return n(e,"parentNode")},"parentsUntil":function(e,t,i){return n(e,"parentNode",i)},"next":function(e){return ie(e,"nextSibling")},"prev":function(e){return ie(e,"previousSibling")},"nextAll":function(e){return n(e,"nextSibling")},"prevAll":function(e){return n(e,"previousSibling")},"nextUntil":function(e,t,i){return n(e,"nextSibling",i)},"prevUntil":function(e,t,i){return n(e,"previousSibling",i)},"siblings":function(e){return V((e.parentNode||{}).firstChild,e)},"children":function(e){return V(e.firstChild)},"contents":function(e){return e.contentDocument||S.merge([],e.childNodes)}},function(n,r){S.fn[n]=function(e,t){var i=S.map(this,r,e);if(n.slice(-5)!=="Until"){t=e}if(t&&typeof t==="string"){i=S.filter(t,i)}if(this.length>1){if(!te[n]){S.uniqueSort(i)}if(ee.test(n)){i.reverse()}}return this.pushStack(i)}});var k=/\S+/g;function ne(e){var i={};S.each(e.match(k)||[],function(e,t){i[t]=true});return i}S.Callbacks=function(n){n=typeof n==="string"?ne(n):S.extend({},n);var i,e,t,r,o=[],a=[],s=-1,l=function(){r=n.once;t=i=true;for(;a.length;s=-1){e=a.shift();while(++s<o.length){if(o[s].apply(e[0],e[1])===false&&n.stopOnFalse){s=o.length;e=false}}}if(!n.memory){e=false}i=false;if(r){if(e){o=[]}else{o=""}}},u={"add":function(){if(o){if(e&&!i){s=o.length-1;a.push(e)}(function i(e){S.each(e,function(e,t){if(S.isFunction(t)){if(!n.unique||!u.has(t)){o.push(t)}}else if(t&&t.length&&S.type(t)!=="string"){i(t)}})})(arguments);if(e&&!i){l()}}return this},"remove":function(){S.each(arguments,function(e,t){var i;while((i=S.inArray(t,o,i))>-1){o.splice(i,1);if(i<=s){s--}}});return this},"has":function(e){return e?S.inArray(e,o)>-1:o.length>0},"empty":function(){if(o){o=[]}return this},"disable":function(){r=a=[];o=e="";return this},"disabled":function(){return!o},"lock":function(){r=a=[];if(!e){o=e=""}return this},"locked":function(){return!!r},"fireWith":function(e,t){if(!r){t=t||[];t=[e,t.slice?t.slice():t];a.push(t);if(!i){l()}}return this},"fire":function(){u.fireWith(this,arguments);return this},"fired":function(){return!!t}};return u};S.extend({"Deferred":function(e){var o=[["resolve","done",S.Callbacks("once memory"),"resolved"],["reject","fail",S.Callbacks("once memory"),"rejected"],["notify","progress",S.Callbacks("memory")]],r="pending",a={"state":function(){return r},"always":function(){s.done(arguments).fail(arguments);return this},"then":function(){var r=arguments;return S.Deferred(function(n){S.each(o,function(e,t){var i=S.isFunction(r[e])&&r[e];s[t[1]](function(){var e=i&&i.apply(this,arguments);if(e&&S.isFunction(e.promise)){e.promise().progress(n.notify).done(n.resolve).fail(n.reject)}else{n[t[0]+"With"](this===a?n.promise():this,i?[e]:arguments)}})});r=null}).promise()},"promise":function(e){return e!=null?S.extend(e,a):a}},s={};a.pipe=a.then;S.each(o,function(e,t){var i=t[2],n=t[3];a[t[1]]=i.add;if(n){i.add(function(){r=n},o[e^1][2].disable,o[2][2].lock)}s[t[0]]=function(){s[t[0]+"With"](this===s?a:this,arguments);return this};s[t[0]+"With"]=i.fireWith});a.promise(s);if(e){e.call(s,s)}return s},"when":function(e){var t=0,i=c.call(arguments),n=i.length,r=n!==1||e&&S.isFunction(e.promise)?n:0,o=r===1?e:S.Deferred(),a=function(t,i,n){return function(e){i[t]=this;n[t]=arguments.length>1?c.call(arguments):e;if(n===s){o.notifyWith(i,n)}else if(!--r){o.resolveWith(i,n)}}},s,l,u;if(n>1){s=new Array(n);l=new Array(n);u=new Array(n);for(;t<n;t++){if(i[t]&&S.isFunction(i[t].promise)){i[t].promise().progress(a(t,l,s)).done(a(t,u,i)).fail(o.reject)}else{--r}}}if(!r){o.resolveWith(u,i)}return o.promise()}});var o;S.fn.ready=function(e){S.ready.promise().done(e);return this};S.extend({"isReady":false,"readyWait":1,"holdReady":function(e){if(e){S.readyWait++}else{S.ready(true)}},"ready":function(e){if(e===true?--S.readyWait:S.isReady){return}S.isReady=true;if(e!==true&&--S.readyWait>0){return}o.resolveWith(T,[S]);if(S.fn.triggerHandler){S(T).triggerHandler("ready");S(T).off("ready")}}});function a(){T.removeEventListener("DOMContentLoaded",a);x.removeEventListener("load",a);S.ready()}S.ready.promise=function(e){if(!o){o=S.Deferred();if(T.readyState==="complete"||T.readyState!=="loading"&&!T.documentElement.doScroll){x.setTimeout(S.ready)}else{T.addEventListener("DOMContentLoaded",a);x.addEventListener("load",a)}}return o.promise(e)};S.ready.promise();var d=function(e,t,i,n,r,o,a){var s=0,l=e.length,u=i==null;if(S.type(i)==="object"){r=true;for(s in i){d(e,t,s,i[s],true,o,a)}}else if(n!==undefined){r=true;if(!S.isFunction(n)){a=true}if(u){if(a){t.call(e,n);t=null}else{u=t;t=function(e,t,i){return u.call(S(e),i)}}}if(t){for(;s<l;s++){t(e[s],i,a?n:n.call(e[s],s,t(e[s],i)))}}}return r?e:u?t.call(e):l?t(e[0],i):o};var v=function(e){return e.nodeType===1||e.nodeType===9||!+e.nodeType};function s(){this.expando=S.expando+s.uid++}s.uid=1;s.prototype={"register":function(e,t){var i=t||{};if(e.nodeType){e[this.expando]=i}else{Object.defineProperty(e,this.expando,{"value":i,"writable":true,"configurable":true})}return e[this.expando]},"cache":function(e){if(!v(e)){return{}}var t=e[this.expando];if(!t){t={};if(v(e)){if(e.nodeType){e[this.expando]=t}else{Object.defineProperty(e,this.expando,{"value":t,"configurable":true})}}}return t},"set":function(e,t,i){var n,r=this.cache(e);if(typeof t==="string"){r[t]=i}else{for(n in t){r[n]=t[n]}}return r},"get":function(e,t){return t===undefined?this.cache(e):e[this.expando]&&e[this.expando][t]},"access":function(e,t,i){var n;if(t===undefined||t&&typeof t==="string"&&i===undefined){n=this.get(e,t);return n!==undefined?n:this.get(e,S.camelCase(t))}this.set(e,t,i);return i!==undefined?i:t},"remove":function(e,t){var i,n,r,o=e[this.expando];if(o===undefined){return}if(t===undefined){this.register(e)}else{if(S.isArray(t)){n=t.concat(t.map(S.camelCase))}else{r=S.camelCase(t);if(t in o){n=[t,r]}else{n=r;n=n in o?[n]:n.match(k)||[]}}i=n.length;while(i--){delete o[n[i]]}}if(t===undefined||S.isEmptyObject(o)){if(e.nodeType){e[this.expando]=undefined}else{delete e[this.expando]}}},"hasData":function(e){var t=e[this.expando];return t!==undefined&&!S.isEmptyObject(t)}};var m=new s;var h=new s;var re=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,oe=/[A-Z]/g;function ae(e,t,i){var n;if(i===undefined&&e.nodeType===1){n="data-"+t.replace(oe,"-$&").toLowerCase();i=e.getAttribute(n);if(typeof i==="string"){try{i=i==="true"?true:i==="false"?false:i==="null"?null:+i+""===i?+i:re.test(i)?S.parseJSON(i):i}catch(e){}h.set(e,t,i)}else{i=undefined}}return i}S.extend({"hasData":function(e){return h.hasData(e)||m.hasData(e)},"data":function(e,t,i){return h.access(e,t,i)},"removeData":function(e,t){h.remove(e,t)},"_data":function(e,t,i){return m.access(e,t,i)},"_removeData":function(e,t){m.remove(e,t)}});S.fn.extend({"data":function(n,e){var t,i,r,o=this[0],a=o&&o.attributes;if(n===undefined){if(this.length){r=h.get(o);if(o.nodeType===1&&!m.get(o,"hasDataAttrs")){t=a.length;while(t--){if(a[t]){i=a[t].name;if(i.indexOf("data-")===0){i=S.camelCase(i.slice(5));ae(o,i,r[i])}}}m.set(o,"hasDataAttrs",true)}}return r}if(typeof n==="object"){return this.each(function(){h.set(this,n)})}return d(this,function(t){var e,i;if(o&&t===undefined){e=h.get(o,n)||h.get(o,n.replace(oe,"-$&").toLowerCase());if(e!==undefined){return e}i=S.camelCase(n);e=h.get(o,i);if(e!==undefined){return e}e=ae(o,i,undefined);if(e!==undefined){return e}return}i=S.camelCase(n);this.each(function(){var e=h.get(this,i);h.set(this,i,t);if(n.indexOf("-")>-1&&e!==undefined){h.set(this,n,t)}})},null,e,arguments.length>1,null,true)},"removeData":function(e){return this.each(function(){h.remove(this,e)})}});S.extend({"queue":function(e,t,i){var n;if(e){t=(t||"fx")+"queue";n=m.get(e,t);if(i){if(!n||S.isArray(i)){n=m.access(e,t,S.makeArray(i))}else{n.push(i)}}return n||[]}},"dequeue":function(e,t){t=t||"fx";var i=S.queue(e,t),n=i.length,r=i.shift(),o=S._queueHooks(e,t),a=function(){S.dequeue(e,t)};if(r==="inprogress"){r=i.shift();n--}if(r){if(t==="fx"){i.unshift("inprogress")}delete o.stop;r.call(e,a,o)}if(!n&&o){o.empty.fire()}},"_queueHooks":function(e,t){var i=t+"queueHooks";return m.get(e,i)||m.access(e,i,{"empty":S.Callbacks("once memory").add(function(){m.remove(e,[t+"queue",i])})})}});S.fn.extend({"queue":function(t,i){var e=2;if(typeof t!=="string"){i=t;t="fx";e--}if(arguments.length<e){return S.queue(this[0],t)}return i===undefined?this:this.each(function(){var e=S.queue(this,t,i);S._queueHooks(this,t);if(t==="fx"&&e[0]!=="inprogress"){S.dequeue(this,t)}})},"dequeue":function(e){return this.each(function(){S.dequeue(this,e)})},"clearQueue":function(e){return this.queue(e||"fx",[])},"promise":function(e,t){var i,n=1,r=S.Deferred(),o=this,a=this.length,s=function(){if(!--n){r.resolveWith(o,[o])}};if(typeof e!=="string"){t=e;e=undefined}e=e||"fx";while(a--){i=m.get(o[a],e+"queueHooks");if(i&&i.empty){n++;i.empty.add(s)}}s();return r.promise(t)}});var se=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source;var f=new RegExp("^(?:([+-])=|)("+se+")([a-z%]*)$","i");var l=["Top","Right","Bottom","Left"];var y=function(e,t){e=t||e;return S.css(e,"display")==="none"||!S.contains(e.ownerDocument,e)};function le(e,t,i,n){var r,o=1,a=20,s=n?function(){return n.cur()}:function(){return S.css(e,t,"")},l=s(),u=i&&i[3]||(S.cssNumber[t]?"":"px"),c=(S.cssNumber[t]||u!=="px"&&+l)&&f.exec(S.css(e,t));if(c&&c[3]!==u){u=u||c[3];i=i||[];c=+l||1;do{o=o||".5";c=c/o;S.style(e,t,c+u)}while(o!==(o=s()/l)&&o!==1&&--a)}if(i){c=+c||+l||0;r=i[1]?c+(i[1]+1)*i[2]:+i[2];if(n){n.unit=u;n.start=c;n.end=r}}return r}var ue=/^(?:checkbox|radio)$/i;var ce=/<([\w:-]+)/;var de=/^$|\/(?:java|ecma)script/i;var b={"option":[1,"<select multiple='multiple'>","</select>"],"thead":[1,"<table>","</table>"],"col":[2,"<table><colgroup>","</colgroup></table>"],"tr":[2,"<table><tbody>","</tbody></table>"],"td":[3,"<table><tbody><tr>","</tr></tbody></table>"],"_default":[0,"",""]};b.optgroup=b.option;b.tbody=b.tfoot=b.colgroup=b.caption=b.thead;b.th=b.td;function _(e,t){var i=typeof e.getElementsByTagName!=="undefined"?e.getElementsByTagName(t||"*"):typeof e.querySelectorAll!=="undefined"?e.querySelectorAll(t||"*"):[];return t===undefined||t&&S.nodeName(e,t)?S.merge([e],i):i}function he(e,t){var i=0,n=e.length;for(;i<n;i++){m.set(e[i],"globalEval",!t||m.get(t[i],"globalEval"))}}var fe=/<|&#?\w+;/;function pe(e,t,i,n,r){var o,a,s,l,u,c,d=t.createDocumentFragment(),h=[],f=0,p=e.length;for(;f<p;f++){o=e[f];if(o||o===0){if(S.type(o)==="object"){S.merge(h,o.nodeType?[o]:o)}else if(!fe.test(o)){h.push(t.createTextNode(o))}else{a=a||d.appendChild(t.createElement("div"));s=(ce.exec(o)||["",""])[1].toLowerCase();l=b[s]||b._default;a.innerHTML=l[1]+S.htmlPrefilter(o)+l[2];c=l[0];while(c--){a=a.lastChild}S.merge(h,a.childNodes);a=d.firstChild;a.textContent=""}}}d.textContent="";f=0;while(o=h[f++]){if(n&&S.inArray(o,n)>-1){if(r){r.push(o)}continue}u=S.contains(o.ownerDocument,o);a=_(d.appendChild(o),"script");if(u){he(a)}if(i){c=0;while(o=a[c++]){if(de.test(o.type||"")){i.push(o)}}}}return d}(function(){var e=T.createDocumentFragment(),t=e.appendChild(T.createElement("div")),i=T.createElement("input");i.setAttribute("type","radio");i.setAttribute("checked","checked");i.setAttribute("name","t");t.appendChild(i);g.checkClone=t.cloneNode(true).cloneNode(true).lastChild.checked;t.innerHTML="<textarea>x</textarea>";g.noCloneChecked=!!t.cloneNode(true).lastChild.defaultValue})();var ge=/^key/,ve=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,me=/^([^.]*)(?:\.(.+)|)/;function u(){return true}function w(){return false}function ye(){try{return T.activeElement}catch(e){}}function be(e,t,i,n,r,o){var a,s;if(typeof t==="object"){if(typeof i!=="string"){n=n||i;i=undefined}for(s in t){be(e,s,i,n,t[s],o)}return e}if(n==null&&r==null){r=i;n=i=undefined}else if(r==null){if(typeof i==="string"){r=n;n=undefined}else{r=n;n=i;i=undefined}}if(r===false){r=w}else if(!r){return e}if(o===1){a=r;r=function(e){S().off(e);return a.apply(this,arguments)};r.guid=a.guid||(a.guid=S.guid++)}return e.each(function(){S.event.add(this,t,r,n,i)})}S.event={"global":{},"add":function(t,e,i,n,r){var o,a,s,l,u,c,d,h,f,p,g,v=m.get(t);if(!v){return}if(i.handler){o=i;i=o.handler;r=o.selector}if(!i.guid){i.guid=S.guid++}if(!(l=v.events)){l=v.events={}}if(!(a=v.handle)){a=v.handle=function(e){return typeof S!=="undefined"&&S.event.triggered!==e.type?S.event.dispatch.apply(t,arguments):undefined}}e=(e||"").match(k)||[""];u=e.length;while(u--){s=me.exec(e[u])||[];f=g=s[1];p=(s[2]||"").split(".").sort();if(!f){continue}d=S.event.special[f]||{};f=(r?d.delegateType:d.bindType)||f;d=S.event.special[f]||{};c=S.extend({"type":f,"origType":g,"data":n,"handler":i,"guid":i.guid,"selector":r,"needsContext":r&&S.expr.match.needsContext.test(r),"namespace":p.join(".")},o);if(!(h=l[f])){h=l[f]=[];h.delegateCount=0;if(!d.setup||d.setup.call(t,n,p,a)===false){if(t.addEventListener){t.addEventListener(f,a)}}}if(d.add){d.add.call(t,c);if(!c.handler.guid){c.handler.guid=i.guid}}if(r){h.splice(h.delegateCount++,0,c)}else{h.push(c)}S.event.global[f]=true}},"remove":function(e,t,i,n,r){var o,a,s,l,u,c,d,h,f,p,g,v=m.hasData(e)&&m.get(e);if(!v||!(l=v.events)){return}t=(t||"").match(k)||[""];u=t.length;while(u--){s=me.exec(t[u])||[];f=g=s[1];p=(s[2]||"").split(".").sort();if(!f){for(f in l){S.event.remove(e,f+t[u],i,n,true)}continue}d=S.event.special[f]||{};f=(n?d.delegateType:d.bindType)||f;h=l[f]||[];s=s[2]&&new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)");a=o=h.length;while(o--){c=h[o];if((r||g===c.origType)&&(!i||i.guid===c.guid)&&(!s||s.test(c.namespace))&&(!n||n===c.selector||n==="**"&&c.selector)){h.splice(o,1);if(c.selector){h.delegateCount--}if(d.remove){d.remove.call(e,c)}}}if(a&&!h.length){if(!d.teardown||d.teardown.call(e,p,v.handle)===false){S.removeEvent(e,f,v.handle)}delete l[f]}}if(S.isEmptyObject(l)){m.remove(e,"handle events")}},"dispatch":function(e){e=S.event.fix(e);var t,i,n,r,o,a=[],s=c.call(arguments),l=(m.get(this,"events")||{})[e.type]||[],u=S.event.special[e.type]||{};s[0]=e;e.delegateTarget=this;if(u.preDispatch&&u.preDispatch.call(this,e)===false){return}a=S.event.handlers.call(this,e,l);t=0;while((r=a[t++])&&!e.isPropagationStopped()){e.currentTarget=r.elem;i=0;while((o=r.handlers[i++])&&!e.isImmediatePropagationStopped()){if(!e.rnamespace||e.rnamespace.test(o.namespace)){e.handleObj=o;e.data=o.data;n=((S.event.special[o.origType]||{}).handle||o.handler).apply(r.elem,s);if(n!==undefined){if((e.result=n)===false){e.preventDefault();e.stopPropagation()}}}}}if(u.postDispatch){u.postDispatch.call(this,e)}return e.result},"handlers":function(e,t){var i,n,r,o,a=[],s=t.delegateCount,l=e.target;if(s&&l.nodeType&&(e.type!=="click"||isNaN(e.button)||e.button<1)){for(;l!==this;l=l.parentNode||this){if(l.nodeType===1&&(l.disabled!==true||e.type!=="click")){n=[];for(i=0;i<s;i++){o=t[i];r=o.selector+" ";if(n[r]===undefined){n[r]=o.needsContext?S(r,this).index(l)>-1:S.find(r,this,null,[l]).length}if(n[r]){n.push(o)}}if(n.length){a.push({"elem":l,"handlers":n})}}}}if(s<t.length){a.push({"elem":this,"handlers":t.slice(s)})}return a},"props":("altKey bubbles cancelable ctrlKey currentTarget detail eventPhase "+"metaKey relatedTarget shiftKey target timeStamp view which").split(" "),"fixHooks":{},"keyHooks":{"props":"char charCode key keyCode".split(" "),"filter":function(e,t){if(e.which==null){e.which=t.charCode!=null?t.charCode:t.keyCode}return e}},"mouseHooks":{"props":("button buttons clientX clientY offsetX offsetY pageX pageY "+"screenX screenY toElement").split(" "),"filter":function(e,t){var i,n,r,o=t.button;if(e.pageX==null&&t.clientX!=null){i=e.target.ownerDocument||T;n=i.documentElement;r=i.body;e.pageX=t.clientX+(n&&n.scrollLeft||r&&r.scrollLeft||0)-(n&&n.clientLeft||r&&r.clientLeft||0);e.pageY=t.clientY+(n&&n.scrollTop||r&&r.scrollTop||0)-(n&&n.clientTop||r&&r.clientTop||0)}if(!e.which&&o!==undefined){e.which=o&1?1:o&2?3:o&4?2:0}return e}},"fix":function(e){if(e[S.expando]){return e}var t,i,n,r=e.type,o=e,a=this.fixHooks[r];if(!a){this.fixHooks[r]=a=ve.test(r)?this.mouseHooks:ge.test(r)?this.keyHooks:{}}n=a.props?this.props.concat(a.props):this.props;e=new S.Event(o);t=n.length;while(t--){i=n[t];e[i]=o[i]}if(!e.target){e.target=T}if(e.target.nodeType===3){e.target=e.target.parentNode}return a.filter?a.filter(e,o):e},"special":{"load":{"noBubble":true},"focus":{"trigger":function(){if(this!==ye()&&this.focus){this.focus();return false}},"delegateType":"focusin"},"blur":{"trigger":function(){if(this===ye()&&this.blur){this.blur();return false}},"delegateType":"focusout"},"click":{"trigger":function(){if(this.type==="checkbox"&&this.click&&S.nodeName(this,"input")){this.click();return false}},"_default":function(e){return S.nodeName(e.target,"a")}},"beforeunload":{"postDispatch":function(e){if(e.result!==undefined&&e.originalEvent){e.originalEvent.returnValue=e.result}}}}};S.removeEvent=function(e,t,i){if(e.removeEventListener){e.removeEventListener(t,i)}};S.Event=function(e,t){if(!(this instanceof S.Event)){return new S.Event(e,t)}if(e&&e.type){this.originalEvent=e;this.type=e.type;this.isDefaultPrevented=e.defaultPrevented||e.defaultPrevented===undefined&&e.returnValue===false?u:w}else{this.type=e}if(t){S.extend(this,t)}this.timeStamp=e&&e.timeStamp||S.now();this[S.expando]=true};S.Event.prototype={"constructor":S.Event,"isDefaultPrevented":w,"isPropagationStopped":w,"isImmediatePropagationStopped":w,"isSimulated":false,"preventDefault":function(){var e=this.originalEvent;this.isDefaultPrevented=u;if(e&&!this.isSimulated){e.preventDefault()}},"stopPropagation":function(){var e=this.originalEvent;this.isPropagationStopped=u;if(e&&!this.isSimulated){e.stopPropagation()}},"stopImmediatePropagation":function(){var e=this.originalEvent;this.isImmediatePropagationStopped=u;if(e&&!this.isSimulated){e.stopImmediatePropagation()}this.stopPropagation()}};S.each({"mouseenter":"mouseover","mouseleave":"mouseout","pointerenter":"pointerover","pointerleave":"pointerout"},function(e,o){S.event.special[e]={"delegateType":o,"bindType":o,"handle":function(e){var t,i=this,n=e.relatedTarget,r=e.handleObj;if(!n||n!==i&&!S.contains(i,n)){e.type=r.origType;t=r.handler.apply(this,arguments);e.type=o}return t}}});S.fn.extend({"on":function(e,t,i,n){return be(this,e,t,i,n)},"one":function(e,t,i,n){return be(this,e,t,i,n,1)},"off":function(e,t,i){var n,r;if(e&&e.preventDefault&&e.handleObj){n=e.handleObj;S(e.delegateTarget).off(n.namespace?n.origType+"."+n.namespace:n.origType,n.selector,n.handler);return this}if(typeof e==="object"){for(r in e){this.off(r,t,e[r])}return this}if(t===false||typeof t==="function"){i=t;t=undefined}if(i===false){i=w}return this.each(function(){S.event.remove(this,e,i,t)})}});var _e=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:-]+)[^>]*)\/>/gi,we=/<script|<style|<link/i,Ee=/checked\s*(?:[^=]|=\s*.checked.)/i,xe=/^true\/(.*)/,Te=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function Se(e,t){return S.nodeName(e,"table")&&S.nodeName(t.nodeType!==11?t:t.firstChild,"tr")?e.getElementsByTagName("tbody")[0]||e.appendChild(e.ownerDocument.createElement("tbody")):e}function ke(e){e.type=(e.getAttribute("type")!==null)+"/"+e.type;return e}function Re(e){var t=xe.exec(e.type);if(t){e.type=t[1]}else{e.removeAttribute("type")}return e}function Ce(e,t){var i,n,r,o,a,s,l,u;if(t.nodeType!==1){return}if(m.hasData(e)){o=m.access(e);a=m.set(t,o);u=o.events;if(u){delete a.handle;a.events={};for(r in u){for(i=0,n=u[r].length;i<n;i++){S.event.add(t,r,u[r][i])}}}}if(h.hasData(e)){s=h.access(e);l=S.extend({},s);h.set(t,l)}}function Ae(e,t){var i=t.nodeName.toLowerCase();if(i==="input"&&ue.test(e.type)){t.checked=e.checked}else if(i==="input"||i==="textarea"){t.defaultValue=e.defaultValue}}function E(i,n,r,o){n=F.apply([],n);var e,t,a,s,l,u,c=0,d=i.length,h=d-1,f=n[0],p=S.isFunction(f);if(p||d>1&&typeof f==="string"&&!g.checkClone&&Ee.test(f)){return i.each(function(e){var t=i.eq(e);if(p){n[0]=f.call(this,e,t.html())}E(t,n,r,o)})}if(d){e=pe(n,i[0].ownerDocument,false,i,o);t=e.firstChild;if(e.childNodes.length===1){e=t}if(t||o){a=S.map(_(e,"script"),ke);s=a.length;for(;c<d;c++){l=e;if(c!==h){l=S.clone(l,true,true);if(s){S.merge(a,_(l,"script"))}}r.call(i[c],l,c)}if(s){u=a[a.length-1].ownerDocument;S.map(a,Re);for(c=0;c<s;c++){l=a[c];if(de.test(l.type||"")&&!m.access(l,"globalEval")&&S.contains(u,l)){if(l.src){if(S._evalUrl){S._evalUrl(l.src)}}else{S.globalEval(l.textContent.replace(Te,""))}}}}}}return i}function Oe(e,t,i){var n,r=t?S.filter(t,e):e,o=0;for(;(n=r[o])!=null;o++){if(!i&&n.nodeType===1){S.cleanData(_(n))}if(n.parentNode){if(i&&S.contains(n.ownerDocument,n)){he(_(n,"script"))}n.parentNode.removeChild(n)}}return e}S.extend({"htmlPrefilter":function(e){return e.replace(_e,"<$1></$2>")},"clone":function(e,t,i){var n,r,o,a,s=e.cloneNode(true),l=S.contains(e.ownerDocument,e);if(!g.noCloneChecked&&(e.nodeType===1||e.nodeType===11)&&!S.isXMLDoc(e)){a=_(s);o=_(e);for(n=0,r=o.length;n<r;n++){Ae(o[n],a[n])}}if(t){if(i){o=o||_(e);a=a||_(s);for(n=0,r=o.length;n<r;n++){Ce(o[n],a[n])}}else{Ce(e,s)}}a=_(s,"script");if(a.length>0){he(a,!l&&_(e,"script"))}return s},"cleanData":function(e){var t,i,n,r=S.event.special,o=0;for(;(i=e[o])!==undefined;o++){if(v(i)){if(t=i[m.expando]){if(t.events){for(n in t.events){if(r[n]){S.event.remove(i,n)}else{S.removeEvent(i,n,t.handle)}}}i[m.expando]=undefined}if(i[h.expando]){i[h.expando]=undefined}}}}});S.fn.extend({"domManip":E,"detach":function(e){return Oe(this,e,true)},"remove":function(e){return Oe(this,e)},"text":function(e){return d(this,function(e){return e===undefined?S.text(this):this.empty().each(function(){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){this.textContent=e}})},null,e,arguments.length)},"append":function(){return E(this,arguments,function(e){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var t=Se(this,e);t.appendChild(e)}})},"prepend":function(){return E(this,arguments,function(e){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var t=Se(this,e);t.insertBefore(e,t.firstChild)}})},"before":function(){return E(this,arguments,function(e){if(this.parentNode){this.parentNode.insertBefore(e,this)}})},"after":function(){return E(this,arguments,function(e){if(this.parentNode){this.parentNode.insertBefore(e,this.nextSibling)}})},"empty":function(){var e,t=0;for(;(e=this[t])!=null;t++){if(e.nodeType===1){S.cleanData(_(e,false));e.textContent=""}}return this},"clone":function(e,t){e=e==null?false:e;t=t==null?e:t;return this.map(function(){return S.clone(this,e,t)})},"html":function(e){return d(this,function(e){var t=this[0]||{},i=0,n=this.length;if(e===undefined&&t.nodeType===1){return t.innerHTML}if(typeof e==="string"&&!we.test(e)&&!b[(ce.exec(e)||["",""])[1].toLowerCase()]){e=S.htmlPrefilter(e);try{for(;i<n;i++){t=this[i]||{};if(t.nodeType===1){S.cleanData(_(t,false));t.innerHTML=e}}t=0}catch(e){}}if(t){this.empty().append(e)}},null,e,arguments.length)},"replaceWith":function(){var i=[];return E(this,arguments,function(e){var t=this.parentNode;if(S.inArray(this,i)<0){S.cleanData(_(this));if(t){t.replaceChild(e,this)}}},i)}});S.each({"appendTo":"append","prependTo":"prepend","insertBefore":"before","insertAfter":"after","replaceAll":"replaceWith"},function(e,a){S.fn[e]=function(e){var t,i=[],n=S(e),r=n.length-1,o=0;for(;o<=r;o++){t=o===r?this:this.clone(true);S(n[o])[a](t);N.apply(i,t.get())}return this.pushStack(i)}});var Le,Pe={"HTML":"block","BODY":"block"};function Ie(e,t){var i=S(t.createElement(e)).appendTo(t.body),n=S.css(i[0],"display");i.detach();return n}function De(e){var t=T,i=Pe[e];if(!i){i=Ie(e,t);if(i==="none"||!i){Le=(Le||S("<iframe frameborder='0' width='0' height='0'/>")).appendTo(t.documentElement);t=Le[0].contentDocument;t.write();t.close();i=Ie(e,t);Le.detach()}Pe[e]=i}return i}var Me=/^margin/;var Be=new RegExp("^("+se+")(?!px)[a-z%]+$","i");var Fe=function(e){var t=e.ownerDocument.defaultView;if(!t||!t.opener){t=x}return t.getComputedStyle(e)};var Ne=function(e,t,i,n){var r,o,a={};for(o in t){a[o]=e.style[o];e.style[o]=t[o]}r=i.apply(e,n||[]);for(o in t){e.style[o]=a[o]}return r};var R=T.documentElement;(function(){var t,i,n,r,o=T.createElement("div"),a=T.createElement("div");if(!a.style){return}a.style.backgroundClip="content-box";a.cloneNode(true).style.backgroundClip="";g.clearCloneStyle=a.style.backgroundClip==="content-box";o.style.cssText="border:0;width:8px;height:0;top:0;left:-9999px;"+"padding:0;margin-top:1px;position:absolute";o.appendChild(a);function e(){a.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;"+"position:relative;display:block;"+"margin:auto;border:1px;padding:1px;"+"top:1%;width:50%";a.innerHTML="";R.appendChild(o);var e=x.getComputedStyle(a);t=e.top!=="1%";r=e.marginLeft==="2px";i=e.width==="4px";a.style.marginRight="50%";n=e.marginRight==="4px";R.removeChild(o)}S.extend(g,{"pixelPosition":function(){e();return t},"boxSizingReliable":function(){if(i==null){e()}return i},"pixelMarginRight":function(){if(i==null){e()}return n},"reliableMarginLeft":function(){if(i==null){e()}return r},"reliableMarginRight":function(){var e,t=a.appendChild(T.createElement("div"));t.style.cssText=a.style.cssText="-webkit-box-sizing:content-box;box-sizing:content-box;"+"display:block;margin:0;border:0;padding:0";t.style.marginRight=t.style.width="0";a.style.width="1px";R.appendChild(o);e=!parseFloat(x.getComputedStyle(t).marginRight);R.removeChild(o);a.removeChild(t);return e}})})();function C(e,t,i){var n,r,o,a,s=e.style;i=i||Fe(e);a=i?i.getPropertyValue(t)||i[t]:undefined;if((a===""||a===undefined)&&!S.contains(e.ownerDocument,e)){a=S.style(e,t)}if(i){if(!g.pixelMarginRight()&&Be.test(a)&&Me.test(t)){n=s.width;r=s.minWidth;o=s.maxWidth;s.minWidth=s.maxWidth=s.width=a;a=i.width;s.width=n;s.minWidth=r;s.maxWidth=o}}return a!==undefined?a+"":a}function je(e,t){return{"get":function(){if(e()){delete this.get;return}return(this.get=t).apply(this,arguments)}}}var Ue=/^(none|table(?!-c[ea]).+)/,$e={"position":"absolute","visibility":"hidden","display":"block"},He={"letterSpacing":"0","fontWeight":"400"},ze=["Webkit","O","Moz","ms"],We=T.createElement("div").style;function Ge(e){if(e in We){return e}var t=e[0].toUpperCase()+e.slice(1),i=ze.length;while(i--){e=ze[i]+t;if(e in We){return e}}}function Ve(e,t,i){var n=f.exec(t);return n?Math.max(0,n[2]-(i||0))+(n[3]||"px"):t}function qe(e,t,i,n,r){var o=i===(n?"border":"content")?4:t==="width"?1:0,a=0;for(;o<4;o+=2){if(i==="margin"){a+=S.css(e,i+l[o],true,r)}if(n){if(i==="content"){a-=S.css(e,"padding"+l[o],true,r)}if(i!=="margin"){a-=S.css(e,"border"+l[o]+"Width",true,r)}}else{a+=S.css(e,"padding"+l[o],true,r);if(i!=="padding"){a+=S.css(e,"border"+l[o]+"Width",true,r)}}}return a}function Ke(e,t,i){var n=true,r=t==="width"?e.offsetWidth:e.offsetHeight,o=Fe(e),a=S.css(e,"boxSizing",false,o)==="border-box";if(r<=0||r==null){r=C(e,t,o);if(r<0||r==null){r=e.style[t]}if(Be.test(r)){return r}n=a&&(g.boxSizingReliable()||r===e.style[t]);r=parseFloat(r)||0}return r+qe(e,t,i||(a?"border":"content"),n,o)+"px"}function Ze(e,t){var i,n,r,o=[],a=0,s=e.length;for(;a<s;a++){n=e[a];if(!n.style){continue}o[a]=m.get(n,"olddisplay");i=n.style.display;if(t){if(!o[a]&&i==="none"){n.style.display=""}if(n.style.display===""&&y(n)){o[a]=m.access(n,"olddisplay",De(n.nodeName))}}else{r=y(n);if(i!=="none"||!r){m.set(n,"olddisplay",r?i:S.css(n,"display"))}}}for(a=0;a<s;a++){n=e[a];if(!n.style){continue}if(!t||n.style.display==="none"||n.style.display===""){n.style.display=t?o[a]||"":"none"}}return e}S.extend({"cssHooks":{"opacity":{"get":function(e,t){if(t){var i=C(e,"opacity");return i===""?"1":i}}}},"cssNumber":{"animationIterationCount":true,"columnCount":true,"fillOpacity":true,"flexGrow":true,"flexShrink":true,"fontWeight":true,"lineHeight":true,"opacity":true,"order":true,"orphans":true,"widows":true,"zIndex":true,"zoom":true},"cssProps":{"float":"cssFloat"},"style":function(e,t,i,n){if(!e||e.nodeType===3||e.nodeType===8||!e.style){return}var r,o,a,s=S.camelCase(t),l=e.style;t=S.cssProps[s]||(S.cssProps[s]=Ge(s)||s);a=S.cssHooks[t]||S.cssHooks[s];if(i!==undefined){o=typeof i;if(o==="string"&&(r=f.exec(i))&&r[1]){i=le(e,t,r);o="number"}if(i==null||i!==i){return}if(o==="number"){i+=r&&r[3]||(S.cssNumber[s]?"":"px")}if(!g.clearCloneStyle&&i===""&&t.indexOf("background")===0){l[t]="inherit"}if(!a||!("set"in a)||(i=a.set(e,i,n))!==undefined){l[t]=i}}else{if(a&&"get"in a&&(r=a.get(e,false,n))!==undefined){return r}return l[t]}},"css":function(e,t,i,n){var r,o,a,s=S.camelCase(t);t=S.cssProps[s]||(S.cssProps[s]=Ge(s)||s);a=S.cssHooks[t]||S.cssHooks[s];if(a&&"get"in a){r=a.get(e,true,i)}if(r===undefined){r=C(e,t,n)}if(r==="normal"&&t in He){r=He[t]}if(i===""||i){o=parseFloat(r);return i===true||isFinite(o)?o||0:r}return r}});S.each(["height","width"],function(e,a){S.cssHooks[a]={"get":function(e,t,i){if(t){return Ue.test(S.css(e,"display"))&&e.offsetWidth===0?Ne(e,$e,function(){return Ke(e,a,i)}):Ke(e,a,i)}},"set":function(e,t,i){var n,r=i&&Fe(e),o=i&&qe(e,a,i,S.css(e,"boxSizing",false,r)==="border-box",r);if(o&&(n=f.exec(t))&&(n[3]||"px")!=="px"){e.style[a]=t;t=S.css(e,a)}return Ve(e,t,o)}}});S.cssHooks.marginLeft=je(g.reliableMarginLeft,function(e,t){if(t){return(parseFloat(C(e,"marginLeft"))||e.getBoundingClientRect().left-Ne(e,{"marginLeft":0},function(){return e.getBoundingClientRect().left}))+"px"}});S.cssHooks.marginRight=je(g.reliableMarginRight,function(e,t){if(t){return Ne(e,{"display":"inline-block"},C,[e,"marginRight"])}});S.each({"margin":"","padding":"","border":"Width"},function(r,o){S.cssHooks[r+o]={"expand":function(e){var t=0,i={},n=typeof e==="string"?e.split(" "):[e];for(;t<4;t++){i[r+l[t]+o]=n[t]||n[t-2]||n[0]}return i}};if(!Me.test(r)){S.cssHooks[r+o].set=Ve}});S.fn.extend({"css":function(e,t){return d(this,function(e,t,i){var n,r,o={},a=0;if(S.isArray(t)){n=Fe(e);r=t.length;for(;a<r;a++){o[t[a]]=S.css(e,t[a],false,n)}return o}return i!==undefined?S.style(e,t,i):S.css(e,t)},e,t,arguments.length>1)},"show":function(){return Ze(this,true)},"hide":function(){return Ze(this)},"toggle":function(e){if(typeof e==="boolean"){return e?this.show():this.hide()}return this.each(function(){if(y(this)){S(this).show()}else{S(this).hide()}})}});function A(e,t,i,n,r){return new A.prototype.init(e,t,i,n,r)}S.Tween=A;A.prototype={"constructor":A,"init":function(e,t,i,n,r,o){this.elem=e;this.prop=i;this.easing=r||S.easing._default;this.options=t;this.start=this.now=this.cur();this.end=n;this.unit=o||(S.cssNumber[i]?"":"px")},"cur":function(){var e=A.propHooks[this.prop];return e&&e.get?e.get(this):A.propHooks._default.get(this)},"run":function(e){var t,i=A.propHooks[this.prop];if(this.options.duration){this.pos=t=S.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration)}else{this.pos=t=e}this.now=(this.end-this.start)*t+this.start;if(this.options.step){this.options.step.call(this.elem,this.now,this)}if(i&&i.set){i.set(this)}else{A.propHooks._default.set(this)}return this}};A.prototype.init.prototype=A.prototype;A.propHooks={"_default":{"get":function(e){var t;if(e.elem.nodeType!==1||e.elem[e.prop]!=null&&e.elem.style[e.prop]==null){return e.elem[e.prop]}t=S.css(e.elem,e.prop,"");return!t||t==="auto"?0:t},"set":function(e){if(S.fx.step[e.prop]){S.fx.step[e.prop](e)}else if(e.elem.nodeType===1&&(e.elem.style[S.cssProps[e.prop]]!=null||S.cssHooks[e.prop])){S.style(e.elem,e.prop,e.now+e.unit)}else{e.elem[e.prop]=e.now}}}};A.propHooks.scrollTop=A.propHooks.scrollLeft={"set":function(e){if(e.elem.nodeType&&e.elem.parentNode){e.elem[e.prop]=e.now}}};S.easing={"linear":function(e){return e},"swing":function(e){return.5-Math.cos(e*Math.PI)/2},"_default":"swing"};S.fx=A.prototype.init;S.fx.step={};var O,Xe,Ye=/^(?:toggle|show|hide)$/,Qe=/queueHooks$/;function Je(){x.setTimeout(function(){O=undefined});return O=S.now()}function et(e,t){var i,n=0,r={"height":e};t=t?1:0;for(;n<4;n+=2-t){i=l[n];r["margin"+i]=r["padding"+i]=e}if(t){r.opacity=r.width=e}return r}function tt(e,t,i){var n,r=(L.tweeners[t]||[]).concat(L.tweeners["*"]),o=0,a=r.length;for(;o<a;o++){if(n=r[o].call(i,t,e)){return n}}}function it(t,e,i){var n,r,o,a,s,l,u,c,d=this,h={},f=t.style,p=t.nodeType&&y(t),g=m.get(t,"fxshow");if(!i.queue){s=S._queueHooks(t,"fx");if(s.unqueued==null){s.unqueued=0;l=s.empty.fire;s.empty.fire=function(){if(!s.unqueued){l()}}}s.unqueued++;d.always(function(){d.always(function(){s.unqueued--;if(!S.queue(t,"fx").length){s.empty.fire()}})})}if(t.nodeType===1&&("height"in e||"width"in e)){i.overflow=[f.overflow,f.overflowX,f.overflowY];u=S.css(t,"display");c=u==="none"?m.get(t,"olddisplay")||De(t.nodeName):u;if(c==="inline"&&S.css(t,"float")==="none"){f.display="inline-block"}}if(i.overflow){f.overflow="hidden";d.always(function(){f.overflow=i.overflow[0];f.overflowX=i.overflow[1];f.overflowY=i.overflow[2]})}for(n in e){r=e[n];if(Ye.exec(r)){delete e[n];o=o||r==="toggle";if(r===(p?"hide":"show")){if(r==="show"&&g&&g[n]!==undefined){p=true}else{continue}}h[n]=g&&g[n]||S.style(t,n)}else{u=undefined}}if(!S.isEmptyObject(h)){if(g){if("hidden"in g){p=g.hidden}}else{g=m.access(t,"fxshow",{})}if(o){g.hidden=!p}if(p){S(t).show()}else{d.done(function(){S(t).hide()})}d.done(function(){var e;m.remove(t,"fxshow");for(e in h){S.style(t,e,h[e])}});for(n in h){a=tt(p?g[n]:0,n,d);if(!(n in g)){g[n]=a.start;if(p){a.end=a.start;a.start=n==="width"||n==="height"?1:0}}}}else if((u==="none"?De(t.nodeName):u)==="inline"){f.display=u}}function nt(e,t){var i,n,r,o,a;for(i in e){n=S.camelCase(i);r=t[n];o=e[i];if(S.isArray(o)){r=o[1];o=e[i]=o[0]}if(i!==n){e[n]=o;delete e[i]}a=S.cssHooks[n];if(a&&"expand"in a){o=a.expand(o);delete e[n];for(i in o){if(!(i in e)){e[i]=o[i];t[i]=r}}}else{t[n]=r}}}function L(a,e,t){var i,s,n=0,r=L.prefilters.length,l=S.Deferred().always(function(){delete o.elem}),o=function(){if(s){return false}var e=O||Je(),t=Math.max(0,u.startTime+u.duration-e),i=t/u.duration||0,n=1-i,r=0,o=u.tweens.length;for(;r<o;r++){u.tweens[r].run(n)}l.notifyWith(a,[u,n,t]);if(n<1&&o){return t}else{l.resolveWith(a,[u]);return false}},u=l.promise({"elem":a,"props":S.extend({},e),"opts":S.extend(true,{"specialEasing":{},"easing":S.easing._default},t),"originalProperties":e,"originalOptions":t,"startTime":O||Je(),"duration":t.duration,"tweens":[],"createTween":function(e,t){var i=S.Tween(a,u.opts,e,t,u.opts.specialEasing[e]||u.opts.easing);u.tweens.push(i);return i},"stop":function(e){var t=0,i=e?u.tweens.length:0;if(s){return this}s=true;for(;t<i;t++){u.tweens[t].run(1)}if(e){l.notifyWith(a,[u,1,0]);l.resolveWith(a,[u,e])}else{l.rejectWith(a,[u,e])}return this}}),c=u.props;nt(c,u.opts.specialEasing);for(;n<r;n++){i=L.prefilters[n].call(u,a,c,u.opts);if(i){if(S.isFunction(i.stop)){S._queueHooks(u.elem,u.opts.queue).stop=S.proxy(i.stop,i)}return i}}S.map(c,tt,u);if(S.isFunction(u.opts.start)){u.opts.start.call(a,u)}S.fx.timer(S.extend(o,{"elem":a,"anim":u,"queue":u.opts.queue}));return u.progress(u.opts.progress).done(u.opts.done,u.opts.complete).fail(u.opts.fail).always(u.opts.always)}S.Animation=S.extend(L,{"tweeners":{"*":[function(e,t){var i=this.createTween(e,t);le(i.elem,e,f.exec(t),i);return i}]},"tweener":function(e,t){if(S.isFunction(e)){t=e;e=["*"]}else{e=e.match(k)}var i,n=0,r=e.length;for(;n<r;n++){i=e[n];L.tweeners[i]=L.tweeners[i]||[];L.tweeners[i].unshift(t)}},"prefilters":[it],"prefilter":function(e,t){if(t){L.prefilters.unshift(e)}else{L.prefilters.push(e)}}});S.speed=function(e,t,i){var n=e&&typeof e==="object"?S.extend({},e):{"complete":i||!i&&t||S.isFunction(e)&&e,"duration":e,"easing":i&&t||t&&!S.isFunction(t)&&t};n.duration=S.fx.off?0:typeof n.duration==="number"?n.duration:n.duration in S.fx.speeds?S.fx.speeds[n.duration]:S.fx.speeds._default;if(n.queue==null||n.queue===true){n.queue="fx"}n.old=n.complete;n.complete=function(){if(S.isFunction(n.old)){n.old.call(this)}if(n.queue){S.dequeue(this,n.queue)}};return n};S.fn.extend({"fadeTo":function(e,t,i,n){return this.filter(y).css("opacity",0).show().end().animate({"opacity":t},e,i,n)},"animate":function(t,e,i,n){var r=S.isEmptyObject(t),o=S.speed(e,i,n),a=function(){var e=L(this,S.extend({},t),o);if(r||m.get(this,"finish")){e.stop(true)}};a.finish=a;return r||o.queue===false?this.each(a):this.queue(o.queue,a)},"stop":function(r,e,o){var a=function(e){var t=e.stop;delete e.stop;t(o)};if(typeof r!=="string"){o=e;e=r;r=undefined}if(e&&r!==false){this.queue(r||"fx",[])}return this.each(function(){var e=true,t=r!=null&&r+"queueHooks",i=S.timers,n=m.get(this);if(t){if(n[t]&&n[t].stop){a(n[t])}}else{for(t in n){if(n[t]&&n[t].stop&&Qe.test(t)){a(n[t])}}}for(t=i.length;t--;){if(i[t].elem===this&&(r==null||i[t].queue===r)){i[t].anim.stop(o);e=false;i.splice(t,1)}}if(e||!o){S.dequeue(this,r)}})},"finish":function(a){if(a!==false){a=a||"fx"}return this.each(function(){var e,t=m.get(this),i=t[a+"queue"],n=t[a+"queueHooks"],r=S.timers,o=i?i.length:0;t.finish=true;S.queue(this,a,[]);if(n&&n.stop){n.stop.call(this,true)}for(e=r.length;e--;){if(r[e].elem===this&&r[e].queue===a){r[e].anim.stop(true);r.splice(e,1)}}for(e=0;e<o;e++){if(i[e]&&i[e].finish){i[e].finish.call(this)}}delete t.finish})}});S.each(["toggle","show","hide"],function(e,n){var r=S.fn[n];S.fn[n]=function(e,t,i){return e==null||typeof e==="boolean"?r.apply(this,arguments):this.animate(et(n,true),e,t,i)}});S.each({"slideDown":et("show"),"slideUp":et("hide"),"slideToggle":et("toggle"),"fadeIn":{"opacity":"show"},"fadeOut":{"opacity":"hide"},"fadeToggle":{"opacity":"toggle"}},function(e,n){S.fn[e]=function(e,t,i){return this.animate(n,e,t,i)}});S.timers=[];S.fx.tick=function(){var e,t=0,i=S.timers;O=S.now();for(;t<i.length;t++){e=i[t];if(!e()&&i[t]===e){i.splice(t--,1)}}if(!i.length){S.fx.stop()}O=undefined};S.fx.timer=function(e){S.timers.push(e);if(e()){S.fx.start()}else{S.timers.pop()}};S.fx.interval=13;S.fx.start=function(){if(!Xe){Xe=x.setInterval(S.fx.tick,S.fx.interval)}};S.fx.stop=function(){x.clearInterval(Xe);Xe=null};S.fx.speeds={"slow":600,"fast":200,"_default":400};S.fn.delay=function(n,e){n=S.fx?S.fx.speeds[n]||n:n;e=e||"fx";return this.queue(e,function(e,t){var i=x.setTimeout(e,n);t.stop=function(){x.clearTimeout(i)}})};(function(){var e=T.createElement("input"),t=T.createElement("select"),i=t.appendChild(T.createElement("option"));e.type="checkbox";g.checkOn=e.value!=="";g.optSelected=i.selected;t.disabled=true;g.optDisabled=!i.disabled;e=T.createElement("input");e.value="t";e.type="radio";g.radioValue=e.value==="t"})();var rt,P=S.expr.attrHandle;S.fn.extend({"attr":function(e,t){return d(this,S.attr,e,t,arguments.length>1)},"removeAttr":function(e){return this.each(function(){S.removeAttr(this,e)})}});S.extend({"attr":function(e,t,i){var n,r,o=e.nodeType;if(o===3||o===8||o===2){return}if(typeof e.getAttribute==="undefined"){return S.prop(e,t,i)}if(o!==1||!S.isXMLDoc(e)){t=t.toLowerCase();r=S.attrHooks[t]||(S.expr.match.bool.test(t)?rt:undefined)}if(i!==undefined){if(i===null){S.removeAttr(e,t);return}if(r&&"set"in r&&(n=r.set(e,i,t))!==undefined){return n}e.setAttribute(t,i+"");return i}if(r&&"get"in r&&(n=r.get(e,t))!==null){return n}n=S.find.attr(e,t);return n==null?undefined:n},"attrHooks":{"type":{"set":function(e,t){if(!g.radioValue&&t==="radio"&&S.nodeName(e,"input")){var i=e.value;e.setAttribute("type",t);if(i){e.value=i}return t}}}},"removeAttr":function(e,t){var i,n,r=0,o=t&&t.match(k);if(o&&e.nodeType===1){while(i=o[r++]){n=S.propFix[i]||i;if(S.expr.match.bool.test(i)){e[n]=false}e.removeAttribute(i)}}}});rt={"set":function(e,t,i){if(t===false){S.removeAttr(e,i)}else{e.setAttribute(i,i)}return i}};S.each(S.expr.match.bool.source.match(/\w+/g),function(e,t){var o=P[t]||S.find.attr;P[t]=function(e,t,i){var n,r;if(!i){r=P[t];P[t]=n;n=o(e,t,i)!=null?t.toLowerCase():null;P[t]=r}return n}});var ot=/^(?:input|select|textarea|button)$/i,at=/^(?:a|area)$/i;S.fn.extend({"prop":function(e,t){return d(this,S.prop,e,t,arguments.length>1)},"removeProp":function(e){return this.each(function(){delete this[S.propFix[e]||e]})}});S.extend({"prop":function(e,t,i){var n,r,o=e.nodeType;if(o===3||o===8||o===2){return}if(o!==1||!S.isXMLDoc(e)){t=S.propFix[t]||t;r=S.propHooks[t]}if(i!==undefined){if(r&&"set"in r&&(n=r.set(e,i,t))!==undefined){return n}return e[t]=i}if(r&&"get"in r&&(n=r.get(e,t))!==null){return n}return e[t]},"propHooks":{"tabIndex":{"get":function(e){var t=S.find.attr(e,"tabindex");return t?parseInt(t,10):ot.test(e.nodeName)||at.test(e.nodeName)&&e.href?0:-1}}},"propFix":{"for":"htmlFor","class":"className"}});if(!g.optSelected){S.propHooks.selected={"get":function(e){var t=e.parentNode;if(t&&t.parentNode){t.parentNode.selectedIndex}return null},"set":function(e){var t=e.parentNode;if(t){t.selectedIndex;if(t.parentNode){t.parentNode.selectedIndex}}}}}S.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){S.propFix[this.toLowerCase()]=this});var st=/[\t\r\n\f]/g;function I(e){return e.getAttribute&&e.getAttribute("class")||""}S.fn.extend({"addClass":function(t){var e,i,n,r,o,a,s,l=0;if(S.isFunction(t)){return this.each(function(e){S(this).addClass(t.call(this,e,I(this)))})}if(typeof t==="string"&&t){e=t.match(k)||[];while(i=this[l++]){r=I(i);n=i.nodeType===1&&(" "+r+" ").replace(st," ");if(n){a=0;while(o=e[a++]){if(n.indexOf(" "+o+" ")<0){n+=o+" "}}s=S.trim(n);if(r!==s){i.setAttribute("class",s)}}}}return this},"removeClass":function(t){var e,i,n,r,o,a,s,l=0;if(S.isFunction(t)){return this.each(function(e){S(this).removeClass(t.call(this,e,I(this)))})}if(!arguments.length){return this.attr("class","")}if(typeof t==="string"&&t){e=t.match(k)||[];while(i=this[l++]){r=I(i);n=i.nodeType===1&&(" "+r+" ").replace(st," ");if(n){a=0;while(o=e[a++]){while(n.indexOf(" "+o+" ")>-1){n=n.replace(" "+o+" "," ")}}s=S.trim(n);if(r!==s){i.setAttribute("class",s)}}}}return this},"toggleClass":function(r,t){var o=typeof r;if(typeof t==="boolean"&&o==="string"){return t?this.addClass(r):this.removeClass(r)}if(S.isFunction(r)){return this.each(function(e){S(this).toggleClass(r.call(this,e,I(this),t),t)})}return this.each(function(){var e,t,i,n;if(o==="string"){t=0;i=S(this);n=r.match(k)||[];while(e=n[t++]){if(i.hasClass(e)){i.removeClass(e)}else{i.addClass(e)}}}else if(r===undefined||o==="boolean"){e=I(this);if(e){m.set(this,"__className__",e)}if(this.setAttribute){this.setAttribute("class",e||r===false?"":m.get(this,"__className__")||"")}}})},"hasClass":function(e){var t,i,n=0;t=" "+e+" ";while(i=this[n++]){if(i.nodeType===1&&(" "+I(i)+" ").replace(st," ").indexOf(t)>-1){return true}}return false}});var lt=/\r/g,ut=/[\x20\t\r\n\f]+/g;S.fn.extend({"val":function(i){var n,e,r,t=this[0];if(!arguments.length){if(t){n=S.valHooks[t.type]||S.valHooks[t.nodeName.toLowerCase()];if(n&&"get"in n&&(e=n.get(t,"value"))!==undefined){return e}e=t.value;return typeof e==="string"?e.replace(lt,""):e==null?"":e}return}r=S.isFunction(i);return this.each(function(e){var t;if(this.nodeType!==1){return}if(r){t=i.call(this,e,S(this).val())}else{t=i}if(t==null){t=""}else if(typeof t==="number"){t+=""}else if(S.isArray(t)){t=S.map(t,function(e){return e==null?"":e+""})}n=S.valHooks[this.type]||S.valHooks[this.nodeName.toLowerCase()];if(!n||!("set"in n)||n.set(this,t,"value")===undefined){this.value=t}})}});S.extend({"valHooks":{"option":{"get":function(e){var t=S.find.attr(e,"value");return t!=null?t:S.trim(S.text(e)).replace(ut," ")}},"select":{"get":function(e){var t,i,n=e.options,r=e.selectedIndex,o=e.type==="select-one"||r<0,a=o?null:[],s=o?r+1:n.length,l=r<0?s:o?r:0;for(;l<s;l++){i=n[l];if((i.selected||l===r)&&(g.optDisabled?!i.disabled:i.getAttribute("disabled")===null)&&(!i.parentNode.disabled||!S.nodeName(i.parentNode,"optgroup"))){t=S(i).val();if(o){return t}a.push(t)}}return a},"set":function(e,t){var i,n,r=e.options,o=S.makeArray(t),a=r.length;while(a--){n=r[a];if(n.selected=S.inArray(S.valHooks.option.get(n),o)>-1){i=true}}if(!i){e.selectedIndex=-1}return o}}}});S.each(["radio","checkbox"],function(){S.valHooks[this]={"set":function(e,t){if(S.isArray(t)){return e.checked=S.inArray(S(e).val(),t)>-1}}};if(!g.checkOn){S.valHooks[this].get=function(e){return e.getAttribute("value")===null?"on":e.value}}});var ct=/^(?:focusinfocus|focusoutblur)$/;S.extend(S.event,{"trigger":function(e,t,i,n){var r,o,a,s,l,u,c,d=[i||T],h=p.call(e,"type")?e.type:e,f=p.call(e,"namespace")?e.namespace.split("."):[];o=a=i=i||T;if(i.nodeType===3||i.nodeType===8){return}if(ct.test(h+S.event.triggered)){return}if(h.indexOf(".")>-1){f=h.split(".");h=f.shift();f.sort()}l=h.indexOf(":")<0&&"on"+h;e=e[S.expando]?e:new S.Event(h,typeof e==="object"&&e);e.isTrigger=n?2:3;e.namespace=f.join(".");e.rnamespace=e.namespace?new RegExp("(^|\\.)"+f.join("\\.(?:.*\\.|)")+"(\\.|$)"):null;e.result=undefined;if(!e.target){e.target=i}t=t==null?[e]:S.makeArray(t,[e]);c=S.event.special[h]||{};if(!n&&c.trigger&&c.trigger.apply(i,t)===false){return}if(!n&&!c.noBubble&&!S.isWindow(i)){s=c.delegateType||h;if(!ct.test(s+h)){o=o.parentNode}for(;o;o=o.parentNode){d.push(o);a=o}if(a===(i.ownerDocument||T)){d.push(a.defaultView||a.parentWindow||x)}}r=0;while((o=d[r++])&&!e.isPropagationStopped()){e.type=r>1?s:c.bindType||h;u=(m.get(o,"events")||{})[e.type]&&m.get(o,"handle");if(u){u.apply(o,t)}u=l&&o[l];if(u&&u.apply&&v(o)){e.result=u.apply(o,t);if(e.result===false){e.preventDefault()}}}e.type=h;if(!n&&!e.isDefaultPrevented()){if((!c._default||c._default.apply(d.pop(),t)===false)&&v(i)){if(l&&S.isFunction(i[h])&&!S.isWindow(i)){a=i[l];if(a){i[l]=null}S.event.triggered=h;i[h]();S.event.triggered=undefined;if(a){i[l]=a}}}}return e.result},"simulate":function(e,t,i){var n=S.extend(new S.Event,i,{"type":e,"isSimulated":true});S.event.trigger(n,null,t)}});S.fn.extend({"trigger":function(e,t){return this.each(function(){S.event.trigger(e,t,this)})},"triggerHandler":function(e,t){var i=this[0];if(i){return S.event.trigger(e,t,i,true)}}});S.each(("blur focus focusin focusout load resize scroll unload click dblclick "+"mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave "+"change select submit keydown keypress keyup error contextmenu").split(" "),function(e,i){S.fn[i]=function(e,t){return arguments.length>0?this.on(i,null,e,t):this.trigger(i)}});S.fn.extend({"hover":function(e,t){return this.mouseenter(e).mouseleave(t||e)}});g.focusin="onfocusin"in x;if(!g.focusin){S.each({"focus":"focusin","blur":"focusout"},function(i,n){var r=function(e){S.event.simulate(n,e.target,S.event.fix(e))};S.event.special[n]={"setup":function(){var e=this.ownerDocument||this,t=m.access(e,n);if(!t){e.addEventListener(i,r,true)}m.access(e,n,(t||0)+1)},"teardown":function(){var e=this.ownerDocument||this,t=m.access(e,n)-1;if(!t){e.removeEventListener(i,r,true);m.remove(e,n)}else{m.access(e,n,t)}}}})}var D=x.location;var dt=S.now();var ht=/\?/;S.parseJSON=function(e){return JSON.parse(e+"")};S.parseXML=function(e){var t;if(!e||typeof e!=="string"){return null}try{t=(new x.DOMParser).parseFromString(e,"text/xml")}catch(e){t=undefined}if(!t||t.getElementsByTagName("parsererror").length){S.error("Invalid XML: "+e)}return t};var ft=/#.*$/,pt=/([?&])_=[^&]*/,gt=/^(.*?):[ \t]*([^\r\n]*)$/gm,vt=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,mt=/^(?:GET|HEAD)$/,yt=/^\/\//,bt={},_t={},wt="*/".concat("*"),Et=T.createElement("a");Et.href=D.href;function xt(o){return function(e,t){if(typeof e!=="string"){t=e;e="*"}var i,n=0,r=e.toLowerCase().match(k)||[];if(S.isFunction(t)){while(i=r[n++]){if(i[0]==="+"){i=i.slice(1)||"*";(o[i]=o[i]||[]).unshift(t)}else{(o[i]=o[i]||[]).push(t)}}}}}function Tt(t,r,o,a){var s={},l=t===_t;function u(e){var n;s[e]=true;S.each(t[e]||[],function(e,t){var i=t(r,o,a);if(typeof i==="string"&&!l&&!s[i]){r.dataTypes.unshift(i);u(i);return false}else if(l){return!(n=i)}});return n}return u(r.dataTypes[0])||!s["*"]&&u("*")}function St(e,t){var i,n,r=S.ajaxSettings.flatOptions||{};for(i in t){if(t[i]!==undefined){(r[i]?e:n||(n={}))[i]=t[i]}}if(n){S.extend(true,e,n)}return e}function kt(e,t,i){var n,r,o,a,s=e.contents,l=e.dataTypes;while(l[0]==="*"){l.shift();if(n===undefined){n=e.mimeType||t.getResponseHeader("Content-Type")}}if(n){for(r in s){if(s[r]&&s[r].test(n)){l.unshift(r);break}}}if(l[0]in i){o=l[0]}else{for(r in i){if(!l[0]||e.converters[r+" "+l[0]]){o=r;break}if(!a){a=r}}o=o||a}if(o){if(o!==l[0]){l.unshift(o)}return i[o]}}function Rt(e,t,i,n){var r,o,a,s,l,u={},c=e.dataTypes.slice();if(c[1]){for(a in e.converters){u[a.toLowerCase()]=e.converters[a]}}o=c.shift();while(o){if(e.responseFields[o]){i[e.responseFields[o]]=t}if(!l&&n&&e.dataFilter){t=e.dataFilter(t,e.dataType)}l=o;o=c.shift();if(o){if(o==="*"){o=l}else if(l!=="*"&&l!==o){a=u[l+" "+o]||u["* "+o];if(!a){for(r in u){s=r.split(" ");if(s[1]===o){a=u[l+" "+s[0]]||u["* "+s[0]];if(a){if(a===true){a=u[r]}else if(u[r]!==true){o=s[0];c.unshift(s[1])}break}}}}if(a!==true){if(a&&e.throws){t=a(t)}else{try{t=a(t)}catch(e){return{"state":"parsererror","error":a?e:"No conversion from "+l+" to "+o}}}}}}}return{"state":"success","data":t}}S.extend({"active":0,"lastModified":{},"etag":{},"ajaxSettings":{"url":D.href,"type":"GET","isLocal":vt.test(D.protocol),"global":true,"processData":true,"async":true,"contentType":"application/x-www-form-urlencoded; charset=UTF-8","accepts":{"*":wt,"text":"text/plain","html":"text/html","xml":"application/xml, text/xml","json":"application/json, text/javascript"},"contents":{"xml":/\bxml\b/,"html":/\bhtml/,"json":/\bjson\b/},"responseFields":{"xml":"responseXML","text":"responseText","json":"responseJSON"},"converters":{"* text":String,"text html":true,"text json":S.parseJSON,"text xml":S.parseXML},"flatOptions":{"url":true,"context":true}},"ajaxSetup":function(e,t){return t?St(St(e,S.ajaxSettings),t):St(S.ajaxSettings,e)},"ajaxPrefilter":xt(bt),"ajaxTransport":xt(_t),"ajax":function(e,t){if(typeof e==="object"){t=e;e=undefined}t=t||{};var c,d,h,i,f,n,p,r,g=S.ajaxSetup({},t),v=g.context||g,m=g.context&&(v.nodeType||v.jquery)?S(v):S.event,y=S.Deferred(),b=S.Callbacks("once memory"),_=g.statusCode||{},o={},a={},w=0,s="canceled",E={"readyState":0,"getResponseHeader":function(e){var t;if(w===2){if(!i){i={};while(t=gt.exec(h)){i[t[1].toLowerCase()]=t[2]}}t=i[e.toLowerCase()]}return t==null?null:t},"getAllResponseHeaders":function(){return w===2?h:null},"setRequestHeader":function(e,t){var i=e.toLowerCase();if(!w){e=a[i]=a[i]||e;o[e]=t}return this},"overrideMimeType":function(e){if(!w){g.mimeType=e}return this},"statusCode":function(e){var t;if(e){if(w<2){for(t in e){_[t]=[_[t],e[t]]}}else{E.always(e[E.status])}}return this},"abort":function(e){var t=e||s;if(c){c.abort(t)}l(0,t);return this}};y.promise(E).complete=b.add;E.success=E.done;E.error=E.fail;g.url=((e||g.url||D.href)+"").replace(ft,"").replace(yt,D.protocol+"//");g.type=t.method||t.type||g.method||g.type;g.dataTypes=S.trim(g.dataType||"*").toLowerCase().match(k)||[""];if(g.crossDomain==null){n=T.createElement("a");try{n.href=g.url;n.href=n.href;g.crossDomain=Et.protocol+"//"+Et.host!==n.protocol+"//"+n.host}catch(e){g.crossDomain=true}}if(g.data&&g.processData&&typeof g.data!=="string"){g.data=S.param(g.data,g.traditional)}Tt(bt,g,t,E);if(w===2){return E}p=S.event&&g.global;if(p&&S.active++===0){S.event.trigger("ajaxStart")}g.type=g.type.toUpperCase();g.hasContent=!mt.test(g.type);d=g.url;if(!g.hasContent){if(g.data){d=g.url+=(ht.test(d)?"&":"?")+g.data;delete g.data}if(g.cache===false){g.url=pt.test(d)?d.replace(pt,"$1_="+dt++):d+(ht.test(d)?"&":"?")+"_="+dt++}}if(g.ifModified){if(S.lastModified[d]){E.setRequestHeader("If-Modified-Since",S.lastModified[d])}if(S.etag[d]){E.setRequestHeader("If-None-Match",S.etag[d])}}if(g.data&&g.hasContent&&g.contentType!==false||t.contentType){E.setRequestHeader("Content-Type",g.contentType)}E.setRequestHeader("Accept",g.dataTypes[0]&&g.accepts[g.dataTypes[0]]?g.accepts[g.dataTypes[0]]+(g.dataTypes[0]!=="*"?", "+wt+"; q=0.01":""):g.accepts["*"]);for(r in g.headers){E.setRequestHeader(r,g.headers[r])}if(g.beforeSend&&(g.beforeSend.call(v,E,g)===false||w===2)){return E.abort()}s="abort";for(r in{"success":1,"error":1,"complete":1}){E[r](g[r])}c=Tt(_t,g,t,E);if(!c){l(-1,"No Transport")}else{E.readyState=1;if(p){m.trigger("ajaxSend",[E,g])}if(w===2){return E}if(g.async&&g.timeout>0){f=x.setTimeout(function(){E.abort("timeout")},g.timeout)}try{w=1;c.send(o,l)}catch(e){if(w<2){l(-1,e)}else{throw e}}}function l(e,t,i,n){var r,o,a,s,l,u=t;if(w===2){return}w=2;if(f){x.clearTimeout(f)}c=undefined;h=n||"";E.readyState=e>0?4:0;r=e>=200&&e<300||e===304;if(i){s=kt(g,E,i)}s=Rt(g,s,E,r);if(r){if(g.ifModified){l=E.getResponseHeader("Last-Modified");if(l){S.lastModified[d]=l}l=E.getResponseHeader("etag");if(l){S.etag[d]=l}}if(e===204||g.type==="HEAD"){u="nocontent"}else if(e===304){u="notmodified"}else{u=s.state;o=s.data;a=s.error;r=!a}}else{a=u;if(e||!u){u="error";if(e<0){e=0}}}E.status=e;E.statusText=(t||u)+"";if(r){y.resolveWith(v,[o,u,E])}else{y.rejectWith(v,[E,u,a])}E.statusCode(_);_=undefined;if(p){m.trigger(r?"ajaxSuccess":"ajaxError",[E,g,r?o:a])}b.fireWith(v,[E,u]);if(p){m.trigger("ajaxComplete",[E,g]);if(!--S.active){S.event.trigger("ajaxStop")}}}return E},"getJSON":function(e,t,i){return S.get(e,t,i,"json")},"getScript":function(e,t){return S.get(e,undefined,t,"script")}});S.each(["get","post"],function(e,r){S[r]=function(e,t,i,n){if(S.isFunction(t)){n=n||i;i=t;t=undefined}return S.ajax(S.extend({"url":e,"type":r,"dataType":n,"data":t,"success":i},S.isPlainObject(e)&&e))}});S._evalUrl=function(e){return S.ajax({"url":e,"type":"GET","dataType":"script","async":false,"global":false,"throws":true})};S.fn.extend({"wrapAll":function(t){var e;if(S.isFunction(t)){return this.each(function(e){S(this).wrapAll(t.call(this,e))})}if(this[0]){e=S(t,this[0].ownerDocument).eq(0).clone(true);if(this[0].parentNode){e.insertBefore(this[0])}e.map(function(){var e=this;while(e.firstElementChild){e=e.firstElementChild}return e}).append(this)}return this},"wrapInner":function(i){if(S.isFunction(i)){return this.each(function(e){S(this).wrapInner(i.call(this,e))})}return this.each(function(){var e=S(this),t=e.contents();if(t.length){t.wrapAll(i)}else{e.append(i)}})},"wrap":function(t){var i=S.isFunction(t);return this.each(function(e){S(this).wrapAll(i?t.call(this,e):t)})},"unwrap":function(){return this.parent().each(function(){if(!S.nodeName(this,"body")){S(this).replaceWith(this.childNodes)}}).end()}});S.expr.filters.hidden=function(e){return!S.expr.filters.visible(e)};S.expr.filters.visible=function(e){return e.offsetWidth>0||e.offsetHeight>0||e.getClientRects().length>0};var Ct=/%20/g,At=/\[\]$/,Ot=/\r?\n/g,Lt=/^(?:submit|button|image|reset|file)$/i,Pt=/^(?:input|select|textarea|keygen)/i;function It(i,e,n,r){var t;if(S.isArray(e)){S.each(e,function(e,t){if(n||At.test(i)){r(i,t)}else{It(i+"["+(typeof t==="object"&&t!=null?e:"")+"]",t,n,r)}})}else if(!n&&S.type(e)==="object"){for(t in e){It(i+"["+t+"]",e[t],n,r)}}else{r(i,e)}}S.param=function(e,t){var i,n=[],r=function(e,t){t=S.isFunction(t)?t():t==null?"":t;n[n.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};if(t===undefined){t=S.ajaxSettings&&S.ajaxSettings.traditional}if(S.isArray(e)||e.jquery&&!S.isPlainObject(e)){S.each(e,function(){r(this.name,this.value)})}else{for(i in e){It(i,e[i],t,r)}}return n.join("&").replace(Ct,"+")};S.fn.extend({"serialize":function(){return S.param(this.serializeArray())},"serializeArray":function(){return this.map(function(){var e=S.prop(this,"elements");return e?S.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!S(this).is(":disabled")&&Pt.test(this.nodeName)&&!Lt.test(e)&&(this.checked||!ue.test(e))}).map(function(e,t){var i=S(this).val();return i==null?null:S.isArray(i)?S.map(i,function(e){return{"name":t.name,"value":e.replace(Ot,"\r\n")}}):{"name":t.name,"value":i.replace(Ot,"\r\n")}}).get()}});S.ajaxSettings.xhr=function(){try{return new x.XMLHttpRequest}catch(e){}};var Dt={"0":200,"1223":204},M=S.ajaxSettings.xhr();g.cors=!!M&&"withCredentials"in M;g.ajax=M=!!M;S.ajaxTransport(function(r){var o,a;if(g.cors||M&&!r.crossDomain){return{"send":function(e,t){var i,n=r.xhr();n.open(r.type,r.url,r.async,r.username,r.password);if(r.xhrFields){for(i in r.xhrFields){n[i]=r.xhrFields[i]}}if(r.mimeType&&n.overrideMimeType){n.overrideMimeType(r.mimeType)}if(!r.crossDomain&&!e["X-Requested-With"]){e["X-Requested-With"]="XMLHttpRequest"}for(i in e){n.setRequestHeader(i,e[i])}o=function(e){return function(){if(o){o=a=n.onload=n.onerror=n.onabort=n.onreadystatechange=null;if(e==="abort"){n.abort()}else if(e==="error"){if(typeof n.status!=="number"){t(0,"error")}else{t(n.status,n.statusText)}}else{t(Dt[n.status]||n.status,n.statusText,(n.responseType||"text")!=="text"||typeof n.responseText!=="string"?{"binary":n.response}:{"text":n.responseText},n.getAllResponseHeaders())}}}};n.onload=o();a=n.onerror=o("error");if(n.onabort!==undefined){n.onabort=a}else{n.onreadystatechange=function(){if(n.readyState===4){x.setTimeout(function(){if(o){a()}})}}}o=o("abort");try{n.send(r.hasContent&&r.data||null)}catch(e){if(o){throw e}}},"abort":function(){if(o){o()}}}}});S.ajaxSetup({"accepts":{"script":"text/javascript, application/javascript, "+"application/ecmascript, application/x-ecmascript"},"contents":{"script":/\b(?:java|ecma)script\b/},"converters":{"text script":function(e){S.globalEval(e);return e}}});S.ajaxPrefilter("script",function(e){if(e.cache===undefined){e.cache=false}if(e.crossDomain){e.type="GET"}});S.ajaxTransport("script",function(i){if(i.crossDomain){var n,r;return{"send":function(e,t){n=S("<script>").prop({"charset":i.scriptCharset,"src":i.url}).on("load error",r=function(e){n.remove();r=null;if(e){t(e.type==="error"?404:200,e.type)}});T.head.appendChild(n[0])},"abort":function(){if(r){r()}}}}});var Mt=[],Bt=/(=)\?(?=&|$)|\?\?/;S.ajaxSetup({"jsonp":"callback","jsonpCallback":function(){var e=Mt.pop()||S.expando+"_"+dt++;this[e]=true;return e}});S.ajaxPrefilter("json jsonp",function(e,t,i){var n,r,o,a=e.jsonp!==false&&(Bt.test(e.url)?"url":typeof e.data==="string"&&(e.contentType||"").indexOf("application/x-www-form-urlencoded")===0&&Bt.test(e.data)&&"data");if(a||e.dataTypes[0]==="jsonp"){n=e.jsonpCallback=S.isFunction(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback;if(a){e[a]=e[a].replace(Bt,"$1"+n)}else if(e.jsonp!==false){e.url+=(ht.test(e.url)?"&":"?")+e.jsonp+"="+n}e.converters["script json"]=function(){if(!o){S.error(n+" was not called")}return o[0]};e.dataTypes[0]="json";r=x[n];x[n]=function(){o=arguments};i.always(function(){if(r===undefined){S(x).removeProp(n)}else{x[n]=r}if(e[n]){e.jsonpCallback=t.jsonpCallback;Mt.push(n)}if(o&&S.isFunction(r)){r(o[0])}o=r=undefined});return"script"}});S.parseHTML=function(e,t,i){if(!e||typeof e!=="string"){return null}if(typeof t==="boolean"){i=t;t=false}t=t||T;var n=K.exec(e),r=!i&&[];if(n){return[t.createElement(n[1])]}n=pe([e],t,r);if(r&&r.length){S(r).remove()}return S.merge([],n.childNodes)};var Ft=S.fn.load;S.fn.load=function(e,t,i){if(typeof e!=="string"&&Ft){return Ft.apply(this,arguments)}var n,r,o,a=this,s=e.indexOf(" ");if(s>-1){n=S.trim(e.slice(s));e=e.slice(0,s)}if(S.isFunction(t)){i=t;t=undefined}else if(t&&typeof t==="object"){r="POST"}if(a.length>0){S.ajax({"url":e,"type":r||"GET","dataType":"html","data":t}).done(function(e){o=arguments;a.html(n?S("<div>").append(S.parseHTML(e)).find(n):e)}).always(i&&function(e,t){a.each(function(){i.apply(this,o||[e.responseText,t,e])})})}return this};S.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){S.fn[t]=function(e){return this.on(t,e)}});S.expr.filters.animated=function(t){return S.grep(S.timers,function(e){return t===e.elem}).length};function Nt(e){return S.isWindow(e)?e:e.nodeType===9&&e.defaultView}S.offset={"setOffset":function(e,t,i){var n,r,o,a,s,l,u,c=S.css(e,"position"),d=S(e),h={};if(c==="static"){e.style.position="relative"}s=d.offset();o=S.css(e,"top");l=S.css(e,"left");u=(c==="absolute"||c==="fixed")&&(o+l).indexOf("auto")>-1;if(u){n=d.position();a=n.top;r=n.left}else{a=parseFloat(o)||0;r=parseFloat(l)||0}if(S.isFunction(t)){t=t.call(e,i,S.extend({},s))}if(t.top!=null){h.top=t.top-s.top+a}if(t.left!=null){h.left=t.left-s.left+r}if("using"in t){t.using.call(e,h)}else{d.css(h)}}};S.fn.extend({"offset":function(t){if(arguments.length){return t===undefined?this:this.each(function(e){S.offset.setOffset(this,t,e)})}var e,i,n=this[0],r={"top":0,"left":0},o=n&&n.ownerDocument;if(!o){return}e=o.documentElement;if(!S.contains(e,n)){return r}r=n.getBoundingClientRect();i=Nt(o);return{"top":r.top+i.pageYOffset-e.clientTop,"left":r.left+i.pageXOffset-e.clientLeft}},"position":function(){if(!this[0]){return}var e,t,i=this[0],n={"top":0,"left":0};if(S.css(i,"position")==="fixed"){t=i.getBoundingClientRect()}else{e=this.offsetParent();t=this.offset();if(!S.nodeName(e[0],"html")){n=e.offset()}n.top+=S.css(e[0],"borderTopWidth",true);n.left+=S.css(e[0],"borderLeftWidth",true)}return{"top":t.top-n.top-S.css(i,"marginTop",true),"left":t.left-n.left-S.css(i,"marginLeft",true)}},"offsetParent":function(){return this.map(function(){var e=this.offsetParent;while(e&&S.css(e,"position")==="static"){e=e.offsetParent}return e||R})}});S.each({"scrollLeft":"pageXOffset","scrollTop":"pageYOffset"},function(t,r){var o="pageYOffset"===r;S.fn[t]=function(e){return d(this,function(e,t,i){var n=Nt(e);if(i===undefined){return n?n[r]:e[t]}if(n){n.scrollTo(!o?i:n.pageXOffset,o?i:n.pageYOffset)}else{e[t]=i}},t,e,arguments.length)}});S.each(["top","left"],function(e,i){S.cssHooks[i]=je(g.pixelPosition,function(e,t){if(t){t=C(e,i);return Be.test(t)?S(e).position()[i]+"px":t}})});S.each({"Height":"height","Width":"width"},function(o,a){S.each({"padding":"inner"+o,"content":a,"":"outer"+o},function(n,e){S.fn[e]=function(e,t){var i=arguments.length&&(n||typeof e!=="boolean"),r=n||(e===true||t===true?"margin":"border");return d(this,function(e,t,i){var n;if(S.isWindow(e)){return e.document.documentElement["client"+o]}if(e.nodeType===9){n=e.documentElement;return Math.max(e.body["scroll"+o],n["scroll"+o],e.body["offset"+o],n["offset"+o],n["client"+o])}return i===undefined?S.css(e,t,r):S.style(e,t,i,r)},a,i?e:undefined,i,null)}})});S.fn.extend({"bind":function(e,t,i){return this.on(e,null,t,i)},"unbind":function(e,t){return this.off(e,null,t)},"delegate":function(e,t,i,n){return this.on(t,e,i,n)},"undelegate":function(e,t,i){return arguments.length===1?this.off(e,"**"):this.off(t,e||"**",i)},"size":function(){return this.length}});S.fn.andSelf=S.fn.addBack;if(typeof define==="function"&&define.amd){define("jquery",[],function(){return S})}var jt=x.jQuery,Ut=x.$;S.noConflict=function(e){if(x.$===S){x.$=Ut}if(e&&x.jQuery===S){x.jQuery=jt}return S};if(!B){x.jQuery=x.$=S}return S});(function(){var e=this;var t=e._;var n=Array.prototype,i=Object.prototype,r=Function.prototype;var s=n.push,u=n.slice,c=n.concat,h=i.toString,o=i.hasOwnProperty;var a=Array.isArray,l=Object.keys,d=r.bind;var f=function(e){if(e instanceof f)return e;if(!(this instanceof f))return new f(e);this._wrapped=e};if(typeof exports!=="undefined"){if(typeof module!=="undefined"&&module.exports){exports=module.exports=f}exports._=f}else{e._=f}f.VERSION="1.7.0";var p=function(r,o,e){if(o===void 0)return r;switch(e==null?3:e){case 1:return function(e){return r.call(o,e)};case 2:return function(e,t){return r.call(o,e,t)};case 3:return function(e,t,i){return r.call(o,e,t,i)};case 4:return function(e,t,i,n){return r.call(o,e,t,i,n)}}return function(){return r.apply(o,arguments)}};f.iteratee=function(e,t,i){if(e==null)return f.identity;if(f.isFunction(e))return p(e,t,i);if(f.isObject(e))return f.matches(e);return f.property(e)};f.each=f.forEach=function(e,t,i){if(e==null)return e;t=p(t,i);var n,r=e.length;if(r===+r){for(n=0;n<r;n++){t(e[n],n,e)}}else{var o=f.keys(e);for(n=0,r=o.length;n<r;n++){t(e[o[n]],o[n],e)}}return e};f.map=f.collect=function(e,t,i){if(e==null)return[];t=f.iteratee(t,i);var n=e.length!==+e.length&&f.keys(e),r=(n||e).length,o=Array(r),a;for(var s=0;s<r;s++){a=n?n[s]:s;o[s]=t(e[a],a,e)}return o};var g="Reduce of empty array with no initial value";f.reduce=f.foldl=f.inject=function(e,t,i,n){if(e==null)e=[];t=p(t,n,4);var r=e.length!==+e.length&&f.keys(e),o=(r||e).length,a=0,s;if(arguments.length<3){if(!o)throw new TypeError(g);i=e[r?r[a++]:a++]}for(;a<o;a++){s=r?r[a]:a;i=t(i,e[s],s,e)}return i};f.reduceRight=f.foldr=function(e,t,i,n){if(e==null)e=[];t=p(t,n,4);var r=e.length!==+e.length&&f.keys(e),o=(r||e).length,a;if(arguments.length<3){if(!o)throw new TypeError(g);i=e[r?r[--o]:--o]}while(o--){a=r?r[o]:o;i=t(i,e[a],a,e)}return i};f.find=f.detect=function(e,n,t){var r;n=f.iteratee(n,t);f.some(e,function(e,t,i){if(n(e,t,i)){r=e;return true}});return r};f.filter=f.select=function(e,n,t){var r=[];if(e==null)return r;n=f.iteratee(n,t);f.each(e,function(e,t,i){if(n(e,t,i))r.push(e)});return r};f.reject=function(e,t,i){return f.filter(e,f.negate(f.iteratee(t)),i)};f.every=f.all=function(e,t,i){if(e==null)return true;t=f.iteratee(t,i);var n=e.length!==+e.length&&f.keys(e),r=(n||e).length,o,a;for(o=0;o<r;o++){a=n?n[o]:o;if(!t(e[a],a,e))return false}return true};f.some=f.any=function(e,t,i){if(e==null)return false;t=f.iteratee(t,i);var n=e.length!==+e.length&&f.keys(e),r=(n||e).length,o,a;for(o=0;o<r;o++){a=n?n[o]:o;if(t(e[a],a,e))return true}return false};f.contains=f.include=function(e,t){if(e==null)return false;if(e.length!==+e.length)e=f.values(e);return f.indexOf(e,t)>=0};f.invoke=function(e,t){var i=u.call(arguments,2);var n=f.isFunction(t);return f.map(e,function(e){return(n?t:e[t]).apply(e,i)})};f.pluck=function(e,t){return f.map(e,f.property(t))};f.where=function(e,t){return f.filter(e,f.matches(t))};f.findWhere=function(e,t){return f.find(e,f.matches(t))};f.max=function(e,n,t){var r=-Infinity,o=-Infinity,i,a;if(n==null&&e!=null){e=e.length===+e.length?e:f.values(e);for(var s=0,l=e.length;s<l;s++){i=e[s];if(i>r){r=i}}}else{n=f.iteratee(n,t);f.each(e,function(e,t,i){a=n(e,t,i);if(a>o||a===-Infinity&&r===-Infinity){r=e;o=a}})}return r};f.min=function(e,n,t){var r=Infinity,o=Infinity,i,a;if(n==null&&e!=null){e=e.length===+e.length?e:f.values(e);for(var s=0,l=e.length;s<l;s++){i=e[s];if(i<r){r=i}}}else{n=f.iteratee(n,t);f.each(e,function(e,t,i){a=n(e,t,i);if(a<o||a===Infinity&&r===Infinity){r=e;o=a}})}return r};f.shuffle=function(e){var t=e&&e.length===+e.length?e:f.values(e);var i=t.length;var n=Array(i);for(var r=0,o;r<i;r++){o=f.random(0,r);if(o!==r)n[r]=n[o];n[o]=t[r]}return n};f.sample=function(e,t,i){if(t==null||i){if(e.length!==+e.length)e=f.values(e);return e[f.random(e.length-1)]}return f.shuffle(e).slice(0,Math.max(0,t))};f.sortBy=function(e,n,t){n=f.iteratee(n,t);return f.pluck(f.map(e,function(e,t,i){return{"value":e,"index":t,"criteria":n(e,t,i)}}).sort(function(e,t){var i=e.criteria;var n=t.criteria;if(i!==n){if(i>n||i===void 0)return 1;if(i<n||n===void 0)return-1}return e.index-t.index}),"value")};var v=function(a){return function(n,r,e){var o={};r=f.iteratee(r,e);f.each(n,function(e,t){var i=r(e,t,n);a(o,e,i)});return o}};f.groupBy=v(function(e,t,i){if(f.has(e,i))e[i].push(t);else e[i]=[t]});f.indexBy=v(function(e,t,i){e[i]=t});f.countBy=v(function(e,t,i){if(f.has(e,i))e[i]++;else e[i]=1});f.sortedIndex=function(e,t,i,n){i=f.iteratee(i,n,1);var r=i(t);var o=0,a=e.length;while(o<a){var s=o+a>>>1;if(i(e[s])<r)o=s+1;else a=s}return o};f.toArray=function(e){if(!e)return[];if(f.isArray(e))return u.call(e);if(e.length===+e.length)return f.map(e,f.identity);return f.values(e)};f.size=function(e){if(e==null)return 0;return e.length===+e.length?e.length:f.keys(e).length};f.partition=function(e,n,t){n=f.iteratee(n,t);var r=[],o=[];f.each(e,function(e,t,i){(n(e,t,i)?r:o).push(e)});return[r,o]};f.first=f.head=f.take=function(e,t,i){if(e==null)return void 0;if(t==null||i)return e[0];if(t<0)return[];return u.call(e,0,t)};f.initial=function(e,t,i){return u.call(e,0,Math.max(0,e.length-(t==null||i?1:t)))};f.last=function(e,t,i){if(e==null)return void 0;if(t==null||i)return e[e.length-1];return u.call(e,Math.max(e.length-t,0))};f.rest=f.tail=f.drop=function(e,t,i){return u.call(e,t==null||i?1:t)};f.compact=function(e){return f.filter(e,f.identity)};var m=function(e,t,i,n){if(t&&f.every(e,f.isArray)){return c.apply(n,e)}for(var r=0,o=e.length;r<o;r++){var a=e[r];if(!f.isArray(a)&&!f.isArguments(a)){if(!i)n.push(a)}else if(t){s.apply(n,a)}else{m(a,t,i,n)}}return n};f.flatten=function(e,t){return m(e,t,false,[])};f.without=function(e){return f.difference(e,u.call(arguments,1))};f.uniq=f.unique=function(e,t,i,n){if(e==null)return[];if(!f.isBoolean(t)){n=i;i=t;t=false}if(i!=null)i=f.iteratee(i,n);var r=[];var o=[];for(var a=0,s=e.length;a<s;a++){var l=e[a];if(t){if(!a||o!==l)r.push(l);o=l}else if(i){var u=i(l,a,e);if(f.indexOf(o,u)<0){o.push(u);r.push(l)}}else if(f.indexOf(r,l)<0){r.push(l)}}return r};f.union=function(){return f.uniq(m(arguments,true,true,[]))};f.intersection=function(e){if(e==null)return[];var t=[];var i=arguments.length;for(var n=0,r=e.length;n<r;n++){var o=e[n];if(f.contains(t,o))continue;for(var a=1;a<i;a++){if(!f.contains(arguments[a],o))break}if(a===i)t.push(o)}return t};f.difference=function(e){var t=m(u.call(arguments,1),true,true,[]);return f.filter(e,function(e){return!f.contains(t,e)})};f.zip=function(e){if(e==null)return[];var t=f.max(arguments,"length").length;var i=Array(t);for(var n=0;n<t;n++){i[n]=f.pluck(arguments,n)}return i};f.object=function(e,t){if(e==null)return{};var i={};for(var n=0,r=e.length;n<r;n++){if(t){i[e[n]]=t[n]}else{i[e[n][0]]=e[n][1]}}return i};f.indexOf=function(e,t,i){if(e==null)return-1;var n=0,r=e.length;if(i){if(typeof i=="number"){n=i<0?Math.max(0,r+i):i}else{n=f.sortedIndex(e,t);return e[n]===t?n:-1}}for(;n<r;n++)if(e[n]===t)return n;return-1};f.lastIndexOf=function(e,t,i){if(e==null)return-1;var n=e.length;if(typeof i=="number"){n=i<0?n+i+1:Math.min(n,i+1)}while(--n>=0)if(e[n]===t)return n;return-1};f.range=function(e,t,i){if(arguments.length<=1){t=e||0;e=0}i=i||1;var n=Math.max(Math.ceil((t-e)/i),0);var r=Array(n);for(var o=0;o<n;o++,e+=i){r[o]=e}return r};var y=function(){};f.bind=function(i,n){var r,o;if(d&&i.bind===d)return d.apply(i,u.call(arguments,1));if(!f.isFunction(i))throw new TypeError("Bind must be called on a function");r=u.call(arguments,2);o=function(){if(!(this instanceof o))return i.apply(n,r.concat(u.call(arguments)));y.prototype=i.prototype;var e=new y;y.prototype=null;var t=i.apply(e,r.concat(u.call(arguments)));if(f.isObject(t))return t;return e};return o};f.partial=function(r){var o=u.call(arguments,1);return function(){var e=0;var t=o.slice();for(var i=0,n=t.length;i<n;i++){if(t[i]===f)t[i]=arguments[e++]}while(e<arguments.length)t.push(arguments[e++]);return r.apply(this,t)}};f.bindAll=function(e){var t,i=arguments.length,n;if(i<=1)throw new Error("bindAll must be passed function names");for(t=1;t<i;t++){n=arguments[t];e[n]=f.bind(e[n],e)}return e};f.memoize=function(n,r){var o=function(e){var t=o.cache;var i=r?r.apply(this,arguments):e;if(!f.has(t,i))t[i]=n.apply(this,arguments);return t[i]};o.cache={};return o};f.delay=function(e,t){var i=u.call(arguments,2);return setTimeout(function(){return e.apply(null,i)},t)};f.defer=function(e){return f.delay.apply(f,[e,1].concat(u.call(arguments,1)))};f.throttle=function(i,n,r){var o,a,s;var l=null;var u=0;if(!r)r={};var c=function(){u=r.leading===false?0:f.now();l=null;s=i.apply(o,a);if(!l)o=a=null};return function(){var e=f.now();if(!u&&r.leading===false)u=e;var t=n-(e-u);o=this;a=arguments;if(t<=0||t>n){clearTimeout(l);l=null;u=e;s=i.apply(o,a);if(!l)o=a=null}else if(!l&&r.trailing!==false){l=setTimeout(c,t)}return s}};f.debounce=function(t,i,n){var r,o,a,s,l;var u=function(){var e=f.now()-s;if(e<i&&e>0){r=setTimeout(u,i-e)}else{r=null;if(!n){l=t.apply(a,o);if(!r)a=o=null}}};return function(){a=this;o=arguments;s=f.now();var e=n&&!r;if(!r)r=setTimeout(u,i);if(e){l=t.apply(a,o);a=o=null}return l}};f.wrap=function(e,t){return f.partial(t,e)};f.negate=function(e){return function(){return!e.apply(this,arguments)}};f.compose=function(){var i=arguments;var n=i.length-1;return function(){var e=n;var t=i[n].apply(this,arguments);while(e--)t=i[e].call(this,t);return t}};f.after=function(e,t){return function(){if(--e<1){return t.apply(this,arguments)}}};f.before=function(e,t){var i;return function(){if(--e>0){i=t.apply(this,arguments)}else{t=null}return i}};f.once=f.partial(f.before,2);f.keys=function(e){if(!f.isObject(e))return[];if(l)return l(e);var t=[];for(var i in e)if(f.has(e,i))t.push(i);return t};f.values=function(e){var t=f.keys(e);var i=t.length;var n=Array(i);for(var r=0;r<i;r++){n[r]=e[t[r]]}return n};f.pairs=function(e){var t=f.keys(e);var i=t.length;var n=Array(i);for(var r=0;r<i;r++){n[r]=[t[r],e[t[r]]]}return n};f.invert=function(e){var t={};var i=f.keys(e);for(var n=0,r=i.length;n<r;n++){t[e[i[n]]]=i[n]}return t};f.functions=f.methods=function(e){var t=[];for(var i in e){if(f.isFunction(e[i]))t.push(i)}return t.sort()};f.extend=function(e){if(!f.isObject(e))return e;var t,i;for(var n=1,r=arguments.length;n<r;n++){t=arguments[n];for(i in t){if(o.call(t,i)){e[i]=t[i]}}}return e};f.pick=function(e,t,i){var n={},r;if(e==null)return n;if(f.isFunction(t)){t=p(t,i);for(r in e){var o=e[r];if(t(o,r,e))n[r]=o}}else{var a=c.apply([],u.call(arguments,1));e=new Object(e);for(var s=0,l=a.length;s<l;s++){r=a[s];if(r in e)n[r]=e[r]}}return n};f.omit=function(e,t,i){if(f.isFunction(t)){t=f.negate(t)}else{var n=f.map(c.apply([],u.call(arguments,1)),String);t=function(e,t){return!f.contains(n,t)}}return f.pick(e,t,i)};f.defaults=function(e){if(!f.isObject(e))return e;for(var t=1,i=arguments.length;t<i;t++){var n=arguments[t];for(var r in n){if(e[r]===void 0)e[r]=n[r]}}return e};f.clone=function(e){if(!f.isObject(e))return e;return f.isArray(e)?e.slice():f.extend({},e)};f.tap=function(e,t){t(e);return e};var b=function(e,t,i,n){if(e===t)return e!==0||1/e===1/t;if(e==null||t==null)return e===t;if(e instanceof f)e=e._wrapped;if(t instanceof f)t=t._wrapped;var r=h.call(e);if(r!==h.call(t))return false;switch(r){case"[object RegExp]":case"[object String]":return""+e===""+t;case"[object Number]":if(+e!==+e)return+t!==+t;return+e===0?1/+e===1/t:+e===+t;case"[object Date]":case"[object Boolean]":return+e===+t}if(typeof e!="object"||typeof t!="object")return false;var o=i.length;while(o--){if(i[o]===e)return n[o]===t}var a=e.constructor,s=t.constructor;if(a!==s&&"constructor"in e&&"constructor"in t&&!(f.isFunction(a)&&a instanceof a&&f.isFunction(s)&&s instanceof s)){return false}i.push(e);n.push(t);var l,u;if(r==="[object Array]"){l=e.length;u=l===t.length;if(u){while(l--){if(!(u=b(e[l],t[l],i,n)))break}}}else{var c=f.keys(e),d;l=c.length;u=f.keys(t).length===l;if(u){while(l--){d=c[l];if(!(u=f.has(t,d)&&b(e[d],t[d],i,n)))break}}}i.pop();n.pop();return u};f.isEqual=function(e,t){return b(e,t,[],[])};f.isEmpty=function(e){if(e==null)return true;if(f.isArray(e)||f.isString(e)||f.isArguments(e))return e.length===0;for(var t in e)if(f.has(e,t))return false;return true};f.isElement=function(e){return!!(e&&e.nodeType===1)};f.isArray=a||function(e){return h.call(e)==="[object Array]"};f.isObject=function(e){var t=typeof e;return t==="function"||t==="object"&&!!e};f.each(["Arguments","Function","String","Number","Date","RegExp"],function(t){f["is"+t]=function(e){return h.call(e)==="[object "+t+"]"}});if(!f.isArguments(arguments)){f.isArguments=function(e){return f.has(e,"callee")}}if(typeof/./!=="function"){f.isFunction=function(e){return typeof e=="function"||false}}f.isFinite=function(e){return isFinite(e)&&!isNaN(parseFloat(e))};f.isNaN=function(e){return f.isNumber(e)&&e!==+e};f.isBoolean=function(e){return e===true||e===false||h.call(e)==="[object Boolean]"};f.isNull=function(e){return e===null};f.isUndefined=function(e){return e===void 0};f.has=function(e,t){return e!=null&&o.call(e,t)};f.noConflict=function(){e._=t;return this};f.identity=function(e){return e};f.constant=function(e){return function(){return e}};f.noop=function(){};f.property=function(t){return function(e){return e[t]}};f.matches=function(e){var r=f.pairs(e),o=r.length;return function(e){if(e==null)return!o;e=new Object(e);for(var t=0;t<o;t++){var i=r[t],n=i[0];if(i[1]!==e[n]||!(n in e))return false}return true}};f.times=function(e,t,i){var n=Array(Math.max(0,e));t=p(t,i,1);for(var r=0;r<e;r++)n[r]=t(r);return n};f.random=function(e,t){if(t==null){t=e;e=0}return e+Math.floor(Math.random()*(t-e+1))};f.now=Date.now||function(){return(new Date).getTime()};var _={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"};var w=f.invert(_);var E=function(t){var i=function(e){return t[e]};var e="(?:"+f.keys(t).join("|")+")";var n=RegExp(e);var r=RegExp(e,"g");return function(e){e=e==null?"":""+e;return n.test(e)?e.replace(r,i):e}};f.escape=E(_);f.unescape=E(w);f.result=function(e,t){if(e==null)return void 0;var i=e[t];return f.isFunction(i)?e[t]():i};var x=0;f.uniqueId=function(e){var t=++x+"";return e?e+t:t};f.templateSettings={"evaluate":/<%([\s\S]+?)%>/g,"interpolate":/<%=([\s\S]+?)%>/g,"escape":/<%-([\s\S]+?)%>/g};var T=/(.)^/;var S={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"};var k=/\\|'|\r|\n|\u2028|\u2029/g;var R=function(e){return"\\"+S[e]};f.template=function(o,e,t){if(!e&&t)e=t;e=f.defaults({},e,f.templateSettings);var i=RegExp([(e.escape||T).source,(e.interpolate||T).source,(e.evaluate||T).source].join("|")+"|$","g");var a=0;var s="__p+='";o.replace(i,function(e,t,i,n,r){s+=o.slice(a,r).replace(k,R);a=r+e.length;if(t){s+="'+\n((__t=("+t+"))==null?'':_.escape(__t))+\n'"}else if(i){s+="'+\n((__t=("+i+"))==null?'':__t)+\n'"}else if(n){s+="';\n"+n+"\n__p+='"}return e});s+="';\n";if(!e.variable)s="with(obj||{}){\n"+s+"}\n";s="var __t,__p='',__j=Array.prototype.join,"+"print=function(){__p+=__j.call(arguments,'');};\n"+s+"return __p;\n";try{var n=new Function(e.variable||"obj","_",s)}catch(e){e.source=s;throw e}var r=function(e){return n.call(this,e,f)};var l=e.variable||"obj";r.source="function("+l+"){\n"+s+"}";return r};f.chain=function(e){var t=f(e);t._chain=true;return t};var C=function(e){return this._chain?f(e).chain():e};f.mixin=function(i){f.each(f.functions(i),function(e){var t=f[e]=i[e];f.prototype[e]=function(){var e=[this._wrapped];s.apply(e,arguments);return C.call(this,t.apply(f,e))}})};f.mixin(f);f.each(["pop","push","reverse","shift","sort","splice","unshift"],function(t){var i=n[t];f.prototype[t]=function(){var e=this._wrapped;i.apply(e,arguments);if((t==="shift"||t==="splice")&&e.length===0)delete e[0];return C.call(this,e)}});f.each(["concat","join","slice"],function(e){var t=n[e];f.prototype[e]=function(){return C.call(this,t.apply(this._wrapped,arguments))}});f.prototype.value=function(){return this._wrapped};if(typeof define==="function"&&define.amd){define("underscore",[],function(){return f})}}).call(this);(function(n,r){if(typeof define==="function"&&define.amd){define(["underscore","jquery","exports"],function(e,t,i){n.Backbone=r(n,i,e,t)})}else if(typeof exports!=="undefined"){var e=require("underscore");r(n,exports,e)}else{n.Backbone=r(n,{},n._,n.jQuery||n.Zepto||n.ender||n.$)}})(this,function(e,s,E,t){var i=e.Backbone;var n=[];var B=n.push;var r=n.slice;var F=n.splice;s.VERSION="1.1.2";s.$=t;s.noConflict=function(){e.Backbone=i;return this};s.emulateHTTP=false;s.emulateJSON=false;var a=s.Events={"on":function(e,t,i){if(!d(this,"on",e,[t,i])||!t)return this;this._events||(this._events={});var n=this._events[e]||(this._events[e]=[]);n.push({"callback":t,"context":i,"ctx":i||this});return this},"once":function(e,t,i){if(!d(this,"once",e,[t,i])||!t)return this;var n=this;var r=E.once(function(){n.off(e,r);t.apply(this,arguments)});r._callback=t;return this.on(e,r,i)},"off":function(e,t,i){var n,r,o,a,s,l,u,c;if(!this._events||!d(this,"off",e,[t,i]))return this;if(!e&&!t&&!i){this._events=void 0;return this}a=e?[e]:E.keys(this._events);for(s=0,l=a.length;s<l;s++){e=a[s];if(o=this._events[e]){this._events[e]=n=[];if(t||i){for(u=0,c=o.length;u<c;u++){r=o[u];if(t&&t!==r.callback&&t!==r.callback._callback||i&&i!==r.context){n.push(r)}}}if(!n.length)delete this._events[e]}}return this},"trigger":function(e){if(!this._events)return this;var t=r.call(arguments,1);if(!d(this,"trigger",e,t))return this;var i=this._events[e];var n=this._events.all;if(i)o(i,t);if(n)o(n,arguments);return this},"stopListening":function(e,t,i){var n=this._listeningTo;if(!n)return this;var r=!t&&!i;if(!i&&typeof t==="object")i=this;if(e)(n={})[e._listenId]=e;for(var o in n){e=n[o];e.off(t,i,this);if(r||E.isEmpty(e._events))delete this._listeningTo[o]}return this}};var l=/\s+/;var d=function(e,t,i,n){if(!i)return true;if(typeof i==="object"){for(var r in i){e[t].apply(e,[r,i[r]].concat(n))}return false}if(l.test(i)){var o=i.split(l);for(var a=0,s=o.length;a<s;a++){e[t].apply(e,[o[a]].concat(n))}return false}return true};var o=function(e,t){var i,n=-1,r=e.length,o=t[0],a=t[1],s=t[2];switch(t.length){case 0:while(++n<r)(i=e[n]).callback.call(i.ctx);return;case 1:while(++n<r)(i=e[n]).callback.call(i.ctx,o);return;case 2:while(++n<r)(i=e[n]).callback.call(i.ctx,o,a);return;case 3:while(++n<r)(i=e[n]).callback.call(i.ctx,o,a,s);return;default:while(++n<r)(i=e[n]).callback.apply(i.ctx,t);return}};var u={"listenTo":"on","listenToOnce":"once"};E.each(u,function(o,e){a[e]=function(e,t,i){var n=this._listeningTo||(this._listeningTo={});var r=e._listenId||(e._listenId=E.uniqueId("l"));n[r]=e;if(!i&&typeof t==="object")i=this;e[o](t,i,this);return this}});a.bind=a.on;a.unbind=a.off;E.extend(s,a);var x=s.Model=function(e,t){var i=e||{};t||(t={});this.cid=E.uniqueId("c");this.attributes={};if(t.collection)this.collection=t.collection;if(t.parse)i=this.parse(i,t)||{};i=E.defaults({},i,E.result(this,"defaults"));this.set(i,t);this.changed={};this.initialize.apply(this,arguments)};E.extend(x.prototype,a,{"changed":null,"validationError":null,"idAttribute":"id","initialize":function(){},"toJSON":function(e){return E.clone(this.attributes)},"sync":function(){return s.sync.apply(this,arguments)},"get":function(e){return this.attributes[e]},"escape":function(e){return E.escape(this.get(e))},"has":function(e){return this.get(e)!=null},"set":function(e,t,i){var n,r,o,a,s,l,u,c;if(e==null)return this;if(typeof e==="object"){r=e;i=t}else{(r={})[e]=t}i||(i={});if(!this._validate(r,i))return false;o=i.unset;s=i.silent;a=[];l=this._changing;this._changing=true;if(!l){this._previousAttributes=E.clone(this.attributes);this.changed={}}c=this.attributes,u=this._previousAttributes;if(this.idAttribute in r)this.id=r[this.idAttribute];for(n in r){t=r[n];if(!E.isEqual(c[n],t))a.push(n);if(!E.isEqual(u[n],t)){this.changed[n]=t}else{delete this.changed[n]}o?delete c[n]:c[n]=t}if(!s){if(a.length)this._pending=i;for(var d=0,h=a.length;d<h;d++){this.trigger("change:"+a[d],this,c[a[d]],i)}}if(l)return this;if(!s){while(this._pending){i=this._pending;this._pending=false;this.trigger("change",this,i)}}this._pending=false;this._changing=false;return this},"unset":function(e,t){return this.set(e,void 0,E.extend({},t,{"unset":true}))},"clear":function(e){var t={};for(var i in this.attributes)t[i]=void 0;return this.set(t,E.extend({},e,{"unset":true}))},"hasChanged":function(e){if(e==null)return!E.isEmpty(this.changed);return E.has(this.changed,e)},"changedAttributes":function(e){if(!e)return this.hasChanged()?E.clone(this.changed):false;var t,i=false;var n=this._changing?this._previousAttributes:this.attributes;for(var r in e){if(E.isEqual(n[r],t=e[r]))continue;(i||(i={}))[r]=t}return i},"previous":function(e){if(e==null||!this._previousAttributes)return null;return this._previousAttributes[e]},"previousAttributes":function(){return E.clone(this._previousAttributes)},"fetch":function(t){t=t?E.clone(t):{};if(t.parse===void 0)t.parse=true;var i=this;var n=t.success;t.success=function(e){if(!i.set(i.parse(e,t),t))return false;if(n)n(i,e,t);i.trigger("sync",i,e,t)};M(this,t);return this.sync("read",this,t)},"save":function(e,t,i){var n,r,o,a=this.attributes;if(e==null||typeof e==="object"){n=e;i=t}else{(n={})[e]=t}i=E.extend({"validate":true},i);if(n&&!i.wait){if(!this.set(n,i))return false}else{if(!this._validate(n,i))return false}if(n&&i.wait){this.attributes=E.extend({},a,n)}if(i.parse===void 0)i.parse=true;var s=this;var l=i.success;i.success=function(e){s.attributes=a;var t=s.parse(e,i);if(i.wait)t=E.extend(n||{},t);if(E.isObject(t)&&!s.set(t,i)){return false}if(l)l(s,e,i);s.trigger("sync",s,e,i)};M(this,i);r=this.isNew()?"create":i.patch?"patch":"update";if(r==="patch")i.attrs=n;o=this.sync(r,this,i);if(n&&i.wait)this.attributes=a;return o},"destroy":function(t){t=t?E.clone(t):{};var i=this;var n=t.success;var r=function(){i.trigger("destroy",i,i.collection,t)};t.success=function(e){if(t.wait||i.isNew())r();if(n)n(i,e,t);if(!i.isNew())i.trigger("sync",i,e,t)};if(this.isNew()){t.success();return false}M(this,t);var e=this.sync("delete",this,t);if(!t.wait)r();return e},"url":function(){var e=E.result(this,"urlRoot")||E.result(this.collection,"url")||D();if(this.isNew())return e;return e.replace(/([^\/])$/,"$1/")+encodeURIComponent(this.id)},"parse":function(e,t){return e},"clone":function(){return new this.constructor(this.attributes)},"isNew":function(){return!this.has(this.idAttribute)},"isValid":function(e){return this._validate({},E.extend(e||{},{"validate":true}))},"_validate":function(e,t){if(!t.validate||!this.validate)return true;e=E.extend({},this.attributes,e);var i=this.validationError=this.validate(e,t)||null;if(!i)return true;this.trigger("invalid",this,i,E.extend(t,{"validationError":i}));return false}});var c=["keys","values","pairs","invert","pick","omit"];E.each(c,function(t){x.prototype[t]=function(){var e=r.call(arguments);e.unshift(this.attributes);return E[t].apply(E,e)}});var h=s.Collection=function(e,t){t||(t={});if(t.model)this.model=t.model;if(t.comparator!==void 0)this.comparator=t.comparator;this._reset();this.initialize.apply(this,arguments);if(e)this.reset(e,E.extend({"silent":true},t))};var T={"add":true,"remove":true,"merge":true};var f={"add":true,"remove":false};E.extend(h.prototype,a,{"model":x,"initialize":function(){},"toJSON":function(t){return this.map(function(e){return e.toJSON(t)})},"sync":function(){return s.sync.apply(this,arguments)},"add":function(e,t){return this.set(e,E.extend({"merge":false},t,f))},"remove":function(e,t){var i=!E.isArray(e);e=i?[e]:E.clone(e);t||(t={});var n,r,o,a;for(n=0,r=e.length;n<r;n++){a=e[n]=this.get(e[n]);if(!a)continue;delete this._byId[a.id];delete this._byId[a.cid];o=this.indexOf(a);this.models.splice(o,1);this.length--;if(!t.silent){t.index=o;a.trigger("remove",a,this,t)}this._removeReference(a,t)}return i?e[0]:e},"set":function(e,t){t=E.defaults({},t,T);if(t.parse)e=this.parse(e,t);var i=!E.isArray(e);e=i?e?[e]:[]:E.clone(e);var n,r,o,a,s,l,u;var c=t.at;var d=this.model;var h=this.comparator&&c==null&&t.sort!==false;var f=E.isString(this.comparator)?this.comparator:null;var p=[],g=[],v={};var m=t.add,y=t.merge,b=t.remove;var _=!h&&m&&b?[]:false;for(n=0,r=e.length;n<r;n++){s=e[n]||{};if(s instanceof x){o=a=s}else{o=s[d.prototype.idAttribute||"id"]}if(l=this.get(o)){if(b)v[l.cid]=true;if(y){s=s===a?a.attributes:s;if(t.parse)s=l.parse(s,t);l.set(s,t);if(h&&!u&&l.hasChanged(f))u=true}e[n]=l}else if(m){a=e[n]=this._prepareModel(s,t);if(!a)continue;p.push(a);this._addReference(a,t)}a=l||a;if(_&&(a.isNew()||!v[a.id]))_.push(a);v[a.id]=true}if(b){for(n=0,r=this.length;n<r;++n){if(!v[(a=this.models[n]).cid])g.push(a)}if(g.length)this.remove(g,t)}if(p.length||_&&_.length){if(h)u=true;this.length+=p.length;if(c!=null){for(n=0,r=p.length;n<r;n++){this.models.splice(c+n,0,p[n])}}else{if(_)this.models.length=0;var w=_||p;for(n=0,r=w.length;n<r;n++){this.models.push(w[n])}}}if(u)this.sort({"silent":true});if(!t.silent){for(n=0,r=p.length;n<r;n++){(a=p[n]).trigger("add",a,this,t)}if(u||_&&_.length)this.trigger("sort",this,t)}return i?e[0]:e},"reset":function(e,t){t||(t={});for(var i=0,n=this.models.length;i<n;i++){this._removeReference(this.models[i],t)}t.previousModels=this.models;this._reset();e=this.add(e,E.extend({"silent":true},t));if(!t.silent)this.trigger("reset",this,t);return e},"push":function(e,t){return this.add(e,E.extend({"at":this.length},t))},"pop":function(e){var t=this.at(this.length-1);this.remove(t,e);return t},"unshift":function(e,t){return this.add(e,E.extend({"at":0},t))},"shift":function(e){var t=this.at(0);this.remove(t,e);return t},"slice":function(){return r.apply(this.models,arguments)},"get":function(e){if(e==null)return void 0;return this._byId[e]||this._byId[e.id]||this._byId[e.cid]},"at":function(e){return this.models[e]},"where":function(i,e){if(E.isEmpty(i))return e?void 0:[];return this[e?"find":"filter"](function(e){for(var t in i){if(i[t]!==e.get(t))return false}return true})},"findWhere":function(e){return this.where(e,true)},"sort":function(e){if(!this.comparator)throw new Error("Cannot sort a set without a comparator");e||(e={});if(E.isString(this.comparator)||this.comparator.length===1){this.models=this.sortBy(this.comparator,this)}else{this.models.sort(E.bind(this.comparator,this))}if(!e.silent)this.trigger("sort",this,e);return this},"pluck":function(e){return E.invoke(this.models,"get",e)},"fetch":function(i){i=i?E.clone(i):{};if(i.parse===void 0)i.parse=true;var n=i.success;var r=this;i.success=function(e){var t=i.reset?"reset":"set";r[t](e,i);if(n)n(r,e,i);r.trigger("sync",r,e,i)};M(this,i);return this.sync("read",this,i)},"create":function(e,i){i=i?E.clone(i):{};if(!(e=this._prepareModel(e,i)))return false;if(!i.wait)this.add(e,i);var n=this;var r=i.success;i.success=function(e,t){if(i.wait)n.add(e,i);if(r)r(e,t,i)};e.save(null,i);return e},"parse":function(e,t){return e},"clone":function(){return new this.constructor(this.models)},"_reset":function(){this.length=0;this.models=[];this._byId={}},"_prepareModel":function(e,t){if(e instanceof x)return e;t=t?E.clone(t):{};t.collection=this;var i=new this.model(e,t);if(!i.validationError)return i;this.trigger("invalid",this,i.validationError,t);return false},"_addReference":function(e,t){this._byId[e.cid]=e;if(e.id!=null)this._byId[e.id]=e;if(!e.collection)e.collection=this;e.on("all",this._onModelEvent,this)},"_removeReference":function(e,t){if(this===e.collection)delete e.collection;e.off("all",this._onModelEvent,this)},"_onModelEvent":function(e,t,i,n){if((e==="add"||e==="remove")&&i!==this)return;if(e==="destroy")this.remove(t,n);if(t&&e==="change:"+t.idAttribute){delete this._byId[t.previous(t.idAttribute)];if(t.id!=null)this._byId[t.id]=t}this.trigger.apply(this,arguments)}});var p=["forEach","each","map","collect","reduce","foldl","inject","reduceRight","foldr","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","toArray","size","first","head","take","initial","rest","tail","drop","last","without","difference","indexOf","shuffle","lastIndexOf","isEmpty","chain","sample"];E.each(p,function(t){h.prototype[t]=function(){var e=r.call(arguments);e.unshift(this.models);return E[t].apply(E,e)}});var g=["groupBy","countBy","sortBy","indexBy"];E.each(g,function(n){h.prototype[n]=function(t,e){var i=E.isFunction(t)?t:function(e){return e.get(t)};return E[n](this.models,i,e)}});var v=s.View=function(e){this.cid=E.uniqueId("view");e||(e={});E.extend(this,E.pick(e,y));this._ensureElement();this.initialize.apply(this,arguments);this.delegateEvents()};var m=/^(\S+)\s*(.*)$/;var y=["model","collection","el","id","attributes","className","tagName","events"];E.extend(v.prototype,a,{"tagName":"div","$":function(e){return this.$el.find(e)},"initialize":function(){},"render":function(){return this},"remove":function(){this.$el.remove();this.stopListening();return this},"setElement":function(e,t){if(this.$el)this.undelegateEvents();this.$el=e instanceof s.$?e:s.$(e);this.el=this.$el[0];if(t!==false)this.delegateEvents();return this},"delegateEvents":function(e){if(!(e||(e=E.result(this,"events"))))return this;this.undelegateEvents();for(var t in e){var i=e[t];if(!E.isFunction(i))i=this[e[t]];if(!i)continue;var n=t.match(m);var r=n[1],o=n[2];i=E.bind(i,this);r+=".delegateEvents"+this.cid;if(o===""){this.$el.on(r,i)}else{this.$el.on(r,o,i)}}return this},"undelegateEvents":function(){this.$el.off(".delegateEvents"+this.cid);return this},"_ensureElement":function(){if(!this.el){var e=E.extend({},E.result(this,"attributes"));if(this.id)e.id=E.result(this,"id");if(this.className)e["class"]=E.result(this,"className");var t=s.$("<"+E.result(this,"tagName")+">").attr(e);this.setElement(t,false)}else{this.setElement(E.result(this,"el"),false)}}});s.sync=function(e,t,i){var n=_[e];E.defaults(i||(i={}),{"emulateHTTP":s.emulateHTTP,"emulateJSON":s.emulateJSON});var r={"type":n,"dataType":"json"};if(!i.url){r.url=E.result(t,"url")||D()}if(i.data==null&&t&&(e==="create"||e==="update"||e==="patch")){r.contentType="application/json";r.data=JSON.stringify(i.attrs||t.toJSON(i))}if(i.emulateJSON){r.contentType="application/x-www-form-urlencoded";r.data=r.data?{"model":r.data}:{}}if(i.emulateHTTP&&(n==="PUT"||n==="DELETE"||n==="PATCH")){r.type="POST";if(i.emulateJSON)r.data._method=n;var o=i.beforeSend;i.beforeSend=function(e){e.setRequestHeader("X-HTTP-Method-Override",n);if(o)return o.apply(this,arguments)}}if(r.type!=="GET"&&!i.emulateJSON){r.processData=false}if(r.type==="PATCH"&&b){r.xhr=function(){return new ActiveXObject("Microsoft.XMLHTTP")}}var a=i.xhr=s.ajax(E.extend(r,i));t.trigger("request",t,a,i);return a};var b=typeof window!=="undefined"&&!!window.ActiveXObject&&!(window.XMLHttpRequest&&(new XMLHttpRequest).dispatchEvent);var _={"create":"POST","update":"PUT","patch":"PATCH","delete":"DELETE","read":"GET"};s.ajax=function(){return s.$.ajax.apply(s.$,arguments)};var w=s.Router=function(e){e||(e={});if(e.routes)this.routes=e.routes;this._bindRoutes();this.initialize.apply(this,arguments)};var S=/\((.*?)\)/g;var k=/(\(\?)?:\w+/g;var R=/\*\w+/g;var C=/[\-{}\[\]+?.,\\\^$|#\s]/g;E.extend(w.prototype,a,{"initialize":function(){},"route":function(i,n,r){if(!E.isRegExp(i))i=this._routeToRegExp(i);if(E.isFunction(n)){r=n;n=""}if(!r)r=this[n];var o=this;s.history.route(i,function(e){var t=o._extractParameters(i,e);o.execute(r,t);o.trigger.apply(o,["route:"+n].concat(t));o.trigger("route",n,t);s.history.trigger("route",o,n,t)});return this},"execute":function(e,t){if(e)e.apply(this,t)},"navigate":function(e,t){s.history.navigate(e,t);return this},"_bindRoutes":function(){if(!this.routes)return;this.routes=E.result(this,"routes");var e,t=E.keys(this.routes);while((e=t.pop())!=null){this.route(e,this.routes[e])}},"_routeToRegExp":function(e){e=e.replace(C,"\\$&").replace(S,"(?:$1)?").replace(k,function(e,t){return t?e:"([^/?]+)"}).replace(R,"([^?]*?)");return new RegExp("^"+e+"(?:\\?([\\s\\S]*))?$")},"_extractParameters":function(e,t){var i=e.exec(t).slice(1);return E.map(i,function(e,t){if(t===i.length-1)return e||null;return e?decodeURIComponent(e):null})}});var A=s.History=function(){this.handlers=[];E.bindAll(this,"checkUrl");if(typeof window!=="undefined"){this.location=window.location;this.history=window.history}};var O=/^[#\/]|\s+$/g;var L=/^\/+|\/+$/g;var P=/msie [\w.]+/;var I=/\/$/;var N=/#.*$/;A.started=false;E.extend(A.prototype,a,{"interval":50,"atRoot":function(){return this.location.pathname.replace(/[^\/]$/,"$&/")===this.root},"getHash":function(e){var t=(e||this).location.href.match(/#(.*)$/);return t?t[1]:""},"getFragment":function(e,t){if(e==null){if(this._hasPushState||!this._wantsHashChange||t){e=decodeURI(this.location.pathname+this.location.search);var i=this.root.replace(I,"");if(!e.indexOf(i))e=e.slice(i.length)}else{e=this.getHash()}}return e.replace(O,"")},"start":function(e){if(A.started)throw new Error("Backbone.history has already been started");A.started=true;this.options=E.extend({"root":"/"},this.options,e);this.root=this.options.root;this._wantsHashChange=this.options.hashChange!==false;this._wantsPushState=!!this.options.pushState;this._hasPushState=!!(this.options.pushState&&this.history&&this.history.pushState);var t=this.getFragment();var i=document.documentMode;var n=P.exec(navigator.userAgent.toLowerCase())&&(!i||i<=7);this.root=("/"+this.root+"/").replace(L,"/");if(n&&this._wantsHashChange){var r=s.$('<iframe src="javascript:0" tabindex="-1">');this.iframe=r.hide().appendTo("body")[0].contentWindow;this.navigate(t)}if(this._hasPushState){s.$(window).on("popstate",this.checkUrl)}else if(this._wantsHashChange&&"onhashchange"in window&&!n){s.$(window).on("hashchange",this.checkUrl)}else if(this._wantsHashChange){this._checkUrlInterval=setInterval(this.checkUrl,this.interval)}this.fragment=t;var o=this.location;if(this._wantsHashChange&&this._wantsPushState){if(!this._hasPushState&&!this.atRoot()){this.fragment=this.getFragment(null,true);this.location.replace(this.root+"#"+this.fragment);return true}else if(this._hasPushState&&this.atRoot()&&o.hash){this.fragment=this.getHash().replace(O,"");this.history.replaceState({},document.title,this.root+this.fragment)}}if(!this.options.silent)return this.loadUrl()},"stop":function(){s.$(window).off("popstate",this.checkUrl).off("hashchange",this.checkUrl);if(this._checkUrlInterval)clearInterval(this._checkUrlInterval);A.started=false},"route":function(e,t){this.handlers.unshift({"route":e,"callback":t})},"checkUrl":function(e){var t=this.getFragment();if(t===this.fragment&&this.iframe){t=this.getFragment(this.getHash(this.iframe))}if(t===this.fragment)return false;if(this.iframe)this.navigate(t);this.loadUrl()},"loadUrl":function(t){t=this.fragment=this.getFragment(t);return E.any(this.handlers,function(e){if(e.route.test(t)){e.callback(t);return true}})},"navigate":function(e,t){if(!A.started)return false;if(!t||t===true)t={"trigger":!!t};var i=this.root+(e=this.getFragment(e||""));e=e.replace(N,"");if(this.fragment===e)return;this.fragment=e;if(e===""&&i!=="/")i=i.slice(0,-1);if(this._hasPushState){this.history[t.replace?"replaceState":"pushState"]({},document.title,i)}else if(this._wantsHashChange){this._updateHash(this.location,e,t.replace);if(this.iframe&&e!==this.getFragment(this.getHash(this.iframe))){if(!t.replace)this.iframe.document.open().close();this._updateHash(this.iframe.location,e,t.replace)}}else{return this.location.assign(i)}if(t.trigger)return this.loadUrl(e)},"_updateHash":function(e,t,i){if(i){var n=e.href.replace(/(javascript:|#).*$/,"");e.replace(n+"#"+t)}else{e.hash="#"+t}}});s.history=new A;var j=function(e,t){var i=this;var n;if(e&&E.has(e,"constructor")){n=e.constructor}else{n=function(){return i.apply(this,arguments)}}E.extend(n,i,t);var r=function(){this.constructor=n};r.prototype=i.prototype;n.prototype=new r;if(e)E.extend(n.prototype,e);n.__super__=i.prototype;return n};x.extend=h.extend=w.extend=v.extend=A.extend=j;var D=function(){throw new Error('A "url" property or function must be specified')};var M=function(t,i){var n=i.error;i.error=function(e){if(n)n(t,e,i);t.trigger("error",t,e,i)}};return s});(function(e){if(typeof define==="function"&&define.amd){define(["jquery"],e)}else if(typeof exports==="object"){e(require("jquery"))}else{e(jQuery)}})(function(c){var i=0,s=Array.prototype.slice;c.cleanData=function(r){return function(e){var t,i,n;for(n=0;(i=e[n])!=null;n++){try{t=c._data(i,"events");if(t&&t.remove){c(i).triggerHandler("remove")}}catch(e){}}r(e)}}(c.cleanData);c.widget=function(e,i,t){var n,r,o,a,s={},l=e.split(".")[0];e=e.split(".")[1];n=l+"-"+e;if(!t){t=i;i=c.Widget}c.expr[":"][n.toLowerCase()]=function(e){return!!c.data(e,n)};c[l]=c[l]||{};r=c[l][e];o=c[l][e]=function(e,t){if(!this._createWidget){return new o(e,t)}if(arguments.length){this._createWidget(e,t)}};c.extend(o,r,{"version":t.version,"_proto":c.extend({},t),"_childConstructors":[]});a=new i;a.options=c.widget.extend({},a.options);c.each(t,function(t,o){if(!c.isFunction(o)){s[t]=o;return}s[t]=function(){var n=function(){return i.prototype[t].apply(this,arguments)},r=function(e){return i.prototype[t].apply(this,e)};return function(){var e=this._super,t=this._superApply,i;this._super=n;this._superApply=r;i=o.apply(this,arguments);this._super=e;this._superApply=t;return i}}()});o.prototype=c.widget.extend(a,{"widgetEventPrefix":r?a.widgetEventPrefix||e:e},s,{"constructor":o,"namespace":l,"widgetName":e,"widgetFullName":n});if(r){c.each(r._childConstructors,function(e,t){var i=t.prototype;c.widget(i.namespace+"."+i.widgetName,o,t._proto)});delete r._childConstructors}else{i._childConstructors.push(o)}c.widget.bridge(e,o);return o};c.widget.extend=function(e){var t=s.call(arguments,1),i=0,n=t.length,r,o;for(;i<n;i++){for(r in t[i]){o=t[i][r];if(t[i].hasOwnProperty(r)&&o!==undefined){if(c.isPlainObject(o)){e[r]=c.isPlainObject(e[r])?c.widget.extend({},e[r],o):c.widget.extend({},o)}else{e[r]=o}}}}return e};c.widget.bridge=function(o,t){var a=t.prototype.widgetFullName||o;c.fn[o]=function(i){var e=typeof i==="string",n=s.call(arguments,1),r=this;if(e){this.each(function(){var e,t=c.data(this,a);if(i==="instance"){r=t;return false}if(!t){return c.error("cannot call methods on "+o+" prior to initialization; "+"attempted to call method '"+i+"'")}if(!c.isFunction(t[i])||i.charAt(0)==="_"){return c.error("no such method '"+i+"' for "+o+" widget instance")}e=t[i].apply(t,n);if(e!==t&&e!==undefined){r=e&&e.jquery?r.pushStack(e.get()):e;return false}})}else{if(n.length){i=c.widget.extend.apply(null,[i].concat(n))}this.each(function(){var e=c.data(this,a);if(e){e.option(i||{});if(e._init){e._init()}}else{c.data(this,a,new t(i,this))}})}return r}};c.Widget=function(){};c.Widget._childConstructors=[];c.Widget.prototype={"widgetName":"widget","widgetEventPrefix":"","defaultElement":"<div>","options":{"disabled":false,"create":null},"_createWidget":function(e,t){t=c(t||this.defaultElement||this)[0];this.element=c(t);this.uuid=i++;this.eventNamespace="."+this.widgetName+this.uuid;this.bindings=c();this.hoverable=c();this.focusable=c();if(t!==this){c.data(t,this.widgetFullName,this);this._on(true,this.element,{"remove":function(e){if(e.target===t){this.destroy()}}});this.document=c(t.style?t.ownerDocument:t.document||t);this.window=c(this.document[0].defaultView||this.document[0].parentWindow)}this.options=c.widget.extend({},this.options,this._getCreateOptions(),e);this._create();this._trigger("create",null,this._getCreateEventData());this._init()},"_getCreateOptions":c.noop,"_getCreateEventData":c.noop,"_create":c.noop,"_init":c.noop,"destroy":function(){this._destroy();this.element.unbind(this.eventNamespace).removeData(this.widgetFullName).removeData(c.camelCase(this.widgetFullName));this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled "+"ui-state-disabled");this.bindings.unbind(this.eventNamespace);this.hoverable.removeClass("ui-state-hover");this.focusable.removeClass("ui-state-focus")},"_destroy":c.noop,"widget":function(){return this.element},"option":function(e,t){var i=e,n,r,o;if(arguments.length===0){return c.widget.extend({},this.options)}if(typeof e==="string"){i={};n=e.split(".");e=n.shift();if(n.length){r=i[e]=c.widget.extend({},this.options[e]);for(o=0;o<n.length-1;o++){r[n[o]]=r[n[o]]||{};r=r[n[o]]}e=n.pop();if(arguments.length===1){return r[e]===undefined?null:r[e]}r[e]=t}else{if(arguments.length===1){return this.options[e]===undefined?null:this.options[e]}i[e]=t}}this._setOptions(i);return this},"_setOptions":function(e){var t;for(t in e){this._setOption(t,e[t])}return this},"_setOption":function(e,t){this.options[e]=t;if(e==="disabled"){this.widget().toggleClass(this.widgetFullName+"-disabled",!!t);if(t){this.hoverable.removeClass("ui-state-hover");this.focusable.removeClass("ui-state-focus")}}return this},"enable":function(){return this._setOptions({"disabled":false})},"disable":function(){return this._setOptions({"disabled":true})},"_on":function(a,s,e){var l,u=this;if(typeof a!=="boolean"){e=s;s=a;a=false}if(!e){e=s;s=this.element;l=this.widget()}else{s=l=c(s);this.bindings=this.bindings.add(s)}c.each(e,function(e,t){function i(){if(!a&&(u.options.disabled===true||c(this).hasClass("ui-state-disabled"))){return}return(typeof t==="string"?u[t]:t).apply(u,arguments)}if(typeof t!=="string"){i.guid=t.guid=t.guid||i.guid||c.guid++}var n=e.match(/^([\w:-]*)\s*(.*)$/),r=n[1]+u.eventNamespace,o=n[2];if(o){l.delegate(o,r,i)}else{s.bind(r,i)}})},"_off":function(e,t){t=(t||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace;e.unbind(t).undelegate(t);this.bindings=c(this.bindings.not(e).get());this.focusable=c(this.focusable.not(e).get());this.hoverable=c(this.hoverable.not(e).get())},"_delay":function(e,t){function i(){return(typeof e==="string"?n[e]:e).apply(n,arguments)}var n=this;return setTimeout(i,t||0)},"_hoverable":function(e){this.hoverable=this.hoverable.add(e);this._on(e,{"mouseenter":function(e){c(e.currentTarget).addClass("ui-state-hover")},"mouseleave":function(e){c(e.currentTarget).removeClass("ui-state-hover")}})},"_focusable":function(e){this.focusable=this.focusable.add(e);this._on(e,{"focusin":function(e){c(e.currentTarget).addClass("ui-state-focus")},"focusout":function(e){c(e.currentTarget).removeClass("ui-state-focus")}})},"_trigger":function(e,t,i){var n,r,o=this.options[e];i=i||{};t=c.Event(t);t.type=(e===this.widgetEventPrefix?e:this.widgetEventPrefix+e).toLowerCase();t.target=this.element[0];r=t.originalEvent;if(r){for(n in r){if(!(n in t)){t[n]=r[n]}}}this.element.trigger(t,i);return!(c.isFunction(o)&&o.apply(this.element[0],[t].concat(i))===false||t.isDefaultPrevented())}};c.each({"show":"fadeIn","hide":"fadeOut"},function(o,a){c.Widget.prototype["_"+o]=function(t,e,i){if(typeof e==="string"){e={"effect":e}}var n,r=!e?o:e===true||typeof e==="number"?a:e.effect||a;e=e||{};if(typeof e==="number"){e={"duration":e}}n=!c.isEmptyObject(e);e.complete=i;if(e.delay){t.delay(e.delay)}if(n&&c.effects&&c.effects.effect[r]){t[o](e)}else if(r!==o&&t[r]){t[r](e.duration,e.easing,i)}else{t.queue(function(e){c(this)[o]();if(i){i.call(t[0])}e()})}}});var e=c.widget});(function(){var e=function(e){this.delay=e||500;this.enableTimer=0;var t=this;this.scrollCallback=function(){t._onScroll()};window.addEventListener("scroll",this.scrollCallback,false)};e.prototype={"enableTimer":null,"delay":null,"scrollCallback":null,"removeHoverClass":function(){if("none"!==document.body.style.pointerEvents){document.body.style.pointerEvents="none"}},"addHoverClass":function(){document.body.style.pointerEvents="auto"},"destroy":function(){window.removeEventListener("scroll",this.scrollCallback,false)},"_onScroll":function(){clearTimeout(this.enableTimer);this.removeHoverClass();this.enableTimer=setTimeout(this.addHoverClass,this.delay)}};window.FastScroll=e})();(function(e){if(typeof define==="function"&&define.amd){define(["jquery"],e)}else if(typeof exports==="object"){e(require("jquery"))}else{e(jQuery)}})(function(d){d.ajaxPrefilter(function(e,t,i){i.retry=function(e){if(e.timeout){this.timeout=e.timeout}if(e.statusCodes){this.statusCodes=e.statusCodes}return this.pipe(null,n(this,e))}});function n(s,l){var u=l.times;var c=s.timeout;return function(e,t,i){var n=this;var r=new d.Deferred;var o=s.getResponseHeader("Retry-After");function a(){d.ajax(n).retry({"times":u-1,"timeout":l.timeout}).pipe(r.resolve,r.reject)}if(u>1&&(!s.statusCodes||d.inArray(e.status,s.statusCodes)>-1)){if(o){if(isNaN(o)){c=new Date(o).getTime()-d.now()}else{c=parseInt(o,10)*1e3}if(isNaN(c)||c<0){c=s.timeout}}if(c!==undefined){setTimeout(a,c)}else{a()}}else{r.rejectWith(this,arguments)}return r}}});(function(){"use strict";function e(T){T.fn._fadeIn=T.fn.fadeIn;var S=T.noop||function(){};var k=/MSIE/.test(navigator.userAgent);var R=/MSIE 6.0/.test(navigator.userAgent)&&!/MSIE 8.0/.test(navigator.userAgent);var e=document.documentMode||0;var C=T.isFunction(document.createElement("div").style.setExpression);T.blockUI=function(e){i(window,e)};T.unblockUI=function(e){L(window,e)};T.growlUI=function(e,t,i,n){var r=T('<div class="growlUI"></div>');if(e)r.append("<h1>"+e+"</h1>");if(t)r.append("<h2>"+t+"</h2>");if(i===undefined)i=3e3;var o=function(e){e=e||{};T.blockUI({"message":r,"fadeIn":typeof e.fadeIn!=="undefined"?e.fadeIn:700,"fadeOut":typeof e.fadeOut!=="undefined"?e.fadeOut:1e3,"timeout":typeof e.timeout!=="undefined"?e.timeout:i,"centerY":false,"showOverlay":false,"onUnblock":n,"css":T.blockUI.defaults.growlCSS})};o();var a=r.css("opacity");r.mouseover(function(){o({"fadeIn":0,"timeout":3e4});var e=T(".blockMsg");e.stop();e.fadeTo(300,1)}).mouseout(function(){T(".blockMsg").fadeOut(1e3)})};T.fn.block=function(e){if(this[0]===window){T.blockUI(e);return this}var t=T.extend({},T.blockUI.defaults,e||{});this.each(function(){var e=T(this);if(t.ignoreIfBlocked&&e.data("blockUI.isBlocked"))return;e.unblock({"fadeOut":0})});return this.each(function(){if(T.css(this,"position")=="static"){this.style.position="relative";T(this).data("blockUI.static",true)}this.style.zoom=1;i(this,e)})};T.fn.unblock=function(e){if(this[0]===window){T.unblockUI(e);return this}return this.each(function(){L(this,e)})};T.blockUI.version=2.7;T.blockUI.defaults={"message":"<h1>Please wait...</h1>","title":null,"draggable":true,"theme":false,"css":{"padding":0,"margin":0,"width":"30%","top":"40%","left":"35%","textAlign":"center","color":"#000","border":"3px solid #aaa","backgroundColor":"#fff","cursor":"wait"},"themedCSS":{"width":"30%","top":"40%","left":"35%"},"overlayCSS":{"backgroundColor":"#000","opacity":.6,"cursor":"wait"},"cursorReset":"default","growlCSS":{"width":"350px","top":"10px","left":"","right":"10px","border":"none","padding":"5px","opacity":.6,"cursor":"default","color":"#fff","backgroundColor":"#000","-webkit-border-radius":"10px","-moz-border-radius":"10px","border-radius":"10px"},"iframeSrc":/^https/i.test(window.location.href||"")?"javascript:false":"about:blank","forceIframe":false,"baseZ":1e3,"centerX":true,"centerY":true,"allowBodyStretch":true,"bindEvents":true,"constrainTabKey":true,"fadeIn":200,"fadeOut":400,"timeout":0,"showOverlay":true,"focusInput":true,"focusableElements":":input:enabled:visible","onBlock":null,"onUnblock":null,"onOverlayClick":null,"quirksmodeOffsetHack":4,"blockMsgClass":"blockMsg","ignoreIfBlocked":false};var A=null;var O=[];function i(e,o){var t,i;var a=e==window;var n=o&&o.message!==undefined?o.message:undefined;o=T.extend({},T.blockUI.defaults,o||{});if(o.ignoreIfBlocked&&T(e).data("blockUI.isBlocked"))return;o.overlayCSS=T.extend({},T.blockUI.defaults.overlayCSS,o.overlayCSS||{});t=T.extend({},T.blockUI.defaults.css,o.css||{});if(o.onOverlayClick)o.overlayCSS.cursor="pointer";i=T.extend({},T.blockUI.defaults.themedCSS,o.themedCSS||{});n=n===undefined?o.message:n;if(a&&A)L(window,{"fadeOut":0});if(n&&typeof n!="string"&&(n.parentNode||n.jquery)){var r=n.jquery?n[0]:n;var s={};T(e).data("blockUI.history",s);s.el=r;s.parent=r.parentNode;s.display=r.style.display;s.position=r.style.position;if(s.parent)s.parent.removeChild(r)}T(e).data("blockUI.onUnblock",o.onUnblock);var l=o.baseZ;var u,c,d,h;if(k||o.forceIframe)u=T('<iframe class="blockUI" style="z-index:'+l+++';display:none;border:none;margin:0;padding:0;position:absolute;width:100%;height:100%;top:0;left:0" src="'+o.iframeSrc+'"></iframe>');else u=T('<div class="blockUI" style="display:none"></div>');if(o.theme)c=T('<div class="blockUI blockOverlay ui-widget-overlay" style="z-index:'+l+++';display:none"></div>');else c=T('<div class="blockUI blockOverlay" style="z-index:'+l+++';display:none;border:none;margin:0;padding:0;width:100%;height:100%;top:0;left:0"></div>');if(o.theme&&a){h='<div class="blockUI '+o.blockMsgClass+' blockPage ui-dialog ui-widget ui-corner-all" style="z-index:'+(l+10)+';display:none;position:fixed">';if(o.title){h+='<div class="ui-widget-header ui-dialog-titlebar ui-corner-all blockTitle">'+(o.title||"&nbsp;")+"</div>"}h+='<div class="ui-widget-content ui-dialog-content"></div>';h+="</div>"}else if(o.theme){h='<div class="blockUI '+o.blockMsgClass+' blockElement ui-dialog ui-widget ui-corner-all" style="z-index:'+(l+10)+';display:none;position:absolute">';if(o.title){h+='<div class="ui-widget-header ui-dialog-titlebar ui-corner-all blockTitle">'+(o.title||"&nbsp;")+"</div>"}h+='<div class="ui-widget-content ui-dialog-content"></div>';h+="</div>"}else if(a){h='<div class="blockUI '+o.blockMsgClass+' blockPage" style="z-index:'+(l+10)+';display:none;position:fixed"></div>'}else{h='<div class="blockUI '+o.blockMsgClass+' blockElement" style="z-index:'+(l+10)+';display:none;position:absolute"></div>'}d=T(h);if(n){if(o.theme){d.css(i);d.addClass("ui-widget-content")}else d.css(t)}if(!o.theme)c.css(o.overlayCSS);c.css("position",a?"fixed":"absolute");if(k||o.forceIframe)u.css("opacity",0);var f=[u,c,d],p=a?T("body"):T(e);T.each(f,function(){this.appendTo(p)});if(o.theme&&o.draggable&&T.fn.draggable){d.draggable({"handle":".ui-dialog-titlebar","cancel":"li"})}var g=C&&(!T.support.boxModel||T("object,embed",a?null:e).length>0);if(R||g){if(a&&o.allowBodyStretch&&T.support.boxModel)T("html,body").css("height","100%");if((R||!T.support.boxModel)&&!a){var v=M(e,"borderTopWidth"),m=M(e,"borderLeftWidth");var y=v?"(0 - "+v+")":0;var b=m?"(0 - "+m+")":0}T.each(f,function(e,t){var i=t[0].style;i.position="absolute";if(e<2){if(a)i.setExpression("height","Math.max(document.body.scrollHeight, document.body.offsetHeight) - (jQuery.support.boxModel?0:"+o.quirksmodeOffsetHack+') + "px"');else i.setExpression("height",'this.parentNode.offsetHeight + "px"');if(a)i.setExpression("width",'jQuery.support.boxModel && document.documentElement.clientWidth || document.body.clientWidth + "px"');else i.setExpression("width",'this.parentNode.offsetWidth + "px"');if(b)i.setExpression("left",b);if(y)i.setExpression("top",y)}else if(o.centerY){if(a)i.setExpression("top",'(document.documentElement.clientHeight || document.body.clientHeight) / 2 - (this.offsetHeight / 2) + (blah = document.documentElement.scrollTop ? document.documentElement.scrollTop : document.body.scrollTop) + "px"');i.marginTop=0}else if(!o.centerY&&a){var n=o.css&&o.css.top?parseInt(o.css.top,10):0;var r="((document.documentElement.scrollTop ? document.documentElement.scrollTop : document.body.scrollTop) + "+n+') + "px"';i.setExpression("top",r)}})}if(n){if(o.theme)d.find(".ui-widget-content").append(n);else d.append(n);if(n.jquery||n.nodeType)T(n).show()}if((k||o.forceIframe)&&o.showOverlay)u.show();if(o.fadeIn){var _=o.onBlock?o.onBlock:S;var w=o.showOverlay&&!n?_:S;var E=n?_:S;if(o.showOverlay)c._fadeIn(o.fadeIn,w);if(n)d._fadeIn(o.fadeIn,E)}else{if(o.showOverlay)c.show();if(n)d.show();if(o.onBlock)o.onBlock.bind(d)()}P(1,e,o);if(a){A=d[0];O=T(o.focusableElements,A);if(o.focusInput)setTimeout(I,20)}else D(d[0],o.centerX,o.centerY);if(o.timeout){var x=setTimeout(function(){if(a)T.unblockUI(o);else T(e).unblock(o)},o.timeout);T(e).data("blockUI.timeout",x)}}function L(e,t){var i;var n=e==window;var r=T(e);var o=r.data("blockUI.history");var a=r.data("blockUI.timeout");if(a){clearTimeout(a);r.removeData("blockUI.timeout")}t=T.extend({},T.blockUI.defaults,t||{});P(0,e,t);if(t.onUnblock===null){t.onUnblock=r.data("blockUI.onUnblock");r.removeData("blockUI.onUnblock")}var s;if(n)s=T("body").children().filter(".blockUI").add("body > .blockUI");else s=r.find(">.blockUI");if(t.cursorReset){if(s.length>1)s[1].style.cursor=t.cursorReset;if(s.length>2)s[2].style.cursor=t.cursorReset}if(n)A=O=null;if(t.fadeOut){i=s.length;s.stop().fadeOut(t.fadeOut,function(){if(--i===0)l(s,o,t,e)})}else l(s,o,t,e)}function l(e,t,i,n){var r=T(n);if(r.data("blockUI.isBlocked"))return;e.each(function(e,t){if(this.parentNode)this.parentNode.removeChild(this)});if(t&&t.el){t.el.style.display=t.display;t.el.style.position=t.position;t.el.style.cursor="default";if(t.parent)t.parent.appendChild(t.el);r.removeData("blockUI.history")}if(r.data("blockUI.static")){r.css("position","static")}if(typeof i.onUnblock=="function")i.onUnblock(n,i);var o=T(document.body),a=o.width(),s=o[0].style.width;o.width(a-1).width(a);o[0].style.width=s}function P(e,t,i){var n=t==window,r=T(t);if(!e&&(n&&!A||!n&&!r.data("blockUI.isBlocked")))return;r.data("blockUI.isBlocked",e);if(!n||!i.bindEvents||e&&!i.showOverlay)return;var o="mousedown mouseup keydown keypress keyup touchstart touchend touchmove";if(e)T(document).bind(o,i,a);else T(document).unbind(o,a)}function a(e){if(e.type==="keydown"&&e.keyCode&&e.keyCode==9){if(A&&e.data.constrainTabKey){var t=O;var i=!e.shiftKey&&e.target===t[t.length-1];var n=e.shiftKey&&e.target===t[0];if(i||n){setTimeout(function(){I(n)},10);return false}}}var r=e.data;var o=T(e.target);if(o.hasClass("blockOverlay")&&r.onOverlayClick)r.onOverlayClick(e);if(o.parents("div."+r.blockMsgClass).length>0)return true;return o.parents().children().filter("div.blockUI").length===0}function I(e){if(!O)return;var t=O[e===true?O.length-1:0];if(t)t.focus()}function D(e,t,i){var n=e.parentNode,r=e.style;var o=(n.offsetWidth-e.offsetWidth)/2-M(n,"borderLeftWidth");var a=(n.offsetHeight-e.offsetHeight)/2-M(n,"borderTopWidth");if(t)r.left=o>0?o+"px":"0";if(i)r.top=a>0?a+"px":"0"}function M(e,t){return parseInt(T.css(e,t),10)||0}}if(typeof define==="function"&&define.amd&&define.amd.jQuery){define(["jquery"],e)}else{e(jQuery)}})();(function(l){l.clickDecorators={};l.event.special.click.handle=function(e){var i=l(this);var n=[],r=[],t;_.each(l.clickDecorators,function(e,t){if(e.isApplicable(i)){if(e.before){n.push(e.before)}if(e.after){r.push(e.after)}}});for(t=0;t<n.length;t++){var o=n[t].call(this,e);if(e.isImmediatePropagationStopped()){return}}var a=e.handleObj.handler.call(this,e);for(t=0;t<r.length;t++){var s=r[t].call(this,e,a);if(e.isImmediatePropagationStopped()){return}}return a}})(jQuery);(function(e){e.clickDecorators.nometa={"isApplicable":function(e){return e.data("click-nometa")},"before":function(e){if(e.ctrlKey||e.metaKey){e.stopImmediatePropagation()}}}})(jQuery);(function(n){var r=function(e){this._$elem=e;var t=n('<div class="clickConfirmed-bar" />');var i=n('<div class="clickConfirmed-tooltip" />');i.text(cm.language.get("Click again to confirm"));e.append(t);e.append(i);t[0].offsetHeight;if(e.offset().left+e.outerWidth()/2<i.outerWidth()/2){i.addClass("align-left")}else if(window.innerWidth<e.offset().left+e.outerWidth()+i.outerWidth()/2){i.addClass("align-right")}else{i.addClass("align-center")}};r.prototype.activate=function(){this._$elem.addClass("confirmClick");var t=this;_.delay(function(){t._$elem.addClass("ready")},400);this._$elem.data("confirmClick-data",this);this._timeout=setTimeout(function(){t.deactivate()},5e3);this._documentClickHandler=function(e){if(!t._$elem.length||e.target!==t._$elem[0]&&!n.contains(t._$elem[0],e.target)){t.deactivate()}};_.defer(function(){n(document).on("click.clickConfirmed",t._documentClickHandler)})};r.prototype.deactivate=function(){this._$elem.removeClass("confirmClick ready");this._$elem.removeData("confirmClick-data");this._$elem.find(".clickConfirmed-bar").remove();this._$elem.find(".clickConfirmed-tooltip").remove();clearTimeout(this._timeout);n(document).off("click.clickConfirmed",this._documentClickHandler)};n.clickDecorators.confirmed={"isApplicable":function(e){return e.data("click-confirmed")},"before":function(e){var t=n(this);var i=t.data("confirmClick-data");if(!i){i=new r(t);i.activate();e.preventDefault();e.stopImmediatePropagation()}},"after":function(e){var t=n(this);var i=t.data("confirmClick-data");if(i){i.deactivate()}}}})(jQuery);(function(r){r.clickDecorators.spinner={"isApplicable":function(e){return e.data("click-spinner")},"after":function(e,t){if(t&&t instanceof Promise&&t.isPending()){var i=r(e.currentTarget).closest("[data-click-spinner]");i.addClass("hasSpinner").prop("disabled",true).find(".spinner").remove();var n=r('<div class="spinner" />').appendTo(i);t.finally(function(){i.prop("disabled",false).removeClass("hasSpinner");n.remove()})}}}})(jQuery);(function(n){n.clickDecorators.disable={"isApplicable":function(e){return e.data("click-disable")},"after":function(e,t){if(t&&t instanceof Promise&&t.isPending()){var i=n(e.currentTarget).closest("[data-click-disable]");i.prop("disabled",true);t.finally(function(){i.prop("disabled",false)})}}}})(jQuery);(function(s){document.addEventListener("mousedown",function(e){var t=s(e.target).closest(".clickFeedback:not(:disabled)");if(t.length){var i=t.offset();var n=2*Math.sqrt(Math.pow(t.outerWidth(),2)+Math.pow(t.outerHeight(),2));var r=e.pageX;var o=e.pageY;var a=s('<div class="clickFeedback-ripple" />');a.css({"width":n,"height":n,"left":r-i.left-n/2,"top":o-i.top-n/2});t.append(a);a.transition({"scale":1},"200ms","in").transition({"opacity":0},"200ms","out",function(){a.remove()})}})})(jQuery);(function(r){function o(e){this.$elem=e;this.$content=this.$elem.children();this.$handle=null;this.$elem.addClass("clipSlide");this.$content.css({"display":"block"});var t=this;setTimeout(function(){t.toggle(false)},0)}o.prototype.toggle=function(e){var t=this.$elem;var i=this;if(e){if(t.height()<this.$content.outerHeight(true)){if(!this.isEnabled()){this.enable()}t.height(t.height());t.css("max-height","none");t.animate({"height":this.$content.outerHeight(true)},"fast",function(){i.$handle.toggle(false);t.css("height","auto")})}}else{if(t.height()<this.$content.outerHeight(true)){if(!this.isEnabled()){this.enable()}this.$handle.toggle(true)}else{t.trigger("toggle.clipSlide")}}};o.prototype.isEnabled=function(){return this.$elem.hasClass("clipSlide-enabled")};o.prototype.enable=function(){this.$elem.addClass("clipSlide-enabled");this.$handle=r('<a href="javascript:;" class="clipSlide-handle"><div class="icon icon-arrow-down"></div></a>').appendTo(this.$elem);var e=this;this.$handle.on("click.clipSlide",function(){e.toggle(true);e.$elem.trigger("toggle.clipSlide")})};r.fn.clipSlide=function(i,n){return this.each(function(){var e=r(this);var t=e.data("clipSlide");if(!t){t=new o(e);e.data("clipSlide",t)}switch(i){case"toggle":t.toggle(n);break;default:break}})}})(jQuery);(function(e){e.fn.cmView=function(e){if(1!=this.length){throw new Error("Can only operate on single jQuery element")}var t=this.first();e=e||"CM_View_Abstract";var i=t.closest("."+e).attr("id");if(!i){throw new Error("Cannot detect view-id")}var n=cm.views[i];if(!n){throw new Error("Cannot find view with id `"+i+"`.")}return n}})(jQuery);(function(e){if(typeof define==="function"&&define.amd){define(["jquery"],e)}else if(typeof exports==="object"){e(require("jquery"))}else{e(jQuery)}})(function(h){var t=/\+/g;function f(e){return m.raw?e:encodeURIComponent(e)}function p(e){return m.raw?e:decodeURIComponent(e)}function g(e){return f(m.json?JSON.stringify(e):String(e))}function n(e){if(e.indexOf('"')===0){e=e.slice(1,-1).replace(/\\"/g,'"').replace(/\\\\/g,"\\")}try{e=decodeURIComponent(e.replace(t," "));return m.json?JSON.parse(e):e}catch(e){}}function v(e,t){var i=m.raw?e:n(e);return h.isFunction(t)?t(i):i}var m=h.cookie=function(e,t,i){if(t!==undefined&&!h.isFunction(t)){i=h.extend({},m.defaults,i);if(typeof i.expires==="number"){var n=i.expires,r=i.expires=new Date;r.setTime(+r+n*864e5)}return document.cookie=[f(e),"=",g(t),i.expires?"; expires="+i.expires.toUTCString():"",i.path?"; path="+i.path:"",i.domain?"; domain="+i.domain:"",i.secure?"; secure":""].join("")}var o=e?undefined:{};var a=document.cookie?document.cookie.split("; "):[];for(var s=0,l=a.length;s<l;s++){var u=a[s].split("=");var c=p(u.shift());var d=u.join("=");if(e&&e===c){o=v(d,t);break}if(!e&&(d=v(d))!==undefined){o[c]=d}}return o};m.defaults={};h.removeCookie=function(e,t){if(h.cookie(e)===undefined){return false}h.cookie(e,"",h.extend({},t,{"expires":-1}));return!h.cookie(e)}});(function(a){var e=100;var s=3;var t=_.throttle(function(e){e.type="scrollTop";var t=a(this);var i=t.innerHeight();var n=t.scrollTop();var r=i*s;if(n<r){a(this).trigger("scrollTop",[e])}},e);a.event.special.scrollTop={"add":function(e){jQuery.event.add(this,"scroll",t);jQuery.event.add(this,"touchmove",t)},"remove":function(e){jQuery.event.remove(this,"scroll",t);jQuery.event.remove(this,"touchmove",t)}};var i=_.throttle(function(e){e.type="scrollBottom";var t=a(this);var i=t.is(a(window))?a("body").prop("scrollHeight"):t.prop("scrollHeight");var n=t.innerHeight();var r=i-n-t.scrollTop();var o=n*s;if(r<o){a(this).trigger("scrollBottom",[e])}},e);a.event.special.scrollBottom={"add":function(e){jQuery.event.add(this,"scroll",i);jQuery.event.add(this,"touchmove",i)},"remove":function(e){jQuery.event.remove(this,"scroll",i);jQuery.event.remove(this,"touchmove",i)}}})(jQuery);(function(t){t.fn.fancySelect=function(){return this.each(function(){var i=t(this);if(i.data("fancySelect")){return}i.addClass("fancySelect").data("fancySelect",true);var n=i.find("select");var e=function(){var e=n.get(0).selectedIndex;var t=n.find("option").eq(e).text();i.find(".fancySelect-select .label").text(t)};n.on("change fancyselect:update",function(){e()});e()})}})(jQuery);(function(e){"use strict";if(typeof define==="function"&&define.amd){define(["jquery"],e)}else if(typeof exports==="object"){e(require("jquery"))}else{e(window.jQuery)}})(function(l){"use strict";var n=0;l.ajaxTransport("iframe",function(r){if(r.async){var o=r.initialIframeSrc||"javascript:false;",a,s,t;return{"send":function(e,i){a=l('<form style="display:none;"></form>');a.attr("accept-charset",r.formAcceptCharset);t=/\?/.test(r.url)?"&":"?";if(r.type==="DELETE"){r.url=r.url+t+"_method=DELETE";r.type="POST"}else if(r.type==="PUT"){r.url=r.url+t+"_method=PUT";r.type="POST"}else if(r.type==="PATCH"){r.url=r.url+t+"_method=PATCH";r.type="POST"}n+=1;s=l('<iframe src="'+o+'" name="iframe-transport-'+n+'"></iframe>').bind("load",function(){var n,t=l.isArray(r.paramName)?r.paramName:[r.paramName];s.unbind("load").bind("load",function(){var t;try{t=s.contents();if(!t.length||!t[0].firstChild){throw new Error}}catch(e){t=undefined}i(200,"success",{"iframe":t});l('<iframe src="'+o+'"></iframe>').appendTo(a);window.setTimeout(function(){a.remove()},0)});a.prop("target",s.prop("name")).prop("action",r.url).prop("method",r.type);if(r.formData){l.each(r.formData,function(e,t){l('<input type="hidden"/>').prop("name",t.name).val(t.value).appendTo(a)})}if(r.fileInput&&r.fileInput.length&&r.type==="POST"){n=r.fileInput.clone();r.fileInput.after(function(e){return n[e]});if(r.paramName){r.fileInput.each(function(e){l(this).prop("name",t[e]||r.paramName)})}a.append(r.fileInput).prop("enctype","multipart/form-data").prop("encoding","multipart/form-data");r.fileInput.removeAttr("form")}a.submit();if(n&&n.length){r.fileInput.each(function(e,t){var i=l(n[e]);l(t).prop("name",i.prop("name")).attr("form",i.attr("form"));i.replaceWith(t)})}});a.append(s).appendTo(document.body)},"abort":function(){if(s){s.unbind("load").prop("src",o)}if(a){a.remove()}}}}});l.ajaxSetup({"converters":{"iframe text":function(e){return e&&l(e[0].body).text()},"iframe json":function(e){return e&&l.parseJSON(l(e[0].body).text())},"iframe html":function(e){return e&&l(e[0].body).html()},"iframe xml":function(e){var t=e&&e[0];return t&&l.isXMLDoc(t)?t:l.parseXML(t.XMLDocument&&t.XMLDocument.xml||l(t.body).html())},"iframe script":function(e){return e&&l.globalEval(l(e[0].body).text())}}})});(function(e){"use strict";if(typeof define==="function"&&define.amd){define(["jquery","jquery-ui/widget"],e)}else if(typeof exports==="object"){e(require("jquery"),require("./vendor/jquery.ui.widget"))}else{e(window.jQuery)}})(function(m){"use strict";m.support.fileInput=!(new RegExp("(Android (1\\.[0156]|2\\.[01]))"+"|(Windows Phone (OS 7|8\\.0))|(XBLWP)|(ZuneWP)|(WPDesktop)"+"|(w(eb)?OSBrowser)|(webOS)"+"|(Kindle/(1\\.0|2\\.[05]|3\\.0))").test(window.navigator.userAgent)||m('<input type="file">').prop("disabled"));m.support.xhrFileUpload=!!(window.ProgressEvent&&window.FileReader);m.support.xhrFormDataFileUpload=!!window.FormData;m.support.blobSlice=window.Blob&&(Blob.prototype.slice||Blob.prototype.webkitSlice||Blob.prototype.mozSlice);function e(i){var n=i==="dragover";return function(e){e.dataTransfer=e.originalEvent&&e.originalEvent.dataTransfer;var t=e.dataTransfer;if(t&&m.inArray("Files",t.types)!==-1&&this._trigger(i,m.Event(i,{"delegatedEvent":e}))!==false){e.preventDefault();if(n){t.dropEffect="copy"}}}}m.widget("blueimp.fileupload",{"options":{"dropZone":m(document),"pasteZone":undefined,"fileInput":undefined,"replaceFileInput":true,"paramName":undefined,"singleFileUploads":true,"limitMultiFileUploads":undefined,"limitMultiFileUploadSize":undefined,"limitMultiFileUploadSizeOverhead":512,"sequentialUploads":false,"limitConcurrentUploads":undefined,"forceIframeTransport":false,"redirect":undefined,"redirectParamName":undefined,"postMessage":undefined,"multipart":true,"maxChunkSize":undefined,"uploadedBytes":undefined,"recalculateProgress":true,"progressInterval":100,"bitrateInterval":500,"autoUpload":true,"messages":{"uploadedBytes":"Uploaded bytes exceed file size"},"i18n":function(i,e){i=this.messages[i]||i.toString();if(e){m.each(e,function(e,t){i=i.replace("{"+e+"}",t)})}return i},"formData":function(e){return e.serializeArray()},"add":function(e,t){if(e.isDefaultPrevented()){return false}if(t.autoUpload||t.autoUpload!==false&&m(this).fileupload("option","autoUpload")){t.process().done(function(){t.submit()})}},"processData":false,"contentType":false,"cache":false,"timeout":0},"_specialOptions":["fileInput","dropZone","pasteZone","multipart","forceIframeTransport"],"_blobSlice":m.support.blobSlice&&function(){var e=this.slice||this.webkitSlice||this.mozSlice;return e.apply(this,arguments)},"_BitrateTimer":function(){this.timestamp=Date.now?Date.now():(new Date).getTime();this.loaded=0;this.bitrate=0;this.getBitrate=function(e,t,i){var n=e-this.timestamp;if(!this.bitrate||!i||n>i){this.bitrate=(t-this.loaded)*(1e3/n)*8;this.loaded=t;this.timestamp=e}return this.bitrate}},"_isXHRUpload":function(e){return!e.forceIframeTransport&&(!e.multipart&&m.support.xhrFileUpload||m.support.xhrFormDataFileUpload)},"_getFormData":function(e){var i;if(m.type(e.formData)==="function"){return e.formData(e.form)}if(m.isArray(e.formData)){return e.formData}if(m.type(e.formData)==="object"){i=[];m.each(e.formData,function(e,t){i.push({"name":e,"value":t})});return i}return[]},"_getTotal":function(e){var i=0;m.each(e,function(e,t){i+=t.size||1});return i},"_initProgressObject":function(e){var t={"loaded":0,"total":0,"bitrate":0};if(e._progress){m.extend(e._progress,t)}else{e._progress=t}},"_initResponseObject":function(e){var t;if(e._response){for(t in e._response){if(e._response.hasOwnProperty(t)){delete e._response[t]}}}else{e._response={}}},"_onProgress":function(e,t){if(e.lengthComputable){var i=Date.now?Date.now():(new Date).getTime(),n;if(t._time&&t.progressInterval&&i-t._time<t.progressInterval&&e.loaded!==e.total){return}t._time=i;n=Math.floor(e.loaded/e.total*(t.chunkSize||t._progress.total))+(t.uploadedBytes||0);this._progress.loaded+=n-t._progress.loaded;this._progress.bitrate=this._bitrateTimer.getBitrate(i,this._progress.loaded,t.bitrateInterval);t._progress.loaded=t.loaded=n;t._progress.bitrate=t.bitrate=t._bitrateTimer.getBitrate(i,n,t.bitrateInterval);this._trigger("progress",m.Event("progress",{"delegatedEvent":e}),t);this._trigger("progressall",m.Event("progressall",{"delegatedEvent":e}),this._progress)}},"_initProgressListener":function(i){var n=this,e=i.xhr?i.xhr():m.ajaxSettings.xhr();if(e.upload){m(e.upload).bind("progress",function(e){var t=e.originalEvent;e.lengthComputable=t.lengthComputable;e.loaded=t.loaded;e.total=t.total;n._onProgress(e,i)});i.xhr=function(){return e}}},"_isInstanceOf":function(e,t){return Object.prototype.toString.call(t)==="[object "+e+"]"},"_initXHRData":function(i){var n=this,r,e=i.files[0],t=i.multipart||!m.support.xhrFileUpload,o=m.type(i.paramName)==="array"?i.paramName[0]:i.paramName;i.headers=m.extend({},i.headers);if(i.contentRange){i.headers["Content-Range"]=i.contentRange}if(!t||i.blob||!this._isInstanceOf("File",e)){i.headers["Content-Disposition"]='attachment; filename="'+encodeURI(e.name)+'"'}if(!t){i.contentType=e.type||"application/octet-stream";i.data=i.blob||e}else if(m.support.xhrFormDataFileUpload){if(i.postMessage){r=this._getFormData(i);if(i.blob){r.push({"name":o,"value":i.blob})}else{m.each(i.files,function(e,t){r.push({"name":m.type(i.paramName)==="array"&&i.paramName[e]||o,"value":t})})}}else{if(n._isInstanceOf("FormData",i.formData)){r=i.formData}else{r=new FormData;m.each(this._getFormData(i),function(e,t){r.append(t.name,t.value)})}if(i.blob){r.append(o,i.blob,e.name)}else{m.each(i.files,function(e,t){if(n._isInstanceOf("File",t)||n._isInstanceOf("Blob",t)){r.append(m.type(i.paramName)==="array"&&i.paramName[e]||o,t,t.uploadName||t.name)}})}}i.data=r}i.blob=null},"_initIframeSettings":function(e){var t=m("<a></a>").prop("href",e.url).prop("host");e.dataType="iframe "+(e.dataType||"");e.formData=this._getFormData(e);if(e.redirect&&t&&t!==location.host){e.formData.push({"name":e.redirectParamName||"redirect","value":e.redirect})}},"_initDataSettings":function(e){if(this._isXHRUpload(e)){if(!this._chunkedUpload(e,true)){if(!e.data){this._initXHRData(e)}this._initProgressListener(e)}if(e.postMessage){e.dataType="postmessage "+(e.dataType||"")}}else{this._initIframeSettings(e)}},"_getParamName":function(e){var t=m(e.fileInput),n=e.paramName;if(!n){n=[];t.each(function(){var e=m(this),t=e.prop("name")||"files[]",i=(e.prop("files")||[1]).length;while(i){n.push(t);i-=1}});if(!n.length){n=[t.prop("name")||"files[]"]}}else if(!m.isArray(n)){n=[n]}return n},"_initFormSettings":function(e){if(!e.form||!e.form.length){e.form=m(e.fileInput.prop("form"));if(!e.form.length){e.form=m(this.options.fileInput.prop("form"))}}e.paramName=this._getParamName(e);if(!e.url){e.url=e.form.prop("action")||location.href}e.type=(e.type||m.type(e.form.prop("method"))==="string"&&e.form.prop("method")||"").toUpperCase();if(e.type!=="POST"&&e.type!=="PUT"&&e.type!=="PATCH"){e.type="POST"}if(!e.formAcceptCharset){e.formAcceptCharset=e.form.attr("accept-charset")}},"_getAJAXSettings":function(e){var t=m.extend({},this.options,e);this._initFormSettings(t);this._initDataSettings(t);return t},"_getDeferredState":function(e){if(e.state){return e.state()}if(e.isResolved()){return"resolved"}if(e.isRejected()){return"rejected"}return"pending"},"_enhancePromise":function(e){e.success=e.done;e.error=e.fail;e.complete=e.always;return e},"_getXHRPromise":function(e,t,i){var n=m.Deferred(),r=n.promise();t=t||this.options.context||r;if(e===true){n.resolveWith(t,i)}else if(e===false){n.rejectWith(t,i)}r.abort=n.promise;return this._enhancePromise(r)},"_addConvenienceMethods":function(e,i){var n=this,r=function(e){return m.Deferred().resolveWith(n,e).promise()};i.process=function(e,t){if(e||t){i._processQueue=this._processQueue=(this._processQueue||r([this])).then(function(){if(i.errorThrown){return m.Deferred().rejectWith(n,[i]).promise()}return r(arguments)}).then(e,t)}return this._processQueue||r([this])};i.submit=function(){if(this.state()!=="pending"){i.jqXHR=this.jqXHR=n._trigger("submit",m.Event("submit",{"delegatedEvent":e}),this)!==false&&n._onSend(e,this)}return this.jqXHR||n._getXHRPromise()};i.abort=function(){if(this.jqXHR){return this.jqXHR.abort()}this.errorThrown="abort";n._trigger("fail",null,this);return n._getXHRPromise(false)};i.state=function(){if(this.jqXHR){return n._getDeferredState(this.jqXHR)}if(this._processQueue){return n._getDeferredState(this._processQueue)}};i.processing=function(){return!this.jqXHR&&this._processQueue&&n._getDeferredState(this._processQueue)==="pending"};i.progress=function(){return this._progress};i.response=function(){return this._response}},"_getUploadedBytes":function(e){var t=e.getResponseHeader("Range"),i=t&&t.split("-"),n=i&&i.length>1&&parseInt(i[1],10);return n&&n+1},"_chunkedUpload":function(o,e){o.uploadedBytes=o.uploadedBytes||0;var a=this,t=o.files[0],s=t.size,l=o.uploadedBytes,i=o.maxChunkSize||s,u=this._blobSlice,c=m.Deferred(),n=c.promise(),d,h;if(!(this._isXHRUpload(o)&&u&&(l||i<s))||o.data){return false}if(e){return true}if(l>=s){t.error=o.i18n("uploadedBytes");return this._getXHRPromise(false,o.context,[null,"error",t.error])}h=function(){var n=m.extend({},o),r=n._progress.loaded;n.blob=u.call(t,l,l+i,t.type);n.chunkSize=n.blob.size;n.contentRange="bytes "+l+"-"+(l+n.chunkSize-1)+"/"+s;a._initXHRData(n);a._initProgressListener(n);d=(a._trigger("chunksend",null,n)!==false&&m.ajax(n)||a._getXHRPromise(false,n.context)).done(function(e,t,i){l=a._getUploadedBytes(i)||l+n.chunkSize;if(r+n.chunkSize-n._progress.loaded){a._onProgress(m.Event("progress",{"lengthComputable":true,"loaded":l-n.uploadedBytes,"total":l-n.uploadedBytes}),n)}o.uploadedBytes=n.uploadedBytes=l;n.result=e;n.textStatus=t;n.jqXHR=i;a._trigger("chunkdone",null,n);a._trigger("chunkalways",null,n);if(l<s){h()}else{c.resolveWith(n.context,[e,t,i])}}).fail(function(e,t,i){n.jqXHR=e;n.textStatus=t;n.errorThrown=i;a._trigger("chunkfail",null,n);a._trigger("chunkalways",null,n);c.rejectWith(n.context,[e,t,i])})};this._enhancePromise(n);n.abort=function(){return d.abort()};h();return n},"_beforeSend":function(e,t){if(this._active===0){this._trigger("start");this._bitrateTimer=new this._BitrateTimer;this._progress.loaded=this._progress.total=0;this._progress.bitrate=0}this._initResponseObject(t);this._initProgressObject(t);t._progress.loaded=t.loaded=t.uploadedBytes||0;t._progress.total=t.total=this._getTotal(t.files)||1;t._progress.bitrate=t.bitrate=0;this._active+=1;this._progress.loaded+=t.loaded;this._progress.total+=t.total},"_onDone":function(e,t,i,n){var r=n._progress.total,o=n._response;if(n._progress.loaded<r){this._onProgress(m.Event("progress",{"lengthComputable":true,"loaded":r,"total":r}),n)}o.result=n.result=e;o.textStatus=n.textStatus=t;o.jqXHR=n.jqXHR=i;this._trigger("done",null,n)},"_onFail":function(e,t,i,n){var r=n._response;if(n.recalculateProgress){this._progress.loaded-=n._progress.loaded;this._progress.total-=n._progress.total}r.jqXHR=n.jqXHR=e;r.textStatus=n.textStatus=t;r.errorThrown=n.errorThrown=i;this._trigger("fail",null,n)},"_onAlways":function(e,t,i,n){this._trigger("always",null,n)},"_onSend":function(e,t){if(!t.submit){this._addConvenienceMethods(e,t)}var r=this,i,n,o,a,s=r._getAJAXSettings(t),l=function(){r._sending+=1;s._bitrateTimer=new r._BitrateTimer;i=i||((n||r._trigger("send",m.Event("send",{"delegatedEvent":e}),s)===false)&&r._getXHRPromise(false,s.context,n)||r._chunkedUpload(s)||m.ajax(s)).done(function(e,t,i){r._onDone(e,t,i,s)}).fail(function(e,t,i){r._onFail(e,t,i,s)}).always(function(e,t,i){r._onAlways(e,t,i,s);r._sending-=1;r._active-=1;if(s.limitConcurrentUploads&&s.limitConcurrentUploads>r._sending){var n=r._slots.shift();while(n){if(r._getDeferredState(n)==="pending"){n.resolve();break}n=r._slots.shift()}}if(r._active===0){r._trigger("stop")}});return i};this._beforeSend(e,s);if(this.options.sequentialUploads||this.options.limitConcurrentUploads&&this.options.limitConcurrentUploads<=this._sending){if(this.options.limitConcurrentUploads>1){o=m.Deferred();this._slots.push(o);a=o.then(l)}else{this._sequence=this._sequence.then(l,l);a=this._sequence}a.abort=function(){n=[undefined,"abort","abort"];if(!i){if(o){o.rejectWith(s.context,n)}return l()}return i.abort()};return this._enhancePromise(a)}return l()},"_onAdd":function(n,r){var o=this,a=true,e=m.extend({},this.options,r),t=r.files,i=t.length,s=e.limitMultiFileUploads,l=e.limitMultiFileUploadSize,u=e.limitMultiFileUploadSizeOverhead,c=0,d=this._getParamName(e),h,f,p,g,v=0;if(!i){return false}if(l&&t[0].size===undefined){l=undefined}if(!(e.singleFileUploads||s||l)||!this._isXHRUpload(e)){p=[t];h=[d]}else if(!(e.singleFileUploads||l)&&s){p=[];h=[];for(g=0;g<i;g+=s){p.push(t.slice(g,g+s));f=d.slice(g,g+s);if(!f.length){f=d}h.push(f)}}else if(!e.singleFileUploads&&l){p=[];h=[];for(g=0;g<i;g=g+1){c+=t[g].size+u;if(g+1===i||c+t[g+1].size+u>l||s&&g+1-v>=s){p.push(t.slice(v,g+1));f=d.slice(v,g+1);if(!f.length){f=d}h.push(f);v=g+1;c=0}}}else{h=d}r.originalFiles=t;m.each(p||t,function(e,t){var i=m.extend({},r);i.files=p?t:[t];i.paramName=h[e];o._initResponseObject(i);o._initProgressObject(i);o._addConvenienceMethods(n,i);a=o._trigger("add",m.Event("add",{"delegatedEvent":n}),i);return a});return a},"_replaceFileInput":function(e){var i=e.fileInput,n=i.clone(true),t=i.is(document.activeElement);e.fileInputClone=n;m("<form></form>").append(n)[0].reset();i.after(n).detach();if(t){n.focus()}m.cleanData(i.unbind("remove"));this.options.fileInput=this.options.fileInput.map(function(e,t){if(t===i[0]){return n[0]}return t});if(i[0]===this.element[0]){this.element=n}},"_handleFileTreeEntry":function(t,i){var n=this,r=m.Deferred(),o=[],e,a=function(e){if(e&&!e.entry){e.entry=t}r.resolve([e])},s=function(e){n._handleFileTreeEntries(e,i+t.name+"/").done(function(e){r.resolve(e)}).fail(a)},l=function(){e.readEntries(function(e){if(!e.length){s(o)}else{o=o.concat(e);l()}},a)};i=i||"";if(t.isFile){if(t._file){t._file.relativePath=i;r.resolve(t._file)}else{t.file(function(e){e.relativePath=i;r.resolve(e)},a)}}else if(t.isDirectory){e=t.createReader();l()}else{r.resolve([])}return r.promise()},"_handleFileTreeEntries":function(e,t){var i=this;return m.when.apply(m,m.map(e,function(e){return i._handleFileTreeEntry(e,t)})).then(function(){return Array.prototype.concat.apply([],arguments)})},"_getDroppedFiles":function(e){e=e||{};var t=e.items;if(t&&t.length&&(t[0].webkitGetAsEntry||t[0].getAsEntry)){return this._handleFileTreeEntries(m.map(t,function(e){var t;if(e.webkitGetAsEntry){t=e.webkitGetAsEntry();if(t){t._file=e.getAsFile()}return t}return e.getAsEntry()}))}return m.Deferred().resolve(m.makeArray(e.files)).promise()},"_getSingleFileInputFiles":function(e){e=m(e);var t=e.prop("webkitEntries")||e.prop("entries"),i,n;if(t&&t.length){return this._handleFileTreeEntries(t)}i=m.makeArray(e.prop("files"));if(!i.length){n=e.prop("value");if(!n){return m.Deferred().resolve([]).promise()}i=[{"name":n.replace(/^.*\\/,"")}]}else if(i[0].name===undefined&&i[0].fileName){m.each(i,function(e,t){t.name=t.fileName;t.size=t.fileSize})}return m.Deferred().resolve(i).promise()},"_getFileInputFiles":function(e){if(!(e instanceof m)||e.length===1){return this._getSingleFileInputFiles(e)}return m.when.apply(m,m.map(e,this._getSingleFileInputFiles)).then(function(){return Array.prototype.concat.apply([],arguments)})},"_onChange":function(t){var i=this,n={"fileInput":m(t.target),"form":m(t.target.form)};this._getFileInputFiles(n.fileInput).always(function(e){n.files=e;if(i.options.replaceFileInput){i._replaceFileInput(n)}if(i._trigger("change",m.Event("change",{"delegatedEvent":t}),n)!==false){i._onAdd(t,n)}})},"_onPaste":function(e){var t=e.originalEvent&&e.originalEvent.clipboardData&&e.originalEvent.clipboardData.items,n={"files":[]};if(t&&t.length){m.each(t,function(e,t){var i=t.getAsFile&&t.getAsFile();if(i){n.files.push(i)}});if(this._trigger("paste",m.Event("paste",{"delegatedEvent":e}),n)!==false){this._onAdd(e,n)}}},"_onDrop":function(t){t.dataTransfer=t.originalEvent&&t.originalEvent.dataTransfer;var i=this,e=t.dataTransfer,n={};if(e&&e.files&&e.files.length){t.preventDefault();this._getDroppedFiles(e).always(function(e){n.files=e;if(i._trigger("drop",m.Event("drop",{"delegatedEvent":t}),n)!==false){i._onAdd(t,n)}})}},"_onDragOver":e("dragover"),"_onDragEnter":e("dragenter"),"_onDragLeave":e("dragleave"),"_initEventHandlers":function(){if(this._isXHRUpload(this.options)){this._on(this.options.dropZone,{"dragover":this._onDragOver,"drop":this._onDrop,"dragenter":this._onDragEnter,"dragleave":this._onDragLeave});this._on(this.options.pasteZone,{"paste":this._onPaste})}if(m.support.fileInput){this._on(this.options.fileInput,{"change":this._onChange})}},"_destroyEventHandlers":function(){this._off(this.options.dropZone,"dragenter dragleave dragover drop");this._off(this.options.pasteZone,"paste");this._off(this.options.fileInput,"change")},"_destroy":function(){this._destroyEventHandlers()},"_setOption":function(e,t){var i=m.inArray(e,this._specialOptions)!==-1;if(i){this._destroyEventHandlers()}this._super(e,t);if(i){this._initSpecialOptions();this._initEventHandlers()}},"_initSpecialOptions":function(){var e=this.options;if(e.fileInput===undefined){e.fileInput=this.element.is('input[type="file"]')?this.element:this.element.find('input[type="file"]')}else if(!(e.fileInput instanceof m)){e.fileInput=m(e.fileInput)}if(!(e.dropZone instanceof m)){e.dropZone=m(e.dropZone)}if(!(e.pasteZone instanceof m)){e.pasteZone=m(e.pasteZone)}},"_getRegExp":function(e){var t=e.split("/"),i=t.pop();t.shift();return new RegExp(t.join("/"),i)},"_isRegExpOption":function(e,t){return e!=="url"&&m.type(t)==="string"&&/^\/.*\/[igm]{0,3}$/.test(t)},"_initDataAttributes":function(){var r=this,o=this.options,a=this.element.data();m.each(this.element[0].attributes,function(e,t){var i=t.name.toLowerCase(),n;if(/^data-/.test(i)){i=i.slice(5).replace(/-[a-z]/g,function(e){return e.charAt(1).toUpperCase()});n=a[i];if(r._isRegExpOption(i,n)){n=r._getRegExp(n)}o[i]=n}})},"_create":function(){this._initDataAttributes();this._initSpecialOptions();this._slots=[];this._sequence=this._getXHRPromise(true);this._sending=this._active=0;this._initProgressObject(this);this._initEventHandlers()},"active":function(){return this._active},"progress":function(){return this._progress},"add":function(t){var i=this;if(!t||this.options.disabled){return}if(t.fileInput&&!t.files){this._getFileInputFiles(t.fileInput).always(function(e){t.files=e;i._onAdd(null,t)})}else{t.files=m.makeArray(t.files);this._onAdd(null,t)}},"send":function(t){if(t&&!this.options.disabled){if(t.fileInput&&!t.files){var i=this,n=m.Deferred(),e=n.promise(),r,o;e.abort=function(){o=true;if(r){return r.abort()}n.reject(null,"abort","abort");return e};this._getFileInputFiles(t.fileInput).always(function(e){if(o){return}if(!e.length){n.reject();return}t.files=e;r=i._onSend(null,t);r.then(function(e,t,i){n.resolve(e,t,i)},function(e,t,i){n.reject(e,t,i)})});return this._enhancePromise(e)}t.files=m.makeArray(t.files);if(t.files.length){return this._onSend(null,t)}}return this._getXHRPromise(false,t&&t.context)}})});(function(s){var t={"focusElement":null,"closable":true,"fullscreen":false};s.floatbox=function(e){this.options=s.extend({},t,e||{})};var l=s(document),u=s("html"),c=s("body");var d=null;var h=null;var f=null;l.on("keydown.floatbox",function(e){if(e.which==27){if(d&&d.children().length){d.children(".floatbox-layer:last").find(".floatbox").floatbox("close")}}});s.floatbox.fn=s.floatbox.prototype;s.floatbox.fn.extend=s.extend;s.floatbox.fn.extend({"options":null,"windowResizeCallback":null,"$parent":null,"$layer":null,"$floatbox":null,"setOptions":function(e){if(_.isObject(e)){_.extend(this.options,e);this.repaint()}else{throw new Error("Invalid param to floatbox.setOptions")}},"show":function(e){var t=e.find(".floatbox-config:first");this.options.fullscreen=t.data("fullscreen")||this.options.fullscreen;this.$parent=e.parent();if(!d){h={"top":l.scrollTop(),"left":l.scrollLeft()};d=s('<div id="floatbox-viewport"/>');c.append(d);u.addClass("floatbox-active");c.css({"top":-h.top,"left":-h.left})}this.$layer=s('<div class="floatbox-layer active"/>');var i=s('<div class="floatbox-overlay"/>');var n=s('<div class="floatbox-container"/>');var r=s('<div class="floatbox-controls"/>');var o=s('<div class="floatbox-body"/>');f=document.activeElement;if(this.options.closable){r.append('<a class="closeFloatbox icon-close" role="button" href="javascript:;" title="'+cm.language.get("Close")+'"/>')}this.$floatbox=s('<div class="floatbox" role="dialog" aria-hidden="false" tabindex="0" />');if(this.options.fullscreen){this.$floatbox.addClass("fullscreen")}d.children(".floatbox-layer.active").removeClass("active");o.append(e.get(0));this.$floatbox.append(o,r);d.append(this.$layer.append(i,n.append(this.$floatbox)));var a=this;this.windowResizeCallback=function(){a.repaint.apply(a)};s(window).on("resize.floatbox",this.windowResizeCallback);this.repaint();_.defer(function(){a.$floatbox.addClass("fadeIn")});n.add(i).addClass("fadeIn").on("click.floatbox",function(e){if(this===e.target){a.close.apply(a)}});r.on("click.floatbox",".closeFloatbox",function(){a.close.apply(a)});this._getFocusElement().focus();this.$floatbox.trap();this.$layer.data("floatbox",this);e.triggerHandler("floatbox-open")},"close":function(){if(!this.options.closable){return}var e=this.$floatbox.children(".floatbox-body").children();if(this.$parent.length){this.$parent.append(e)}this.$floatbox.triggerHandler("floatbox-close");this.$layer.remove();d.children(".floatbox-layer:last").addClass("active");if(f){f.focus()}f=null;if(!d.children().length){d.remove();d=null;u.removeClass("floatbox-active");window.scrollTo(h.left,h.top);c.css({"top":0,"left":0})}s(window).off("resize.floatbox",this.windowResizeCallback);e.triggerHandler("floatbox-close");this.$parent=null;this.$floatbox=null;this.$layer=null},"repaint":function(){if(this.options.fullscreen){var e=s(window).height();this.$floatbox.css("min-height",e)}else{var t=Math.max(0,(d.outerHeight(true)-this.$floatbox.outerHeight())/4);this.$floatbox.css("margin-top",t)}},"_getFocusElement":function(){var e=this.options.focusElement;var t;if(e){if(s.contains(this.$floatbox[0],e)){t=s(e)}else{throw new Error("floatbox must contain options.focusElement.")}}else{t=this.$floatbox}return t}});s.fn.floatbox=function(t,i){var n;if(t&&_.isString(t)){n=t;i=[].slice.call(arguments,1)}return this.each(function(){var e;if(n){e=s(this).closest(".floatbox-layer").data("floatbox");if(e&&_.isFunction(e[n])){e[n].apply(e,i)}}else{e=new s.floatbox(t);e.show(s(this))}})}})(jQuery);(function(o){o.color={};o.color.make=function(e,t,i,n){var r={};r.r=e||0;r.g=t||0;r.b=i||0;r.a=n!=null?n:1;r.add=function(e,t){for(var i=0;i<e.length;++i)r[e.charAt(i)]+=t;return r.normalize()};r.scale=function(e,t){for(var i=0;i<e.length;++i)r[e.charAt(i)]*=t;return r.normalize()};r.toString=function(){if(r.a>=1){return"rgb("+[r.r,r.g,r.b].join(",")+")"}else{return"rgba("+[r.r,r.g,r.b,r.a].join(",")+")"}};r.normalize=function(){function e(e,t,i){return t<e?e:t>i?i:t}r.r=e(0,parseInt(r.r),255);r.g=e(0,parseInt(r.g),255);r.b=e(0,parseInt(r.b),255);r.a=e(0,r.a,1);return r};r.clone=function(){return o.color.make(r.r,r.b,r.g,r.a)};return r.normalize()};o.color.extract=function(e,t){var i;do{i=e.css(t).toLowerCase();if(i!=""&&i!="transparent")break;e=e.parent()}while(e.length&&!o.nodeName(e.get(0),"body"));if(i=="rgba(0, 0, 0, 0)")i="transparent";return o.color.parse(i)};o.color.parse=function(e){var t,i=o.color.make;if(t=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/.exec(e))return i(parseInt(t[1],10),parseInt(t[2],10),parseInt(t[3],10));if(t=/rgba\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]+(?:\.[0-9]+)?)\s*\)/.exec(e))return i(parseInt(t[1],10),parseInt(t[2],10),parseInt(t[3],10),parseFloat(t[4]));if(t=/rgb\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*\)/.exec(e))return i(parseFloat(t[1])*2.55,parseFloat(t[2])*2.55,parseFloat(t[3])*2.55);if(t=/rgba\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\s*\)/.exec(e))return i(parseFloat(t[1])*2.55,parseFloat(t[2])*2.55,parseFloat(t[3])*2.55,parseFloat(t[4]));if(t=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(e))return i(parseInt(t[1],16),parseInt(t[2],16),parseInt(t[3],16));if(t=/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/.exec(e))return i(parseInt(t[1]+t[1],16),parseInt(t[2]+t[2],16),parseInt(t[3]+t[3],16));var n=o.trim(e).toLowerCase();if(n=="transparent")return i(255,255,255,0);else{t=r[n]||[0,0,0];return i(t[0],t[1],t[2])}};var r={"aqua":[0,255,255],"azure":[240,255,255],"beige":[245,245,220],"black":[0,0,0],"blue":[0,0,255],"brown":[165,42,42],"cyan":[0,255,255],"darkblue":[0,0,139],"darkcyan":[0,139,139],"darkgrey":[169,169,169],"darkgreen":[0,100,0],"darkkhaki":[189,183,107],"darkmagenta":[139,0,139],"darkolivegreen":[85,107,47],"darkorange":[255,140,0],"darkorchid":[153,50,204],"darkred":[139,0,0],"darksalmon":[233,150,122],"darkviolet":[148,0,211],"fuchsia":[255,0,255],"gold":[255,215,0],"green":[0,128,0],"indigo":[75,0,130],"khaki":[240,230,140],"lightblue":[173,216,230],"lightcyan":[224,255,255],"lightgreen":[144,238,144],"lightgrey":[211,211,211],"lightpink":[255,182,193],"lightyellow":[255,255,224],"lime":[0,255,0],"magenta":[255,0,255],"maroon":[128,0,0],"navy":[0,0,128],"olive":[128,128,0],"orange":[255,165,0],"pink":[255,192,203],"purple":[128,0,128],"violet":[128,0,128],"red":[255,0,0],"silver":[192,192,192],"white":[255,255,255],"yellow":[255,255,0]}})(jQuery);(function(ve){var f=Object.prototype.hasOwnProperty;if(!ve.fn.detach){ve.fn.detach=function(){return this.each(function(){if(this.parentNode){this.parentNode.removeChild(this)}})}}function me(e,t){var i=t.children("."+e)[0];if(i==null){i=document.createElement("canvas");i.className=e;ve(i).css({"direction":"ltr","position":"absolute","left":0,"top":0}).appendTo(t);if(!i.getContext){if(window.G_vmlCanvasManager){i=window.G_vmlCanvasManager.initElement(i)}else{throw new Error("Canvas is not available. If you're using IE with a fall-back such as Excanvas, then there's either a mistake in your conditional include, or the page has no DOCTYPE and is rendering in Quirks Mode.")}}}this.element=i;var n=this.context=i.getContext("2d");var r=window.devicePixelRatio||1,o=n.webkitBackingStorePixelRatio||n.mozBackingStorePixelRatio||n.msBackingStorePixelRatio||n.oBackingStorePixelRatio||n.backingStorePixelRatio||1;this.pixelRatio=r/o;this.resize(t.width(),t.height());this.textContainer=null;this.text={};this._textCache={}}me.prototype.resize=function(e,t){if(e<=0||t<=0){throw new Error("Invalid dimensions for plot, width = "+e+", height = "+t)}var i=this.element,n=this.context,r=this.pixelRatio;if(this.width!=e){i.width=e*r;i.style.width=e+"px";this.width=e}if(this.height!=t){i.height=t*r;i.style.height=t+"px";this.height=t}n.restore();n.save();n.scale(r,r)};me.prototype.clear=function(){this.context.clearRect(0,0,this.width,this.height)};me.prototype.render=function(){var e=this._textCache;for(var t in e){if(f.call(e,t)){var i=this.getTextLayer(t),n=e[t];i.hide();for(var r in n){if(f.call(n,r)){var o=n[r];for(var a in o){if(f.call(o,a)){var s=o[a].positions;for(var l=0,u;u=s[l];l++){if(u.active){if(!u.rendered){i.append(u.element);u.rendered=true}}else{s.splice(l--,1);if(u.rendered){u.element.detach()}}}if(s.length==0){delete o[a]}}}}}i.show()}}};me.prototype.getTextLayer=function(e){var t=this.text[e];if(t==null){if(this.textContainer==null){this.textContainer=ve("<div class='flot-text'></div>").css({"position":"absolute","top":0,"left":0,"bottom":0,"right":0,"font-size":"smaller","color":"#545454"}).insertAfter(this.element)}t=this.text[e]=ve("<div></div>").addClass(e).css({"position":"absolute","top":0,"left":0,"bottom":0,"right":0}).appendTo(this.textContainer)}return t};me.prototype.getTextInfo=function(e,t,i,n,r){var o,a,s,l;t=""+t;if(typeof i==="object"){o=i.style+" "+i.variant+" "+i.weight+" "+i.size+"px/"+i.lineHeight+"px "+i.family}else{o=i}a=this._textCache[e];if(a==null){a=this._textCache[e]={}}s=a[o];if(s==null){s=a[o]={}}l=s[t];if(l==null){var u=ve("<div></div>").html(t).css({"position":"absolute","max-width":r,"top":-9999}).appendTo(this.getTextLayer(e));if(typeof i==="object"){u.css({"font":o,"color":i.color})}else if(typeof i==="string"){u.addClass(i)}l=s[t]={"width":u.outerWidth(true),"height":u.outerHeight(true),"element":u,"positions":[]};u.detach()}return l};me.prototype.addText=function(e,t,i,n,r,o,a,s,l){var u=this.getTextInfo(e,n,r,o,a),c=u.positions;if(s=="center"){t-=u.width/2}else if(s=="right"){t-=u.width}if(l=="middle"){i-=u.height/2}else if(l=="bottom"){i-=u.height}for(var d=0,h;h=c[d];d++){if(h.x==t&&h.y==i){h.active=true;return}}h={"active":true,"rendered":false,"element":c.length?u.element.clone():u.element,"x":t,"y":i};c.push(h);h.element.css({"top":Math.round(i),"left":Math.round(t),"text-align":s})};me.prototype.removeText=function(e,t,i,n,r,o){if(n==null){var a=this._textCache[e];if(a!=null){for(var s in a){if(f.call(a,s)){var l=a[s];for(var u in l){if(f.call(l,u)){var c=l[u].positions;for(var d=0,h;h=c[d];d++){h.active=false}}}}}}}else{var c=this.getTextInfo(e,n,r,o).positions;for(var d=0,h;h=c[d];d++){if(h.x==t&&h.y==i){h.active=false}}}};function r(v,B,F,n){var C=[],k={"colors":["#edc240","#afd8f8","#cb4b4b","#4da74d","#9440ed"],"legend":{"show":true,"noColumns":1,"labelFormatter":null,"labelBoxBorderColor":"#ccc","container":null,"position":"ne","margin":5,"backgroundColor":null,"backgroundOpacity":.85,"sorted":null},"xaxis":{"show":null,"position":"bottom","mode":null,"font":null,"color":null,"tickColor":null,"transform":null,"inverseTransform":null,"min":null,"max":null,"autoscaleMargin":null,"ticks":null,"tickFormatter":null,"labelWidth":null,"labelHeight":null,"reserveSpace":null,"tickLength":null,"alignTicksWithAxis":null,"tickDecimals":null,"tickSize":null,"minTickSize":null},"yaxis":{"autoscaleMargin":.02,"position":"left"},"xaxes":[],"yaxes":[],"series":{"points":{"show":false,"radius":3,"lineWidth":2,"fill":true,"fillColor":"#ffffff","symbol":"circle"},"lines":{"lineWidth":2,"fill":false,"fillColor":null,"steps":false},"bars":{"show":false,"lineWidth":2,"barWidth":1,"fill":true,"fillColor":null,"align":"left","horizontal":false,"zero":true},"shadowSize":3,"highlightColor":null},"grid":{"show":true,"aboveData":false,"color":"#545454","backgroundColor":null,"borderColor":null,"tickColor":null,"margin":0,"labelMargin":5,"axisMargin":8,"borderWidth":2,"minBorderMargin":null,"markings":null,"markingsColor":"#f4f4f4","markingsLineWidth":2,"clickable":false,"hoverable":false,"autoHighlight":true,"mouseActiveRadius":10},"interaction":{"redrawOverlayInterval":1e3/60},"hooks":{}},f=null,i=null,c=null,w=null,u=null,p=[],g=[],E={"left":0,"right":0,"top":0,"bottom":0},x=0,T=0,A={"processOptions":[],"processRawData":[],"processDatapoints":[],"processOffset":[],"drawBackground":[],"drawSeries":[],"draw":[],"bindEvents":[],"drawOverlay":[],"shutdown":[]},S=this;S.setData=e;S.setupGrid=r;S.draw=o;S.getPlaceholder=function(){return v};S.getCanvas=function(){return f.element};S.getPlotOffset=function(){return E};S.width=function(){return x};S.height=function(){return T};S.offset=function(){var e=c.offset();e.left+=E.left;e.top+=E.top;return e};S.getData=function(){return C};S.getAxes=function(){var i={},e;ve.each(p.concat(g),function(e,t){if(t)i[t.direction+(t.n!=1?t.n:"")+"axis"]=t});return i};S.getXAxes=function(){return p};S.getYAxes=function(){return g};S.c2p=d;S.p2c=$;S.getOptions=function(){return k};S.highlight=ce;S.unhighlight=de;S.triggerRedrawOverlay=M;S.pointOffset=function(e){return{"left":parseInt(p[m(e,"x")-1].p2c(+e.x)+E.left,10),"top":parseInt(g[m(e,"y")-1].p2c(+e.y)+E.top,10)}};S.shutdown=t;S.destroy=function(){t();v.removeData("plot").empty();C=[];k=null;f=null;i=null;c=null;w=null;u=null;p=[];g=[];A=null;b=[];S=null};S.resize=function(){var e=v.width(),t=v.height();f.resize(e,t);i.resize(e,t)};S.hooks=A;N(S);j(F);W();e(B);r();o();G();function O(e,t){t=[S].concat(t);for(var i=0;i<e.length;++i)e[i].apply(this,t)}function N(){var e={"Canvas":me};for(var t=0;t<n.length;++t){var i=n[t];i.init(S,e);if(i.options)ve.extend(true,k,i.options)}}function j(e){ve.extend(true,k,e);if(e&&e.colors){k.colors=e.colors}if(k.xaxis.color==null)k.xaxis.color=ve.color.parse(k.grid.color).scale("a",.22).toString();if(k.yaxis.color==null)k.yaxis.color=ve.color.parse(k.grid.color).scale("a",.22).toString();if(k.xaxis.tickColor==null)k.xaxis.tickColor=k.grid.tickColor||k.xaxis.color;if(k.yaxis.tickColor==null)k.yaxis.tickColor=k.grid.tickColor||k.yaxis.color;if(k.grid.borderColor==null)k.grid.borderColor=k.grid.color;if(k.grid.tickColor==null)k.grid.tickColor=ve.color.parse(k.grid.color).scale("a",.22).toString();var t,i,n,r=v.css("font-size"),o=r?+r.replace("px",""):13,a={"style":v.css("font-style"),"size":Math.round(.8*o),"variant":v.css("font-variant"),"weight":v.css("font-weight"),"family":v.css("font-family")};n=k.xaxes.length||1;for(t=0;t<n;++t){i=k.xaxes[t];if(i&&!i.tickColor){i.tickColor=i.color}i=ve.extend(true,{},k.xaxis,i);k.xaxes[t]=i;if(i.font){i.font=ve.extend({},a,i.font);if(!i.font.color){i.font.color=i.color}if(!i.font.lineHeight){i.font.lineHeight=Math.round(i.font.size*1.15)}}}n=k.yaxes.length||1;for(t=0;t<n;++t){i=k.yaxes[t];if(i&&!i.tickColor){i.tickColor=i.color}i=ve.extend(true,{},k.yaxis,i);k.yaxes[t]=i;if(i.font){i.font=ve.extend({},a,i.font);if(!i.font.color){i.font.color=i.color}if(!i.font.lineHeight){i.font.lineHeight=Math.round(i.font.size*1.15)}}}if(k.xaxis.noTicks&&k.xaxis.ticks==null)k.xaxis.ticks=k.xaxis.noTicks;if(k.yaxis.noTicks&&k.yaxis.ticks==null)k.yaxis.ticks=k.yaxis.noTicks;if(k.x2axis){k.xaxes[1]=ve.extend(true,{},k.xaxis,k.x2axis);k.xaxes[1].position="top";if(k.x2axis.min==null){k.xaxes[1].min=null}if(k.x2axis.max==null){k.xaxes[1].max=null}}if(k.y2axis){k.yaxes[1]=ve.extend(true,{},k.yaxis,k.y2axis);k.yaxes[1].position="right";if(k.y2axis.min==null){k.yaxes[1].min=null}if(k.y2axis.max==null){k.yaxes[1].max=null}}if(k.grid.coloredAreas)k.grid.markings=k.grid.coloredAreas;if(k.grid.coloredAreasColor)k.grid.markingsColor=k.grid.coloredAreasColor;if(k.lines)ve.extend(true,k.series.lines,k.lines);if(k.points)ve.extend(true,k.series.points,k.points);if(k.bars)ve.extend(true,k.series.bars,k.bars);if(k.shadowSize!=null)k.series.shadowSize=k.shadowSize;if(k.highlightColor!=null)k.series.highlightColor=k.highlightColor;for(t=0;t<k.xaxes.length;++t)y(p,t+1).options=k.xaxes[t];for(t=0;t<k.yaxes.length;++t)y(g,t+1).options=k.yaxes[t];for(var s in A)if(k.hooks[s]&&k.hooks[s].length)A[s]=A[s].concat(k.hooks[s]);O(A.processOptions,[k])}function e(e){C=U(e);H();z()}function U(e){var t=[];for(var i=0;i<e.length;++i){var n=ve.extend(true,{},k.series);if(e[i].data!=null){n.data=e[i].data;delete e[i].data;ve.extend(true,n,e[i]);e[i].data=n.data}else n.data=e[i];t.push(n)}return t}function m(e,t){var i=e[t+"axis"];if(typeof i=="object")i=i.n;if(typeof i!="number")i=1;return i}function L(){return ve.grep(p.concat(g),function(e){return e})}function d(e){var t={},i,n;for(i=0;i<p.length;++i){n=p[i];if(n&&n.used)t["x"+n.n]=n.c2p(e.left)}for(i=0;i<g.length;++i){n=g[i];if(n&&n.used)t["y"+n.n]=n.c2p(e.top)}if(t.x1!==undefined)t.x=t.x1;if(t.y1!==undefined)t.y=t.y1;return t}function $(e){var t={},i,n,r;for(i=0;i<p.length;++i){n=p[i];if(n&&n.used){r="x"+n.n;if(e[r]==null&&n.n==1)r="x";if(e[r]!=null){t.left=n.p2c(e[r]);break}}}for(i=0;i<g.length;++i){n=g[i];if(n&&n.used){r="y"+n.n;if(e[r]==null&&n.n==1)r="y";if(e[r]!=null){t.top=n.p2c(e[r]);break}}}return t}function y(e,t){if(!e[t-1])e[t-1]={"n":t,"direction":e==p?"x":"y","options":ve.extend(true,{},e==p?k.xaxis:k.yaxis)};return e[t-1]}function H(){var e=C.length,t=-1,i;for(i=0;i<C.length;++i){var n=C[i].color;if(n!=null){e--;if(typeof n=="number"&&n>t){t=n}}}if(e<=t){e=t+1}var r,o=[],a=k.colors,s=a.length,l=0;for(i=0;i<e;i++){r=ve.color.parse(a[i%s]||"#666");if(i%s==0&&i){if(l>=0){if(l<.5){l=-l-.2}else l=0}else l=-l}o[i]=r.scale("rgb",1+l)}var u=0,c;for(i=0;i<C.length;++i){c=C[i];if(c.color==null){c.color=o[u].toString();++u}else if(typeof c.color=="number")c.color=o[c.color].toString();if(c.lines.show==null){var d,h=true;for(d in c)if(c[d]&&c[d].show){h=false;break}if(h)c.lines.show=true}if(c.lines.zero==null){c.lines.zero=!!c.lines.fill}c.xaxis=y(p,m(c,"x"));c.yaxis=y(g,m(c,"y"))}}function z(){var i=Number.POSITIVE_INFINITY,n=Number.NEGATIVE_INFINITY,r=Number.MAX_VALUE,e,t,o,a,s,l,u,c,d,h,f,p,g,v,m,y;function b(e,t,i){if(t<e.datamin&&t!=-r)e.datamin=t;if(i>e.datamax&&i!=r)e.datamax=i}ve.each(L(),function(e,t){t.datamin=i;t.datamax=n;t.used=false});for(e=0;e<C.length;++e){l=C[e];l.datapoints={"points":[]};O(A.processRawData,[l,l.data,l.datapoints])}for(e=0;e<C.length;++e){l=C[e];m=l.data;y=l.datapoints.format;if(!y){y=[];y.push({"x":true,"number":true,"required":true});y.push({"y":true,"number":true,"required":true});if(l.bars.show||l.lines.show&&l.lines.fill){var _=!!(l.bars.show&&l.bars.zero||l.lines.show&&l.lines.zero);y.push({"y":true,"number":true,"required":false,"defaultValue":0,"autoscale":_});if(l.bars.horizontal){delete y[y.length-1].y;y[y.length-1].x=true}}l.datapoints.format=y}if(l.datapoints.pointsize!=null)continue;l.datapoints.pointsize=y.length;c=l.datapoints.pointsize;u=l.datapoints.points;var w=l.lines.show&&l.lines.steps;l.xaxis.used=l.yaxis.used=true;for(t=o=0;t<m.length;++t,o+=c){v=m[t];var E=v==null;if(!E){for(a=0;a<c;++a){p=v[a];g=y[a];if(g){if(g.number&&p!=null){p=+p;if(isNaN(p))p=null;else if(p==Infinity)p=r;else if(p==-Infinity)p=-r}if(p==null){if(g.required)E=true;if(g.defaultValue!=null)p=g.defaultValue}}u[o+a]=p}}if(E){for(a=0;a<c;++a){p=u[o+a];if(p!=null){g=y[a];if(g.autoscale!==false){if(g.x){b(l.xaxis,p,p)}if(g.y){b(l.yaxis,p,p)}}}u[o+a]=null}}else{if(w&&o>0&&u[o-c]!=null&&u[o-c]!=u[o]&&u[o-c+1]!=u[o+1]){for(a=0;a<c;++a)u[o+c+a]=u[o+a];u[o+1]=u[o-c+1];o+=c}}}}for(e=0;e<C.length;++e){l=C[e];O(A.processDatapoints,[l,l.datapoints])}for(e=0;e<C.length;++e){l=C[e];u=l.datapoints.points;c=l.datapoints.pointsize;y=l.datapoints.format;var x=i,T=i,S=n,k=n;for(t=0;t<u.length;t+=c){if(u[t]==null)continue;for(a=0;a<c;++a){p=u[t+a];g=y[a];if(!g||g.autoscale===false||p==r||p==-r)continue;if(g.x){if(p<x)x=p;if(p>S)S=p}if(g.y){if(p<T)T=p;if(p>k)k=p}}}if(l.bars.show){var R;switch(l.bars.align){case"left":R=0;break;case"right":R=-l.bars.barWidth;break;default:R=-l.bars.barWidth/2}if(l.bars.horizontal){T+=R;k+=R+l.bars.barWidth}else{x+=R;S+=R+l.bars.barWidth}}b(l.xaxis,x,S);b(l.yaxis,T,k)}ve.each(L(),function(e,t){if(t.datamin==i)t.datamin=null;if(t.datamax==n)t.datamax=null})}function W(){v.css("padding",0).children().filter(function(){return!ve(this).hasClass("flot-overlay")&&!ve(this).hasClass("flot-base")}).remove();if(v.css("position")=="static")v.css("position","relative");f=new me("flot-base",v);i=new me("flot-overlay",v);w=f.context;u=i.context;c=ve(i.element).unbind();var e=v.data("plot");if(e){e.shutdown();i.clear()}v.data("plot",S)}function G(){if(k.grid.hoverable){c.mousemove(_);c.bind("mouseleave",P)}if(k.grid.clickable)c.click(I);O(A.bindEvents,[c])}function t(){if(l)clearTimeout(l);c.unbind("mousemove",_);c.unbind("mouseleave",P);c.unbind("click",I);O(A.shutdown,[c])}function V(e){function t(e){return e}var i,n,r=e.options.transform||t,o=e.options.inverseTransform;if(e.direction=="x"){i=e.scale=x/Math.abs(r(e.max)-r(e.min));n=Math.min(r(e.max),r(e.min))}else{i=e.scale=T/Math.abs(r(e.max)-r(e.min));i=-i;n=Math.max(r(e.max),r(e.min))}if(r==t)e.p2c=function(e){return(e-n)*i};else e.p2c=function(e){return(r(e)-n)*i};if(!o)e.c2p=function(e){return n+e/i};else e.c2p=function(e){return o(n+e/i)}}function q(e){var t=e.options,i=e.ticks||[],n=t.labelWidth||0,r=t.labelHeight||0,o=n||(e.direction=="x"?Math.floor(f.width/(i.length||1)):null),a=e.direction+"Axis "+e.direction+e.n+"Axis",s="flot-"+e.direction+"-axis flot-"+e.direction+e.n+"-axis "+a,l=t.font||"flot-tick-label tickLabel";for(var u=0;u<i.length;++u){var c=i[u];if(!c.label)continue;var d=f.getTextInfo(s,c.label,l,null,o);n=Math.max(n,d.width);r=Math.max(r,d.height)}e.labelWidth=t.labelWidth||n;e.labelHeight=t.labelHeight||r}function K(i){var e=i.labelWidth,t=i.labelHeight,n=i.options.position,r=i.direction==="x",o=i.options.tickLength,a=k.grid.axisMargin,s=k.grid.labelMargin,l=true,u=true,c=true,d=false;ve.each(r?p:g,function(e,t){if(t&&(t.show||t.reserveSpace)){if(t===i){d=true}else if(t.options.position===n){if(d){u=false}else{l=false}}if(!d){c=false}}});if(u){a=0}if(o==null){o=c?"full":5}if(!isNaN(+o))s+=+o;if(r){t+=s;if(n=="bottom"){E.bottom+=t+a;i.box={"top":f.height-E.bottom,"height":t}}else{i.box={"top":E.top+a,"height":t};E.top+=t+a}}else{e+=s;if(n=="left"){i.box={"left":E.left+a,"width":e};E.left+=e+a}else{E.right+=e+a;i.box={"left":f.width-E.right,"width":e}}}i.position=n;i.tickLength=o;i.box.padding=s;i.innermost=l}function Z(e){if(e.direction=="x"){e.box.left=E.left-e.labelWidth/2;e.box.width=f.width-E.left-E.right+e.labelWidth}else{e.box.top=E.top-e.labelHeight/2;e.box.height=f.height-E.bottom-E.top+e.labelHeight}}function X(){var e=k.grid.minBorderMargin,t,i;if(e==null){e=0;for(i=0;i<C.length;++i)e=Math.max(e,2*(C[i].points.radius+C[i].points.lineWidth/2))}var n={"left":e,"right":e,"top":e,"bottom":e};ve.each(L(),function(e,t){if(t.reserveSpace&&t.ticks&&t.ticks.length){if(t.direction==="x"){n.left=Math.max(n.left,t.labelWidth/2);n.right=Math.max(n.right,t.labelWidth/2)}else{n.bottom=Math.max(n.bottom,t.labelHeight/2);n.top=Math.max(n.top,t.labelHeight/2)}}});E.left=Math.ceil(Math.max(n.left,E.left));E.right=Math.ceil(Math.max(n.right,E.right));E.top=Math.ceil(Math.max(n.top,E.top));E.bottom=Math.ceil(Math.max(n.bottom,E.bottom))}function r(){var e,t=L(),i=k.grid.show;for(var n in E){var r=k.grid.margin||0;E[n]=typeof r=="number"?r:r[n]||0}O(A.processOffset,[E]);for(var n in E){if(typeof k.grid.borderWidth=="object"){E[n]+=i?k.grid.borderWidth[n]:0}else{E[n]+=i?k.grid.borderWidth:0}}ve.each(t,function(e,t){var i=t.options;t.show=i.show==null?t.used:i.show;t.reserveSpace=i.reserveSpace==null?t.show:i.reserveSpace;Y(t)});if(i){var o=ve.grep(t,function(e){return e.show||e.reserveSpace});ve.each(o,function(e,t){Q(t);J(t);ee(t,t.ticks);q(t)});for(e=o.length-1;e>=0;--e)K(o[e]);X();ve.each(o,function(e,t){Z(t)})}x=f.width-E.left-E.right;T=f.height-E.bottom-E.top;ve.each(t,function(e,t){V(t)});if(i){ie()}se()}function Y(e){var t=e.options,i=+(t.min!=null?t.min:e.datamin),n=+(t.max!=null?t.max:e.datamax),r=n-i;if(r==0){var o=n==0?1:.01;if(t.min==null)i-=o;if(t.max==null||t.min!=null)n+=o}else{var a=t.autoscaleMargin;if(a!=null){if(t.min==null){i-=r*a;if(i<0&&e.datamin!=null&&e.datamin>=0)i=0}if(t.max==null){n+=r*a;if(n>0&&e.datamax!=null&&e.datamax<=0)n=0}}}e.min=i;e.max=n}function Q(e){var i=e.options;var t;if(typeof i.ticks=="number"&&i.ticks>0)t=i.ticks;else t=.3*Math.sqrt(e.direction=="x"?f.width:f.height);var n=(e.max-e.min)/t,r=-Math.floor(Math.log(n)/Math.LN10),o=i.tickDecimals;if(o!=null&&r>o){r=o}var a=Math.pow(10,-r),s=n/a,l;if(s<1.5){l=1}else if(s<3){l=2;if(s>2.25&&(o==null||r+1<=o)){l=2.5;++r}}else if(s<7.5){l=5}else{l=10}l*=a;if(i.minTickSize!=null&&l<i.minTickSize){l=i.minTickSize}e.delta=n;e.tickDecimals=Math.max(0,o!=null?o:r);e.tickSize=i.tickSize||l;if(i.mode=="time"&&!e.tickGenerator){throw new Error("Time mode requires the flot.time plugin.")}if(!e.tickGenerator){e.tickGenerator=function(e){var t=[],i=ye(e.min,e.tickSize),n=0,r=Number.NaN,o;do{o=r;r=i+n*e.tickSize;t.push(r);++n}while(r<e.max&&r!=o);return t};e.tickFormatter=function(e,t){var i=t.tickDecimals?Math.pow(10,t.tickDecimals):1;var n=""+Math.round(e*i)/i;if(t.tickDecimals!=null){var r=n.indexOf(".");var o=r==-1?0:n.length-r-1;if(o<t.tickDecimals){return(o?n:n+".")+(""+i).substr(1,t.tickDecimals-o)}}return n}}if(ve.isFunction(i.tickFormatter))e.tickFormatter=function(e,t){return""+i.tickFormatter(e,t)};if(i.alignTicksWithAxis!=null){var u=(e.direction=="x"?p:g)[i.alignTicksWithAxis-1];if(u&&u.used&&u!=e){var c=e.tickGenerator(e);if(c.length>0){if(i.min==null)e.min=Math.min(e.min,c[0]);if(i.max==null&&c.length>1)e.max=Math.max(e.max,c[c.length-1])}e.tickGenerator=function(e){var t=[],i,n;for(n=0;n<u.ticks.length;++n){i=(u.ticks[n].v-u.min)/(u.max-u.min);i=e.min+i*(e.max-e.min);t.push(i)}return t};if(!e.mode&&i.tickDecimals==null){var d=Math.max(0,-Math.floor(Math.log(e.delta)/Math.LN10)+1),h=e.tickGenerator(e);if(!(h.length>1&&/\..*0$/.test((h[1]-h[0]).toFixed(d))))e.tickDecimals=d}}}}function J(e){var t=e.options.ticks,i=[];if(t==null||typeof t=="number"&&t>0)i=e.tickGenerator(e);else if(t){if(ve.isFunction(t))i=t(e);else i=t}var n,r;e.ticks=[];for(n=0;n<i.length;++n){var o=null;var a=i[n];if(typeof a=="object"){r=+a[0];if(a.length>1)o=a[1]}else r=+a;if(o==null)o=e.tickFormatter(r,e);if(!isNaN(r))e.ticks.push({"v":r,"label":o})}}function ee(e,t){if(e.options.autoscaleMargin&&t.length>0){if(e.options.min==null)e.min=Math.min(e.min,t[0].v);if(e.options.max==null&&t.length>1)e.max=Math.max(e.max,t[t.length-1].v)}}function o(){f.clear();O(A.drawBackground,[w]);var e=k.grid;if(e.show&&e.backgroundColor)te();if(e.show&&!e.aboveData){a()}for(var t=0;t<C.length;++t){O(A.drawSeries,[w,C[t]]);ne(C[t])}O(A.draw,[w]);if(e.show&&e.aboveData){a()}f.render();M()}function R(e,t){var i,n,r,o,a=L();for(var s=0;s<a.length;++s){i=a[s];if(i.direction==t){o=t+i.n+"axis";if(!e[o]&&i.n==1)o=t+"axis";if(e[o]){n=e[o].from;r=e[o].to;break}}}if(!e[o]){i=t=="x"?p[0]:g[0];n=e[t+"1"];r=e[t+"2"]}if(n!=null&&r!=null&&n>r){var l=n;n=r;r=l}return{"from":n,"to":r,"axis":i}}function te(){w.save();w.translate(E.left,E.top);w.fillStyle=ge(k.grid.backgroundColor,T,0,"rgba(255, 255, 255, 0)");w.fillRect(0,0,x,T);w.restore()}function a(){var e,t,i,n;w.save();w.translate(E.left,E.top);var r=k.grid.markings;if(r){if(ve.isFunction(r)){t=S.getAxes();t.xmin=t.xaxis.min;t.xmax=t.xaxis.max;t.ymin=t.yaxis.min;t.ymax=t.yaxis.max;r=r(t)}for(e=0;e<r.length;++e){var o=r[e],a=R(o,"x"),s=R(o,"y");if(a.from==null)a.from=a.axis.min;if(a.to==null)a.to=a.axis.max;if(s.from==null)s.from=s.axis.min;if(s.to==null)s.to=s.axis.max;if(a.to<a.axis.min||a.from>a.axis.max||s.to<s.axis.min||s.from>s.axis.max)continue;a.from=Math.max(a.from,a.axis.min);a.to=Math.min(a.to,a.axis.max);s.from=Math.max(s.from,s.axis.min);s.to=Math.min(s.to,s.axis.max);var l=a.from===a.to,u=s.from===s.to;if(l&&u){continue}a.from=Math.floor(a.axis.p2c(a.from));a.to=Math.floor(a.axis.p2c(a.to));s.from=Math.floor(s.axis.p2c(s.from));s.to=Math.floor(s.axis.p2c(s.to));if(l||u){var c=o.lineWidth||k.grid.markingsLineWidth,d=c%2?.5:0;w.beginPath();w.strokeStyle=o.color||k.grid.markingsColor;w.lineWidth=c;if(l){w.moveTo(a.to+d,s.from);w.lineTo(a.to+d,s.to)}else{w.moveTo(a.from,s.to+d);w.lineTo(a.to,s.to+d)}w.stroke()}else{w.fillStyle=o.color||k.grid.markingsColor;w.fillRect(a.from,s.to,a.to-a.from,s.from-s.to)}}}t=L();i=k.grid.borderWidth;for(var h=0;h<t.length;++h){var f=t[h],p=f.box,g=f.tickLength,v,m,y,b;if(!f.show||f.ticks.length==0)continue;w.lineWidth=1;if(f.direction=="x"){v=0;if(g=="full")m=f.position=="top"?0:T;else m=p.top-E.top+(f.position=="top"?p.height:0)}else{m=0;if(g=="full")v=f.position=="left"?0:x;else v=p.left-E.left+(f.position=="left"?p.width:0)}if(!f.innermost){w.strokeStyle=f.options.color;w.beginPath();y=b=0;if(f.direction=="x")y=x+1;else b=T+1;if(w.lineWidth==1){if(f.direction=="x"){m=Math.floor(m)+.5}else{v=Math.floor(v)+.5}}w.moveTo(v,m);w.lineTo(v+y,m+b);w.stroke()}w.strokeStyle=f.options.tickColor;w.beginPath();for(e=0;e<f.ticks.length;++e){var _=f.ticks[e].v;y=b=0;if(isNaN(_)||_<f.min||_>f.max||g=="full"&&(typeof i=="object"&&i[f.position]>0||i>0)&&(_==f.min||_==f.max))continue;if(f.direction=="x"){v=f.p2c(_);b=g=="full"?-T:g;if(f.position=="top")b=-b}else{m=f.p2c(_);y=g=="full"?-x:g;if(f.position=="left")y=-y}if(w.lineWidth==1){if(f.direction=="x")v=Math.floor(v)+.5;else m=Math.floor(m)+.5}w.moveTo(v,m);w.lineTo(v+y,m+b)}w.stroke()}if(i){n=k.grid.borderColor;if(typeof i=="object"||typeof n=="object"){if(typeof i!=="object"){i={"top":i,"right":i,"bottom":i,"left":i}}if(typeof n!=="object"){n={"top":n,"right":n,"bottom":n,"left":n}}if(i.top>0){w.strokeStyle=n.top;w.lineWidth=i.top;w.beginPath();w.moveTo(0-i.left,0-i.top/2);w.lineTo(x,0-i.top/2);w.stroke()}if(i.right>0){w.strokeStyle=n.right;w.lineWidth=i.right;w.beginPath();w.moveTo(x+i.right/2,0-i.top);w.lineTo(x+i.right/2,T);w.stroke()}if(i.bottom>0){w.strokeStyle=n.bottom;w.lineWidth=i.bottom;w.beginPath();w.moveTo(x+i.right,T+i.bottom/2);w.lineTo(0,T+i.bottom/2);w.stroke()}if(i.left>0){w.strokeStyle=n.left;w.lineWidth=i.left;w.beginPath();w.moveTo(0-i.left/2,T+i.bottom);w.lineTo(0-i.left/2,0);w.stroke()}}else{w.lineWidth=i;w.strokeStyle=k.grid.borderColor;w.strokeRect(-i/2,-i/2,x+i,T+i)}}w.restore()}function ie(){ve.each(L(),function(e,t){var i=t.box,n=t.direction+"Axis "+t.direction+t.n+"Axis",r="flot-"+t.direction+"-axis flot-"+t.direction+t.n+"-axis "+n,o=t.options.font||"flot-tick-label tickLabel",a,s,l,u,c;f.removeText(r);if(!t.show||t.ticks.length==0)return;for(var d=0;d<t.ticks.length;++d){a=t.ticks[d];if(!a.label||a.v<t.min||a.v>t.max)continue;if(t.direction=="x"){u="center";s=E.left+t.p2c(a.v);if(t.position=="bottom"){l=i.top+i.padding}else{l=i.top+i.height-i.padding;c="bottom"}}else{c="middle";l=E.top+t.p2c(a.v);if(t.position=="left"){s=i.left+i.width-i.padding;u="right"}else{s=i.left+i.padding}}f.addText(r,s,l,a.label,o,null,null,u,c)}})}function ne(e){if(e.lines.show)re(e);if(e.bars.show)ae(e);if(e.points.show)oe(e)}function re(e){function t(e,t,i,n,r){var o=e.points,a=e.pointsize,s=null,l=null;w.beginPath();for(var u=a;u<o.length;u+=a){var c=o[u-a],d=o[u-a+1],h=o[u],f=o[u+1];if(c==null||h==null)continue;if(d<=f&&d<r.min){if(f<r.min)continue;c=(r.min-d)/(f-d)*(h-c)+c;d=r.min}else if(f<=d&&f<r.min){if(d<r.min)continue;h=(r.min-d)/(f-d)*(h-c)+c;f=r.min}if(d>=f&&d>r.max){if(f>r.max)continue;c=(r.max-d)/(f-d)*(h-c)+c;d=r.max}else if(f>=d&&f>r.max){if(d>r.max)continue;h=(r.max-d)/(f-d)*(h-c)+c;f=r.max}if(c<=h&&c<n.min){if(h<n.min)continue;d=(n.min-c)/(h-c)*(f-d)+d;c=n.min}else if(h<=c&&h<n.min){if(c<n.min)continue;f=(n.min-c)/(h-c)*(f-d)+d;h=n.min}if(c>=h&&c>n.max){if(h>n.max)continue;d=(n.max-c)/(h-c)*(f-d)+d;c=n.max}else if(h>=c&&h>n.max){if(c>n.max)continue;f=(n.max-c)/(h-c)*(f-d)+d;h=n.max}if(c!=s||d!=l)w.moveTo(n.p2c(c)+t,r.p2c(d)+i);s=h;l=f;w.lineTo(n.p2c(h)+t,r.p2c(f)+i)}w.stroke()}function i(e,t,i){var n=e.points,r=e.pointsize,o=Math.min(Math.max(0,i.min),i.max),a=0,s,l=false,u=1,c=0,d=0;while(true){if(r>0&&a>n.length+r)break;a+=r;var h=n[a-r],f=n[a-r+u],p=n[a],g=n[a+u];if(l){if(r>0&&h!=null&&p==null){d=a;r=-r;u=2;continue}if(r<0&&a==c+r){w.fill();l=false;r=-r;u=1;a=c=d+r;continue}}if(h==null||p==null)continue;if(h<=p&&h<t.min){if(p<t.min)continue;f=(t.min-h)/(p-h)*(g-f)+f;h=t.min}else if(p<=h&&p<t.min){if(h<t.min)continue;g=(t.min-h)/(p-h)*(g-f)+f;p=t.min}if(h>=p&&h>t.max){if(p>t.max)continue;f=(t.max-h)/(p-h)*(g-f)+f;h=t.max}else if(p>=h&&p>t.max){if(h>t.max)continue;g=(t.max-h)/(p-h)*(g-f)+f;p=t.max}if(!l){w.beginPath();w.moveTo(t.p2c(h),i.p2c(o));l=true}if(f>=i.max&&g>=i.max){w.lineTo(t.p2c(h),i.p2c(i.max));w.lineTo(t.p2c(p),i.p2c(i.max));continue}else if(f<=i.min&&g<=i.min){w.lineTo(t.p2c(h),i.p2c(i.min));w.lineTo(t.p2c(p),i.p2c(i.min));continue}var v=h,m=p;if(f<=g&&f<i.min&&g>=i.min){h=(i.min-f)/(g-f)*(p-h)+h;f=i.min}else if(g<=f&&g<i.min&&f>=i.min){p=(i.min-f)/(g-f)*(p-h)+h;g=i.min}if(f>=g&&f>i.max&&g<=i.max){h=(i.max-f)/(g-f)*(p-h)+h;f=i.max}else if(g>=f&&g>i.max&&f<=i.max){p=(i.max-f)/(g-f)*(p-h)+h;g=i.max}if(h!=v){w.lineTo(t.p2c(v),i.p2c(f))}w.lineTo(t.p2c(h),i.p2c(f));w.lineTo(t.p2c(p),i.p2c(g));if(p!=m){w.lineTo(t.p2c(p),i.p2c(g));w.lineTo(t.p2c(m),i.p2c(g))}}}w.save();w.translate(E.left,E.top);w.lineJoin="round";var n=e.lines.lineWidth,r=e.shadowSize;if(n>0&&r>0){w.lineWidth=r;w.strokeStyle="rgba(0,0,0,0.1)";var o=Math.PI/18;t(e.datapoints,Math.sin(o)*(n/2+r/2),Math.cos(o)*(n/2+r/2),e.xaxis,e.yaxis);w.lineWidth=r/2;t(e.datapoints,Math.sin(o)*(n/2+r/4),Math.cos(o)*(n/2+r/4),e.xaxis,e.yaxis)}w.lineWidth=n;w.strokeStyle=e.color;var a=s(e.lines,e.color,0,T);if(a){w.fillStyle=a;i(e.datapoints,e.xaxis,e.yaxis)}if(n>0)t(e.datapoints,0,0,e.xaxis,e.yaxis);w.restore()}function oe(e){function t(e,t,i,n,r,o,a,s){var l=e.points,u=e.pointsize;for(var c=0;c<l.length;c+=u){var d=l[c],h=l[c+1];if(d==null||d<o.min||d>o.max||h<a.min||h>a.max)continue;w.beginPath();d=o.p2c(d);h=a.p2c(h)+n;if(s=="circle")w.arc(d,h,t,0,r?Math.PI:Math.PI*2,false);else s(w,d,h,t,r);w.closePath();if(i){w.fillStyle=i;w.fill()}w.stroke()}}w.save();w.translate(E.left,E.top);var i=e.points.lineWidth,n=e.shadowSize,r=e.points.radius,o=e.points.symbol;if(i==0)i=1e-4;if(i>0&&n>0){var a=n/2;w.lineWidth=a;w.strokeStyle="rgba(0,0,0,0.1)";t(e.datapoints,r,null,a+a/2,true,e.xaxis,e.yaxis,o);w.strokeStyle="rgba(0,0,0,0.2)";t(e.datapoints,r,null,a/2,true,e.xaxis,e.yaxis,o)}w.lineWidth=i;w.strokeStyle=e.color;t(e.datapoints,r,s(e.points,e.color),0,false,e.xaxis,e.yaxis,o);w.restore()}function h(e,t,i,n,r,o,a,s,l,u,c){var d,h,f,p,g,v,m,y,b;if(u){y=v=m=true;g=false;d=i;h=e;p=t+n;f=t+r;if(h<d){b=h;h=d;d=b;g=true;v=false}}else{g=v=m=true;y=false;d=e+n;h=e+r;f=i;p=t;if(p<f){b=p;p=f;f=b;y=true;m=false}}if(h<a.min||d>a.max||p<s.min||f>s.max)return;if(d<a.min){d=a.min;g=false}if(h>a.max){h=a.max;v=false}if(f<s.min){f=s.min;y=false}if(p>s.max){p=s.max;m=false}d=a.p2c(d);f=s.p2c(f);h=a.p2c(h);p=s.p2c(p);if(o){l.fillStyle=o(f,p);l.fillRect(d,p,h-d,f-p)}if(c>0&&(g||v||m||y)){l.beginPath();l.moveTo(d,f);if(g)l.lineTo(d,p);else l.moveTo(d,p);if(m)l.lineTo(h,p);else l.moveTo(h,p);if(v)l.lineTo(h,f);else l.moveTo(h,f);if(y)l.lineTo(d,f);else l.moveTo(d,f);l.stroke()}}function ae(u){function e(e,t,i,n,r,o){var a=e.points,s=e.pointsize;for(var l=0;l<a.length;l+=s){if(a[l]==null)continue;h(a[l],a[l+1],a[l+2],t,i,n,r,o,w,u.bars.horizontal,u.bars.lineWidth)}}w.save();w.translate(E.left,E.top);w.lineWidth=u.bars.lineWidth;w.strokeStyle=u.color;var t;switch(u.bars.align){case"left":t=0;break;case"right":t=-u.bars.barWidth;break;default:t=-u.bars.barWidth/2}var i=u.bars.fill?function(e,t){return s(u.bars,u.color,e,t)}:null;e(u.datapoints,t,t+u.bars.barWidth,i,u.xaxis,u.yaxis);w.restore()}function s(e,t,i,n){var r=e.fill;if(!r)return null;if(e.fillColor)return ge(e.fillColor,i,n,t);var o=ve.color.parse(t);o.a=typeof r=="number"?r:.4;o.normalize();return o.toString()}function se(){if(k.legend.container!=null){ve(k.legend.container).html("")}else{v.find(".legend").remove()}if(!k.legend.show){return}var e=[],t=[],i=false,n=k.legend.labelFormatter,r,o;for(var a=0;a<C.length;++a){r=C[a];if(r.label){o=n?n(r.label,r):r.label;if(o){t.push({"label":o,"color":r.color})}}}if(k.legend.sorted){if(ve.isFunction(k.legend.sorted)){t.sort(k.legend.sorted)}else if(k.legend.sorted=="reverse"){t.reverse()}else{var s=k.legend.sorted!="descending";t.sort(function(e,t){return e.label==t.label?0:e.label<t.label!=s?1:-1})}}for(var a=0;a<t.length;++a){var l=t[a];if(a%k.legend.noColumns==0){if(i)e.push("</tr>");e.push("<tr>");i=true}e.push('<td class="legendColorBox"><div style="border:1px solid '+k.legend.labelBoxBorderColor+';padding:1px"><div style="width:4px;height:0;border:5px solid '+l.color+';overflow:hidden"></div></div></td>'+'<td class="legendLabel">'+l.label+"</td>")}if(i)e.push("</tr>");if(e.length==0)return;var u='<table style="font-size:smaller;color:'+k.grid.color+'">'+e.join("")+"</table>";if(k.legend.container!=null)ve(k.legend.container).html(u);else{var c="",d=k.legend.position,h=k.legend.margin;if(h[0]==null)h=[h,h];if(d.charAt(0)=="n")c+="top:"+(h[1]+E.top)+"px;";else if(d.charAt(0)=="s")c+="bottom:"+(h[1]+E.bottom)+"px;";if(d.charAt(1)=="e")c+="right:"+(h[0]+E.right)+"px;";else if(d.charAt(1)=="w")c+="left:"+(h[0]+E.left)+"px;";var f=ve('<div class="legend">'+u.replace('style="','style="position:absolute;'+c+";")+"</div>").appendTo(v);if(k.legend.backgroundOpacity!=0){var p=k.legend.backgroundColor;if(p==null){p=k.grid.backgroundColor;if(p&&typeof p=="string")p=ve.color.parse(p);else p=ve.color.extract(f,"background-color");p.a=1;p=p.toString()}var g=f.children();ve('<div style="position:absolute;width:'+g.width()+"px;height:"+g.height()+"px;"+c+"background-color:"+p+';"> </div>').prependTo(f).css("opacity",k.legend.backgroundOpacity)}}}var b=[],l=null;function le(e,t,i){var n=k.grid.mouseActiveRadius,r=n*n+1,o=null,a=false,s,l,u;for(s=C.length-1;s>=0;--s){if(!i(C[s]))continue;var c=C[s],d=c.xaxis,h=c.yaxis,f=c.datapoints.points,p=d.c2p(e),g=h.c2p(t),v=n/d.scale,m=n/h.scale;u=c.datapoints.pointsize;if(d.options.inverseTransform)v=Number.MAX_VALUE;if(h.options.inverseTransform)m=Number.MAX_VALUE;if(c.lines.show||c.points.show){for(l=0;l<f.length;l+=u){var y=f[l],b=f[l+1];if(y==null)continue;if(y-p>v||y-p<-v||b-g>m||b-g<-m)continue;var _=Math.abs(d.p2c(y)-e),w=Math.abs(h.p2c(b)-t),E=_*_+w*w;if(E<r){r=E;o=[s,l/u]}}}if(c.bars.show&&!o){var x,T;switch(c.bars.align){case"left":x=0;break;case"right":x=-c.bars.barWidth;break;default:x=-c.bars.barWidth/2}T=x+c.bars.barWidth;for(l=0;l<f.length;l+=u){var y=f[l],b=f[l+1],S=f[l+2];if(y==null)continue;if(C[s].bars.horizontal?p<=Math.max(S,y)&&p>=Math.min(S,y)&&g>=b+x&&g<=b+T:p>=y+x&&p<=y+T&&g>=Math.min(S,b)&&g<=Math.max(S,b))o=[s,l/u]}}}if(o){s=o[0];l=o[1];u=C[s].datapoints.pointsize;return{"datapoint":C[s].datapoints.points.slice(l*u,(l+1)*u),"dataIndex":l,"series":C[s],"seriesIndex":s}}return null}function _(e){if(k.grid.hoverable)D("plothover",e,function(e){return e["hoverable"]!=false})}function P(e){if(k.grid.hoverable)D("plothover",e,function(e){return false})}function I(e){D("plotclick",e,function(e){return e["clickable"]!=false})}function D(e,t,i){var n=c.offset(),r=t.pageX-n.left-E.left,o=t.pageY-n.top-E.top,a=d({"left":r,"top":o});a.pageX=t.pageX;a.pageY=t.pageY;var s=le(r,o,i);if(s){s.pageX=parseInt(s.series.xaxis.p2c(s.datapoint[0])+n.left+E.left,10);s.pageY=parseInt(s.series.yaxis.p2c(s.datapoint[1])+n.top+E.top,10)}if(k.grid.autoHighlight){for(var l=0;l<b.length;++l){var u=b[l];if(u.auto==e&&!(s&&u.series==s.series&&u.point[0]==s.datapoint[0]&&u.point[1]==s.datapoint[1]))de(u.series,u.point)}if(s)ce(s.series,s.datapoint,e)}v.trigger(e,[a,s])}function M(){var e=k.interaction.redrawOverlayInterval;if(e==-1){ue();return}if(!l)l=setTimeout(ue,e)}function ue(){l=null;u.save();i.clear();u.translate(E.left,E.top);var e,t;for(e=0;e<b.length;++e){t=b[e];if(t.series.bars.show)pe(t.series,t.point);else fe(t.series,t.point)}u.restore();O(A.drawOverlay,[u])}function ce(e,t,i){if(typeof e=="number")e=C[e];if(typeof t=="number"){var n=e.datapoints.pointsize;t=e.datapoints.points.slice(n*t,n*(t+1))}var r=he(e,t);if(r==-1){b.push({"series":e,"point":t,"auto":i});M()}else if(!i)b[r].auto=false}function de(e,t){if(e==null&&t==null){b=[];M();return}if(typeof e=="number")e=C[e];if(typeof t=="number"){var i=e.datapoints.pointsize;t=e.datapoints.points.slice(i*t,i*(t+1))}var n=he(e,t);if(n!=-1){b.splice(n,1);M()}}function he(e,t){for(var i=0;i<b.length;++i){var n=b[i];if(n.series==e&&n.point[0]==t[0]&&n.point[1]==t[1])return i}return-1}function fe(e,t){var i=t[0],n=t[1],r=e.xaxis,o=e.yaxis,a=typeof e.highlightColor==="string"?e.highlightColor:ve.color.parse(e.color).scale("a",.5).toString();if(i<r.min||i>r.max||n<o.min||n>o.max)return;var s=e.points.radius+e.points.lineWidth/2;u.lineWidth=s;u.strokeStyle=a;var l=1.5*s;i=r.p2c(i);n=o.p2c(n);u.beginPath();if(e.points.symbol=="circle")u.arc(i,n,l,0,2*Math.PI,false);else e.points.symbol(u,i,n,l,false);u.closePath();u.stroke()}function pe(e,t){var i=typeof e.highlightColor==="string"?e.highlightColor:ve.color.parse(e.color).scale("a",.5).toString(),n=i,r;switch(e.bars.align){case"left":r=0;break;case"right":r=-e.bars.barWidth;break;default:r=-e.bars.barWidth/2}u.lineWidth=e.bars.lineWidth;u.strokeStyle=i;h(t[0],t[1],t[2]||0,r,r+e.bars.barWidth,function(){return n},e.xaxis,e.yaxis,u,e.bars.horizontal,e.bars.lineWidth)}function ge(e,t,i,n){if(typeof e=="string")return e;else{var r=w.createLinearGradient(0,i,0,t);for(var o=0,a=e.colors.length;o<a;++o){var s=e.colors[o];if(typeof s!="string"){var l=ve.color.parse(n);if(s.brightness!=null)l=l.scale("rgb",s.brightness);if(s.opacity!=null)l.a*=s.opacity;s=l.toString()}r.addColorStop(o/(a-1),s)}return r}}}ve.plot=function(e,t,i){var n=new r(ve(e),t,i,ve.plot.plugins);return n};ve.plot.version="0.8.3";ve.plot.plugins=[];ve.fn.plot=function(e,t){return this.each(function(){ve.plot(this,e,t)})};function ye(e,t){return t*Math.floor(e/t)}})(jQuery);(function(e){var t={"series":{"stack":null}};function i(e){function k(e,t){var i=null;for(var n=0;n<t.length;++n){if(e==t[n])break;if(t[n].stack==e.stack)i=t[n]}return i}function t(e,t,i){if(t.stack==null||t.stack===false)return;var n=k(t,e.getData());if(!n)return;var r=i.pointsize,o=i.points,a=n.datapoints.pointsize,s=n.datapoints.points,l=[],u,c,d,h,f,p,g=t.lines.show,v=t.bars.horizontal,m=r>2&&(v?i.format[2].x:i.format[2].y),y=g&&t.lines.steps,b=true,_=v?1:0,w=v?0:1,E=0,x=0,T,S;while(true){if(E>=o.length)break;T=l.length;if(o[E]==null){for(S=0;S<r;++S)l.push(o[E+S]);E+=r}else if(x>=s.length){if(!g){for(S=0;S<r;++S)l.push(o[E+S])}E+=r}else if(s[x]==null){for(S=0;S<r;++S)l.push(null);b=true;x+=a}else{u=o[E+_];c=o[E+w];h=s[x+_];f=s[x+w];p=0;if(u==h){for(S=0;S<r;++S)l.push(o[E+S]);l[T+w]+=f;p=f;E+=r;x+=a}else if(u>h){if(g&&E>0&&o[E-r]!=null){d=c+(o[E-r+w]-c)*(h-u)/(o[E-r+_]-u);l.push(h);l.push(d+f);for(S=2;S<r;++S)l.push(o[E+S]);p=f}x+=a}else{if(b&&g){E+=r;continue}for(S=0;S<r;++S)l.push(o[E+S]);if(g&&x>0&&s[x-a]!=null)p=f+(s[x-a+w]-f)*(u-h)/(s[x-a+_]-h);l[T+w]+=p;E+=r}b=false;if(T!=l.length&&m)l[T+2]+=p}if(y&&T!=l.length&&T>0&&l[T]!=null&&l[T]!=l[T-r]&&l[T+1]!=l[T-r+1]){for(S=0;S<r;++S)l[T+r+S]=l[T+S];l[T+1]=l[T-r+1]}}i.points=l}e.hooks.processDatapoints.push(t)}e.plot.plugins.push({"init":i,"options":t,"name":"stack","version":"1.2"})})(jQuery);(function(i){var e={"xaxis":{"timezone":null,"timeformat":null,"twelveHourClock":false,"monthNames":null}};function y(e,t){return t*Math.floor(e/t)}function c(e,t,i,n){if(typeof e.strftime=="function"){return e.strftime(t)}var r=function(e,t){e=""+e;t=""+(t==null?"0":t);return e.length==1?t+e:e};var o=[];var a=false;var s=e.getHours();var l=s<12;if(i==null){i=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]}if(n==null){n=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]}var u;if(s>12){u=s-12}else if(s==0){u=12}else{u=s}for(var c=0;c<t.length;++c){var d=t.charAt(c);if(a){switch(d){case"a":d=""+n[e.getDay()];break;case"b":d=""+i[e.getMonth()];break;case"d":d=r(e.getDate());break;case"e":d=r(e.getDate()," ");break;case"h":case"H":d=r(s);break;case"I":d=r(u);break;case"l":d=r(u," ");break;case"m":d=r(e.getMonth()+1);break;case"M":d=r(e.getMinutes());break;case"q":d=""+(Math.floor(e.getMonth()/3)+1);break;case"S":d=r(e.getSeconds());break;case"y":d=r(e.getFullYear()%100);break;case"Y":d=""+e.getFullYear();break;case"p":d=l?""+"am":""+"pm";break;case"P":d=l?""+"AM":""+"PM";break;case"w":d=""+e.getDay();break}o.push(d);a=false}else{if(d=="%"){a=true}else{o.push(d)}}}return o.join("")}function n(e){function t(e,t,i,n){e[t]=function(){return i[n].apply(i,arguments)}}var i={"date":e};if(e.strftime!=undefined){t(i,"strftime",e,"strftime")}t(i,"getTime",e,"getTime");t(i,"setTime",e,"setTime");var n=["Date","Day","FullYear","Hours","Milliseconds","Minutes","Month","Seconds"];for(var r=0;r<n.length;r++){t(i,"get"+n[r],e,"getUTC"+n[r]);t(i,"set"+n[r],e,"setUTC"+n[r])}return i}function b(e,t){if(t.timezone=="browser"){return new Date(e)}else if(!t.timezone||t.timezone=="utc"){return n(new Date(e))}else if(typeof timezoneJS!="undefined"&&typeof timezoneJS.Date!="undefined"){var i=new timezoneJS.Date;i.setTimezone(t.timezone);i.setTime(e);return i}else{return n(new Date(e))}}var _={"second":1e3,"minute":60*1e3,"hour":60*60*1e3,"day":24*60*60*1e3,"month":30*24*60*60*1e3,"quarter":3*30*24*60*60*1e3,"year":365.2425*24*60*60*1e3};var t=[[1,"second"],[2,"second"],[5,"second"],[10,"second"],[30,"second"],[1,"minute"],[2,"minute"],[5,"minute"],[10,"minute"],[30,"minute"],[1,"hour"],[2,"hour"],[4,"hour"],[8,"hour"],[12,"hour"],[1,"day"],[2,"day"],[3,"day"],[.25,"month"],[.5,"month"],[1,"month"],[2,"month"]];var w=t.concat([[3,"month"],[6,"month"],[1,"year"]]);var E=t.concat([[1,"quarter"],[2,"quarter"],[1,"year"]]);function r(e){e.hooks.processOptions.push(function(e,t){i.each(e.getAxes(),function(e,t){var m=t.options;if(m.mode=="time"){t.tickGenerator=function(e){var t=[];var i=b(e.min,m);var n=0;var r=m.tickSize&&m.tickSize[1]==="quarter"||m.minTickSize&&m.minTickSize[1]==="quarter"?E:w;if(m.minTickSize!=null){if(typeof m.tickSize=="number"){n=m.tickSize}else{n=m.minTickSize[0]*_[m.minTickSize[1]]}}for(var o=0;o<r.length-1;++o){if(e.delta<(r[o][0]*_[r[o][1]]+r[o+1][0]*_[r[o+1][1]])/2&&r[o][0]*_[r[o][1]]>=n){break}}var a=r[o][0];var s=r[o][1];if(s=="year"){if(m.minTickSize!=null&&m.minTickSize[1]=="year"){a=Math.floor(m.minTickSize[0])}else{var l=Math.pow(10,Math.floor(Math.log(e.delta/_.year)/Math.LN10));var u=e.delta/_.year/l;if(u<1.5){a=1}else if(u<3){a=2}else if(u<7.5){a=5}else{a=10}a*=l}if(a<1){a=1}}e.tickSize=m.tickSize||[a,s];var c=e.tickSize[0];s=e.tickSize[1];var d=c*_[s];if(s=="second"){i.setSeconds(y(i.getSeconds(),c))}else if(s=="minute"){i.setMinutes(y(i.getMinutes(),c))}else if(s=="hour"){i.setHours(y(i.getHours(),c))}else if(s=="month"){i.setMonth(y(i.getMonth(),c))}else if(s=="quarter"){i.setMonth(3*y(i.getMonth()/3,c))}else if(s=="year"){i.setFullYear(y(i.getFullYear(),c))}i.setMilliseconds(0);if(d>=_.minute){i.setSeconds(0)}if(d>=_.hour){i.setMinutes(0)}if(d>=_.day){i.setHours(0)}if(d>=_.day*4){i.setDate(1)}if(d>=_.month*2){i.setMonth(y(i.getMonth(),3))}if(d>=_.quarter*2){i.setMonth(y(i.getMonth(),6))}if(d>=_.year){i.setMonth(0)}var h=0;var f=Number.NaN;var p;do{p=f;f=i.getTime();t.push(f);if(s=="month"||s=="quarter"){if(c<1){i.setDate(1);var g=i.getTime();i.setMonth(i.getMonth()+(s=="quarter"?3:1));var v=i.getTime();i.setTime(f+h*_.hour+(v-g)*c);h=i.getHours();i.setHours(0)}else{i.setMonth(i.getMonth()+c*(s=="quarter"?3:1))}}else if(s=="year"){i.setFullYear(i.getFullYear()+c)}else{i.setTime(f+d)}}while(f<e.max&&f!=p);return t};t.tickFormatter=function(e,t){var i=b(e,t.options);if(m.timeformat!=null){return c(i,m.timeformat,m.monthNames,m.dayNames)}var n=t.options.tickSize&&t.options.tickSize[1]=="quarter"||t.options.minTickSize&&t.options.minTickSize[1]=="quarter";var r=t.tickSize[0]*_[t.tickSize[1]];var o=t.max-t.min;var a=m.twelveHourClock?" %p":"";var s=m.twelveHourClock?"%I":"%H";var l;if(r<_.minute){l=s+":%M:%S"+a}else if(r<_.day){if(o<2*_.day){l=s+":%M"+a}else{l="%b %d "+s+":%M"+a}}else if(r<_.month){l="%b %d"}else if(n&&r<_.quarter||!n&&r<_.year){if(o<_.year){l="%b"}else{l="%b %Y"}}else if(n&&r<_.year){if(o<_.year){l="Q%q"}else{l="Q%q %Y"}}else{l="%Y"}var u=c(i,l,m.monthNames,m.dayNames);return u}}})})}i.plot.plugins.push({"init":r,"options":e,"name":"time","version":"1.0"});i.plot.formatDate=c;i.plot.dateGenerator=b})(jQuery);(function(r){r.fn.extend({"disable":function(e){r.blockUI.defaults.overlayCSS={"opacity":0};r.blockUI.defaults.css={};return this.each(function(){r(this).block({"fadeIn":50,"message":e?e:null})})},"enable":function(){return this.each(function(){r(this).unblock({"fadeOut":0})})},"scrollBottom":function(){this.each(function(){r(this).scrollTop(r(this).getScrollHeight())})},"getScrollHeight":function(){if(0===this.length){return null}var e=this[0];if(e===document||e===window){return r(document.body).prop("scrollHeight")}else{return this.prop("scrollHeight")}},"scrollTo":function(i){if(i.length==0){return}var n=i[0];return this.each(function(){var e=this;var t=0;if(e!==document){if(!r.contains(e,n)){throw new Error("Scrollable does not contain target")}t=r(e).offset().top}r(e).scrollTop(i.offset().top-t+r(e).scrollTop())})},"nextOrFirst":function(e){if(this.next(e).length){return this.next(e)}else{return this.siblings(e).length>0?this.siblings(e).filter(":first"):this}},"prevOrLast":function(e){if(this.prev(e).length){return this.prev(e)}else{return this.siblings(e).length>0?this.siblings(e).filter(":last"):this}},"findAndSelf":function(e){return this.find(e).add(this.filter(e))},"triggerReflow":function(){return this.each(function(){this.offsetWidth})}})})(jQuery);(function(e,t){if(typeof define=="function"&&define.amd){define("ev-emitter/ev-emitter",t)}else if(typeof module=="object"&&module.exports){module.exports=t()}else{e.EvEmitter=t()}})(this,function(){function e(){}var t=e.prototype;t.on=function(e,t){if(!e||!t){return}var i=this._events=this._events||{};var n=i[e]=i[e]||[];if(n.indexOf(t)==-1){n.push(t)}return this};t.once=function(e,t){if(!e||!t){return}this.on(e,t);var i=this._onceEvents=this._onceEvents||{};var n=i[e]=i[e]||[];n[t]=true;return this};t.off=function(e,t){var i=this._events&&this._events[e];if(!i||!i.length){return}var n=i.indexOf(t);if(n!=-1){i.splice(n,1)}return this};t.emitEvent=function(e,t){var i=this._events&&this._events[e];if(!i||!i.length){return}var n=0;var r=i[n];t=t||[];var o=this._onceEvents&&this._onceEvents[e];while(r){var a=o&&o[r];if(a){this.off(e,r);delete o[r]}r.apply(this,t);n+=a?0:1;r=i[n]}return this};return e});(function(t,i){"use strict";if(typeof define=="function"&&define.amd){define(["ev-emitter/ev-emitter"],function(e){return i(t,e)})}else if(typeof module=="object"&&module.exports){module.exports=i(t,require("ev-emitter"))}else{t.imagesLoaded=i(t,t.EvEmitter)}})(window,function e(t,i){var n=t.jQuery;var r=t.console;function o(e,t){for(var i in t){e[i]=t[i]}return e}function a(e){var t=[];if(Array.isArray(e)){t=e}else if(typeof e.length=="number"){for(var i=0;i<e.length;i++){t.push(e[i])}}else{t.push(e)}return t}function s(e,t,i){if(!(this instanceof s)){return new s(e,t,i)}if(typeof e=="string"){e=document.querySelectorAll(e)}this.elements=a(e);this.options=o({},this.options);if(typeof t=="function"){i=t}else{o(this.options,t)}if(i){this.on("always",i)}this.getImages();if(n){this.jqDeferred=new n.Deferred}setTimeout(function(){this.check()}.bind(this))}s.prototype=Object.create(i.prototype);s.prototype.options={};s.prototype.getImages=function(){this.images=[];this.elements.forEach(this.addElementImages,this)};s.prototype.addElementImages=function(e){if(e.nodeName=="IMG"){this.addImage(e)}if(this.options.background===true){this.addElementBackgroundImages(e)}var t=e.nodeType;if(!t||!l[t]){return}var i=e.querySelectorAll("img");for(var n=0;n<i.length;n++){var r=i[n];this.addImage(r)}if(typeof this.options.background=="string"){var o=e.querySelectorAll(this.options.background);for(n=0;n<o.length;n++){var a=o[n];this.addElementBackgroundImages(a)}}};var l={"1":true,"9":true,"11":true};s.prototype.addElementBackgroundImages=function(e){var t=getComputedStyle(e);if(!t){return}var i=/url\((['"])?(.*?)\1\)/gi;var n=i.exec(t.backgroundImage);while(n!==null){var r=n&&n[2];if(r){this.addBackground(r,e)}n=i.exec(t.backgroundImage)}};s.prototype.addImage=function(e){var t=new u(e);this.images.push(t)};s.prototype.addBackground=function(e,t){var i=new c(e,t);this.images.push(i)};s.prototype.check=function(){var n=this;this.progressedCount=0;this.hasAnyBroken=false;if(!this.images.length){this.complete();return}function t(e,t,i){setTimeout(function(){n.progress(e,t,i)})}this.images.forEach(function(e){e.once("progress",t);e.check()})};s.prototype.progress=function(e,t,i){this.progressedCount++;this.hasAnyBroken=this.hasAnyBroken||!e.isLoaded;this.emitEvent("progress",[this,e,t]);if(this.jqDeferred&&this.jqDeferred.notify){this.jqDeferred.notify(this,e)}if(this.progressedCount==this.images.length){this.complete()}if(this.options.debug&&r){r.log("progress: "+i,e,t)}};s.prototype.complete=function(){var e=this.hasAnyBroken?"fail":"done";this.isComplete=true;this.emitEvent(e,[this]);this.emitEvent("always",[this]);if(this.jqDeferred){var t=this.hasAnyBroken?"reject":"resolve";this.jqDeferred[t](this)}};function u(e){this.img=e}u.prototype=Object.create(i.prototype);u.prototype.check=function(){var e=this.getIsImageComplete();if(e){this.confirm(this.img.naturalWidth!==0,"naturalWidth");return}this.proxyImage=new Image;this.proxyImage.addEventListener("load",this);this.proxyImage.addEventListener("error",this);this.img.addEventListener("load",this);this.img.addEventListener("error",this);this.proxyImage.src=this.img.src};u.prototype.getIsImageComplete=function(){return this.img.complete&&this.img.naturalWidth!==undefined};u.prototype.confirm=function(e,t){this.isLoaded=e;this.emitEvent("progress",[this,this.img,t])};u.prototype.handleEvent=function(e){var t="on"+e.type;if(this[t]){this[t](e)}};u.prototype.onload=function(){this.confirm(true,"onload");this.unbindEvents()};u.prototype.onerror=function(){this.confirm(false,"onerror");this.unbindEvents()};u.prototype.unbindEvents=function(){this.proxyImage.removeEventListener("load",this);this.proxyImage.removeEventListener("error",this);this.img.removeEventListener("load",this);this.img.removeEventListener("error",this)};function c(e,t){this.url=e;this.element=t;this.img=new Image}c.prototype=Object.create(u.prototype);c.prototype.check=function(){this.img.addEventListener("load",this);this.img.addEventListener("error",this);this.img.src=this.url;var e=this.getIsImageComplete();if(e){this.confirm(this.img.naturalWidth!==0,"naturalWidth");this.unbindEvents()}};c.prototype.unbindEvents=function(){this.img.removeEventListener("load",this);this.img.removeEventListener("error",this)};c.prototype.confirm=function(e,t){this.isLoaded=e;this.emitEvent("progress",[this,this.element,t])};s.makeJQueryPlugin=function(e){e=e||t.jQuery;if(!e){return}n=e;n.fn.imagesLoaded=function(e,t){var i=new s(this,e,t);return i.jqDeferred.promise(n(this))}};s.makeJQueryPlugin();return s});(function(n){n.fn.lazyImageSetup=function(i){return this.each(function(){var e=_.defaults(i||{},{"offset":600,"attribute":"original"});var t=n(this);if(t.closest(".scrollable").length){e.container=t.closest(".scrollable")}t.find("img.lazy").unveil(e)})}})(window.jQuery);(function(n){var r="openerDropdown";var o="."+r;var a=function(e){this.$element=e};a.prototype={"constructor":a,"toggle":function(){var e=this;this.$element.find("> "+o+"-window").toggleModal(function(){n(this).toggle();e.$element.toggleClass("open")})},"close":function(){this.$element.find("> "+o+"-window").toggleModal("hide")}};n.fn.opener=function(i){return this.each(function(){var e=n(this).closest(o);var t=e.data(r);if(!t){if("close"==i){return}e.data(r,t=new a(e))}if("string"===typeof i){t[i]()}})};n(function(){n(document).on("click"+o,o+" "+o+"-panel",function(){n(this).closest(o).opener("toggle")})})})(jQuery);(function(u,n){function c(e){var t=[];for(var i in e){t.push(encodeURIComponent(i)+"="+encodeURIComponent(e[i]))}return t.join("&")}function d(e,t,i){if(n.ga){n.ga("send",{"hitType":"event","eventCategory":e,"eventAction":t,"eventLabel":i})}}u.fn.revive=function(){return this.each(function(){var n=u(this).data("zone-id");var e=u(this).data("host");var t=u(this).data("variables");var i=location.protocol=="https:"?"https://"+e+"/delivery/ajs-proxy.php":"http://"+e+"/delivery/ajs-proxy.php";var r=Math.floor(Math.random()*99999999999);if(!document.MAX_used){document.MAX_used=","}var o="";o+=i;o+="?zoneid="+n;o+="&cb="+r;if(document.MAX_used!=","){o+="&exclude="+document.MAX_used}o+=document.charset?"&charset="+document.charset:document.characterSet?"&charset="+document.characterSet:"";o+="&loc="+escape(window.location);if(document.referrer){o+="&referer="+escape(document.referrer)}if(document.context){o+="&context="+escape(document.context)}if(document.mmm_fo){o+="&mmm_fo=1"}t["window-width"]=u(window).width();t["window-height"]=u(window).height();var a=c(t);if(""!==a){o+="&"+a}var s=u(this);var l=function(e){s.html(e);var t=s.children(":not([id*=beacon])").length>0;s.trigger("revive-loaded",{"hasContent":t});if(t){s.addClass("Adv3rt153m3nt-hasContent");d("Banner","Impression","zone-"+n);var i=s.find("a[href]");if(s.is(":visible")&&i.length>0){d("Banner","Impression-Clickable","zone-"+n);i.on("click",function(){d("Banner","Click","zone-"+n)})}}};u.getJSON(o+"&callback=?",l)})}})(jQuery,window);(function(n){var i=navigator.userAgent.match(/(iPad|iPhone|iPod)/i);var r=function(e){this.$element=e;this.initialized=false};r.prototype={"$element":null,"initialized":null,"init":function(){if(this.initialized){this.updateShadow();return}var e="scrollShadow";if(i){e+=" scrollShadow-noShadows"}this.$element.addClass(e);this.$element.wrap('<div class="scrollShadow-wrapper"></div>');var t=this;this.$element.on("scroll.scrollShadow",_.throttle(function(){t.updateShadow()},200));this.updateShadow();this.initialized=true},"destroy":function(){if(!this.initialized){return}this.$element.unwrap().removeClass("scrollShadow scrollShadow-noShadows");this.$element.off("scroll.scrollShadow");this.initialized=false},"updateShadow":function(){var e=this.$element.scrollTop();this.$element.toggleClass("notScrolledTop",e!=0);this.$element.toggleClass("notScrolledBottom",e!=this.$element.prop("scrollHeight")-this.$element.innerHeight())}};n.fn.scrollShadow=function(i){return this.each(function(){var e=n(this);var t=e.data("scrollShadow");if(!t){t=new r(e);e.data("scrollShadow",t)}switch(i){case"destroy":t.destroy();break;default:t.init();break}})}})(jQuery);(function(r){if(typeof r.fn.each2=="undefined"){r.extend(r.fn,{"each2":function(e){var t=r([0]),i=-1,n=this.length;while(++i<n&&(t.context=t[0]=this[i])&&e.call(t[0],i,t)!==false);return this}})}})(jQuery);(function(T,_){"use strict";if(window.Select2!==_){return}var e,t,i,w,n,r={"x":0,"y":0},o,S,s={"TAB":9,"ENTER":13,"ESC":27,"SPACE":32,"LEFT":37,"UP":38,"RIGHT":39,"DOWN":40,"SHIFT":16,"CTRL":17,"ALT":18,"PAGE_UP":33,"PAGE_DOWN":34,"HOME":36,"END":35,"BACKSPACE":8,"DELETE":46,"isArrow":function(e){e=e.which?e.which:e;switch(e){case s.LEFT:case s.RIGHT:case s.UP:case s.DOWN:return true}return false},"isControl":function(e){var t=e.which;switch(t){case s.SHIFT:case s.CTRL:case s.ALT:return true}if(e.metaKey)return true;return false},"isFunctionKey":function(e){e=e.which?e.which:e;return e>=112&&e<=123}},a="<div class='select2-measure-scrollbar'></div>",l={"Ⓐ":"A","Ａ":"A","À":"A","Á":"A","Â":"A","Ầ":"A","Ấ":"A","Ẫ":"A","Ẩ":"A","Ã":"A","Ā":"A","Ă":"A","Ằ":"A","Ắ":"A","Ẵ":"A","Ẳ":"A","Ȧ":"A","Ǡ":"A","Ä":"A","Ǟ":"A","Ả":"A","Å":"A","Ǻ":"A","Ǎ":"A","Ȁ":"A","Ȃ":"A","Ạ":"A","Ậ":"A","Ặ":"A","Ḁ":"A","Ą":"A","Ⱥ":"A","Ɐ":"A","Ꜳ":"AA","Æ":"AE","Ǽ":"AE","Ǣ":"AE","Ꜵ":"AO","Ꜷ":"AU","Ꜹ":"AV","Ꜻ":"AV","Ꜽ":"AY","Ⓑ":"B","Ｂ":"B","Ḃ":"B","Ḅ":"B","Ḇ":"B","Ƀ":"B","Ƃ":"B","Ɓ":"B","Ⓒ":"C","Ｃ":"C","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","Ç":"C","Ḉ":"C","Ƈ":"C","Ȼ":"C","Ꜿ":"C","Ⓓ":"D","Ｄ":"D","Ḋ":"D","Ď":"D","Ḍ":"D","Ḑ":"D","Ḓ":"D","Ḏ":"D","Đ":"D","Ƌ":"D","Ɗ":"D","Ɖ":"D","Ꝺ":"D","Ǳ":"DZ","Ǆ":"DZ","ǲ":"Dz","ǅ":"Dz","Ⓔ":"E","Ｅ":"E","È":"E","É":"E","Ê":"E","Ề":"E","Ế":"E","Ễ":"E","Ể":"E","Ẽ":"E","Ē":"E","Ḕ":"E","Ḗ":"E","Ĕ":"E","Ė":"E","Ë":"E","Ẻ":"E","Ě":"E","Ȅ":"E","Ȇ":"E","Ẹ":"E","Ệ":"E","Ȩ":"E","Ḝ":"E","Ę":"E","Ḙ":"E","Ḛ":"E","Ɛ":"E","Ǝ":"E","Ⓕ":"F","Ｆ":"F","Ḟ":"F","Ƒ":"F","Ꝼ":"F","Ⓖ":"G","Ｇ":"G","Ǵ":"G","Ĝ":"G","Ḡ":"G","Ğ":"G","Ġ":"G","Ǧ":"G","Ģ":"G","Ǥ":"G","Ɠ":"G","Ꞡ":"G","Ᵹ":"G","Ꝿ":"G","Ⓗ":"H","Ｈ":"H","Ĥ":"H","Ḣ":"H","Ḧ":"H","Ȟ":"H","Ḥ":"H","Ḩ":"H","Ḫ":"H","Ħ":"H","Ⱨ":"H","Ⱶ":"H","Ɥ":"H","Ⓘ":"I","Ｉ":"I","Ì":"I","Í":"I","Î":"I","Ĩ":"I","Ī":"I","Ĭ":"I","İ":"I","Ï":"I","Ḯ":"I","Ỉ":"I","Ǐ":"I","Ȉ":"I","Ȋ":"I","Ị":"I","Į":"I","Ḭ":"I","Ɨ":"I","Ⓙ":"J","Ｊ":"J","Ĵ":"J","Ɉ":"J","Ⓚ":"K","Ｋ":"K","Ḱ":"K","Ǩ":"K","Ḳ":"K","Ķ":"K","Ḵ":"K","Ƙ":"K","Ⱪ":"K","Ꝁ":"K","Ꝃ":"K","Ꝅ":"K","Ꞣ":"K","Ⓛ":"L","Ｌ":"L","Ŀ":"L","Ĺ":"L","Ľ":"L","Ḷ":"L","Ḹ":"L","Ļ":"L","Ḽ":"L","Ḻ":"L","Ł":"L","Ƚ":"L","Ɫ":"L","Ⱡ":"L","Ꝉ":"L","Ꝇ":"L","Ꞁ":"L","Ǉ":"LJ","ǈ":"Lj","Ⓜ":"M","Ｍ":"M","Ḿ":"M","Ṁ":"M","Ṃ":"M","Ɱ":"M","Ɯ":"M","Ⓝ":"N","Ｎ":"N","Ǹ":"N","Ń":"N","Ñ":"N","Ṅ":"N","Ň":"N","Ṇ":"N","Ņ":"N","Ṋ":"N","Ṉ":"N","Ƞ":"N","Ɲ":"N","Ꞑ":"N","Ꞥ":"N","Ǌ":"NJ","ǋ":"Nj","Ⓞ":"O","Ｏ":"O","Ò":"O","Ó":"O","Ô":"O","Ồ":"O","Ố":"O","Ỗ":"O","Ổ":"O","Õ":"O","Ṍ":"O","Ȭ":"O","Ṏ":"O","Ō":"O","Ṑ":"O","Ṓ":"O","Ŏ":"O","Ȯ":"O","Ȱ":"O","Ö":"O","Ȫ":"O","Ỏ":"O","Ő":"O","Ǒ":"O","Ȍ":"O","Ȏ":"O","Ơ":"O","Ờ":"O","Ớ":"O","Ỡ":"O","Ở":"O","Ợ":"O","Ọ":"O","Ộ":"O","Ǫ":"O","Ǭ":"O","Ø":"O","Ǿ":"O","Ɔ":"O","Ɵ":"O","Ꝋ":"O","Ꝍ":"O","Ƣ":"OI","Ꝏ":"OO","Ȣ":"OU","Ⓟ":"P","Ｐ":"P","Ṕ":"P","Ṗ":"P","Ƥ":"P","Ᵽ":"P","Ꝑ":"P","Ꝓ":"P","Ꝕ":"P","Ⓠ":"Q","Ｑ":"Q","Ꝗ":"Q","Ꝙ":"Q","Ɋ":"Q","Ⓡ":"R","Ｒ":"R","Ŕ":"R","Ṙ":"R","Ř":"R","Ȑ":"R","Ȓ":"R","Ṛ":"R","Ṝ":"R","Ŗ":"R","Ṟ":"R","Ɍ":"R","Ɽ":"R","Ꝛ":"R","Ꞧ":"R","Ꞃ":"R","Ⓢ":"S","Ｓ":"S","ẞ":"S","Ś":"S","Ṥ":"S","Ŝ":"S","Ṡ":"S","Š":"S","Ṧ":"S","Ṣ":"S","Ṩ":"S","Ș":"S","Ş":"S","Ȿ":"S","Ꞩ":"S","Ꞅ":"S","Ⓣ":"T","Ｔ":"T","Ṫ":"T","Ť":"T","Ṭ":"T","Ț":"T","Ţ":"T","Ṱ":"T","Ṯ":"T","Ŧ":"T","Ƭ":"T","Ʈ":"T","Ⱦ":"T","Ꞇ":"T","Ꜩ":"TZ","Ⓤ":"U","Ｕ":"U","Ù":"U","Ú":"U","Û":"U","Ũ":"U","Ṹ":"U","Ū":"U","Ṻ":"U","Ŭ":"U","Ü":"U","Ǜ":"U","Ǘ":"U","Ǖ":"U","Ǚ":"U","Ủ":"U","Ů":"U","Ű":"U","Ǔ":"U","Ȕ":"U","Ȗ":"U","Ư":"U","Ừ":"U","Ứ":"U","Ữ":"U","Ử":"U","Ự":"U","Ụ":"U","Ṳ":"U","Ų":"U","Ṷ":"U","Ṵ":"U","Ʉ":"U","Ⓥ":"V","Ｖ":"V","Ṽ":"V","Ṿ":"V","Ʋ":"V","Ꝟ":"V","Ʌ":"V","Ꝡ":"VY","Ⓦ":"W","Ｗ":"W","Ẁ":"W","Ẃ":"W","Ŵ":"W","Ẇ":"W","Ẅ":"W","Ẉ":"W","Ⱳ":"W","Ⓧ":"X","Ｘ":"X","Ẋ":"X","Ẍ":"X","Ⓨ":"Y","Ｙ":"Y","Ỳ":"Y","Ý":"Y","Ŷ":"Y","Ỹ":"Y","Ȳ":"Y","Ẏ":"Y","Ÿ":"Y","Ỷ":"Y","Ỵ":"Y","Ƴ":"Y","Ɏ":"Y","Ỿ":"Y","Ⓩ":"Z","Ｚ":"Z","Ź":"Z","Ẑ":"Z","Ż":"Z","Ž":"Z","Ẓ":"Z","Ẕ":"Z","Ƶ":"Z","Ȥ":"Z","Ɀ":"Z","Ⱬ":"Z","Ꝣ":"Z","ⓐ":"a","ａ":"a","ẚ":"a","à":"a","á":"a","â":"a","ầ":"a","ấ":"a","ẫ":"a","ẩ":"a","ã":"a","ā":"a","ă":"a","ằ":"a","ắ":"a","ẵ":"a","ẳ":"a","ȧ":"a","ǡ":"a","ä":"a","ǟ":"a","ả":"a","å":"a","ǻ":"a","ǎ":"a","ȁ":"a","ȃ":"a","ạ":"a","ậ":"a","ặ":"a","ḁ":"a","ą":"a","ⱥ":"a","ɐ":"a","ꜳ":"aa","æ":"ae","ǽ":"ae","ǣ":"ae","ꜵ":"ao","ꜷ":"au","ꜹ":"av","ꜻ":"av","ꜽ":"ay","ⓑ":"b","ｂ":"b","ḃ":"b","ḅ":"b","ḇ":"b","ƀ":"b","ƃ":"b","ɓ":"b","ⓒ":"c","ｃ":"c","ć":"c","ĉ":"c","ċ":"c","č":"c","ç":"c","ḉ":"c","ƈ":"c","ȼ":"c","ꜿ":"c","ↄ":"c","ⓓ":"d","ｄ":"d","ḋ":"d","ď":"d","ḍ":"d","ḑ":"d","ḓ":"d","ḏ":"d","đ":"d","ƌ":"d","ɖ":"d","ɗ":"d","ꝺ":"d","ǳ":"dz","ǆ":"dz","ⓔ":"e","ｅ":"e","è":"e","é":"e","ê":"e","ề":"e","ế":"e","ễ":"e","ể":"e","ẽ":"e","ē":"e","ḕ":"e","ḗ":"e","ĕ":"e","ė":"e","ë":"e","ẻ":"e","ě":"e","ȅ":"e","ȇ":"e","ẹ":"e","ệ":"e","ȩ":"e","ḝ":"e","ę":"e","ḙ":"e","ḛ":"e","ɇ":"e","ɛ":"e","ǝ":"e","ⓕ":"f","ｆ":"f","ḟ":"f","ƒ":"f","ꝼ":"f","ⓖ":"g","ｇ":"g","ǵ":"g","ĝ":"g","ḡ":"g","ğ":"g","ġ":"g","ǧ":"g","ģ":"g","ǥ":"g","ɠ":"g","ꞡ":"g","ᵹ":"g","ꝿ":"g","ⓗ":"h","ｈ":"h","ĥ":"h","ḣ":"h","ḧ":"h","ȟ":"h","ḥ":"h","ḩ":"h","ḫ":"h","ẖ":"h","ħ":"h","ⱨ":"h","ⱶ":"h","ɥ":"h","ƕ":"hv","ⓘ":"i","ｉ":"i","ì":"i","í":"i","î":"i","ĩ":"i","ī":"i","ĭ":"i","ï":"i","ḯ":"i","ỉ":"i","ǐ":"i","ȉ":"i","ȋ":"i","ị":"i","į":"i","ḭ":"i","ɨ":"i","ı":"i","ⓙ":"j","ｊ":"j","ĵ":"j","ǰ":"j","ɉ":"j","ⓚ":"k","ｋ":"k","ḱ":"k","ǩ":"k","ḳ":"k","ķ":"k","ḵ":"k","ƙ":"k","ⱪ":"k","ꝁ":"k","ꝃ":"k","ꝅ":"k","ꞣ":"k","ⓛ":"l","ｌ":"l","ŀ":"l","ĺ":"l","ľ":"l","ḷ":"l","ḹ":"l","ļ":"l","ḽ":"l","ḻ":"l","ſ":"l","ł":"l","ƚ":"l","ɫ":"l","ⱡ":"l","ꝉ":"l","ꞁ":"l","ꝇ":"l","ǉ":"lj","ⓜ":"m","ｍ":"m","ḿ":"m","ṁ":"m","ṃ":"m","ɱ":"m","ɯ":"m","ⓝ":"n","ｎ":"n","ǹ":"n","ń":"n","ñ":"n","ṅ":"n","ň":"n","ṇ":"n","ņ":"n","ṋ":"n","ṉ":"n","ƞ":"n","ɲ":"n","ŉ":"n","ꞑ":"n","ꞥ":"n","ǌ":"nj","ⓞ":"o","ｏ":"o","ò":"o","ó":"o","ô":"o","ồ":"o","ố":"o","ỗ":"o","ổ":"o","õ":"o","ṍ":"o","ȭ":"o","ṏ":"o","ō":"o","ṑ":"o","ṓ":"o","ŏ":"o","ȯ":"o","ȱ":"o","ö":"o","ȫ":"o","ỏ":"o","ő":"o","ǒ":"o","ȍ":"o","ȏ":"o","ơ":"o","ờ":"o","ớ":"o","ỡ":"o","ở":"o","ợ":"o","ọ":"o","ộ":"o","ǫ":"o","ǭ":"o","ø":"o","ǿ":"o","ɔ":"o","ꝋ":"o","ꝍ":"o","ɵ":"o","ƣ":"oi","ȣ":"ou","ꝏ":"oo","ⓟ":"p","ｐ":"p","ṕ":"p","ṗ":"p","ƥ":"p","ᵽ":"p","ꝑ":"p","ꝓ":"p","ꝕ":"p","ⓠ":"q","ｑ":"q","ɋ":"q","ꝗ":"q","ꝙ":"q","ⓡ":"r","ｒ":"r","ŕ":"r","ṙ":"r","ř":"r","ȑ":"r","ȓ":"r","ṛ":"r","ṝ":"r","ŗ":"r","ṟ":"r","ɍ":"r","ɽ":"r","ꝛ":"r","ꞧ":"r","ꞃ":"r","ⓢ":"s","ｓ":"s","ß":"s","ś":"s","ṥ":"s","ŝ":"s","ṡ":"s","š":"s","ṧ":"s","ṣ":"s","ṩ":"s","ș":"s","ş":"s","ȿ":"s","ꞩ":"s","ꞅ":"s","ẛ":"s","ⓣ":"t","ｔ":"t","ṫ":"t","ẗ":"t","ť":"t","ṭ":"t","ț":"t","ţ":"t","ṱ":"t","ṯ":"t","ŧ":"t","ƭ":"t","ʈ":"t","ⱦ":"t","ꞇ":"t","ꜩ":"tz","ⓤ":"u","ｕ":"u","ù":"u","ú":"u","û":"u","ũ":"u","ṹ":"u","ū":"u","ṻ":"u","ŭ":"u","ü":"u","ǜ":"u","ǘ":"u","ǖ":"u","ǚ":"u","ủ":"u","ů":"u","ű":"u","ǔ":"u","ȕ":"u","ȗ":"u","ư":"u","ừ":"u","ứ":"u","ữ":"u","ử":"u","ự":"u","ụ":"u","ṳ":"u","ų":"u","ṷ":"u","ṵ":"u","ʉ":"u","ⓥ":"v","ｖ":"v","ṽ":"v","ṿ":"v","ʋ":"v","ꝟ":"v","ʌ":"v","ꝡ":"vy","ⓦ":"w","ｗ":"w","ẁ":"w","ẃ":"w","ŵ":"w","ẇ":"w","ẅ":"w","ẘ":"w","ẉ":"w","ⱳ":"w","ⓧ":"x","ｘ":"x","ẋ":"x","ẍ":"x","ⓨ":"y","ｙ":"y","ỳ":"y","ý":"y","ŷ":"y","ỹ":"y","ȳ":"y","ẏ":"y","ÿ":"y","ỷ":"y","ẙ":"y","ỵ":"y","ƴ":"y","ɏ":"y","ỿ":"y","ⓩ":"z","ｚ":"z","ź":"z","ẑ":"z","ż":"z","ž":"z","ẓ":"z","ẕ":"z","ƶ":"z","ȥ":"z","ɀ":"z","ⱬ":"z","ꝣ":"z","Ά":"Α","Έ":"Ε","Ή":"Η","Ί":"Ι","Ϊ":"Ι","Ό":"Ο","Ύ":"Υ","Ϋ":"Υ","Ώ":"Ω","ά":"α","έ":"ε","ή":"η","ί":"ι","ϊ":"ι","ΐ":"ι","ό":"ο","ύ":"υ","ϋ":"υ","ΰ":"υ","ω":"ω","ς":"σ"};o=T(document);w=function(){var e=1;return function(){return e++}}();function u(e){var t=T(document.createTextNode(""));e.before(t);t.before(e);t.remove()}function c(e){function t(e){return l[e]||e}return e.replace(/[^\u0000-\u007E]/g,t)}function d(e,t){var i=0,n=t.length;for(;i<n;i=i+1){if(f(e,t[i]))return i}return-1}function h(){var e=T(a);e.appendTo(document.body);var t={"width":e.width()-e[0].clientWidth,"height":e.height()-e[0].clientHeight};e.remove();return t}function f(e,t){if(e===t)return true;if(e===_||t===_)return false;if(e===null||t===null)return false;if(e.constructor===String)return e+""===t+"";if(t.constructor===String)return t+""===e+"";return false}function p(e,t,i){var n,r,o;if(e===null||e.length<1)return[];n=e.split(t);for(r=0,o=n.length;r<o;r=r+1)n[r]=i(n[r]);return n}function g(e){return e.outerWidth(false)-e.width()}function v(t){var i="keyup-change-value";t.on("keydown",function(){if(T.data(t,i)===_){T.data(t,i,t.val())}});t.on("keyup",function(){var e=T.data(t,i);if(e!==_&&t.val()!==e){T.removeData(t,i);t.trigger("keyup-change")}})}function m(e){e.on("mousemove",function(e){var t=r;if(t===_||t.x!==e.pageX||t.y!==e.pageY){T(e.target).trigger("mousemove-filtered",e)}})}function y(t,i,n){n=n||_;var r;return function(){var e=arguments;window.clearTimeout(r);r=window.setTimeout(function(){i.apply(n,e)},t)}}function b(e,t){var i=y(e,function(e){t.trigger("scroll-debounced",e)});t.on("scroll",function(e){if(d(e.target,t.get())>=0)i(e)})}function B(r){if(r[0]===document.activeElement)return;window.setTimeout(function(){var e=r[0],t=r.val().length,i;r.focus();var n=e.offsetWidth>0||e.offsetHeight>0;if(n&&e===document.activeElement){if(e.setSelectionRange){e.setSelectionRange(t,t)}else if(e.createTextRange){i=e.createTextRange();i.collapse(false);i.select()}}},0)}function F(e){e=T(e)[0];var t=0;var i=0;if("selectionStart"in e){t=e.selectionStart;i=e.selectionEnd-t}else if("selection"in document){e.focus();var n=document.selection.createRange();i=document.selection.createRange().text.length;n.moveStart("character",-e.value.length);t=n.text.length-i}return{"offset":t,"length":i}}function E(e){e.preventDefault();e.stopPropagation()}function N(e){e.preventDefault();e.stopImmediatePropagation()}function j(e){if(!n){var t=e[0].currentStyle||window.getComputedStyle(e[0],null);n=T(document.createElement("div")).css({"position":"absolute","left":"-10000px","top":"-10000px","display":"none","fontSize":t.fontSize,"fontFamily":t.fontFamily,"fontStyle":t.fontStyle,"fontWeight":t.fontWeight,"letterSpacing":t.letterSpacing,"textTransform":t.textTransform,"whiteSpace":"nowrap"});n.attr("class","select2-sizer");T(document.body).append(n)}n.text(e.val());return n.width()}function x(e,t,i){var n,r=[],o;n=T.trim(e.attr("class"));if(n){n=""+n;T(n.split(/\s+/)).each2(function(){if(this.indexOf("select2-")===0){r.push(this)}})}n=T.trim(t.attr("class"));if(n){n=""+n;T(n.split(/\s+/)).each2(function(){if(this.indexOf("select2-")!==0){o=i(this);if(o){r.push(o)}}})}e.attr("class",r.join(" "))}function k(e,t,i,n){var r=c(e.toUpperCase()).indexOf(c(t.toUpperCase())),o=t.length;if(r<0){i.push(n(e));return}i.push(n(e.substring(0,r)));i.push("<span class='select2-match'>");i.push(n(e.substring(r,r+o)));i.push("</span>");i.push(n(e.substring(r+o,e.length)))}function R(e){var t={"\\":"&#92;","&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#47;"};return String(e).replace(/[&<>"'\/\\]/g,function(e){return t[e]})}function C(a){var e,s=null,t=a.quietMillis||100,l=a.url,u=this;return function(o){window.clearTimeout(e);e=window.setTimeout(function(){var e=a.data,t=l,i=a.transport||T.fn.select2.ajaxDefaults.transport,n={"type":a.type||"GET","cache":a.cache||false,"jsonpCallback":a.jsonpCallback||_,"dataType":a.dataType||"json"},r=T.extend({},T.fn.select2.ajaxDefaults.params,n);e=e?e.call(u,o.term,o.page,o.context):null;t=typeof t==="function"?t.call(u,o.term,o.page,o.context):t;if(s&&typeof s.abort==="function"){s.abort()}if(a.params){if(T.isFunction(a.params)){T.extend(r,a.params.call(u))}else{T.extend(r,a.params)}}T.extend(r,{"url":t,"dataType":a.dataType,"data":e,"success":function(e){var t=a.results(e,o.page,o);o.callback(t)},"error":function(e,t,i){var n={"hasError":true,"jqXHR":e,"textStatus":t,"errorThrown":i};o.callback(n)}});s=i.call(u,r)},t)}}function A(e){var t=e,i,n,s=function(e){return""+e.text};if(T.isArray(t)){n=t;t={"results":n}}if(T.isFunction(t)===false){n=t;t=function(){return n}}var r=t();if(r.text){s=r.text;if(!T.isFunction(s)){i=r.text;s=function(e){return e[i]}}}return function(r){var o=r.term,i={"results":[]},a;if(o===""){r.callback(t());return}a=function(e,t){var i,n;e=e[0];if(e.children){i={};for(n in e){if(e.hasOwnProperty(n))i[n]=e[n]}i.children=[];T(e.children).each2(function(e,t){a(t,i.children)});if(i.children.length||r.matcher(o,s(i),e)){t.push(i)}}else{if(r.matcher(o,s(e),e)){t.push(e)}}};T(t().results).each2(function(e,t){a(t,i.results)});r.callback(i)}}function O(t){var o=T.isFunction(t);return function(i){var n=i.term,r={"results":[]};var e=o?t(i):t;if(T.isArray(e)){T(e).each(function(){var e=this.text!==_,t=e?this.text:this;if(n===""||i.matcher(n,t)){r.results.push(e?this:{"id":this,"text":this})}});i.callback(r)}}}function L(e,t){if(T.isFunction(e))return true;if(!e)return false;if(typeof e==="string")return true;throw new Error(t+" must be a string, function, or falsy value")}function P(e,t){if(T.isFunction(e)){var i=Array.prototype.slice.call(arguments,2);return e.apply(t,i)}return e}function I(e){var i=0;T.each(e,function(e,t){if(t.children){i+=I(t.children)}else{i++}});return i}function U(e,t,i,n){var r=e,o=false,a,s,l,u,c;if(!n.createSearchChoice||!n.tokenSeparators||n.tokenSeparators.length<1)return _;while(true){s=-1;for(l=0,u=n.tokenSeparators.length;l<u;l++){c=n.tokenSeparators[l];s=e.indexOf(c);if(s>=0)break}if(s<0)break;a=e.substring(0,s);e=e.substring(s+c.length);if(a.length>0){a=n.createSearchChoice.call(this,a,t);if(a!==_&&a!==null&&n.id(a)!==_&&n.id(a)!==null){o=false;for(l=0,u=t.length;l<u;l++){if(f(n.id(a),n.id(t[l]))){o=true;break}}if(!o)i(a)}}}if(r!==e)return e}function D(){var i=this;T.each(arguments,function(e,t){i[t].remove();i[t]=null})}function M(e,t){var i=function(){};i.prototype=new e;i.prototype.constructor=i;i.prototype.parent=e.prototype;i.prototype=T.extend(i.prototype,t);return i}e=M(Object,{"bind":function(e){var t=this;return function(){e.apply(t,arguments)}},"init":function(e){var o,t,i=".select2-results";this.opts=e=this.prepareOpts(e);this.id=e.id;if(e.element.data("select2")!==_&&e.element.data("select2")!==null){e.element.data("select2").destroy()}this.container=this.createContainer();this.liveRegion=T(".select2-hidden-accessible");if(this.liveRegion.length==0){this.liveRegion=T("<span>",{"role":"status","aria-live":"polite"}).addClass("select2-hidden-accessible").appendTo(document.body)}this.containerId="s2id_"+(e.element.attr("id")||"autogen"+w());this.containerEventName=this.containerId.replace(/([.])/g,"_").replace(/([;&,\-\.\+\*\~':"\!\^#$%@\[\]\(\)=>\|])/g,"\\$1");this.container.attr("id",this.containerId);this.container.attr("title",e.element.attr("title"));this.body=T(document.body);x(this.container,this.opts.element,this.opts.adaptContainerCssClass);this.container.attr("style",e.element.attr("style"));this.container.css(P(e.containerCss,this.opts.element));this.container.addClass(P(e.containerCssClass,this.opts.element));this.elementTabIndex=this.opts.element.attr("tabindex");this.opts.element.data("select2",this).attr("tabindex","-1").before(this.container).on("click.select2",E);this.container.data("select2",this);this.dropdown=this.container.find(".select2-drop");x(this.dropdown,this.opts.element,this.opts.adaptDropdownCssClass);this.dropdown.addClass(P(e.dropdownCssClass,this.opts.element));this.dropdown.data("select2",this);this.dropdown.on("click",E);this.results=o=this.container.find(i);this.search=t=this.container.find("input.select2-input");this.queryCount=0;this.resultsPage=0;this.context=null;this.initContainer();this.container.on("click",E);m(this.results);this.dropdown.on("mousemove-filtered",i,this.bind(this.highlightUnderEvent));this.dropdown.on("touchstart touchmove touchend",i,this.bind(function(e){this._touchEvent=true;this.highlightUnderEvent(e)}));this.dropdown.on("touchmove",i,this.bind(this.touchMoved));this.dropdown.on("touchstart touchend",i,this.bind(this.clearTouchMoved));this.dropdown.on("click",this.bind(function(e){if(this._touchEvent){this._touchEvent=false;this.selectHighlighted()}}));b(80,this.results);this.dropdown.on("scroll-debounced",i,this.bind(this.loadMoreIfNeeded));T(this.container).on("change",".select2-input",function(e){e.stopPropagation()});T(this.dropdown).on("change",".select2-input",function(e){e.stopPropagation()});if(T.fn.mousewheel){o.mousewheel(function(e,t,i,n){var r=o.scrollTop();if(n>0&&r-n<=0){o.scrollTop(0);E(e)}else if(n<0&&o.get(0).scrollHeight-o.scrollTop()+n<=o.height()){o.scrollTop(o.get(0).scrollHeight-o.height());E(e)}})}v(t);t.on("keyup-change input paste",this.bind(this.updateResults));t.on("focus",function(){t.addClass("select2-focused")});t.on("blur",function(){t.removeClass("select2-focused")});this.dropdown.on("mouseup",i,this.bind(function(e){if(T(e.target).closest(".select2-result-selectable").length>0){this.highlightUnderEvent(e);this.selectHighlighted(e)}}));this.dropdown.on("click mouseup mousedown touchstart touchend focusin",function(e){e.stopPropagation()});this.nextSearchTerm=_;if(T.isFunction(this.opts.initSelection)){this.initSelection();this.monitorSource()}if(e.maximumInputLength!==null){this.search.attr("maxlength",e.maximumInputLength)}var n=e.element.prop("disabled");if(n===_)n=false;this.enable(!n);var r=e.element.prop("readonly");if(r===_)r=false;this.readonly(r);S=S||h();this.autofocus=e.element.prop("autofocus");e.element.prop("autofocus",false);if(this.autofocus)this.focus();this.search.attr("placeholder",e.searchInputPlaceholder)},"destroy":function(){var e=this.opts.element,t=e.data("select2"),i=this;this.close();if(e.length&&e[0].detachEvent&&i._sync){e.each(function(){if(i._sync){this.detachEvent("onpropertychange",i._sync)}})}if(this.propertyObserver){this.propertyObserver.disconnect();this.propertyObserver=null}this._sync=null;if(t!==_){t.container.remove();t.liveRegion.remove();t.dropdown.remove();e.show().removeData("select2").off(".select2").prop("autofocus",this.autofocus||false);if(this.elementTabIndex){e.attr({"tabindex":this.elementTabIndex})}else{e.removeAttr("tabindex")}e.show()}D.call(this,"container","liveRegion","dropdown","results","search")},"optionToData":function(e){if(e.is("option")){return{"id":e.prop("value"),"text":e.text(),"element":e.get(),"css":e.attr("class"),"disabled":e.prop("disabled"),"locked":f(e.attr("locked"),"locked")||f(e.data("locked"),true)}}else if(e.is("optgroup")){return{"text":e.attr("label"),"children":[],"element":e.get(),"css":e.attr("class")}}},"prepareOpts":function(y){var a,e,t,i,b=this;a=y.element;if(a.get(0).tagName.toLowerCase()==="select"){this.select=e=y.element}if(e){T.each(["id","multiple","ajax","query","createSearchChoice","initSelection","data","tags"],function(){if(this in y){throw new Error("Option '"+this+"' is not allowed for Select2 when attached to a <select> element.")}})}y=T.extend({},{"populateResults":function(e,t,p){var g,v=this.opts.id,m=this.liveRegion;g=function(e,t,i){var n,r,o,a,s,l,u,c,d,h;e=y.sortResults(e,t,p);var f=[];for(n=0,r=e.length;n<r;n=n+1){o=e[n];s=o.disabled===true;a=!s&&v(o)!==_;l=o.children&&o.children.length>0;u=T("<li></li>");u.addClass("select2-results-dept-"+i);u.addClass("select2-result");u.addClass(a?"select2-result-selectable":"select2-result-unselectable");if(s){u.addClass("select2-disabled")}if(l){u.addClass("select2-result-with-children")}u.addClass(b.opts.formatResultCssClass(o));u.attr("role","presentation");c=T(document.createElement("div"));c.addClass("select2-result-label");c.attr("id","select2-result-label-"+w());c.attr("role","option");h=y.formatResult(o,c,p,b.opts.escapeMarkup);if(h!==_){c.html(h);u.append(c)}if(l){d=T("<ul></ul>");d.addClass("select2-result-sub");g(o.children,d,i+1);u.append(d)}u.data("select2-data",o);f.push(u[0])}t.append(f);m.text(y.formatMatches(e.length))};g(t,e,0)}},T.fn.select2.defaults,y);if(typeof y.id!=="function"){t=y.id;y.id=function(e){return e[t]}}if(T.isArray(y.element.data("select2Tags"))){if("tags"in y){throw"tags specified as both an attribute 'data-select2-tags' and in options of Select2 "+y.element.attr("id")}y.tags=y.element.data("select2Tags")}if(e){y.query=this.bind(function(n){var i={"results":[],"more":false},r=n.term,e,t,o;o=function(e,t){var i;if(e.is("option")){if(n.matcher(r,e.text(),e)){t.push(b.optionToData(e))}}else if(e.is("optgroup")){i=b.optionToData(e);e.children().each2(function(e,t){o(t,i.children)});if(i.children.length>0){t.push(i)}}};e=a.children();if(this.getPlaceholder()!==_&&e.length>0){t=this.getPlaceholderOption();if(t){e=e.not(t)}}e.each2(function(e,t){o(t,i.results)});n.callback(i)});y.id=function(e){return e.id}}else{if(!("query"in y)){if("ajax"in y){i=y.element.data("ajax-url");if(i&&i.length>0){y.ajax.url=i}y.query=C.call(y.element,y.ajax)}else if("data"in y){y.query=A(y.data)}else if("tags"in y){y.query=O(y.tags);if(y.createSearchChoice===_){y.createSearchChoice=function(e){return{"id":T.trim(e),"text":T.trim(e)}}}if(y.initSelection===_){y.initSelection=function(e,t){var i=[];T(p(e.val(),y.separator,y.transformVal)).each(function(){var e={"id":this,"text":this},t=y.tags;if(T.isFunction(t))t=t();T(t).each(function(){if(f(this.id,e.id)){e=this;return false}});i.push(e)});t(i)}}}}}if(typeof y.query!=="function"){throw"query function not defined for Select2 "+y.element.attr("id")}if(y.createSearchChoicePosition==="top"){y.createSearchChoicePosition=function(e,t){e.unshift(t)}}else if(y.createSearchChoicePosition==="bottom"){y.createSearchChoicePosition=function(e,t){e.push(t)}}else if(typeof y.createSearchChoicePosition!=="function"){throw"invalid createSearchChoicePosition option must be 'top', 'bottom' or a custom function"}return y},"monitorSource":function(){var i=this.opts.element,e,t=this;i.on("change.select2",this.bind(function(e){if(this.opts.element.data("select2-change-triggered")!==true){this.initSelection()}}));this._sync=this.bind(function(){var e=i.prop("disabled");if(e===_)e=false;this.enable(!e);var t=i.prop("readonly");if(t===_)t=false;this.readonly(t);if(this.container){x(this.container,this.opts.element,this.opts.adaptContainerCssClass);this.container.addClass(P(this.opts.containerCssClass,this.opts.element))}if(this.dropdown){x(this.dropdown,this.opts.element,this.opts.adaptDropdownCssClass);this.dropdown.addClass(P(this.opts.dropdownCssClass,this.opts.element))}});if(i.length&&i[0].attachEvent){i.each(function(){this.attachEvent("onpropertychange",t._sync)})}e=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver;if(e!==_){if(this.propertyObserver){delete this.propertyObserver;this.propertyObserver=null}this.propertyObserver=new e(function(e){T.each(e,t._sync)});this.propertyObserver.observe(i.get(0),{"attributes":true,"subtree":false})}},"triggerSelect":function(e){var t=T.Event("select2-selecting",{"val":this.id(e),"object":e,"choice":e});this.opts.element.trigger(t);return!t.isDefaultPrevented()},"triggerChange":function(e){e=e||{};e=T.extend({},e,{"type":"change","val":this.val()});this.opts.element.data("select2-change-triggered",true);this.opts.element.trigger(e);this.opts.element.data("select2-change-triggered",false);this.opts.element.click();if(this.opts.blurOnChange)this.opts.element.blur()},"isInterfaceEnabled":function(){return this.enabledInterface===true},"enableInterface":function(){var e=this._enabled&&!this._readonly,t=!e;if(e===this.enabledInterface)return false;this.container.toggleClass("select2-container-disabled",t);this.close();this.enabledInterface=e;return true},"enable":function(e){if(e===_)e=true;if(this._enabled===e)return;this._enabled=e;this.opts.element.prop("disabled",!e);this.enableInterface()},"disable":function(){this.enable(false)},"readonly":function(e){if(e===_)e=false;if(this._readonly===e)return;this._readonly=e;this.opts.element.prop("readonly",e);this.enableInterface()},"opened":function(){return this.container?this.container.hasClass("select2-dropdown-open"):false},"positionDropdown":function(){var e=this.dropdown,t=this.container,i=t.offset(),n=t.outerHeight(false),r=t.outerWidth(false),o=e.outerHeight(false),a=T(window),s=a.width(),l=a.height(),u=a.scrollLeft()+s,c=a.scrollTop()+l,d=i.top+n,h=i.left,f=d+o<=c,p=i.top-o>=a.scrollTop(),g=e.outerWidth(false),v=function(){return h+g<=u},m=function(){return i.left+u+t.outerWidth(false)>g},y=e.hasClass("select2-drop-above"),b,_,w,E,x;if(y){_=true;if(!p&&f){w=true;_=false}}else{_=false;if(!f&&p){w=true;_=true}}if(w){e.hide();i=this.container.offset();n=this.container.outerHeight(false);r=this.container.outerWidth(false);o=e.outerHeight(false);u=a.scrollLeft()+s;c=a.scrollTop()+l;d=i.top+n;h=i.left;g=e.outerWidth(false);e.show();this.focusSearch()}if(this.opts.dropdownAutoWidth){x=T(".select2-results",e)[0];e.addClass("select2-drop-auto-width");e.css("width","");g=e.outerWidth(false)+(x.scrollHeight===x.clientHeight?0:S.width);g>r?r=g:g=r;o=e.outerHeight(false)}else{this.container.removeClass("select2-drop-auto-width")}if(this.body.css("position")!=="static"){b=this.body.offset();d-=b.top;h-=b.left}if(!v()&&m()){h=i.left+this.container.outerWidth(false)-g}E={"left":h,"width":r};if(_){E.top=i.top-o;E.bottom="auto";this.container.addClass("select2-drop-above");e.addClass("select2-drop-above")}else{E.top=d;E.bottom="auto";this.container.removeClass("select2-drop-above");e.removeClass("select2-drop-above")}E=T.extend(E,P(this.opts.dropdownCss,this.opts.element));e.css(E)},"shouldOpen":function(){var e;if(this.opened())return false;if(this._enabled===false||this._readonly===true)return false;e=T.Event("select2-opening");this.opts.element.trigger(e);return!e.isDefaultPrevented()},"clearDropdownAlignmentPreference":function(){this.container.removeClass("select2-drop-above");this.dropdown.removeClass("select2-drop-above")},"open":function(){if(!this.shouldOpen())return false;this.opening();o.on("mousemove.select2Event",function(e){r.x=e.pageX;r.y=e.pageY});return true},"opening":function(){var e=this.containerEventName,t="scroll."+e,i="resize."+e,n="orientationchange."+e,r;this.container.addClass("select2-dropdown-open").addClass("select2-container-active");this.clearDropdownAlignmentPreference();if(this.dropdown[0]!==this.body.children().last()[0]){this.dropdown.detach().appendTo(this.body)}r=T("#select2-drop-mask");if(r.length===0){r=T(document.createElement("div"));r.attr("id","select2-drop-mask").attr("class","select2-drop-mask");r.hide();r.appendTo(this.body);r.on("mousedown touchstart click",function(e){u(r);var t=T("#select2-drop"),i;if(t.length>0){i=t.data("select2");if(i.opts.selectOnBlur){i.selectHighlighted({"noFocus":true})}i.close();e.preventDefault();e.stopPropagation()}})}if(this.dropdown.prev()[0]!==r[0]){this.dropdown.before(r)}T("#select2-drop").removeAttr("id");this.dropdown.attr("id","select2-drop");r.show();this.positionDropdown();this.dropdown.show();this.positionDropdown();this.dropdown.addClass("select2-drop-active");var o=this;this.container.parents().add(window).each(function(){T(this).on(i+" "+t+" "+n,function(e){if(o.opened())o.positionDropdown()})})},"close":function(){if(!this.opened())return;var e=this.containerEventName,t="scroll."+e,i="resize."+e,n="orientationchange."+e;this.container.parents().add(window).each(function(){T(this).off(t).off(i).off(n)});this.clearDropdownAlignmentPreference();T("#select2-drop-mask").hide();this.dropdown.removeAttr("id");this.dropdown.hide();this.container.removeClass("select2-dropdown-open").removeClass("select2-container-active");this.results.empty();o.off("mousemove.select2Event");this.clearSearch();this.search.removeClass("select2-active");this.opts.element.trigger(T.Event("select2-close"))},"externalSearch":function(e){this.open();this.search.val(e);this.updateResults(false)},"clearSearch":function(){},"getMaximumSelectionSize":function(){return P(this.opts.maximumSelectionSize,this.opts.element)},"ensureHighlightVisible":function(){var e=this.results,t,i,n,r,o,a,s,l;i=this.highlight();if(i<0)return;if(i==0){e.scrollTop(0);return}t=this.findHighlightableChoices().find(".select2-result-label");n=T(t[i]);l=(n.offset()||{}).top||0;r=l+n.outerHeight(true);if(i===t.length-1){s=e.find("li.select2-more-results");if(s.length>0){r=s.offset().top+s.outerHeight(true)}}o=e.offset().top+e.outerHeight(false);if(r>o){e.scrollTop(e.scrollTop()+(r-o))}a=l-e.offset().top;if(a<0&&n.css("display")!="none"){e.scrollTop(e.scrollTop()+a)}},"findHighlightableChoices":function(){return this.results.find(".select2-result-selectable:not(.select2-disabled):not(.select2-selected)")},"moveHighlight":function(e){var t=this.findHighlightableChoices(),i=this.highlight();while(i>-1&&i<t.length){i+=e;var n=T(t[i]);if(n.hasClass("select2-result-selectable")&&!n.hasClass("select2-disabled")&&!n.hasClass("select2-selected")){this.highlight(i);break}}},"highlight":function(e){var t=this.findHighlightableChoices(),i,n;if(arguments.length===0){return d(t.filter(".select2-highlighted")[0],t.get())}if(e>=t.length)e=t.length-1;if(e<0)e=0;this.removeHighlight();i=T(t[e]);i.addClass("select2-highlighted");this.search.attr("aria-activedescendant",i.find(".select2-result-label").attr("id"));this.ensureHighlightVisible();this.liveRegion.text(i.text());n=i.data("select2-data");if(n){this.opts.element.trigger({"type":"select2-highlight","val":this.id(n),"choice":n})}},"removeHighlight":function(){this.results.find(".select2-highlighted").removeClass("select2-highlighted")},"touchMoved":function(){this._touchMoved=true},"clearTouchMoved":function(){this._touchMoved=false},"countSelectableResults":function(){return this.findHighlightableChoices().length},"highlightUnderEvent":function(e){var t=T(e.target).closest(".select2-result-selectable");if(t.length>0&&!t.is(".select2-highlighted")){var i=this.findHighlightableChoices();this.highlight(i.index(t))}else if(t.length==0){this.removeHighlight()}},"loadMoreIfNeeded":function(){var t=this.results,i=t.find("li.select2-more-results"),e,n=this.resultsPage+1,r=this,o=this.search.val(),a=this.context;if(i.length===0)return;e=i.offset().top-t.offset().top-t.height();if(e<=this.opts.loadMorePadding){i.addClass("select2-active");this.opts.query({"element":this.opts.element,"term":o,"page":n,"context":a,"matcher":this.opts.matcher,"callback":this.bind(function(e){if(!r.opened())return;r.opts.populateResults.call(this,t,e.results,{"term":o,"page":n,"context":a});r.postprocessResults(e,false,false);if(e.more===true){i.detach().appendTo(t).html(r.opts.escapeMarkup(P(r.opts.formatLoadMore,r.opts.element,n+1)));window.setTimeout(function(){r.loadMoreIfNeeded()},10)}else{i.remove()}r.positionDropdown();r.resultsPage=n;r.context=e.context;this.opts.element.trigger({"type":"select2-loaded","items":e})})})}},"tokenize":function(){},"updateResults":function(i){var n=this.search,r=this.results,o=this.opts,e,a=this,t,s=n.val(),l=T.data(this.container,"select2-last-term"),u;if(i!==true&&l&&f(s,l))return;T.data(this.container,"select2-last-term",s);if(i!==true&&(this.showSearchInput===false||!this.opened())){return}function c(){n.removeClass("select2-active");a.positionDropdown();if(r.find(".select2-no-results,.select2-selection-limit,.select2-searching").length){a.liveRegion.text(r.text())}else{a.liveRegion.text(a.opts.formatMatches(r.find('.select2-result-selectable:not(".select2-selected")').length))}}function d(e){r.html(e);c()}u=++this.queryCount;var h=this.getMaximumSelectionSize();if(h>=1){e=this.data();if(T.isArray(e)&&e.length>=h&&L(o.formatSelectionTooBig,"formatSelectionTooBig")){d("<li class='select2-selection-limit'>"+P(o.formatSelectionTooBig,o.element,h)+"</li>");return}}if(n.val().length<o.minimumInputLength){if(L(o.formatInputTooShort,"formatInputTooShort")){d("<li class='select2-no-results'>"+P(o.formatInputTooShort,o.element,n.val(),o.minimumInputLength)+"</li>")}else{d("")}if(i&&this.showSearch)this.showSearch(true);return}if(o.maximumInputLength&&n.val().length>o.maximumInputLength){if(L(o.formatInputTooLong,"formatInputTooLong")){d("<li class='select2-no-results'>"+P(o.formatInputTooLong,o.element,n.val(),o.maximumInputLength)+"</li>")}else{d("")}return}if(o.formatSearching&&this.findHighlightableChoices().length===0){d("<li class='select2-searching'>"+P(o.formatSearching,o.element)+"</li>")}n.addClass("select2-active");this.removeHighlight();t=this.tokenize();if(t!=_&&t!=null){n.val(t)}this.resultsPage=1;o.query({"element":o.element,"term":n.val(),"page":this.resultsPage,"context":null,"matcher":o.matcher,"callback":this.bind(function(e){var t;if(u!=this.queryCount){return}if(!this.opened()){this.search.removeClass("select2-active");return}if(e.hasError!==_&&L(o.formatAjaxError,"formatAjaxError")){d("<li class='select2-ajax-error'>"+P(o.formatAjaxError,o.element,e.jqXHR,e.textStatus,e.errorThrown)+"</li>");return}this.context=e.context===_?null:e.context;if(this.opts.createSearchChoice&&n.val()!==""){t=this.opts.createSearchChoice.call(a,n.val(),e.results);if(t!==_&&t!==null&&a.id(t)!==_&&a.id(t)!==null){if(T(e.results).filter(function(){return f(a.id(this),a.id(t))}).length===0){this.opts.createSearchChoicePosition(e.results,t)}}}if(e.results.length===0&&L(o.formatNoMatches,"formatNoMatches")){d("<li class='select2-no-results'>"+P(o.formatNoMatches,o.element,n.val())+"</li>");return}r.empty();a.opts.populateResults.call(this,r,e.results,{"term":n.val(),"page":this.resultsPage,"context":null});if(e.more===true&&L(o.formatLoadMore,"formatLoadMore")){r.append("<li class='select2-more-results'>"+o.escapeMarkup(P(o.formatLoadMore,o.element,this.resultsPage))+"</li>");window.setTimeout(function(){a.loadMoreIfNeeded()},10)}this.postprocessResults(e,i);c();this.opts.element.trigger({"type":"select2-loaded","items":e})})})},"cancel":function(){this.close()},"blur":function(){if(this.opts.selectOnBlur)this.selectHighlighted({"noFocus":true});this.close();this.container.removeClass("select2-container-active");if(this.search[0]===document.activeElement){this.search.blur()}this.clearSearch();this.selection.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus")},"focusSearch":function(){B(this.search)},"selectHighlighted":function(e){if(this._touchMoved){this.clearTouchMoved();return}var t=this.highlight(),i=this.results.find(".select2-highlighted"),n=i.closest(".select2-result").data("select2-data");if(n){this.highlight(t);this.onSelect(n,e)}else if(e&&e.noFocus){this.close()}},"getPlaceholder":function(){var e;return this.opts.element.attr("placeholder")||this.opts.element.attr("data-placeholder")||this.opts.element.data("placeholder")||this.opts.placeholder||((e=this.getPlaceholderOption())!==_?e.text():_)},"getPlaceholderOption":function(){if(this.select){var e=this.select.children("option").first();if(this.opts.placeholderOption!==_){return this.opts.placeholderOption==="first"&&e||typeof this.opts.placeholderOption==="function"&&this.opts.placeholderOption(this.select)}else if(T.trim(e.text())===""&&e.val()===""){return e}}},"initContainerWidth":function(){function e(){var e,t,i,n,r,o;if(this.opts.width==="off"){return null}else if(this.opts.width==="element"){return this.opts.element.outerWidth(false)===0?"auto":this.opts.element.outerWidth(false)+"px"}else if(this.opts.width==="copy"||this.opts.width==="resolve"){e=this.opts.element.attr("style");if(e!==_){t=e.split(";");for(n=0,r=t.length;n<r;n=n+1){o=t[n].replace(/\s/g,"");i=o.match(/^width:(([-+]?([0-9]*\.)?[0-9]+)(px|em|ex|%|in|cm|mm|pt|pc))/i);if(i!==null&&i.length>=1)return i[1]}}if(this.opts.width==="resolve"){e=this.opts.element.css("width");if(e.indexOf("%")>0)return e;return this.opts.element.outerWidth(false)===0?"auto":this.opts.element.outerWidth(false)+"px"}return null}else if(T.isFunction(this.opts.width)){return this.opts.width()}else{return this.opts.width}}var t=e.call(this);if(t!==null){this.container.css("width",t)}}});t=M(e,{"createContainer":function(){var e=T(document.createElement("div")).attr({"class":"select2-container"}).html(["<a href='javascript:void(0)' class='select2-choice' tabindex='-1'>","   <span class='select2-chosen'>&#160;</span><abbr class='select2-search-choice-close'></abbr>","   <span class='select2-arrow' role='presentation'><b role='presentation'></b></span>","</a>","<label for='' class='select2-offscreen'></label>","<input class='select2-focusser select2-offscreen' type='text' aria-haspopup='true' role='button' />","<div class='select2-drop select2-display-none'>","   <div class='select2-search'>","       <label for='' class='select2-offscreen'></label>","       <input type='text' autocomplete='off' autocorrect='off' autocapitalize='off' spellcheck='false' class='select2-input' role='combobox' aria-expanded='true'","       aria-autocomplete='list' />","   </div>","   <ul class='select2-results' role='listbox'>","   </ul>","</div>"].join(""));return e},"enableInterface":function(){if(this.parent.enableInterface.apply(this,arguments)){this.focusser.prop("disabled",!this.isInterfaceEnabled())}},"opening":function(){var e,t,i;if(this.opts.minimumResultsForSearch>=0){this.showSearch(true)}this.parent.opening.apply(this,arguments);if(this.showSearchInput!==false){this.search.val(this.focusser.val())}if(this.opts.shouldFocusInput(this)){this.search.focus();e=this.search.get(0);if(e.createTextRange){t=e.createTextRange();t.collapse(false);t.select()}else if(e.setSelectionRange){i=this.search.val().length;e.setSelectionRange(i,i)}}if(this.search.val()===""){if(this.nextSearchTerm!=_){this.search.val(this.nextSearchTerm);this.search.select()}}this.focusser.prop("disabled",true).val("");this.updateResults(true);this.opts.element.trigger(T.Event("select2-open"))},"close":function(){if(!this.opened())return;this.parent.close.apply(this,arguments);this.focusser.prop("disabled",false);if(this.opts.shouldFocusInput(this)){this.focusser.focus()}},"focus":function(){if(this.opened()){this.close()}else{this.focusser.prop("disabled",false);if(this.opts.shouldFocusInput(this)){this.focusser.focus()}}},"isFocused":function(){return this.container.hasClass("select2-container-active")},"cancel":function(){this.parent.cancel.apply(this,arguments);this.focusser.prop("disabled",false);if(this.opts.shouldFocusInput(this)){this.focusser.focus()}},"destroy":function(){T("label[for='"+this.focusser.attr("id")+"']").attr("for",this.opts.element.attr("id"));this.parent.destroy.apply(this,arguments);D.call(this,"selection","focusser")},"initContainer":function(){var t,e=this.container,i=this.dropdown,n=w(),r;if(this.opts.minimumResultsForSearch<0){this.showSearch(false)}else{this.showSearch(true)}this.selection=t=e.find(".select2-choice");this.focusser=e.find(".select2-focusser");t.find(".select2-chosen").attr("id","select2-chosen-"+n);this.focusser.attr("aria-labelledby","select2-chosen-"+n);this.results.attr("id","select2-results-"+n);this.search.attr("aria-owns","select2-results-"+n);this.focusser.attr("id","s2id_autogen"+n);r=T("label[for='"+this.opts.element.attr("id")+"']");this.opts.element.focus(this.bind(function(){this.focus()}));this.focusser.prev().text(r.text()).attr("for",this.focusser.attr("id"));var o=this.opts.element.attr("title");this.opts.element.attr("title",o||r.text());this.focusser.attr("tabindex",this.elementTabIndex);this.search.attr("id",this.focusser.attr("id")+"_search");this.search.prev().text(T("label[for='"+this.focusser.attr("id")+"']").text()).attr("for",this.search.attr("id"));this.search.on("keydown",this.bind(function(e){if(!this.isInterfaceEnabled())return;if(229==e.keyCode)return;if(e.which===s.PAGE_UP||e.which===s.PAGE_DOWN){E(e);return}switch(e.which){case s.UP:case s.DOWN:this.moveHighlight(e.which===s.UP?-1:1);E(e);return;case s.ENTER:this.selectHighlighted();E(e);return;case s.TAB:this.selectHighlighted({"noFocus":true});return;case s.ESC:this.cancel(e);E(e);return}}));this.search.on("blur",this.bind(function(e){if(document.activeElement===this.body.get(0)){window.setTimeout(this.bind(function(){if(this.opened()){this.search.focus()}}),0)}}));this.focusser.on("keydown",this.bind(function(e){if(!this.isInterfaceEnabled())return;if(e.which===s.TAB||s.isControl(e)||s.isFunctionKey(e)||e.which===s.ESC){return}if(this.opts.openOnEnter===false&&e.which===s.ENTER){E(e);return}if(e.which==s.DOWN||e.which==s.UP||e.which==s.ENTER&&this.opts.openOnEnter){if(e.altKey||e.ctrlKey||e.shiftKey||e.metaKey)return;this.open();E(e);return}if(e.which==s.DELETE||e.which==s.BACKSPACE){if(this.opts.allowClear){this.clear()}E(e);return}}));v(this.focusser);this.focusser.on("keyup-change input",this.bind(function(e){if(this.opts.minimumResultsForSearch>=0){e.stopPropagation();if(this.opened())return;this.open()}}));t.on("mousedown touchstart","abbr",this.bind(function(e){if(!this.isInterfaceEnabled()){return}this.clear();N(e);this.close();if(this.selection){this.selection.focus()}}));t.on("mousedown touchstart",this.bind(function(e){u(t);if(!this.container.hasClass("select2-container-active")){this.opts.element.trigger(T.Event("select2-focus"))}if(this.opened()){this.close()}else if(this.isInterfaceEnabled()){this.open()}E(e)}));i.on("mousedown touchstart",this.bind(function(){if(this.opts.shouldFocusInput(this)){this.search.focus()}}));t.on("focus",this.bind(function(e){E(e)}));this.focusser.on("focus",this.bind(function(){if(!this.container.hasClass("select2-container-active")){this.opts.element.trigger(T.Event("select2-focus"))}this.container.addClass("select2-container-active")})).on("blur",this.bind(function(){if(!this.opened()){this.container.removeClass("select2-container-active");this.opts.element.trigger(T.Event("select2-blur"))}}));this.search.on("focus",this.bind(function(){if(!this.container.hasClass("select2-container-active")){this.opts.element.trigger(T.Event("select2-focus"))}this.container.addClass("select2-container-active")}));this.initContainerWidth();this.opts.element.hide();this.setPlaceholder()},"clear":function(e){var t=this.selection.data("select2-data");if(t){var i=T.Event("select2-clearing");this.opts.element.trigger(i);if(i.isDefaultPrevented()){return}var n=this.getPlaceholderOption();this.opts.element.val(n?n.val():"");this.selection.find(".select2-chosen").empty();this.selection.removeData("select2-data");this.setPlaceholder();if(e!==false){this.opts.element.trigger({"type":"select2-removed","val":this.id(t),"choice":t});this.triggerChange({"removed":t})}}},"initSelection":function(){var e;if(this.isPlaceholderOptionSelected()){this.updateSelection(null);this.close();this.setPlaceholder()}else{var t=this;this.opts.initSelection.call(null,this.opts.element,function(e){if(e!==_&&e!==null){t.updateSelection(e);t.close();t.setPlaceholder();t.nextSearchTerm=t.opts.nextSearchTerm(e,t.search.val())}})}},"isPlaceholderOptionSelected":function(){var e;if(this.getPlaceholder()===_)return false;return(e=this.getPlaceholderOption())!==_&&e.prop("selected")||this.opts.element.val()===""||this.opts.element.val()===_||this.opts.element.val()===null},"prepareOpts":function(){var a=this.parent.prepareOpts.apply(this,arguments),n=this;if(a.element.get(0).tagName.toLowerCase()==="select"){a.initSelection=function(e,t){var i=e.find("option").filter(function(){return this.selected&&!this.disabled});t(n.optionToData(i))}}else if("data"in a){a.initSelection=a.initSelection||function(e,t){var r=e.val();var o=null;a.query({"matcher":function(e,t,i){var n=f(r,a.id(i));if(n){o=i}return n},"callback":!T.isFunction(t)?T.noop:function(){t(o)}})}}return a},"getPlaceholder":function(){if(this.select){if(this.getPlaceholderOption()===_){return _}}return this.parent.getPlaceholder.apply(this,arguments)},"setPlaceholder":function(){var e=this.getPlaceholder();if(this.isPlaceholderOptionSelected()&&e!==_){if(this.select&&this.getPlaceholderOption()===_)return;this.selection.find(".select2-chosen").html(this.opts.escapeMarkup(e));this.selection.addClass("select2-default");this.container.removeClass("select2-allowclear")}},"postprocessResults":function(e,t,i){var n=0,r=this,o=true;this.findHighlightableChoices().each2(function(e,t){if(f(r.id(t.data("select2-data")),r.opts.element.val())){n=e;return false}});if(i!==false){if(t===true&&n>=0){this.highlight(n)}else{this.highlight(0)}}if(t===true){var a=this.opts.minimumResultsForSearch;if(a>=0){this.showSearch(I(e.results)>=a)}}},"showSearch":function(e){if(this.showSearchInput===e)return;this.showSearchInput=e;this.dropdown.find(".select2-search").toggleClass("select2-search-hidden",!e);this.dropdown.find(".select2-search").toggleClass("select2-offscreen",!e);T(this.dropdown,this.container).toggleClass("select2-with-searchbox",e)},"onSelect":function(e,t){if(!this.triggerSelect(e)){return}var i=this.opts.element.val(),n=this.data();this.opts.element.val(this.id(e));this.updateSelection(e);this.opts.element.trigger({"type":"select2-selected","val":this.id(e),"choice":e});this.nextSearchTerm=this.opts.nextSearchTerm(e,this.search.val());this.close();if((!t||!t.noFocus)&&this.opts.shouldFocusInput(this)){this.focusser.focus()}if(!f(i,this.id(e))){this.triggerChange({"added":e,"removed":n})}},"updateSelection":function(e){var t=this.selection.find(".select2-chosen"),i,n;this.selection.data("select2-data",e);t.empty();if(e!==null){i=this.opts.formatSelection(e,t,this.opts.escapeMarkup)}if(i!==_){t.append(i)}n=this.opts.formatSelectionCssClass(e,t);if(n!==_){t.addClass(n)}this.selection.removeClass("select2-default");if(this.opts.allowClear&&this.getPlaceholder()!==_){this.container.addClass("select2-allowclear")}},"val":function(){var e,t=false,i=null,n=this,r=this.data();if(arguments.length===0){return this.opts.element.val()}e=arguments[0];if(arguments.length>1){t=arguments[1]}if(this.select){this.select.val(e).find("option").filter(function(){return this.selected}).each2(function(e,t){i=n.optionToData(t);return false});this.updateSelection(i);this.setPlaceholder();if(t){this.triggerChange({"added":i,"removed":r})}}else{if(!e&&e!==0){this.clear(t);return}if(this.opts.initSelection===_){throw new Error("cannot call val() if initSelection() is not defined")}this.opts.element.val(e);this.opts.initSelection(this.opts.element,function(e){n.opts.element.val(!e?"":n.id(e));n.updateSelection(e);n.setPlaceholder();if(t){n.triggerChange({"added":e,"removed":r})}})}},"clearSearch":function(){this.search.val("");this.focusser.val("")},"data":function(e){var t,i=false;if(arguments.length===0){t=this.selection.data("select2-data");if(t==_)t=null;return t}else{if(arguments.length>1){i=arguments[1]}if(!e){this.clear(i)}else{t=this.data();this.opts.element.val(!e?"":this.id(e));this.updateSelection(e);if(i){this.triggerChange({"added":e,"removed":t})}}}}});i=M(e,{"createContainer":function(){var e=T(document.createElement("div")).attr({"class":"select2-container select2-container-multi"}).html(["<ul class='select2-choices'>","  <li class='select2-search-field'>","    <label for='' class='select2-offscreen'></label>","    <input type='text' autocomplete='off' autocorrect='off' autocapitalize='off' spellcheck='false' class='select2-input'>","  </li>","</ul>","<div class='select2-drop select2-drop-multi select2-display-none'>","   <ul class='select2-results'>","   </ul>","</div>"].join(""));return e},"prepareOpts":function(){var l=this.parent.prepareOpts.apply(this,arguments),n=this;if(l.element.get(0).tagName.toLowerCase()==="select"){l.initSelection=function(e,t){var i=[];e.find("option").filter(function(){return this.selected&&!this.disabled}).each2(function(e,t){i.push(n.optionToData(t))});t(i)}}else if("data"in l){l.initSelection=l.initSelection||function(e,o){var a=p(e.val(),l.separator,l.transformVal);var s=[];l.query({"matcher":function(e,t,i){var n=T.grep(a,function(e){return f(e,l.id(i))}).length;if(n){s.push(i)}return n},"callback":!T.isFunction(o)?T.noop:function(){var e=[];for(var t=0;t<a.length;t++){var i=a[t];for(var n=0;n<s.length;n++){var r=s[n];if(f(i,l.id(r))){e.push(r);s.splice(n,1);break}}}o(e)}})}}return l},"selectChoice":function(e){var t=this.container.find(".select2-search-choice-focus");if(t.length&&e&&e[0]==t[0]){}else{if(t.length){this.opts.element.trigger("choice-deselected",t)}t.removeClass("select2-search-choice-focus");if(e&&e.length){this.close();e.addClass("select2-search-choice-focus");this.opts.element.trigger("choice-selected",e)}}},"destroy":function(){T("label[for='"+this.search.attr("id")+"']").attr("for",this.opts.element.attr("id"));this.parent.destroy.apply(this,arguments);D.call(this,"searchContainer","selection")},"initContainer":function(){var e=".select2-choices",a;this.searchContainer=this.container.find(".select2-search-field");this.selection=a=this.container.find(e);var t=this;this.selection.on("click",".select2-container:not(.select2-container-disabled) .select2-search-choice:not(.select2-locked)",function(e){t.search[0].focus();t.selectChoice(T(this))});this.search.attr("id","s2id_autogen"+w());this.search.prev().text(T("label[for='"+this.opts.element.attr("id")+"']").text()).attr("for",this.search.attr("id"));this.opts.element.focus(this.bind(function(){this.focus()}));this.search.on("input paste",this.bind(function(){if(this.search.attr("placeholder")&&this.search.val().length==0)return;if(!this.isInterfaceEnabled())return;if(!this.opened()){this.open()}}));this.search.attr("tabindex",this.elementTabIndex);this.keydowns=0;this.search.on("keydown",this.bind(function(e){if(!this.isInterfaceEnabled())return;++this.keydowns;var t=a.find(".select2-search-choice-focus");var i=t.prev(".select2-search-choice:not(.select2-locked)");var n=t.next(".select2-search-choice:not(.select2-locked)");var r=F(this.search);if(t.length&&(e.which==s.LEFT||e.which==s.RIGHT||e.which==s.BACKSPACE||e.which==s.DELETE||e.which==s.ENTER)){var o=t;if(e.which==s.LEFT&&i.length){o=i}else if(e.which==s.RIGHT){o=n.length?n:null}else if(e.which===s.BACKSPACE){if(this.unselect(t.first())){this.search.width(10);o=i.length?i:n}}else if(e.which==s.DELETE){if(this.unselect(t.first())){this.search.width(10);o=n.length?n:null}}else if(e.which==s.ENTER){o=null}this.selectChoice(o);E(e);if(!o||!o.length){this.open()}return}else if((e.which===s.BACKSPACE&&this.keydowns==1||e.which==s.LEFT)&&(r.offset==0&&!r.length)){this.selectChoice(a.find(".select2-search-choice:not(.select2-locked)").last());E(e);return}else{this.selectChoice(null)}if(this.opened()){switch(e.which){case s.UP:case s.DOWN:this.moveHighlight(e.which===s.UP?-1:1);E(e);return;case s.ENTER:this.selectHighlighted();E(e);return;case s.TAB:this.selectHighlighted({"noFocus":true});this.close();return;case s.ESC:this.cancel(e);E(e);return}}if(e.which===s.TAB||s.isControl(e)||s.isFunctionKey(e)||e.which===s.BACKSPACE||e.which===s.ESC){return}if(e.which===s.ENTER){if(this.opts.openOnEnter===false){return}else if(e.altKey||e.ctrlKey||e.shiftKey||e.metaKey){return}}this.open();if(e.which===s.PAGE_UP||e.which===s.PAGE_DOWN){E(e)}if(e.which===s.ENTER){E(e)}}));this.search.on("keyup",this.bind(function(e){this.keydowns=0;this.resizeSearch()}));this.search.on("blur",this.bind(function(e){this.container.removeClass("select2-container-active");this.search.removeClass("select2-focused");this.selectChoice(null);if(!this.opened())this.clearSearch();e.stopImmediatePropagation();this.opts.element.trigger(T.Event("select2-blur"))}));this.container.on("click",e,this.bind(function(e){if(!this.isInterfaceEnabled())return;if(T(e.target).closest(".select2-search-choice").length>0){return}this.selectChoice(null);this.clearPlaceholder();if(!this.container.hasClass("select2-container-active")){this.opts.element.trigger(T.Event("select2-focus"))}this.open();this.focusSearch();e.preventDefault()}));this.container.on("focus",e,this.bind(function(){if(!this.isInterfaceEnabled())return;if(!this.container.hasClass("select2-container-active")){this.opts.element.trigger(T.Event("select2-focus"))}this.container.addClass("select2-container-active");this.dropdown.addClass("select2-drop-active");this.clearPlaceholder()}));this.initContainerWidth();this.opts.element.hide();this.clearSearch()},"enableInterface":function(){if(this.parent.enableInterface.apply(this,arguments)){this.search.prop("disabled",!this.isInterfaceEnabled())}},"initSelection":function(){var e;if(this.opts.element.val()===""&&this.opts.element.text()===""){this.updateSelection([]);this.close();this.clearSearch()}if(this.select||this.opts.element.val()!==""){var t=this;this.opts.initSelection.call(null,this.opts.element,function(e){if(e!==_&&e!==null){t.updateSelection(e);t.close();t.clearSearch()}})}},"clearSearch":function(){var e=this.getPlaceholder(),t=this.getMaxSearchWidth();if(e!==_&&this.getVal().length===0&&this.search.hasClass("select2-focused")===false){this.search.val(e).addClass("select2-default");this.search.width(t>0?t:this.container.css("width"))}else{this.search.val("").width(10)}},"clearPlaceholder":function(){if(this.search.hasClass("select2-default")){this.search.val("").removeClass("select2-default")}},"opening":function(){this.clearPlaceholder();this.resizeSearch();this.parent.opening.apply(this,arguments);this.focusSearch();if(this.search.val()===""){if(this.nextSearchTerm!=_){this.search.val(this.nextSearchTerm);this.search.select()}}this.updateResults(true);if(this.opts.shouldFocusInput(this)){this.search.focus()}this.opts.element.trigger(T.Event("select2-open"))},"close":function(){if(!this.opened())return;this.parent.close.apply(this,arguments)},"focus":function(){this.close();this.search.focus()},"isFocused":function(){return this.search.hasClass("select2-focused")},"updateSelection":function(e){var t=[],i=[],n=this;T(e).each(function(){if(d(n.id(this),t)<0){t.push(n.id(this));i.push(this)}});e=i;this.selection.find(".select2-search-choice").remove();T(e).each(function(){n.addSelectedChoice(this)});n.postprocessResults()},"tokenize":function(){var e=this.search.val();e=this.opts.tokenizer.call(this,e,this.data(),this.bind(this.onSelect),this.opts);if(e!=null&&e!=_){this.search.val(e);if(e.length>0){this.open()}}},"onSelect":function(e,t){if(!this.triggerSelect(e)||e.text===""){return}this.addSelectedChoice(e);this.opts.element.trigger({"type":"selected","val":this.id(e),"choice":e});this.nextSearchTerm=this.opts.nextSearchTerm(e,this.search.val());this.clearSearch();this.updateResults();if(this.select||!this.opts.closeOnSelect)this.postprocessResults(e,false,this.opts.closeOnSelect===true);if(this.opts.closeOnSelect){this.close();this.search.width(10)}else{if(this.countSelectableResults()>0){this.search.width(10);this.resizeSearch();if(this.getMaximumSelectionSize()>0&&this.val().length>=this.getMaximumSelectionSize()){this.updateResults(true)}else{if(this.nextSearchTerm!=_){this.search.val(this.nextSearchTerm);this.updateResults();this.search.select()}}this.positionDropdown()}else{this.close();this.search.width(10)}}this.triggerChange({"added":e});if(!t||!t.noFocus)this.focusSearch()},"cancel":function(){this.close();this.focusSearch()},"addSelectedChoice":function(e){var t=!e.locked,i=T("<li class='select2-search-choice'>"+"    <div></div>"+"    <a href='#' class='select2-search-choice-close' tabindex='-1'></a>"+"</li>"),n=T("<li class='select2-search-choice select2-locked'>"+"<div></div>"+"</li>");var r=t?i:n,o=this.id(e),a=this.getVal(),s,l;s=this.opts.formatSelection(e,r.find("div"),this.opts.escapeMarkup);if(s!=_){r.find("div").replaceWith(T("<div></div>").html(s))}l=this.opts.formatSelectionCssClass(e,r.find("div"));if(l!=_){r.addClass(l)}if(t){r.find(".select2-search-choice-close").on("mousedown",E).on("click dblclick",this.bind(function(e){if(!this.isInterfaceEnabled())return;this.unselect(T(e.target));this.selection.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus");E(e);this.close();this.focusSearch()})).on("focus",this.bind(function(){if(!this.isInterfaceEnabled())return;this.container.addClass("select2-container-active");this.dropdown.addClass("select2-drop-active")}))}r.data("select2-data",e);r.insertBefore(this.searchContainer);a.push(o);this.setVal(a)},"unselect":function(e){var t=this.getVal(),i,n;e=e.closest(".select2-search-choice");if(e.length===0){throw"Invalid argument: "+e+". Must be .select2-search-choice"}i=e.data("select2-data");if(!i){return}var r=T.Event("select2-removing");r.val=this.id(i);r.choice=i;this.opts.element.trigger(r);if(r.isDefaultPrevented()){return false}while((n=d(this.id(i),t))>=0){t.splice(n,1);this.setVal(t);if(this.select)this.postprocessResults()}e.remove();this.opts.element.trigger({"type":"select2-removed","val":this.id(i),"choice":i});this.triggerChange({"removed":i});return true},"postprocessResults":function(e,t,i){var n=this.getVal(),r=this.results.find(".select2-result"),o=this.results.find(".select2-result-with-children"),a=this;r.each2(function(e,t){var i=a.id(t.data("select2-data"));if(d(i,n)>=0){t.addClass("select2-selected");t.find(".select2-result-selectable").addClass("select2-selected")}});o.each2(function(e,t){if(!t.is(".select2-result-selectable")&&t.find(".select2-result-selectable:not(.select2-selected)").length===0){t.addClass("select2-selected")}});if(this.highlight()==-1&&i!==false&&this.opts.closeOnSelect===true){a.highlight(0)}if(!this.opts.createSearchChoice&&!r.filter(".select2-result:not(.select2-selected)").length>0){if(!e||e&&!e.more&&this.results.find(".select2-no-results").length===0){if(L(a.opts.formatNoMatches,"formatNoMatches")){this.results.append("<li class='select2-no-results'>"+P(a.opts.formatNoMatches,a.opts.element,a.search.val())+"</li>")}}}},"getMaxSearchWidth":function(){return this.selection.width()-g(this.search)},"resizeSearch":function(){var e,t,i,n,r,o=g(this.search);e=j(this.search)+10;t=this.search.offset().left;i=this.selection.width();n=this.selection.offset().left;r=i-(t-n)-o;if(r<e){r=i-o}if(r<40){r=i-o}if(r<=0){r=e}this.search.width(Math.floor(r))},"getVal":function(){var e;if(this.select){e=this.select.val();return e===null?[]:e}else{e=this.opts.element.val();return p(e,this.opts.separator,this.opts.transformVal)}},"setVal":function(e){var t;if(this.select){this.select.val(e)}else{t=[];T(e).each(function(){if(d(this,t)<0)t.push(this)});this.opts.element.val(t.length===0?"":t.join(this.opts.separator))}},"buildChangeDetails":function(e,t){var t=t.slice(0),e=e.slice(0);for(var i=0;i<t.length;i++){for(var n=0;n<e.length;n++){if(f(this.opts.id(t[i]),this.opts.id(e[n]))){t.splice(i,1);if(i>0){i--}e.splice(n,1);n--}}}return{"added":t,"removed":e}},"val":function(e,i){var n,r=this;if(arguments.length===0){return this.getVal()}n=this.data();if(!n.length)n=[];if(!e&&e!==0){this.opts.element.val("");this.updateSelection([]);this.clearSearch();if(i){this.triggerChange({"added":this.data(),"removed":n})}return}this.setVal(e);if(this.select){this.opts.initSelection(this.select,this.bind(this.updateSelection));if(i){this.triggerChange(this.buildChangeDetails(n,this.data()))}}else{if(this.opts.initSelection===_){throw new Error("val() cannot be called if initSelection() is not defined")}this.opts.initSelection(this.opts.element,function(e){var t=T.map(e,r.id);r.setVal(t);r.updateSelection(e);r.clearSearch();if(i){r.triggerChange(r.buildChangeDetails(n,r.data()))}})}this.clearSearch()},"onSortStart":function(){if(this.select){throw new Error("Sorting of elements is not supported when attached to <select>. Attach to <input type='hidden'/> instead.")}this.search.width(0);this.searchContainer.hide()},"onSortEnd":function(){var e=[],t=this;this.searchContainer.show();this.searchContainer.appendTo(this.searchContainer.parent());this.resizeSearch();this.selection.find(".select2-search-choice").each(function(){e.push(t.opts.id(T(this).data("select2-data")))});this.setVal(e);this.triggerChange()},"data":function(e,t){var i=this,n,r;if(arguments.length===0){return this.selection.children(".select2-search-choice").map(function(){return T(this).data("select2-data")}).get()}else{r=this.data();if(!e){e=[]}n=T.map(e,function(e){return i.opts.id(e)});this.setVal(n);this.updateSelection(e);this.clearSearch();if(t){this.triggerChange(this.buildChangeDetails(r,this.data()))}}}});T.fn.select2=function(){var e=Array.prototype.slice.call(arguments,0),t,i,n,r,o,a=["val","destroy","opened","open","close","focus","isFocused","container","dropdown","onSortStart","onSortEnd","enable","disable","readonly","positionDropdown","data","search"],s=["opened","isFocused","container","dropdown"],l=["val","data"],u={"search":"externalSearch"};this.each(function(){if(e.length===0||typeof e[0]==="object"){t=e.length===0?{}:T.extend({},e[0]);t.element=T(this);if(t.element.get(0).tagName.toLowerCase()==="select"){o=t.element.prop("multiple")}else{o=t.multiple||false;if("tags"in t){t.multiple=o=true}}i=o?new window.Select2["class"].multi:new window.Select2["class"].single;i.init(t)}else if(typeof e[0]==="string"){if(d(e[0],a)<0){throw"Unknown method: "+e[0]}r=_;i=T(this).data("select2");if(i===_)return;n=e[0];if(n==="container"){r=i.container}else if(n==="dropdown"){r=i.dropdown}else{if(u[n])n=u[n];r=i[n].apply(i,e.slice(1))}if(d(e[0],s)>=0||d(e[0],l)>=0&&e.length==1){return false}}else{throw"Invalid arguments to select2 plugin: "+e}});return r===_?this:r};T.fn.select2.defaults={"width":"copy","loadMorePadding":0,"closeOnSelect":true,"openOnEnter":true,"containerCss":{},"dropdownCss":{},"containerCssClass":"","dropdownCssClass":"","formatResult":function(e,t,i,n){var r=[];k(this.text(e),i.term,r,n);return r.join("")},"transformVal":function(e){return T.trim(e)},"formatSelection":function(e,t,i){return e?i(this.text(e)):_},"sortResults":function(e,t,i){return e},"formatResultCssClass":function(e){return e.css},"formatSelectionCssClass":function(e,t){return _},"minimumResultsForSearch":0,"minimumInputLength":0,"maximumInputLength":null,"maximumSelectionSize":0,"id":function(e){return e==_?null:e.id},"text":function(e){if(e&&this.data&&this.data.text){if(T.isFunction(this.data.text)){return this.data.text(e)}else{return e[this.data.text]}}else{return e.text}},"matcher":function(e,t){return c(""+t).toUpperCase().indexOf(c(""+e).toUpperCase())>=0},"separator":",","tokenSeparators":[],"tokenizer":U,"escapeMarkup":R,"blurOnChange":false,"selectOnBlur":false,"adaptContainerCssClass":function(e){return e},"adaptDropdownCssClass":function(e){return null},"nextSearchTerm":function(e,t){return _},"searchInputPlaceholder":"","createSearchChoicePosition":"top","shouldFocusInput":function(e){var t="ontouchstart"in window||navigator.msMaxTouchPoints>0;if(!t){return true}if(e.opts.minimumResultsForSearch<0){return false}return true}};T.fn.select2.locales=[];T.fn.select2.locales["en"]={"formatMatches":function(e){if(e===1){return"One result is available, press enter to select it."}return e+" results are available, use up and down arrow keys to navigate."},"formatNoMatches":function(){return"No matches found"},"formatAjaxError":function(e,t,i){return"Loading failed"},"formatInputTooShort":function(e,t){var i=t-e.length;return"Please enter "+i+" or more character"+(i==1?"":"s")},"formatInputTooLong":function(e,t){var i=e.length-t;return"Please delete "+i+" character"+(i==1?"":"s")},"formatSelectionTooBig":function(e){return"You can only select "+e+" item"+(e==1?"":"s")},"formatLoadMore":function(e){return"Loading more results…"},"formatSearching":function(){return"Searching…"}};T.extend(T.fn.select2.defaults,T.fn.select2.locales["en"]);T.fn.select2.ajaxDefaults={"transport":T.ajax,"params":{"type":"GET","cache":false,"dataType":"json"}};window.Select2={"query":{"ajax":C,"local":A,"tags":O},"util":{"debounce":y,"markMatch":k,"escapeMarkup":R,"stripDiacritics":c},"class":{"abstract":e,"single":t,"multi":i}}})(jQuery);(function(a){function s(e){return a.expr.filters.visible(e)&&!a(e).parents().addBack().filter(function(){return a.css(this,"visibility")==="hidden"}).length}function t(e,t){var i,n,r,o=e.nodeName.toLowerCase();if("area"===o){i=e.parentNode;n=i.name;if(!e.href||!n||i.nodeName.toLowerCase()!=="map"){return false}r=a("img[usemap=#"+n+"]")[0];return!!r&&s(r)}return(/input|select|textarea|button|object/.test(o)?!e.disabled:"a"===o?e.href||t:t)&&s(e)}a.extend(a.expr[":"],{"focusable":function(e){return t(e,!isNaN(a.attr(e,"tabindex")))}})})(jQuery);(function(r){var n=function(e){this.$buttonsContainer=e;this.$contentContainer=this.$buttonsContainer.next(".tabs-content");if(!this.$contentContainer.length){throw new Error("No tabs contents found")}var t=this;this.$buttonsContainer.on("click","a",function(e){t.showTab(r(this).closest(".tabs > *"))});var i=this.$buttonsContainer.find("> *");var n=i.filter(".active");if(!n.length){n=i.first()}this.showTab(n,true)};n.prototype={"$buttonsContainer":null,"$contentContainer":null,"showTabByName":function(e){var t=this.$buttonsContainer.children('[data-tab="'+e+'"]:first');if(!t.length){throw new Error("No tab with name `"+e+"` found")}this.showTab(t)},"showTab":function(e,t){var i=e.index();e.addClass("active").siblings().removeClass("active");var n=this.$contentContainer.find("> *").eq(i);n.addClass("active").show();n.siblings().removeClass("active").hide();if(!t){e.trigger("tabs.changed",{"content":n})}}};r.fn.tabs=function(i){return this.each(function(){var e=r(this);var t=e.data("tabs");if(!t){t=new n(e);e.data("tabs",t)}if(i){t.showTabByName(i)}})}})(jQuery);(function(e){if(typeof define==="function"&&define.amd){define(["jquery"],e)}else if(typeof module==="object"&&typeof module.exports==="object"){e(require("jquery"))}else{e(jQuery)}})(function(h){h.timeago=function(e){if(e instanceof Date){return a(e)}else if(typeof e==="string"){return a(h.timeago.parse(e))}else if(typeof e==="number"){return a(new Date(e))}else{return a(h.timeago.datetime(e))}};var i=h.timeago;h.extend(h.timeago,{"settings":{"refreshMillis":6e4,"allowPast":true,"allowFuture":false,"localeTitle":false,"cutoff":0,"autoDispose":true,"strings":{"prefixAgo":null,"prefixFromNow":null,"suffixAgo":"ago","suffixFromNow":"from now","inPast":"any moment now","seconds":"less than a minute","minute":"about a minute","minutes":"%d minutes","hour":"about an hour","hours":"about %d hours","day":"a day","days":"%d days","month":"about a month","months":"%d months","year":"about a year","years":"%d years","wordSeparator":" ","numbers":[]}},"inWords":function(r){if(!this.settings.allowPast&&!this.settings.allowFuture){throw"timeago allowPast and allowFuture settings can not both be set to false."}var o=this.settings.strings;var e=o.prefixAgo;var t=o.suffixAgo;if(this.settings.allowFuture){if(r<0){e=o.prefixFromNow;t=o.suffixFromNow}}if(!this.settings.allowPast&&r>=0){return this.settings.strings.inPast}var i=Math.abs(r)/1e3;var n=i/60;var a=n/60;var s=a/24;var l=s/365;function u(e,t){var i=h.isFunction(e)?e(t,r):e;var n=o.numbers&&o.numbers[t]||t;return i.replace(/%d/i,n)}var c=i<45&&u(o.seconds,Math.round(i))||i<90&&u(o.minute,1)||n<45&&u(o.minutes,Math.round(n))||n<90&&u(o.hour,1)||a<24&&u(o.hours,Math.round(a))||a<42&&u(o.day,1)||s<30&&u(o.days,Math.round(s))||s<45&&u(o.month,1)||s<365&&u(o.months,Math.round(s/30))||l<1.5&&u(o.year,1)||u(o.years,Math.round(l));var d=o.wordSeparator||"";if(o.wordSeparator===undefined){d=" "}return h.trim([e,c,t].join(d))},"parse":function(e){var t=h.trim(e);t=t.replace(/\.\d+/,"");t=t.replace(/-/,"/").replace(/-/,"/");t=t.replace(/T/," ").replace(/Z/," UTC");t=t.replace(/([\+\-]\d\d)\:?(\d\d)/," $1$2");t=t.replace(/([\+\-]\d\d)$/," $100");return new Date(t)},"datetime":function(e){var t=i.isTime(e)?h(e).attr("datetime"):h(e).attr("title");return i.parse(t)},"isTime":function(e){return h(e).get(0).tagName.toLowerCase()==="time"}});var n={"init":function(){n.dispose.call(this);var e=h.proxy(r,this);e();var t=i.settings;if(t.refreshMillis>0){this._timeagoInterval=setInterval(e,t.refreshMillis)}},"update":function(e){var t=e instanceof Date?e:i.parse(e);h(this).data("timeago",{"datetime":t});if(i.settings.localeTitle){h(this).attr("title",t.toLocaleString())}r.apply(this)},"updateFromDOM":function(){h(this).data("timeago",{"datetime":i.parse(i.isTime(this)?h(this).attr("datetime"):h(this).attr("title"))});r.apply(this)},"dispose":function(){if(this._timeagoInterval){window.clearInterval(this._timeagoInterval);this._timeagoInterval=null}}};h.fn.timeago=function(e,t){var i=e?n[e]:n.init;if(!i){throw new Error("Unknown function name '"+e+"' for timeago")}this.each(function(){i.call(this,t)});return this};function r(){var e=i.settings;if(e.autoDispose&&!h.contains(document.documentElement,this)){h(this).timeago("dispose");return this}var t=o(this);if(!isNaN(t.datetime)){if(e.cutoff===0||Math.abs(s(t.datetime))<e.cutoff){h(this).text(a(t.datetime))}else{if(h(this).attr("title").length>0){h(this).text(h(this).attr("title"))}}}return this}function o(e){e=h(e);if(!e.data("timeago")){e.data("timeago",{"datetime":i.datetime(e)});var t=h.trim(e.text());if(i.settings.localeTitle){e.attr("title",e.data("timeago").datetime.toLocaleString())}else if(t.length>0&&!(i.isTime(e)&&e.attr("title"))){e.attr("title",t)}}return e.data("timeago")}function a(e){return i.inWords(s(e))}function s(e){return(new Date).getTime()-e.getTime()}document.createElement("abbr");document.createElement("time")});(function(r){var o=function(e,t){t=t||function(e){e?r(this).show():r(this).hide()};this.$element=e;this.callback=t;this.state=false;this.enabled=true;this.modalClose=new ModalClose(this.$element[0],function(){this.setState(false)}.bind(this))};o.prototype.getState=function(){return this.state};o.prototype.setState=function(e){if(!this.getEnabled()||e===this.getState()){return}this._executeCallback(e);e?this.modalClose.enable():this.modalClose.disable();this.state=e};o.prototype.toggle=function(){this.setState(!this.getState())};o.prototype.getEnabled=function(){return this.enabled};o.prototype.setEnabled=function(e){this.enabled=Boolean(e)};o.prototype._executeCallback=function(e){this.callback.call(this.$element,e)};r.fn.toggleModal=function(i,n){if(typeof i==="function"){n=i;i="toggle"}return this.each(function(){var e=r(this);var t=e.data("toggleModal");if(!t){t=new o(e,n);e.data("toggleModal",t)}switch(i){case"enable":t.setEnabled(true);break;case"disable":t.setEnabled(false);break;case"show":case"open":t.setState(true);break;case"hide":case"close":t.setState(false);break;case"toggle":default:t.toggle();break}})}})(jQuery);(function(r){function o(e){this.$toggler=e;this.$content=e.next(".toggleNext-content");this.$icon=null;this.state=false;if(!this.$content.length){throw new Error('toggleNext must have a next sibling with css class "toggleNext-content"')}this.initialize()}o.prototype.initialize=function(){this.$icon=r("<span/>").addClass("icon-arrow-right");this.$toggler.prepend(this.$icon);if(this.$toggler.hasClass("active")){this.toggle(true,true)}var e=this;this.$toggler.on("click.toggleNext",function(){e.toggle()})};o.prototype.toggle=function(t,e){if("undefined"===typeof t){t=!this.state}else if(t===this.state){return}this.state=t;this.$toggler.toggleClass("active",t);this.$icon.toggleClass("active",t);var i=this;var n=e?0:100;this.$content.slideToggle(n,function(){var e={"toggler":i.$toggler,"content":i.$content};i.$toggler.trigger("toggleNext",e);if(t){i.$toggler.trigger("toggleNext-open",e)}else{i.$toggler.trigger("toggleNext-close",e)}})};r.fn.toggleNext=function(i,n){return this.each(function(){var e=r(this);var t=e.data("toggleNext");if(!t){t=new o(e);e.data("toggleNext",t)}switch(i){case"toggle":t.toggle(n);break;default:break}})}})(jQuery);(function(e,t){if(typeof define==="function"&&define.amd){define(["jquery"],t)}else if(typeof exports==="object"){module.exports=t(require("jquery"))}else{t(e.jQuery)}})(this,function(g){g.transit={"version":"0.9.12","propertyMap":{"marginLeft":"margin","marginRight":"margin","marginBottom":"margin","marginTop":"margin","paddingLeft":"padding","paddingRight":"padding","paddingBottom":"padding","paddingTop":"padding"},"enabled":true,"useTransitionEnd":false};var o=document.createElement("div");var v={};function e(e){if(e in o.style)return e;var t=["Moz","Webkit","O","ms"];var i=e.charAt(0).toUpperCase()+e.substr(1);for(var n=0;n<t.length;++n){var r=t[n]+i;if(r in o.style){return r}}}function t(){o.style[v.transform]="";o.style[v.transform]="rotateY(90deg)";return o.style[v.transform]!==""}var n=navigator.userAgent.toLowerCase().indexOf("chrome")>-1;v.transition=e("transition");v.transitionDelay=e("transitionDelay");v.transform=e("transform");v.transformOrigin=e("transformOrigin");v.filter=e("Filter");v.transform3d=t();var i={"transition":"transitionend","MozTransition":"transitionend","OTransition":"oTransitionEnd","WebkitTransition":"webkitTransitionEnd","msTransition":"MSTransitionEnd"};var m=v.transitionEnd=i[v.transition]||null;for(var r in v){if(v.hasOwnProperty(r)&&typeof g.support[r]==="undefined"){g.support[r]=v[r]}}o=null;g.cssEase={"_default":"ease","in":"ease-in","out":"ease-out","in-out":"ease-in-out","snap":"cubic-bezier(0,1,.5,1)","easeInCubic":"cubic-bezier(.550,.055,.675,.190)","easeOutCubic":"cubic-bezier(.215,.61,.355,1)","easeInOutCubic":"cubic-bezier(.645,.045,.355,1)","easeInCirc":"cubic-bezier(.6,.04,.98,.335)","easeOutCirc":"cubic-bezier(.075,.82,.165,1)","easeInOutCirc":"cubic-bezier(.785,.135,.15,.86)","easeInExpo":"cubic-bezier(.95,.05,.795,.035)","easeOutExpo":"cubic-bezier(.19,1,.22,1)","easeInOutExpo":"cubic-bezier(1,0,0,1)","easeInQuad":"cubic-bezier(.55,.085,.68,.53)","easeOutQuad":"cubic-bezier(.25,.46,.45,.94)","easeInOutQuad":"cubic-bezier(.455,.03,.515,.955)","easeInQuart":"cubic-bezier(.895,.03,.685,.22)","easeOutQuart":"cubic-bezier(.165,.84,.44,1)","easeInOutQuart":"cubic-bezier(.77,0,.175,1)","easeInQuint":"cubic-bezier(.755,.05,.855,.06)","easeOutQuint":"cubic-bezier(.23,1,.32,1)","easeInOutQuint":"cubic-bezier(.86,0,.07,1)","easeInSine":"cubic-bezier(.47,0,.745,.715)","easeOutSine":"cubic-bezier(.39,.575,.565,1)","easeInOutSine":"cubic-bezier(.445,.05,.55,.95)","easeInBack":"cubic-bezier(.6,-.28,.735,.045)","easeOutBack":"cubic-bezier(.175, .885,.32,1.275)","easeInOutBack":"cubic-bezier(.68,-.55,.265,1.55)"};g.cssHooks["transit:transform"]={"get":function(e){return g(e).data("transform")||new a},"set":function(e,t){var i=t;if(!(i instanceof a)){i=new a(i)}if(v.transform==="WebkitTransform"&&!n){e.style[v.transform]=i.toString(true)}else{e.style[v.transform]=i.toString()}g(e).data("transform",i)}};g.cssHooks.transform={"set":g.cssHooks["transit:transform"].set};g.cssHooks.filter={"get":function(e){return e.style[v.filter]},"set":function(e,t){e.style[v.filter]=t}};if(g.fn.jquery<"1.8"){g.cssHooks.transformOrigin={"get":function(e){return e.style[v.transformOrigin]},"set":function(e,t){e.style[v.transformOrigin]=t}};g.cssHooks.transition={"get":function(e){return e.style[v.transition]},"set":function(e,t){e.style[v.transition]=t}}}l("scale");l("scaleX");l("scaleY");l("translate");l("rotate");l("rotateX");l("rotateY");l("rotate3d");l("perspective");l("skewX");l("skewY");l("x",true);l("y",true);function a(e){if(typeof e==="string"){this.parse(e)}return this}a.prototype={"setFromString":function(e,t){var i=typeof t==="string"?t.split(","):t.constructor===Array?t:[t];i.unshift(e);a.prototype.set.apply(this,i)},"set":function(e){var t=Array.prototype.slice.apply(arguments,[1]);if(this.setter[e]){this.setter[e].apply(this,t)}else{this[e]=t.join(",")}},"get":function(e){if(this.getter[e]){return this.getter[e].apply(this)}else{return this[e]||0}},"setter":{"rotate":function(e){this.rotate=c(e,"deg")},"rotateX":function(e){this.rotateX=c(e,"deg")},"rotateY":function(e){this.rotateY=c(e,"deg")},"scale":function(e,t){if(t===undefined){t=e}this.scale=e+","+t},"skewX":function(e){this.skewX=c(e,"deg")},"skewY":function(e){this.skewY=c(e,"deg")},"perspective":function(e){this.perspective=c(e,"px")},"x":function(e){this.set("translate",e,null)},"y":function(e){this.set("translate",null,e)},"translate":function(e,t){if(this._translateX===undefined){this._translateX=0}if(this._translateY===undefined){this._translateY=0}if(e!==null&&e!==undefined){this._translateX=c(e,"px")}if(t!==null&&t!==undefined){this._translateY=c(t,"px")}this.translate=this._translateX+","+this._translateY}},"getter":{"x":function(){return this._translateX||0},"y":function(){return this._translateY||0},"scale":function(){var e=(this.scale||"1,1").split(",");if(e[0]){e[0]=parseFloat(e[0])}if(e[1]){e[1]=parseFloat(e[1])}return e[0]===e[1]?e[0]:e},"rotate3d":function(){var e=(this.rotate3d||"0,0,0,0deg").split(",");for(var t=0;t<=3;++t){if(e[t]){e[t]=parseFloat(e[t])}}if(e[3]){e[3]=c(e[3],"deg")}return e}},"parse":function(e){var n=this;e.replace(/([a-zA-Z0-9]+)\((.*?)\)/g,function(e,t,i){n.setFromString(t,i)})},"toString":function(e){var t=[];for(var i in this){if(this.hasOwnProperty(i)){if(!v.transform3d&&(i==="rotateX"||i==="rotateY"||i==="perspective"||i==="transformOrigin")){continue}if(i[0]!=="_"){if(e&&i==="scale"){t.push(i+"3d("+this[i]+",1)")}else if(e&&i==="translate"){t.push(i+"3d("+this[i]+",0)")}else{t.push(i+"("+this[i]+")")}}}}return t.join(" ")}};function y(e,t,i){if(t===true){e.queue(i)}else if(t){e.queue(t,i)}else{e.each(function(){i.call(this)})}}function s(e){var t=[];g.each(e,function(e){e=g.camelCase(e);e=g.transit.propertyMap[e]||g.cssProps[e]||e;e=u(e);if(v[e])e=u(v[e]);if(g.inArray(e,t)===-1){t.push(e)}});return t}function b(e,t,i,n){var r=s(e);if(g.cssEase[i]){i=g.cssEase[i]}var o=""+_(t)+" "+i;if(parseInt(n,10)>0){o+=" "+_(n)}var a=[];g.each(r,function(e,t){a.push(t+" "+o)});return a.join(", ")}g.fn.transition=g.fn.transit=function(e,t,i,n){var r=this;var o=0;var a=true;var s=g.extend(true,{},e);if(typeof t==="function"){n=t;t=undefined}if(typeof t==="object"){i=t.easing;o=t.delay||0;a=typeof t.queue==="undefined"?true:t.queue;n=t.complete;t=t.duration}if(typeof i==="function"){n=i;i=undefined}if(typeof s.easing!=="undefined"){i=s.easing;delete s.easing}if(typeof s.duration!=="undefined"){t=s.duration;delete s.duration}if(typeof s.complete!=="undefined"){n=s.complete;delete s.complete}if(typeof s.queue!=="undefined"){a=s.queue;delete s.queue}if(typeof s.delay!=="undefined"){o=s.delay;delete s.delay}if(typeof t==="undefined"){t=g.fx.speeds._default}if(typeof i==="undefined"){i=g.cssEase._default}t=_(t);var l=b(s,t,i,o);var u=g.transit.enabled&&v.transition;var c=u?parseInt(t,10)+parseInt(o,10):0;if(c===0){var d=function(e){r.css(s);if(n){n.apply(r)}if(e){e()}};y(r,a,d);return r}var h={};var f=function(e){var t=false;var i=function(){if(t){r.unbind(m,i)}if(c>0){r.each(function(){this.style[v.transition]=h[this]||null})}if(typeof n==="function"){n.apply(r)}if(typeof e==="function"){e()}};if(c>0&&m&&g.transit.useTransitionEnd){t=true;r.bind(m,i)}else{window.setTimeout(i,c)}r.each(function(){if(c>0){this.style[v.transition]=l}g(this).css(s)})};var p=function(e){this.offsetWidth;f(e)};y(r,a,p);return this};function l(n,e){if(!e){g.cssNumber[n]=true}g.transit.propertyMap[n]=v.transform;g.cssHooks[n]={"get":function(e){var t=g(e).css("transit:transform");return t.get(n)},"set":function(e,t){var i=g(e).css("transit:transform");i.setFromString(n,t);g(e).css({"transit:transform":i})}}}function u(e){return e.replace(/([A-Z])/g,function(e){return"-"+e.toLowerCase()})}function c(e,t){if(typeof e==="string"&&!e.match(/^[\-0-9\.]+$/)){return e}else{return""+e+t}}function _(e){var t=e;if(typeof t==="string"&&!t.match(/^[\-0-9\.]+/)){t=g.fx.speeds[t]||g.fx.speeds._default}return c(t,"ms")}g.transit.getTransitionValue=b;return g});(function(o,a){var e="trap.isTrapping";function t(e){if(e.keyCode===9){var t=!!e.shiftKey;if(i(this,e.target,t)){e.preventDefault();e.stopPropagation()}}}function i(e,t,i){var n=u(e),r=t,o,a,s,l;do{o=n.index(r);a=o+1;s=o-1;l=n.length-1;switch(o){case-1:return false;case 0:s=l;break;case l:a=0;break}if(i){a=s}r=n.get(a);try{r.focus()}catch(e){}}while(t===t.ownerDocument.activeElement);return true}function r(){return this.tabIndex>0}function s(){return!this.tabIndex}function l(e,t){return e.t-t.t||e.i-t.i}function u(e){var t=o(e);var i=[],n=0;h.enable&&h.enable();t.find("a[href], link[href], [draggable=true], [contenteditable=true], :input:enabled, [tabindex=0]").filter(":visible").filter(s).each(function(e,t){i.push({"v":t,"t":0,"i":n++})});t.find("[tabindex]").filter(":visible").filter(r).each(function(e,t){i.push({"v":t,"t":t.tabIndex,"i":n++})});h.disable&&h.disable();i=o.map(i.sort(l),function(e){return e.v});return o(i)}function n(){this.keydown(t);this.data(e,true);return this}function c(){this.unbind("keydown",t);this.removeData(e);return this}function d(){return!!this.data(e)}o.fn.extend({"trap":n,"untrap":c,"isTrapping":d});var h={};if(o.find.find&&o.find.attr!==o.attr){(function(){var i="tabindex";var e=o.expr.attrHandle;function t(e){var t=e.getAttributeNode(i);return t&&t.specified?parseInt(t.value,10):a}function n(){e[i]=e.tabIndex=t}function r(){delete e[i];delete e.tabIndex}h={"enable":n,"disable":r}})()}})(jQuery);(function(e){"use strict";if(typeof define==="function"&&define.amd){define(["jquery"],e)}else if(typeof exports!=="undefined"){module.exports=e(require("jquery"))}else{e(jQuery)}})(function(f){"use strict";var p="unveil",g="."+p,v="src",m="placeholder";f.fn.unveil=function(e){e=e||{};var l=f(window),t=l.height(),i={"placeholder":"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7","offset":0,"breakpoints":[],"throttle":250,"debug":false,"attribute":v,"container":l,"retina":window.devicePixelRatio>1,"loading":null,"loaded":null},u=f.extend(true,{},i,e);if(u.debug)console.log("Called unveil on",this.length,"elements with the following options:",u);u.breakpoints.sort(function(e,t){return t.minWidth-e.minWidth});var n=u.container.data(p);if(!n){n={"images":f(),"initialized":false};u.container.data(p,n)}this.one(p+g,function(){var e,t=f(this),i=l.width(),n=u.attribute,r,o,a;for(e=0;e<u.breakpoints.length;e++){var s=u.breakpoints[e].attribute.replace(/^data-/,"");if(i>=u.breakpoints[e].minWidth&&t.data(s)){n=s;break}}o=a=t.data(n);if(o&&o.indexOf("|")!==-1){a=o.split("|")[1];o=o.split("|")[0]}if(o){r=u.retina&&a?a:o;if(u.debug)console.log("Unveiling image",{"attribute":n,"retina":u.retina,"defaultSrc":o,"retinaSrc":a,"targetSrc":r});t.addClass(p+"-loading");if(typeof u.loading==="function"){u.loading.call(this)}t.trigger("loading"+g);t.one("load"+g,function(){c(t);if(typeof u.loaded==="function"){u.loaded.call(this)}t.trigger("loaded"+g);h()});if(this.nodeName==="IMG"){t.prop(v,r)}else{f("<img/>").attr(v,r).one("load"+g,function(){f(this).remove();t.css("backgroundImage","url("+r+")").trigger("load"+g)})}if(this.complete){c(t)}}});this.one("destroy"+g,function(){f(this).off(g);if(n.images){n.images=n.images.not(this);if(!n.images.length){s()}}});function c(e){e.removeClass(p+"-"+m+" "+p+"-loading");e.addClass(p+"-loaded")}function r(){var e=f(this);if(e.is(":hidden")){return}var t={"top":0-u.offset,"bottom":l.height()+u.offset},i=u.container[0]!==l[0],n=this.getBoundingClientRect();if(i){var r=u.container[0].getBoundingClientRect();if(d(t,r)){var o=r.top-u.offset;var a=r.bottom+u.offset;var s={"top":o>t.top?o:t.top,"bottom":a<t.bottom?a:t.bottom};return d(s,n)}return false}else{return d(t,n)}}function d(e,t){return t.bottom>=e.top&&t.top<=e.bottom}function o(){t=l.height();h()}function a(e){var t=false;return function(){if(!t){t=true;setTimeout(function(){e();t=false},u.throttle)}}}function h(){if(u.debug)console.log("Unveiling");if(n.images){var e=n.images.filter(r);e.trigger(p+g);n.images=n.images.not(e);if(e.length){if(u.debug)console.log("New images in view",e.length,", leaves",n.length,"in collection")}}}function s(){u.container.off(g);n.images.off(g);u.container.data(p,null);n.initialized=false;n.images=null}this.each(function(){var e=f(this),t=e.data(v+"-"+m)||u.placeholder;n.images=f(n.images).add(this);if(!e.data(p)){e.data(p,true);if(!e.data(u.attribute)){e.data(u.attribute,e.prop(u.attribute))}e.one("load"+g,function(){var e=f(this);if(e.hasClass(p+"-loaded")){return}e.addClass(p+"-"+m);h()}).prop(v,"").prop(v,t)}});if(u.debug)console.log("Images now in collection",n.images.length);{if(!n.initialized){u.container.on("resize"+g,a(o)).on("scroll"+g,a(h)).on("lookup"+g,h).on("destroy"+g,s);n.initialized=true}}{setTimeout(h,0)}return this}});jQuery.fn.watch=function(i,n){return this.each(function(){var e=this;var t=e[i];$(e).data("watchTimer-"+i,setInterval(function(){if(e[i]!==t){n.call(e,i,t,e[i]);t=e[i]}},100))})};jQuery.fn.unwatch=function(e){return this.each(function(){clearInterval($(this).data("watchTimer-"+e))})};(function(t){var i;var n;t.windowHint=function(e){clearTimeout(n);i=t("#windowHint").stop(true,true).hide();if(!i.length){i=t('<div id="windowHint"><div class="windowHint-content"></div></div>').hide().prependTo("body")}i.find(".windowHint-content").html(e);i.slideDown(100);n=setTimeout(function(){i.slideUp(500)},4e3)}})(jQuery);(function(e,t){var i=function(e,t){this.elementExclude=e;this.closeCallback=t;this.enabled=false};i.prototype.getEnabled=function(){return this.enabled};i.prototype.enable=function(){if(true===this.getEnabled()){return}this._onClickReference=this._onClick.bind(this);this._onKeydownReference=this._onKeydown.bind(this);setTimeout(function(){document.addEventListener("click",this._onClickReference);document.addEventListener("keydown",this._onKeydownReference)}.bind(this),0);this.enabled=true};i.prototype.disable=function(){if(false===this.getEnabled()){return}document.removeEventListener("click",this._onClickReference);document.removeEventListener("keydown",this._onKeydownReference);this.enabled=false};i.prototype.close=function(){if(this.getEnabled()){this.closeCallback.call(this);this.disable()}};i.prototype._onClick=function(e){if(e.target!==this.elementExclude&&!t.contains(this.elementExclude,e.target)){this.close()}};i.prototype._onKeydown=function(e){if(e.which==27){this.close()}};if(e["ModalClose"]){throw new Error("ModalClose is already defined")}e["ModalClose"]=i})(window,jQuery);(function(){Modernizr.addTest("plaintextonly",function(){var e=document.createElement("div");try{e.contentEditable="PLAINtext-onLY"}catch(e){return false}return e.contentEditable=="plaintext-only"})})();(function(e){if(typeof define==="function"&&define.amd){define([],e)}else if(typeof exports==="object"){module.exports=e()}else{window.noUiSlider=e()}})(function(){"use strict";function ee(e,t){var i=document.createElement("div");ae(i,t);e.appendChild(i);return i}function te(e){return e.filter(function(e){return!this[e]?this[e]=true:false},{})}function s(e,t){return Math.round(e/t)*t}function ie(e,t){var i=e.getBoundingClientRect(),n=e.ownerDocument,r=n.documentElement,o=ue();if(/webkit.*Chrome.*Mobile/i.test(navigator.userAgent)){o.x=0}return t?i.top+o.y-r.clientTop:i.left+o.x-r.clientLeft}function r(e){return typeof e==="number"&&!isNaN(e)&&isFinite(e)}function ne(e,t,i){if(i>0){ae(e,t);setTimeout(function(){se(e,t)},i)}}function re(e){return Math.max(Math.min(e,100),0)}function oe(e){return Array.isArray(e)?e:[e]}function t(e){e=String(e);var t=e.split(".");return t.length>1?t[1].length:0}function ae(e,t){if(e.classList){e.classList.add(t)}else{e.className+=" "+t}}function se(e,t){if(e.classList){e.classList.remove(t)}else{e.className=e.className.replace(new RegExp("(^|\\b)"+t.split(" ").join("|")+"(\\b|$)","gi")," ")}}function le(e,t){return e.classList?e.classList.contains(t):new RegExp("\\b"+t+"\\b").test(e.className)}function ue(){var e=window.pageXOffset!==undefined,t=(document.compatMode||"")==="CSS1Compat",i=e?window.pageXOffset:t?document.documentElement.scrollLeft:document.body.scrollLeft,n=e?window.pageYOffset:t?document.documentElement.scrollTop:document.body.scrollTop;return{"x":i,"y":n}}function ce(){return window.navigator.pointerEnabled?{"start":"pointerdown","move":"pointermove","end":"pointerup"}:window.navigator.msPointerEnabled?{"start":"MSPointerDown","move":"MSPointerMove","end":"MSPointerUp"}:{"start":"mousedown touchstart","move":"mousemove touchmove","end":"mouseup touchend"}}function l(e,t){return 100/(t-e)}function a(e,t){return t*100/(e[1]-e[0])}function u(e,t){return a(e,e[0]<0?t+Math.abs(e[0]):t-e[0])}function c(e,t){return t*(e[1]-e[0])/100+e[0]}function d(e,t){var i=1;while(e>=t[i]){i+=1}return i}function i(e,t,i){if(i>=e.slice(-1)[0]){return 100}var n=d(i,e),r,o,a,s;r=e[n-1];o=e[n];a=t[n-1];s=t[n];return a+u([r,o],i)/l(a,s)}function n(e,t,i){if(i>=100){return e.slice(-1)[0]}var n=d(i,t),r,o,a,s;r=e[n-1];o=e[n];a=t[n-1];s=t[n];return c([r,o],(i-a)*l(a,s))}function o(e,t,i,n){if(n===100){return n}var r=d(n,e),o,a;if(i){o=e[r-1];a=e[r];if(n-o>(a-o)/2){return a}return o}if(!t[r-1]){return n}return e[r-1]+s(n-e[r-1],t[r-1])}function h(e,t,i){var n;if(typeof t==="number"){t=[t]}if(Object.prototype.toString.call(t)!=="[object Array]"){throw new Error("noUiSlider: 'range' contains invalid value.")}if(e==="min"){n=0}else if(e==="max"){n=100}else{n=parseFloat(e)}if(!r(n)||!r(t[0])){throw new Error("noUiSlider: 'range' value isn't numeric.")}i.xPct.push(n);i.xVal.push(t[0]);if(!n){if(!isNaN(t[1])){i.xSteps[0]=t[1]}}else{i.xSteps.push(isNaN(t[1])?false:t[1])}i.xHighestCompleteStep.push(0)}function f(e,t,i){if(!t){return true}i.xSteps[e]=a([i.xVal[e],i.xVal[e+1]],t)/l(i.xPct[e],i.xPct[e+1]);var n=(i.xVal[e+1]-i.xVal[e])/i.xNumSteps[e];var r=Math.ceil(Number(n.toFixed(3))-1);var o=i.xVal[e]+i.xNumSteps[e]*r;i.xHighestCompleteStep[e]=o}function p(e,t,i,n){this.xPct=[];this.xVal=[];this.xSteps=[n||false];this.xNumSteps=[false];this.xHighestCompleteStep=[];this.snap=t;this.direction=i;var r,o=[];for(r in e){if(e.hasOwnProperty(r)){o.push([e[r],r])}}if(o.length&&typeof o[0][0]==="object"){o.sort(function(e,t){return e[0][0]-t[0][0]})}else{o.sort(function(e,t){return e[0]-t[0]})}for(r=0;r<o.length;r++){h(o[r][1],o[r][0],this)}this.xNumSteps=this.xSteps.slice(0);for(r=0;r<this.xNumSteps.length;r++){f(r,this.xNumSteps[r],this)}}p.prototype.getMargin=function(e){var t=this.xNumSteps[0];if(t&&e/t%1!==0){throw new Error("noUiSlider: 'limit', 'margin' and 'padding' must be divisible by step.")}return this.xPct.length===2?a(this.xVal,e):false};p.prototype.toStepping=function(e){e=i(this.xVal,this.xPct,e);return e};p.prototype.fromStepping=function(e){return n(this.xVal,this.xPct,e)};p.prototype.getStep=function(e){e=o(this.xPct,this.xSteps,this.snap,e);return e};p.prototype.getNearbySteps=function(e){var t=d(e,this.xPct);return{"stepBefore":{"startValue":this.xVal[t-2],"step":this.xNumSteps[t-2],"highestStep":this.xHighestCompleteStep[t-2]},"thisStep":{"startValue":this.xVal[t-1],"step":this.xNumSteps[t-1],"highestStep":this.xHighestCompleteStep[t-1]},"stepAfter":{"startValue":this.xVal[t-0],"step":this.xNumSteps[t-0],"highestStep":this.xHighestCompleteStep[t-0]}}};p.prototype.countStepDecimals=function(){var e=this.xNumSteps.map(t);return Math.max.apply(null,e)};p.prototype.convert=function(e){return this.getStep(this.toStepping(e))};var g={"to":function(e){return e!==undefined&&e.toFixed(2)},"from":Number};function v(e,t){if(!r(t)){throw new Error("noUiSlider: 'step' is not numeric.")}e.singleStep=t}function m(e,t){if(typeof t!=="object"||Array.isArray(t)){throw new Error("noUiSlider: 'range' is not an object.")}if(t.min===undefined||t.max===undefined){throw new Error("noUiSlider: Missing 'min' or 'max' in 'range'.")}if(t.min===t.max){throw new Error("noUiSlider: 'range' 'min' and 'max' cannot be equal.")}e.spectrum=new p(t,e.snap,e.dir,e.singleStep)}function y(e,t){t=oe(t);if(!Array.isArray(t)||!t.length){throw new Error("noUiSlider: 'start' option is incorrect.")}e.handles=t.length;e.start=t}function b(e,t){e.snap=t;if(typeof t!=="boolean"){throw new Error("noUiSlider: 'snap' option must be a boolean.")}}function _(e,t){e.animate=t;if(typeof t!=="boolean"){throw new Error("noUiSlider: 'animate' option must be a boolean.")}}function w(e,t){e.animationDuration=t;if(typeof t!=="number"){throw new Error("noUiSlider: 'animationDuration' option must be a number.")}}function E(e,t){var i=[false];var n;if(t==="lower"){t=[true,false]}else if(t==="upper"){t=[false,true]}if(t===true||t===false){for(n=1;n<e.handles;n++){i.push(t)}i.push(false)}else if(!Array.isArray(t)||!t.length||t.length!==e.handles+1){throw new Error("noUiSlider: 'connect' option doesn't match handle count.")}else{i=t}e.connect=i}function x(e,t){switch(t){case"horizontal":e.ort=0;break;case"vertical":e.ort=1;break;default:throw new Error("noUiSlider: 'orientation' option is invalid.")}}function T(e,t){if(!r(t)){throw new Error("noUiSlider: 'margin' option must be numeric.")}if(t===0){return}e.margin=e.spectrum.getMargin(t);if(!e.margin){throw new Error("noUiSlider: 'margin' option is only supported on linear sliders.")}}function S(e,t){if(!r(t)){throw new Error("noUiSlider: 'limit' option must be numeric.")}e.limit=e.spectrum.getMargin(t);if(!e.limit||e.handles<2){throw new Error("noUiSlider: 'limit' option is only supported on linear sliders with 2 or more handles.")}}function k(e,t){if(!r(t)){throw new Error("noUiSlider: 'padding' option must be numeric.")}if(t===0){return}e.padding=e.spectrum.getMargin(t);if(!e.padding){throw new Error("noUiSlider: 'padding' option is only supported on linear sliders.")}if(e.padding<0){throw new Error("noUiSlider: 'padding' option must be a positive number.")}if(e.padding>=50){throw new Error("noUiSlider: 'padding' option must be less than half the range.")}}function R(e,t){switch(t){case"ltr":e.dir=0;break;case"rtl":e.dir=1;break;default:throw new Error("noUiSlider: 'direction' option was not recognized.")}}function C(e,t){if(typeof t!=="string"){throw new Error("noUiSlider: 'behaviour' must be a string containing options.")}var i=t.indexOf("tap")>=0;var n=t.indexOf("drag")>=0;var r=t.indexOf("fixed")>=0;var o=t.indexOf("snap")>=0;var a=t.indexOf("hover")>=0;if(r){if(e.handles!==2){throw new Error("noUiSlider: 'fixed' behaviour must be used with 2 handles")}T(e,e.start[1]-e.start[0])}e.events={"tap":i||o,"drag":n,"fixed":r,"snap":o,"hover":a}}function A(e,t){if(t===false){return}else if(t===true){e.tooltips=[];for(var i=0;i<e.handles;i++){e.tooltips.push(true)}}else{e.tooltips=oe(t);if(e.tooltips.length!==e.handles){throw new Error("noUiSlider: must pass a formatter for all handles.")}e.tooltips.forEach(function(e){if(typeof e!=="boolean"&&(typeof e!=="object"||typeof e.to!=="function")){throw new Error("noUiSlider: 'tooltips' must be passed a formatter or 'false'.")}})}}function O(e,t){e.format=t;if(typeof t.to==="function"&&typeof t.from==="function"){return true}throw new Error("noUiSlider: 'format' requires 'to' and 'from' methods.")}function L(e,t){if(t!==undefined&&typeof t!=="string"&&t!==false){throw new Error("noUiSlider: 'cssPrefix' must be a string or `false`.")}e.cssPrefix=t}function P(e,t){if(t!==undefined&&typeof t!=="object"){throw new Error("noUiSlider: 'cssClasses' must be an object.")}if(typeof e.cssPrefix==="string"){e.cssClasses={};for(var i in t){if(!t.hasOwnProperty(i)){continue}e.cssClasses[i]=e.cssPrefix+t[i]}}else{e.cssClasses=t}}function I(e,t){if(t===true||t===false){e.useRequestAnimationFrame=t}else{throw new Error("noUiSlider: 'useRequestAnimationFrame' option should be true (default) or false.")}}function de(t){var i={"margin":0,"limit":0,"padding":0,"animate":true,"animationDuration":300,"format":g};var n={"step":{"r":false,"t":v},"start":{"r":true,"t":y},"connect":{"r":true,"t":E},"direction":{"r":true,"t":R},"snap":{"r":false,"t":b},"animate":{"r":false,"t":_},"animationDuration":{"r":false,"t":w},"range":{"r":true,"t":m},"orientation":{"r":false,"t":x},"margin":{"r":false,"t":T},"limit":{"r":false,"t":S},"padding":{"r":false,"t":k},"behaviour":{"r":true,"t":C},"format":{"r":false,"t":O},"tooltips":{"r":false,"t":A},"cssPrefix":{"r":false,"t":L},"cssClasses":{"r":false,"t":P},"useRequestAnimationFrame":{"r":false,"t":I}};var r={"connect":false,"direction":"ltr","behaviour":"tap","orientation":"horizontal","cssPrefix":"noUi-","cssClasses":{"target":"target","base":"base","origin":"origin","handle":"handle","handleLower":"handle-lower","handleUpper":"handle-upper","horizontal":"horizontal","vertical":"vertical","background":"background","connect":"connect","ltr":"ltr","rtl":"rtl","draggable":"draggable","drag":"state-drag","tap":"state-tap","active":"active","tooltip":"tooltip","pips":"pips","pipsHorizontal":"pips-horizontal","pipsVertical":"pips-vertical","marker":"marker","markerHorizontal":"marker-horizontal","markerVertical":"marker-vertical","markerNormal":"marker-normal","markerLarge":"marker-large","markerSub":"marker-sub","value":"value","valueHorizontal":"value-horizontal","valueVertical":"value-vertical","valueNormal":"value-normal","valueLarge":"value-large","valueSub":"value-sub"},"useRequestAnimationFrame":true};Object.keys(n).forEach(function(e){if(t[e]===undefined&&r[e]===undefined){if(n[e].r){throw new Error("noUiSlider: '"+e+"' is required.")}return true}n[e].t(i,t[e]===undefined?r[e]:t[e])});i.pips=t.pips;var e=[["left","top"],["right","bottom"]];i.style=e[i.dir][i.ort];i.styleOposite=e[i.dir?0:1][i.ort];return i}function D(e,h,o){var s=ce();var u=e;var l=[];var n;var c;var r=[];var d=false;var a;var E=h.spectrum;var f=[];var p={};var g;function v(e,t){var i=ee(e,h.cssClasses.origin);var n=ee(i,h.cssClasses.handle);n.setAttribute("data-handle",t);if(t===0){ae(n,h.cssClasses.handleLower)}else if(t===h.handles-1){ae(n,h.cssClasses.handleUpper)}return i}function m(e,t){if(!t){return false}return ee(e,h.cssClasses.connect)}function t(e,t){c=[];a=[];a.push(m(t,e[0]));for(var i=0;i<h.handles;i++){c.push(v(t,i));r[i]=i;a.push(m(t,e[i+1]))}}function i(e){ae(e,h.cssClasses.target);if(h.dir===0){ae(e,h.cssClasses.ltr)}else{ae(e,h.cssClasses.rtl)}if(h.ort===0){ae(e,h.cssClasses.horizontal)}else{ae(e,h.cssClasses.vertical)}n=ee(e,h.cssClasses.base)}function y(e,t){if(!h.tooltips[t]){return false}return ee(e.firstChild,h.cssClasses.tooltip)}function B(){var r=c.map(y);M("update",function(e,t,i){if(!r[t]){return}var n=e[t];if(h.tooltips[t]!==true){n=h.tooltips[t].to(i[t])}r[t].innerHTML=n})}function F(e,t,i){if(e==="range"||e==="steps"){return E.xVal}if(e==="count"){var n=100/(t-1),r,o=0;t=[];while((r=o++*n)<=100){t.push(r)}e="positions"}if(e==="positions"){return t.map(function(e){return E.fromStepping(i?E.getStep(e):e)})}if(e==="values"){if(i){return t.map(function(e){return E.fromStepping(E.getStep(E.toStepping(e)))})}return t}}function N(p,g,v){function m(e,t){return(e+t).toFixed(7)/1}var y={},e=E.xVal[0],t=E.xVal[E.xVal.length-1],b=false,_=false,w=0;v=te(v.slice().sort(function(e,t){return e-t}));if(v[0]!==e){v.unshift(e);b=true}if(v[v.length-1]!==t){v.push(t);_=true}v.forEach(function(e,t){var i,n,r,o=e,a=v[t+1],s,l,u,c,d,h,f;if(g==="steps"){i=E.xNumSteps[t]}if(!i){i=a-o}if(o===false||a===undefined){return}i=Math.max(i,1e-7);for(n=o;n<=a;n=m(n,i)){s=E.toStepping(n);l=s-w;d=l/p;h=Math.round(d);f=l/h;for(r=1;r<=h;r+=1){u=w+r*f;y[u.toFixed(5)]=["x",0]}c=v.indexOf(n)>-1?1:g==="steps"?2:0;if(!t&&b){c=0}if(!(n===a&&_)){y[s.toFixed(5)]=[n,c]}w=s}});return y}function j(t,i,n){var e=document.createElement("div"),r="",o=[h.cssClasses.valueNormal,h.cssClasses.valueLarge,h.cssClasses.valueSub],a=[h.cssClasses.markerNormal,h.cssClasses.markerLarge,h.cssClasses.markerSub],s=[h.cssClasses.valueHorizontal,h.cssClasses.valueVertical],l=[h.cssClasses.markerHorizontal,h.cssClasses.markerVertical];ae(e,h.cssClasses.pips);ae(e,h.ort===0?h.cssClasses.pipsHorizontal:h.cssClasses.pipsVertical);function u(e,t){var i=t===h.cssClasses.value,n=i?s:l,r=i?o:a;return t+" "+n[h.ort]+" "+r[e]}function c(e,t,i){return'class="'+u(i[1],t)+'" style="'+h.style+": "+e+'%"'}function d(e,t){t[1]=t[1]&&i?i(t[0],t[1]):t[1];r+="<div "+c(e,h.cssClasses.marker,t)+"></div>";if(t[1]){r+="<div "+c(e,h.cssClasses.value,t)+">"+n.to(t[0])+"</div>"}}Object.keys(t).forEach(function(e){d(e,t[e])});e.innerHTML=r;return e}function b(e){var t=e.mode,i=e.density||1,n=e.filter||false,r=e.values||false,o=e.stepped||false,a=F(t,r,o),s=N(i,t,a),l=e.format||{"to":Math.round};return u.appendChild(j(s,n,l))}function _(){var e=n.getBoundingClientRect(),t="offset"+["Width","Height"][h.ort];return h.ort===0?e.width||n[t]:e.height||n[t]}function w(t,i,n,r){var o=function(e){if(u.hasAttribute("disabled")){return false}if(le(u,h.cssClasses.tap)){return false}e=U(e,r.pageOffset);if(!e){return false}if(t===s.start&&e.buttons!==undefined&&e.buttons>1){return false}if(r.hover&&e.buttons){return false}e.calcPoint=e.points[h.ort];n(e,r)};var a=[];t.split(" ").forEach(function(e){i.addEventListener(e,o,false);a.push([e,o])});return a}function U(e,t){e.preventDefault();var i=e.type.indexOf("touch")===0;var n=e.type.indexOf("mouse")===0;var r=e.type.indexOf("pointer")===0;var o;var a;if(e.type.indexOf("MSPointer")===0){r=true}if(i){if(e.touches.length>1){return false}o=e.changedTouches[0].pageX;a=e.changedTouches[0].pageY}t=t||ue();if(n||r){o=e.clientX+t.x;a=e.clientY+t.y}e.pageOffset=t;e.points=[o,a];e.cursor=n||r;return e}function x(e){var t=e-ie(n,h.ort);var i=t*100/_();return h.dir?100-i:i}function $(n){var r=100;var o=false;c.forEach(function(e,t){if(e.hasAttribute("disabled")){return}var i=Math.abs(l[t]-n);if(i<r){o=t;r=i}});return o}function T(e,n,i,t){var r=i.slice();var o=[!e,e];var a=[e,!e];t=t.slice();if(e){t.reverse()}if(t.length>1){t.forEach(function(e,t){var i=C(r,e,r[e]+n,o[t],a[t]);if(i===false){n=0}else{n=i-r[e];r[e]=i}})}else{o=a=[true]}var s=false;t.forEach(function(e,t){s=L(e,i[e]+n,o[t],a[t])||s});if(s){t.forEach(function(e){S("update",e);S("slide",e)})}}function S(i,n,r){Object.keys(p).forEach(function(e){var t=e.split(".")[0];if(i===t){p[e].forEach(function(e){e.call(g,f.map(h.format.to),n,f.slice(),r||false,l.slice())})}})}function H(e,t){if(e.type==="mouseout"&&e.target.nodeName==="HTML"&&e.relatedTarget===null){k(e,t)}}function z(e,t){if(navigator.appVersion.indexOf("MSIE 9")===-1&&e.buttons===0&&t.buttonsProperty!==0){return k(e,t)}var i=(h.dir?-1:1)*(e.calcPoint-t.startCalcPoint);var n=i*100/t.baseSize;T(i>0,n,t.locations,t.handleNumbers)}function k(e,t){if(d){se(d,h.cssClasses.active);d=false}if(e.cursor){document.body.style.cursor="";document.body.removeEventListener("selectstart",document.body.noUiListener)}document.documentElement.noUiListeners.forEach(function(e){document.documentElement.removeEventListener(e[0],e[1])});se(u,h.cssClasses.drag);O();t.handleNumbers.forEach(function(e){S("set",e);S("change",e);S("end",e)})}function R(e,t){if(t.handleNumbers.length===1){var i=c[t.handleNumbers[0]];if(i.hasAttribute("disabled")){return false}d=i.children[0];ae(d,h.cssClasses.active)}e.preventDefault();e.stopPropagation();var n=w(s.move,document.documentElement,z,{"startCalcPoint":e.calcPoint,"baseSize":_(),"pageOffset":e.pageOffset,"handleNumbers":t.handleNumbers,"buttonsProperty":e.buttons,"locations":l.slice()});var r=w(s.end,document.documentElement,k,{"handleNumbers":t.handleNumbers});var o=w("mouseout",document.documentElement,H,{"handleNumbers":t.handleNumbers});document.documentElement.noUiListeners=n.concat(r,o);if(e.cursor){document.body.style.cursor=getComputedStyle(e.target).cursor;if(c.length>1){ae(u,h.cssClasses.drag)}var a=function(){return false};document.body.noUiListener=a;document.body.addEventListener("selectstart",a,false)}t.handleNumbers.forEach(function(e){S("start",e)})}function W(e){e.stopPropagation();var t=x(e.calcPoint);var i=$(t);if(i===false){return false}if(!h.events.snap){ne(u,h.cssClasses.tap,h.animationDuration)}L(i,t,true,true);O();S("slide",i,true);S("set",i,true);S("change",i,true);S("update",i,true);if(h.events.snap){R(e,{"handleNumbers":[i]})}}function G(e){var t=x(e.calcPoint);var i=E.getStep(t);var n=E.fromStepping(i);Object.keys(p).forEach(function(e){if("hover"===e.split(".")[0]){p[e].forEach(function(e){e.call(g,n)})}})}function V(o){if(!o.fixed){c.forEach(function(e,t){w(s.start,e.children[0],R,{"handleNumbers":[t]})})}if(o.tap){w(s.start,n,W,{})}if(o.hover){w(s.move,n,G,{"hover":true})}if(o.drag){a.forEach(function(e,t){if(e===false||t===0||t===a.length-1){return}var i=c[t-1];var n=c[t];var r=[e];ae(e,h.cssClasses.draggable);if(o.fixed){r.push(i.children[0]);r.push(n.children[0])}r.forEach(function(e){w(s.start,e,R,{"handles":[i,n],"handleNumbers":[t-1,t]})})})}}function C(e,t,i,n,r){if(c.length>1){if(n&&t>0){i=Math.max(i,e[t-1]+h.margin)}if(r&&t<c.length-1){i=Math.min(i,e[t+1]-h.margin)}}if(c.length>1&&h.limit){if(n&&t>0){i=Math.min(i,e[t-1]+h.limit)}if(r&&t<c.length-1){i=Math.max(i,e[t+1]-h.limit)}}if(h.padding){if(t===0){i=Math.max(i,h.padding)}if(t===c.length-1){i=Math.min(i,100-h.padding)}}i=E.getStep(i);i=re(i);if(i===e[t]){return false}return i}function A(e){return e+"%"}function q(e,t){l[e]=t;f[e]=E.fromStepping(t);var i=function(){c[e].style[h.style]=A(t);P(e);P(e+1)};if(window.requestAnimationFrame&&h.useRequestAnimationFrame){window.requestAnimationFrame(i)}else{i()}}function O(){r.forEach(function(e){var t=l[e]>50?-1:1;var i=3+(c.length+t*e);c[e].childNodes[0].style.zIndex=i})}function L(e,t,i,n){t=C(l,e,t,i,n);if(t===false){return false}q(e,t);return true}function P(e){if(!a[e]){return}var t=0;var i=100;if(e!==0){t=l[e-1]}if(e!==a.length-1){i=l[e]}a[e].style[h.style]=A(t);a[e].style[h.styleOposite]=A(100-i)}function K(e,t){if(e===null||e===false){return}if(typeof e==="number"){e=String(e)}e=h.format.from(e);if(e!==false&&!isNaN(e)){L(t,E.toStepping(e),false,false)}}function I(e,t){var i=oe(e);var n=l[0]===undefined;t=t===undefined?true:!!t;i.forEach(K);if(h.animate&&!n){ne(u,h.cssClasses.tap,h.animationDuration)}r.forEach(function(e){L(e,l[e],true,false)});O();r.forEach(function(e){S("update",e);if(i[e]!==null&&t){S("set",e)}})}function Z(e){I(h.start,e)}function D(){var e=f.map(h.format.to);if(e.length===1){return e[0]}return e}function X(){for(var e in h.cssClasses){if(!h.cssClasses.hasOwnProperty(e)){continue}se(u,h.cssClasses[e])}while(u.firstChild){u.removeChild(u.firstChild)}delete u.noUiSlider}function Y(){return l.map(function(e,t){var i=E.getNearbySteps(e);var n=f[t];var r=i.thisStep.step;var o=null;if(r!==false){if(n+r>i.stepAfter.startValue){r=i.stepAfter.startValue-n}}if(n>i.thisStep.startValue){o=i.thisStep.step}else if(i.stepBefore.step===false){o=false}else{o=n-i.stepBefore.highestStep}if(e===100){r=null}else if(e===0){o=null}var a=E.countStepDecimals();if(r!==null&&r!==false){r=Number(r.toFixed(a))}if(o!==null&&o!==false){o=Number(o.toFixed(a))}return[o,r]})}function M(e,t){p[e]=p[e]||[];p[e].push(t);if(e.split(".")[0]==="update"){c.forEach(function(e,t){S("update",t)})}}function Q(e){var n=e&&e.split(".")[0];var r=n&&e.substring(n.length);Object.keys(p).forEach(function(e){var t=e.split(".")[0],i=e.substring(t.length);if((!n||n===t)&&(!r||r===i)){delete p[e]}})}function J(t,e){var i=D();var n=["margin","limit","padding","range","animate","snap","step","format"];n.forEach(function(e){if(t[e]!==undefined){o[e]=t[e]}});var r=de(o);n.forEach(function(e){if(t[e]!==undefined){h[e]=r[e]}});r.spectrum.direction=E.direction;E=r.spectrum;h.margin=r.margin;h.limit=r.limit;h.padding=r.padding;l=[];I(t.start||i,e)}if(u.noUiSlider){throw new Error("Slider was already initialized.")}i(u);t(h.connect,n);g={"destroy":X,"steps":Y,"on":M,"off":Q,"get":D,"set":I,"reset":Z,"__moveHandles":function(e,t,i){T(e,t,l,i)},"options":o,"updateOptions":J,"target":u,"pips":b};V(h.events);I(h.start);if(h.pips){b(h.pips)}if(h.tooltips){B()}return g}function e(e,t){if(!e.nodeName){throw new Error("noUiSlider.create requires a single element.")}var i=de(t,e);var n=D(e,i,t);e.noUiSlider=n;return n}return{"create":e}});(function(e){var n=Array.prototype.slice;var r={};function t(e,t){var i=t||a();if(r[i]){throw new Error("`"+i+"` namespace is already registered for another Promise.")}return function(){return o.apply(this,[e,i].concat(n.call(arguments)))}}function i(e){if(e instanceof Promise){var t;for(t in r){if(e===r[t]){delete r[t]}}}else{delete r[e]}}function o(e,t){if(!r[t]){var i=e.apply(this,n.call(arguments,2));if(!(i instanceof Promise)){throw new Error("promiseOnce getter function must return a Promise instance.")}r[t]=i}return r[t]}function a(){return(Math.random()+1).toString(36).substring(7)}e.promiseOnce=t;e.removePromiseOnce=i})(window);(function(e){function t(e,t){t=_.defaults(t||{},{"cancelLeading":false,"queue":false});if(+t.cancelLeading+ +t.queue>1){throw new Error('PromiseThrottler options "cancelLeading", "queue" exclude each other.')}if(t.key){return i(t.key,e,t)}else{return n(e,t)}}function n(o,a){var s;function l(e){if(e===s){s=null}}function u(e){if(!e||!(e instanceof Promise)){throw new Error("Invalid usage of promiseThrottler")}return true}return function(){if(!s){s=o.apply(this,arguments);if(u(s)){s.finally(l.bind(null,s));return s}}var e=a.cancelLeading;if(e){s.cancel()}var t=a.queue;if(e||t){var i=arguments;var n=this;var r=s;s=new Promise(function(t){r.finally(function(){var e=o.apply(n,i);if(u(e)){t(e)}})});s.finally(l.bind(null,s));return s}return s}}var r={};function i(e,t,i){if(!r[e]){r[e]=n(t,i)}return r[e]}function o(e){if(r[e]){delete r[e]}}e.promiseThrottler=t;e.removePromiseThrottler=o})(window);(function(){"use strict";var e={};e.parse=function(e){if(typeof e!=="string"){return{}}e=e.trim().replace(/^\?/,"");if(!e){return{}}return e.trim().split("&").reduce(function(e,t){var i=t.replace(/\+/g," ").split("=");var n=i[0];var r=i[1];n=decodeURIComponent(n);r=r===undefined?null:decodeURIComponent(r);if(!e.hasOwnProperty(n)){e[n]=r}else if(Array.isArray(e[n])){e[n].push(r)}else{e[n]=[e[n],r]}return e},{})};e.stringify=function(i){return i?Object.keys(i).map(function(t){var e=i[t];if(Array.isArray(e)){return e.map(function(e){return encodeURIComponent(t)+"="+encodeURIComponent(e)}).join("&")}return encodeURIComponent(t)+"="+encodeURIComponent(e)}).join("&"):""};if(typeof define==="function"&&define.amd){define([],e)}else if(typeof module!=="undefined"&&module.exports){module.exports=e}else{window.queryString=e}})();(function(e){if(typeof exports==="object"&&typeof module!=="undefined"){module.exports=e()}else if(typeof define==="function"&&define.amd){define([],e)}else{var t;if(typeof window!=="undefined"){t=window}else if(typeof global!=="undefined"){t=global}else if(typeof self!=="undefined"){t=self}else{t=this}t.SocketRedis=e()}})(function(){var e,t,i;return function(){function c(o,a,s){function l(i,e){if(!a[i]){if(!o[i]){var t="function"==typeof require&&require;if(!e&&t)return t(i,!0);if(u)return u(i,!0);var n=new Error("Cannot find module '"+i+"'");throw n.code="MODULE_NOT_FOUND",n}var r=a[i]={"exports":{}};o[i][0].call(r.exports,function(e){var t=o[i][1][e];return l(t||e)},r,r.exports,c,o,a,s)}return a[i].exports}for(var u="function"==typeof require&&require,e=0;e<s.length;e++)l(s[e]);return l}return c}()({"1":[function(e,n,t){(function(i){(function(){var e;function t(e){this._url=e;this._sockJS=null;this._closeStamp=null;this._subscribes={};this._heartbeatTimeout=null;this._reopenTimeout=null}t.prototype.open=function(){clearTimeout(this._reopenTimeout);this._reopenTimeout=null;e=typeof window!=="undefined"?window["SockJS"]:typeof i!=="undefined"?i["SockJS"]:null;this._sockJS=new e(this._url);this._sockJS.onopen=this._onopen.bind(this);this._sockJS.onclose=this._reopen.bind(this)};t.prototype._reopen=function(){this._stopHeartbeat();this._closeStamp=(new Date).getTime();this._sockJS.onopen=null;this._sockJS.onclose=null;this._sockJS=null;this._reopenTimeout=setTimeout(function(){this.open()}.bind(this),1e3)};t.prototype._onopen=function(){var n=this;Object.keys(this._subscribes).forEach(function(e){n._subscribe(e,n._closeStamp)});this._closeStamp=null;this._sockJS.onmessage=function(e){var t=JSON.parse(e.data);var i=n._subscribes[t.channel];if(i&&i.callback){i.callback.call(n,t.event,t.data)}};this._startHeartbeat();this.onopen.call(this)};t.prototype.close=function(){this._stopHeartbeat();this._sockJS.onclose=null;this._sockJS.close();this.onclose.call(this)};t.prototype.subscribe=function(e,t,i,n){if(this._subscribes[e]){throw"Channel `"+e+"` is already subscribed"}this._subscribes[e]={"event":{"channel":e,"start":t,"data":i},"callback":n};if(this.isOpen()){this._subscribe(e)}};t.prototype.unsubscribe=function(e){if(this._subscribes[e]){delete this._subscribes[e]}if(this.isOpen()){this._sockJS.send(JSON.stringify({"event":"unsubscribe","data":{"channel":e}}))}};t.prototype.isOpen=function(){return this._sockJS&&this._sockJS.readyState===e.OPEN};t.prototype.send=function(e){this._sockJS.send(JSON.stringify({"event":"message","data":{"data":e}}))};t.prototype.publish=function(e,t,i){this._sockJS.send(JSON.stringify({"event":"publish","data":{"channel":e,"event":t,"data":i}}))};t.prototype.onopen=function(){};t.prototype.onclose=function(){};t.prototype._subscribe=function(e,t){var i=this._subscribes[e].event;if(!t){t=i.start||(new Date).getTime()}var n=i.data||{};this._sockJS.send(JSON.stringify({"event":"subscribe","data":{"channel":i.channel,"data":n,"start":t}}))};t.prototype._startHeartbeat=function(){this._heartbeatTimeout=setTimeout(function(){this._sockJS.send(JSON.stringify({"event":"heartbeat"}));this._startHeartbeat()}.bind(this),25*1e3)};t.prototype._stopHeartbeat=function(){clearTimeout(this._heartbeatTimeout)};n.exports=t}).call(this)}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{}]},{},[1])(1)});var JSON;JSON||(JSON={}),function(){function str(e,t){var i,n,r,o,a=gap,s,l=t[e];l&&typeof l=="object"&&typeof l.toJSON=="function"&&(l=l.toJSON(e)),typeof rep=="function"&&(l=rep.call(t,e,l));switch(typeof l){case"string":return quote(l);case"number":return isFinite(l)?String(l):"null";case"boolean":case"null":return String(l);case"object":if(!l)return"null";gap+=indent,s=[];if(Object.prototype.toString.apply(l)==="[object Array]"){o=l.length;for(i=0;i<o;i+=1)s[i]=str(i,l)||"null";r=s.length===0?"[]":gap?"[\n"+gap+s.join(",\n"+gap)+"\n"+a+"]":"["+s.join(",")+"]",gap=a;return r}if(rep&&typeof rep=="object"){o=rep.length;for(i=0;i<o;i+=1)typeof rep[i]=="string"&&(n=rep[i],r=str(n,l),r&&s.push(quote(n)+(gap?": ":":")+r))}else for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(r=str(n,l),r&&s.push(quote(n)+(gap?": ":":")+r));r=s.length===0?"{}":gap?"{\n"+gap+s.join(",\n"+gap)+"\n"+a+"}":"{"+s.join(",")+"}",gap=a;return r}}function quote(e){escapable.lastIndex=0;return escapable.test(e)?'"'+e.replace(escapable,function(e){var t=meta[e];return typeof t=="string"?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+e+'"'}function f(e){return e<10?"0"+e:e}"use strict",typeof Date.prototype.toJSON!="function"&&(Date.prototype.toJSON=function(e){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(e){return this.valueOf()});var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;typeof JSON.stringify!="function"&&(JSON.stringify=function(e,t,i){var n;gap="",indent="";if(typeof i=="number")for(n=0;n<i;n+=1)indent+=" ";else typeof i=="string"&&(indent=i);rep=t;if(!t||typeof t=="function"||typeof t=="object"&&typeof t.length=="number")return str("",{"":e});throw new Error("JSON.stringify")}),typeof JSON.parse!="function"&&(JSON.parse=function(text,reviver){function walk(e,t){var i,n,r=e[t];if(r&&typeof r=="object")for(i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n=walk(r,i),n!==undefined?r[i]=n:delete r[i]);return reviver.call(e,t,r)}var j;text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(e){return"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)}));if(/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))){j=eval("("+text+")");return typeof reviver=="function"?walk({"":j},""):j}throw new SyntaxError("JSON.parse")})}();SockJS=function(){var c=document;var d=window;var h={};var e=function(){};e.prototype.addEventListener=function(e,t){if(!this._listeners){this._listeners={}}if(!(e in this._listeners)){this._listeners[e]=[]}var i=this._listeners[e];if(h.arrIndexOf(i,t)===-1){i.push(t)}return};e.prototype.removeEventListener=function(e,t){if(!(this._listeners&&e in this._listeners)){return}var i=this._listeners[e];var n=h.arrIndexOf(i,t);if(n!==-1){if(i.length>1){this._listeners[e]=i.slice(0,n).concat(i.slice(n+1))}else{delete this._listeners[e]}return}return};e.prototype.dispatchEvent=function(e){var t=e.type;var i=Array.prototype.slice.call(arguments,0);if(this["on"+t]){this["on"+t].apply(this,i)}if(this._listeners&&t in this._listeners){for(var n=0;n<this._listeners[t].length;n++){this._listeners[t][n].apply(this,i)}}};var s=function(e,t){this.type=e;if(typeof t!=="undefined"){for(var i in t){if(!t.hasOwnProperty(i))continue;this[i]=t[i]}}};s.prototype.toString=function(){var e=[];for(var t in this){if(!this.hasOwnProperty(t))continue;var i=this[t];if(typeof i==="function")i="[function]";e.push(t+"="+i)}return"SimpleEvent("+e.join(", ")+")"};var t=function(e){var t=this;t._events=e||[];t._listeners={}};t.prototype.emit=function(e){var t=this;t._verifyType(e);if(t._nuked)return;var i=Array.prototype.slice.call(arguments,1);if(t["on"+e]){t["on"+e].apply(t,i)}if(e in t._listeners){for(var n=0;n<t._listeners[e].length;n++){t._listeners[e][n].apply(t,i)}}};t.prototype.on=function(e,t){var i=this;i._verifyType(e);if(i._nuked)return;if(!(e in i._listeners)){i._listeners[e]=[]}i._listeners[e].push(t)};t.prototype._verifyType=function(e){var t=this;if(h.arrIndexOf(t._events,e)===-1){h.log("Event "+JSON.stringify(e)+" not listed "+JSON.stringify(t._events)+" in "+t)}};t.prototype.nuke=function(){var e=this;e._nuked=true;for(var t=0;t<e._events.length;t++){delete e[e._events[t]]}e._listeners={}};var B="abcdefghijklmnopqrstuvwxyz0123456789_";h.random_string=function(e,t){t=t||B.length;var i,n=[];for(i=0;i<e;i++){n.push(B.substr(Math.floor(Math.random()*t),1))}return n.join("")};h.random_number=function(e){return Math.floor(Math.random()*e)};h.random_number_string=function(e){var t=(""+(e-1)).length;var i=Array(t+1).join("0");return(i+h.random_number(e)).slice(-t)};h.getOrigin=function(e){e+="/";var t=e.split("/").slice(0,3);return t.join("/")};h.isSameOriginUrl=function(e,t){if(!t)t=d.location.href;return e.split("/").slice(0,3).join("/")===t.split("/").slice(0,3).join("/")};h.getParentDomain=function(e){if(/^[0-9.]*$/.test(e))return e;if(/^\[/.test(e))return e;if(!/[.]/.test(e))return e;var t=e.split(".").slice(1);return t.join(".")};h.objectExtend=function(e,t){for(var i in t){if(t.hasOwnProperty(i)){e[i]=t[i]}}return e};var f="_jp";h.polluteGlobalNamespace=function(){if(!(f in d)){d[f]={}}};h.closeFrame=function(e,t){return"c"+JSON.stringify([e,t])};h.userSetCode=function(e){return e===1e3||e>=3e3&&e<=4999};h.countRTO=function(e){var t;if(e>100){t=3*e}else{t=e+200}return t};h.log=function(){if(d.console&&console.log&&console.log.apply){console.log.apply(console,arguments)}};h.bind=function(e,t){if(e.bind){return e.bind(t)}else{return function(){return e.apply(t,arguments)}}};h.flatUrl=function(e){return e.indexOf("?")===-1&&e.indexOf("#")===-1};h.amendUrl=function(e){var t=c.location;if(!e){throw new Error("Wrong url for SockJS")}if(!h.flatUrl(e)){throw new Error("Only basic urls are supported in SockJS")}if(e.indexOf("//")===0){e=t.protocol+e}if(e.indexOf("/")===0){e=t.protocol+"//"+t.host+e}e=e.replace(/[/]+$/,"");return e};h.arrIndexOf=function(e,t){for(var i=0;i<e.length;i++){if(e[i]===t){return i}}return-1};h.arrSkip=function(e,t){var i=h.arrIndexOf(e,t);if(i===-1){return e.slice()}else{var n=e.slice(0,i);return n.concat(e.slice(i+1))}};h.isArray=Array.isArray||function(e){return{}.toString.call(e).indexOf("Array")>=0};h.delay=function(e,t){if(typeof e==="function"){t=e;e=0}return setTimeout(t,e)};var i=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,F={"\0":"\\u0000","":"\\u0001","":"\\u0002","":"\\u0003","":"\\u0004","":"\\u0005","":"\\u0006","":"\\u0007","\b":"\\b","\t":"\\t","\n":"\\n","\v":"\\u000b","\f":"\\f","\r":"\\r","":"\\u000e","":"\\u000f","":"\\u0010","":"\\u0011","":"\\u0012","":"\\u0013","":"\\u0014","":"\\u0015","":"\\u0016","":"\\u0017","":"\\u0018","":"\\u0019","":"\\u001a","":"\\u001b","":"\\u001c","":"\\u001d","":"\\u001e","":"\\u001f",'"':'\\"',"\\":"\\\\","":"\\u007f","":"\\u0080","":"\\u0081","":"\\u0082","":"\\u0083","":"\\u0084","":"\\u0085","":"\\u0086","":"\\u0087","":"\\u0088","":"\\u0089","":"\\u008a","":"\\u008b","":"\\u008c","":"\\u008d","":"\\u008e","":"\\u008f","":"\\u0090","":"\\u0091","":"\\u0092","":"\\u0093","":"\\u0094","":"\\u0095","":"\\u0096","":"\\u0097","":"\\u0098","":"\\u0099","":"\\u009a","":"\\u009b","":"\\u009c","":"\\u009d","":"\\u009e","":"\\u009f","­":"\\u00ad","؀":"\\u0600","؁":"\\u0601","؂":"\\u0602","؃":"\\u0603","؄":"\\u0604","܏":"\\u070f","឴":"\\u17b4","឵":"\\u17b5","‌":"\\u200c","‍":"\\u200d","‎":"\\u200e","‏":"\\u200f","\u2028":"\\u2028","\u2029":"\\u2029","‪":"\\u202a","‫":"\\u202b","‬":"\\u202c","‭":"\\u202d","‮":"\\u202e"," ":"\\u202f","⁠":"\\u2060","⁡":"\\u2061","⁢":"\\u2062","⁣":"\\u2063","⁤":"\\u2064","⁥":"\\u2065","⁦":"\\u2066","⁧":"\\u2067","⁨":"\\u2068","⁩":"\\u2069","⁪":"\\u206a","⁫":"\\u206b","⁬":"\\u206c","⁭":"\\u206d","⁮":"\\u206e","⁯":"\\u206f","\ufeff":"\\ufeff","￰":"\\ufff0","￱":"\\ufff1","￲":"\\ufff2","￳":"\\ufff3","￴":"\\ufff4","￵":"\\ufff5","￶":"\\ufff6","￷":"\\ufff7","￸":"\\ufff8","￹":"\\ufff9","￺":"\\ufffa","￻":"\\ufffb","￼":"\\ufffc","�":"\\ufffd","￾":"\\ufffe","￿":"\\uffff"};var n=/[\x00-\x1f\ud800-\udfff\ufffe\uffff\u0300-\u0333\u033d-\u0346\u034a-\u034c\u0350-\u0352\u0357-\u0358\u035c-\u0362\u0374\u037e\u0387\u0591-\u05af\u05c4\u0610-\u0617\u0653-\u0654\u0657-\u065b\u065d-\u065e\u06df-\u06e2\u06eb-\u06ec\u0730\u0732-\u0733\u0735-\u0736\u073a\u073d\u073f-\u0741\u0743\u0745\u0747\u07eb-\u07f1\u0951\u0958-\u095f\u09dc-\u09dd\u09df\u0a33\u0a36\u0a59-\u0a5b\u0a5e\u0b5c-\u0b5d\u0e38-\u0e39\u0f43\u0f4d\u0f52\u0f57\u0f5c\u0f69\u0f72-\u0f76\u0f78\u0f80-\u0f83\u0f93\u0f9d\u0fa2\u0fa7\u0fac\u0fb9\u1939-\u193a\u1a17\u1b6b\u1cda-\u1cdb\u1dc0-\u1dcf\u1dfc\u1dfe\u1f71\u1f73\u1f75\u1f77\u1f79\u1f7b\u1f7d\u1fbb\u1fbe\u1fc9\u1fcb\u1fd3\u1fdb\u1fe3\u1feb\u1fee-\u1fef\u1ff9\u1ffb\u1ffd\u2000-\u2001\u20d0-\u20d1\u20d4-\u20d7\u20e7-\u20e9\u2126\u212a-\u212b\u2329-\u232a\u2adc\u302b-\u302c\uaab2-\uaab3\uf900-\ufa0d\ufa10\ufa12\ufa15-\ufa1e\ufa20\ufa22\ufa25-\ufa26\ufa2a-\ufa2d\ufa30-\ufa6d\ufa70-\ufad9\ufb1d\ufb1f\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufb4e\ufff0-\uffff]/g,r;var N=JSON&&JSON.stringify||function(e){i.lastIndex=0;if(i.test(e)){e=e.replace(i,function(e){return F[e]})}return'"'+e+'"'};var j=function(e){var t;var i={};var n=[];for(t=0;t<65536;t++){n.push(String.fromCharCode(t))}e.lastIndex=0;n.join("").replace(e,function(e){i[e]="\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4);return""});e.lastIndex=0;return i};h.quote=function(e){var t=N(e);n.lastIndex=0;if(!n.test(t)){return t}if(!r)r=j(n);return t.replace(n,function(e){return r[e]})};var l=["websocket","xdr-streaming","xhr-streaming","iframe-eventsource","iframe-htmlfile","xdr-polling","xhr-polling","iframe-xhr-polling","jsonp-polling"];h.probeProtocols=function(){var e={};for(var t=0;t<l.length;t++){var i=l[t];e[i]=v[i]&&v[i].enabled()}return e};h.detectProtocols=function(e,t,i){var n={},r=[];if(!t)t=l;for(var o=0;o<t.length;o++){var a=t[o];n[a]=e[a]}var s=function(e){var t=e.shift();if(n[t]){r.push(t)}else{if(e.length>0){s(e)}}};if(i.websocket!==false){s(["websocket"])}if(n["xhr-streaming"]&&!i.null_origin){r.push("xhr-streaming")}else{if(n["xdr-streaming"]&&!i.cookie_needed&&!i.null_origin){r.push("xdr-streaming")}else{s(["iframe-eventsource","iframe-htmlfile"])}}if(n["xhr-polling"]&&!i.null_origin){r.push("xhr-polling")}else{if(n["xdr-polling"]&&!i.cookie_needed&&!i.null_origin){r.push("xdr-polling")}else{s(["iframe-xhr-polling","jsonp-polling"])}}return r};var o="_sockjs_global";h.createHook=function(){var e="a"+h.random_string(8);if(!(o in d)){var t={};d[o]=function(e){if(!(e in t)){t[e]={"id":e,"del":function(){delete t[e]}}}return t[e]}}return d[o](e)};h.attachMessage=function(e){h.attachEvent("message",e)};h.attachEvent=function(e,t){if(typeof d.addEventListener!=="undefined"){d.addEventListener(e,t,false)}else{c.attachEvent("on"+e,t);d.attachEvent("on"+e,t)}};h.detachMessage=function(e){h.detachEvent("message",e)};h.detachEvent=function(e,t){if(typeof d.addEventListener!=="undefined"){d.removeEventListener(e,t,false)}else{c.detachEvent("on"+e,t);d.detachEvent("on"+e,t)}};var a={};var u=false;var U=function(){for(var e in a){a[e]();delete a[e]}};var $=function(){if(u)return;u=true;U()};h.attachEvent("unload",$);h.unload_add=function(e){var t=h.random_string(8);a[t]=e;if(u){h.delay(U)}return t};h.unload_del=function(e){if(e in a)delete a[e]};h.createIframe=function(e,t){var i=c.createElement("iframe");var n,r;var o=function(){clearTimeout(n);try{i.onload=null}catch(e){}i.onerror=null};var a=function(){if(i){o();setTimeout(function(){if(i){i.parentNode.removeChild(i)}i=null},0);h.unload_del(r)}};var s=function(e){if(i){a();t(e)}};var l=function(e,t){try{if(i&&i.contentWindow){i.contentWindow.postMessage(e,t)}}catch(e){}};i.src=e;i.style.display="none";i.style.position="absolute";i.onerror=function(){s("onerror")};i.onload=function(){clearTimeout(n);n=setTimeout(function(){s("onload timeout")},2e3)};c.body.appendChild(i);n=setTimeout(function(){s("timeout")},15e3);r=h.unload_add(a);return{"post":l,"cleanup":a,"loaded":o}};h.createHtmlfile=function(e,t){var i=new ActiveXObject("htmlfile");var n,r;var o;var a=function(){clearTimeout(n)};var s=function(){if(i){a();h.unload_del(r);o.parentNode.removeChild(o);o=i=null;CollectGarbage()}};var l=function(e){if(i){s();t(e)}};var u=function(e,t){try{if(o&&o.contentWindow){o.contentWindow.postMessage(e,t)}}catch(e){}};i.open();i.write("<html><s"+"cript>"+'document.domain="'+document.domain+'";'+"</s"+"cript></html>");i.close();i.parentWindow[f]=d[f];var c=i.createElement("div");i.body.appendChild(c);o=i.createElement("iframe");c.appendChild(o);o.src=e;n=setTimeout(function(){l("timeout")},15e3);r=h.unload_add(s);return{"post":u,"cleanup":s,"loaded":a}};var p=function(){};p.prototype=new t(["chunk","finish"]);p.prototype._start=function(e,t,i,n){var r=this;try{r.xhr=new XMLHttpRequest}catch(e){}if(!r.xhr){try{r.xhr=new d.ActiveXObject("Microsoft.XMLHTTP")}catch(e){}}if(d.ActiveXObject||d.XDomainRequest){t+=(t.indexOf("?")===-1?"?":"&")+"t="+ +new Date}r.unload_ref=h.unload_add(function(){r._cleanup(true)});try{r.xhr.open(e,t,true)}catch(e){r.emit("finish",0,"");r._cleanup();return}if(!n||!n.no_credentials){r.xhr.withCredentials="true"}if(n&&n.headers){for(var o in n.headers){r.xhr.setRequestHeader(o,n.headers[o])}}r.xhr.onreadystatechange=function(){if(r.xhr){var e=r.xhr;switch(e.readyState){case 3:try{var t=e.status;var i=e.responseText}catch(e){};if(t===1223)t=204;if(i&&i.length>0){r.emit("chunk",t,i)}break;case 4:var t=e.status;if(t===1223)t=204;r.emit("finish",t,e.responseText);r._cleanup(false);break}}};r.xhr.send(i)};p.prototype._cleanup=function(e){var t=this;if(!t.xhr)return;h.unload_del(t.unload_ref);t.xhr.onreadystatechange=function(){};if(e){try{t.xhr.abort()}catch(e){}}t.unload_ref=t.xhr=null};p.prototype.close=function(){var e=this;e.nuke();e._cleanup(true)};var H=h.XHRCorsObject=function(){var e=this,t=arguments;h.delay(function(){e._start.apply(e,t)})};H.prototype=new p;var z=h.XHRLocalObject=function(e,t,i){var n=this;h.delay(function(){n._start(e,t,i,{"no_credentials":true})})};z.prototype=new p;var g=h.XDRObject=function(e,t,i){var n=this;h.delay(function(){n._start(e,t,i)})};g.prototype=new t(["chunk","finish"]);g.prototype._start=function(e,t,i){var n=this;var r=new XDomainRequest;t+=(t.indexOf("?")===-1?"?":"&")+"t="+ +new Date;var o=r.ontimeout=r.onerror=function(){n.emit("finish",0,"");n._cleanup(false)};r.onprogress=function(){n.emit("chunk",200,r.responseText)};r.onload=function(){n.emit("finish",200,r.responseText);n._cleanup(false)};n.xdr=r;n.unload_ref=h.unload_add(function(){n._cleanup(true)});try{n.xdr.open(e,t);n.xdr.send(i)}catch(e){o()}};g.prototype._cleanup=function(e){var t=this;if(!t.xdr)return;h.unload_del(t.unload_ref);t.xdr.ontimeout=t.xdr.onerror=t.xdr.onprogress=t.xdr.onload=null;if(e){try{t.xdr.abort()}catch(e){}}t.unload_ref=t.xdr=null};g.prototype.close=function(){var e=this;e.nuke();e._cleanup(true)};h.isXHRCorsCapable=function(){if(d.XMLHttpRequest&&"withCredentials"in new XMLHttpRequest){return 1}if(d.XDomainRequest&&c.domain){return 2}if(S.enabled()){return 3}return 4};var v=function(e,t,i){if(this===d){return new v(e,t,i)}var n=this,r;n._options={"devel":false,"debug":false,"protocols_whitelist":[],"info":undefined,"rtt":undefined};if(i){h.objectExtend(n._options,i)}n._base_url=h.amendUrl(e);n._server=n._options.server||h.random_number_string(1e3);if(n._options.protocols_whitelist&&n._options.protocols_whitelist.length){r=n._options.protocols_whitelist}else{if(typeof t==="string"&&t.length>0){r=[t]}else if(h.isArray(t)){r=t}else{r=null}if(r){n._debug('Deprecated API: Use "protocols_whitelist" option '+"instead of supplying protocol list as a second "+"parameter to SockJS constructor.")}}n._protocols=[];n.protocol=null;n.readyState=v.CONNECTING;n._ir=X(n._base_url);n._ir.onfinish=function(e,t){n._ir=null;if(e){if(n._options.info){e=h.objectExtend(e,n._options.info)}if(n._options.rtt){t=n._options.rtt}n._applyInfo(e,t,r);n._didClose()}else{n._didClose(1002,"Can't connect to server",true)}}};v.prototype=new e;v.version="0.3.4";v.CONNECTING=0;v.OPEN=1;v.CLOSING=2;v.CLOSED=3;v.prototype._debug=function(){if(this._options.debug)h.log.apply(h,arguments)};v.prototype._dispatchOpen=function(){var e=this;if(e.readyState===v.CONNECTING){if(e._transport_tref){clearTimeout(e._transport_tref);e._transport_tref=null}e.readyState=v.OPEN;e.dispatchEvent(new s("open"))}else{e._didClose(1006,"Server lost session")}};v.prototype._dispatchMessage=function(e){var t=this;if(t.readyState!==v.OPEN)return;t.dispatchEvent(new s("message",{"data":e}))};v.prototype._dispatchHeartbeat=function(e){var t=this;if(t.readyState!==v.OPEN)return;t.dispatchEvent(new s("heartbeat",{}))};v.prototype._didClose=function(e,t,i){var n=this;if(n.readyState!==v.CONNECTING&&n.readyState!==v.OPEN&&n.readyState!==v.CLOSING)throw new Error("INVALID_STATE_ERR");if(n._ir){n._ir.nuke();n._ir=null}if(n._transport){n._transport.doCleanup();n._transport=null}var r=new s("close",{"code":e,"reason":t,"wasClean":h.userSetCode(e)});if(!h.userSetCode(e)&&n.readyState===v.CONNECTING&&!i){if(n._try_next_protocol(r)){return}r=new s("close",{"code":2e3,"reason":"All transports failed","wasClean":false,"last_event":r})}n.readyState=v.CLOSED;h.delay(function(){n.dispatchEvent(r)})};v.prototype._didMessage=function(e){var t=this;var i=e.slice(0,1);switch(i){case"o":t._dispatchOpen();break;case"a":var n=JSON.parse(e.slice(1)||"[]");for(var r=0;r<n.length;r++){t._dispatchMessage(n[r])}break;case"m":var n=JSON.parse(e.slice(1)||"null");t._dispatchMessage(n);break;case"c":var n=JSON.parse(e.slice(1)||"[]");t._didClose(n[0],n[1]);break;case"h":t._dispatchHeartbeat();break}};v.prototype._try_next_protocol=function(e){var t=this;if(t.protocol){t._debug("Closed transport:",t.protocol,""+e);t.protocol=null}if(t._transport_tref){clearTimeout(t._transport_tref);t._transport_tref=null}while(1){var i=t.protocol=t._protocols.shift();if(!i){return false}if(v[i]&&v[i].need_body===true&&(!c.body||typeof c.readyState!=="undefined"&&c.readyState!=="complete")){t._protocols.unshift(i);t.protocol="waiting-for-load";h.attachEvent("load",function(){t._try_next_protocol()});return true}if(!v[i]||!v[i].enabled(t._options)){t._debug("Skipping transport:",i)}else{var n=v[i].roundTrips||1;var r=(t._options.rto||0)*n||5e3;t._transport_tref=h.delay(r,function(){if(t.readyState===v.CONNECTING){t._didClose(2007,"Transport timeouted")}});var o=h.random_string(8);var a=t._base_url+"/"+t._server+"/"+o;t._debug("Opening transport:",i," url:"+a," RTO:"+t._options.rto);t._transport=new v[i](t,a,t._base_url);return true}}};v.prototype.close=function(e,t){var i=this;if(e&&!h.userSetCode(e))throw new Error("INVALID_ACCESS_ERR");if(i.readyState!==v.CONNECTING&&i.readyState!==v.OPEN){return false}i.readyState=v.CLOSING;i._didClose(e||1e3,t||"Normal closure");return true};v.prototype.send=function(e){var t=this;if(t.readyState===v.CONNECTING)throw new Error("INVALID_STATE_ERR");if(t.readyState===v.OPEN){t._transport.doSend(h.quote(""+e))}return true};v.prototype._applyInfo=function(e,t,i){var n=this;n._options.info=e;n._options.rtt=t;n._options.rto=h.countRTO(t);n._options.info.null_origin=!c.domain;var r=h.probeProtocols();n._protocols=h.detectProtocols(r,i,e)};var m=v.websocket=function(e,t){var i=this;var n=t+"/websocket";if(n.slice(0,5)==="https"){n="wss"+n.slice(5)}else{n="ws"+n.slice(4)}i.ri=e;i.url=n;var r=d.WebSocket||d.MozWebSocket;i.ws=new r(i.url);i.ws.onmessage=function(e){i.ri._didMessage(e.data)};i.unload_ref=h.unload_add(function(){i.ws.close()});i.ws.onclose=function(){i.ri._didMessage(h.closeFrame(1006,"WebSocket connection broken"))}};m.prototype.doSend=function(e){this.ws.send("["+e+"]")};m.prototype.doCleanup=function(){var e=this;var t=e.ws;if(t){t.onmessage=t.onclose=null;t.close();h.unload_del(e.unload_ref);e.unload_ref=e.ri=e.ws=null}};m.enabled=function(){return!!(d.WebSocket||d.MozWebSocket)};m.roundTrips=2;var y=function(){};y.prototype.send_constructor=function(e){var t=this;t.send_buffer=[];t.sender=e};y.prototype.doSend=function(e){var t=this;t.send_buffer.push(e);if(!t.send_stop){t.send_schedule()}};y.prototype.send_schedule_wait=function(){var e=this;var t;e.send_stop=function(){e.send_stop=null;clearTimeout(t)};t=h.delay(25,function(){e.send_stop=null;e.send_schedule()})};y.prototype.send_schedule=function(){var i=this;if(i.send_buffer.length>0){var e="["+i.send_buffer.join(",")+"]";i.send_stop=i.sender(i.trans_url,e,function(e,t){i.send_stop=null;if(e===false){i.ri._didClose(1006,"Sending error "+t)}else{i.send_schedule_wait()}});i.send_buffer=[]}};y.prototype.send_destructor=function(){var e=this;if(e._send_stop){e._send_stop()}e._send_stop=null};var W=function(e,t,i){var n=this;if(!("_send_form"in n)){var r=n._send_form=c.createElement("form");var o=n._send_area=c.createElement("textarea");o.name="d";r.style.display="none";r.style.position="absolute";r.method="POST";r.enctype="application/x-www-form-urlencoded";r.acceptCharset="UTF-8";r.appendChild(o);c.body.appendChild(r)}var r=n._send_form;var o=n._send_area;var a="a"+h.random_string(8);r.target=a;r.action=e+"/jsonp_send?i="+a;var s;try{s=c.createElement('<iframe name="'+a+'">')}catch(e){s=c.createElement("iframe");s.name=a}s.id=a;r.appendChild(s);s.style.display="none";try{o.value=t}catch(e){h.log("Your browser is seriously broken. Go home! "+e.message)}r.submit();var l=function(e){if(!s.onerror)return;s.onreadystatechange=s.onerror=s.onload=null;h.delay(500,function(){s.parentNode.removeChild(s);s=null});o.value="";i(true)};s.onerror=s.onload=l;s.onreadystatechange=function(e){if(s.readyState=="complete")l()};return l};var G=function(r){return function(e,t,i){var n=new r("POST",e+"/xhr_send",t);n.onfinish=function(e,t){i(e===200||e===204,"http status "+e)};return function(e){i(false,e)}}};var V=function(e,t){var i;var n=c.createElement("script");var r;var o=function(e){if(r){r.parentNode.removeChild(r);r=null}if(n){clearTimeout(i);n.parentNode.removeChild(n);n.onreadystatechange=n.onerror=n.onload=n.onclick=null;n=null;t(e);t=null}};var a=false;var s=null;n.id="a"+h.random_string(8);n.src=e;n.type="text/javascript";n.charset="UTF-8";n.onerror=function(e){if(!s){s=setTimeout(function(){if(!a){o(h.closeFrame(1006,"JSONP script loaded abnormally (onerror)"))}},1e3)}};n.onload=function(e){o(h.closeFrame(1006,"JSONP script loaded abnormally (onload)"))};n.onreadystatechange=function(e){if(/loaded|closed/.test(n.readyState)){if(n&&n.htmlFor&&n.onclick){a=true;try{n.onclick()}catch(e){}}if(n){o(h.closeFrame(1006,"JSONP script loaded abnormally (onreadystatechange)"))}}};if(typeof n.async==="undefined"&&c.attachEvent){if(!/opera/i.test(navigator.userAgent)){try{n.htmlFor=n.id;n.event="onclick"}catch(e){}n.async=true}else{r=c.createElement("script");r.text="try{var a = document.getElementById('"+n.id+"'); if(a)a.onerror();}catch(x){};";n.async=r.async=false}}if(typeof n.async!=="undefined"){n.async=true}i=setTimeout(function(){o(h.closeFrame(1006,"JSONP script loaded abnormally (timeout)"))},35e3);var l=c.getElementsByTagName("head")[0];l.insertBefore(n,l.firstChild);if(r){l.insertBefore(r,l.firstChild)}return o};var b=v["jsonp-polling"]=function(e,t){h.polluteGlobalNamespace();var i=this;i.ri=e;i.trans_url=t;i.send_constructor(W);i._schedule_recv()};b.prototype=new y;b.prototype._schedule_recv=function(){var t=this;var e=function(e){t._recv_stop=null;if(e){if(!t._is_closing){t.ri._didMessage(e)}}if(!t._is_closing){t._schedule_recv()}};t._recv_stop=q(t.trans_url+"/jsonp",V,e)};b.enabled=function(){return true};b.need_body=true;b.prototype.doCleanup=function(){var e=this;e._is_closing=true;if(e._recv_stop){e._recv_stop()}e.ri=e._recv_stop=null;e.send_destructor()};var q=function(e,t,i){var n="a"+h.random_string(6);var r=e+"?c="+escape(f+"."+n);var o=0;var a=function(e){switch(o){case 0:delete d[f][n];i(e);break;case 1:i(e);o=2;break;case 2:delete d[f][n];break}};var s=t(r,a);d[f][n]=s;var l=function(){if(d[f][n]){o=1;d[f][n](h.closeFrame(1e3,"JSONP user aborted read"))}};return l};var _=function(){};_.prototype=new y;_.prototype.run=function(e,t,i,n,r){var o=this;o.ri=e;o.trans_url=t;o.send_constructor(G(r));o.poll=new I(e,n,t+i,r)};_.prototype.doCleanup=function(){var e=this;if(e.poll){e.poll.abort();e.poll=null}};var w=v["xhr-streaming"]=function(e,t){this.run(e,t,"/xhr_streaming",M,h.XHRCorsObject)};w.prototype=new _;w.enabled=function(){return d.XMLHttpRequest&&"withCredentials"in new XMLHttpRequest&&!/opera/i.test(navigator.userAgent)};w.roundTrips=2;w.need_body=true;var E=v["xdr-streaming"]=function(e,t){this.run(e,t,"/xhr_streaming",M,h.XDRObject)};E.prototype=new _;E.enabled=function(){return!!d.XDomainRequest};E.roundTrips=2;var x=v["xhr-polling"]=function(e,t){this.run(e,t,"/xhr",M,h.XHRCorsObject)};x.prototype=new _;x.enabled=w.enabled;x.roundTrips=2;var T=v["xdr-polling"]=function(e,t){this.run(e,t,"/xhr",M,h.XDRObject)};T.prototype=new _;T.enabled=E.enabled;T.roundTrips=2;var S=function(){};S.prototype.i_constructor=function(e,t,i){var n=this;n.ri=e;n.origin=h.getOrigin(i);n.base_url=i;n.trans_url=t;var r=i+"/iframe.html";if(n.ri._options.devel){r+="?t="+ +new Date}n.window_id=h.random_string(8);r+="#"+n.window_id;n.iframeObj=h.createIframe(r,function(e){n.ri._didClose(1006,"Unable to load an iframe ("+e+")")});n.onmessage_cb=h.bind(n.onmessage,n);h.attachMessage(n.onmessage_cb)};S.prototype.doCleanup=function(){var e=this;if(e.iframeObj){h.detachMessage(e.onmessage_cb);try{if(e.iframeObj.iframe.contentWindow){e.postMessage("c")}}catch(e){}e.iframeObj.cleanup();e.iframeObj=null;e.onmessage_cb=e.iframeObj=null}};S.prototype.onmessage=function(e){var t=this;if(e.origin!==t.origin)return;var i=e.data.slice(0,8);var n=e.data.slice(8,9);var r=e.data.slice(9);if(i!==t.window_id)return;switch(n){case"s":t.iframeObj.loaded();t.postMessage("s",JSON.stringify([v.version,t.protocol,t.trans_url,t.base_url]));break;case"t":t.ri._didMessage(r);break}};S.prototype.postMessage=function(e,t){var i=this;i.iframeObj.post(i.window_id+e+(t||""),i.origin)};S.prototype.doSend=function(e){this.postMessage("m",e)};S.enabled=function(){var e=navigator&&navigator.userAgent&&navigator.userAgent.indexOf("Konqueror")!==-1;return(typeof d.postMessage==="function"||typeof d.postMessage==="object")&&!e};var k;var R=function(e,t){if(parent!==d){parent.postMessage(k+e+(t||""),"*")}else{h.log("Can't postMessage, no parent window.",e,t)}};var C=function(){};C.prototype._didClose=function(e,t){R("t",h.closeFrame(e,t))};C.prototype._didMessage=function(e){R("t",e)};C.prototype._doSend=function(e){this._transport.doSend(e)};C.prototype._doCleanup=function(){this._transport.doCleanup()};h.parent_origin=undefined;v.bootstrap_iframe=function(){var u;k=c.location.hash.slice(1);var e=function(e){if(e.source!==parent)return;if(typeof h.parent_origin==="undefined")h.parent_origin=e.origin;if(e.origin!==h.parent_origin)return;var t=e.data.slice(0,8);var i=e.data.slice(8,9);var n=e.data.slice(9);if(t!==k)return;switch(i){case"s":var r=JSON.parse(n);var o=r[0];var a=r[1];var s=r[2];var l=r[3];if(o!==v.version){h.log("Incompatibile SockJS! Main site uses:"+' "'+o+'", the iframe:'+' "'+v.version+'".')}if(!h.flatUrl(s)||!h.flatUrl(l)){h.log("Only basic urls are supported in SockJS");return}if(!h.isSameOriginUrl(s)||!h.isSameOriginUrl(l)){h.log("Can't connect to different domain from within an "+"iframe. ("+JSON.stringify([d.location.href,s,l])+")");return}u=new C;u._transport=new C[a](u,s,l);break;case"m":u._doSend(n);break;case"c":if(u)u._doCleanup();u=null;break}};h.attachMessage(e);R("s")};var A=function(e,t){var i=this;h.delay(function(){i.doXhr(e,t)})};A.prototype=new t(["finish"]);A.prototype.doXhr=function(e,t){var r=this;var o=(new Date).getTime();var i=new t("GET",e+"/info");var a=h.delay(8e3,function(){i.ontimeout()});i.onfinish=function(e,t){clearTimeout(a);a=null;if(e===200){var i=(new Date).getTime()-o;var n=JSON.parse(t);if(typeof n!=="object")n={};r.emit("finish",n,i)}else{r.emit("finish")}};i.ontimeout=function(){i.close();r.emit("finish")}};var K=function(i){var o=this;var e=function(){var r=new S;r.protocol="w-iframe-info-receiver";var e=function(e){if(typeof e==="string"&&e.substr(0,1)==="m"){var t=JSON.parse(e.substr(1));var i=t[0],n=t[1];o.emit("finish",i,n)}else{o.emit("finish")}r.doCleanup();r=null};var t={"_options":{},"_didClose":e,"_didMessage":e};r.i_constructor(t,i,i)};if(!c.body){h.attachEvent("load",e)}else{e()}};K.prototype=new t(["finish"]);var Z=function(){var e=this;h.delay(function(){e.emit("finish",{},2e3)})};Z.prototype=new t(["finish"]);var X=function(e){if(h.isSameOriginUrl(e)){return new A(e,h.XHRLocalObject)}switch(h.isXHRCorsCapable()){case 1:return new A(e,h.XHRLocalObject);case 2:return new A(e,h.XDRObject);case 3:return new K(e);default:return new Z}};var Y=C["w-iframe-info-receiver"]=function(i,e,t){var n=new A(t,h.XHRLocalObject);n.onfinish=function(e,t){i._didMessage("m"+JSON.stringify([e,t]));i._didClose()}};Y.prototype.doCleanup=function(){};var O=v["iframe-eventsource"]=function(){var e=this;e.protocol="w-iframe-eventsource";e.i_constructor.apply(e,arguments)};O.prototype=new S;O.enabled=function(){return"EventSource"in d&&S.enabled()};O.need_body=true;O.roundTrips=3;var Q=C["w-iframe-eventsource"]=function(e,t){this.run(e,t,"/eventsource",te,h.XHRLocalObject)};Q.prototype=new _;var L=v["iframe-xhr-polling"]=function(){var e=this;e.protocol="w-iframe-xhr-polling";e.i_constructor.apply(e,arguments)};L.prototype=new S;L.enabled=function(){return d.XMLHttpRequest&&S.enabled()};L.need_body=true;L.roundTrips=3;var J=C["w-iframe-xhr-polling"]=function(e,t){this.run(e,t,"/xhr",M,h.XHRLocalObject)};J.prototype=new _;var P=v["iframe-htmlfile"]=function(){var e=this;e.protocol="w-iframe-htmlfile";e.i_constructor.apply(e,arguments)};P.prototype=new S;P.enabled=function(){return S.enabled()};P.need_body=true;P.roundTrips=3;var ee=C["w-iframe-htmlfile"]=function(e,t){this.run(e,t,"/htmlfile",ne,h.XHRLocalObject)};ee.prototype=new _;var I=function(e,t,i,n){var r=this;r.ri=e;r.Receiver=t;r.recv_url=i;r.AjaxObject=n;r._scheduleRecv()};I.prototype._scheduleRecv=function(){var t=this;var i=t.poll=new t.Receiver(t.recv_url,t.AjaxObject);var n=0;i.onmessage=function(e){n+=1;t.ri._didMessage(e.data)};i.onclose=function(e){t.poll=i=i.onmessage=i.onclose=null;if(!t.poll_is_closing){if(e.reason==="permanent"){t.ri._didClose(1006,"Polling error ("+e.reason+")")}else{t._scheduleRecv()}}}};I.prototype.abort=function(){var e=this;e.poll_is_closing=true;if(e.poll){e.poll.abort()}};var te=function(e){var n=this;var r=new EventSource(e);r.onmessage=function(e){n.dispatchEvent(new s("message",{"data":unescape(e.data)}))};n.es_close=r.onerror=function(e,t){var i=t?"user":r.readyState!==2?"network":"permanent";n.es_close=r.onmessage=r.onerror=null;r.close();r=null;h.delay(200,function(){n.dispatchEvent(new s("close",{"reason":i}))})}};te.prototype=new e;te.prototype.abort=function(){var e=this;if(e.es_close){e.es_close({},true)}};var D;var ie=function(){if(D===undefined){if("ActiveXObject"in d){try{D=!!new ActiveXObject("htmlfile")}catch(e){}}else{D=false}}return D};var ne=function(e){var i=this;h.polluteGlobalNamespace();i.id="a"+h.random_string(6,26);e+=(e.indexOf("?")===-1?"?":"&")+"c="+escape(f+"."+i.id);var t=ie()?h.createHtmlfile:h.createIframe;var n;d[f][i.id]={"start":function(){n.loaded()},"message":function(e){i.dispatchEvent(new s("message",{"data":e}))},"stop":function(){i.iframe_close({},"network")}};i.iframe_close=function(e,t){n.cleanup();i.iframe_close=n=null;delete d[f][i.id];i.dispatchEvent(new s("close",{"reason":t}))};n=t(e,function(e){i.iframe_close({},"permanent")})};ne.prototype=new e;ne.prototype.abort=function(){var e=this;if(e.iframe_close){e.iframe_close({},"user")}};var M=function(e,t){var o=this;var a=0;o.xo=new t("POST",e,null);o.xo.onchunk=function(e,t){if(e!==200)return;while(1){var i=t.slice(a);var n=i.indexOf("\n");if(n===-1)break;a+=n+1;var r=i.slice(0,n);o.dispatchEvent(new s("message",{"data":r}))}};o.xo.onfinish=function(e,t){o.xo.onchunk(e,t);o.xo=null;var i=e===200?"network":"permanent";o.dispatchEvent(new s("close",{"reason":i}))}};M.prototype=new e;M.prototype.abort=function(){var e=this;if(e.xo){e.xo.close();e.dispatchEvent(new s("close",{"reason":"user"}));e.xo=null}};v.getUtils=function(){return h};v.getIframeTransport=function(){return S};return v}();if("_sockjs_onload"in window)setTimeout(_sockjs_onload,1);if(typeof define==="function"&&define.amd){define("sockjs",[],function(){return SockJS})}(function(){var h={"VERSION":"2.3.5","Result":{"SUCCEEDED":1,"NOTRANSITION":2,"CANCELLED":3,"PENDING":4},"Error":{"INVALID_TRANSITION":100,"PENDING_TRANSITION":200,"INVALID_CALLBACK":300},"WILDCARD":"*","ASYNC":"async","create":function(e,t){var i=typeof e.initial=="string"?{"state":e.initial}:e.initial;var n=e.terminal||e["final"];var r=t||e.target||{};var o=e.events||[];var a=e.callbacks||{};var s={};var l={};var u=function(e){var t=e.from instanceof Array?e.from:e.from?[e.from]:[h.WILDCARD];s[e.name]=s[e.name]||{};for(var i=0;i<t.length;i++){l[t[i]]=l[t[i]]||[];l[t[i]].push(e.name);s[e.name][t[i]]=e.to||t[i]}};if(i){i.event=i.event||"startup";u({"name":i.event,"from":"none","to":i.state})}for(var c=0;c<o.length;c++)u(o[c]);for(var d in s){if(s.hasOwnProperty(d))r[d]=h.buildEvent(d,s[d])}for(var d in a){if(a.hasOwnProperty(d))r[d]=a[d]}r.current="none";r.is=function(e){return e instanceof Array?e.indexOf(this.current)>=0:this.current===e};r.can=function(e){return!this.transition&&(s[e].hasOwnProperty(this.current)||s[e].hasOwnProperty(h.WILDCARD))};r.cannot=function(e){return!this.can(e)};r.transitions=function(){return l[this.current]};r.isFinished=function(){return this.is(n)};r.error=e.error||function(e,t,i,n,r,o,a){throw a||o};if(i&&!i.defer)r[i.event]();return r},"doCallback":function(t,e,i,n,r,o){if(e){try{return e.apply(t,[i,n,r].concat(o))}catch(e){return t.error(i,n,r,o,h.Error.INVALID_CALLBACK,"an exception occurred in a caller-provided callback function",e)}}},"beforeAnyEvent":function(e,t,i,n,r){return h.doCallback(e,e["onbeforeevent"],t,i,n,r)},"afterAnyEvent":function(e,t,i,n,r){return h.doCallback(e,e["onafterevent"]||e["onevent"],t,i,n,r)},"leaveAnyState":function(e,t,i,n,r){return h.doCallback(e,e["onleavestate"],t,i,n,r)},"enterAnyState":function(e,t,i,n,r){return h.doCallback(e,e["onenterstate"]||e["onstate"],t,i,n,r)},"changeState":function(e,t,i,n,r){return h.doCallback(e,e["onchangestate"],t,i,n,r)},"beforeThisEvent":function(e,t,i,n,r){return h.doCallback(e,e["onbefore"+t],t,i,n,r)},"afterThisEvent":function(e,t,i,n,r){return h.doCallback(e,e["onafter"+t]||e["on"+t],t,i,n,r)},"leaveThisState":function(e,t,i,n,r){return h.doCallback(e,e["onleave"+i],t,i,n,r)},"enterThisState":function(e,t,i,n,r){return h.doCallback(e,e["onenter"+n]||e["on"+n],t,i,n,r)},"beforeEvent":function(e,t,i,n,r){if(false===h.beforeThisEvent(e,t,i,n,r)||false===h.beforeAnyEvent(e,t,i,n,r))return false},"afterEvent":function(e,t,i,n,r){h.afterThisEvent(e,t,i,n,r);h.afterAnyEvent(e,t,i,n,r)},"leaveState":function(e,t,i,n,r){var o=h.leaveThisState(e,t,i,n,r),a=h.leaveAnyState(e,t,i,n,r);if(false===o||false===a)return false;else if(h.ASYNC===o||h.ASYNC===a)return h.ASYNC},"enterState":function(e,t,i,n,r){h.enterThisState(e,t,i,n,r);h.enterAnyState(e,t,i,n,r)},"buildEvent":function(o,a){return function(){var e=this.current;var t=a[e]||a[h.WILDCARD]||e;var i=Array.prototype.slice.call(arguments);if(this.transition)return this.error(o,e,t,i,h.Error.PENDING_TRANSITION,"event "+o+" inappropriate because previous transition did not complete");if(this.cannot(o))return this.error(o,e,t,i,h.Error.INVALID_TRANSITION,"event "+o+" inappropriate in current state "+this.current);if(false===h.beforeEvent(this,o,e,t,i))return h.Result.CANCELLED;if(e===t){h.afterEvent(this,o,e,t,i);return h.Result.NOTRANSITION}var n=this;this.transition=function(){n.transition=null;n.current=t;h.enterState(n,o,e,t,i);h.changeState(n,o,e,t,i);h.afterEvent(n,o,e,t,i);return h.Result.SUCCEEDED};this.transition.cancel=function(){n.transition=null;h.afterEvent(n,o,e,t,i)};var r=h.leaveState(this,o,e,t,i);if(false===r){this.transition=null;return h.Result.CANCELLED}else if(h.ASYNC===r){return h.Result.PENDING}else{if(this.transition)return this.transition()}}}};if(typeof exports!=="undefined"){if(typeof module!=="undefined"&&module.exports){exports=module.exports=h}exports.StateMachine=h}else if(typeof define==="function"&&define.amd){define(function(e){return h})}else if(typeof window!=="undefined"){window.StateMachine=h}else if(typeof self!=="undefined"){self.StateMachine=h}})();(function(e,t){"use strict";if(typeof define==="function"&&define.amd){define([],t)}else if(typeof exports==="object"){module.exports=t()}else{e.viewportUnitsBuggyfill=t()}})(this,function(){"use strict";var t=false;var a;var n=window.navigator.userAgent;var s=/([+-]?[0-9.]+)(vh|vw|vmin|vmax)/g;var r=[].forEach;var l;var u;var i;var o=false;var c=n.indexOf("Opera Mini")>-1;var d=/(iPhone|iPod|iPad).+AppleWebKit/i.test(n)&&function(){var e=n.match(/OS (\d)/);return e&&e.length>1&&parseInt(e[1])<8}();var h=function(){var e=n.indexOf(" Android ")>-1;if(!e){return false}var t=n.indexOf("Version/")>-1;if(!t){return false}var i=parseFloat((n.match("Android ([0-9.]+)")||[])[1]);return i<=4.4}();if(!o){o=!!navigator.userAgent.match(/Trident.*rv[ :]*11\./)}function f(n,r){var o;return function(){var e=this;var t=arguments;var i=function(){n.apply(e,t)};clearTimeout(o);o=setTimeout(i,r)}}function p(){try{return window.self!==window.top}catch(e){return true}}function e(e){if(t){return}if(e===true){e={"force":true}}a=e||{};a.isMobileSafari=d;a.isBadStockAndroid=h;if(!a.force&&!d&&!o&&!h&&!c&&(!a.hacks||!a.hacks.required(a))){return}a.hacks&&a.hacks.initialize(a);t=true;i=document.createElement("style");i.id="patched-viewport";document.head.appendChild(i);x(function(){var e=f(v,a.refreshDebounceWait||100);window.addEventListener("orientationchange",e,true);window.addEventListener("pageshow",e,true);if(a.force||o||p()){window.addEventListener("resize",e,true);a._listeningToResize=true}a.hacks&&a.hacks.initializeEvents(a,v,e);v()})}function g(){i.textContent=b()}function v(){if(!t){return}m();setTimeout(function(){g()},1)}function m(){u=[];r.call(document.styleSheets,function(e){if(e.ownerNode.id==="patched-viewport"||!e.cssRules||e.ownerNode.getAttribute("data-viewport-units-buggyfill")==="ignore"){return}if(e.media&&e.media.mediaText&&window.matchMedia&&!window.matchMedia(e.media.mediaText).matches){return}r.call(e.cssRules,y)});return u}function y(i){if(i.type===7){var e;try{e=i.cssText}catch(e){return}s.lastIndex=0;if(s.test(e)){u.push([i,null,e]);a.hacks&&a.hacks.findDeclarations(u,i,null,e)}return}if(!i.style){if(!i.cssRules){return}r.call(i.cssRules,function(e){y(e)});return}r.call(i.style,function(e){var t=i.style.getPropertyValue(e);s.lastIndex=0;if(s.test(t)){u.push([i,e,t]);a.hacks&&a.hacks.findDeclarations(u,i,e,t)}})}function b(){l=E();var r=[];var o=[];var a;var s;u.forEach(function(e){var t=_.apply(null,e);var i=t.selector.length?t.selector.join(" {\n")+" {\n":"";var n=new Array(t.selector.length+1).join("\n}");if(!i||i!==a){if(o.length){r.push(a+o.join("\n")+s);o.length=0}if(i){a=i;s=n;o.push(t.content)}else{r.push(t.content);a=null;s=null}return}if(i&&!a){a=i;s=n}o.push(t.content)});if(o.length){r.push(a+o.join("\n")+s)}if(c){r.push("* { content: normal !important; }")}return r.join("\n\n")}function _(e,t,i){var n;var r=[];n=i.replace(s,w);if(a.hacks){n=a.hacks.overwriteDeclaration(e,t,n)}if(t){r.push(e.selectorText);n=t+": "+n+";"}var o=e.parentRule;while(o){r.unshift("@media "+o.media.mediaText);o=o.parentRule}return{"selector":r,"content":n}}function w(e,t,i){var n=l[i];var r=parseFloat(t)/100;return r*n+"px"}function E(){var e=window.innerHeight;var t=window.innerWidth;return{"vh":e,"vw":t,"vmax":Math.max(t,e),"vmin":Math.min(t,e)}}function x(e){var t=0;var i=function(){t--;if(!t){e()}};r.call(document.styleSheets,function(e){if(!e.href||T(e.href)===T(location.href)){return}t++;S(e.ownerNode,i)});if(!t){e()}}function T(e){return e.slice(0,e.indexOf("/",e.indexOf("://")+3))}function S(t,i){k(t.href,function(){var e=document.createElement("style");e.media=t.media;e.setAttribute("data-href",t.href);e.textContent=this.responseText;t.parentNode.replaceChild(e,t);i()},i)}function k(e,t,i){var n=new XMLHttpRequest;if("withCredentials"in n){n.open("GET",e,true)}else if(typeof XDomainRequest!=="undefined"){n=new XDomainRequest;n.open("GET",e)}else{throw new Error("cross-domain XHR not supported")}n.onload=t;n.onerror=i;n.send();return n}return{"version":"0.5.0","findProperties":m,"getCss":b,"init":e,"refresh":v}});window.matchMedia||(window.matchMedia=function(u){"use strict";var c=u.document,a=c.documentElement,s=[],l=0,w="",E={},x=/\s*(only|not)?\s*(screen|print|[a-z\-]+)\s*(and)?\s*/i,T=/^\s*\(\s*(-[a-z]+-)?(min-|max-)?([a-z\-]+)\s*(:?\s*([0-9]+(\.[0-9]+)?|portrait|landscape)(px|em|dppx|dpcm|rem|%|in|cm|mm|ex|pt|pc|\/([0-9]+(\.[0-9]+)?))?)?\s*\)\s*$/,e=0,d=function(e){var t=e.indexOf(",")!==-1&&e.split(",")||[e],i=t.length-1,n=i,r=null,o=null,a="",s=0,l=false,u="",c="",d=null,h=0,f=0,p=null,g="",v="",m="",y="",b="",_=false;if(e===""){return true}do{r=t[n-i];l=false;o=r.match(x);if(o){a=o[0];s=o.index}if(!o||r.substring(0,s).indexOf("(")===-1&&(s||!o[3]&&a!==o.input)){_=false;continue}c=r;l=o[1]==="not";if(!s){u=o[2];c=r.substring(a.length)}_=u===w||u==="all"||u==="";d=c.indexOf(" and ")!==-1&&c.split(" and ")||[c];h=d.length-1;f=h;if(_&&h>=0&&c!==""){do{p=d[h].match(T);if(!p||!E[p[3]]){_=false;break}g=p[2];v=p[5];y=v;m=p[7];b=E[p[3]];if(m){if(m==="px"){y=Number(v)}else if(m==="em"||m==="rem"){y=16*v}else if(p[8]){y=(v/p[8]).toFixed(2)}else if(m==="dppx"){y=v*96}else if(m==="dpcm"){y=v*.3937}else{y=Number(v)}}if(g==="min-"&&y){_=b>=y}else if(g==="max-"&&y){_=b<=y}else if(y){_=b===y}else{_=!!b}if(!_){break}}while(h--)}if(_){break}}while(i--);return l?!_:_},h=function(){var e=u.innerWidth||a.clientWidth,t=u.innerHeight||a.clientHeight,i=u.screen.width,n=u.screen.height,r=u.screen.colorDepth,o=u.devicePixelRatio;E.width=e;E.height=t;E["aspect-ratio"]=(e/t).toFixed(2);E["device-width"]=i;E["device-height"]=n;E["device-aspect-ratio"]=(i/n).toFixed(2);E.color=r;E["color-index"]=Math.pow(2,r);E.orientation=t>=e?"portrait":"landscape";E.resolution=o&&o*96||u.screen.deviceXDPI||96;E["device-pixel-ratio"]=o||1},f=function(){clearTimeout(e);e=setTimeout(function(){var e=null,t=l-1,i=t,n=false;if(t>=0){h();do{e=s[i-t];if(e){n=d(e.mql.media);if(n&&!e.mql.matches||!n&&e.mql.matches){e.mql.matches=n;if(e.listeners){for(var r=0,o=e.listeners.length;r<o;r++){if(e.listeners[r]){e.listeners[r].call(u,e.mql)}}}}}}while(t--)}},10)},t=function(){var e=c.getElementsByTagName("head")[0],t=c.createElement("style"),i=null,n=["screen","print","speech","projection","handheld","tv","braille","embossed","tty"],r=0,o=n.length,a="#mediamatchjs { position: relative; z-index: 0; }",s="",l=u.addEventListener||(s="on")&&u.attachEvent;t.type="text/css";t.id="mediamatchjs";e.appendChild(t);i=u.getComputedStyle&&u.getComputedStyle(t)||t.currentStyle;for(;r<o;r++){a+="@media "+n[r]+" { #mediamatchjs { z-index: "+r+" } }"}if(t.styleSheet){t.styleSheet.cssText=a}else{t.textContent=a}w=n[i.zIndex*1||0];e.removeChild(t);h();l(s+"resize",f);l(s+"orientationchange",f)};t();return function(e){var o=l,t={"matches":false,"media":e,"addListener":function e(t){s[o].listeners||(s[o].listeners=[]);t&&s[o].listeners.push(t)},"removeListener":function e(t){var i=s[o],n=0,r=0;if(!i){return}r=i.listeners.length;for(;n<r;n++){if(i.listeners[n]===t){i.listeners.splice(n,1)}}}};if(e===""){t.matches=true;return t}t.matches=d(e);l=s.push({"mql":t,"listeners":null});return t}}(window));(function(e,t,i){var n=t.matchMedia;if(typeof module!=="undefined"&&module.exports){module.exports=i(n)}else if(typeof define==="function"&&define.amd){define(function(){return t[e]=i(n)})}else{t[e]=i(n)}})("enquire",this,function(n){"use strict";function o(e,t){var i=0,n=e.length,r;for(i;i<n;i++){r=t(e[i],i);if(r===false){break}}}function a(e){return Object.prototype.toString.apply(e)==="[object Array]"}function s(e){return typeof e==="function"}function i(e){this.options=e;!e.deferSetup&&this.setup()}i.prototype={"setup":function(){if(this.options.setup){this.options.setup()}this.initialised=true},"on":function(){!this.initialised&&this.setup();this.options.match&&this.options.match()},"off":function(){this.options.unmatch&&this.options.unmatch()},"destroy":function(){this.options.destroy?this.options.destroy():this.off()},"equals":function(e){return this.options===e||this.options.match===e}};function l(e,t){this.query=e;this.isUnconditional=t;this.handlers=[];this.mql=n(e);var i=this;this.listener=function(e){i.mql=e;i.assess()};this.mql.addListener(this.listener)}l.prototype={"addHandler":function(e){var t=new i(e);this.handlers.push(t);this.matches()&&t.on()},"removeHandler":function(i){var n=this.handlers;o(n,function(e,t){if(e.equals(i)){e.destroy();return!n.splice(t,1)}})},"matches":function(){return this.mql.matches||this.isUnconditional},"clear":function(){o(this.handlers,function(e){e.destroy()});this.mql.removeListener(this.listener);this.handlers.length=0},"assess":function(){var t=this.matches()?"on":"off";o(this.handlers,function(e){e[t]()})}};function e(){if(!n){throw new Error("matchMedia not present, legacy browsers require a polyfill")}this.queries={};this.browserIsIncapable=!n("only all").matches}e.prototype={"register":function(t,e,i){var n=this.queries,r=i&&this.browserIsIncapable;if(!n[t]){n[t]=new l(t,r)}if(s(e)){e={"match":e}}if(!a(e)){e=[e]}o(e,function(e){n[t].addHandler(e)});return this},"unregister":function(e,t){var i=this.queries[e];if(i){if(t){i.removeHandler(t)}else{i.clear();delete this.queries[e]}}return this}};return new e});!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).leaflet={})}(this,function(e){"use strict";function u(e){for(var t,i,n=1,r=arguments.length;n<r;n++)for(t in i=arguments[n])e[t]=i[t];return e}var F=Object.create||function(e){return N.prototype=e,new N};function N(){}function s(e,t){var i,n=Array.prototype.slice;return e.bind?e.bind.apply(e,n.call(arguments,1)):(i=n.call(arguments,2),function(){return e.apply(t,i.length?i.concat(n.call(arguments)):arguments)})}var j=0;function l(e){return"_leaflet_id"in e||(e._leaflet_id=++j),e._leaflet_id}function U(e,t,i){var n,r,o=function(){n=!1,r&&(a.apply(i,r),r=!1)},a=function(){n?r=arguments:(e.apply(i,arguments),setTimeout(o,t),n=!0)};return a}function $(e,t,i){var n=t[1],t=t[0],r=n-t;return e===n&&i?e:((e-t)%r+r)%r+t}function c(){return!1}function i(e,t){return!1===t?e:(t=Math.pow(10,void 0===t?6:t),Math.round(e*t)/t)}function H(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function z(e){return H(e).split(/\s+/)}function d(e,t){for(var i in Object.prototype.hasOwnProperty.call(e,"options")||(e.options=e.options?F(e.options):{}),t)e.options[i]=t[i];return e.options}function W(e,t,i){var n,r=[];for(n in e)r.push(encodeURIComponent(i?n.toUpperCase():n)+"="+encodeURIComponent(e[n]));return(t&&-1!==t.indexOf("?")?"&":"?")+r.join("&")}var G=/\{ *([\w_ -]+) *\}/g;function V(e,i){return e.replace(G,function(e,t){t=i[t];if(void 0===t)throw new Error("No value provided for variable "+e);return t="function"==typeof t?t(i):t})}var h=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)};function q(e,t){for(var i=0;i<e.length;i++)if(e[i]===t)return i;return-1}var K="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function Z(e){return window["webkit"+e]||window["moz"+e]||window["ms"+e]}var X=0;function Y(e){var t=+new Date,i=Math.max(0,16-(t-X));return X=t+i,window.setTimeout(e,i)}var Q=window.requestAnimationFrame||Z("RequestAnimationFrame")||Y,J=window.cancelAnimationFrame||Z("CancelAnimationFrame")||Z("CancelRequestAnimationFrame")||function(e){window.clearTimeout(e)};function _(e,t,i){if(!i||Q!==Y)return Q.call(window,s(e,t));e.call(t)}function a(e){e&&J.call(window,e)}var ee={"__proto__":null,"extend":u,"create":F,"bind":s,get"lastId"(){return j},"stamp":l,"throttle":U,"wrapNum":$,"falseFn":c,"formatNum":i,"trim":H,"splitWords":z,"setOptions":d,"getParamString":W,"template":V,"isArray":h,"indexOf":q,"emptyImageUrl":K,"requestFn":Q,"cancelFn":J,"requestAnimFrame":_,"cancelAnimFrame":a};function te(){}te.extend=function(e){function t(){d(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()}var i,n=t.__super__=this.prototype,r=F(n);for(i in(r.constructor=t).prototype=r,this)Object.prototype.hasOwnProperty.call(this,i)&&"prototype"!==i&&"__super__"!==i&&(t[i]=this[i]);if(e.statics&&u(t,e.statics),e.includes){var o=e.includes;if("undefined"!=typeof L&&L&&L.Mixin){o=h(o)?o:[o];for(var a=0;a<o.length;a++)o[a]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",(new Error).stack)}u.apply(null,[r].concat(e.includes))}return u(r,e),delete r.statics,delete r.includes,r.options&&(r.options=n.options?F(n.options):{},u(r.options,e.options)),r._initHooks=[],r.callInitHooks=function(){if(!this._initHooksCalled){n.callInitHooks&&n.callInitHooks.call(this),this._initHooksCalled=!0;for(var e=0,t=r._initHooks.length;e<t;e++)r._initHooks[e].call(this)}},t},te.include=function(e){var t=this.prototype.options;return u(this.prototype,e),e.options&&(this.prototype.options=t,this.mergeOptions(e.options)),this},te.mergeOptions=function(e){return u(this.prototype.options,e),this},te.addInitHook=function(e){var t=Array.prototype.slice.call(arguments,1),i="function"==typeof e?e:function(){this[e].apply(this,t)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(i),this};var t={"on":function(e,t,i){if("object"==typeof e)for(var n in e)this._on(n,e[n],t);else for(var r=0,o=(e=z(e)).length;r<o;r++)this._on(e[r],t,i);return this},"off":function(e,t,i){if(arguments.length)if("object"==typeof e)for(var n in e)this._off(n,e[n],t);else{e=z(e);for(var r=1===arguments.length,o=0,a=e.length;o<a;o++)r?this._off(e[o]):this._off(e[o],t,i)}else delete this._events;return this},"_on":function(e,t,i,n){"function"!=typeof t?console.warn("wrong listener type: "+typeof t):!1===this._listens(e,t,i)&&(t={"fn":t,"ctx":i=i===this?void 0:i},n&&(t.once=!0),this._events=this._events||{},this._events[e]=this._events[e]||[],this._events[e].push(t))},"_off":function(e,t,i){var n,r,o;if(this._events&&(n=this._events[e]))if(1===arguments.length){if(this._firingCount)for(r=0,o=n.length;r<o;r++)n[r].fn=c;delete this._events[e]}else"function"!=typeof t?console.warn("wrong listener type: "+typeof t):!1!==(t=this._listens(e,t,i))&&(i=n[t],this._firingCount&&(i.fn=c,this._events[e]=n=n.slice()),n.splice(t,1))},"fire":function(e,t,i){if(this.listens(e,i)){var n=u({},t,{"type":e,"target":this,"sourceTarget":t&&t.sourceTarget||this});if(this._events){var r=this._events[e];if(r){this._firingCount=this._firingCount+1||1;for(var o=0,a=r.length;o<a;o++){var s=r[o],l=s.fn;s.once&&this.off(e,l,s.ctx),l.call(s.ctx||this,n)}this._firingCount--}}i&&this._propagateEvent(n)}return this},"listens":function(e,t,i,n){"string"!=typeof e&&console.warn('"string" type argument expected');var r=t,o=("function"!=typeof t&&(n=!!t,i=r=void 0),this._events&&this._events[e]);if(o&&o.length&&!1!==this._listens(e,r,i))return!0;if(n)for(var a in this._eventParents)if(this._eventParents[a].listens(e,t,i,n))return!0;return!1},"_listens":function(e,t,i){if(this._events){var n=this._events[e]||[];if(!t)return!!n.length;i===this&&(i=void 0);for(var r=0,o=n.length;r<o;r++)if(n[r].fn===t&&n[r].ctx===i)return r}return!1},"once":function(e,t,i){if("object"==typeof e)for(var n in e)this._on(n,e[n],t,!0);else for(var r=0,o=(e=z(e)).length;r<o;r++)this._on(e[r],t,i,!0);return this},"addEventParent":function(e){return this._eventParents=this._eventParents||{},this._eventParents[l(e)]=e,this},"removeEventParent":function(e){return this._eventParents&&delete this._eventParents[l(e)],this},"_propagateEvent":function(e){for(var t in this._eventParents)this._eventParents[t].fire(e.type,u({"layer":e.target,"propagatedFrom":e.target},e),!0)}},ie=(t.addEventListener=t.on,t.removeEventListener=t.clearAllEventListeners=t.off,t.addOneTimeEventListener=t.once,t.fireEvent=t.fire,t.hasEventListeners=t.listens,te.extend(t));function p(e,t,i){this.x=i?Math.round(e):e,this.y=i?Math.round(t):t}var ne=Math.trunc||function(e){return 0<e?Math.floor(e):Math.ceil(e)};function g(e,t,i){return e instanceof p?e:h(e)?new p(e[0],e[1]):null==e?e:"object"==typeof e&&"x"in e&&"y"in e?new p(e.x,e.y):new p(e,t,i)}function v(e,t){if(e)for(var i=t?[e,t]:e,n=0,r=i.length;n<r;n++)this.extend(i[n])}function f(e,t){return!e||e instanceof v?e:new v(e,t)}function o(e,t){if(e)for(var i=t?[e,t]:e,n=0,r=i.length;n<r;n++)this.extend(i[n])}function m(e,t){return e instanceof o?e:new o(e,t)}function y(e,t,i){if(isNaN(e)||isNaN(t))throw new Error("Invalid LatLng object: ("+e+", "+t+")");this.lat=+e,this.lng=+t,void 0!==i&&(this.alt=+i)}function w(e,t,i){return e instanceof y?e:h(e)&&"object"!=typeof e[0]?3===e.length?new y(e[0],e[1],e[2]):2===e.length?new y(e[0],e[1]):null:null==e?e:"object"==typeof e&&"lat"in e?new y(e.lat,"lng"in e?e.lng:e.lon,e.alt):void 0===t?null:new y(e,t,i)}p.prototype={"clone":function(){return new p(this.x,this.y)},"add":function(e){return this.clone()._add(g(e))},"_add":function(e){return this.x+=e.x,this.y+=e.y,this},"subtract":function(e){return this.clone()._subtract(g(e))},"_subtract":function(e){return this.x-=e.x,this.y-=e.y,this},"divideBy":function(e){return this.clone()._divideBy(e)},"_divideBy":function(e){return this.x/=e,this.y/=e,this},"multiplyBy":function(e){return this.clone()._multiplyBy(e)},"_multiplyBy":function(e){return this.x*=e,this.y*=e,this},"scaleBy":function(e){return new p(this.x*e.x,this.y*e.y)},"unscaleBy":function(e){return new p(this.x/e.x,this.y/e.y)},"round":function(){return this.clone()._round()},"_round":function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},"floor":function(){return this.clone()._floor()},"_floor":function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},"ceil":function(){return this.clone()._ceil()},"_ceil":function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},"trunc":function(){return this.clone()._trunc()},"_trunc":function(){return this.x=ne(this.x),this.y=ne(this.y),this},"distanceTo":function(e){var t=(e=g(e)).x-this.x,e=e.y-this.y;return Math.sqrt(t*t+e*e)},"equals":function(e){return(e=g(e)).x===this.x&&e.y===this.y},"contains":function(e){return e=g(e),Math.abs(e.x)<=Math.abs(this.x)&&Math.abs(e.y)<=Math.abs(this.y)},"toString":function(){return"Point("+i(this.x)+", "+i(this.y)+")"}},v.prototype={"extend":function(e){var t,i;if(e){if(e instanceof p||"number"==typeof e[0]||"x"in e)t=i=g(e);else if(t=(e=f(e)).min,i=e.max,!t||!i)return this;this.min||this.max?(this.min.x=Math.min(t.x,this.min.x),this.max.x=Math.max(i.x,this.max.x),this.min.y=Math.min(t.y,this.min.y),this.max.y=Math.max(i.y,this.max.y)):(this.min=t.clone(),this.max=i.clone())}return this},"getCenter":function(e){return g((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,e)},"getBottomLeft":function(){return g(this.min.x,this.max.y)},"getTopRight":function(){return g(this.max.x,this.min.y)},"getTopLeft":function(){return this.min},"getBottomRight":function(){return this.max},"getSize":function(){return this.max.subtract(this.min)},"contains":function(e){var t,i;return(e=("number"==typeof e[0]||e instanceof p?g:f)(e))instanceof v?(t=e.min,i=e.max):t=i=e,t.x>=this.min.x&&i.x<=this.max.x&&t.y>=this.min.y&&i.y<=this.max.y},"intersects":function(e){e=f(e);var t=this.min,i=this.max,n=e.min,e=e.max,r=e.x>=t.x&&n.x<=i.x,e=e.y>=t.y&&n.y<=i.y;return r&&e},"overlaps":function(e){e=f(e);var t=this.min,i=this.max,n=e.min,e=e.max,r=e.x>t.x&&n.x<i.x,e=e.y>t.y&&n.y<i.y;return r&&e},"isValid":function(){return!(!this.min||!this.max)},"pad":function(e){var t=this.min,i=this.max,n=Math.abs(t.x-i.x)*e,e=Math.abs(t.y-i.y)*e;return f(g(t.x-n,t.y-e),g(i.x+n,i.y+e))},"equals":function(e){return!!e&&(e=f(e),this.min.equals(e.getTopLeft())&&this.max.equals(e.getBottomRight()))}},o.prototype={"extend":function(e){var t,i,n=this._southWest,r=this._northEast;if(e instanceof y)i=t=e;else{if(!(e instanceof o))return e?this.extend(w(e)||m(e)):this;if(t=e._southWest,i=e._northEast,!t||!i)return this}return n||r?(n.lat=Math.min(t.lat,n.lat),n.lng=Math.min(t.lng,n.lng),r.lat=Math.max(i.lat,r.lat),r.lng=Math.max(i.lng,r.lng)):(this._southWest=new y(t.lat,t.lng),this._northEast=new y(i.lat,i.lng)),this},"pad":function(e){var t=this._southWest,i=this._northEast,n=Math.abs(t.lat-i.lat)*e,e=Math.abs(t.lng-i.lng)*e;return new o(new y(t.lat-n,t.lng-e),new y(i.lat+n,i.lng+e))},"getCenter":function(){return new y((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},"getSouthWest":function(){return this._southWest},"getNorthEast":function(){return this._northEast},"getNorthWest":function(){return new y(this.getNorth(),this.getWest())},"getSouthEast":function(){return new y(this.getSouth(),this.getEast())},"getWest":function(){return this._southWest.lng},"getSouth":function(){return this._southWest.lat},"getEast":function(){return this._northEast.lng},"getNorth":function(){return this._northEast.lat},"contains":function(e){e=("number"==typeof e[0]||e instanceof y||"lat"in e?w:m)(e);var t,i,n=this._southWest,r=this._northEast;return e instanceof o?(t=e.getSouthWest(),i=e.getNorthEast()):t=i=e,t.lat>=n.lat&&i.lat<=r.lat&&t.lng>=n.lng&&i.lng<=r.lng},"intersects":function(e){e=m(e);var t=this._southWest,i=this._northEast,n=e.getSouthWest(),e=e.getNorthEast(),r=e.lat>=t.lat&&n.lat<=i.lat,e=e.lng>=t.lng&&n.lng<=i.lng;return r&&e},"overlaps":function(e){e=m(e);var t=this._southWest,i=this._northEast,n=e.getSouthWest(),e=e.getNorthEast(),r=e.lat>t.lat&&n.lat<i.lat,e=e.lng>t.lng&&n.lng<i.lng;return r&&e},"toBBoxString":function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},"equals":function(e,t){return!!e&&(e=m(e),this._southWest.equals(e.getSouthWest(),t)&&this._northEast.equals(e.getNorthEast(),t))},"isValid":function(){return!(!this._southWest||!this._northEast)}};var re={"latLngToPoint":function(e,t){e=this.projection.project(e),t=this.scale(t);return this.transformation._transform(e,t)},"pointToLatLng":function(e,t){t=this.scale(t),e=this.transformation.untransform(e,t);return this.projection.unproject(e)},"project":function(e){return this.projection.project(e)},"unproject":function(e){return this.projection.unproject(e)},"scale":function(e){return 256*Math.pow(2,e)},"zoom":function(e){return Math.log(e/256)/Math.LN2},"getProjectedBounds":function(e){var t;return this.infinite?null:(t=this.projection.bounds,e=this.scale(e),new v(this.transformation.transform(t.min,e),this.transformation.transform(t.max,e)))},"infinite":!(y.prototype={"equals":function(e,t){return!!e&&(e=w(e),Math.max(Math.abs(this.lat-e.lat),Math.abs(this.lng-e.lng))<=(void 0===t?1e-9:t))},"toString":function(e){return"LatLng("+i(this.lat,e)+", "+i(this.lng,e)+")"},"distanceTo":function(e){return oe.distance(this,w(e))},"wrap":function(){return oe.wrapLatLng(this)},"toBounds":function(e){var e=180*e/40075017,t=e/Math.cos(Math.PI/180*this.lat);return m([this.lat-e,this.lng-t],[this.lat+e,this.lng+t])},"clone":function(){return new y(this.lat,this.lng,this.alt)}}),"wrapLatLng":function(e){var t=this.wrapLng?$(e.lng,this.wrapLng,!0):e.lng;return new y(this.wrapLat?$(e.lat,this.wrapLat,!0):e.lat,t,e.alt)},"wrapLatLngBounds":function(e){var t=e.getCenter(),i=this.wrapLatLng(t),n=t.lat-i.lat,t=t.lng-i.lng;return 0==n&&0==t?e:(i=e.getSouthWest(),e=e.getNorthEast(),new o(new y(i.lat-n,i.lng-t),new y(e.lat-n,e.lng-t)))}},oe=u({},re,{"wrapLng":[-180,180],"R":6371e3,"distance":function(e,t){var i=Math.PI/180,n=e.lat*i,r=t.lat*i,o=Math.sin((t.lat-e.lat)*i/2),t=Math.sin((t.lng-e.lng)*i/2),e=o*o+Math.cos(n)*Math.cos(r)*t*t,i=2*Math.atan2(Math.sqrt(e),Math.sqrt(1-e));return this.R*i}}),ae=6378137,ae={"R":ae,"MAX_LATITUDE":85.0511287798,"project":function(e){var t=Math.PI/180,i=this.MAX_LATITUDE,i=Math.max(Math.min(i,e.lat),-i),i=Math.sin(i*t);return new p(this.R*e.lng*t,this.R*Math.log((1+i)/(1-i))/2)},"unproject":function(e){var t=180/Math.PI;return new y((2*Math.atan(Math.exp(e.y/this.R))-Math.PI/2)*t,e.x*t/this.R)},"bounds":new v([-(ae=ae*Math.PI),-ae],[ae,ae])};function se(e,t,i,n){h(e)?(this._a=e[0],this._b=e[1],this._c=e[2],this._d=e[3]):(this._a=e,this._b=t,this._c=i,this._d=n)}function le(e,t,i,n){return new se(e,t,i,n)}se.prototype={"transform":function(e,t){return this._transform(e.clone(),t)},"_transform":function(e,t){return e.x=(t=t||1)*(this._a*e.x+this._b),e.y=t*(this._c*e.y+this._d),e},"untransform":function(e,t){return new p((e.x/(t=t||1)-this._b)/this._a,(e.y/t-this._d)/this._c)}};var ue=u({},oe,{"code":"EPSG:3857","projection":ae,"transformation":le(ue=.5/(Math.PI*ae.R),.5,-ue,.5)}),ce=u({},ue,{"code":"EPSG:900913"});function de(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function he(e,t){for(var i,n,r,o,a="",s=0,l=e.length;s<l;s++){for(i=0,n=(r=e[s]).length;i<n;i++)a+=(i?"L":"M")+(o=r[i]).x+" "+o.y;a+=t?E.svg?"z":"x":""}return a||"M0 0"}var fe=document.documentElement.style,pe="ActiveXObject"in window,ge=pe&&!document.addEventListener,n="msLaunchUri"in navigator&&!("documentMode"in document),ve=b("webkit"),me=b("android"),ye=b("android 2")||b("android 3"),be=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),be=me&&b("Google")&&be<537&&!("AudioNode"in window),_e=!!window.opera,we=!n&&b("chrome"),Ee=b("gecko")&&!ve&&!_e&&!pe,xe=!we&&b("safari"),Te=b("phantom"),r="OTransition"in fe,Se=0===navigator.platform.indexOf("Win"),ke=pe&&"transition"in fe,Re="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!ye,fe="MozPerspective"in fe,Ce=!window.L_DISABLE_3D&&(ke||Re||fe)&&!r&&!Te,Ae="undefined"!=typeof orientation||b("mobile"),Oe=Ae&&ve,Le=Ae&&Re,Pe=!window.PointerEvent&&window.MSPointerEvent,Ie=!(!window.PointerEvent&&!Pe),De="ontouchstart"in window||!!window.TouchEvent,Me=!window.L_NO_TOUCH&&(De||Ie),Be=Ae&&_e,Fe=Ae&&Ee,Ne=1<(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI),je=function(){var e=!1;try{var t=Object.defineProperty({},"passive",{"get":function(){e=!0}});window.addEventListener("testPassiveEventSupport",c,t),window.removeEventListener("testPassiveEventSupport",c,t)}catch(e){}return e}(),Ue=!!document.createElement("canvas").getContext,$e=!(!document.createElementNS||!de("svg").createSVGRect),He=!!$e&&((He=document.createElement("div")).innerHTML="<svg/>","http://www.w3.org/2000/svg"===(He.firstChild&&He.firstChild.namespaceURI));function b(e){return 0<=navigator.userAgent.toLowerCase().indexOf(e)}var E={"ie":pe,"ielt9":ge,"edge":n,"webkit":ve,"android":me,"android23":ye,"androidStock":be,"opera":_e,"chrome":we,"gecko":Ee,"safari":xe,"phantom":Te,"opera12":r,"win":Se,"ie3d":ke,"webkit3d":Re,"gecko3d":fe,"any3d":Ce,"mobile":Ae,"mobileWebkit":Oe,"mobileWebkit3d":Le,"msPointer":Pe,"pointer":Ie,"touch":Me,"touchNative":De,"mobileOpera":Be,"mobileGecko":Fe,"retina":Ne,"passiveEvents":je,"canvas":Ue,"svg":$e,"vml":!$e&&function(){try{var e=document.createElement("div"),t=(e.innerHTML='<v:shape adj="1"/>',e.firstChild);return t.style.behavior="url(#default#VML)",t&&"object"==typeof t.adj}catch(e){return!1}}(),"inlineSvg":He,"mac":0===navigator.platform.indexOf("Mac"),"linux":0===navigator.platform.indexOf("Linux")},ze=E.msPointer?"MSPointerDown":"pointerdown",We=E.msPointer?"MSPointerMove":"pointermove",Ge=E.msPointer?"MSPointerUp":"pointerup",Ve=E.msPointer?"MSPointerCancel":"pointercancel",qe={"touchstart":ze,"touchmove":We,"touchend":Ge,"touchcancel":Ve},Ke={"touchstart":function(e,t){t.MSPOINTER_TYPE_TOUCH&&t.pointerType===t.MSPOINTER_TYPE_TOUCH&&I(t);tt(e,t)},"touchmove":tt,"touchend":tt,"touchcancel":tt},Ze={},Xe=!1;function Ye(e,t,i){return"touchstart"!==t||Xe||(document.addEventListener(ze,Qe,!0),document.addEventListener(We,Je,!0),document.addEventListener(Ge,et,!0),document.addEventListener(Ve,et,!0),Xe=!0),Ke[t]?(i=Ke[t].bind(this,i),e.addEventListener(qe[t],i,!1),i):(console.warn("wrong event specified:",t),c)}function Qe(e){Ze[e.pointerId]=e}function Je(e){Ze[e.pointerId]&&(Ze[e.pointerId]=e)}function et(e){delete Ze[e.pointerId]}function tt(e,t){if(t.pointerType!==(t.MSPOINTER_TYPE_MOUSE||"mouse")){for(var i in t.touches=[],Ze)t.touches.push(Ze[i]);t.changedTouches=[t],e(t)}}var it=200;function nt(e,i){e.addEventListener("dblclick",i);var n,r=0;function t(e){var t;1!==e.detail?n=e.detail:"mouse"===e.pointerType||e.sourceCapabilities&&!e.sourceCapabilities.firesTouchEvents||((t=Nt(e)).some(function(e){return e instanceof HTMLLabelElement&&e.attributes.for})&&!t.some(function(e){return e instanceof HTMLInputElement||e instanceof HTMLSelectElement})||((t=Date.now())-r<=it?2===++n&&i(function(e){var t,i,n={};for(i in e)t=e[i],n[i]=t&&t.bind?t.bind(e):t;return(e=n).type="dblclick",n.detail=2,n.isTrusted=!1,n._simulated=!0,n}(e)):n=1,r=t))}return e.addEventListener("click",t),{"dblclick":i,"simDblclick":t}}var rt,ot,at,st,lt,ut,ct=wt(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),dt=wt(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),ht="webkitTransition"===dt||"OTransition"===dt?dt+"End":"transitionend";function ft(e){return"string"==typeof e?document.getElementById(e):e}function pt(e,t){var i=e.style[t]||e.currentStyle&&e.currentStyle[t];return"auto"===(i=i&&"auto"!==i||!document.defaultView?i:(e=document.defaultView.getComputedStyle(e,null))?e[t]:null)?null:i}function x(e,t,i){e=document.createElement(e);return e.className=t||"",i&&i.appendChild(e),e}function T(e){var t=e.parentNode;t&&t.removeChild(e)}function gt(e){for(;e.firstChild;)e.removeChild(e.firstChild)}function vt(e){var t=e.parentNode;t&&t.lastChild!==e&&t.appendChild(e)}function mt(e){var t=e.parentNode;t&&t.firstChild!==e&&t.insertBefore(e,t.firstChild)}function yt(e,t){return void 0!==e.classList?e.classList.contains(t):0<(e=_t(e)).length&&new RegExp("(^|\\s)"+t+"(\\s|$)").test(e)}function S(e,t){var i;if(void 0!==e.classList)for(var n=z(t),r=0,o=n.length;r<o;r++)e.classList.add(n[r]);else yt(e,t)||bt(e,((i=_t(e))?i+" ":"")+t)}function k(e,t){void 0!==e.classList?e.classList.remove(t):bt(e,H((" "+_t(e)+" ").replace(" "+t+" "," ")))}function bt(e,t){void 0===e.className.baseVal?e.className=t:e.className.baseVal=t}function _t(e){return void 0===(e=e.correspondingElement?e.correspondingElement:e).className.baseVal?e.className:e.className.baseVal}function R(e,t){if("opacity"in e.style)e.style.opacity=t;else if("filter"in e.style){var i=!1,n="DXImageTransform.Microsoft.Alpha";try{i=e.filters.item(n)}catch(e){if(1===t)return}t=Math.round(100*t),i?(i.Enabled=100!==t,i.Opacity=t):e.style.filter+=" progid:"+n+"(opacity="+t+")"}}function wt(e){for(var t=document.documentElement.style,i=0;i<e.length;i++)if(e[i]in t)return e[i];return!1}function Et(e,t,i){t=t||new p(0,0);e.style[ct]=(E.ie3d?"translate("+t.x+"px,"+t.y+"px)":"translate3d("+t.x+"px,"+t.y+"px,0)")+(i?" scale("+i+")":"")}function C(e,t){e._leaflet_pos=t,E.any3d?Et(e,t):(e.style.left=t.x+"px",e.style.top=t.y+"px")}function xt(e){return e._leaflet_pos||new p(0,0)}function Tt(){A(window,"dragstart",I)}function St(){P(window,"dragstart",I)}function kt(e){for(;-1===e.tabIndex;)e=e.parentNode;e.style&&(Rt(),ut=(lt=e).style.outlineStyle,e.style.outlineStyle="none",A(window,"keydown",Rt))}function Rt(){lt&&(lt.style.outlineStyle=ut,ut=lt=void 0,P(window,"keydown",Rt))}function Ct(e){for(;!((e=e.parentNode).offsetWidth&&e.offsetHeight||e===document.body););return e}function At(e){var t=e.getBoundingClientRect();return{"x":t.width/e.offsetWidth||1,"y":t.height/e.offsetHeight||1,"boundingClientRect":t}}st="onselectstart"in document?(at=function(){A(window,"selectstart",I)},function(){P(window,"selectstart",I)}):(ot=wt(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]),at=function(){var e;ot&&(e=document.documentElement.style,rt=e[ot],e[ot]="none")},function(){ot&&(document.documentElement.style[ot]=rt,rt=void 0)});pe={"__proto__":null,"TRANSFORM":ct,"TRANSITION":dt,"TRANSITION_END":ht,"get":ft,"getStyle":pt,"create":x,"remove":T,"empty":gt,"toFront":vt,"toBack":mt,"hasClass":yt,"addClass":S,"removeClass":k,"setClass":bt,"getClass":_t,"setOpacity":R,"testProp":wt,"setTransform":Et,"setPosition":C,"getPosition":xt,get"disableTextSelection"(){return at},get"enableTextSelection"(){return st},"disableImageDrag":Tt,"enableImageDrag":St,"preventOutline":kt,"restoreOutline":Rt,"getSizedParentNode":Ct,"getScale":At};function A(e,t,i,n){if(t&&"object"==typeof t)for(var r in t)Pt(e,r,t[r],i);else for(var o=0,a=(t=z(t)).length;o<a;o++)Pt(e,t[o],i,n);return this}var O="_leaflet_events";function P(e,t,i,n){if(1===arguments.length)Ot(e),delete e[O];else if(t&&"object"==typeof t)for(var r in t)It(e,r,t[r],i);else if(t=z(t),2===arguments.length)Ot(e,function(e){return-1!==q(t,e)});else for(var o=0,a=t.length;o<a;o++)It(e,t[o],i,n);return this}function Ot(e,t){for(var i in e[O]){var n=i.split(/\d/)[0];t&&!t(n)||It(e,n,null,null,i)}}var Lt={"mouseenter":"mouseover","mouseleave":"mouseout","wheel":!("onwheel"in window)&&"mousewheel"};function Pt(t,e,i,n){var r,o,a=e+l(i)+(n?"_"+l(n):"");t[O]&&t[O][a]||(o=r=function(e){return i.call(n||t,e||window.event)},!E.touchNative&&E.pointer&&0===e.indexOf("touch")?r=Ye(t,e,r):E.touch&&"dblclick"===e?r=nt(t,r):"addEventListener"in t?"touchstart"===e||"touchmove"===e||"wheel"===e||"mousewheel"===e?t.addEventListener(Lt[e]||e,r,!!E.passiveEvents&&{"passive":!1}):"mouseenter"===e||"mouseleave"===e?t.addEventListener(Lt[e],r=function(e){e=e||window.event,Ht(t,e)&&o(e)},!1):t.addEventListener(e,o,!1):t.attachEvent("on"+e,r),t[O]=t[O]||{},t[O][a]=r)}function It(e,t,i,n,r){r=r||t+l(i)+(n?"_"+l(n):"");var o,a,i=e[O]&&e[O][r];i&&(!E.touchNative&&E.pointer&&0===t.indexOf("touch")?(n=e,a=i,qe[o=t]?n.removeEventListener(qe[o],a,!1):console.warn("wrong event specified:",o)):E.touch&&"dblclick"===t?(n=i,(a=e).removeEventListener("dblclick",n.dblclick),a.removeEventListener("click",n.simDblclick)):"removeEventListener"in e?e.removeEventListener(Lt[t]||t,i,!1):e.detachEvent("on"+t,i),e[O][r]=null)}function Dt(e){return e.stopPropagation?e.stopPropagation():e.originalEvent?e.originalEvent._stopped=!0:e.cancelBubble=!0,this}function Mt(e){return Pt(e,"wheel",Dt),this}function Bt(e){return A(e,"mousedown touchstart dblclick contextmenu",Dt),e._leaflet_disable_click=!0,this}function I(e){return e.preventDefault?e.preventDefault():e.returnValue=!1,this}function Ft(e){return I(e),Dt(e),this}function Nt(e){if(e.composedPath)return e.composedPath();for(var t=[],i=e.target;i;)t.push(i),i=i.parentNode;return t}function jt(e,t){var i,n;return t?(n=(i=At(t)).boundingClientRect,new p((e.clientX-n.left)/i.x-t.clientLeft,(e.clientY-n.top)/i.y-t.clientTop)):new p(e.clientX,e.clientY)}var Ut=E.linux&&E.chrome?window.devicePixelRatio:E.mac?3*window.devicePixelRatio:0<window.devicePixelRatio?2*window.devicePixelRatio:1;function $t(e){return E.edge?e.wheelDeltaY/2:e.deltaY&&0===e.deltaMode?-e.deltaY/Ut:e.deltaY&&1===e.deltaMode?20*-e.deltaY:e.deltaY&&2===e.deltaMode?60*-e.deltaY:e.deltaX||e.deltaZ?0:e.wheelDelta?(e.wheelDeltaY||e.wheelDelta)/2:e.detail&&Math.abs(e.detail)<32765?20*-e.detail:e.detail?e.detail/-32765*60:0}function Ht(e,t){var i=t.relatedTarget;if(!i)return!0;try{for(;i&&i!==e;)i=i.parentNode}catch(e){return!1}return i!==e}var ge={"__proto__":null,"on":A,"off":P,"stopPropagation":Dt,"disableScrollPropagation":Mt,"disableClickPropagation":Bt,"preventDefault":I,"stop":Ft,"getPropagationPath":Nt,"getMousePosition":jt,"getWheelDelta":$t,"isExternalTarget":Ht,"addListener":A,"removeListener":P},zt=ie.extend({"run":function(e,t,i,n){this.stop(),this._el=e,this._inProgress=!0,this._duration=i||.25,this._easeOutPower=1/Math.max(n||.5,.2),this._startPos=xt(e),this._offset=t.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},"stop":function(){this._inProgress&&(this._step(!0),this._complete())},"_animate":function(){this._animId=_(this._animate,this),this._step()},"_step":function(e){var t=+new Date-this._startTime,i=1e3*this._duration;t<i?this._runFrame(this._easeOut(t/i),e):(this._runFrame(1),this._complete())},"_runFrame":function(e,t){e=this._startPos.add(this._offset.multiplyBy(e));t&&e._round(),C(this._el,e),this.fire("step")},"_complete":function(){a(this._animId),this._inProgress=!1,this.fire("end")},"_easeOut":function(e){return 1-Math.pow(1-e,this._easeOutPower)}}),D=ie.extend({"options":{"crs":ue,"center":void 0,"zoom":void 0,"minZoom":void 0,"maxZoom":void 0,"layers":[],"maxBounds":void 0,"renderer":void 0,"zoomAnimation":!0,"zoomAnimationThreshold":4,"fadeAnimation":!0,"markerZoomAnimation":!0,"transform3DLimit":8388608,"zoomSnap":1,"zoomDelta":1,"trackResize":!0},"initialize":function(e,t){t=d(this,t),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(e),this._initLayout(),this._onResize=s(this._onResize,this),this._initEvents(),t.maxBounds&&this.setMaxBounds(t.maxBounds),void 0!==t.zoom&&(this._zoom=this._limitZoom(t.zoom)),t.center&&void 0!==t.zoom&&this.setView(w(t.center),t.zoom,{"reset":!0}),this.callInitHooks(),this._zoomAnimated=dt&&E.any3d&&!E.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),A(this._proxy,ht,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},"setView":function(e,t,i){if((t=void 0===t?this._zoom:this._limitZoom(t),e=this._limitCenter(w(e),t,this.options.maxBounds),i=i||{},this._stop(),this._loaded&&!i.reset&&!0!==i)&&(void 0!==i.animate&&(i.zoom=u({"animate":i.animate},i.zoom),i.pan=u({"animate":i.animate,"duration":i.duration},i.pan)),this._zoom!==t?this._tryAnimatedZoom&&this._tryAnimatedZoom(e,t,i.zoom):this._tryAnimatedPan(e,i.pan)))return clearTimeout(this._sizeTimer),this;return this._resetView(e,t,i.pan&&i.pan.noMoveStart),this},"setZoom":function(e,t){return this._loaded?this.setView(this.getCenter(),e,{"zoom":t}):(this._zoom=e,this)},"zoomIn":function(e,t){return e=e||(E.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+e,t)},"zoomOut":function(e,t){return e=e||(E.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-e,t)},"setZoomAround":function(e,t,i){var n=this.getZoomScale(t),r=this.getSize().divideBy(2),e=(e instanceof p?e:this.latLngToContainerPoint(e)).subtract(r).multiplyBy(1-1/n),n=this.containerPointToLatLng(r.add(e));return this.setView(n,t,{"zoom":i})},"_getBoundsCenterZoom":function(e,t){t=t||{},e=e.getBounds?e.getBounds():m(e);var i=g(t.paddingTopLeft||t.padding||[0,0]),n=g(t.paddingBottomRight||t.padding||[0,0]),r=this.getBoundsZoom(e,!1,i.add(n));return(r="number"==typeof t.maxZoom?Math.min(t.maxZoom,r):r)===1/0?{"center":e.getCenter(),"zoom":r}:(t=n.subtract(i).divideBy(2),n=this.project(e.getSouthWest(),r),i=this.project(e.getNorthEast(),r),{"center":this.unproject(n.add(i).divideBy(2).add(t),r),"zoom":r})},"fitBounds":function(e,t){if((e=m(e)).isValid())return e=this._getBoundsCenterZoom(e,t),this.setView(e.center,e.zoom,t);throw new Error("Bounds are not valid.")},"fitWorld":function(e){return this.fitBounds([[-90,-180],[90,180]],e)},"panTo":function(e,t){return this.setView(e,this._zoom,{"pan":t})},"panBy":function(e,t){var i;return t=t||{},(e=g(e).round()).x||e.y?(!0===t.animate||this.getSize().contains(e)?(this._panAnim||(this._panAnim=new zt,this._panAnim.on({"step":this._onPanTransitionStep,"end":this._onPanTransitionEnd},this)),t.noMoveStart||this.fire("movestart"),!1!==t.animate?(S(this._mapPane,"leaflet-pan-anim"),i=this._getMapPanePos().subtract(e).round(),this._panAnim.run(this._mapPane,i,t.duration||.25,t.easeLinearity)):(this._rawPanBy(e),this.fire("move").fire("moveend"))):this._resetView(this.unproject(this.project(this.getCenter()).add(e)),this.getZoom()),this):this.fire("moveend")},"flyTo":function(n,r,e){if(!1===(e=e||{}).animate||!E.any3d)return this.setView(n,r,e);this._stop();var o=this.project(this.getCenter()),a=this.project(n),t=this.getSize(),s=this._zoom,l=(n=w(n),r=void 0===r?s:r,Math.max(t.x,t.y)),i=l*this.getZoomScale(s,r),u=a.distanceTo(o)||1,c=1.42,d=c*c;function h(e){e=(i*i-l*l+(e?-1:1)*d*d*u*u)/(2*(e?i:l)*d*u),e=Math.sqrt(e*e+1)-e;return e<1e-9?-18:Math.log(e)}function f(e){return(Math.exp(e)-Math.exp(-e))/2}function p(e){return(Math.exp(e)+Math.exp(-e))/2}var g=h(0);function v(e){return l*(p(g)*(f(e=g+c*e)/p(e))-f(g))/d}var m=Date.now(),y=(h(1)-g)/c,b=e.duration?1e3*e.duration:1e3*y*.8;return this._moveStart(!0,e.noMoveStart),function e(){var t=(Date.now()-m)/b,i=(1-Math.pow(1-t,1.5))*y;t<=1?(this._flyToFrame=_(e,this),this._move(this.unproject(o.add(a.subtract(o).multiplyBy(v(i)/u)),s),this.getScaleZoom(l/(t=i,l*(p(g)/p(g+c*t))),s),{"flyTo":!0})):this._move(n,r)._moveEnd(!0)}.call(this),this},"flyToBounds":function(e,t){e=this._getBoundsCenterZoom(e,t);return this.flyTo(e.center,e.zoom,t)},"setMaxBounds":function(e){return e=m(e),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),e.isValid()?(this.options.maxBounds=e,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},"setMinZoom":function(e){var t=this.options.minZoom;return this.options.minZoom=e,this._loaded&&t!==e&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(e):this},"setMaxZoom":function(e){var t=this.options.maxZoom;return this.options.maxZoom=e,this._loaded&&t!==e&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(e):this},"panInsideBounds":function(e,t){this._enforcingBounds=!0;var i=this.getCenter(),e=this._limitCenter(i,this._zoom,m(e));return i.equals(e)||this.panTo(e,t),this._enforcingBounds=!1,this},"panInside":function(e,t){var i=g((t=t||{}).paddingTopLeft||t.padding||[0,0]),n=g(t.paddingBottomRight||t.padding||[0,0]),r=this.project(this.getCenter()),e=this.project(e),o=this.getPixelBounds(),i=f([o.min.add(i),o.max.subtract(n)]),o=i.getSize();return i.contains(e)||(this._enforcingBounds=!0,n=e.subtract(i.getCenter()),i=i.extend(e).getSize().subtract(o),r.x+=n.x<0?-i.x:i.x,r.y+=n.y<0?-i.y:i.y,this.panTo(this.unproject(r),t),this._enforcingBounds=!1),this},"invalidateSize":function(e){if(!this._loaded)return this;e=u({"animate":!1,"pan":!0},!0===e?{"animate":!0}:e);var t=this.getSize(),i=(this._sizeChanged=!0,this._lastCenter=null,this.getSize()),n=t.divideBy(2).round(),r=i.divideBy(2).round(),n=n.subtract(r);return n.x||n.y?(e.animate&&e.pan?this.panBy(n):(e.pan&&this._rawPanBy(n),this.fire("move"),e.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(s(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{"oldSize":t,"newSize":i})):this},"stop":function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},"locate":function(e){var t,i;return e=this._locateOptions=u({"timeout":1e4,"watch":!1},e),"geolocation"in navigator?(t=s(this._handleGeolocationResponse,this),i=s(this._handleGeolocationError,this),e.watch?this._locationWatchId=navigator.geolocation.watchPosition(t,i,e):navigator.geolocation.getCurrentPosition(t,i,e)):this._handleGeolocationError({"code":0,"message":"Geolocation not supported."}),this},"stopLocate":function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},"_handleGeolocationError":function(e){var t;this._container._leaflet_id&&(t=e.code,e=e.message||(1===t?"permission denied":2===t?"position unavailable":"timeout"),this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{"code":t,"message":"Geolocation error: "+e+"."}))},"_handleGeolocationResponse":function(e){if(this._container._leaflet_id){var t,i,n=new y(e.coords.latitude,e.coords.longitude),r=n.toBounds(2*e.coords.accuracy),o=this._locateOptions,a=(o.setView&&(t=this.getBoundsZoom(r),this.setView(n,o.maxZoom?Math.min(t,o.maxZoom):t)),{"latlng":n,"bounds":r,"timestamp":e.timestamp});for(i in e.coords)"number"==typeof e.coords[i]&&(a[i]=e.coords[i]);this.fire("locationfound",a)}},"addHandler":function(e,t){return t&&(t=this[e]=new t(this),this._handlers.push(t),this.options[e]&&t.enable()),this},"remove":function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch(e){this._container._leaflet_id=void 0,this._containerId=void 0}for(var e in void 0!==this._locationWatchId&&this.stopLocate(),this._stop(),T(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(a(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload"),this._layers)this._layers[e].remove();for(e in this._panes)T(this._panes[e]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},"createPane":function(e,t){t=x("div","leaflet-pane"+(e?" leaflet-"+e.replace("Pane","")+"-pane":""),t||this._mapPane);return e&&(this._panes[e]=t),t},"getCenter":function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},"getZoom":function(){return this._zoom},"getBounds":function(){var e=this.getPixelBounds();return new o(this.unproject(e.getBottomLeft()),this.unproject(e.getTopRight()))},"getMinZoom":function(){return void 0===this.options.minZoom?this._layersMinZoom||0:this.options.minZoom},"getMaxZoom":function(){return void 0===this.options.maxZoom?void 0===this._layersMaxZoom?1/0:this._layersMaxZoom:this.options.maxZoom},"getBoundsZoom":function(e,t,i){e=m(e),i=g(i||[0,0]);var n=this.getZoom()||0,r=this.getMinZoom(),o=this.getMaxZoom(),a=e.getNorthWest(),e=e.getSouthEast(),i=this.getSize().subtract(i),e=f(this.project(e,n),this.project(a,n)).getSize(),a=E.any3d?this.options.zoomSnap:1,s=i.x/e.x,i=i.y/e.y,e=t?Math.max(s,i):Math.min(s,i),n=this.getScaleZoom(e,n);return a&&(n=Math.round(n/(a/100))*(a/100),n=t?Math.ceil(n/a)*a:Math.floor(n/a)*a),Math.max(r,Math.min(o,n))},"getSize":function(){return this._size&&!this._sizeChanged||(this._size=new p(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},"getPixelBounds":function(e,t){e=this._getTopLeftPoint(e,t);return new v(e,e.add(this.getSize()))},"getPixelOrigin":function(){return this._checkIfLoaded(),this._pixelOrigin},"getPixelWorldBounds":function(e){return this.options.crs.getProjectedBounds(void 0===e?this.getZoom():e)},"getPane":function(e){return"string"==typeof e?this._panes[e]:e},"getPanes":function(){return this._panes},"getContainer":function(){return this._container},"getZoomScale":function(e,t){var i=this.options.crs;return t=void 0===t?this._zoom:t,i.scale(e)/i.scale(t)},"getScaleZoom":function(e,t){var i=this.options.crs,e=(t=void 0===t?this._zoom:t,i.zoom(e*i.scale(t)));return isNaN(e)?1/0:e},"project":function(e,t){return t=void 0===t?this._zoom:t,this.options.crs.latLngToPoint(w(e),t)},"unproject":function(e,t){return t=void 0===t?this._zoom:t,this.options.crs.pointToLatLng(g(e),t)},"layerPointToLatLng":function(e){e=g(e).add(this.getPixelOrigin());return this.unproject(e)},"latLngToLayerPoint":function(e){return this.project(w(e))._round()._subtract(this.getPixelOrigin())},"wrapLatLng":function(e){return this.options.crs.wrapLatLng(w(e))},"wrapLatLngBounds":function(e){return this.options.crs.wrapLatLngBounds(m(e))},"distance":function(e,t){return this.options.crs.distance(w(e),w(t))},"containerPointToLayerPoint":function(e){return g(e).subtract(this._getMapPanePos())},"layerPointToContainerPoint":function(e){return g(e).add(this._getMapPanePos())},"containerPointToLatLng":function(e){e=this.containerPointToLayerPoint(g(e));return this.layerPointToLatLng(e)},"latLngToContainerPoint":function(e){return this.layerPointToContainerPoint(this.latLngToLayerPoint(w(e)))},"mouseEventToContainerPoint":function(e){return jt(e,this._container)},"mouseEventToLayerPoint":function(e){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(e))},"mouseEventToLatLng":function(e){return this.layerPointToLatLng(this.mouseEventToLayerPoint(e))},"_initContainer":function(e){e=this._container=ft(e);if(!e)throw new Error("Map container not found.");if(e._leaflet_id)throw new Error("Map container is already initialized.");A(e,"scroll",this._onScroll,this),this._containerId=l(e)},"_initLayout":function(){var e=this._container,t=(this._fadeAnimated=this.options.fadeAnimation&&E.any3d,S(e,"leaflet-container"+(E.touch?" leaflet-touch":"")+(E.retina?" leaflet-retina":"")+(E.ielt9?" leaflet-oldie":"")+(E.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":"")),pt(e,"position"));"absolute"!==t&&"relative"!==t&&"fixed"!==t&&"sticky"!==t&&(e.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},"_initPanes":function(){var e=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),C(this._mapPane,new p(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(S(e.markerPane,"leaflet-zoom-hide"),S(e.shadowPane,"leaflet-zoom-hide"))},"_resetView":function(e,t,i){C(this._mapPane,new p(0,0));var n=!this._loaded,r=(this._loaded=!0,t=this._limitZoom(t),this.fire("viewprereset"),this._zoom!==t);this._moveStart(r,i)._move(e,t)._moveEnd(r),this.fire("viewreset"),n&&this.fire("load")},"_moveStart":function(e,t){return e&&this.fire("zoomstart"),t||this.fire("movestart"),this},"_move":function(e,t,i,n){void 0===t&&(t=this._zoom);var r=this._zoom!==t;return this._zoom=t,this._lastCenter=e,this._pixelOrigin=this._getNewPixelOrigin(e),n?i&&i.pinch&&this.fire("zoom",i):((r||i&&i.pinch)&&this.fire("zoom",i),this.fire("move",i)),this},"_moveEnd":function(e){return e&&this.fire("zoomend"),this.fire("moveend")},"_stop":function(){return a(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},"_rawPanBy":function(e){C(this._mapPane,this._getMapPanePos().subtract(e))},"_getZoomSpan":function(){return this.getMaxZoom()-this.getMinZoom()},"_panInsideMaxBounds":function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},"_checkIfLoaded":function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},"_initEvents":function(e){this._targets={};var t=e?P:A;t((this._targets[l(this._container)]=this)._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&t(window,"resize",this._onResize,this),E.any3d&&this.options.transform3DLimit&&(e?this.off:this.on).call(this,"moveend",this._onMoveEnd)},"_onResize":function(){a(this._resizeRequest),this._resizeRequest=_(function(){this.invalidateSize({"debounceMoveend":!0})},this)},"_onScroll":function(){this._container.scrollTop=0,this._container.scrollLeft=0},"_onMoveEnd":function(){var e=this._getMapPanePos();Math.max(Math.abs(e.x),Math.abs(e.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},"_findEventTargets":function(e,t){for(var i,n=[],r="mouseout"===t||"mouseover"===t,o=e.target||e.srcElement,a=!1;o;){if((i=this._targets[l(o)])&&("click"===t||"preclick"===t)&&this._draggableMoved(i)){a=!0;break}if(i&&i.listens(t,!0)){if(r&&!Ht(o,e))break;if(n.push(i),r)break}if(o===this._container)break;o=o.parentNode}return n=n.length||a||r||!this.listens(t,!0)?n:[this]},"_isClickDisabled":function(e){for(;e&&e!==this._container;){if(e._leaflet_disable_click)return!0;e=e.parentNode}},"_handleDOMEvent":function(e){var t,i=e.target||e.srcElement;!this._loaded||i._leaflet_disable_events||"click"===e.type&&this._isClickDisabled(i)||("mousedown"===(t=e.type)&&kt(i),this._fireDOMEvent(e,t))},"_mouseEvents":["click","dblclick","mouseover","mouseout","contextmenu"],"_fireDOMEvent":function(e,t,i){"click"===e.type&&((s=u({},e)).type="preclick",this._fireDOMEvent(s,s.type,i));var n=this._findEventTargets(e,t);if(i){for(var r=[],o=0;o<i.length;o++)i[o].listens(t,!0)&&r.push(i[o]);n=r.concat(n)}if(n.length){"contextmenu"===t&&I(e);var a,s=n[0],l={"originalEvent":e};for("keypress"!==e.type&&"keydown"!==e.type&&"keyup"!==e.type&&(a=s.getLatLng&&(!s._radius||s._radius<=10),l.containerPoint=a?this.latLngToContainerPoint(s.getLatLng()):this.mouseEventToContainerPoint(e),l.layerPoint=this.containerPointToLayerPoint(l.containerPoint),l.latlng=a?s.getLatLng():this.layerPointToLatLng(l.layerPoint)),o=0;o<n.length;o++)if(n[o].fire(t,l,!0),l.originalEvent._stopped||!1===n[o].options.bubblingMouseEvents&&-1!==q(this._mouseEvents,t))return}},"_draggableMoved":function(e){return(e=e.dragging&&e.dragging.enabled()?e:this).dragging&&e.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},"_clearHandlers":function(){for(var e=0,t=this._handlers.length;e<t;e++)this._handlers[e].disable()},"whenReady":function(e,t){return this._loaded?e.call(t||this,{"target":this}):this.on("load",e,t),this},"_getMapPanePos":function(){return xt(this._mapPane)||new p(0,0)},"_moved":function(){var e=this._getMapPanePos();return e&&!e.equals([0,0])},"_getTopLeftPoint":function(e,t){return(e&&void 0!==t?this._getNewPixelOrigin(e,t):this.getPixelOrigin()).subtract(this._getMapPanePos())},"_getNewPixelOrigin":function(e,t){var i=this.getSize()._divideBy(2);return this.project(e,t)._subtract(i)._add(this._getMapPanePos())._round()},"_latLngToNewLayerPoint":function(e,t,i){i=this._getNewPixelOrigin(i,t);return this.project(e,t)._subtract(i)},"_latLngBoundsToNewLayerBounds":function(e,t,i){i=this._getNewPixelOrigin(i,t);return f([this.project(e.getSouthWest(),t)._subtract(i),this.project(e.getNorthWest(),t)._subtract(i),this.project(e.getSouthEast(),t)._subtract(i),this.project(e.getNorthEast(),t)._subtract(i)])},"_getCenterLayerPoint":function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},"_getCenterOffset":function(e){return this.latLngToLayerPoint(e).subtract(this._getCenterLayerPoint())},"_limitCenter":function(e,t,i){var n,r;return!i||(n=this.project(e,t),r=this.getSize().divideBy(2),r=new v(n.subtract(r),n.add(r)),r=this._getBoundsOffset(r,i,t),Math.abs(r.x)<=1&&Math.abs(r.y)<=1)?e:this.unproject(n.add(r),t)},"_limitOffset":function(e,t){var i;return t?(i=new v((i=this.getPixelBounds()).min.add(e),i.max.add(e)),e.add(this._getBoundsOffset(i,t))):e},"_getBoundsOffset":function(e,t,i){t=f(this.project(t.getNorthEast(),i),this.project(t.getSouthWest(),i)),i=t.min.subtract(e.min),t=t.max.subtract(e.max);return new p(this._rebound(i.x,-t.x),this._rebound(i.y,-t.y))},"_rebound":function(e,t){return 0<e+t?Math.round(e-t)/2:Math.max(0,Math.ceil(e))-Math.max(0,Math.floor(t))},"_limitZoom":function(e){var t=this.getMinZoom(),i=this.getMaxZoom(),n=E.any3d?this.options.zoomSnap:1;return n&&(e=Math.round(e/n)*n),Math.max(t,Math.min(i,e))},"_onPanTransitionStep":function(){this.fire("move")},"_onPanTransitionEnd":function(){k(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},"_tryAnimatedPan":function(e,t){e=this._getCenterOffset(e)._trunc();return!(!0!==(t&&t.animate)&&!this.getSize().contains(e))&&(this.panBy(e,t),!0)},"_createAnimProxy":function(){var e=this._proxy=x("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(e),this.on("zoomanim",function(e){var t=ct,i=this._proxy.style[t];Et(this._proxy,this.project(e.center,e.zoom),this.getZoomScale(e.zoom,1)),i===this._proxy.style[t]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},"_destroyAnimProxy":function(){T(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},"_animMoveEnd":function(){var e=this.getCenter(),t=this.getZoom();Et(this._proxy,this.project(e,t),this.getZoomScale(t,1))},"_catchTransitionEnd":function(e){this._animatingZoom&&0<=e.propertyName.indexOf("transform")&&this._onZoomTransitionEnd()},"_nothingToAnimate":function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},"_tryAnimatedZoom":function(e,t,i){if(!this._animatingZoom){if(i=i||{},!this._zoomAnimated||!1===i.animate||this._nothingToAnimate()||Math.abs(t-this._zoom)>this.options.zoomAnimationThreshold)return!1;var n=this.getZoomScale(t),n=this._getCenterOffset(e)._divideBy(1-1/n);if(!0!==i.animate&&!this.getSize().contains(n))return!1;_(function(){this._moveStart(!0,i.noMoveStart||!1)._animateZoom(e,t,!0)},this)}return!0},"_animateZoom":function(e,t,i,n){this._mapPane&&(i&&(this._animatingZoom=!0,this._animateToCenter=e,this._animateToZoom=t,S(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{"center":e,"zoom":t,"noUpdate":n}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(s(this._onZoomTransitionEnd,this),250))},"_onZoomTransitionEnd":function(){this._animatingZoom&&(this._mapPane&&k(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function Wt(e){return new M(e)}var M=te.extend({"options":{"position":"topright"},"initialize":function(e){d(this,e)},"getPosition":function(){return this.options.position},"setPosition":function(e){var t=this._map;return t&&t.removeControl(this),this.options.position=e,t&&t.addControl(this),this},"getContainer":function(){return this._container},"addTo":function(e){this.remove(),this._map=e;var t=this._container=this.onAdd(e),i=this.getPosition(),e=e._controlCorners[i];return S(t,"leaflet-control"),-1!==i.indexOf("bottom")?e.insertBefore(t,e.firstChild):e.appendChild(t),this._map.on("unload",this.remove,this),this},"remove":function(){return this._map&&(T(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null),this},"_refocusOnMap":function(e){this._map&&e&&0<e.screenX&&0<e.screenY&&this._map.getContainer().focus()}}),Gt=(D.include({"addControl":function(e){return e.addTo(this),this},"removeControl":function(e){return e.remove(),this},"_initControlPos":function(){var i=this._controlCorners={},n="leaflet-",r=this._controlContainer=x("div",n+"control-container",this._container);function e(e,t){i[e+t]=x("div",n+e+" "+n+t,r)}e("top","left"),e("top","right"),e("bottom","left"),e("bottom","right")},"_clearControlPos":function(){for(var e in this._controlCorners)T(this._controlCorners[e]);T(this._controlContainer),delete this._controlCorners,delete this._controlContainer}}),M.extend({"options":{"collapsed":!0,"position":"topright","autoZIndex":!0,"hideSingleBase":!1,"sortLayers":!1,"sortFunction":function(e,t,i,n){return i<n?-1:n<i?1:0}},"initialize":function(e,t,i){for(var n in d(this,i),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1,e)this._addLayer(e[n],n);for(n in t)this._addLayer(t[n],n,!0)},"onAdd":function(e){this._initLayout(),this._update(),(this._map=e).on("zoomend",this._checkDisabledLayers,this);for(var t=0;t<this._layers.length;t++)this._layers[t].layer.on("add remove",this._onLayerChange,this);return this._container},"addTo":function(e){return M.prototype.addTo.call(this,e),this._expandIfNotCollapsed()},"onRemove":function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var e=0;e<this._layers.length;e++)this._layers[e].layer.off("add remove",this._onLayerChange,this)},"addBaseLayer":function(e,t){return this._addLayer(e,t),this._map?this._update():this},"addOverlay":function(e,t){return this._addLayer(e,t,!0),this._map?this._update():this},"removeLayer":function(e){e.off("add remove",this._onLayerChange,this);e=this._getLayer(l(e));return e&&this._layers.splice(this._layers.indexOf(e),1),this._map?this._update():this},"expand":function(){S(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var e=this._map.getSize().y-(this._container.offsetTop+50);return e<this._section.clientHeight?(S(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=e+"px"):k(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},"collapse":function(){return k(this._container,"leaflet-control-layers-expanded"),this},"_initLayout":function(){var e="leaflet-control-layers",t=this._container=x("div",e),i=this.options.collapsed,n=(t.setAttribute("aria-haspopup",!0),Bt(t),Mt(t),this._section=x("section",e+"-list")),r=(i&&(this._map.on("click",this.collapse,this),A(t,{"mouseenter":this._expandSafely,"mouseleave":this.collapse},this)),this._layersLink=x("a",e+"-toggle",t));r.href="#",r.title="Layers",r.setAttribute("role","button"),A(r,{"keydown":function(e){13===e.keyCode&&this._expandSafely()},"click":function(e){I(e),this._expandSafely()}},this),i||this.expand(),this._baseLayersList=x("div",e+"-base",n),this._separator=x("div",e+"-separator",n),this._overlaysList=x("div",e+"-overlays",n),t.appendChild(n)},"_getLayer":function(e){for(var t=0;t<this._layers.length;t++)if(this._layers[t]&&l(this._layers[t].layer)===e)return this._layers[t]},"_addLayer":function(e,t,i){this._map&&e.on("add remove",this._onLayerChange,this),this._layers.push({"layer":e,"name":t,"overlay":i}),this.options.sortLayers&&this._layers.sort(s(function(e,t){return this.options.sortFunction(e.layer,t.layer,e.name,t.name)},this)),this.options.autoZIndex&&e.setZIndex&&(this._lastZIndex++,e.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},"_update":function(){if(this._container){gt(this._baseLayersList),gt(this._overlaysList),this._layerControlInputs=[];for(var e,t,i,n=0,r=0;r<this._layers.length;r++)i=this._layers[r],this._addItem(i),t=t||i.overlay,e=e||!i.overlay,n+=i.overlay?0:1;this.options.hideSingleBase&&(this._baseLayersList.style.display=(e=e&&1<n)?"":"none"),this._separator.style.display=t&&e?"":"none"}return this},"_onLayerChange":function(e){this._handlingClick||this._update();var t=this._getLayer(l(e.target)),e=t.overlay?"add"===e.type?"overlayadd":"overlayremove":"add"===e.type?"baselayerchange":null;e&&this._map.fire(e,t)},"_createRadioElement":function(e,t){e='<input type="radio" class="leaflet-control-layers-selector" name="'+e+'"'+(t?' checked="checked"':"")+"/>",t=document.createElement("div");return t.innerHTML=e,t.firstChild},"_addItem":function(e){var t,i=document.createElement("label"),n=this._map.hasLayer(e.layer),n=(e.overlay?((t=document.createElement("input")).type="checkbox",t.className="leaflet-control-layers-selector",t.defaultChecked=n):t=this._createRadioElement("leaflet-base-layers_"+l(this),n),this._layerControlInputs.push(t),t.layerId=l(e.layer),A(t,"click",this._onInputClick,this),document.createElement("span")),r=(n.innerHTML=" "+e.name,document.createElement("span"));return i.appendChild(r),r.appendChild(t),r.appendChild(n),(e.overlay?this._overlaysList:this._baseLayersList).appendChild(i),this._checkDisabledLayers(),i},"_onInputClick":function(){if(!this._preventClick){var e,t,i=this._layerControlInputs,n=[],r=[];this._handlingClick=!0;for(var o=i.length-1;0<=o;o--)e=i[o],t=this._getLayer(e.layerId).layer,e.checked?n.push(t):e.checked||r.push(t);for(o=0;o<r.length;o++)this._map.hasLayer(r[o])&&this._map.removeLayer(r[o]);for(o=0;o<n.length;o++)this._map.hasLayer(n[o])||this._map.addLayer(n[o]);this._handlingClick=!1,this._refocusOnMap()}},"_checkDisabledLayers":function(){for(var e,t,i=this._layerControlInputs,n=this._map.getZoom(),r=i.length-1;0<=r;r--)e=i[r],t=this._getLayer(e.layerId).layer,e.disabled=void 0!==t.options.minZoom&&n<t.options.minZoom||void 0!==t.options.maxZoom&&n>t.options.maxZoom},"_expandIfNotCollapsed":function(){return this._map&&!this.options.collapsed&&this.expand(),this},"_expandSafely":function(){var e=this._section,t=(this._preventClick=!0,A(e,"click",I),this.expand(),this);setTimeout(function(){P(e,"click",I),t._preventClick=!1})}})),Vt=M.extend({"options":{"position":"topleft","zoomInText":'<span aria-hidden="true">+</span>',"zoomInTitle":"Zoom in","zoomOutText":'<span aria-hidden="true">&#x2212;</span>',"zoomOutTitle":"Zoom out"},"onAdd":function(e){var t="leaflet-control-zoom",i=x("div",t+" leaflet-bar"),n=this.options;return this._zoomInButton=this._createButton(n.zoomInText,n.zoomInTitle,t+"-in",i,this._zoomIn),this._zoomOutButton=this._createButton(n.zoomOutText,n.zoomOutTitle,t+"-out",i,this._zoomOut),this._updateDisabled(),e.on("zoomend zoomlevelschange",this._updateDisabled,this),i},"onRemove":function(e){e.off("zoomend zoomlevelschange",this._updateDisabled,this)},"disable":function(){return this._disabled=!0,this._updateDisabled(),this},"enable":function(){return this._disabled=!1,this._updateDisabled(),this},"_zoomIn":function(e){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(e.shiftKey?3:1))},"_zoomOut":function(e){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(e.shiftKey?3:1))},"_createButton":function(e,t,i,n,r){i=x("a",i,n);return i.innerHTML=e,i.href="#",i.title=t,i.setAttribute("role","button"),i.setAttribute("aria-label",t),Bt(i),A(i,"click",Ft),A(i,"click",r,this),A(i,"click",this._refocusOnMap,this),i},"_updateDisabled":function(){var e=this._map,t="leaflet-disabled";k(this._zoomInButton,t),k(this._zoomOutButton,t),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),!this._disabled&&e._zoom!==e.getMinZoom()||(S(this._zoomOutButton,t),this._zoomOutButton.setAttribute("aria-disabled","true")),!this._disabled&&e._zoom!==e.getMaxZoom()||(S(this._zoomInButton,t),this._zoomInButton.setAttribute("aria-disabled","true"))}}),qt=(D.mergeOptions({"zoomControl":!0}),D.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new Vt,this.addControl(this.zoomControl))}),M.extend({"options":{"position":"bottomleft","maxWidth":100,"metric":!0,"imperial":!0},"onAdd":function(e){var t="leaflet-control-scale",i=x("div",t),n=this.options;return this._addScales(n,t+"-line",i),e.on(n.updateWhenIdle?"moveend":"move",this._update,this),e.whenReady(this._update,this),i},"onRemove":function(e){e.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},"_addScales":function(e,t,i){e.metric&&(this._mScale=x("div",t,i)),e.imperial&&(this._iScale=x("div",t,i))},"_update":function(){var e=this._map,t=e.getSize().y/2,e=e.distance(e.containerPointToLatLng([0,t]),e.containerPointToLatLng([this.options.maxWidth,t]));this._updateScales(e)},"_updateScales":function(e){this.options.metric&&e&&this._updateMetric(e),this.options.imperial&&e&&this._updateImperial(e)},"_updateMetric":function(e){var t=this._getRoundNum(e);this._updateScale(this._mScale,t<1e3?t+" m":t/1e3+" km",t/e)},"_updateImperial":function(e){var t,i,e=3.2808399*e;5280<e?(i=this._getRoundNum(t=e/5280),this._updateScale(this._iScale,i+" mi",i/t)):(i=this._getRoundNum(e),this._updateScale(this._iScale,i+" ft",i/e))},"_updateScale":function(e,t,i){e.style.width=Math.round(this.options.maxWidth*i)+"px",e.innerHTML=t},"_getRoundNum":function(e){var t=Math.pow(10,(Math.floor(e)+"").length-1),e=e/t;return t*(e=10<=e?10:5<=e?5:3<=e?3:2<=e?2:1)}})),Kt=M.extend({"options":{"position":"bottomright","prefix":'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(E.inlineSvg?'<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg> ':"")+"Leaflet</a>"},"initialize":function(e){d(this,e),this._attributions={}},"onAdd":function(e){for(var t in(e.attributionControl=this)._container=x("div","leaflet-control-attribution"),Bt(this._container),e._layers)e._layers[t].getAttribution&&this.addAttribution(e._layers[t].getAttribution());return this._update(),e.on("layeradd",this._addAttribution,this),this._container},"onRemove":function(e){e.off("layeradd",this._addAttribution,this)},"_addAttribution":function(e){e.layer.getAttribution&&(this.addAttribution(e.layer.getAttribution()),e.layer.once("remove",function(){this.removeAttribution(e.layer.getAttribution())},this))},"setPrefix":function(e){return this.options.prefix=e,this._update(),this},"addAttribution":function(e){return e&&(this._attributions[e]||(this._attributions[e]=0),this._attributions[e]++,this._update()),this},"removeAttribution":function(e){return e&&this._attributions[e]&&(this._attributions[e]--,this._update()),this},"_update":function(){if(this._map){var e,t=[];for(e in this._attributions)this._attributions[e]&&t.push(e);var i=[];this.options.prefix&&i.push(this.options.prefix),t.length&&i.push(t.join(", ")),this._container.innerHTML=i.join(' <span aria-hidden="true">|</span> ')}}}),n=(D.mergeOptions({"attributionControl":!0}),D.addInitHook(function(){this.options.attributionControl&&(new Kt).addTo(this)}),M.Layers=Gt,M.Zoom=Vt,M.Scale=qt,M.Attribution=Kt,Wt.layers=function(e,t,i){return new Gt(e,t,i)},Wt.zoom=function(e){return new Vt(e)},Wt.scale=function(e){return new qt(e)},Wt.attribution=function(e){return new Kt(e)},te.extend({"initialize":function(e){this._map=e},"enable":function(){return this._enabled||(this._enabled=!0,this.addHooks()),this},"disable":function(){return this._enabled&&(this._enabled=!1,this.removeHooks()),this},"enabled":function(){return!!this._enabled}})),ve=(n.addTo=function(e,t){return e.addHandler(t,this),this},{"Events":t}),Zt=E.touch?"touchstart mousedown":"mousedown",Xt=ie.extend({"options":{"clickTolerance":3},"initialize":function(e,t,i,n){d(this,n),this._element=e,this._dragStartTarget=t||e,this._preventOutline=i},"enable":function(){this._enabled||(A(this._dragStartTarget,Zt,this._onDown,this),this._enabled=!0)},"disable":function(){this._enabled&&(Xt._dragging===this&&this.finishDrag(!0),P(this._dragStartTarget,Zt,this._onDown,this),this._enabled=!1,this._moved=!1)},"_onDown":function(e){var t,i;this._enabled&&(this._moved=!1,yt(this._element,"leaflet-zoom-anim")||(e.touches&&1!==e.touches.length?Xt._dragging===this&&this.finishDrag():Xt._dragging||e.shiftKey||1!==e.which&&1!==e.button&&!e.touches||((Xt._dragging=this)._preventOutline&&kt(this._element),Tt(),at(),this._moving||(this.fire("down"),i=e.touches?e.touches[0]:e,t=Ct(this._element),this._startPoint=new p(i.clientX,i.clientY),this._startPos=xt(this._element),this._parentScale=At(t),i="mousedown"===e.type,A(document,i?"mousemove":"touchmove",this._onMove,this),A(document,i?"mouseup":"touchend touchcancel",this._onUp,this)))))},"_onMove":function(e){var t;this._enabled&&(e.touches&&1<e.touches.length?this._moved=!0:!(t=new p((t=e.touches&&1===e.touches.length?e.touches[0]:e).clientX,t.clientY)._subtract(this._startPoint)).x&&!t.y||Math.abs(t.x)+Math.abs(t.y)<this.options.clickTolerance||(t.x/=this._parentScale.x,t.y/=this._parentScale.y,I(e),this._moved||(this.fire("dragstart"),this._moved=!0,S(document.body,"leaflet-dragging"),this._lastTarget=e.target||e.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),S(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(t),this._moving=!0,this._lastEvent=e,this._updatePosition()))},"_updatePosition":function(){var e={"originalEvent":this._lastEvent};this.fire("predrag",e),C(this._element,this._newPos),this.fire("drag",e)},"_onUp":function(){this._enabled&&this.finishDrag()},"finishDrag":function(e){k(document.body,"leaflet-dragging"),this._lastTarget&&(k(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),P(document,"mousemove touchmove",this._onMove,this),P(document,"mouseup touchend touchcancel",this._onUp,this),St(),st();var t=this._moved&&this._moving;this._moving=!1,Xt._dragging=!1,t&&this.fire("dragend",{"noInertia":e,"distance":this._newPos.distanceTo(this._startPos)})}});function Yt(e,t,i){for(var n,r,o,a,s,l,u,c=[1,4,2,8],d=0,h=e.length;d<h;d++)e[d]._code=oi(e[d],t);for(o=0;o<4;o++){for(l=c[o],n=[],d=0,r=(h=e.length)-1;d<h;r=d++)a=e[d],s=e[r],a._code&l?s._code&l||((u=ri(s,a,l,t,i))._code=oi(u,t),n.push(u)):(s._code&l&&((u=ri(s,a,l,t,i))._code=oi(u,t),n.push(u)),n.push(a));e=n}return e}function Qt(e,t){var i,n,r,o,a,s,l;if(!e||0===e.length)throw new Error("latlngs not passed");B(e)||(console.warn("latlngs are not flat! Only the first ring will be used"),e=e[0]);for(var u=w([0,0]),c=m(e),d=(c.getNorthWest().distanceTo(c.getSouthWest())*c.getNorthEast().distanceTo(c.getNorthWest())<1700&&(u=Jt(e)),e.length),h=[],f=0;f<d;f++){var p=w(e[f]);h.push(t.project(w([p.lat-u.lat,p.lng-u.lng])))}for(f=a=s=l=0,i=d-1;f<d;i=f++)n=h[f],r=h[i],o=n.y*r.x-r.y*n.x,s+=(n.x+r.x)*o,l+=(n.y+r.y)*o,a+=3*o;c=0===a?h[0]:[s/a,l/a],c=t.unproject(g(c));return w([c.lat+u.lat,c.lng+u.lng])}function Jt(e){for(var t=0,i=0,n=0,r=0;r<e.length;r++){var o=w(e[r]);t+=o.lat,i+=o.lng,n++}return w([t/n,i/n])}var ei,me={"__proto__":null,"clipPolygon":Yt,"polygonCenter":Qt,"centroid":Jt};function ti(e,t){if(t&&e.length){var i=e=function(e,t){for(var i=[e[0]],n=1,r=0,o=e.length;n<o;n++)(function(e,t){var i=t.x-e.x,t=t.y-e.y;return i*i+t*t})(e[n],e[r])>t&&(i.push(e[n]),r=n);r<o-1&&i.push(e[o-1]);return i}(e,t=t*t),n=i.length,r=new(typeof Uint8Array!=void 0+""?Uint8Array:Array)(n);r[0]=r[n-1]=1,function e(t,i,n,r,o){var a,s,l,u=0;for(s=r+1;s<=o-1;s++)l=ai(t[s],t[r],t[o],!0),u<l&&(a=s,u=l);n<u&&(i[a]=1,e(t,i,n,r,a),e(t,i,n,a,o))}(i,r,t,0,n-1);var o,a=[];for(o=0;o<n;o++)r[o]&&a.push(i[o]);return a}return e.slice()}function ii(e,t,i){return Math.sqrt(ai(e,t,i,!0))}function ni(e,t,i,n,r){var o,a,s,l=n?ei:oi(e,i),u=oi(t,i);for(ei=u;;){if(!(l|u))return[e,t];if(l&u)return!1;s=oi(a=ri(e,t,o=l||u,i,r),i),o===l?(e=a,l=s):(t=a,u=s)}}function ri(e,t,i,n,r){var o,a,s=t.x-e.x,t=t.y-e.y,l=n.min,n=n.max;return 8&i?(o=e.x+s*(n.y-e.y)/t,a=n.y):4&i?(o=e.x+s*(l.y-e.y)/t,a=l.y):2&i?(o=n.x,a=e.y+t*(n.x-e.x)/s):1&i&&(o=l.x,a=e.y+t*(l.x-e.x)/s),new p(o,a,r)}function oi(e,t){var i=0;return e.x<t.min.x?i|=1:e.x>t.max.x&&(i|=2),e.y<t.min.y?i|=4:e.y>t.max.y&&(i|=8),i}function ai(e,t,i,n){var r=t.x,t=t.y,o=i.x-r,a=i.y-t,s=o*o+a*a;return 0<s&&(1<(s=((e.x-r)*o+(e.y-t)*a)/s)?(r=i.x,t=i.y):0<s&&(r+=o*s,t+=a*s)),o=e.x-r,a=e.y-t,n?o*o+a*a:new p(r,t)}function B(e){return!h(e[0])||"object"!=typeof e[0][0]&&void 0!==e[0][0]}function si(e){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),B(e)}function li(e,t){var i,n,r,o,a,s;if(!e||0===e.length)throw new Error("latlngs not passed");B(e)||(console.warn("latlngs are not flat! Only the first ring will be used"),e=e[0]);for(var l=w([0,0]),u=m(e),c=(u.getNorthWest().distanceTo(u.getSouthWest())*u.getNorthEast().distanceTo(u.getNorthWest())<1700&&(l=Jt(e)),e.length),d=[],h=0;h<c;h++){var f=w(e[h]);d.push(t.project(w([f.lat-l.lat,f.lng-l.lng])))}for(i=h=0;h<c-1;h++)i+=d[h].distanceTo(d[h+1])/2;if(0===i)s=d[0];else for(n=h=0;h<c-1;h++)if(r=d[h],o=d[h+1],i<(n+=a=r.distanceTo(o))){s=[o.x-(a=(n-i)/a)*(o.x-r.x),o.y-a*(o.y-r.y)];break}u=t.unproject(g(s));return w([u.lat+l.lat,u.lng+l.lng])}var ye={"__proto__":null,"simplify":ti,"pointToSegmentDistance":ii,"closestPointOnSegment":function(e,t,i){return ai(e,t,i)},"clipSegment":ni,"_getEdgeIntersection":ri,"_getBitCode":oi,"_sqClosestPointOnSegment":ai,"isFlat":B,"_flat":si,"polylineCenter":li},be={"project":function(e){return new p(e.lng,e.lat)},"unproject":function(e){return new y(e.y,e.x)},"bounds":new v([-180,-90],[180,90])},_e={"R":6378137,"R_MINOR":6356752.314245179,"bounds":new v([-20037508.34279,-15496570.73972],[20037508.34279,18764656.23138]),"project":function(e){var t=Math.PI/180,i=this.R,n=e.lat*t,r=this.R_MINOR/i,r=Math.sqrt(1-r*r),o=r*Math.sin(n),o=Math.tan(Math.PI/4-n/2)/Math.pow((1-o)/(1+o),r/2),n=-i*Math.log(Math.max(o,1e-10));return new p(e.lng*t*i,n)},"unproject":function(e){for(var t,i=180/Math.PI,n=this.R,r=this.R_MINOR/n,o=Math.sqrt(1-r*r),a=Math.exp(-e.y/n),s=Math.PI/2-2*Math.atan(a),l=0,u=.1;l<15&&1e-7<Math.abs(u);l++)t=o*Math.sin(s),t=Math.pow((1-t)/(1+t),o/2),s+=u=Math.PI/2-2*Math.atan(a*t)-s;return new y(s*i,e.x*i/n)}},we={"__proto__":null,"LonLat":be,"Mercator":_e,"SphericalMercator":ae},xe=u({},oe,{"code":"EPSG:3395","projection":_e,"transformation":le(Ee=.5/(Math.PI*_e.R),.5,-Ee,.5)}),ui=u({},oe,{"code":"EPSG:4326","projection":be,"transformation":le(1/180,1,-1/180,.5)}),Te=u({},re,{"projection":be,"transformation":le(1,0,-1,0),"scale":function(e){return Math.pow(2,e)},"zoom":function(e){return Math.log(e)/Math.LN2},"distance":function(e,t){var i=t.lng-e.lng,t=t.lat-e.lat;return Math.sqrt(i*i+t*t)},"infinite":!0}),r=(re.Earth=oe,re.EPSG3395=xe,re.EPSG3857=ue,re.EPSG900913=ce,re.EPSG4326=ui,re.Simple=Te,ie.extend({"options":{"pane":"overlayPane","attribution":null,"bubblingMouseEvents":!0},"addTo":function(e){return e.addLayer(this),this},"remove":function(){return this.removeFrom(this._map||this._mapToAdd)},"removeFrom":function(e){return e&&e.removeLayer(this),this},"getPane":function(e){return this._map.getPane(e?this.options[e]||e:this.options.pane)},"addInteractiveTarget":function(e){return this._map._targets[l(e)]=this},"removeInteractiveTarget":function(e){return delete this._map._targets[l(e)],this},"getAttribution":function(){return this.options.attribution},"_layerAdd":function(e){var t,i=e.target;i.hasLayer(this)&&(this._map=i,this._zoomAnimated=i._zoomAnimated,this.getEvents&&(t=this.getEvents(),i.on(t,this),this.once("remove",function(){i.off(t,this)},this)),this.onAdd(i),this.fire("add"),i.fire("layeradd",{"layer":this}))}})),ci=(D.include({"addLayer":function(e){var t;if(e._layerAdd)return t=l(e),this._layers[t]||((this._layers[t]=e)._mapToAdd=this,e.beforeAdd&&e.beforeAdd(this),this.whenReady(e._layerAdd,e)),this;throw new Error("The provided object is not a Layer.")},"removeLayer":function(e){var t=l(e);return this._layers[t]&&(this._loaded&&e.onRemove(this),delete this._layers[t],this._loaded&&(this.fire("layerremove",{"layer":e}),e.fire("remove")),e._map=e._mapToAdd=null),this},"hasLayer":function(e){return l(e)in this._layers},"eachLayer":function(e,t){for(var i in this._layers)e.call(t,this._layers[i]);return this},"_addLayers":function(e){for(var t=0,i=(e=e?h(e)?e:[e]:[]).length;t<i;t++)this.addLayer(e[t])},"_addZoomLimit":function(e){isNaN(e.options.maxZoom)&&isNaN(e.options.minZoom)||(this._zoomBoundLayers[l(e)]=e,this._updateZoomLevels())},"_removeZoomLimit":function(e){e=l(e);this._zoomBoundLayers[e]&&(delete this._zoomBoundLayers[e],this._updateZoomLevels())},"_updateZoomLevels":function(){var e,t=1/0,i=-1/0,n=this._getZoomSpan();for(e in this._zoomBoundLayers)var r=this._zoomBoundLayers[e].options,t=void 0===r.minZoom?t:Math.min(t,r.minZoom),i=void 0===r.maxZoom?i:Math.max(i,r.maxZoom);this._layersMaxZoom=i===-1/0?void 0:i,this._layersMinZoom=t===1/0?void 0:t,n!==this._getZoomSpan()&&this.fire("zoomlevelschange"),void 0===this.options.maxZoom&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),void 0===this.options.minZoom&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}}),r.extend({"initialize":function(e,t){var i,n;if(d(this,t),this._layers={},e)for(i=0,n=e.length;i<n;i++)this.addLayer(e[i])},"addLayer":function(e){var t=this.getLayerId(e);return this._layers[t]=e,this._map&&this._map.addLayer(e),this},"removeLayer":function(e){e=e in this._layers?e:this.getLayerId(e);return this._map&&this._layers[e]&&this._map.removeLayer(this._layers[e]),delete this._layers[e],this},"hasLayer":function(e){return("number"==typeof e?e:this.getLayerId(e))in this._layers},"clearLayers":function(){return this.eachLayer(this.removeLayer,this)},"invoke":function(e){var t,i,n=Array.prototype.slice.call(arguments,1);for(t in this._layers)(i=this._layers[t])[e]&&i[e].apply(i,n);return this},"onAdd":function(e){this.eachLayer(e.addLayer,e)},"onRemove":function(e){this.eachLayer(e.removeLayer,e)},"eachLayer":function(e,t){for(var i in this._layers)e.call(t,this._layers[i]);return this},"getLayer":function(e){return this._layers[e]},"getLayers":function(){var e=[];return this.eachLayer(e.push,e),e},"setZIndex":function(e){return this.invoke("setZIndex",e)},"getLayerId":l})),di=ci.extend({"addLayer":function(e){return this.hasLayer(e)?this:(e.addEventParent(this),ci.prototype.addLayer.call(this,e),this.fire("layeradd",{"layer":e}))},"removeLayer":function(e){return this.hasLayer(e)?((e=e in this._layers?this._layers[e]:e).removeEventParent(this),ci.prototype.removeLayer.call(this,e),this.fire("layerremove",{"layer":e})):this},"setStyle":function(e){return this.invoke("setStyle",e)},"bringToFront":function(){return this.invoke("bringToFront")},"bringToBack":function(){return this.invoke("bringToBack")},"getBounds":function(){var e,t=new o;for(e in this._layers){var i=this._layers[e];t.extend(i.getBounds?i.getBounds():i.getLatLng())}return t}}),hi=te.extend({"options":{"popupAnchor":[0,0],"tooltipAnchor":[0,0],"crossOrigin":!1},"initialize":function(e){d(this,e)},"createIcon":function(e){return this._createIcon("icon",e)},"createShadow":function(e){return this._createIcon("shadow",e)},"_createIcon":function(e,t){var i=this._getIconUrl(e);if(i)return i=this._createImg(i,t&&"IMG"===t.tagName?t:null),this._setIconStyles(i,e),!this.options.crossOrigin&&""!==this.options.crossOrigin||(i.crossOrigin=!0===this.options.crossOrigin?"":this.options.crossOrigin),i;if("icon"===e)throw new Error("iconUrl not set in Icon options (see the docs).");return null},"_setIconStyles":function(e,t){var i=this.options,n=i[t+"Size"],n=g(n="number"==typeof n?[n,n]:n),r=g("shadow"===t&&i.shadowAnchor||i.iconAnchor||n&&n.divideBy(2,!0));e.className="leaflet-marker-"+t+" "+(i.className||""),r&&(e.style.marginLeft=-r.x+"px",e.style.marginTop=-r.y+"px"),n&&(e.style.width=n.x+"px",e.style.height=n.y+"px")},"_createImg":function(e,t){return(t=t||document.createElement("img")).src=e,t},"_getIconUrl":function(e){return E.retina&&this.options[e+"RetinaUrl"]||this.options[e+"Url"]}});var fi=hi.extend({"options":{"iconUrl":"marker-icon.png","iconRetinaUrl":"marker-icon-2x.png","shadowUrl":"marker-shadow.png","iconSize":[25,41],"iconAnchor":[12,41],"popupAnchor":[1,-34],"tooltipAnchor":[16,-28],"shadowSize":[41,41]},"_getIconUrl":function(e){return"string"!=typeof fi.imagePath&&(fi.imagePath=this._detectIconPath()),(this.options.imagePath||fi.imagePath)+hi.prototype._getIconUrl.call(this,e)},"_stripUrl":function(e){function t(e,t,i){return(t=t.exec(e))&&t[i]}return(e=t(e,/^url\((['"])?(.+)\1\)$/,2))&&t(e,/^(.*)marker-icon\.png$/,1)},"_detectIconPath":function(){var e=x("div","leaflet-default-icon-path",document.body),t=pt(e,"background-image")||pt(e,"backgroundImage");return document.body.removeChild(e),(t=this._stripUrl(t))?t:(e=document.querySelector('link[href$="leaflet.css"]'))?e.href.substring(0,e.href.length-"leaflet.css".length-1):""}}),pi=n.extend({"initialize":function(e){this._marker=e},"addHooks":function(){var e=this._marker._icon;this._draggable||(this._draggable=new Xt(e,e,!0)),this._draggable.on({"dragstart":this._onDragStart,"predrag":this._onPreDrag,"drag":this._onDrag,"dragend":this._onDragEnd},this).enable(),S(e,"leaflet-marker-draggable")},"removeHooks":function(){this._draggable.off({"dragstart":this._onDragStart,"predrag":this._onPreDrag,"drag":this._onDrag,"dragend":this._onDragEnd},this).disable(),this._marker._icon&&k(this._marker._icon,"leaflet-marker-draggable")},"moved":function(){return this._draggable&&this._draggable._moved},"_adjustPan":function(e){var t=this._marker,i=t._map,n=this._marker.options.autoPanSpeed,r=this._marker.options.autoPanPadding,o=xt(t._icon),a=i.getPixelBounds(),s=i.getPixelOrigin(),s=f(a.min._subtract(s).add(r),a.max._subtract(s).subtract(r));s.contains(o)||(r=g((Math.max(s.max.x,o.x)-s.max.x)/(a.max.x-s.max.x)-(Math.min(s.min.x,o.x)-s.min.x)/(a.min.x-s.min.x),(Math.max(s.max.y,o.y)-s.max.y)/(a.max.y-s.max.y)-(Math.min(s.min.y,o.y)-s.min.y)/(a.min.y-s.min.y)).multiplyBy(n),i.panBy(r,{"animate":!1}),this._draggable._newPos._add(r),this._draggable._startPos._add(r),C(t._icon,this._draggable._newPos),this._onDrag(e),this._panRequest=_(this._adjustPan.bind(this,e)))},"_onDragStart":function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},"_onPreDrag":function(e){this._marker.options.autoPan&&(a(this._panRequest),this._panRequest=_(this._adjustPan.bind(this,e)))},"_onDrag":function(e){var t=this._marker,i=t._shadow,n=xt(t._icon),r=t._map.layerPointToLatLng(n);i&&C(i,n),t._latlng=r,e.latlng=r,e.oldLatLng=this._oldLatLng,t.fire("move",e).fire("drag",e)},"_onDragEnd":function(e){a(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",e)}}),gi=r.extend({"options":{"icon":new fi,"interactive":!0,"keyboard":!0,"title":"","alt":"Marker","zIndexOffset":0,"opacity":1,"riseOnHover":!1,"riseOffset":250,"pane":"markerPane","shadowPane":"shadowPane","bubblingMouseEvents":!1,"autoPanOnFocus":!0,"draggable":!1,"autoPan":!1,"autoPanPadding":[50,50],"autoPanSpeed":10},"initialize":function(e,t){d(this,t),this._latlng=w(e)},"onAdd":function(e){this._zoomAnimated=this._zoomAnimated&&e.options.markerZoomAnimation,this._zoomAnimated&&e.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},"onRemove":function(e){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&e.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},"getEvents":function(){return{"zoom":this.update,"viewreset":this.update}},"getLatLng":function(){return this._latlng},"setLatLng":function(e){var t=this._latlng;return this._latlng=w(e),this.update(),this.fire("move",{"oldLatLng":t,"latlng":this._latlng})},"setZIndexOffset":function(e){return this.options.zIndexOffset=e,this.update()},"getIcon":function(){return this.options.icon},"setIcon":function(e){return this.options.icon=e,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},"getElement":function(){return this._icon},"update":function(){var e;return this._icon&&this._map&&(e=this._map.latLngToLayerPoint(this._latlng).round(),this._setPos(e)),this},"_initIcon":function(){var e=this.options,t="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),i=e.icon.createIcon(this._icon),n=!1,i=(i!==this._icon&&(this._icon&&this._removeIcon(),n=!0,e.title&&(i.title=e.title),"IMG"===i.tagName&&(i.alt=e.alt||"")),S(i,t),e.keyboard&&(i.tabIndex="0",i.setAttribute("role","button")),this._icon=i,e.riseOnHover&&this.on({"mouseover":this._bringToFront,"mouseout":this._resetZIndex}),this.options.autoPanOnFocus&&A(i,"focus",this._panOnFocus,this),e.icon.createShadow(this._shadow)),r=!1;i!==this._shadow&&(this._removeShadow(),r=!0),i&&(S(i,t),i.alt=""),this._shadow=i,e.opacity<1&&this._updateOpacity(),n&&this.getPane().appendChild(this._icon),this._initInteraction(),i&&r&&this.getPane(e.shadowPane).appendChild(this._shadow)},"_removeIcon":function(){this.options.riseOnHover&&this.off({"mouseover":this._bringToFront,"mouseout":this._resetZIndex}),this.options.autoPanOnFocus&&P(this._icon,"focus",this._panOnFocus,this),T(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},"_removeShadow":function(){this._shadow&&T(this._shadow),this._shadow=null},"_setPos":function(e){this._icon&&C(this._icon,e),this._shadow&&C(this._shadow,e),this._zIndex=e.y+this.options.zIndexOffset,this._resetZIndex()},"_updateZIndex":function(e){this._icon&&(this._icon.style.zIndex=this._zIndex+e)},"_animateZoom":function(e){e=this._map._latLngToNewLayerPoint(this._latlng,e.zoom,e.center).round();this._setPos(e)},"_initInteraction":function(){var e;this.options.interactive&&(S(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),pi&&(e=this.options.draggable,this.dragging&&(e=this.dragging.enabled(),this.dragging.disable()),this.dragging=new pi(this),e&&this.dragging.enable()))},"setOpacity":function(e){return this.options.opacity=e,this._map&&this._updateOpacity(),this},"_updateOpacity":function(){var e=this.options.opacity;this._icon&&R(this._icon,e),this._shadow&&R(this._shadow,e)},"_bringToFront":function(){this._updateZIndex(this.options.riseOffset)},"_resetZIndex":function(){this._updateZIndex(0)},"_panOnFocus":function(){var e,t,i=this._map;i&&(e=(t=this.options.icon.options).iconSize?g(t.iconSize):g(0,0),t=t.iconAnchor?g(t.iconAnchor):g(0,0),i.panInside(this._latlng,{"paddingTopLeft":t,"paddingBottomRight":e.subtract(t)}))},"_getPopupAnchor":function(){return this.options.icon.options.popupAnchor},"_getTooltipAnchor":function(){return this.options.icon.options.tooltipAnchor}});var vi=r.extend({"options":{"stroke":!0,"color":"#3388ff","weight":3,"opacity":1,"lineCap":"round","lineJoin":"round","dashArray":null,"dashOffset":null,"fill":!1,"fillColor":null,"fillOpacity":.2,"fillRule":"evenodd","interactive":!0,"bubblingMouseEvents":!0},"beforeAdd":function(e){this._renderer=e.getRenderer(this)},"onAdd":function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},"onRemove":function(){this._renderer._removePath(this)},"redraw":function(){return this._map&&this._renderer._updatePath(this),this},"setStyle":function(e){return d(this,e),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&e&&Object.prototype.hasOwnProperty.call(e,"weight")&&this._updateBounds()),this},"bringToFront":function(){return this._renderer&&this._renderer._bringToFront(this),this},"bringToBack":function(){return this._renderer&&this._renderer._bringToBack(this),this},"getElement":function(){return this._path},"_reset":function(){this._project(),this._update()},"_clickTolerance":function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),mi=vi.extend({"options":{"fill":!0,"radius":10},"initialize":function(e,t){d(this,t),this._latlng=w(e),this._radius=this.options.radius},"setLatLng":function(e){var t=this._latlng;return this._latlng=w(e),this.redraw(),this.fire("move",{"oldLatLng":t,"latlng":this._latlng})},"getLatLng":function(){return this._latlng},"setRadius":function(e){return this.options.radius=this._radius=e,this.redraw()},"getRadius":function(){return this._radius},"setStyle":function(e){var t=e&&e.radius||this._radius;return vi.prototype.setStyle.call(this,e),this.setRadius(t),this},"_project":function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},"_updateBounds":function(){var e=this._radius,t=this._radiusY||e,i=this._clickTolerance(),e=[e+i,t+i];this._pxBounds=new v(this._point.subtract(e),this._point.add(e))},"_update":function(){this._map&&this._updatePath()},"_updatePath":function(){this._renderer._updateCircle(this)},"_empty":function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},"_containsPoint":function(e){return e.distanceTo(this._point)<=this._radius+this._clickTolerance()}});var yi=mi.extend({"initialize":function(e,t,i){if(d(this,t="number"==typeof t?u({},i,{"radius":t}):t),this._latlng=w(e),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},"setRadius":function(e){return this._mRadius=e,this.redraw()},"getRadius":function(){return this._mRadius},"getBounds":function(){var e=[this._radius,this._radiusY||this._radius];return new o(this._map.layerPointToLatLng(this._point.subtract(e)),this._map.layerPointToLatLng(this._point.add(e)))},"setStyle":vi.prototype.setStyle,"_project":function(){var e,t,i,n,r,o=this._latlng.lng,a=this._latlng.lat,s=this._map,l=s.options.crs;l.distance===oe.distance?(n=Math.PI/180,r=this._mRadius/oe.R/n,e=s.project([a+r,o]),t=s.project([a-r,o]),t=e.add(t).divideBy(2),i=s.unproject(t).lat,n=Math.acos((Math.cos(r*n)-Math.sin(a*n)*Math.sin(i*n))/(Math.cos(a*n)*Math.cos(i*n)))/n,!isNaN(n)&&0!==n||(n=r/Math.cos(Math.PI/180*a)),this._point=t.subtract(s.getPixelOrigin()),this._radius=isNaN(n)?0:t.x-s.project([i,o-n]).x,this._radiusY=t.y-e.y):(r=l.unproject(l.project(this._latlng).subtract([this._mRadius,0])),this._point=s.latLngToLayerPoint(this._latlng),this._radius=this._point.x-s.latLngToLayerPoint(r).x),this._updateBounds()}});var bi=vi.extend({"options":{"smoothFactor":1,"noClip":!1},"initialize":function(e,t){d(this,t),this._setLatLngs(e)},"getLatLngs":function(){return this._latlngs},"setLatLngs":function(e){return this._setLatLngs(e),this.redraw()},"isEmpty":function(){return!this._latlngs.length},"closestLayerPoint":function(e){for(var t=1/0,i=null,n=ai,r=0,o=this._parts.length;r<o;r++)for(var a=this._parts[r],s=1,l=a.length;s<l;s++){var u,c,d=n(e,u=a[s-1],c=a[s],!0);d<t&&(t=d,i=n(e,u,c))}return i&&(i.distance=Math.sqrt(t)),i},"getCenter":function(){if(this._map)return li(this._defaultShape(),this._map.options.crs);throw new Error("Must add layer to map before using getCenter()")},"getBounds":function(){return this._bounds},"addLatLng":function(e,t){return t=t||this._defaultShape(),e=w(e),t.push(e),this._bounds.extend(e),this.redraw()},"_setLatLngs":function(e){this._bounds=new o,this._latlngs=this._convertLatLngs(e)},"_defaultShape":function(){return B(this._latlngs)?this._latlngs:this._latlngs[0]},"_convertLatLngs":function(e){for(var t=[],i=B(e),n=0,r=e.length;n<r;n++)i?(t[n]=w(e[n]),this._bounds.extend(t[n])):t[n]=this._convertLatLngs(e[n]);return t},"_project":function(){var e=new v;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,e),this._bounds.isValid()&&e.isValid()&&(this._rawPxBounds=e,this._updateBounds())},"_updateBounds":function(){var e=this._clickTolerance(),e=new p(e,e);this._rawPxBounds&&(this._pxBounds=new v([this._rawPxBounds.min.subtract(e),this._rawPxBounds.max.add(e)]))},"_projectLatlngs":function(e,t,i){var n,r,o=e[0]instanceof y,a=e.length;if(o){for(r=[],n=0;n<a;n++)r[n]=this._map.latLngToLayerPoint(e[n]),i.extend(r[n]);t.push(r)}else for(n=0;n<a;n++)this._projectLatlngs(e[n],t,i)},"_clipPoints":function(){var e=this._renderer._bounds;if(this._parts=[],this._pxBounds&&this._pxBounds.intersects(e))if(this.options.noClip)this._parts=this._rings;else for(var t,i,n,r,o=this._parts,a=0,s=0,l=this._rings.length;a<l;a++)for(t=0,i=(r=this._rings[a]).length;t<i-1;t++)(n=ni(r[t],r[t+1],e,t,!0))&&(o[s]=o[s]||[],o[s].push(n[0]),n[1]===r[t+1]&&t!==i-2||(o[s].push(n[1]),s++))},"_simplifyPoints":function(){for(var e=this._parts,t=this.options.smoothFactor,i=0,n=e.length;i<n;i++)e[i]=ti(e[i],t)},"_update":function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},"_updatePath":function(){this._renderer._updatePoly(this)},"_containsPoint":function(e,t){var i,n,r,o,a,s,l=this._clickTolerance();if(this._pxBounds&&this._pxBounds.contains(e))for(i=0,o=this._parts.length;i<o;i++)for(n=0,r=(a=(s=this._parts[i]).length)-1;n<a;r=n++)if((t||0!==n)&&ii(e,s[r],s[n])<=l)return!0;return!1}});bi._flat=si;var _i=bi.extend({"options":{"fill":!0},"isEmpty":function(){return!this._latlngs.length||!this._latlngs[0].length},"getCenter":function(){if(this._map)return Qt(this._defaultShape(),this._map.options.crs);throw new Error("Must add layer to map before using getCenter()")},"_convertLatLngs":function(e){var e=bi.prototype._convertLatLngs.call(this,e),t=e.length;return 2<=t&&e[0]instanceof y&&e[0].equals(e[t-1])&&e.pop(),e},"_setLatLngs":function(e){bi.prototype._setLatLngs.call(this,e),B(this._latlngs)&&(this._latlngs=[this._latlngs])},"_defaultShape":function(){return(B(this._latlngs[0])?this._latlngs:this._latlngs[0])[0]},"_clipPoints":function(){var e=this._renderer._bounds,t=this.options.weight,t=new p(t,t),e=new v(e.min.subtract(t),e.max.add(t));if(this._parts=[],this._pxBounds&&this._pxBounds.intersects(e))if(this.options.noClip)this._parts=this._rings;else for(var i,n=0,r=this._rings.length;n<r;n++)(i=Yt(this._rings[n],e,!0)).length&&this._parts.push(i)},"_updatePath":function(){this._renderer._updatePoly(this,!0)},"_containsPoint":function(e){var t,i,n,r,o,a,s,l,u=!1;if(!this._pxBounds||!this._pxBounds.contains(e))return!1;for(r=0,s=this._parts.length;r<s;r++)for(o=0,a=(l=(t=this._parts[r]).length)-1;o<l;a=o++)i=t[o],n=t[a],i.y>e.y!=n.y>e.y&&e.x<(n.x-i.x)*(e.y-i.y)/(n.y-i.y)+i.x&&(u=!u);return u||bi.prototype._containsPoint.call(this,e,!0)}});var wi=di.extend({"initialize":function(e,t){d(this,t),this._layers={},e&&this.addData(e)},"addData":function(e){var t,i,n,r=h(e)?e:e.features;if(r){for(t=0,i=r.length;t<i;t++)((n=r[t]).geometries||n.geometry||n.features||n.coordinates)&&this.addData(n);return this}var o,a=this.options;return(!a.filter||a.filter(e))&&(o=Ei(e,a))?(o.feature=Ai(e),o.defaultOptions=o.options,this.resetStyle(o),a.onEachFeature&&a.onEachFeature(e,o),this.addLayer(o)):this},"resetStyle":function(e){return void 0===e?this.eachLayer(this.resetStyle,this):(e.options=u({},e.defaultOptions),this._setLayerStyle(e,this.options.style),this)},"setStyle":function(t){return this.eachLayer(function(e){this._setLayerStyle(e,t)},this)},"_setLayerStyle":function(e,t){e.setStyle&&("function"==typeof t&&(t=t(e.feature)),e.setStyle(t))}});function Ei(e,t){var i,n,r,o,a="Feature"===e.type?e.geometry:e,s=a?a.coordinates:null,l=[],u=t&&t.pointToLayer,c=t&&t.coordsToLatLng||Ti;if(!s&&!a)return null;switch(a.type){case"Point":return xi(u,e,i=c(s),t);case"MultiPoint":for(r=0,o=s.length;r<o;r++)i=c(s[r]),l.push(xi(u,e,i,t));return new di(l);case"LineString":case"MultiLineString":return n=Si(s,"LineString"===a.type?0:1,c),new bi(n,t);case"Polygon":case"MultiPolygon":return n=Si(s,"Polygon"===a.type?1:2,c),new _i(n,t);case"GeometryCollection":for(r=0,o=a.geometries.length;r<o;r++){var d=Ei({"geometry":a.geometries[r],"type":"Feature","properties":e.properties},t);d&&l.push(d)}return new di(l);case"FeatureCollection":for(r=0,o=a.features.length;r<o;r++){var h=Ei(a.features[r],t);h&&l.push(h)}return new di(l);default:throw new Error("Invalid GeoJSON object.")}}function xi(e,t,i,n){return e?e(t,i):new gi(i,n&&n.markersInheritOptions&&n)}function Ti(e){return new y(e[1],e[0],e[2])}function Si(e,t,i){for(var n,r=[],o=0,a=e.length;o<a;o++)n=t?Si(e[o],t-1,i):(i||Ti)(e[o]),r.push(n);return r}function ki(e,t){return void 0!==(e=w(e)).alt?[i(e.lng,t),i(e.lat,t),i(e.alt,t)]:[i(e.lng,t),i(e.lat,t)]}function Ri(e,t,i,n){for(var r=[],o=0,a=e.length;o<a;o++)r.push(t?Ri(e[o],B(e[o])?0:t-1,i,n):ki(e[o],n));return!t&&i&&0<r.length&&r.push(r[0].slice()),r}function Ci(e,t){return e.feature?u({},e.feature,{"geometry":t}):Ai(t)}function Ai(e){return"Feature"===e.type||"FeatureCollection"===e.type?e:{"type":"Feature","properties":{},"geometry":e}}Se={"toGeoJSON":function(e){return Ci(this,{"type":"Point","coordinates":ki(this.getLatLng(),e)})}};function Oi(e,t){return new wi(e,t)}gi.include(Se),yi.include(Se),mi.include(Se),bi.include({"toGeoJSON":function(e){var t=!B(this._latlngs);return Ci(this,{"type":(t?"Multi":"")+"LineString","coordinates":Ri(this._latlngs,t?1:0,!1,e)})}}),_i.include({"toGeoJSON":function(e){var t=!B(this._latlngs),i=t&&!B(this._latlngs[0]),e=Ri(this._latlngs,i?2:t?1:0,!0,e);return Ci(this,{"type":(i?"Multi":"")+"Polygon","coordinates":e=t?e:[e]})}}),ci.include({"toMultiPoint":function(t){var i=[];return this.eachLayer(function(e){i.push(e.toGeoJSON(t).geometry.coordinates)}),Ci(this,{"type":"MultiPoint","coordinates":i})},"toGeoJSON":function(t){var i,n,e=this.feature&&this.feature.geometry&&this.feature.geometry.type;return"MultiPoint"===e?this.toMultiPoint(t):(i="GeometryCollection"===e,n=[],this.eachLayer(function(e){e.toGeoJSON&&(e=e.toGeoJSON(t),i?n.push(e.geometry):"FeatureCollection"===(e=Ai(e)).type?n.push.apply(n,e.features):n.push(e))}),i?Ci(this,{"geometries":n,"type":"GeometryCollection"}):{"type":"FeatureCollection","features":n})}});var ke=Oi,Li=r.extend({"options":{"opacity":1,"alt":"","interactive":!1,"crossOrigin":!1,"errorOverlayUrl":"","zIndex":1,"className":""},"initialize":function(e,t,i){this._url=e,this._bounds=m(t),d(this,i)},"onAdd":function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(S(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},"onRemove":function(){T(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},"setOpacity":function(e){return this.options.opacity=e,this._image&&this._updateOpacity(),this},"setStyle":function(e){return e.opacity&&this.setOpacity(e.opacity),this},"bringToFront":function(){return this._map&&vt(this._image),this},"bringToBack":function(){return this._map&&mt(this._image),this},"setUrl":function(e){return this._url=e,this._image&&(this._image.src=e),this},"setBounds":function(e){return this._bounds=m(e),this._map&&this._reset(),this},"getEvents":function(){var e={"zoom":this._reset,"viewreset":this._reset};return this._zoomAnimated&&(e.zoomanim=this._animateZoom),e},"setZIndex":function(e){return this.options.zIndex=e,this._updateZIndex(),this},"getBounds":function(){return this._bounds},"getElement":function(){return this._image},"_initImage":function(){var e="IMG"===this._url.tagName,t=this._image=e?this._url:x("img");S(t,"leaflet-image-layer"),this._zoomAnimated&&S(t,"leaflet-zoom-animated"),this.options.className&&S(t,this.options.className),t.onselectstart=c,t.onmousemove=c,t.onload=s(this.fire,this,"load"),t.onerror=s(this._overlayOnError,this,"error"),!this.options.crossOrigin&&""!==this.options.crossOrigin||(t.crossOrigin=!0===this.options.crossOrigin?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),e?this._url=t.src:(t.src=this._url,t.alt=this.options.alt)},"_animateZoom":function(e){var t=this._map.getZoomScale(e.zoom),e=this._map._latLngBoundsToNewLayerBounds(this._bounds,e.zoom,e.center).min;Et(this._image,e,t)},"_reset":function(){var e=this._image,t=new v(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),i=t.getSize();C(e,t.min),e.style.width=i.x+"px",e.style.height=i.y+"px"},"_updateOpacity":function(){R(this._image,this.options.opacity)},"_updateZIndex":function(){this._image&&void 0!==this.options.zIndex&&null!==this.options.zIndex&&(this._image.style.zIndex=this.options.zIndex)},"_overlayOnError":function(){this.fire("error");var e=this.options.errorOverlayUrl;e&&this._url!==e&&(this._url=e,this._image.src=e)},"getCenter":function(){return this._bounds.getCenter()}}),Pi=Li.extend({"options":{"autoplay":!0,"loop":!0,"keepAspectRatio":!0,"muted":!1,"playsInline":!0},"_initImage":function(){var e="VIDEO"===this._url.tagName,t=this._image=e?this._url:x("video");if(S(t,"leaflet-image-layer"),this._zoomAnimated&&S(t,"leaflet-zoom-animated"),this.options.className&&S(t,this.options.className),t.onselectstart=c,t.onmousemove=c,t.onloadeddata=s(this.fire,this,"load"),e){for(var i=t.getElementsByTagName("source"),n=[],r=0;r<i.length;r++)n.push(i[r].src);this._url=0<i.length?n:[t.src]}else{h(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(t.style,"objectFit")&&(t.style.objectFit="fill"),t.autoplay=!!this.options.autoplay,t.loop=!!this.options.loop,t.muted=!!this.options.muted,t.playsInline=!!this.options.playsInline;for(var o=0;o<this._url.length;o++){var a=x("source");a.src=this._url[o],t.appendChild(a)}}}});var Ii=Li.extend({"_initImage":function(){var e=this._image=this._url;S(e,"leaflet-image-layer"),this._zoomAnimated&&S(e,"leaflet-zoom-animated"),this.options.className&&S(e,this.options.className),e.onselectstart=c,e.onmousemove=c}});var Di=r.extend({"options":{"interactive":!1,"offset":[0,0],"className":"","pane":void 0,"content":""},"initialize":function(e,t){e&&(e instanceof y||h(e))?(this._latlng=w(e),d(this,t)):(d(this,e),this._source=t),this.options.content&&(this._content=this.options.content)},"openOn":function(e){return(e=arguments.length?e:this._source._map).hasLayer(this)||e.addLayer(this),this},"close":function(){return this._map&&this._map.removeLayer(this),this},"toggle":function(e){return this._map?this.close():(arguments.length?this._source=e:e=this._source,this._prepareOpen(),this.openOn(e._map)),this},"onAdd":function(e){this._zoomAnimated=e._zoomAnimated,this._container||this._initLayout(),e._fadeAnimated&&R(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),e._fadeAnimated&&R(this._container,1),this.bringToFront(),this.options.interactive&&(S(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},"onRemove":function(e){e._fadeAnimated?(R(this._container,0),this._removeTimeout=setTimeout(s(T,void 0,this._container),200)):T(this._container),this.options.interactive&&(k(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},"getLatLng":function(){return this._latlng},"setLatLng":function(e){return this._latlng=w(e),this._map&&(this._updatePosition(),this._adjustPan()),this},"getContent":function(){return this._content},"setContent":function(e){return this._content=e,this.update(),this},"getElement":function(){return this._container},"update":function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},"getEvents":function(){var e={"zoom":this._updatePosition,"viewreset":this._updatePosition};return this._zoomAnimated&&(e.zoomanim=this._animateZoom),e},"isOpen":function(){return!!this._map&&this._map.hasLayer(this)},"bringToFront":function(){return this._map&&vt(this._container),this},"bringToBack":function(){return this._map&&mt(this._container),this},"_prepareOpen":function(e){if(!(i=this._source)._map)return!1;if(i instanceof di){var t,i=null,n=this._source._layers;for(t in n)if(n[t]._map){i=n[t];break}if(!i)return!1;this._source=i}if(!e)if(i.getCenter)e=i.getCenter();else if(i.getLatLng)e=i.getLatLng();else{if(!i.getBounds)throw new Error("Unable to get source layer LatLng.");e=i.getBounds().getCenter()}return this.setLatLng(e),this._map&&this.update(),!0},"_updateContent":function(){if(this._content){var e=this._contentNode,t="function"==typeof this._content?this._content(this._source||this):this._content;if("string"==typeof t)e.innerHTML=t;else{for(;e.hasChildNodes();)e.removeChild(e.firstChild);e.appendChild(t)}this.fire("contentupdate")}},"_updatePosition":function(){var e,t,i;this._map&&(t=this._map.latLngToLayerPoint(this._latlng),e=g(this.options.offset),i=this._getAnchor(),this._zoomAnimated?C(this._container,t.add(i)):e=e.add(t).add(i),t=this._containerBottom=-e.y,i=this._containerLeft=-Math.round(this._containerWidth/2)+e.x,this._container.style.bottom=t+"px",this._container.style.left=i+"px")},"_getAnchor":function(){return[0,0]}}),Mi=(D.include({"_initOverlay":function(e,t,i,n){var r=t;return r instanceof e||(r=new e(n).setContent(t)),i&&r.setLatLng(i),r}}),r.include({"_initOverlay":function(e,t,i,n){var r=i;return r instanceof e?(d(r,n),r._source=this):(r=t&&!n?t:new e(n,this)).setContent(i),r}}),Di.extend({"options":{"pane":"popupPane","offset":[0,7],"maxWidth":300,"minWidth":50,"maxHeight":null,"autoPan":!0,"autoPanPaddingTopLeft":null,"autoPanPaddingBottomRight":null,"autoPanPadding":[5,5],"keepInView":!1,"closeButton":!0,"autoClose":!0,"closeOnEscapeKey":!0,"className":""},"openOn":function(e){return!(e=arguments.length?e:this._source._map).hasLayer(this)&&e._popup&&e._popup.options.autoClose&&e.removeLayer(e._popup),e._popup=this,Di.prototype.openOn.call(this,e)},"onAdd":function(e){Di.prototype.onAdd.call(this,e),e.fire("popupopen",{"popup":this}),this._source&&(this._source.fire("popupopen",{"popup":this},!0),this._source instanceof vi||this._source.on("preclick",Dt))},"onRemove":function(e){Di.prototype.onRemove.call(this,e),e.fire("popupclose",{"popup":this}),this._source&&(this._source.fire("popupclose",{"popup":this},!0),this._source instanceof vi||this._source.off("preclick",Dt))},"getEvents":function(){var e=Di.prototype.getEvents.call(this);return(void 0!==this.options.closeOnClick?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(e.preclick=this.close),this.options.keepInView&&(e.moveend=this._adjustPan),e},"_initLayout":function(){var e="leaflet-popup",t=this._container=x("div",e+" "+(this.options.className||"")+" leaflet-zoom-animated"),i=this._wrapper=x("div",e+"-content-wrapper",t);this._contentNode=x("div",e+"-content",i),Bt(t),Mt(this._contentNode),A(t,"contextmenu",Dt),this._tipContainer=x("div",e+"-tip-container",t),this._tip=x("div",e+"-tip",this._tipContainer),this.options.closeButton&&((i=this._closeButton=x("a",e+"-close-button",t)).setAttribute("role","button"),i.setAttribute("aria-label","Close popup"),i.href="#close",i.innerHTML='<span aria-hidden="true">&#215;</span>',A(i,"click",function(e){I(e),this.close()},this))},"_updateLayout":function(){var e=this._contentNode,t=e.style,i=(t.width="",t.whiteSpace="nowrap",e.offsetWidth),i=Math.min(i,this.options.maxWidth),i=(i=Math.max(i,this.options.minWidth),t.width=i+1+"px",t.whiteSpace="",t.height="",e.offsetHeight),n=this.options.maxHeight,r="leaflet-popup-scrolled";(n&&n<i?(t.height=n+"px",S):k)(e,r),this._containerWidth=this._container.offsetWidth},"_animateZoom":function(e){var e=this._map._latLngToNewLayerPoint(this._latlng,e.zoom,e.center),t=this._getAnchor();C(this._container,e.add(t))},"_adjustPan":function(){var e,t,i,n,r,o,a,s;this.options.autoPan&&(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning?this._autopanning=!1:(e=this._map,t=parseInt(pt(this._container,"marginBottom"),10)||0,t=this._container.offsetHeight+t,s=this._containerWidth,(i=new p(this._containerLeft,-t-this._containerBottom))._add(xt(this._container)),i=e.layerPointToContainerPoint(i),r=g(this.options.autoPanPadding),n=g(this.options.autoPanPaddingTopLeft||r),r=g(this.options.autoPanPaddingBottomRight||r),o=e.getSize(),a=0,i.x+s+r.x>o.x&&(a=i.x+s-o.x+r.x),i.x-a-n.x<(s=0)&&(a=i.x-n.x),i.y+t+r.y>o.y&&(s=i.y+t-o.y+r.y),i.y-s-n.y<0&&(s=i.y-n.y),(a||s)&&(this.options.keepInView&&(this._autopanning=!0),e.fire("autopanstart").panBy([a,s]))))},"_getAnchor":function(){return g(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}})),Bi=(D.mergeOptions({"closePopupOnClick":!0}),D.include({"openPopup":function(e,t,i){return this._initOverlay(Mi,e,t,i).openOn(this),this},"closePopup":function(e){return(e=arguments.length?e:this._popup)&&e.close(),this}}),r.include({"bindPopup":function(e,t){return this._popup=this._initOverlay(Mi,this._popup,e,t),this._popupHandlersAdded||(this.on({"click":this._openPopup,"keypress":this._onKeyPress,"remove":this.closePopup,"move":this._movePopup}),this._popupHandlersAdded=!0),this},"unbindPopup":function(){return this._popup&&(this.off({"click":this._openPopup,"keypress":this._onKeyPress,"remove":this.closePopup,"move":this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},"openPopup":function(e){return this._popup&&(this instanceof di||(this._popup._source=this),this._popup._prepareOpen(e||this._latlng)&&this._popup.openOn(this._map)),this},"closePopup":function(){return this._popup&&this._popup.close(),this},"togglePopup":function(){return this._popup&&this._popup.toggle(this),this},"isPopupOpen":function(){return!!this._popup&&this._popup.isOpen()},"setPopupContent":function(e){return this._popup&&this._popup.setContent(e),this},"getPopup":function(){return this._popup},"_openPopup":function(e){var t;this._popup&&this._map&&(Ft(e),t=e.layer||e.target,this._popup._source!==t||t instanceof vi?(this._popup._source=t,this.openPopup(e.latlng)):this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(e.latlng))},"_movePopup":function(e){this._popup.setLatLng(e.latlng)},"_onKeyPress":function(e){13===e.originalEvent.keyCode&&this._openPopup(e)}}),Di.extend({"options":{"pane":"tooltipPane","offset":[0,0],"direction":"auto","permanent":!1,"sticky":!1,"opacity":.9},"onAdd":function(e){Di.prototype.onAdd.call(this,e),this.setOpacity(this.options.opacity),e.fire("tooltipopen",{"tooltip":this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{"tooltip":this},!0))},"onRemove":function(e){Di.prototype.onRemove.call(this,e),e.fire("tooltipclose",{"tooltip":this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{"tooltip":this},!0))},"getEvents":function(){var e=Di.prototype.getEvents.call(this);return this.options.permanent||(e.preclick=this.close),e},"_initLayout":function(){var e="leaflet-tooltip "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=x("div",e),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+l(this))},"_updateLayout":function(){},"_adjustPan":function(){},"_setPosition":function(e){var t,i=this._map,n=this._container,r=i.latLngToContainerPoint(i.getCenter()),i=i.layerPointToContainerPoint(e),o=this.options.direction,a=n.offsetWidth,s=n.offsetHeight,l=g(this.options.offset),u=this._getAnchor(),i="top"===o?(t=a/2,s):"bottom"===o?(t=a/2,0):(t="center"===o?a/2:"right"===o?0:"left"===o?a:i.x<r.x?(o="right",0):(o="left",a+2*(l.x+u.x)),s/2);e=e.subtract(g(t,i,!0)).add(l).add(u),k(n,"leaflet-tooltip-right"),k(n,"leaflet-tooltip-left"),k(n,"leaflet-tooltip-top"),k(n,"leaflet-tooltip-bottom"),S(n,"leaflet-tooltip-"+o),C(n,e)},"_updatePosition":function(){var e=this._map.latLngToLayerPoint(this._latlng);this._setPosition(e)},"setOpacity":function(e){this.options.opacity=e,this._container&&R(this._container,e)},"_animateZoom":function(e){e=this._map._latLngToNewLayerPoint(this._latlng,e.zoom,e.center);this._setPosition(e)},"_getAnchor":function(){return g(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}})),Fi=(D.include({"openTooltip":function(e,t,i){return this._initOverlay(Bi,e,t,i).openOn(this),this},"closeTooltip":function(e){return e.close(),this}}),r.include({"bindTooltip":function(e,t){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(Bi,this._tooltip,e,t),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},"unbindTooltip":function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},"_initTooltipInteractions":function(e){var t,i;!e&&this._tooltipHandlersAdded||(t=e?"off":"on",i={"remove":this.closeTooltip,"move":this._moveTooltip},this._tooltip.options.permanent?i.add=this._openTooltip:(i.mouseover=this._openTooltip,i.mouseout=this.closeTooltip,i.click=this._openTooltip,this._map?this._addFocusListeners():i.add=this._addFocusListeners),this._tooltip.options.sticky&&(i.mousemove=this._moveTooltip),this[t](i),this._tooltipHandlersAdded=!e)},"openTooltip":function(e){return this._tooltip&&(this instanceof di||(this._tooltip._source=this),this._tooltip._prepareOpen(e)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},"closeTooltip":function(){if(this._tooltip)return this._tooltip.close()},"toggleTooltip":function(){return this._tooltip&&this._tooltip.toggle(this),this},"isTooltipOpen":function(){return this._tooltip.isOpen()},"setTooltipContent":function(e){return this._tooltip&&this._tooltip.setContent(e),this},"getTooltip":function(){return this._tooltip},"_addFocusListeners":function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},"_addFocusListenersOnLayer":function(e){var t="function"==typeof e.getElement&&e.getElement();t&&(A(t,"focus",function(){this._tooltip._source=e,this.openTooltip()},this),A(t,"blur",this.closeTooltip,this))},"_setAriaDescribedByOnLayer":function(e){e="function"==typeof e.getElement&&e.getElement();e&&e.setAttribute("aria-describedby",this._tooltip._container.id)},"_openTooltip":function(e){var t;this._tooltip&&this._map&&(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag?(this._openOnceFlag=!0,(t=this)._map.once("moveend",function(){t._openOnceFlag=!1,t._openTooltip(e)})):(this._tooltip._source=e.layer||e.target,this.openTooltip(this._tooltip.options.sticky?e.latlng:void 0)))},"_moveTooltip":function(e){var t=e.latlng;this._tooltip.options.sticky&&e.originalEvent&&(e=this._map.mouseEventToContainerPoint(e.originalEvent),e=this._map.containerPointToLayerPoint(e),t=this._map.layerPointToLatLng(e)),this._tooltip.setLatLng(t)}}),hi.extend({"options":{"iconSize":[12,12],"html":!1,"bgPos":null,"className":"leaflet-div-icon"},"createIcon":function(e){var e=e&&"DIV"===e.tagName?e:document.createElement("div"),t=this.options;return t.html instanceof Element?(gt(e),e.appendChild(t.html)):e.innerHTML=!1!==t.html?t.html:"",t.bgPos&&(t=g(t.bgPos),e.style.backgroundPosition=-t.x+"px "+-t.y+"px"),this._setIconStyles(e,"icon"),e},"createShadow":function(){return null}}));hi.Default=fi;var Ni=r.extend({"options":{"tileSize":256,"opacity":1,"updateWhenIdle":E.mobile,"updateWhenZooming":!0,"updateInterval":200,"zIndex":1,"bounds":null,"minZoom":0,"maxZoom":void 0,"maxNativeZoom":void 0,"minNativeZoom":void 0,"noWrap":!1,"pane":"tilePane","className":"","keepBuffer":2},"initialize":function(e){d(this,e)},"onAdd":function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},"beforeAdd":function(e){e._addZoomLimit(this)},"onRemove":function(e){this._removeAllTiles(),T(this._container),e._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},"bringToFront":function(){return this._map&&(vt(this._container),this._setAutoZIndex(Math.max)),this},"bringToBack":function(){return this._map&&(mt(this._container),this._setAutoZIndex(Math.min)),this},"getContainer":function(){return this._container},"setOpacity":function(e){return this.options.opacity=e,this._updateOpacity(),this},"setZIndex":function(e){return this.options.zIndex=e,this._updateZIndex(),this},"isLoading":function(){return this._loading},"redraw":function(){var e;return this._map&&(this._removeAllTiles(),(e=this._clampZoom(this._map.getZoom()))!==this._tileZoom&&(this._tileZoom=e,this._updateLevels()),this._update()),this},"getEvents":function(){var e={"viewprereset":this._invalidateAll,"viewreset":this._resetView,"zoom":this._resetView,"moveend":this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=U(this._onMoveEnd,this.options.updateInterval,this)),e.move=this._onMove),this._zoomAnimated&&(e.zoomanim=this._animateZoom),e},"createTile":function(){return document.createElement("div")},"getTileSize":function(){var e=this.options.tileSize;return e instanceof p?e:new p(e,e)},"_updateZIndex":function(){this._container&&void 0!==this.options.zIndex&&null!==this.options.zIndex&&(this._container.style.zIndex=this.options.zIndex)},"_setAutoZIndex":function(e){for(var t,i=this.getPane().children,n=-e(-1/0,1/0),r=0,o=i.length;r<o;r++)t=i[r].style.zIndex,i[r]!==this._container&&t&&(n=e(n,+t));isFinite(n)&&(this.options.zIndex=n+e(-1,1),this._updateZIndex())},"_updateOpacity":function(){if(this._map&&!E.ielt9){R(this._container,this.options.opacity);var e,t=+new Date,i=!1,n=!1;for(e in this._tiles){var r,o=this._tiles[e];o.current&&o.loaded&&(r=Math.min(1,(t-o.loaded)/200),R(o.el,r),r<1?i=!0:(o.active?n=!0:this._onOpaqueTile(o),o.active=!0))}n&&!this._noPrune&&this._pruneTiles(),i&&(a(this._fadeFrame),this._fadeFrame=_(this._updateOpacity,this))}},"_onOpaqueTile":c,"_initContainer":function(){this._container||(this._container=x("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},"_updateLevels":function(){var e=this._tileZoom,t=this.options.maxZoom;if(void 0!==e){for(var i in this._levels)i=Number(i),this._levels[i].el.children.length||i===e?(this._levels[i].el.style.zIndex=t-Math.abs(e-i),this._onUpdateLevel(i)):(T(this._levels[i].el),this._removeTilesAtZoom(i),this._onRemoveLevel(i),delete this._levels[i]);var n=this._levels[e],r=this._map;return n||((n=this._levels[e]={}).el=x("div","leaflet-tile-container leaflet-zoom-animated",this._container),n.el.style.zIndex=t,n.origin=r.project(r.unproject(r.getPixelOrigin()),e).round(),n.zoom=e,this._setZoomTransform(n,r.getCenter(),r.getZoom()),c(n.el.offsetWidth),this._onCreateLevel(n)),this._level=n}},"_onUpdateLevel":c,"_onRemoveLevel":c,"_onCreateLevel":c,"_pruneTiles":function(){if(this._map){var e,t,i,n=this._map.getZoom();if(n>this.options.maxZoom||n<this.options.minZoom)this._removeAllTiles();else{for(e in this._tiles)(i=this._tiles[e]).retain=i.current;for(e in this._tiles)(i=this._tiles[e]).current&&!i.active&&(t=i.coords,this._retainParent(t.x,t.y,t.z,t.z-5)||this._retainChildren(t.x,t.y,t.z,t.z+2));for(e in this._tiles)this._tiles[e].retain||this._removeTile(e)}}},"_removeTilesAtZoom":function(e){for(var t in this._tiles)this._tiles[t].coords.z===e&&this._removeTile(t)},"_removeAllTiles":function(){for(var e in this._tiles)this._removeTile(e)},"_invalidateAll":function(){for(var e in this._levels)T(this._levels[e].el),this._onRemoveLevel(Number(e)),delete this._levels[e];this._removeAllTiles(),this._tileZoom=void 0},"_retainParent":function(e,t,i,n){var e=Math.floor(e/2),t=Math.floor(t/2),i=i-1,r=new p(+e,+t),r=(r.z=i,this._tileCoordsToKey(r)),r=this._tiles[r];return r&&r.active?r.retain=!0:(r&&r.loaded&&(r.retain=!0),n<i&&this._retainParent(e,t,i,n))},"_retainChildren":function(e,t,i,n){for(var r=2*e;r<2*e+2;r++)for(var o=2*t;o<2*t+2;o++){var a=new p(r,o),a=(a.z=i+1,this._tileCoordsToKey(a)),a=this._tiles[a];a&&a.active?a.retain=!0:(a&&a.loaded&&(a.retain=!0),i+1<n&&this._retainChildren(r,o,i+1,n))}},"_resetView":function(e){e=e&&(e.pinch||e.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),e,e)},"_animateZoom":function(e){this._setView(e.center,e.zoom,!0,e.noUpdate)},"_clampZoom":function(e){var t=this.options;return void 0!==t.minNativeZoom&&e<t.minNativeZoom?t.minNativeZoom:void 0!==t.maxNativeZoom&&t.maxNativeZoom<e?t.maxNativeZoom:e},"_setView":function(e,t,i,n){var r=Math.round(t),r=void 0!==this.options.maxZoom&&r>this.options.maxZoom||void 0!==this.options.minZoom&&r<this.options.minZoom?void 0:this._clampZoom(r),o=this.options.updateWhenZooming&&r!==this._tileZoom;n&&!o||(this._tileZoom=r,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),void 0!==r&&this._update(e),i||this._pruneTiles(),this._noPrune=!!i),this._setZoomTransforms(e,t)},"_setZoomTransforms":function(e,t){for(var i in this._levels)this._setZoomTransform(this._levels[i],e,t)},"_setZoomTransform":function(e,t,i){var n=this._map.getZoomScale(i,e.zoom),t=e.origin.multiplyBy(n).subtract(this._map._getNewPixelOrigin(t,i)).round();E.any3d?Et(e.el,t,n):C(e.el,t)},"_resetGrid":function(){var e=this._map,t=e.options.crs,i=this._tileSize=this.getTileSize(),n=this._tileZoom,r=this._map.getPixelWorldBounds(this._tileZoom);r&&(this._globalTileRange=this._pxBoundsToTileRange(r)),this._wrapX=t.wrapLng&&!this.options.noWrap&&[Math.floor(e.project([0,t.wrapLng[0]],n).x/i.x),Math.ceil(e.project([0,t.wrapLng[1]],n).x/i.y)],this._wrapY=t.wrapLat&&!this.options.noWrap&&[Math.floor(e.project([t.wrapLat[0],0],n).y/i.x),Math.ceil(e.project([t.wrapLat[1],0],n).y/i.y)]},"_onMoveEnd":function(){this._map&&!this._map._animatingZoom&&this._update()},"_getTiledPixelBounds":function(e){var t=this._map,i=t._animatingZoom?Math.max(t._animateToZoom,t.getZoom()):t.getZoom(),i=t.getZoomScale(i,this._tileZoom),e=t.project(e,this._tileZoom).floor(),t=t.getSize().divideBy(2*i);return new v(e.subtract(t),e.add(t))},"_update":function(e){var t=this._map;if(t){var i=this._clampZoom(t.getZoom());if(void 0===e&&(e=t.getCenter()),void 0!==this._tileZoom){var n,t=this._getTiledPixelBounds(e),r=this._pxBoundsToTileRange(t),o=r.getCenter(),a=[],t=this.options.keepBuffer,s=new v(r.getBottomLeft().subtract([t,-t]),r.getTopRight().add([t,-t]));if(!(isFinite(r.min.x)&&isFinite(r.min.y)&&isFinite(r.max.x)&&isFinite(r.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(n in this._tiles){var l=this._tiles[n].coords;l.z===this._tileZoom&&s.contains(new p(l.x,l.y))||(this._tiles[n].current=!1)}if(1<Math.abs(i-this._tileZoom))this._setView(e,i);else{for(var u=r.min.y;u<=r.max.y;u++)for(var c=r.min.x;c<=r.max.x;c++){var d,h=new p(c,u);h.z=this._tileZoom,this._isValidTile(h)&&((d=this._tiles[this._tileCoordsToKey(h)])?d.current=!0:a.push(h))}if(a.sort(function(e,t){return e.distanceTo(o)-t.distanceTo(o)}),0!==a.length){this._loading||(this._loading=!0,this.fire("loading"));for(var f=document.createDocumentFragment(),c=0;c<a.length;c++)this._addTile(a[c],f);this._level.el.appendChild(f)}}}}},"_isValidTile":function(e){var t=this._map.options.crs;if(!t.infinite){var i=this._globalTileRange;if(!t.wrapLng&&(e.x<i.min.x||e.x>i.max.x)||!t.wrapLat&&(e.y<i.min.y||e.y>i.max.y))return!1}return!this.options.bounds||(t=this._tileCoordsToBounds(e),m(this.options.bounds).overlaps(t))},"_keyToBounds":function(e){return this._tileCoordsToBounds(this._keyToTileCoords(e))},"_tileCoordsToNwSe":function(e){var t=this._map,i=this.getTileSize(),n=e.scaleBy(i),i=n.add(i);return[t.unproject(n,e.z),t.unproject(i,e.z)]},"_tileCoordsToBounds":function(e){e=this._tileCoordsToNwSe(e),e=new o(e[0],e[1]);return e=this.options.noWrap?e:this._map.wrapLatLngBounds(e)},"_tileCoordsToKey":function(e){return e.x+":"+e.y+":"+e.z},"_keyToTileCoords":function(e){var e=e.split(":"),t=new p(+e[0],+e[1]);return t.z=+e[2],t},"_removeTile":function(e){var t=this._tiles[e];t&&(T(t.el),delete this._tiles[e],this.fire("tileunload",{"tile":t.el,"coords":this._keyToTileCoords(e)}))},"_initTile":function(e){S(e,"leaflet-tile");var t=this.getTileSize();e.style.width=t.x+"px",e.style.height=t.y+"px",e.onselectstart=c,e.onmousemove=c,E.ielt9&&this.options.opacity<1&&R(e,this.options.opacity)},"_addTile":function(e,t){var i=this._getTilePos(e),n=this._tileCoordsToKey(e),r=this.createTile(this._wrapCoords(e),s(this._tileReady,this,e));this._initTile(r),this.createTile.length<2&&_(s(this._tileReady,this,e,null,r)),C(r,i),this._tiles[n]={"el":r,"coords":e,"current":!0},t.appendChild(r),this.fire("tileloadstart",{"tile":r,"coords":e})},"_tileReady":function(e,t,i){t&&this.fire("tileerror",{"error":t,"tile":i,"coords":e});var n=this._tileCoordsToKey(e);(i=this._tiles[n])&&(i.loaded=+new Date,this._map._fadeAnimated?(R(i.el,0),a(this._fadeFrame),this._fadeFrame=_(this._updateOpacity,this)):(i.active=!0,this._pruneTiles()),t||(S(i.el,"leaflet-tile-loaded"),this.fire("tileload",{"tile":i.el,"coords":e})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),E.ielt9||!this._map._fadeAnimated?_(this._pruneTiles,this):setTimeout(s(this._pruneTiles,this),250)))},"_getTilePos":function(e){return e.scaleBy(this.getTileSize()).subtract(this._level.origin)},"_wrapCoords":function(e){var t=new p(this._wrapX?$(e.x,this._wrapX):e.x,this._wrapY?$(e.y,this._wrapY):e.y);return t.z=e.z,t},"_pxBoundsToTileRange":function(e){var t=this.getTileSize();return new v(e.min.unscaleBy(t).floor(),e.max.unscaleBy(t).ceil().subtract([1,1]))},"_noTilesToLoad":function(){for(var e in this._tiles)if(!this._tiles[e].loaded)return!1;return!0}});var ji=Ni.extend({"options":{"minZoom":0,"maxZoom":18,"subdomains":"abc","errorTileUrl":"","zoomOffset":0,"tms":!1,"zoomReverse":!1,"detectRetina":!1,"crossOrigin":!1,"referrerPolicy":!1},"initialize":function(e,t){this._url=e,(t=d(this,t)).detectRetina&&E.retina&&0<t.maxZoom?(t.tileSize=Math.floor(t.tileSize/2),t.zoomReverse?(t.zoomOffset--,t.minZoom=Math.min(t.maxZoom,t.minZoom+1)):(t.zoomOffset++,t.maxZoom=Math.max(t.minZoom,t.maxZoom-1)),t.minZoom=Math.max(0,t.minZoom)):t.zoomReverse?t.minZoom=Math.min(t.maxZoom,t.minZoom):t.maxZoom=Math.max(t.minZoom,t.maxZoom),"string"==typeof t.subdomains&&(t.subdomains=t.subdomains.split("")),this.on("tileunload",this._onTileRemove)},"setUrl":function(e,t){return this._url===e&&void 0===t&&(t=!0),this._url=e,t||this.redraw(),this},"createTile":function(e,t){var i=document.createElement("img");return A(i,"load",s(this._tileOnLoad,this,t,i)),A(i,"error",s(this._tileOnError,this,t,i)),!this.options.crossOrigin&&""!==this.options.crossOrigin||(i.crossOrigin=!0===this.options.crossOrigin?"":this.options.crossOrigin),"string"==typeof this.options.referrerPolicy&&(i.referrerPolicy=this.options.referrerPolicy),i.alt="",i.src=this.getTileUrl(e),i},"getTileUrl":function(e){var t={"r":E.retina?"@2x":"","s":this._getSubdomain(e),"x":e.x,"y":e.y,"z":this._getZoomForUrl()};return this._map&&!this._map.options.crs.infinite&&(e=this._globalTileRange.max.y-e.y,this.options.tms&&(t.y=e),t["-y"]=e),V(this._url,u(t,this.options))},"_tileOnLoad":function(e,t){E.ielt9?setTimeout(s(e,this,null,t),0):e(null,t)},"_tileOnError":function(e,t,i){var n=this.options.errorTileUrl;n&&t.getAttribute("src")!==n&&(t.src=n),e(i,t)},"_onTileRemove":function(e){e.tile.onload=null},"_getZoomForUrl":function(){var e=this._tileZoom,t=this.options.maxZoom;return(e=this.options.zoomReverse?t-e:e)+this.options.zoomOffset},"_getSubdomain":function(e){e=Math.abs(e.x+e.y)%this.options.subdomains.length;return this.options.subdomains[e]},"_abortLoading":function(){var e,t,i;for(e in this._tiles)this._tiles[e].coords.z!==this._tileZoom&&((i=this._tiles[e].el).onload=c,i.onerror=c,i.complete||(i.src=K,t=this._tiles[e].coords,T(i),delete this._tiles[e],this.fire("tileabort",{"tile":i,"coords":t})))},"_removeTile":function(e){var t=this._tiles[e];if(t)return t.el.setAttribute("src",K),Ni.prototype._removeTile.call(this,e)},"_tileReady":function(e,t,i){if(this._map&&(!i||i.getAttribute("src")!==K))return Ni.prototype._tileReady.call(this,e,t,i)}});function Ui(e,t){return new ji(e,t)}var $i=ji.extend({"defaultWmsParams":{"service":"WMS","request":"GetMap","layers":"","styles":"","format":"image/jpeg","transparent":!1,"version":"1.1.1"},"options":{"crs":null,"uppercase":!1},"initialize":function(e,t){this._url=e;var i,n=u({},this.defaultWmsParams);for(i in t)i in this.options||(n[i]=t[i]);var e=(t=d(this,t)).detectRetina&&E.retina?2:1,r=this.getTileSize();n.width=r.x*e,n.height=r.y*e,this.wmsParams=n},"onAdd":function(e){this._crs=this.options.crs||e.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var t=1.3<=this._wmsVersion?"crs":"srs";this.wmsParams[t]=this._crs.code,ji.prototype.onAdd.call(this,e)},"getTileUrl":function(e){var t=this._tileCoordsToNwSe(e),i=this._crs,i=f(i.project(t[0]),i.project(t[1])),t=i.min,i=i.max,t=(1.3<=this._wmsVersion&&this._crs===ui?[t.y,t.x,i.y,i.x]:[t.x,t.y,i.x,i.y]).join(","),i=ji.prototype.getTileUrl.call(this,e);return i+W(this.wmsParams,i,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+t},"setParams":function(e,t){return u(this.wmsParams,e),t||this.redraw(),this}});ji.WMS=$i,Ui.wms=function(e,t){return new $i(e,t)};var Hi=r.extend({"options":{"padding":.1},"initialize":function(e){d(this,e),l(this),this._layers=this._layers||{}},"onAdd":function(){this._container||(this._initContainer(),S(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},"onRemove":function(){this.off("update",this._updatePaths,this),this._destroyContainer()},"getEvents":function(){var e={"viewreset":this._reset,"zoom":this._onZoom,"moveend":this._update,"zoomend":this._onZoomEnd};return this._zoomAnimated&&(e.zoomanim=this._onAnimZoom),e},"_onAnimZoom":function(e){this._updateTransform(e.center,e.zoom)},"_onZoom":function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},"_updateTransform":function(e,t){var i=this._map.getZoomScale(t,this._zoom),n=this._map.getSize().multiplyBy(.5+this.options.padding),r=this._map.project(this._center,t),n=n.multiplyBy(-i).add(r).subtract(this._map._getNewPixelOrigin(e,t));E.any3d?Et(this._container,n,i):C(this._container,n)},"_reset":function(){for(var e in this._update(),this._updateTransform(this._center,this._zoom),this._layers)this._layers[e]._reset()},"_onZoomEnd":function(){for(var e in this._layers)this._layers[e]._project()},"_updatePaths":function(){for(var e in this._layers)this._layers[e]._update()},"_update":function(){var e=this.options.padding,t=this._map.getSize(),i=this._map.containerPointToLayerPoint(t.multiplyBy(-e)).round();this._bounds=new v(i,i.add(t.multiplyBy(1+2*e)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),zi=Hi.extend({"options":{"tolerance":0},"getEvents":function(){var e=Hi.prototype.getEvents.call(this);return e.viewprereset=this._onViewPreReset,e},"_onViewPreReset":function(){this._postponeUpdatePaths=!0},"onAdd":function(){Hi.prototype.onAdd.call(this),this._draw()},"_initContainer":function(){var e=this._container=document.createElement("canvas");A(e,"mousemove",this._onMouseMove,this),A(e,"click dblclick mousedown mouseup contextmenu",this._onClick,this),A(e,"mouseout",this._handleMouseOut,this),e._leaflet_disable_events=!0,this._ctx=e.getContext("2d")},"_destroyContainer":function(){a(this._redrawRequest),delete this._ctx,T(this._container),P(this._container),delete this._container},"_updatePaths":function(){if(!this._postponeUpdatePaths){for(var e in this._redrawBounds=null,this._layers)this._layers[e]._update();this._redraw()}},"_update":function(){var e,t,i,n;this._map._animatingZoom&&this._bounds||(Hi.prototype._update.call(this),e=this._bounds,t=this._container,i=e.getSize(),n=E.retina?2:1,C(t,e.min),t.width=n*i.x,t.height=n*i.y,t.style.width=i.x+"px",t.style.height=i.y+"px",E.retina&&this._ctx.scale(2,2),this._ctx.translate(-e.min.x,-e.min.y),this.fire("update"))},"_reset":function(){Hi.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},"_initPath":function(e){this._updateDashArray(e);e=(this._layers[l(e)]=e)._order={"layer":e,"prev":this._drawLast,"next":null};this._drawLast&&(this._drawLast.next=e),this._drawLast=e,this._drawFirst=this._drawFirst||this._drawLast},"_addPath":function(e){this._requestRedraw(e)},"_removePath":function(e){var t=e._order,i=t.next,t=t.prev;i?i.prev=t:this._drawLast=t,t?t.next=i:this._drawFirst=i,delete e._order,delete this._layers[l(e)],this._requestRedraw(e)},"_updatePath":function(e){this._extendRedrawBounds(e),e._project(),e._update(),this._requestRedraw(e)},"_updateStyle":function(e){this._updateDashArray(e),this._requestRedraw(e)},"_updateDashArray":function(e){if("string"==typeof e.options.dashArray){for(var t,i=e.options.dashArray.split(/[, ]+/),n=[],r=0;r<i.length;r++){if(t=Number(i[r]),isNaN(t))return;n.push(t)}e.options._dashArray=n}else e.options._dashArray=e.options.dashArray},"_requestRedraw":function(e){this._map&&(this._extendRedrawBounds(e),this._redrawRequest=this._redrawRequest||_(this._redraw,this))},"_extendRedrawBounds":function(e){var t;e._pxBounds&&(t=(e.options.weight||0)+1,this._redrawBounds=this._redrawBounds||new v,this._redrawBounds.extend(e._pxBounds.min.subtract([t,t])),this._redrawBounds.extend(e._pxBounds.max.add([t,t])))},"_redraw":function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},"_clear":function(){var e,t=this._redrawBounds;t?(e=t.getSize(),this._ctx.clearRect(t.min.x,t.min.y,e.x,e.y)):(this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore())},"_draw":function(){var e,t,i=this._redrawBounds;this._ctx.save(),i&&(t=i.getSize(),this._ctx.beginPath(),this._ctx.rect(i.min.x,i.min.y,t.x,t.y),this._ctx.clip()),this._drawing=!0;for(var n=this._drawFirst;n;n=n.next)e=n.layer,(!i||e._pxBounds&&e._pxBounds.intersects(i))&&e._updatePath();this._drawing=!1,this._ctx.restore()},"_updatePoly":function(e,t){if(this._drawing){var i,n,r,o,a=e._parts,s=a.length,l=this._ctx;if(s){for(l.beginPath(),i=0;i<s;i++){for(n=0,r=a[i].length;n<r;n++)o=a[i][n],l[n?"lineTo":"moveTo"](o.x,o.y);t&&l.closePath()}this._fillStroke(l,e)}}},"_updateCircle":function(e){var t,i,n,r;this._drawing&&!e._empty()&&(t=e._point,i=this._ctx,n=Math.max(Math.round(e._radius),1),1!=(r=(Math.max(Math.round(e._radiusY),1)||n)/n)&&(i.save(),i.scale(1,r)),i.beginPath(),i.arc(t.x,t.y/r,n,0,2*Math.PI,!1),1!=r&&i.restore(),this._fillStroke(i,e))},"_fillStroke":function(e,t){var i=t.options;i.fill&&(e.globalAlpha=i.fillOpacity,e.fillStyle=i.fillColor||i.color,e.fill(i.fillRule||"evenodd")),i.stroke&&0!==i.weight&&(e.setLineDash&&e.setLineDash(t.options&&t.options._dashArray||[]),e.globalAlpha=i.opacity,e.lineWidth=i.weight,e.strokeStyle=i.color,e.lineCap=i.lineCap,e.lineJoin=i.lineJoin,e.stroke())},"_onClick":function(e){for(var t,i,n=this._map.mouseEventToLayerPoint(e),r=this._drawFirst;r;r=r.next)(t=r.layer).options.interactive&&t._containsPoint(n)&&(("click"===e.type||"preclick"===e.type)&&this._map._draggableMoved(t)||(i=t));this._fireEvent(!!i&&[i],e)},"_onMouseMove":function(e){var t;!this._map||this._map.dragging.moving()||this._map._animatingZoom||(t=this._map.mouseEventToLayerPoint(e),this._handleMouseHover(e,t))},"_handleMouseOut":function(e){var t=this._hoveredLayer;t&&(k(this._container,"leaflet-interactive"),this._fireEvent([t],e,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},"_handleMouseHover":function(e,t){if(!this._mouseHoverThrottled){for(var i,n,r=this._drawFirst;r;r=r.next)(i=r.layer).options.interactive&&i._containsPoint(t)&&(n=i);n!==this._hoveredLayer&&(this._handleMouseOut(e),n&&(S(this._container,"leaflet-interactive"),this._fireEvent([n],e,"mouseover"),this._hoveredLayer=n)),this._fireEvent(!!this._hoveredLayer&&[this._hoveredLayer],e),this._mouseHoverThrottled=!0,setTimeout(s(function(){this._mouseHoverThrottled=!1},this),32)}},"_fireEvent":function(e,t,i){this._map._fireDOMEvent(t,i||t.type,e)},"_bringToFront":function(e){var t,i,n=e._order;n&&(t=n.next,i=n.prev,t&&((t.prev=i)?i.next=t:t&&(this._drawFirst=t),n.prev=this._drawLast,(this._drawLast.next=n).next=null,this._drawLast=n,this._requestRedraw(e)))},"_bringToBack":function(e){var t,i,n=e._order;n&&(t=n.next,(i=n.prev)&&((i.next=t)?t.prev=i:i&&(this._drawLast=i),n.prev=null,n.next=this._drawFirst,this._drawFirst.prev=n,this._drawFirst=n,this._requestRedraw(e)))}});function Wi(e){return E.canvas?new zi(e):null}var Gi=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(e){return document.createElement("<lvml:"+e+' class="lvml">')}}catch(e){}return function(e){return document.createElement("<"+e+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),Re={"_initContainer":function(){this._container=x("div","leaflet-vml-container")},"_update":function(){this._map._animatingZoom||(Hi.prototype._update.call(this),this.fire("update"))},"_initPath":function(e){var t=e._container=Gi("shape");S(t,"leaflet-vml-shape "+(this.options.className||"")),t.coordsize="1 1",e._path=Gi("path"),t.appendChild(e._path),this._updateStyle(e),this._layers[l(e)]=e},"_addPath":function(e){var t=e._container;this._container.appendChild(t),e.options.interactive&&e.addInteractiveTarget(t)},"_removePath":function(e){var t=e._container;T(t),e.removeInteractiveTarget(t),delete this._layers[l(e)]},"_updateStyle":function(e){var t=e._stroke,i=e._fill,n=e.options,r=e._container;r.stroked=!!n.stroke,r.filled=!!n.fill,n.stroke?(t=t||(e._stroke=Gi("stroke")),r.appendChild(t),t.weight=n.weight+"px",t.color=n.color,t.opacity=n.opacity,n.dashArray?t.dashStyle=h(n.dashArray)?n.dashArray.join(" "):n.dashArray.replace(/( *, *)/g," "):t.dashStyle="",t.endcap=n.lineCap.replace("butt","flat"),t.joinstyle=n.lineJoin):t&&(r.removeChild(t),e._stroke=null),n.fill?(i=i||(e._fill=Gi("fill")),r.appendChild(i),i.color=n.fillColor||n.color,i.opacity=n.fillOpacity):i&&(r.removeChild(i),e._fill=null)},"_updateCircle":function(e){var t=e._point.round(),i=Math.round(e._radius),n=Math.round(e._radiusY||i);this._setPath(e,e._empty()?"M0 0":"AL "+t.x+","+t.y+" "+i+","+n+" 0,23592600")},"_setPath":function(e,t){e._path.v=t},"_bringToFront":function(e){vt(e._container)},"_bringToBack":function(e){mt(e._container)}},Vi=E.vml?Gi:de,qi=Hi.extend({"_initContainer":function(){this._container=Vi("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=Vi("g"),this._container.appendChild(this._rootGroup)},"_destroyContainer":function(){T(this._container),P(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},"_update":function(){var e,t,i;this._map._animatingZoom&&this._bounds||(Hi.prototype._update.call(this),t=(e=this._bounds).getSize(),i=this._container,this._svgSize&&this._svgSize.equals(t)||(this._svgSize=t,i.setAttribute("width",t.x),i.setAttribute("height",t.y)),C(i,e.min),i.setAttribute("viewBox",[e.min.x,e.min.y,t.x,t.y].join(" ")),this.fire("update"))},"_initPath":function(e){var t=e._path=Vi("path");e.options.className&&S(t,e.options.className),e.options.interactive&&S(t,"leaflet-interactive"),this._updateStyle(e),this._layers[l(e)]=e},"_addPath":function(e){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(e._path),e.addInteractiveTarget(e._path)},"_removePath":function(e){T(e._path),e.removeInteractiveTarget(e._path),delete this._layers[l(e)]},"_updatePath":function(e){e._project(),e._update()},"_updateStyle":function(e){var t=e._path,e=e.options;t&&(e.stroke?(t.setAttribute("stroke",e.color),t.setAttribute("stroke-opacity",e.opacity),t.setAttribute("stroke-width",e.weight),t.setAttribute("stroke-linecap",e.lineCap),t.setAttribute("stroke-linejoin",e.lineJoin),e.dashArray?t.setAttribute("stroke-dasharray",e.dashArray):t.removeAttribute("stroke-dasharray"),e.dashOffset?t.setAttribute("stroke-dashoffset",e.dashOffset):t.removeAttribute("stroke-dashoffset")):t.setAttribute("stroke","none"),e.fill?(t.setAttribute("fill",e.fillColor||e.color),t.setAttribute("fill-opacity",e.fillOpacity),t.setAttribute("fill-rule",e.fillRule||"evenodd")):t.setAttribute("fill","none"))},"_updatePoly":function(e,t){this._setPath(e,he(e._parts,t))},"_updateCircle":function(e){var t=e._point,i=Math.max(Math.round(e._radius),1),n="a"+i+","+(Math.max(Math.round(e._radiusY),1)||i)+" 0 1,0 ",t=e._empty()?"M0 0":"M"+(t.x-i)+","+t.y+n+2*i+",0 "+n+2*-i+",0 ";this._setPath(e,t)},"_setPath":function(e,t){e._path.setAttribute("d",t)},"_bringToFront":function(e){vt(e._path)},"_bringToBack":function(e){mt(e._path)}});function Ki(e){return E.svg||E.vml?new qi(e):null}E.vml&&qi.include(Re),D.include({"getRenderer":function(e){e=(e=e.options.renderer||this._getPaneRenderer(e.options.pane)||this.options.renderer||this._renderer)||(this._renderer=this._createRenderer());return this.hasLayer(e)||this.addLayer(e),e},"_getPaneRenderer":function(e){var t;return"overlayPane"!==e&&void 0!==e&&(void 0===(t=this._paneRenderers[e])&&(t=this._createRenderer({"pane":e}),this._paneRenderers[e]=t),t)},"_createRenderer":function(e){return this.options.preferCanvas&&Wi(e)||Ki(e)}});var Zi=_i.extend({"initialize":function(e,t){_i.prototype.initialize.call(this,this._boundsToLatLngs(e),t)},"setBounds":function(e){return this.setLatLngs(this._boundsToLatLngs(e))},"_boundsToLatLngs":function(e){return[(e=m(e)).getSouthWest(),e.getNorthWest(),e.getNorthEast(),e.getSouthEast()]}});qi.create=Vi,qi.pointsToPath=he,wi.geometryToLayer=Ei,wi.coordsToLatLng=Ti,wi.coordsToLatLngs=Si,wi.latLngToCoords=ki,wi.latLngsToCoords=Ri,wi.getFeature=Ci,wi.asFeature=Ai,D.mergeOptions({"boxZoom":!0});var fe=n.extend({"initialize":function(e){this._map=e,this._container=e._container,this._pane=e._panes.overlayPane,this._resetStateTimeout=0,e.on("unload",this._destroy,this)},"addHooks":function(){A(this._container,"mousedown",this._onMouseDown,this)},"removeHooks":function(){P(this._container,"mousedown",this._onMouseDown,this)},"moved":function(){return this._moved},"_destroy":function(){T(this._pane),delete this._pane},"_resetState":function(){this._resetStateTimeout=0,this._moved=!1},"_clearDeferredResetState":function(){0!==this._resetStateTimeout&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},"_onMouseDown":function(e){if(!e.shiftKey||1!==e.which&&1!==e.button)return!1;this._clearDeferredResetState(),this._resetState(),at(),Tt(),this._startPoint=this._map.mouseEventToContainerPoint(e),A(document,{"contextmenu":Ft,"mousemove":this._onMouseMove,"mouseup":this._onMouseUp,"keydown":this._onKeyDown},this)},"_onMouseMove":function(e){this._moved||(this._moved=!0,this._box=x("div","leaflet-zoom-box",this._container),S(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(e);var e=new v(this._point,this._startPoint),t=e.getSize();C(this._box,e.min),this._box.style.width=t.x+"px",this._box.style.height=t.y+"px"},"_finish":function(){this._moved&&(T(this._box),k(this._container,"leaflet-crosshair")),st(),St(),P(document,{"contextmenu":Ft,"mousemove":this._onMouseMove,"mouseup":this._onMouseUp,"keydown":this._onKeyDown},this)},"_onMouseUp":function(e){1!==e.which&&1!==e.button||(this._finish(),this._moved&&(this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(s(this._resetState,this),0),e=new o(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point)),this._map.fitBounds(e).fire("boxzoomend",{"boxZoomBounds":e})))},"_onKeyDown":function(e){27===e.keyCode&&(this._finish(),this._clearDeferredResetState(),this._resetState())}}),Ce=(D.addInitHook("addHandler","boxZoom",fe),D.mergeOptions({"doubleClickZoom":!0}),n.extend({"addHooks":function(){this._map.on("dblclick",this._onDoubleClick,this)},"removeHooks":function(){this._map.off("dblclick",this._onDoubleClick,this)},"_onDoubleClick":function(e){var t=this._map,i=t.getZoom(),n=t.options.zoomDelta,i=e.originalEvent.shiftKey?i-n:i+n;"center"===t.options.doubleClickZoom?t.setZoom(i):t.setZoomAround(e.containerPoint,i)}})),Ae=(D.addInitHook("addHandler","doubleClickZoom",Ce),D.mergeOptions({"dragging":!0,"inertia":!0,"inertiaDeceleration":3400,"inertiaMaxSpeed":1/0,"easeLinearity":.2,"worldCopyJump":!1,"maxBoundsViscosity":0}),n.extend({"addHooks":function(){var e;this._draggable||(e=this._map,this._draggable=new Xt(e._mapPane,e._container),this._draggable.on({"dragstart":this._onDragStart,"drag":this._onDrag,"dragend":this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),e.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),e.on("zoomend",this._onZoomEnd,this),e.whenReady(this._onZoomEnd,this))),S(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},"removeHooks":function(){k(this._map._container,"leaflet-grab"),k(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},"moved":function(){return this._draggable&&this._draggable._moved},"moving":function(){return this._draggable&&this._draggable._moving},"_onDragStart":function(){var e,t=this._map;t._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity?(e=m(this._map.options.maxBounds),this._offsetLimit=f(this._map.latLngToContainerPoint(e.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(e.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))):this._offsetLimit=null,t.fire("movestart").fire("dragstart"),t.options.inertia&&(this._positions=[],this._times=[])},"_onDrag":function(e){var t,i;this._map.options.inertia&&(t=this._lastTime=+new Date,i=this._lastPos=this._draggable._absPos||this._draggable._newPos,this._positions.push(i),this._times.push(t),this._prunePositions(t)),this._map.fire("move",e).fire("drag",e)},"_prunePositions":function(e){for(;1<this._positions.length&&50<e-this._times[0];)this._positions.shift(),this._times.shift()},"_onZoomEnd":function(){var e=this._map.getSize().divideBy(2),t=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=t.subtract(e).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},"_viscousLimit":function(e,t){return e-(e-t)*this._viscosity},"_onPreDragLimit":function(){var e,t;this._viscosity&&this._offsetLimit&&(e=this._draggable._newPos.subtract(this._draggable._startPos),t=this._offsetLimit,e.x<t.min.x&&(e.x=this._viscousLimit(e.x,t.min.x)),e.y<t.min.y&&(e.y=this._viscousLimit(e.y,t.min.y)),e.x>t.max.x&&(e.x=this._viscousLimit(e.x,t.max.x)),e.y>t.max.y&&(e.y=this._viscousLimit(e.y,t.max.y)),this._draggable._newPos=this._draggable._startPos.add(e))},"_onPreDragWrap":function(){var e=this._worldWidth,t=Math.round(e/2),i=this._initialWorldOffset,n=this._draggable._newPos.x,r=(n-t+i)%e+t-i,n=(n+t+i)%e-t-i,e=Math.abs(r+i)<Math.abs(n+i)?r:n;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=e},"_onDragEnd":function(e){var t,i,n,r,o=this._map,a=o.options,s=!a.inertia||e.noInertia||this._times.length<2;o.fire("dragend",e),!s&&(this._prunePositions(+new Date),e=this._lastPos.subtract(this._positions[0]),s=(this._lastTime-this._times[0])/1e3,t=a.easeLinearity,s=(e=e.multiplyBy(t/s)).distanceTo([0,0]),i=Math.min(a.inertiaMaxSpeed,s),e=e.multiplyBy(i/s),n=i/(a.inertiaDeceleration*t),(r=e.multiplyBy(-n/2).round()).x||r.y)?(r=o._limitOffset(r,o.options.maxBounds),_(function(){o.panBy(r,{"duration":n,"easeLinearity":t,"noMoveStart":!0,"animate":!0})})):o.fire("moveend")}})),Oe=(D.addInitHook("addHandler","dragging",Ae),D.mergeOptions({"keyboard":!0,"keyboardPanDelta":80}),n.extend({"keyCodes":{"left":[37],"right":[39],"down":[40],"up":[38],"zoomIn":[187,107,61,171],"zoomOut":[189,109,54,173]},"initialize":function(e){this._map=e,this._setPanDelta(e.options.keyboardPanDelta),this._setZoomDelta(e.options.zoomDelta)},"addHooks":function(){var e=this._map._container;e.tabIndex<=0&&(e.tabIndex="0"),A(e,{"focus":this._onFocus,"blur":this._onBlur,"mousedown":this._onMouseDown},this),this._map.on({"focus":this._addHooks,"blur":this._removeHooks},this)},"removeHooks":function(){this._removeHooks(),P(this._map._container,{"focus":this._onFocus,"blur":this._onBlur,"mousedown":this._onMouseDown},this),this._map.off({"focus":this._addHooks,"blur":this._removeHooks},this)},"_onMouseDown":function(){var e,t,i;this._focused||(i=document.body,e=document.documentElement,t=i.scrollTop||e.scrollTop,i=i.scrollLeft||e.scrollLeft,this._map._container.focus(),window.scrollTo(i,t))},"_onFocus":function(){this._focused=!0,this._map.fire("focus")},"_onBlur":function(){this._focused=!1,this._map.fire("blur")},"_setPanDelta":function(e){for(var t=this._panKeys={},i=this.keyCodes,n=0,r=i.left.length;n<r;n++)t[i.left[n]]=[-1*e,0];for(n=0,r=i.right.length;n<r;n++)t[i.right[n]]=[e,0];for(n=0,r=i.down.length;n<r;n++)t[i.down[n]]=[0,e];for(n=0,r=i.up.length;n<r;n++)t[i.up[n]]=[0,-1*e]},"_setZoomDelta":function(e){for(var t=this._zoomKeys={},i=this.keyCodes,n=0,r=i.zoomIn.length;n<r;n++)t[i.zoomIn[n]]=e;for(n=0,r=i.zoomOut.length;n<r;n++)t[i.zoomOut[n]]=-e},"_addHooks":function(){A(document,"keydown",this._onKeyDown,this)},"_removeHooks":function(){P(document,"keydown",this._onKeyDown,this)},"_onKeyDown":function(e){if(!(e.altKey||e.ctrlKey||e.metaKey)){var t,i,n=e.keyCode,r=this._map;if(n in this._panKeys)r._panAnim&&r._panAnim._inProgress||(i=this._panKeys[n],e.shiftKey&&(i=g(i).multiplyBy(3)),r.options.maxBounds&&(i=r._limitOffset(g(i),r.options.maxBounds)),r.options.worldCopyJump?(t=r.wrapLatLng(r.unproject(r.project(r.getCenter()).add(i))),r.panTo(t)):r.panBy(i));else if(n in this._zoomKeys)r.setZoom(r.getZoom()+(e.shiftKey?3:1)*this._zoomKeys[n]);else{if(27!==n||!r._popup||!r._popup.options.closeOnEscapeKey)return;r.closePopup()}Ft(e)}}})),Le=(D.addInitHook("addHandler","keyboard",Oe),D.mergeOptions({"scrollWheelZoom":!0,"wheelDebounceTime":40,"wheelPxPerZoomLevel":60}),n.extend({"addHooks":function(){A(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},"removeHooks":function(){P(this._map._container,"wheel",this._onWheelScroll,this)},"_onWheelScroll":function(e){var t=$t(e),i=this._map.options.wheelDebounceTime,t=(this._delta+=t,this._lastMousePos=this._map.mouseEventToContainerPoint(e),this._startTime||(this._startTime=+new Date),Math.max(i-(+new Date-this._startTime),0));clearTimeout(this._timer),this._timer=setTimeout(s(this._performZoom,this),t),Ft(e)},"_performZoom":function(){var e=this._map,t=e.getZoom(),i=this._map.options.zoomSnap||0,n=(e._stop(),this._delta/(4*this._map.options.wheelPxPerZoomLevel)),n=4*Math.log(2/(1+Math.exp(-Math.abs(n))))/Math.LN2,i=i?Math.ceil(n/i)*i:n,n=e._limitZoom(t+(0<this._delta?i:-i))-t;this._delta=0,this._startTime=null,n&&("center"===e.options.scrollWheelZoom?e.setZoom(t+n):e.setZoomAround(this._lastMousePos,t+n))}})),Pe=(D.addInitHook("addHandler","scrollWheelZoom",Le),D.mergeOptions({"tapHold":E.touchNative&&E.safari&&E.mobile,"tapTolerance":15}),n.extend({"addHooks":function(){A(this._map._container,"touchstart",this._onDown,this)},"removeHooks":function(){P(this._map._container,"touchstart",this._onDown,this)},"_onDown":function(e){var t;clearTimeout(this._holdTimeout),1===e.touches.length&&(t=e.touches[0],this._startPos=this._newPos=new p(t.clientX,t.clientY),this._holdTimeout=setTimeout(s(function(){this._cancel(),this._isTapValid()&&(A(document,"touchend",I),A(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",t))},this),600),A(document,"touchend touchcancel contextmenu",this._cancel,this),A(document,"touchmove",this._onMove,this))},"_cancelClickPrevent":function e(){P(document,"touchend",I),P(document,"touchend touchcancel",e)},"_cancel":function(){clearTimeout(this._holdTimeout),P(document,"touchend touchcancel contextmenu",this._cancel,this),P(document,"touchmove",this._onMove,this)},"_onMove":function(e){e=e.touches[0];this._newPos=new p(e.clientX,e.clientY)},"_isTapValid":function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},"_simulateEvent":function(e,t){e=new MouseEvent(e,{"bubbles":!0,"cancelable":!0,"view":window,"screenX":t.screenX,"screenY":t.screenY,"clientX":t.clientX,"clientY":t.clientY});e._simulated=!0,t.target.dispatchEvent(e)}})),Ie=(D.addInitHook("addHandler","tapHold",Pe),D.mergeOptions({"touchZoom":E.touch,"bounceAtZoomLimits":!0}),n.extend({"addHooks":function(){S(this._map._container,"leaflet-touch-zoom"),A(this._map._container,"touchstart",this._onTouchStart,this)},"removeHooks":function(){k(this._map._container,"leaflet-touch-zoom"),P(this._map._container,"touchstart",this._onTouchStart,this)},"_onTouchStart":function(e){var t,i,n=this._map;!e.touches||2!==e.touches.length||n._animatingZoom||this._zooming||(t=n.mouseEventToContainerPoint(e.touches[0]),i=n.mouseEventToContainerPoint(e.touches[1]),this._centerPoint=n.getSize()._divideBy(2),this._startLatLng=n.containerPointToLatLng(this._centerPoint),"center"!==n.options.touchZoom&&(this._pinchStartLatLng=n.containerPointToLatLng(t.add(i)._divideBy(2))),this._startDist=t.distanceTo(i),this._startZoom=n.getZoom(),this._moved=!1,this._zooming=!0,n._stop(),A(document,"touchmove",this._onTouchMove,this),A(document,"touchend touchcancel",this._onTouchEnd,this),I(e))},"_onTouchMove":function(e){if(e.touches&&2===e.touches.length&&this._zooming){var t=this._map,i=t.mouseEventToContainerPoint(e.touches[0]),n=t.mouseEventToContainerPoint(e.touches[1]),r=i.distanceTo(n)/this._startDist;if(this._zoom=t.getScaleZoom(r,this._startZoom),!t.options.bounceAtZoomLimits&&(this._zoom<t.getMinZoom()&&r<1||this._zoom>t.getMaxZoom()&&1<r)&&(this._zoom=t._limitZoom(this._zoom)),"center"===t.options.touchZoom){if(this._center=this._startLatLng,1==r)return}else{i=i._add(n)._divideBy(2)._subtract(this._centerPoint);if(1==r&&0===i.x&&0===i.y)return;this._center=t.unproject(t.project(this._pinchStartLatLng,this._zoom).subtract(i),this._zoom)}this._moved||(t._moveStart(!0,!1),this._moved=!0),a(this._animRequest);n=s(t._move,t,this._center,this._zoom,{"pinch":!0,"round":!1},void 0);this._animRequest=_(n,this,!0),I(e)}},"_onTouchEnd":function(){this._moved&&this._zooming?(this._zooming=!1,a(this._animRequest),P(document,"touchmove",this._onTouchMove,this),P(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))):this._zooming=!1}})),Xi=(D.addInitHook("addHandler","touchZoom",Ie),D.BoxZoom=fe,D.DoubleClickZoom=Ce,D.Drag=Ae,D.Keyboard=Oe,D.ScrollWheelZoom=Le,D.TapHold=Pe,D.TouchZoom=Ie,e.Bounds=v,e.Browser=E,e.CRS=re,e.Canvas=zi,e.Circle=yi,e.CircleMarker=mi,e.Class=te,e.Control=M,e.DivIcon=Fi,e.DivOverlay=Di,e.DomEvent=ge,e.DomUtil=pe,e.Draggable=Xt,e.Evented=ie,e.FeatureGroup=di,e.GeoJSON=wi,e.GridLayer=Ni,e.Handler=n,e.Icon=hi,e.ImageOverlay=Li,e.LatLng=y,e.LatLngBounds=o,e.Layer=r,e.LayerGroup=ci,e.LineUtil=ye,e.Map=D,e.Marker=gi,e.Mixin=ve,e.Path=vi,e.Point=p,e.PolyUtil=me,e.Polygon=_i,e.Polyline=bi,e.Popup=Mi,e.PosAnimation=zt,e.Projection=we,e.Rectangle=Zi,e.Renderer=Hi,e.SVG=qi,e.SVGOverlay=Ii,e.TileLayer=ji,e.Tooltip=Bi,e.Transformation=se,e.Util=ee,e.VideoOverlay=Pi,e.bind=s,e.bounds=f,e.canvas=Wi,e.circle=function(e,t,i){return new yi(e,t,i)},e.circleMarker=function(e,t){return new mi(e,t)},e.control=Wt,e.divIcon=function(e){return new Fi(e)},e.extend=u,e.featureGroup=function(e,t){return new di(e,t)},e.geoJSON=Oi,e.geoJson=ke,e.gridLayer=function(e){return new Ni(e)},e.icon=function(e){return new hi(e)},e.imageOverlay=function(e,t,i){return new Li(e,t,i)},e.latLng=w,e.latLngBounds=m,e.layerGroup=function(e,t){return new ci(e,t)},e.map=function(e,t){return new D(e,t)},e.marker=function(e,t){return new gi(e,t)},e.point=g,e.polygon=function(e,t){return new _i(e,t)},e.polyline=function(e,t){return new bi(e,t)},e.popup=function(e,t){return new Mi(e,t)},e.rectangle=function(e,t){return new Zi(e,t)},e.setOptions=d,e.stamp=l,e.svg=Ki,e.svgOverlay=function(e,t,i){return new Ii(e,t,i)},e.tileLayer=Ui,e.tooltip=function(e,t){return new Bi(e,t)},e.transformation=le,e.version="1.9.4",e.videoOverlay=function(e,t,i){return new Pi(e,t,i)},window.L);e.noConflict=function(){return window.L=Xi,this},window.L=e});(function(e,t){typeof exports==="object"&&typeof module!=="undefined"?module.exports=t():typeof define==="function"&&define.amd?define(t):e.Cropper=t()})(this,function(){"use strict";var F={"viewMode":0,"dragMode":"crop","aspectRatio":NaN,"data":null,"preview":"","responsive":true,"restore":true,"checkCrossOrigin":true,"checkOrientation":true,"modal":true,"guides":true,"center":true,"highlight":true,"background":true,"autoCrop":true,"autoCropArea":.8,"movable":true,"rotatable":true,"scalable":true,"zoomable":true,"zoomOnTouch":true,"zoomOnWheel":true,"wheelZoomRatio":.1,"cropBoxMovable":true,"cropBoxResizable":true,"toggleDragModeOnDblclick":true,"minCanvasWidth":0,"minCanvasHeight":0,"minCropBoxWidth":0,"minCropBoxHeight":0,"minContainerWidth":200,"minContainerHeight":100,"ready":null,"cropstart":null,"cropmove":null,"cropend":null,"crop":null,"zoom":null};var N='<div class="cropper-container">'+'<div class="cropper-wrap-box">'+'<div class="cropper-canvas"></div>'+"</div>"+'<div class="cropper-drag-box"></div>'+'<div class="cropper-crop-box">'+'<span class="cropper-view-box"></span>'+'<span class="cropper-dashed dashed-h"></span>'+'<span class="cropper-dashed dashed-v"></span>'+'<span class="cropper-center"></span>'+'<span class="cropper-face"></span>'+'<span class="cropper-line line-e" data-action="e"></span>'+'<span class="cropper-line line-n" data-action="n"></span>'+'<span class="cropper-line line-w" data-action="w"></span>'+'<span class="cropper-line line-s" data-action="s"></span>'+'<span class="cropper-point point-e" data-action="e"></span>'+'<span class="cropper-point point-n" data-action="n"></span>'+'<span class="cropper-point point-w" data-action="w"></span>'+'<span class="cropper-point point-s" data-action="s"></span>'+'<span class="cropper-point point-ne" data-action="ne"></span>'+'<span class="cropper-point point-nw" data-action="nw"></span>'+'<span class="cropper-point point-sw" data-action="sw"></span>'+'<span class="cropper-point point-se" data-action="se"></span>'+"</div>"+"</div>";var i=typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol==="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};var j=function(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}};var U=function(){function n(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}return function(e,t,i){if(t)n(e.prototype,t);if(i)n(e,i);return e}}();var $=function e(t,i,n){if(t===null)t=Function.prototype;var r=Object.getOwnPropertyDescriptor(t,i);if(r===undefined){var o=Object.getPrototypeOf(t);if(o===null){return undefined}else{return e(o,i,n)}}else if("value"in r){return r.value}else{var a=r.get;if(a===undefined){return undefined}return a.call(n)}};var H=function e(t,i,n,r){var o=Object.getOwnPropertyDescriptor(t,i);if(o===undefined){var a=Object.getPrototypeOf(t);if(a!==null){e(a,i,n,r)}}else if("value"in o&&o.writable){o.value=n}else{var s=o.set;if(s!==undefined){s.call(r,n)}}return n};var z=function(e){if(Array.isArray(e)){for(var t=0,i=Array(e.length);t<e.length;t++)i[t]=e[t];return i}else{return Array.from(e)}};var W=/^data:.*,/;var G=/([a-z\d])([A-Z])/g;var V=/^(https?:)\/\/([^:/?#]+):?(\d*)/i;var q=/\s+/;var K=/^(width|height|left|top|marginLeft|marginTop)$/;var Z=/^\s+(.*)\s+$/;var X=/(Macintosh|iPhone|iPod|iPad).*AppleWebKit/i;var Y=typeof window!=="undefined"?window.navigator:null;var Q=Y&&X.test(Y.userAgent);var J=Object.prototype;var ee=J.toString;var te=J.hasOwnProperty;var ie=Array.prototype.slice;var ne=String.fromCharCode;function re(e){return ee.call(e).slice(8,-1).toLowerCase()}function b(e){return typeof e==="number"&&!isNaN(e)}function a(e){return typeof e==="undefined"}function r(e){return(typeof e==="undefined"?"undefined":i(e))==="object"&&e!==null}function c(e){if(!r(e)){return false}try{var t=e.constructor;var i=t.prototype;return t&&i&&te.call(i,"isPrototypeOf")}catch(e){return false}}function h(e){return re(e)==="function"}function oe(e){return Array.isArray?Array.isArray(e):re(e)==="array"}function l(e){if(typeof e==="string"){e=e.trim?e.trim():e.replace(Z,"$1")}return e}function T(t,i){if(t&&h(i)){var e=void 0;if(oe(t)||b(t.length)){var n=t.length;for(e=0;e<n;e++){if(i.call(t,t[e],e,t)===false){break}}}else if(r(t)){Object.keys(t).forEach(function(e){i.call(t,t[e],e,t)})}}return t}function p(i){for(var e=arguments.length,t=Array(e>1?e-1:0),n=1;n<e;n++){t[n-1]=arguments[n]}if(r(i)&&t.length>0){if(Object.assign){return Object.assign.apply(Object,[i].concat(t))}t.forEach(function(t){if(r(t)){Object.keys(t).forEach(function(e){i[e]=t[e]})}})}return i}function u(n,r){for(var e=arguments.length,o=Array(e>2?e-2:0),t=2;t<e;t++){o[t-2]=arguments[t]}return function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++){t[i]=arguments[i]}return n.apply(r,o.concat(t))}}function g(e,t){var i=e.style;T(t,function(e,t){if(K.test(t)&&b(e)){e+="px"}i[t]=e})}function ae(e,t){return e.classList?e.classList.contains(t):e.className.indexOf(t)>-1}function f(e,t){if(!t){return}if(b(e.length)){T(e,function(e){f(e,t)});return}if(e.classList){e.classList.add(t);return}var i=l(e.className);if(!i){e.className=t}else if(i.indexOf(t)<0){e.className=i+" "+t}}function S(e,t){if(!t){return}if(b(e.length)){T(e,function(e){S(e,t)});return}if(e.classList){e.classList.remove(t);return}if(e.className.indexOf(t)>=0){e.className=e.className.replace(t,"")}}function d(e,t,i){if(!t){return}if(b(e.length)){T(e,function(e){d(e,t,i)});return}if(i){f(e,t)}else{S(e,t)}}function n(e){return e.replace(G,"$1-$2").toLowerCase()}function v(e,t){if(r(e[t])){return e[t]}else if(e.dataset){return e.dataset[t]}return e.getAttribute("data-"+n(t))}function m(e,t,i){if(r(i)){e[t]=i}else if(e.dataset){e.dataset[t]=i}else{e.setAttribute("data-"+n(t),i)}}function se(t,i){if(r(t[i])){delete t[i]}else if(t.dataset){try{delete t.dataset[i]}catch(e){t.dataset[i]=null}}else{t.removeAttribute("data-"+n(i))}}function y(t,e,i){var n=l(e).split(q);if(n.length>1){T(n,function(e){y(t,e,i)});return}if(t.removeEventListener){t.removeEventListener(e,i,false)}else if(t.detachEvent){t.detachEvent("on"+e,i)}}function _(r,o,a,e){var t=l(o).split(q);var s=a;if(t.length>1){T(t,function(e){_(r,e,a)});return}if(e){a=function e(){for(var t=arguments.length,i=Array(t),n=0;n<t;n++){i[n]=arguments[n]}y(r,o,a);return s.apply(r,i)}}if(r.addEventListener){r.addEventListener(o,a,false)}else if(r.attachEvent){r.attachEvent("on"+o,a)}}function w(e,t,i){if(e.dispatchEvent){var n=void 0;if(h(Event)&&h(CustomEvent)){if(a(i)){n=new Event(t,{"bubbles":true,"cancelable":true})}else{n=new CustomEvent(t,{"detail":i,"bubbles":true,"cancelable":true})}}else if(a(i)){n=document.createEvent("Event");n.initEvent(t,true,true)}else{n=document.createEvent("CustomEvent");n.initCustomEvent(t,true,true,i)}return e.dispatchEvent(n)}else if(e.fireEvent){return e.fireEvent("on"+t)}return true}function s(e){var t=e||window.event;if(!t.target){t.target=t.srcElement||document}if(!b(t.pageX)&&b(t.clientX)){var i=e.target.ownerDocument||document;var n=i.documentElement;var r=i.body;t.pageX=t.clientX+((n&&n.scrollLeft||r&&r.scrollLeft||0)-(n&&n.clientLeft||r&&r.clientLeft||0));t.pageY=t.clientY+((n&&n.scrollTop||r&&r.scrollTop||0)-(n&&n.clientTop||r&&r.clientTop||0))}return t}function le(e){var t=document.documentElement;var i=e.getBoundingClientRect();return{"left":i.left+((window.scrollX||t&&t.scrollLeft||0)-(t&&t.clientLeft||0)),"top":i.top+((window.scrollY||t&&t.scrollTop||0)-(t&&t.clientTop||0))}}function ue(e,t){return e.getElementsByTagName(t)}function E(e,t){return e.getElementsByClassName?e.getElementsByClassName(t):e.querySelectorAll("."+t)}function x(e){return document.createElement(e)}function k(e,t){e.appendChild(t)}function o(e){if(e.parentNode){e.parentNode.removeChild(e)}}function ce(e){while(e.firstChild){e.removeChild(e.firstChild)}}function de(e){var t=e.match(V);return t&&(t[1]!==location.protocol||t[2]!==location.hostname||t[3]!==location.port)}function he(e){var t="timestamp="+(new Date).getTime();return e+(e.indexOf("?")===-1?"?":"&")+t}function fe(e,t){if(e.naturalWidth&&!Q){t(e.naturalWidth,e.naturalHeight);return}var i=x("img");i.onload=function e(){t(this.width,this.height)};i.src=e.src}function R(e){var t=[];var i=e.translateX;var n=e.translateY;var r=e.rotate;var o=e.scaleX;var a=e.scaleY;if(b(i)&&i!==0){t.push("translateX("+i+"px)")}if(b(n)&&n!==0){t.push("translateY("+n+"px)")}if(b(r)&&r!==0){t.push("rotate("+r+"deg)")}if(b(o)&&o!==1){t.push("scaleX("+o+")")}if(b(a)&&a!==1){t.push("scaleY("+a+")")}var s=t.length?t.join(" "):"none";return{"WebkitTransform":s,"msTransform":s,"transform":s}}function C(e,t){var i=Math.abs(e.degree)%180;var n=(i>90?180-i:i)*Math.PI/180;var r=Math.sin(n);var o=Math.cos(n);var a=e.width;var s=e.height;var l=e.aspectRatio;var u=void 0;var c=void 0;if(!t){u=a*o+s*r;c=a*r+s*o}else{u=a/(o+r/l);c=u/l}return{"width":u,"height":c}}function pe(e,t){var i=x("canvas");var n=i.getContext("2d");var r=0;var o=0;var a=t.naturalWidth;var s=t.naturalHeight;var l=t.rotate;var u=t.scaleX;var c=t.scaleY;var d=b(u)&&b(c)&&(u!==1||c!==1);var h=b(l)&&l!==0;var f=h||d;var p=a*Math.abs(u||1);var g=s*Math.abs(c||1);var v=void 0;var m=void 0;var y=void 0;if(d){v=p/2;m=g/2}if(h){y=C({"width":p,"height":g,"degree":l});p=y.width;g=y.height;v=p/2;m=g/2}i.width=p;i.height=g;if(f){r=-a/2;o=-s/2;n.save();n.translate(v,m)}if(h){n.rotate(l*Math.PI/180)}if(d){n.scale(u,c)}n.drawImage(e,Math.floor(r),Math.floor(o),Math.floor(a),Math.floor(s));if(f){n.restore()}return i}function ge(e,t,i){var n="";var r=t;for(i+=t;r<i;r++){n+=ne(e.getUint8(r))}return n}function ve(e){var t=new DataView(e);var i=t.byteLength;var n=void 0;var r=void 0;var o=void 0;var a=void 0;var s=void 0;var l=void 0;var u=void 0;var c=void 0;var d=void 0;var h=void 0;if(t.getUint8(0)===255&&t.getUint8(1)===216){d=2;while(d<i){if(t.getUint8(d)===255&&t.getUint8(d+1)===225){u=d;break}d++}}if(u){r=u+4;o=u+10;if(ge(t,r,4)==="Exif"){l=t.getUint16(o);s=l===18761;if(s||l===19789){if(t.getUint16(o+2,s)===42){a=t.getUint32(o+4,s);if(a>=8){c=o+a}}}}}if(c){i=t.getUint16(c,s);for(h=0;h<i;h++){d=c+h*12+2;if(t.getUint16(d,s)===274){d+=8;n=t.getUint16(d,s);if(Q){t.setUint16(d,1,s)}break}}}return n}function me(e){var t=e.replace(W,"");var i=atob(t);var n=i.length;var r=new ArrayBuffer(n);var o=new Uint8Array(r);var a=void 0;for(a=0;a<n;a++){o[a]=i.charCodeAt(a)}return r}function ye(e){var t=new Uint8Array(e);var i=t.length;var n="";var r=void 0;for(r=0;r<i;r++){n+=ne(t[r])}return"data:image/jpeg;base64,"+btoa(n)}var be={"render":function e(){var t=this;t.initContainer();t.initCanvas();t.initCropBox();t.renderCanvas();if(t.cropped){t.renderCropBox()}},"initContainer":function e(){var t=this;var i=t.options;var n=t.element;var r=t.container;var o=t.cropper;var a="cropper-hidden";var s=void 0;f(o,a);S(n,a);t.containerData=s={"width":Math.max(r.offsetWidth,Number(i.minContainerWidth)||200),"height":Math.max(r.offsetHeight,Number(i.minContainerHeight)||100)};g(o,{"width":s.width,"height":s.height});f(n,a);S(o,a)},"initCanvas":function e(){var t=this;var i=t.options.viewMode;var n=t.containerData;var r=t.imageData;var o=Math.abs(r.rotate)===90;var a=o?r.naturalHeight:r.naturalWidth;var s=o?r.naturalWidth:r.naturalHeight;var l=a/s;var u=n.width;var c=n.height;if(n.height*l>n.width){if(i===3){u=n.height*l}else{c=n.width/l}}else if(i===3){c=n.width/l}else{u=n.height*l}var d={"naturalWidth":a,"naturalHeight":s,"aspectRatio":l,"width":u,"height":c};d.oldLeft=d.left=(n.width-u)/2;d.oldTop=d.top=(n.height-c)/2;t.canvasData=d;t.limited=i===1||i===2;t.limitCanvas(true,true);t.initialImageData=p({},r);t.initialCanvasData=p({},d)},"limitCanvas":function e(t,i){var n=this;var r=n.options;var o=r.viewMode;var a=n.containerData;var s=n.canvasData;var l=s.aspectRatio;var u=n.cropBoxData;var c=n.cropped&&u;if(t){var d=Number(r.minCanvasWidth)||0;var h=Number(r.minCanvasHeight)||0;if(o>1){d=Math.max(d,a.width);h=Math.max(h,a.height);if(o===3){if(h*l>d){d=h*l}else{h=d/l}}}else if(o>0){if(d){d=Math.max(d,c?u.width:0)}else if(h){h=Math.max(h,c?u.height:0)}else if(c){d=u.width;h=u.height;if(h*l>d){d=h*l}else{h=d/l}}}if(d&&h){if(h*l>d){h=d/l}else{d=h*l}}else if(d){h=d/l}else if(h){d=h*l}s.minWidth=d;s.minHeight=h;s.maxWidth=Infinity;s.maxHeight=Infinity}if(i){if(o){var f=a.width-s.width;var p=a.height-s.height;s.minLeft=Math.min(0,f);s.minTop=Math.min(0,p);s.maxLeft=Math.max(0,f);s.maxTop=Math.max(0,p);if(c&&n.limited){s.minLeft=Math.min(u.left,u.left+(u.width-s.width));s.minTop=Math.min(u.top,u.top+(u.height-s.height));s.maxLeft=u.left;s.maxTop=u.top;if(o===2){if(s.width>=a.width){s.minLeft=Math.min(0,f);s.maxLeft=Math.max(0,f)}if(s.height>=a.height){s.minTop=Math.min(0,p);s.maxTop=Math.max(0,p)}}}}else{s.minLeft=-s.width;s.minTop=-s.height;s.maxLeft=a.width;s.maxTop=a.height}}},"renderCanvas":function e(t){var i=this;var n=i.canvasData;var r=i.imageData;var o=r.rotate;if(i.rotated){i.rotated=false;var a=C({"width":r.width,"height":r.height,"degree":o});var s=a.width/a.height;var l=r.aspectRatio===1;if(l||s!==n.aspectRatio){n.left-=(a.width-n.width)/2;n.top-=(a.height-n.height)/2;n.width=a.width;n.height=a.height;n.aspectRatio=s;n.naturalWidth=r.naturalWidth;n.naturalHeight=r.naturalHeight;if(l&&o%90||o%180){var u=C({"width":r.naturalWidth,"height":r.naturalHeight,"degree":o});n.naturalWidth=u.width;n.naturalHeight=u.height}i.limitCanvas(true,false)}}if(n.width>n.maxWidth||n.width<n.minWidth){n.left=n.oldLeft}if(n.height>n.maxHeight||n.height<n.minHeight){n.top=n.oldTop}n.width=Math.min(Math.max(n.width,n.minWidth),n.maxWidth);n.height=Math.min(Math.max(n.height,n.minHeight),n.maxHeight);i.limitCanvas(false,true);n.oldLeft=n.left=Math.min(Math.max(n.left,n.minLeft),n.maxLeft);n.oldTop=n.top=Math.min(Math.max(n.top,n.minTop),n.maxTop);g(i.canvas,p({"width":n.width,"height":n.height},R({"translateX":n.left,"translateY":n.top})));i.renderImage();if(i.cropped&&i.limited){i.limitCropBox(true,true)}if(t){i.output()}},"renderImage":function e(t){var i=this;var n=i.canvasData;var r=i.imageData;var o=void 0;var a=void 0;var s=void 0;var l=void 0;if(r.rotate){a=C({"width":n.width,"height":n.height,"degree":r.rotate,"aspectRatio":r.aspectRatio},true);s=a.width;l=a.height;o={"width":s,"height":l,"left":(n.width-s)/2,"top":(n.height-l)/2}}p(r,o||{"width":n.width,"height":n.height,"left":0,"top":0});g(i.image,p({"width":r.width,"height":r.height},R(p({"translateX":r.left,"translateY":r.top},r))));if(t){i.output()}},"initCropBox":function e(){var t=this;var i=t.options;var n=i.aspectRatio;var r=Number(i.autoCropArea)||.8;var o=t.canvasData;var a={"width":o.width,"height":o.height};if(n){if(o.height*n>o.width){a.height=a.width/n}else{a.width=a.height*n}}t.cropBoxData=a;t.limitCropBox(true,true);a.width=Math.min(Math.max(a.width,a.minWidth),a.maxWidth);a.height=Math.min(Math.max(a.height,a.minHeight),a.maxHeight);a.width=Math.max(a.minWidth,a.width*r);a.height=Math.max(a.minHeight,a.height*r);a.oldLeft=a.left=o.left+(o.width-a.width)/2;a.oldTop=a.top=o.top+(o.height-a.height)/2;t.initialCropBoxData=p({},a)},"limitCropBox":function e(t,i){var n=this;var r=n.options;var o=r.aspectRatio;var a=n.containerData;var s=n.canvasData;var l=n.cropBoxData;var u=n.limited;if(t){var c=Number(r.minCropBoxWidth)||0;var d=Number(r.minCropBoxHeight)||0;var h=Math.min(a.width,u?s.width:a.width);var f=Math.min(a.height,u?s.height:a.height);c=Math.min(c,a.width);d=Math.min(d,a.height);if(o){if(c&&d){if(d*o>c){d=c/o}else{c=d*o}}else if(c){d=c/o}else if(d){c=d*o}if(f*o>h){f=h/o}else{h=f*o}}l.minWidth=Math.min(c,h);l.minHeight=Math.min(d,f);l.maxWidth=h;l.maxHeight=f}if(i){if(u){l.minLeft=Math.max(0,s.left);l.minTop=Math.max(0,s.top);l.maxLeft=Math.min(a.width,s.left+s.width)-l.width;l.maxTop=Math.min(a.height,s.top+s.height)-l.height}else{l.minLeft=0;l.minTop=0;l.maxLeft=a.width-l.width;l.maxTop=a.height-l.height}}},"renderCropBox":function e(){var t=this;var i=t.options;var n=t.containerData;var r=t.cropBoxData;if(r.width>r.maxWidth||r.width<r.minWidth){r.left=r.oldLeft}if(r.height>r.maxHeight||r.height<r.minHeight){r.top=r.oldTop}r.width=Math.min(Math.max(r.width,r.minWidth),r.maxWidth);r.height=Math.min(Math.max(r.height,r.minHeight),r.maxHeight);t.limitCropBox(false,true);r.oldLeft=r.left=Math.min(Math.max(r.left,r.minLeft),r.maxLeft);r.oldTop=r.top=Math.min(Math.max(r.top,r.minTop),r.maxTop);if(i.movable&&i.cropBoxMovable){m(t.face,"action",r.width===n.width&&r.height===n.height?"move":"all")}g(t.cropBox,p({"width":r.width,"height":r.height},R({"translateX":r.left,"translateY":r.top})));if(t.cropped&&t.limited){t.limitCanvas(true,true)}if(!t.disabled){t.output()}},"output":function e(){var t=this;t.preview();if(t.complete){w(t.element,"crop",t.getData())}}};var A="preview";var _e={"initPreview":function e(){var t=this;var i=t.options.preview;var n=x("img");var r=t.crossOrigin;var o=r?t.crossOriginUrl:t.url;if(r){n.crossOrigin=r}n.src=o;k(t.viewBox,n);t.image2=n;if(!i){return}var a=i.querySelector?[i]:document.querySelectorAll(i);t.previews=a;T(a,function(e){var t=x("img");m(e,A,{"width":e.offsetWidth,"height":e.offsetHeight,"html":e.innerHTML});if(r){t.crossOrigin=r}t.src=o;t.style.cssText="display:block;"+"width:100%;"+"height:auto;"+"min-width:0!important;"+"min-height:0!important;"+"max-width:none!important;"+"max-height:none!important;"+'image-orientation:0deg!important;"';ce(e);k(e,t)})},"resetPreview":function e(){T(this.previews,function(e){var t=v(e,A);g(e,{"width":t.width,"height":t.height});e.innerHTML=t.html;se(e,A)})},"preview":function e(){var t=this;var s=t.imageData;var i=t.canvasData;var n=t.cropBoxData;var l=n.width;var u=n.height;var c=s.width;var d=s.height;var h=n.left-i.left-s.left;var f=n.top-i.top-s.top;if(!t.cropped||t.disabled){return}g(t.image2,p({"width":c,"height":d},R(p({"translateX":-h,"translateY":-f},s))));T(t.previews,function(e){var t=v(e,A);var i=t.width;var n=t.height;var r=i;var o=n;var a=1;if(l){a=i/l;o=u*a}if(u&&o>n){a=n/u;r=l*a;o=n}g(e,{"width":r,"height":o});g(ue(e,"img")[0],p({"width":c*a,"height":d*a},R(p({"translateX":-h*a,"translateY":-f*a},s))))})}};var e=typeof window!=="undefined"?window.PointerEvent:null;var we=e?"pointerdown":"touchstart mousedown";var Ee=e?"pointermove":"touchmove mousemove";var xe=e?" pointerup pointercancel":"touchend touchcancel mouseup";var Te="wheel mousewheel DOMMouseScroll";var Se="dblclick";var ke="resize";var Re="cropstart";var Ce="cropmove";var Ae="cropend";var Oe="crop";var Le="zoom";var Pe={"bind":function e(){var t=this;var i=t.options;var n=t.element;var r=t.cropper;if(h(i.cropstart)){_(n,Re,i.cropstart)}if(h(i.cropmove)){_(n,Ce,i.cropmove)}if(h(i.cropend)){_(n,Ae,i.cropend)}if(h(i.crop)){_(n,Oe,i.crop)}if(h(i.zoom)){_(n,Le,i.zoom)}_(r,we,t.onCropStart=u(t.cropStart,t));if(i.zoomable&&i.zoomOnWheel){_(r,Te,t.onWheel=u(t.wheel,t))}if(i.toggleDragModeOnDblclick){_(r,Se,t.onDblclick=u(t.dblclick,t))}_(document,Ee,t.onCropMove=u(t.cropMove,t));_(document,xe,t.onCropEnd=u(t.cropEnd,t));if(i.responsive){_(window,ke,t.onResize=u(t.resize,t))}},"unbind":function e(){var t=this;var i=t.options;var n=t.element;var r=t.cropper;if(h(i.cropstart)){y(n,Re,i.cropstart)}if(h(i.cropmove)){y(n,Ce,i.cropmove)}if(h(i.cropend)){y(n,Ae,i.cropend)}if(h(i.crop)){y(n,Oe,i.crop)}if(h(i.zoom)){y(n,Le,i.zoom)}y(r,we,t.onCropStart);if(i.zoomable&&i.zoomOnWheel){y(r,Te,t.onWheel)}if(i.toggleDragModeOnDblclick){y(r,Se,t.onDblclick)}y(document,Ee,t.onCropMove);y(document,xe,t.onCropEnd);if(i.responsive){y(window,ke,t.onResize)}}};var Ie=/^(e|w|s|n|se|sw|ne|nw|all|crop|move|zoom)$/;function O(e,t){var i=e.pageX,n=e.pageY;var r={"endX":i,"endY":n};if(t){return r}return p({"startX":i,"startY":n},r)}var De={"resize":function e(){var t=this;var i=t.options.restore;var n=t.container;var r=t.containerData;if(t.disabled||!r){return}var o=n.offsetWidth/r.width;var a=void 0;var s=void 0;if(o!==1||n.offsetHeight!==r.height){if(i){a=t.getCanvasData();s=t.getCropBoxData()}t.render();if(i){t.setCanvasData(T(a,function(e,t){a[t]=e*o}));t.setCropBoxData(T(s,function(e,t){s[t]=e*o}))}}},"dblclick":function e(){var t=this;if(t.disabled){return}t.setDragMode(ae(t.dragBox,"cropper-crop")?"move":"crop")},"wheel":function e(t){var i=this;var n=s(t);var r=Number(i.options.wheelZoomRatio)||.1;var o=1;if(i.disabled){return}n.preventDefault();if(i.wheeling){return}i.wheeling=true;setTimeout(function(){i.wheeling=false},50);if(n.deltaY){o=n.deltaY>0?1:-1}else if(n.wheelDelta){o=-n.wheelDelta/120}else if(n.detail){o=n.detail>0?1:-1}i.zoom(-o*r,n)},"cropStart":function e(t){var i=this;if(i.disabled){return}var n=i.options;var r=i.pointers;var o=s(t);var a=void 0;if(o.changedTouches){T(o.changedTouches,function(e){r[e.identifier]=O(e)})}else{r[o.pointerId||0]=O(o)}if(Object.keys(r).length>1&&n.zoomable&&n.zoomOnTouch){a="zoom"}else{a=v(o.target,"action")}if(Ie.test(a)){if(w(i.element,"cropstart",{"originalEvent":o,"action":a})===false){return}o.preventDefault();i.action=a;i.cropping=false;if(a==="crop"){i.cropping=true;f(i.dragBox,"cropper-modal")}}},"cropMove":function e(t){var i=this;var n=i.action;if(i.disabled||!n){return}var r=i.pointers;var o=s(t);o.preventDefault();if(w(i.element,"cropmove",{"originalEvent":o,"action":n})===false){return}if(o.changedTouches){T(o.changedTouches,function(e){p(r[e.identifier],O(e,true))})}else{p(r[o.pointerId||0],O(o,true))}i.change(o)},"cropEnd":function e(t){var i=this;var n=i.action;if(i.disabled||!n){return}var r=i.pointers;var o=s(t);o.preventDefault();if(o.changedTouches){T(o.changedTouches,function(e){delete r[e.identifier]})}else{delete r[o.pointerId||0]}if(!Object.keys(r).length){i.action=""}if(i.cropping){i.cropping=false;d(i.dragBox,"cropper-modal",i.cropped&&this.options.modal)}w(i.element,"cropend",{"originalEvent":o,"action":n})}};var Me="e";var Be="w";var Fe="s";var Ne="n";var L="se";var P="sw";var I="ne";var D="nw";function je(e){var t=p({},e);var u=[];T(e,function(l,e){delete t[e];T(t,function(e){var t=Math.abs(l.startX-e.startX);var i=Math.abs(l.startY-e.startY);var n=Math.abs(l.endX-e.endX);var r=Math.abs(l.endY-e.endY);var o=Math.sqrt(t*t+i*i);var a=Math.sqrt(n*n+r*r);var s=(a-o)/o;u.push(s)})});u.sort(function(e,t){return Math.abs(e)<Math.abs(t)});return u[0]}var Ue={"change":function e(t){var i=this;var n=i.options;var r=i.containerData;var o=i.canvasData;var a=i.cropBoxData;var s=n.aspectRatio;var l=i.action;var u=a.width;var c=a.height;var d=a.left;var h=a.top;var f=d+u;var p=h+c;var g=0;var v=0;var m=r.width;var y=r.height;var b=true;var _=void 0;if(!s&&t.shiftKey){s=u&&c?u/c:1}if(i.limited){g=a.minLeft;v=a.minTop;m=g+Math.min(r.width,o.width,o.left+o.width);y=v+Math.min(r.height,o.height,o.top+o.height)}var w=i.pointers;var E=w[Object.keys(w)[0]];var x={"x":E.endX-E.startX,"y":E.endY-E.startY};if(s){x.X=x.y*s;x.Y=x.x/s}switch(l){case"all":d+=x.x;h+=x.y;break;case Me:if(x.x>=0&&(f>=m||s&&(h<=v||p>=y))){b=false;break}u+=x.x;if(s){c=u/s;h-=x.Y/2}if(u<0){l=Be;u=0}break;case Ne:if(x.y<=0&&(h<=v||s&&(d<=g||f>=m))){b=false;break}c-=x.y;h+=x.y;if(s){u=c*s;d+=x.X/2}if(c<0){l=Fe;c=0}break;case Be:if(x.x<=0&&(d<=g||s&&(h<=v||p>=y))){b=false;break}u-=x.x;d+=x.x;if(s){c=u/s;h+=x.Y/2}if(u<0){l=Me;u=0}break;case Fe:if(x.y>=0&&(p>=y||s&&(d<=g||f>=m))){b=false;break}c+=x.y;if(s){u=c*s;d-=x.X/2}if(c<0){l=Ne;c=0}break;case I:if(s){if(x.y<=0&&(h<=v||f>=m)){b=false;break}c-=x.y;h+=x.y;u=c*s}else{if(x.x>=0){if(f<m){u+=x.x}else if(x.y<=0&&h<=v){b=false}}else{u+=x.x}if(x.y<=0){if(h>v){c-=x.y;h+=x.y}}else{c-=x.y;h+=x.y}}if(u<0&&c<0){l=P;c=0;u=0}else if(u<0){l=D;u=0}else if(c<0){l=L;c=0}break;case D:if(s){if(x.y<=0&&(h<=v||d<=g)){b=false;break}c-=x.y;h+=x.y;u=c*s;d+=x.X}else{if(x.x<=0){if(d>g){u-=x.x;d+=x.x}else if(x.y<=0&&h<=v){b=false}}else{u-=x.x;d+=x.x}if(x.y<=0){if(h>v){c-=x.y;h+=x.y}}else{c-=x.y;h+=x.y}}if(u<0&&c<0){l=L;c=0;u=0}else if(u<0){l=I;u=0}else if(c<0){l=P;c=0}break;case P:if(s){if(x.x<=0&&(d<=g||p>=y)){b=false;break}u-=x.x;d+=x.x;c=u/s}else{if(x.x<=0){if(d>g){u-=x.x;d+=x.x}else if(x.y>=0&&p>=y){b=false}}else{u-=x.x;d+=x.x}if(x.y>=0){if(p<y){c+=x.y}}else{c+=x.y}}if(u<0&&c<0){l=I;c=0;u=0}else if(u<0){l=L;u=0}else if(c<0){l=D;c=0}break;case L:if(s){if(x.x>=0&&(f>=m||p>=y)){b=false;break}u+=x.x;c=u/s}else{if(x.x>=0){if(f<m){u+=x.x}else if(x.y>=0&&p>=y){b=false}}else{u+=x.x}if(x.y>=0){if(p<y){c+=x.y}}else{c+=x.y}}if(u<0&&c<0){l=D;c=0;u=0}else if(u<0){l=P;u=0}else if(c<0){l=I;c=0}break;case"move":i.move(x.x,x.y);b=false;break;case"zoom":i.zoom(je(w),t);b=false;break;case"crop":if(!x.x||!x.y){b=false;break}_=le(i.cropper);d=E.startX-_.left;h=E.startY-_.top;u=a.minWidth;c=a.minHeight;if(x.x>0){l=x.y>0?L:I}else if(x.x<0){d-=u;l=x.y>0?P:D}if(x.y<0){h-=c}if(!i.cropped){S(i.cropBox,"cropper-hidden");i.cropped=true;if(i.limited){i.limitCropBox(true,true)}}break}if(b){a.width=u;a.height=c;a.left=d;a.top=h;i.action=l;i.renderCropBox()}T(w,function(e){e.startX=e.endX;e.startY=e.endY})}};function $e(e){var n=0;var r=0;var o=0;T(e,function(e){var t=e.startX,i=e.startY;n+=t;r+=i;o+=1});n/=o;r/=o;return{"pageX":n,"pageY":r}}var He={"crop":function e(){var t=this;if(t.ready&&!t.disabled){if(!t.cropped){t.cropped=true;t.limitCropBox(true,true);if(t.options.modal){f(t.dragBox,"cropper-modal")}S(t.cropBox,"cropper-hidden")}t.setCropBoxData(t.initialCropBoxData)}return t},"reset":function e(){var t=this;if(t.ready&&!t.disabled){t.imageData=p({},t.initialImageData);t.canvasData=p({},t.initialCanvasData);t.cropBoxData=p({},t.initialCropBoxData);t.renderCanvas();if(t.cropped){t.renderCropBox()}}return t},"clear":function e(){var t=this;if(t.cropped&&!t.disabled){p(t.cropBoxData,{"left":0,"top":0,"width":0,"height":0});t.cropped=false;t.renderCropBox();t.limitCanvas();t.renderCanvas();S(t.dragBox,"cropper-modal");f(t.cropBox,"cropper-hidden")}return t},"replace":function e(t,i){var n=this;if(!n.disabled&&t){if(n.isImg){n.element.src=t}if(i){n.url=t;n.image.src=t;if(n.ready){n.image2.src=t;T(n.previews,function(e){ue(e,"img")[0].src=t})}}else{if(n.isImg){n.replaced=true}n.options.data=null;n.load(t)}}return n},"enable":function e(){var t=this;if(t.ready){t.disabled=false;S(t.cropper,"cropper-disabled")}return t},"disable":function e(){var t=this;if(t.ready){t.disabled=true;f(t.cropper,"cropper-disabled")}return t},"destroy":function e(){var t=this;var i=t.element;var n=t.image;if(t.loaded){if(t.isImg&&t.replaced){i.src=t.originalUrl}t.unbuild();S(i,"cropper-hidden")}else if(t.isImg){y(i,"load",t.onStart)}else if(n){o(n)}se(i,"cropper");return t},"move":function e(t,i){var n=this;var r=n.canvasData;return n.moveTo(a(t)?t:r.left+Number(t),a(i)?i:r.top+Number(i))},"moveTo":function e(t,i){var n=this;var r=n.canvasData;var o=false;if(a(i)){i=t}t=Number(t);i=Number(i);if(n.ready&&!n.disabled&&n.options.movable){if(b(t)){r.left=t;o=true}if(b(i)){r.top=i;o=true}if(o){n.renderCanvas(true)}}return n},"zoom":function e(t,i){var n=this;var r=n.canvasData;t=Number(t);if(t<0){t=1/(1-t)}else{t=1+t}return n.zoomTo(r.width*t/r.naturalWidth,i)},"zoomTo":function e(t,i){var n=this;var r=n.options;var o=n.canvasData;var a=o.width;var s=o.height;var l=o.naturalWidth;var u=o.naturalHeight;t=Number(t);if(t>=0&&n.ready&&!n.disabled&&r.zoomable){var c=l*t;var d=u*t;if(w(n.element,"zoom",{"originalEvent":i,"oldRatio":a/l,"ratio":c/l})===false){return n}if(i){var h=n.pointers;var f=le(n.cropper);var p=h&&Object.keys(h).length?$e(h):{"pageX":i.pageX,"pageY":i.pageY};o.left-=(c-a)*((p.pageX-f.left-o.left)/a);o.top-=(d-s)*((p.pageY-f.top-o.top)/s)}else{o.left-=(c-a)/2;o.top-=(d-s)/2}o.width=c;o.height=d;n.renderCanvas(true)}return n},"rotate":function e(t){var i=this;return i.rotateTo((i.imageData.rotate||0)+Number(t))},"rotateTo":function e(t){var i=this;t=Number(t);if(b(t)&&i.ready&&!i.disabled&&i.options.rotatable){i.imageData.rotate=t%360;i.rotated=true;i.renderCanvas(true)}return i},"scale":function e(t,i){var n=this;var r=n.imageData;var o=false;if(a(i)){i=t}t=Number(t);i=Number(i);if(n.ready&&!n.disabled&&n.options.scalable){if(b(t)){r.scaleX=t;o=true}if(b(i)){r.scaleY=i;o=true}if(o){n.renderImage(true)}}return n},"scaleX":function e(t){var i=this;var n=i.imageData.scaleY;return i.scale(t,b(n)?n:1)},"scaleY":function e(t){var i=this;var n=i.imageData.scaleX;return i.scale(b(n)?n:1,t)},"getData":function e(i){var t=this;var n=t.options;var r=t.imageData;var o=t.canvasData;var a=t.cropBoxData;var s=void 0;var l=void 0;if(t.ready&&t.cropped){l={"x":a.left-o.left,"y":a.top-o.top,"width":a.width,"height":a.height};s=r.width/r.naturalWidth;T(l,function(e,t){e/=s;l[t]=i?Math.round(e):e})}else{l={"x":0,"y":0,"width":0,"height":0}}if(n.rotatable){l.rotate=r.rotate||0}if(n.scalable){l.scaleX=r.scaleX||1;l.scaleY=r.scaleY||1}return l},"setData":function e(t){var i=this;var n=i.options;var r=i.imageData;var o=i.canvasData;var a={};var s=void 0;var l=void 0;var u=void 0;if(h(t)){t=t.call(i.element)}if(i.ready&&!i.disabled&&c(t)){if(n.rotatable){if(b(t.rotate)&&t.rotate!==r.rotate){r.rotate=t.rotate;i.rotated=s=true}}if(n.scalable){if(b(t.scaleX)&&t.scaleX!==r.scaleX){r.scaleX=t.scaleX;l=true}if(b(t.scaleY)&&t.scaleY!==r.scaleY){r.scaleY=t.scaleY;l=true}}if(s){i.renderCanvas()}else if(l){i.renderImage()}u=r.width/r.naturalWidth;if(b(t.x)){a.left=t.x*u+o.left}if(b(t.y)){a.top=t.y*u+o.top}if(b(t.width)){a.width=t.width*u}if(b(t.height)){a.height=t.height*u}i.setCropBoxData(a)}return i},"getContainerData":function e(){var t=this;return t.ready?t.containerData:{}},"getImageData":function e(){var t=this;return t.loaded?t.imageData:{}},"getCanvasData":function e(){var t=this;var i=t.canvasData;var n={};if(t.ready){T(["left","top","width","height","naturalWidth","naturalHeight"],function(e){n[e]=i[e]})}return n},"setCanvasData":function e(t){var i=this;var n=i.canvasData;var r=n.aspectRatio;if(h(t)){t=t.call(i.element)}if(i.ready&&!i.disabled&&c(t)){if(b(t.left)){n.left=t.left}if(b(t.top)){n.top=t.top}if(b(t.width)){n.width=t.width;n.height=t.width/r}else if(b(t.height)){n.height=t.height;n.width=t.height*r}i.renderCanvas(true)}return i},"getCropBoxData":function e(){var t=this;var i=t.cropBoxData;var n=void 0;if(t.ready&&t.cropped){n={"left":i.left,"top":i.top,"width":i.width,"height":i.height}}return n||{}},"setCropBoxData":function e(t){var i=this;var n=i.cropBoxData;var r=i.options.aspectRatio;var o=void 0;var a=void 0;if(h(t)){t=t.call(i.element)}if(i.ready&&i.cropped&&!i.disabled&&c(t)){if(b(t.left)){n.left=t.left}if(b(t.top)){n.top=t.top}if(b(t.width)&&t.width!==n.width){o=true;n.width=t.width}if(b(t.height)&&t.height!==n.height){a=true;n.height=t.height}if(r){if(o){n.height=n.width/r}else if(a){n.width=n.height*r}}i.renderCropBox()}return i},"getCroppedCanvas":function e(t){var f=this;if(!f.ready||!window.HTMLCanvasElement){return null}if(!f.cropped){return pe(f.image,f.imageData)}if(!c(t)){t={}}var p=f.getData();var g=p.width;var v=p.height;var i=g/v;var n=void 0;var r=void 0;var m=void 0;if(c(t)){n=t.width;r=t.height;if(n){r=n/i;m=n/g}else if(r){n=r*i;m=r/v}}var o=Math.floor(n||g);var a=Math.floor(r||v);var s=x("canvas");var l=s.getContext("2d");s.width=o;s.height=a;if(t.fillColor){l.fillStyle=t.fillColor;l.fillRect(0,0,o,a)}var u=function(){var e=pe(f.image,f.imageData);var t=e.width;var i=e.height;var n=f.canvasData;var r=[e];var o=p.x+n.naturalWidth*(Math.abs(p.scaleX||1)-1)/2;var a=p.y+n.naturalHeight*(Math.abs(p.scaleY||1)-1)/2;var s=void 0;var l=void 0;var u=void 0;var c=void 0;var d=void 0;var h=void 0;if(o<=-g||o>t){o=s=u=d=0}else if(o<=0){u=-o;o=0;s=d=Math.min(t,g+o)}else if(o<=t){u=0;s=d=Math.min(g,t-o)}if(s<=0||a<=-v||a>i){a=l=c=h=0}else if(a<=0){c=-a;a=0;l=h=Math.min(i,v+a)}else if(a<=i){c=0;l=h=Math.min(v,i-a)}r.push(Math.floor(o),Math.floor(a),Math.floor(s),Math.floor(l));if(m){u*=m;c*=m;d*=m;h*=m}if(d>0&&h>0){r.push(Math.floor(u),Math.floor(c),Math.floor(d),Math.floor(h))}return r}();l.drawImage.apply(l,z(u));return s},"setAspectRatio":function e(t){var i=this;var n=i.options;if(!i.disabled&&!a(t)){n.aspectRatio=Math.max(0,t)||NaN;if(i.ready){i.initCropBox();if(i.cropped){i.renderCropBox()}}}return i},"setDragMode":function e(t){var i=this;var n=i.options;var r=i.dragBox;var o=i.face;var a=void 0;var s=void 0;if(i.loaded&&!i.disabled){a=t==="crop";s=n.movable&&t==="move";t=a||s?t:"none";m(r,"action",t);d(r,"cropper-crop",a);d(r,"cropper-move",s);if(!n.cropBoxMovable){m(o,"action",t);d(o,"cropper-crop",a);d(o,"cropper-move",s)}}return i}};var ze="cropper";var M=ze+"-hidden";var We="error";var B="load";var Ge="ready";var Ve="crop";var qe=/^data:/;var Ke=/^data:image\/jpeg;base64,/;var Ze=void 0;var t=function(){function n(e,t){j(this,n);var i=this;i.element=e;i.options=p({},F,c(t)&&t);i.loaded=false;i.ready=false;i.complete=false;i.rotated=false;i.cropped=false;i.disabled=false;i.replaced=false;i.limited=false;i.wheeling=false;i.isImg=false;i.originalUrl="";i.canvasData=null;i.cropBoxData=null;i.previews=null;i.pointers={};i.init()}U(n,[{"key":"init","value":function e(){var t=this;var i=t.element;var n=i.tagName.toLowerCase();var r=void 0;if(v(i,ze)){return}m(i,ze,t);if(n==="img"){t.isImg=true;t.originalUrl=r=i.getAttribute("src");if(!r){return}r=i.src}else if(n==="canvas"&&window.HTMLCanvasElement){r=i.toDataURL()}t.load(r)}},{"key":"load","value":function e(t){var i=this;var n=i.options;var r=i.element;if(!t){return}i.url=t;i.imageData={};if(!n.checkOrientation||!window.ArrayBuffer){i.clone();return}if(qe.test(t)){if(Ke){i.read(me(t))}else{i.clone()}return}var o=new XMLHttpRequest;o.onerror=o.onabort=function(){i.clone()};o.onload=function(){i.read(o.response)};if(n.checkCrossOrigin&&de(t)&&r.crossOrigin){t=he(t)}o.open("get",t);o.responseType="arraybuffer";o.withCredentials=r.crossOrigin==="use-credentials";o.send()}},{"key":"read","value":function e(t){var i=this;var n=i.options;var r=ve(t);var o=i.imageData;var a=0;var s=1;var l=1;if(r>1){i.url=ye(t);switch(r){case 2:s=-1;break;case 3:a=-180;break;case 4:l=-1;break;case 5:a=90;l=-1;break;case 6:a=90;break;case 7:a=90;s=-1;break;case 8:a=-90;break}}if(n.rotatable){o.rotate=a}if(n.scalable){o.scaleX=s;o.scaleY=l}i.clone()}},{"key":"clone","value":function e(){var t=this;var i=t.element;var n=t.url;var r=void 0;var o=void 0;var a=void 0;var s=void 0;if(t.options.checkCrossOrigin&&de(n)){r=i.crossOrigin;if(r){o=n}else{r="anonymous";o=he(n)}}t.crossOrigin=r;t.crossOriginUrl=o;var l=x("img");if(r){l.crossOrigin=r}l.src=o||n;t.image=l;t.onStart=a=u(t.start,t);t.onStop=s=u(t.stop,t);if(t.isImg){if(i.complete){t.start()}else{_(i,B,a)}}else{_(l,B,a);_(l,We,s);f(l,"cropper-hide");i.parentNode.insertBefore(l,i.nextSibling)}}},{"key":"start","value":function e(t){var i=this;var n=i.isImg?i.element:i.image;if(t){y(n,B,i.onStart);y(n,We,i.onStop)}fe(n,function(e,t){p(i.imageData,{"naturalWidth":e,"naturalHeight":t,"aspectRatio":e/t});i.loaded=true;i.build()})}},{"key":"stop","value":function e(){var t=this;var i=t.image;y(i,B,t.onStart);y(i,We,t.onStop);o(i);t.image=null}},{"key":"build","value":function e(){var t=this;var i=t.options;var n=t.element;var r=t.image;var o=void 0;var a=void 0;var s=void 0;var l=void 0;var u=void 0;var c=void 0;if(!t.loaded){return}if(t.ready){t.unbuild()}var d=x("div");d.innerHTML=N;t.container=o=n.parentNode;t.cropper=a=E(d,"cropper-container")[0];t.canvas=s=E(a,"cropper-canvas")[0];t.dragBox=l=E(a,"cropper-drag-box")[0];t.cropBox=u=E(a,"cropper-crop-box")[0];t.viewBox=E(a,"cropper-view-box")[0];t.face=c=E(u,"cropper-face")[0];k(s,r);f(n,M);o.insertBefore(a,n.nextSibling);if(!t.isImg){S(r,"cropper-hide")}t.initPreview();t.bind();i.aspectRatio=Math.max(0,i.aspectRatio)||NaN;i.viewMode=Math.max(0,Math.min(3,Math.round(i.viewMode)))||0;t.cropped=i.autoCrop;if(i.autoCrop){if(i.modal){f(l,"cropper-modal")}}else{f(u,M)}if(!i.guides){f(E(u,"cropper-dashed"),M)}if(!i.center){f(E(u,"cropper-center"),M)}if(i.background){f(a,"cropper-bg")}if(!i.highlight){f(c,"cropper-invisible")}if(i.cropBoxMovable){f(c,"cropper-move");m(c,"action","all")}if(!i.cropBoxResizable){f(E(u,"cropper-line"),M);f(E(u,"cropper-point"),M)}t.setDragMode(i.dragMode);t.render();t.ready=true;t.setData(i.data);t.completing=setTimeout(function(){if(h(i.ready)){_(n,Ge,i.ready,true)}w(n,Ge);w(n,Ve,t.getData());t.complete=true},0)}},{"key":"unbuild","value":function e(){var t=this;if(!t.ready){return}if(!t.complete){clearTimeout(t.completing)}t.ready=false;t.complete=false;t.initialImageData=null;t.initialCanvasData=null;t.initialCropBoxData=null;t.containerData=null;t.canvasData=null;t.cropBoxData=null;t.unbind();t.resetPreview();t.previews=null;t.viewBox=null;t.cropBox=null;t.dragBox=null;t.canvas=null;t.container=null;o(t.cropper);t.cropper=null}}],[{"key":"noConflict","value":function e(){window.Cropper=Ze;return n}},{"key":"setDefaults","value":function e(t){p(F,c(t)&&t)}}]);return n}();p(t.prototype,be);p(t.prototype,_e);p(t.prototype,Pe);p(t.prototype,De);p(t.prototype,Ue);p(t.prototype,He);if(typeof window!=="undefined"){Ze=window.Cropper;window.Cropper=t}return t});!function ss(ls){var e,t;e=this,t=function(){"use strict";function t(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),i.push.apply(i,n)}return i}function k(r){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?t(Object(o),!0).forEach(function(e){var t,i,n;t=r,i=e,n=o[e],(i=a(i))in t?Object.defineProperty(t,i,{"value":n,"enumerable":!0,"configurable":!0,"writable":!0}):t[i]=n}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(o)):t(Object(o)).forEach(function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(o,e))})}return r}function a(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}function n(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,a(n.key),n)}}function l(e,t,i){return t&&n(e.prototype,t),i&&n(e,i),Object.defineProperty(e,"prototype",{"writable":!1}),e}function ge(){return ge=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e},ge.apply(this,arguments)}function u(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,d(e,t)}function r(e){return r=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},r(e)}function d(e,t){return d=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},d(e,t)}function h(e,t,i){return h=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}()?Reflect.construct.bind():function(e,t,i){var n=[null];n.push.apply(n,t);var r=new(Function.bind.apply(e,n));return i&&d(r,i.prototype),r},h.apply(null,arguments)}function f(e){var i="function"==typeof Map?new Map:void 0;return f=function(e){if(null===e||!function(t){try{return-1!==Function.toString.call(t).indexOf("[native code]")}catch(e){return"function"==typeof t}}(e))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==i){if(i.has(e))return i.get(e);i.set(e,t)}function t(){return h(e,arguments,r(this).constructor)}return t.prototype=Object.create(e.prototype,{"constructor":{"value":t,"enumerable":!1,"writable":!0,"configurable":!0}}),d(t,e)},f(e)}function _(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}function R(e,t){var i="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(i)return(i=i.call(e)).next.bind(i);if(Array.isArray(e)||(i=function(e,t){if(e){if("string"==typeof e)return _(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?_(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){i&&(e=i);var n=0;return function(){return n>=e.length?{"done":!0}:{"done":!1,"value":e[n++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function e(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var i={"exports":{}};!function(e,t){var i,c,n,r,d;i=/^(?=((?:[a-zA-Z0-9+\-.]+:)?))\1(?=((?:\/\/[^\/?#]*)?))\2(?=((?:(?:[^?#\/]*\/)*[^;?#\/]*)?))\3((?:;[^?#]*)?)(\?[^#]*)?(#[^]*)?$/,c=/^(?=([^\/?#]*))\1([^]*)$/,n=/(?:\/|^)\.(?=\/)/g,r=/(?:\/|^)\.\.\/(?!\.\.\/)[^\/]*(?=\/)/g,d={"buildAbsoluteURL":function(e,t,i){if(i=i||{},e=e.trim(),!(t=t.trim())){if(!i.alwaysNormalize)return e;var n=d.parseURL(e);if(!n)throw new Error("Error trying to parse base URL.");return n.path=d.normalizePath(n.path),d.buildURLFromParts(n)}var r=d.parseURL(t);if(!r)throw new Error("Error trying to parse relative URL.");if(r.scheme)return i.alwaysNormalize?(r.path=d.normalizePath(r.path),d.buildURLFromParts(r)):t;var o=d.parseURL(e);if(!o)throw new Error("Error trying to parse base URL.");if(!o.netLoc&&o.path&&"/"!==o.path[0]){var a=c.exec(o.path);o.netLoc=a[1],o.path=a[2]}o.netLoc&&!o.path&&(o.path="/");var s={"scheme":o.scheme,"netLoc":r.netLoc,"path":null,"params":r.params,"query":r.query,"fragment":r.fragment};if(!r.netLoc&&(s.netLoc=o.netLoc,"/"!==r.path[0]))if(r.path){var l=o.path,u=l.substring(0,l.lastIndexOf("/")+1)+r.path;s.path=d.normalizePath(u)}else s.path=o.path,r.params||(s.params=o.params,r.query||(s.query=o.query));return null===s.path&&(s.path=i.alwaysNormalize?d.normalizePath(r.path):r.path),d.buildURLFromParts(s)},"parseURL":function(e){var t=i.exec(e);return t?{"scheme":t[1]||"","netLoc":t[2]||"","path":t[3]||"","params":t[4]||"","query":t[5]||"","fragment":t[6]||""}:null},"normalizePath":function(e){for(e=e.split("").reverse().join("").replace(n,"");e.length!==(e=e.replace(r,"")).length;);return e.split("").reverse().join("")},"buildURLFromParts":function(e){return e.scheme+e.netLoc+e.path+e.params+e.query+e.fragment}},e.exports=d}(i);var L=i.exports,J=Number.isFinite||function(e){return"number"==typeof e&&isFinite(e)},P=Number.isSafeInteger||function(e){return"number"==typeof e&&Math.abs(e)<=D},D=Number.MAX_SAFE_INTEGER||9007199254740991,ve=function(e){return e.MEDIA_ATTACHING="hlsMediaAttaching",e.MEDIA_ATTACHED="hlsMediaAttached",e.MEDIA_DETACHING="hlsMediaDetaching",e.MEDIA_DETACHED="hlsMediaDetached",e.BUFFER_RESET="hlsBufferReset",e.BUFFER_CODECS="hlsBufferCodecs",e.BUFFER_CREATED="hlsBufferCreated",e.BUFFER_APPENDING="hlsBufferAppending",e.BUFFER_APPENDED="hlsBufferAppended",e.BUFFER_EOS="hlsBufferEos",e.BUFFER_FLUSHING="hlsBufferFlushing",e.BUFFER_FLUSHED="hlsBufferFlushed",e.MANIFEST_LOADING="hlsManifestLoading",e.MANIFEST_LOADED="hlsManifestLoaded",e.MANIFEST_PARSED="hlsManifestParsed",e.LEVEL_SWITCHING="hlsLevelSwitching",e.LEVEL_SWITCHED="hlsLevelSwitched",e.LEVEL_LOADING="hlsLevelLoading",e.LEVEL_LOADED="hlsLevelLoaded",e.LEVEL_UPDATED="hlsLevelUpdated",e.LEVEL_PTS_UPDATED="hlsLevelPtsUpdated",e.LEVELS_UPDATED="hlsLevelsUpdated",e.AUDIO_TRACKS_UPDATED="hlsAudioTracksUpdated",e.AUDIO_TRACK_SWITCHING="hlsAudioTrackSwitching",e.AUDIO_TRACK_SWITCHED="hlsAudioTrackSwitched",e.AUDIO_TRACK_LOADING="hlsAudioTrackLoading",e.AUDIO_TRACK_LOADED="hlsAudioTrackLoaded",e.SUBTITLE_TRACKS_UPDATED="hlsSubtitleTracksUpdated",e.SUBTITLE_TRACKS_CLEARED="hlsSubtitleTracksCleared",e.SUBTITLE_TRACK_SWITCH="hlsSubtitleTrackSwitch",e.SUBTITLE_TRACK_LOADING="hlsSubtitleTrackLoading",e.SUBTITLE_TRACK_LOADED="hlsSubtitleTrackLoaded",e.SUBTITLE_FRAG_PROCESSED="hlsSubtitleFragProcessed",e.CUES_PARSED="hlsCuesParsed",e.NON_NATIVE_TEXT_TRACKS_FOUND="hlsNonNativeTextTracksFound",e.INIT_PTS_FOUND="hlsInitPtsFound",e.FRAG_LOADING="hlsFragLoading",e.FRAG_LOAD_EMERGENCY_ABORTED="hlsFragLoadEmergencyAborted",e.FRAG_LOADED="hlsFragLoaded",e.FRAG_DECRYPTED="hlsFragDecrypted",e.FRAG_PARSING_INIT_SEGMENT="hlsFragParsingInitSegment",e.FRAG_PARSING_USERDATA="hlsFragParsingUserdata",e.FRAG_PARSING_METADATA="hlsFragParsingMetadata",e.FRAG_PARSED="hlsFragParsed",e.FRAG_BUFFERED="hlsFragBuffered",e.FRAG_CHANGED="hlsFragChanged",e.FPS_DROP="hlsFpsDrop",e.FPS_DROP_LEVEL_CAPPING="hlsFpsDropLevelCapping",e.MAX_AUTO_LEVEL_UPDATED="hlsMaxAutoLevelUpdated",e.ERROR="hlsError",e.DESTROYING="hlsDestroying",e.KEY_LOADING="hlsKeyLoading",e.KEY_LOADED="hlsKeyLoaded",e.LIVE_BACK_BUFFER_REACHED="hlsLiveBackBufferReached",e.BACK_BUFFER_REACHED="hlsBackBufferReached",e.STEERING_MANIFEST_LOADED="hlsSteeringManifestLoaded",e}({}),me=function(e){return e.NETWORK_ERROR="networkError",e.MEDIA_ERROR="mediaError",e.KEY_SYSTEM_ERROR="keySystemError",e.MUX_ERROR="muxError",e.OTHER_ERROR="otherError",e}({}),ye=function(e){return e.KEY_SYSTEM_NO_KEYS="keySystemNoKeys",e.KEY_SYSTEM_NO_ACCESS="keySystemNoAccess",e.KEY_SYSTEM_NO_SESSION="keySystemNoSession",e.KEY_SYSTEM_NO_CONFIGURED_LICENSE="keySystemNoConfiguredLicense",e.KEY_SYSTEM_LICENSE_REQUEST_FAILED="keySystemLicenseRequestFailed",e.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED="keySystemServerCertificateRequestFailed",e.KEY_SYSTEM_SERVER_CERTIFICATE_UPDATE_FAILED="keySystemServerCertificateUpdateFailed",e.KEY_SYSTEM_SESSION_UPDATE_FAILED="keySystemSessionUpdateFailed",e.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED="keySystemStatusOutputRestricted",e.KEY_SYSTEM_STATUS_INTERNAL_ERROR="keySystemStatusInternalError",e.MANIFEST_LOAD_ERROR="manifestLoadError",e.MANIFEST_LOAD_TIMEOUT="manifestLoadTimeOut",e.MANIFEST_PARSING_ERROR="manifestParsingError",e.MANIFEST_INCOMPATIBLE_CODECS_ERROR="manifestIncompatibleCodecsError",e.LEVEL_EMPTY_ERROR="levelEmptyError",e.LEVEL_LOAD_ERROR="levelLoadError",e.LEVEL_LOAD_TIMEOUT="levelLoadTimeOut",e.LEVEL_PARSING_ERROR="levelParsingError",e.LEVEL_SWITCH_ERROR="levelSwitchError",e.AUDIO_TRACK_LOAD_ERROR="audioTrackLoadError",e.AUDIO_TRACK_LOAD_TIMEOUT="audioTrackLoadTimeOut",e.SUBTITLE_LOAD_ERROR="subtitleTrackLoadError",e.SUBTITLE_TRACK_LOAD_TIMEOUT="subtitleTrackLoadTimeOut",e.FRAG_LOAD_ERROR="fragLoadError",e.FRAG_LOAD_TIMEOUT="fragLoadTimeOut",e.FRAG_DECRYPT_ERROR="fragDecryptError",e.FRAG_PARSING_ERROR="fragParsingError",e.FRAG_GAP="fragGap",e.REMUX_ALLOC_ERROR="remuxAllocError",e.KEY_LOAD_ERROR="keyLoadError",e.KEY_LOAD_TIMEOUT="keyLoadTimeOut",e.BUFFER_ADD_CODEC_ERROR="bufferAddCodecError",e.BUFFER_INCOMPATIBLE_CODECS_ERROR="bufferIncompatibleCodecsError",e.BUFFER_APPEND_ERROR="bufferAppendError",e.BUFFER_APPENDING_ERROR="bufferAppendingError",e.BUFFER_STALLED_ERROR="bufferStalledError",e.BUFFER_FULL_ERROR="bufferFullError",e.BUFFER_SEEK_OVER_HOLE="bufferSeekOverHole",e.BUFFER_NUDGE_ON_STALL="bufferNudgeOnStall",e.INTERNAL_EXCEPTION="internalException",e.INTERNAL_ABORTED="aborted",e.UNKNOWN="unknown",e}({}),B=function(){},F={"trace":B,"debug":B,"log":B,"warn":B,"info":B,"error":B},N=F;function j(t){for(var e=arguments.length,i=new Array(e>1?e-1:0),n=1;n<e;n++)i[n-1]=arguments[n];i.forEach(function(e){N[e]=t[e]?t[e].bind(t):function(e){var t=self.console[e];return t?t.bind(self.console,"["+e+"] >"):B}(e)})}function U(e,t){if("object"==typeof console&&!0===e||"object"==typeof e){j(e,"debug","log","info","warn","error");try{N.log('Debug logs enabled for "'+t+'" in hls.js version 1.5.11')}catch(e){N=F}}else N=F}var be=N,$=/^(\d+)x(\d+)$/,H=/(.+?)=(".*?"|.*?)(?:,|$)/g,ee=function(){function t(e){"string"==typeof e&&(e=t.parseAttrList(e)),ge(this,e)}var e=t.prototype;return e.decimalInteger=function(e){var t=parseInt(this[e],10);return t>Number.MAX_SAFE_INTEGER?1/0:t},e.hexadecimalInteger=function(e){if(this[e]){var t=(this[e]||"0x").slice(2);t=(1&t.length?"0":"")+t;for(var i=new Uint8Array(t.length/2),n=0;n<t.length/2;n++)i[n]=parseInt(t.slice(2*n,2*n+2),16);return i}return null},e.hexadecimalIntegerAsNumber=function(e){var t=parseInt(this[e],16);return t>Number.MAX_SAFE_INTEGER?1/0:t},e.decimalFloatingPoint=function(e){return parseFloat(this[e])},e.optionalFloat=function(e,t){var i=this[e];return i?parseFloat(i):t},e.enumeratedString=function(e){return this[e]},e.bool=function(e){return"YES"===this[e]},e.decimalResolution=function(e){var t=$.exec(this[e]);if(null!==t)return{"width":parseInt(t[1],10),"height":parseInt(t[2],10)}},t.parseAttrList=function(e){var t,i={};for(H.lastIndex=0;null!==(t=H.exec(e));){var n=t[2];0===n.indexOf('"')&&n.lastIndexOf('"')===n.length-1&&(n=n.slice(1,-1)),i[t[1].trim()]=n}return i},l(t,[{"key":"clientAttrs","get":function(){return Object.keys(this).filter(function(e){return"X-"===e.substring(0,2)})}}]),t}();function z(e){return"SCTE35-OUT"===e||"SCTE35-IN"===e}var ie=function(){function e(e,t){if(this.attr=void 0,this._startDate=void 0,this._endDate=void 0,this._badValueForSameId=void 0,t){var i=t.attr;for(var n in i)if(Object.prototype.hasOwnProperty.call(e,n)&&e[n]!==i[n]){be.warn('DATERANGE tag attribute: "'+n+'" does not match for tags with ID: "'+e.ID+'"'),this._badValueForSameId=n;break}e=ge(new ee({}),i,e)}if(this.attr=e,this._startDate=new Date(e["START-DATE"]),"END-DATE"in this.attr){var r=new Date(this.attr["END-DATE"]);J(r.getTime())&&(this._endDate=r)}}return l(e,[{"key":"id","get":function(){return this.attr.ID}},{"key":"class","get":function(){return this.attr.CLASS}},{"key":"startDate","get":function(){return this._startDate}},{"key":"endDate","get":function(){if(this._endDate)return this._endDate;var e=this.duration;return null!==e?new Date(this._startDate.getTime()+1e3*e):null}},{"key":"duration","get":function(){if("DURATION"in this.attr){var e=this.attr.decimalFloatingPoint("DURATION");if(J(e))return e}else if(this._endDate)return(this._endDate.getTime()-this._startDate.getTime())/1e3;return null}},{"key":"plannedDuration","get":function(){return"PLANNED-DURATION"in this.attr?this.attr.decimalFloatingPoint("PLANNED-DURATION"):null}},{"key":"endOnNext","get":function(){return this.attr.bool("END-ON-NEXT")}},{"key":"isValid","get":function(){return!!this.id&&!this._badValueForSameId&&J(this.startDate.getTime())&&(null===this.duration||this.duration>=0)&&(!this.endOnNext||!!this.class)}}]),e}(),K=function(){this.aborted=!1,this.loaded=0,this.retry=0,this.total=0,this.chunkCount=0,this.bwEstimate=0,this.loading={"start":0,"first":0,"end":0},this.parsing={"start":0,"end":0},this.buffering={"start":0,"first":0,"end":0}},M="audio",C="video",Z="audiovideo",X=function(){function e(e){var t;this._byteRange=null,this._url=null,this.baseurl=void 0,this.relurl=void 0,this.elementaryStreams=((t={})[M]=null,t[C]=null,t[Z]=null,t),this.baseurl=e}return e.prototype.setByteRange=function(e,t){var i,n=e.split("@",2);i=1===n.length?(null==t?void 0:t.byteRangeEndOffset)||0:parseInt(n[1]),this._byteRange=[i,parseInt(n[0])+i]},l(e,[{"key":"byteRange","get":function(){return this._byteRange?this._byteRange:[]}},{"key":"byteRangeStartOffset","get":function(){return this.byteRange[0]}},{"key":"byteRangeEndOffset","get":function(){return this.byteRange[1]}},{"key":"url","get":function(){return!this._url&&this.baseurl&&this.relurl&&(this._url=L.buildAbsoluteURL(this.baseurl,this.relurl,{"alwaysNormalize":!0})),this._url||""},"set":function(e){this._url=e}}]),e}(),ne=function(n){function e(e,t){var i;return(i=n.call(this,t)||this)._decryptdata=null,i.rawProgramDateTime=null,i.programDateTime=null,i.tagList=[],i.duration=0,i.sn=0,i.levelkeys=void 0,i.type=void 0,i.loader=null,i.keyLoader=null,i.level=-1,i.cc=0,i.startPTS=void 0,i.endPTS=void 0,i.startDTS=void 0,i.endDTS=void 0,i.start=0,i.deltaPTS=void 0,i.maxStartPTS=void 0,i.minEndPTS=void 0,i.stats=new K,i.data=void 0,i.bitrateTest=!1,i.title=null,i.initSegment=null,i.endList=void 0,i.gap=void 0,i.urlId=0,i.type=e,i}u(e,n);var t=e.prototype;return t.setKeyFormat=function(e){if(this.levelkeys){var t=this.levelkeys[e];t&&!this._decryptdata&&(this._decryptdata=t.getDecryptData(this.sn))}},t.abortRequests=function(){var e,t;null==(e=this.loader)||e.abort(),null==(t=this.keyLoader)||t.abort()},t.setElementaryStreamInfo=function(e,t,i,n,r,o){void 0===o&&(o=!1);var a=this.elementaryStreams,s=a[e];s?(s.startPTS=Math.min(s.startPTS,t),s.endPTS=Math.max(s.endPTS,i),s.startDTS=Math.min(s.startDTS,n),s.endDTS=Math.max(s.endDTS,r)):a[e]={"startPTS":t,"endPTS":i,"startDTS":n,"endDTS":r,"partial":o}},t.clearElementaryStreamInfo=function(){var e=this.elementaryStreams;e[M]=null,e[C]=null,e[Z]=null},l(e,[{"key":"decryptdata","get":function(){if(!this.levelkeys&&!this._decryptdata)return null;if(!this._decryptdata&&this.levelkeys&&!this.levelkeys.NONE){var e=this.levelkeys.identity;if(e)this._decryptdata=e.getDecryptData(this.sn);else{var t=Object.keys(this.levelkeys);if(1===t.length)return this._decryptdata=this.levelkeys[t[0]].getDecryptData(this.sn)}}return this._decryptdata}},{"key":"end","get":function(){return this.start+this.duration}},{"key":"endProgramDateTime","get":function(){if(null===this.programDateTime)return null;if(!J(this.programDateTime))return null;var e=J(this.duration)?this.duration:0;return this.programDateTime+1e3*e}},{"key":"encrypted","get":function(){var e;if(null!=(e=this._decryptdata)&&e.encrypted)return!0;if(this.levelkeys){var t=Object.keys(this.levelkeys),i=t.length;if(i>1||1===i&&this.levelkeys[t[0]].encrypted)return!0}return!1}}]),e}(X),re=function(s){function e(e,t,i,n,r){var o;(o=s.call(this,i)||this).fragOffset=0,o.duration=0,o.gap=!1,o.independent=!1,o.relurl=void 0,o.fragment=void 0,o.index=void 0,o.stats=new K,o.duration=e.decimalFloatingPoint("DURATION"),o.gap=e.bool("GAP"),o.independent=e.bool("INDEPENDENT"),o.relurl=e.enumeratedString("URI"),o.fragment=t,o.index=n;var a=e.enumeratedString("BYTERANGE");return a&&o.setByteRange(a,r),r&&(o.fragOffset=r.fragOffset+r.duration),o}return u(e,s),l(e,[{"key":"start","get":function(){return this.fragment.start+this.fragOffset}},{"key":"end","get":function(){return this.start+this.duration}},{"key":"loaded","get":function(){var e=this.elementaryStreams;return!!(e.audio||e.video||e.audiovideo)}}]),e}(X),oe=function(){function e(e){this.PTSKnown=!1,this.alignedSliding=!1,this.averagetargetduration=void 0,this.endCC=0,this.endSN=0,this.fragments=void 0,this.fragmentHint=void 0,this.partList=null,this.dateRanges=void 0,this.live=!0,this.ageHeader=0,this.advancedDateTime=void 0,this.updated=!0,this.advanced=!0,this.availabilityDelay=void 0,this.misses=0,this.startCC=0,this.startSN=0,this.startTimeOffset=null,this.targetduration=0,this.totalduration=0,this.type=null,this.url=void 0,this.m3u8="",this.version=null,this.canBlockReload=!1,this.canSkipUntil=0,this.canSkipDateRanges=!1,this.skippedSegments=0,this.recentlyRemovedDateranges=void 0,this.partHoldBack=0,this.holdBack=0,this.partTarget=0,this.preloadHint=void 0,this.renditionReports=void 0,this.tuneInGoal=0,this.deltaUpdateFailed=void 0,this.driftStartTime=0,this.driftEndTime=0,this.driftStart=0,this.driftEnd=0,this.encryptedFragments=void 0,this.playlistParsingError=null,this.variableList=null,this.hasVariableRefs=!1,this.fragments=[],this.encryptedFragments=[],this.dateRanges={},this.url=e}return e.prototype.reloaded=function(e){if(!e)return this.advanced=!0,void(this.updated=!0);var t=this.lastPartSn-e.lastPartSn,i=this.lastPartIndex-e.lastPartIndex;this.updated=this.endSN!==e.endSN||!!i||!!t||!this.live,this.advanced=this.endSN>e.endSN||t>0||0===t&&i>0,this.updated||this.advanced?this.misses=Math.floor(.6*e.misses):this.misses=e.misses+1,this.availabilityDelay=e.availabilityDelay},l(e,[{"key":"hasProgramDateTime","get":function(){return!!this.fragments.length&&J(this.fragments[this.fragments.length-1].programDateTime)}},{"key":"levelTargetDuration","get":function(){return this.averagetargetduration||this.targetduration||10}},{"key":"drift","get":function(){var e=this.driftEndTime-this.driftStartTime;return e>0?1e3*(this.driftEnd-this.driftStart)/e:1}},{"key":"edge","get":function(){return this.partEnd||this.fragmentEnd}},{"key":"partEnd","get":function(){var e;return null!=(e=this.partList)&&e.length?this.partList[this.partList.length-1].end:this.fragmentEnd}},{"key":"fragmentEnd","get":function(){var e;return null!=(e=this.fragments)&&e.length?this.fragments[this.fragments.length-1].end:0}},{"key":"age","get":function(){return this.advancedDateTime?Math.max(Date.now()-this.advancedDateTime,0)/1e3:0}},{"key":"lastPartIndex","get":function(){var e;return null!=(e=this.partList)&&e.length?this.partList[this.partList.length-1].index:-1}},{"key":"lastPartSn","get":function(){var e;return null!=(e=this.partList)&&e.length?this.partList[this.partList.length-1].fragment.sn:this.endSN}}]),e}();function Y(e){return Uint8Array.from(atob(e),function(e){return e.charCodeAt(0)})}function Q(e){var t,i,n=e.split(":"),r=null;if("data"===n[0]&&2===n.length){var o=n[1].split(";"),a=o[o.length-1].split(",");if(2===a.length){var s="base64"===a[0],l=a[1];s?(o.splice(-1,1),r=Y(l)):(t=ae(l).subarray(0,16),(i=new Uint8Array(16)).set(t,16-t.length),r=i)}}return r}function ae(e){return Uint8Array.from(unescape(encodeURIComponent(e)),function(e){return e.charCodeAt(0)})}var se="undefined"!=typeof self?self:void 0,m={"CLEARKEY":"org.w3.clearkey","FAIRPLAY":"com.apple.fps","PLAYREADY":"com.microsoft.playready","WIDEVINE":"com.widevine.alpha"},le="org.w3.clearkey",ue="com.apple.streamingkeydelivery",ce="com.microsoft.playready",de="urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed";function he(e){switch(e){case ue:return m.FAIRPLAY;case ce:return m.PLAYREADY;case de:return m.WIDEVINE;case le:return m.CLEARKEY}}var fe="edef8ba979d64acea3c827dcd51d21ed";function pe(e){switch(e){case m.FAIRPLAY:return ue;case m.PLAYREADY:return ce;case m.WIDEVINE:return de;case m.CLEARKEY:return le}}function Ee(e){var t=e.drmSystems,i=e.widevineLicenseUrl,n=t?[m.FAIRPLAY,m.WIDEVINE,m.PLAYREADY,m.CLEARKEY].filter(function(e){return!!t[e]}):[];return!n[m.WIDEVINE]&&i&&n.push(m.WIDEVINE),n}var xe,Te=null!=se&&null!=(xe=se.navigator)&&xe.requestMediaKeySystemAccess?self.navigator.requestMediaKeySystemAccess.bind(self.navigator):null;function Se(e,t,i){return Uint8Array.prototype.slice?e.slice(t,i):new Uint8Array(Array.prototype.slice.call(e,t,i))}var ke,Re=function(e,t){return t+10<=e.length&&73===e[t]&&68===e[t+1]&&51===e[t+2]&&e[t+3]<255&&e[t+4]<255&&e[t+6]<128&&e[t+7]<128&&e[t+8]<128&&e[t+9]<128},Ce=function(e,t){return t+10<=e.length&&51===e[t]&&68===e[t+1]&&73===e[t+2]&&e[t+3]<255&&e[t+4]<255&&e[t+6]<128&&e[t+7]<128&&e[t+8]<128&&e[t+9]<128},Ae=function(e,t){for(var i=t,n=0;Re(e,t);)n+=10,n+=Oe(e,t+6),Ce(e,t+10)&&(n+=10),t+=n;if(n>0)return e.subarray(i,i+n)},Oe=function(e,t){var i=0;return i=(127&e[t])<<21,i|=(127&e[t+1])<<14,i|=(127&e[t+2])<<7,i|=127&e[t+3]},Le=function(e,t){return Re(e,t)&&Oe(e,t+6)+10<=e.length-t},Pe=function(e){for(var t=Me(e),i=0;i<t.length;i++){var n=t[i];if(Ie(n))return Ue(n)}},Ie=function(e){return e&&"PRIV"===e.key&&"com.apple.streaming.transportStreamTimestamp"===e.info},De=function(e){var t=String.fromCharCode(e[0],e[1],e[2],e[3]),i=Oe(e,4);return{"type":t,"size":i,"data":e.subarray(10,10+i)}},Me=function(e){for(var t=0,i=[];Re(e,t);){for(var n=Oe(e,t+6),r=(t+=10)+n;t+8<r;){var o=De(e.subarray(t)),a=Be(o);a&&i.push(a),t+=o.size+10}Ce(e,t)&&(t+=10)}return i},Be=function(e){return"PRIV"===e.type?Fe(e):"W"===e.type[0]?je(e):Ne(e)},Fe=function(e){if(!(e.size<2)){var t=S(e.data,!0),i=new Uint8Array(e.data.subarray(t.length+1));return{"key":e.type,"info":t,"data":i.buffer}}},Ne=function(e){if(!(e.size<2)){if("TXXX"===e.type){var t=1,i=S(e.data.subarray(t),!0);t+=i.length+1;var n=S(e.data.subarray(t));return{"key":e.type,"info":i,"data":n}}var r=S(e.data.subarray(1));return{"key":e.type,"data":r}}},je=function(e){if("WXXX"===e.type){if(e.size<2)return;var t=1,i=S(e.data.subarray(t),!0);t+=i.length+1;var n=S(e.data.subarray(t));return{"key":e.type,"info":i,"data":n}}var r=S(e.data);return{"key":e.type,"data":r}},Ue=function(e){if(8===e.data.byteLength){var t=new Uint8Array(e.data),i=1&t[3],n=(t[4]<<23)+(t[5]<<15)+(t[6]<<7)+t[7];return n/=45,i&&(n+=47721858.84),Math.round(n)}},S=function(e,t){void 0===t&&(t=!1);var i=$e();if(i){var n=i.decode(e);if(t){var r=n.indexOf("\0");return-1!==r?n.substring(0,r):n}return n.replace(/\0/g,"")}for(var o,a,s,l=e.length,u="",c=0;c<l;){if(0===(o=e[c++])&&t)return u;if(0!==o&&3!==o)switch(o>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:u+=String.fromCharCode(o);break;case 12:case 13:a=e[c++],u+=String.fromCharCode((31&o)<<6|63&a);break;case 14:a=e[c++],s=e[c++],u+=String.fromCharCode((15&o)<<12|(63&a)<<6|(63&s)<<0)}}return u};function $e(){if(!navigator.userAgent.includes("PlayStation 4"))return ke||void 0===self.TextDecoder||(ke=new self.TextDecoder("utf-8")),ke}var y=function(e){for(var t="",i=0;i<e.length;i++){var n=e[i].toString(16);n.length<2&&(n="0"+n),t+=n}return t},He=Math.pow(2,32)-1,ze=[].push,We={"video":1,"audio":2,"id3":3,"text":4};function W(e){return String.fromCharCode.apply(null,e)}function Ge(e,t){var i=e[t]<<8|e[t+1];return i<0?65536+i:i}function G(e,t){var i=qe(e,t);return i<0?4294967296+i:i}function Ve(e,t){var i=G(e,t);return i*=Math.pow(2,32),i+=G(e,t+4)}function qe(e,t){return e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3]}function Ke(e,t,i){e[t]=i>>24,e[t+1]=i>>16&255,e[t+2]=i>>8&255,e[t+3]=255&i}function V(e,t){var i=[];if(!t.length)return i;for(var n=e.byteLength,r=0;r<n;){var o=G(e,r),a=o>1?r+o:n;if(W(e.subarray(r+4,r+8))===t[0])if(1===t.length)i.push(e.subarray(r+8,a));else{var s=V(e.subarray(r+8,a),t.slice(1));s.length&&ze.apply(i,s)}r=a}return i}function Ze(e){var t=[],i=e[0],n=8,r=G(e,n);n+=4;var o=0,a=0;0===i?(o=G(e,n),a=G(e,n+4),n+=8):(o=Ve(e,n),a=Ve(e,n+8),n+=16),n+=2;var s=e.length+a,l=Ge(e,n);n+=2;for(var u=0;u<l;u++){var c=n,d=G(e,c);c+=4;var h=2147483647&d;if(1==(2147483648&d)>>>31)return be.warn("SIDX has hierarchical references (not supported)"),null;var f=G(e,c);c+=4,t.push({"referenceSize":h,"subsegmentDuration":f,"info":{"duration":f/r,"start":s,"end":s+h-1}}),s+=h,n=c+=4}return{"earliestPresentationTime":o,"timescale":r,"version":i,"referencesCount":l,"references":t}}function Xe(e){for(var n=[],t=V(e,["moov","trak"]),i=0;i<t.length;i++){var r=t[i],o=V(r,["tkhd"])[0];if(o){var a=o[0],s=G(o,0===a?12:20),l=V(r,["mdia","mdhd"])[0];if(l){var u=G(l,0===(a=l[0])?12:20),c=V(r,["mdia","hdlr"])[0];if(c){var d=W(c.subarray(8,12)),h={"soun":M,"vide":C}[d];if(h){var f=Ye(V(r,["mdia","minf","stbl","stsd"])[0]);n[s]={"timescale":u,"type":h},n[h]=k({"timescale":u,"id":s},f)}}}}}return V(e,["moov","mvex","trex"]).forEach(function(e){var t=G(e,4),i=n[t];i&&(i.default={"duration":G(e,12),"flags":G(e,20)})}),n}function Ye(e){var t=e.subarray(8),i=t.subarray(86),n=W(t.subarray(4,8)),r=n,o="enca"===n||"encv"===n;if(o){var a=V(t,[n])[0];V(a.subarray("enca"===n?28:78),["sinf"]).forEach(function(e){var t=V(e,["schm"])[0];if(t){var i=W(t.subarray(4,8));if("cbcs"===i||"cenc"===i){var n=V(e,["frma"])[0];n&&(r=W(n))}}})}switch(r){case"avc1":case"avc2":case"avc3":case"avc4":var s=V(i,["avcC"])[0];r+="."+Je(s[1])+Je(s[2])+Je(s[3]);break;case"mp4a":var l=V(t,[n])[0],u=V(l.subarray(28),["esds"])[0];if(u&&u.length>12){var c=4;if(3!==u[c++])break;c=Qe(u,c),c+=2;var d=u[c++];if(128&d&&(c+=2),64&d&&(c+=u[c++]),4!==u[c++])break;c=Qe(u,c);var h=u[c++];if(64!==h)break;if(r+="."+Je(h),c+=12,5!==u[c++])break;c=Qe(u,c);var f=u[c++],p=(248&f)>>3;31===p&&(p+=1+((7&f)<<3)+((224&u[c])>>5)),r+="."+p}break;case"hvc1":case"hev1":var g=V(i,["hvcC"])[0],v=g[1],m=["","A","B","C"][v>>6],y=31&v,b=G(g,2),_=(32&v)>>5?"H":"L",w=g[12],E=g.subarray(6,12);r+="."+m+y,r+="."+b.toString(16).toUpperCase(),r+="."+_+w;for(var x="",T=E.length;T--;){var S=E[T];(S||x)&&(x="."+S.toString(16).toUpperCase()+x)}r+=x;break;case"dvh1":case"dvhe":var k=V(i,["dvcC"])[0],R=k[2]>>1&127,C=k[2]<<5&32|k[3]>>3&31;r+="."+q(R)+"."+q(C);break;case"vp09":var A=V(i,["vpcC"])[0],O=A[4],L=A[5],P=A[6]>>4&15;r+="."+q(O)+"."+q(L)+"."+q(P);break;case"av01":var I=V(i,["av1C"])[0],D=I[1]>>>5,B=31&I[1],F=I[2]>>>7?"H":"M",M=(64&I[2])>>6,N=(32&I[2])>>5,j=2===D&&M?N?12:10:M?10:8,U=(16&I[2])>>4,$=(8&I[2])>>3,H=(4&I[2])>>2,z=3&I[2];r+="."+D+"."+q(B)+F+"."+q(j)+"."+U+"."+$+H+z+"."+q(1)+"."+q(1)+"."+q(1)+".0"}return{"codec":r,"encrypted":o}}function Qe(e,t){for(var i=t+5;128&e[t++]&&t<i;);return t}function Je(e){return("0"+e.toString(16).toUpperCase()).slice(-2)}function q(e){return(e<10?"0":"")+e}function et(e){var t=V(e,["schm"])[0];if(t){var i=W(t.subarray(4,8));if("cbcs"===i||"cenc"===i)return V(e,["schi","tenc"])[0]}return be.error("[eme] missing 'schm' box"),null}function tt(e){var t=G(e,0),i=8;1&t&&(i+=4),4&t&&(i+=4);for(var n=0,r=G(e,4),o=0;o<r;o++)256&t&&(n+=G(e,i),i+=4),512&t&&(i+=4),1024&t&&(i+=4),2048&t&&(i+=4);return n}function A(e,t){var i=new Uint8Array(e.length+t.length);return i.set(e),i.set(t,e.length),i}function it(E,x){var T=[],S=x.samples,k=x.timescale,s=x.id,R=!1;return V(S,["moof"]).map(function(e){var w=e.byteOffset-8;V(e,["traf"]).map(function(a){var e=V(a,["tfdt"]).map(function(e){var t=e[0],i=G(e,4);return 1===t&&(i*=Math.pow(2,32),i+=G(e,8)),i/k})[0];return void 0!==e&&(E=e),V(a,["tfhd"]).map(function(e){var t=G(e,4),i=16777215&G(e,0),b=0,n=0!=(16&i),_=0,r=0!=(32&i),o=8;t===s&&(0!=(1&i)&&(o+=8),0!=(2&i)&&(o+=4),0!=(8&i)&&(b=G(e,o),o+=4),n&&(_=G(e,o),o+=4),r&&(o+=4),"video"===x.type&&(R=function(e){if(!e)return!1;var t=e.indexOf("."),i=t<0?e:e.substring(0,t);return"hvc1"===i||"hev1"===i||"dvh1"===i||"dvhe"===i}(x.codec)),V(a,["trun"]).map(function(e){var t=e[0],i=16777215&G(e,0),n=0!=(1&i),r=0,o=0!=(4&i),a=0!=(256&i),s=0,l=0!=(512&i),u=0,c=0!=(1024&i),d=0!=(2048&i),h=0,f=G(e,4),p=8;n&&(r=G(e,p),p+=4),o&&(p+=4);for(var g=r+w,v=0;v<f;v++){if(a?(s=G(e,p),p+=4):s=b,l?(u=G(e,p),p+=4):u=_,c&&(p+=4),d&&(h=0===t?G(e,p):qe(e,p),p+=4),x.type===C)for(var m=0;m<u;){var y=G(S,g);nt(R,S[g+=4])&&rt(S.subarray(g,g+y),R?2:1,E+h/k,T),g+=y,m+=y+4}E+=s/k}}))})})}),T}function nt(e,t){if(e){var i=t>>1&63;return 39===i||40===i}return 6==(31&t)}function rt(e,t,i,n){var r=ot(e),o=0;o+=t;for(var a=0,s=0,l=0;o<r.length;){a=0;do{if(o>=r.length)break;a+=l=r[o++]}while(255===l);s=0;do{if(o>=r.length)break;s+=l=r[o++]}while(255===l);var u=r.length-o,c=o;if(s<u)o+=s;else if(s>u){be.error("Malformed SEI payload. "+s+" is too small, only "+u+" bytes left to parse.");break}if(4===a){if(181===r[c++]){var d=Ge(r,c);if(c+=2,49===d){var h=G(r,c);if(c+=4,1195456820===h){var f=r[c++];if(3===f){var p=r[c++],g=64&p,v=g?2+3*(31&p):0,m=new Uint8Array(v);if(g){m[0]=p;for(var y=1;y<v;y++)m[y]=r[c++]}n.push({"type":f,"payloadType":a,"pts":i,"bytes":m})}}}}}else if(5===a&&s>16){for(var b=[],_=0;_<16;_++){var w=r[c++].toString(16);b.push(1==w.length?"0"+w:w),3!==_&&5!==_&&7!==_&&9!==_||b.push("-")}for(var E=s-16,x=new Uint8Array(E),T=0;T<E;T++)x[T]=r[c++];n.push({"payloadType":a,"pts":i,"uuid":b.join(""),"userData":S(x),"userDataBytes":x})}}}function ot(e){for(var t=e.byteLength,i=[],n=1;n<t-2;)0===e[n]&&0===e[n+1]&&3===e[n+2]?(i.push(n+2),n+=2):n++;if(0===i.length)return e;var r=t-i.length,o=new Uint8Array(r),a=0;for(n=0;n<r;a++,n++)a===i[0]&&(a++,i.shift()),o[n]=e[a];return o}function at(e,t,i){if(16!==e.byteLength)throw new RangeError("Invalid system id");var n,r,o;if(t){n=1,r=new Uint8Array(16*t.length);for(var a=0;a<t.length;a++){var s=t[a];if(16!==s.byteLength)throw new RangeError("Invalid key");r.set(s,16*a)}}else n=0,r=new Uint8Array;n>0?(o=new Uint8Array(4),t.length>0&&new DataView(o.buffer).setUint32(0,t.length,!1)):o=new Uint8Array;var l=new Uint8Array(4);return i&&i.byteLength>0&&new DataView(l.buffer).setUint32(0,i.byteLength,!1),function(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];for(var r=i.length,o=8,a=r;a--;)o+=i[a].byteLength;var s=new Uint8Array(o);for(s[0]=o>>24&255,s[1]=o>>16&255,s[2]=o>>8&255,s[3]=255&o,s.set(e,4),a=0,o=8;a<r;a++)s.set(i[a],o),o+=i[a].byteLength;return s}([112,115,115,104],new Uint8Array([n,0,0,0]),e,o,r,l,i||new Uint8Array)}var st={},lt=function(){function p(e,t,i,n,r){void 0===n&&(n=[1]),void 0===r&&(r=null),this.uri=void 0,this.method=void 0,this.keyFormat=void 0,this.keyFormatVersions=void 0,this.encrypted=void 0,this.isCommonEncryption=void 0,this.iv=null,this.key=null,this.keyId=null,this.pssh=null,this.method=e,this.uri=t,this.keyFormat=i,this.keyFormatVersions=n,this.iv=r,this.encrypted=!!e&&"NONE"!==e,this.isCommonEncryption=this.encrypted&&"AES-128"!==e}p.clearKeyUriToKeyIdMap=function(){st={}};var e=p.prototype;return e.isSupported=function(){if(this.method){if("AES-128"===this.method||"NONE"===this.method)return!0;if("identity"===this.keyFormat)return"SAMPLE-AES"===this.method;switch(this.keyFormat){case ue:case de:case ce:case le:return-1!==["ISO-23001-7","SAMPLE-AES","SAMPLE-AES-CENC","SAMPLE-AES-CTR"].indexOf(this.method)}}return!1},e.getDecryptData=function(e){if(!this.encrypted||!this.uri)return null;if("AES-128"===this.method&&this.uri&&!this.iv){"number"!=typeof e&&("AES-128"!==this.method||this.iv||be.warn('missing IV for initialization segment with method="'+this.method+'" - compliance issue'),e=0);var t=function(e){for(var t=new Uint8Array(16),i=12;i<16;i++)t[i]=e>>8*(15-i)&255;return t}(e);return new p(this.method,this.uri,"identity",this.keyFormatVersions,t)}var i=Q(this.uri);if(i)switch(this.keyFormat){case de:this.pssh=i,i.length>=22&&(this.keyId=i.subarray(i.length-22,i.length-6));break;case ce:var n=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]);this.pssh=at(n,null,i);var r=new Uint16Array(i.buffer,i.byteOffset,i.byteLength/2),o=String.fromCharCode.apply(null,Array.from(r)),a=o.substring(o.indexOf("<"),o.length),s=(new DOMParser).parseFromString(a,"text/xml").getElementsByTagName("KID")[0];if(s){var l=s.childNodes[0]?s.childNodes[0].nodeValue:s.getAttribute("VALUE");if(l){var u=Y(l).subarray(0,16);!function(e){var t=function(e,t,i){var n=e[t];e[t]=e[i],e[i]=n};t(e,0,3),t(e,1,2),t(e,4,5),t(e,6,7)}(u),this.keyId=u}}break;default:var c=i.subarray(0,16);if(16!==c.length){var d=new Uint8Array(16);d.set(c,16-c.length),c=d}this.keyId=c}if(!this.keyId||16!==this.keyId.byteLength){var h=st[this.uri];if(!h){var f=Object.keys(st).length%Number.MAX_SAFE_INTEGER;h=new Uint8Array(16),new DataView(h.buffer,12,4).setUint32(0,f),st[this.uri]=h}this.keyId=h}return this},p}(),ut=/\{\$([a-zA-Z0-9-_]+)\}/g;function ct(e){return ut.test(e)}function te(e,t,i){if(null!==e.variableList||e.hasVariableRefs)for(var n=i.length;n--;){var r=i[n],o=t[r];o&&(t[r]=dt(e,o))}}function dt(n,e){if(null!==n.variableList||n.hasVariableRefs){var r=n.variableList;return e.replace(ut,function(e){var t=e.substring(2,e.length-1),i=null==r?void 0:r[t];return void 0===i?(n.playlistParsingError||(n.playlistParsingError=new Error('Missing preceding EXT-X-DEFINE tag for Variable Reference: "'+t+'"')),e):i})}return e}function ht(e,t,i){var n,r,o=e.variableList;if(o||(e.variableList=o={}),"QUERYPARAM"in t){n=t.QUERYPARAM;try{var a=new self.URL(i).searchParams;if(!a.has(n))throw new Error('"'+n+'" does not match any query parameter in URI: "'+i+'"');r=a.get(n)}catch(t){e.playlistParsingError||(e.playlistParsingError=new Error("EXT-X-DEFINE QUERYPARAM: "+t.message))}}else n=t.NAME,r=t.VALUE;n in o?e.playlistParsingError||(e.playlistParsingError=new Error('EXT-X-DEFINE duplicate Variable Name declarations: "'+n+'"')):o[n]=r||""}function ft(e,t,i){var n=t.IMPORT;if(i&&n in i){var r=e.variableList;r||(e.variableList=r={}),r[n]=i[n]}else e.playlistParsingError||(e.playlistParsingError=new Error('EXT-X-DEFINE IMPORT attribute not found in Multivariant Playlist: "'+n+'"'))}function pt(e){if(void 0===e&&(e=!0),"undefined"!=typeof self)return(e||!self.MediaSource)&&self.ManagedMediaSource||self.MediaSource||self.WebKitMediaSource}var gt={"audio":{"a3ds":1,"ac-3":.95,"ac-4":1,"alac":.9,"alaw":1,"dra1":1,"dts+":1,"dts-":1,"dtsc":1,"dtse":1,"dtsh":1,"ec-3":.9,"enca":1,"fLaC":.9,"flac":.9,"FLAC":.9,"g719":1,"g726":1,"m4ae":1,"mha1":1,"mha2":1,"mhm1":1,"mhm2":1,"mlpa":1,"mp4a":1,"raw ":1,"Opus":1,"opus":1,"samr":1,"sawb":1,"sawp":1,"sevc":1,"sqcp":1,"ssmv":1,"twos":1,"ulaw":1},"video":{"avc1":1,"avc2":1,"avc3":1,"avc4":1,"avcp":1,"av01":.8,"drac":1,"dva1":1,"dvav":1,"dvh1":.7,"dvhe":.7,"encv":1,"hev1":.75,"hvc1":.75,"mjp2":1,"mp4v":1,"mvc1":1,"mvc2":1,"mvc3":1,"mvc4":1,"resv":1,"rv60":1,"s263":1,"svc1":1,"svc2":1,"vc-1":1,"vp08":1,"vp09":.9},"text":{"stpp":1,"wvtt":1}};function vt(e,t,i){return void 0===i&&(i=!0),!e.split(",").some(function(e){return!mt(e,t,i)})}function mt(e,t,i){var n;void 0===i&&(i=!0);var r=pt(i);return null!=(n=null==r?void 0:r.isTypeSupported(yt(e,t)))&&n}function yt(e,t){return t+'/mp4;codecs="'+e+'"'}function bt(e){if(e){var t=e.substring(0,4);return gt.video[t]}return 2}function _t(e){return e.split(",").reduce(function(e,t){var i=gt.video[t];return i?(2*i+e)/(e?3:2):(gt.audio[t]+e)/(e?2:1)},0)}var wt={},Et=/flac|opus/i;function xt(e,t){return void 0===t&&(t=!0),e.replace(Et,function(e){return function(e,t){if(void 0===t&&(t=!0),wt[e])return wt[e];for(var i={"flac":["flac","fLaC","FLAC"],"opus":["opus","Opus"]}[e],n=0;n<i.length;n++)if(mt(i[n],"audio",t))return wt[e]=i[n],i[n];return e}(e.toLowerCase(),t)})}function Tt(e,t){return e&&"mp4a"!==e?e:t?t.split(",")[0]:t}var St=/#EXT-X-STREAM-INF:([^\r\n]*)(?:[\r\n](?:#[^\r\n]*)?)*([^\r\n]+)|#EXT-X-(SESSION-DATA|SESSION-KEY|DEFINE|CONTENT-STEERING|START):([^\r\n]*)[\r\n]+/g,kt=/#EXT-X-MEDIA:(.*)/g,Rt=/^#EXT(?:INF|-X-TARGETDURATION):/m,Ct=new RegExp([/#EXTINF:\s*(\d*(?:\.\d+)?)(?:,(.*)\s+)?/.source,/(?!#) *(\S[^\r\n]*)/.source,/#EXT-X-BYTERANGE:*(.+)/.source,/#EXT-X-PROGRAM-DATE-TIME:(.+)/.source,/#.*/.source].join("|"),"g"),At=new RegExp([/#(EXTM3U)/.source,/#EXT-X-(DATERANGE|DEFINE|KEY|MAP|PART|PART-INF|PLAYLIST-TYPE|PRELOAD-HINT|RENDITION-REPORT|SERVER-CONTROL|SKIP|START):(.+)/.source,/#EXT-X-(BITRATE|DISCONTINUITY-SEQUENCE|MEDIA-SEQUENCE|TARGETDURATION|VERSION): *(\d+)/.source,/#EXT-X-(DISCONTINUITY|ENDLIST|GAP|INDEPENDENT-SEGMENTS)/.source,/(#)([^:]*):(.*)/.source,/(#)(.*)(?:.*)\r?\n?/.source].join("|")),Ot=function(){function b(){}return b.findGroup=function(e,t){for(var i=0;i<e.length;i++){var n=e[i];if(n.id===t)return n}},b.resolve=function(e,t){return L.buildAbsoluteURL(t,e,{"alwaysNormalize":!0})},b.isMediaPlaylist=function(e){return Rt.test(e)},b.parseMasterPlaylist=function(e,t){var i,n={"contentSteering":null,"levels":[],"playlistParsingError":null,"sessionData":null,"sessionKeys":null,"startTimeOffset":null,"variableList":null,"hasVariableRefs":ct(e)},r=[];for(St.lastIndex=0;null!=(i=St.exec(e));)if(i[1]){var o,a=new ee(i[1]);te(n,a,["CODECS","SUPPLEMENTAL-CODECS","ALLOWED-CPC","PATHWAY-ID","STABLE-VARIANT-ID","AUDIO","VIDEO","SUBTITLES","CLOSED-CAPTIONS","NAME"]);var s=dt(n,i[2]),l={"attrs":a,"bitrate":a.decimalInteger("BANDWIDTH")||a.decimalInteger("AVERAGE-BANDWIDTH"),"name":a.NAME,"url":b.resolve(s,t)},u=a.decimalResolution("RESOLUTION");u&&(l.width=u.width,l.height=u.height),It(a.CODECS,l),null!=(o=l.unknownCodecs)&&o.length||r.push(l),n.levels.push(l)}else if(i[3]){var c=i[3],d=i[4];switch(c){case"SESSION-DATA":var h=new ee(d);te(n,h,["DATA-ID","LANGUAGE","VALUE","URI"]);var f=h["DATA-ID"];f&&(null===n.sessionData&&(n.sessionData={}),n.sessionData[f]=h);break;case"SESSION-KEY":var p=Lt(d,t,n);p.encrypted&&p.isSupported()?(null===n.sessionKeys&&(n.sessionKeys=[]),n.sessionKeys.push(p)):be.warn('[Keys] Ignoring invalid EXT-X-SESSION-KEY tag: "'+d+'"');break;case"DEFINE":var g=new ee(d);te(n,g,["NAME","VALUE","QUERYPARAM"]),ht(n,g,t);break;case"CONTENT-STEERING":var v=new ee(d);te(n,v,["SERVER-URI","PATHWAY-ID"]),n.contentSteering={"uri":b.resolve(v["SERVER-URI"],t),"pathwayId":v["PATHWAY-ID"]||"."};break;case"START":n.startTimeOffset=Pt(d)}}var m=r.length>0&&r.length<n.levels.length;return n.levels=m?r:n.levels,0===n.levels.length&&(n.playlistParsingError=new Error("no levels found in manifest")),n},b.parseMasterPlaylistMedia=function(e,t,i){var n,r={},o=i.levels,a={"AUDIO":o.map(function(e){return{"id":e.attrs.AUDIO,"audioCodec":e.audioCodec}}),"SUBTITLES":o.map(function(e){return{"id":e.attrs.SUBTITLES,"textCodec":e.textCodec}}),"CLOSED-CAPTIONS":[]},s=0;for(kt.lastIndex=0;null!==(n=kt.exec(e));){var l=new ee(n[1]),u=l.TYPE;if(u){var c=a[u],d=r[u]||[];r[u]=d,te(i,l,["URI","GROUP-ID","LANGUAGE","ASSOC-LANGUAGE","STABLE-RENDITION-ID","NAME","INSTREAM-ID","CHARACTERISTICS","CHANNELS"]);var h=l.LANGUAGE,f=l["ASSOC-LANGUAGE"],p=l.CHANNELS,g=l.CHARACTERISTICS,v=l["INSTREAM-ID"],m={"attrs":l,"bitrate":0,"id":s++,"groupId":l["GROUP-ID"]||"","name":l.NAME||h||"","type":u,"default":l.bool("DEFAULT"),"autoselect":l.bool("AUTOSELECT"),"forced":l.bool("FORCED"),"lang":h,"url":l.URI?b.resolve(l.URI,t):""};if(f&&(m.assocLang=f),p&&(m.channels=p),g&&(m.characteristics=g),v&&(m.instreamId=v),null!=c&&c.length){var y=b.findGroup(c,m.groupId)||c[0];Dt(m,y,"audioCodec"),Dt(m,y,"textCodec")}d.push(m)}}return r},b.parseLevelPlaylist=function(e,t,i,n,B,F){var r,o,a,s=new oe(t),l=s.fragments,u=null,c=0,d=0,h=0,f=0,p=null,g=new ne(n,t),v=-1,m=!1,y=null;for(Ct.lastIndex=0,s.m3u8=e,s.hasVariableRefs=ct(e);null!==(r=Ct.exec(e));){m&&(m=!1,(g=new ne(n,t)).start=h,g.sn=c,g.cc=f,g.level=i,u&&(g.initSegment=u,g.rawProgramDateTime=u.rawProgramDateTime,u.rawProgramDateTime=null,y&&(g.setByteRange(y),y=null)));var b=r[1];if(b){g.duration=parseFloat(b);var _=(" "+r[2]).slice(1);g.title=_||null,g.tagList.push(_?["INF",b,_]:["INF",b])}else if(r[3]){if(J(g.duration)){g.start=h,a&&Ft(g,a,s),g.sn=c,g.level=i,g.cc=f,l.push(g);var N=(" "+r[3]).slice(1);g.relurl=dt(s,N),Mt(g,p),p=g,h+=g.duration,c++,d=0,m=!0}}else if(r[4]){var w=(" "+r[4]).slice(1);p?g.setByteRange(w,p):g.setByteRange(w)}else if(r[5])g.rawProgramDateTime=(" "+r[5]).slice(1),g.tagList.push(["PROGRAM-DATE-TIME",g.rawProgramDateTime]),-1===v&&(v=l.length);else{if(!(r=r[0].match(At))){be.warn("No matches on slow regex match for level playlist!");continue}for(o=1;o<r.length&&void 0===r[o];o++);var E=(" "+r[o]).slice(1),x=(" "+r[o+1]).slice(1),T=r[o+2]?(" "+r[o+2]).slice(1):"";switch(E){case"PLAYLIST-TYPE":s.type=x.toUpperCase();break;case"MEDIA-SEQUENCE":c=s.startSN=parseInt(x);break;case"SKIP":var S=new ee(x);te(s,S,["RECENTLY-REMOVED-DATERANGES"]);var k=S.decimalInteger("SKIPPED-SEGMENTS");if(J(k)){s.skippedSegments=k;for(var j=k;j--;)l.unshift(null);c+=k}var U=S.enumeratedString("RECENTLY-REMOVED-DATERANGES");U&&(s.recentlyRemovedDateranges=U.split("\t"));break;case"TARGETDURATION":s.targetduration=Math.max(parseInt(x),1);break;case"VERSION":s.version=parseInt(x);break;case"INDEPENDENT-SEGMENTS":case"EXTM3U":break;case"ENDLIST":s.live=!1;break;case"#":(x||T)&&g.tagList.push(T?[x,T]:[x]);break;case"DISCONTINUITY":f++,g.tagList.push(["DIS"]);break;case"GAP":g.gap=!0,g.tagList.push([E]);break;case"BITRATE":g.tagList.push([E,x]);break;case"DATERANGE":var R=new ee(x);te(s,R,["ID","CLASS","START-DATE","END-DATE","SCTE35-CMD","SCTE35-OUT","SCTE35-IN"]),te(s,R,R.clientAttrs);var C=new ie(R,s.dateRanges[R.ID]);C.isValid||s.skippedSegments?s.dateRanges[C.id]=C:be.warn('Ignoring invalid DATERANGE tag: "'+x+'"'),g.tagList.push(["EXT-X-DATERANGE",x]);break;case"DEFINE":var A=new ee(x);te(s,A,["NAME","VALUE","IMPORT","QUERYPARAM"]),"IMPORT"in A?ft(s,A,F):ht(s,A,t);break;case"DISCONTINUITY-SEQUENCE":f=parseInt(x);break;case"KEY":var O=Lt(x,t,s);if(O.isSupported()){if("NONE"===O.method){a=void 0;break}a||(a={}),a[O.keyFormat]&&(a=ge({},a)),a[O.keyFormat]=O}else be.warn('[Keys] Ignoring invalid EXT-X-KEY tag: "'+x+'"');break;case"START":s.startTimeOffset=Pt(x);break;case"MAP":var L=new ee(x);if(te(s,L,["BYTERANGE","URI"]),g.duration){var $=new ne(n,t);Bt($,L,i,a),u=$,g.initSegment=u,u.rawProgramDateTime&&!g.rawProgramDateTime&&(g.rawProgramDateTime=u.rawProgramDateTime)}else{var H=g.byteRangeEndOffset;if(H){var z=g.byteRangeStartOffset;y=H-z+"@"+z}else y=null;Bt(g,L,i,a),u=g,m=!0}break;case"SERVER-CONTROL":var P=new ee(x);s.canBlockReload=P.bool("CAN-BLOCK-RELOAD"),s.canSkipUntil=P.optionalFloat("CAN-SKIP-UNTIL",0),s.canSkipDateRanges=s.canSkipUntil>0&&P.bool("CAN-SKIP-DATERANGES"),s.partHoldBack=P.optionalFloat("PART-HOLD-BACK",0),s.holdBack=P.optionalFloat("HOLD-BACK",0);break;case"PART-INF":var W=new ee(x);s.partTarget=W.decimalFloatingPoint("PART-TARGET");break;case"PART":var I=s.partList;I||(I=s.partList=[]);var G=d>0?I[I.length-1]:void 0,V=d++,q=new ee(x);te(s,q,["BYTERANGE","URI"]);var K=new re(q,g,t,V,G);I.push(K),g.duration+=K.duration;break;case"PRELOAD-HINT":var Z=new ee(x);te(s,Z,["URI"]),s.preloadHint=Z;break;case"RENDITION-REPORT":var X=new ee(x);te(s,X,["URI"]),s.renditionReports=s.renditionReports||[],s.renditionReports.push(X);break;default:be.warn("line parsed but not handled: "+r)}}}p&&!p.relurl?(l.pop(),h-=p.duration,s.partList&&(s.fragmentHint=p)):s.partList&&(Mt(g,p),g.cc=f,s.fragmentHint=g,a&&Ft(g,a,s));var D=l.length,Y=l[0],M=l[D-1];if((h+=s.skippedSegments*s.targetduration)>0&&D&&M){s.averagetargetduration=h/D;var Q=M.sn;s.endSN="initSegment"!==Q?Q:0,s.live||(M.endList=!0),Y&&(s.startCC=Y.cc)}else s.endSN=0,s.startCC=0;return s.fragmentHint&&(h+=s.fragmentHint.duration),s.totalduration=h,s.endCC=f,v>0&&function(e,t){for(var i=e[t],n=t;n--;){var r=e[n];if(!r)return;r.programDateTime=i.programDateTime-1e3*r.duration,i=r}}(l,v),s},b}();function Lt(e,t,i){var n,r,o=new ee(e);te(i,o,["KEYFORMAT","KEYFORMATVERSIONS","URI","IV","URI"]);var a=null!=(n=o.METHOD)?n:"",s=o.URI,l=o.hexadecimalInteger("IV"),u=o.KEYFORMATVERSIONS,c=null!=(r=o.KEYFORMAT)?r:"identity";s&&o.IV&&!l&&be.error("Invalid IV: "+o.IV);var d=s?Ot.resolve(s,t):"",h=(u||"1").split("/").map(Number).filter(Number.isFinite);return new lt(a,d,c,h,l)}function Pt(e){var t=new ee(e).decimalFloatingPoint("TIME-OFFSET");return J(t)?t:null}function It(e,n){var r=(e||"").split(/[ ,]+/).filter(function(e){return e});["video","audio","text"].forEach(function(t){var i=r.filter(function(e){return function(e,t){var i=gt[t];return!!i&&!!i[e.slice(0,4)]}(e,t)});i.length&&(n[t+"Codec"]=i.join(","),r=r.filter(function(e){return-1===i.indexOf(e)}))}),n.unknownCodecs=r}function Dt(e,t,i){var n=t[i];n&&(e[i]=n)}function Mt(e,t){e.rawProgramDateTime?e.programDateTime=Date.parse(e.rawProgramDateTime):null!=t&&t.programDateTime&&(e.programDateTime=t.endProgramDateTime),J(e.programDateTime)||(e.programDateTime=null,e.rawProgramDateTime=null)}function Bt(e,t,i,n){e.relurl=t.URI,t.BYTERANGE&&e.setByteRange(t.BYTERANGE),e.level=i,e.sn="initSegment",n&&(e.levelkeys=n),e.initSegment=null}function Ft(e,t,i){e.levelkeys=t;var n=i.encryptedFragments;n.length&&n[n.length-1].levelkeys===t||!Object.keys(t).some(function(e){return t[e].isCommonEncryption})||n.push(e)}var Nt="manifest",jt="level",w="audioTrack",E="subtitleTrack",x="main",I="audio",Ut="subtitle";function $t(e){switch(e.type){case w:return I;case E:return Ut;default:return x}}function Ht(e,t){var i=e.url;return void 0!==i&&0!==i.indexOf("data:")||(i=t.url),i}var zt=function(){function e(e){this.hls=void 0,this.loaders=Object.create(null),this.variableList=null,this.hls=e,this.registerListeners()}var t=e.prototype;return t.startLoad=function(e){},t.stopLoad=function(){this.destroyInternalLoaders()},t.registerListeners=function(){var e=this.hls;e.on(ve.MANIFEST_LOADING,this.onManifestLoading,this),e.on(ve.LEVEL_LOADING,this.onLevelLoading,this),e.on(ve.AUDIO_TRACK_LOADING,this.onAudioTrackLoading,this),e.on(ve.SUBTITLE_TRACK_LOADING,this.onSubtitleTrackLoading,this)},t.unregisterListeners=function(){var e=this.hls;e.off(ve.MANIFEST_LOADING,this.onManifestLoading,this),e.off(ve.LEVEL_LOADING,this.onLevelLoading,this),e.off(ve.AUDIO_TRACK_LOADING,this.onAudioTrackLoading,this),e.off(ve.SUBTITLE_TRACK_LOADING,this.onSubtitleTrackLoading,this)},t.createInternalLoader=function(e){var t=this.hls.config,i=t.pLoader,n=t.loader,r=new(i||n)(t);return this.loaders[e.type]=r,r},t.getInternalLoader=function(e){return this.loaders[e.type]},t.resetInternalLoader=function(e){this.loaders[e]&&delete this.loaders[e]},t.destroyInternalLoaders=function(){for(var e in this.loaders){var t=this.loaders[e];t&&t.destroy(),this.resetInternalLoader(e)}},t.destroy=function(){this.variableList=null,this.unregisterListeners(),this.destroyInternalLoaders()},t.onManifestLoading=function(e,t){var i=t.url;this.variableList=null,this.load({"id":null,"level":0,"responseType":"text","type":Nt,"url":i,"deliveryDirectives":null})},t.onLevelLoading=function(e,t){var i=t.id,n=t.level,r=t.pathwayId,o=t.url,a=t.deliveryDirectives;this.load({"id":i,"level":n,"pathwayId":r,"responseType":"text","type":jt,"url":o,"deliveryDirectives":a})},t.onAudioTrackLoading=function(e,t){var i=t.id,n=t.groupId,r=t.url,o=t.deliveryDirectives;this.load({"id":i,"groupId":n,"level":null,"responseType":"text","type":w,"url":r,"deliveryDirectives":o})},t.onSubtitleTrackLoading=function(e,t){var i=t.id,n=t.groupId,r=t.url,o=t.deliveryDirectives;this.load({"id":i,"groupId":n,"level":null,"responseType":"text","type":E,"url":r,"deliveryDirectives":o})},t.load=function(e){var t,i,n,a=this,r=this.hls.config,o=this.getInternalLoader(e);if(o){var s=o.context;if(s&&s.url===e.url&&s.level===e.level)return void be.trace("[playlist-loader]: playlist request ongoing");be.log("[playlist-loader]: aborting previous loader for type: "+e.type),o.abort()}if(i=e.type===Nt?r.manifestLoadPolicy.default:ge({},r.playlistLoadPolicy.default,{"timeoutRetry":null,"errorRetry":null}),o=this.createInternalLoader(e),J(null==(t=e.deliveryDirectives)?void 0:t.part)&&(e.type===jt&&null!==e.level?n=this.hls.levels[e.level].details:e.type===w&&null!==e.id?n=this.hls.audioTracks[e.id].details:e.type===E&&null!==e.id&&(n=this.hls.subtitleTracks[e.id].details),n)){var l=n.partTarget,u=n.targetduration;if(l&&u){var c=1e3*Math.max(3*l,.8*u);i=ge({},i,{"maxTimeToFirstByteMs":Math.min(c,i.maxTimeToFirstByteMs),"maxLoadTimeMs":Math.min(c,i.maxTimeToFirstByteMs)})}}var d=i.errorRetry||i.timeoutRetry||{},h={"loadPolicy":i,"timeout":i.maxLoadTimeMs,"maxRetry":d.maxNumRetry||0,"retryDelay":d.retryDelayMs||0,"maxRetryDelay":d.maxRetryDelayMs||0},f={"onSuccess":function(e,t,i,n){var r=a.getInternalLoader(i);a.resetInternalLoader(i.type);var o=e.data;0===o.indexOf("#EXTM3U")?(t.parsing.start=performance.now(),Ot.isMediaPlaylist(o)?a.handleTrackOrLevelPlaylist(e,t,i,n||null,r):a.handleMasterPlaylist(e,t,i,n)):a.handleManifestParsingError(e,i,new Error("no EXTM3U delimiter"),n||null,t)},"onError":function(e,t,i,n){a.handleNetworkError(t,i,!1,e,n)},"onTimeout":function(e,t,i){a.handleNetworkError(t,i,!0,void 0,e)}};o.load(e,h,f)},t.handleMasterPlaylist=function(e,t,i,n){var r=this.hls,o=e.data,a=Ht(e,i),s=Ot.parseMasterPlaylist(o,a);if(s.playlistParsingError)this.handleManifestParsingError(e,i,s.playlistParsingError,n,t);else{var l=s.contentSteering,u=s.levels,c=s.sessionData,d=s.sessionKeys,h=s.startTimeOffset,f=s.variableList;this.variableList=f;var p=Ot.parseMasterPlaylistMedia(o,a,s),g=p.AUDIO,v=void 0===g?[]:g,m=p.SUBTITLES,y=p["CLOSED-CAPTIONS"];v.length&&(v.some(function(e){return!e.url})||!u[0].audioCodec||u[0].attrs.AUDIO||(be.log("[playlist-loader]: audio codec signaled in quality level, but no embedded audio track signaled, create one"),v.unshift({"type":"main","name":"main","groupId":"main","default":!1,"autoselect":!1,"forced":!1,"id":-1,"attrs":new ee({}),"bitrate":0,"url":""}))),r.trigger(ve.MANIFEST_LOADED,{"levels":u,"audioTracks":v,"subtitles":m,"captions":y,"contentSteering":l,"url":a,"stats":t,"networkDetails":n,"sessionData":c,"sessionKeys":d,"startTimeOffset":h,"variableList":f})}},t.handleTrackOrLevelPlaylist=function(e,t,i,n,r){var o=this.hls,a=i.id,s=i.level,l=i.type,u=Ht(e,i),c=J(s)?s:J(a)?a:0,d=$t(i),h=Ot.parseLevelPlaylist(e.data,u,c,d,0,this.variableList);if(l===Nt){var f={"attrs":new ee({}),"bitrate":0,"details":h,"name":"","url":u};o.trigger(ve.MANIFEST_LOADED,{"levels":[f],"audioTracks":[],"url":u,"stats":t,"networkDetails":n,"sessionData":null,"sessionKeys":null,"contentSteering":null,"startTimeOffset":null,"variableList":null})}t.parsing.end=performance.now(),i.levelDetails=h,this.handlePlaylistLoaded(h,e,t,i,n,r)},t.handleManifestParsingError=function(e,t,i,n,r){this.hls.trigger(ve.ERROR,{"type":me.NETWORK_ERROR,"details":ye.MANIFEST_PARSING_ERROR,"fatal":t.type===Nt,"url":e.url,"err":i,"error":i,"reason":i.message,"response":e,"context":t,"networkDetails":n,"stats":r})},t.handleNetworkError=function(e,t,i,n,r){void 0===i&&(i=!1);var o="A network "+(i?"timeout":"error"+(n?" (status "+n.code+")":""))+" occurred while loading "+e.type;e.type===jt?o+=": "+e.level+" id: "+e.id:e.type!==w&&e.type!==E||(o+=" id: "+e.id+' group-id: "'+e.groupId+'"');var a=new Error(o);be.warn("[playlist-loader]: "+o);var s=ye.UNKNOWN,l=!1,u=this.getInternalLoader(e);switch(e.type){case Nt:s=i?ye.MANIFEST_LOAD_TIMEOUT:ye.MANIFEST_LOAD_ERROR,l=!0;break;case jt:s=i?ye.LEVEL_LOAD_TIMEOUT:ye.LEVEL_LOAD_ERROR,l=!1;break;case w:s=i?ye.AUDIO_TRACK_LOAD_TIMEOUT:ye.AUDIO_TRACK_LOAD_ERROR,l=!1;break;case E:s=i?ye.SUBTITLE_TRACK_LOAD_TIMEOUT:ye.SUBTITLE_LOAD_ERROR,l=!1}u&&this.resetInternalLoader(e.type);var c={"type":me.NETWORK_ERROR,"details":s,"fatal":l,"url":e.url,"loader":u,"context":e,"error":a,"networkDetails":t,"stats":r};if(n){var d=(null==t?void 0:t.url)||e.url;c.response=k({"url":d,"data":void 0},n)}this.hls.trigger(ve.ERROR,c)},t.handlePlaylistLoaded=function(e,t,i,n,r,o){var a=this.hls,s=n.type,l=n.level,u=n.id,c=n.groupId,d=n.deliveryDirectives,h=Ht(t,n),f=$t(n),p="number"==typeof n.level&&f===x?l:void 0;if(e.fragments.length){e.targetduration||(e.playlistParsingError=new Error("Missing Target Duration"));var g=e.playlistParsingError;if(g)a.trigger(ve.ERROR,{"type":me.NETWORK_ERROR,"details":ye.LEVEL_PARSING_ERROR,"fatal":!1,"url":h,"error":g,"reason":g.message,"response":t,"context":n,"level":p,"parent":f,"networkDetails":r,"stats":i});else switch(e.live&&o&&(o.getCacheAge&&(e.ageHeader=o.getCacheAge()||0),o.getCacheAge&&!isNaN(e.ageHeader)||(e.ageHeader=0)),s){case Nt:case jt:a.trigger(ve.LEVEL_LOADED,{"details":e,"level":p||0,"id":u||0,"stats":i,"networkDetails":r,"deliveryDirectives":d});break;case w:a.trigger(ve.AUDIO_TRACK_LOADED,{"details":e,"id":u||0,"groupId":c||"","stats":i,"networkDetails":r,"deliveryDirectives":d});break;case E:a.trigger(ve.SUBTITLE_TRACK_LOADED,{"details":e,"id":u||0,"groupId":c||"","stats":i,"networkDetails":r,"deliveryDirectives":d})}}else{var v=new Error("No Segments found in Playlist");a.trigger(ve.ERROR,{"type":me.NETWORK_ERROR,"details":ye.LEVEL_EMPTY_ERROR,"fatal":!1,"url":h,"error":v,"reason":v.message,"response":t,"context":n,"level":p,"parent":f,"networkDetails":r,"stats":i})}},e}();function Wt(e,t){var i;try{i=new Event("addtrack")}catch(e){(i=document.createEvent("Event")).initEvent("addtrack",!1,!1)}i.track=e,t.dispatchEvent(i)}function Gt(e,t){var i=e.mode;if("disabled"===i&&(e.mode="hidden"),e.cues&&!e.cues.getCueById(t.id))try{if(e.addCue(t),!e.cues.getCueById(t.id))throw new Error("addCue is failed for: "+t)}catch(i){be.debug("[texttrack-utils]: "+i);try{var n=new self.TextTrackCue(t.startTime,t.endTime,t.text);n.id=t.id,e.addCue(n)}catch(e){be.debug("[texttrack-utils]: Legacy TextTrackCue fallback failed: "+e)}}"disabled"===i&&(e.mode=i)}function Vt(e){var t=e.mode;if("disabled"===t&&(e.mode="hidden"),e.cues)for(var i=e.cues.length;i--;)e.removeCue(e.cues[i]);"disabled"===t&&(e.mode=t)}function qt(e,t,i,n){var r=e.mode;if("disabled"===r&&(e.mode="hidden"),e.cues&&e.cues.length>0)for(var o=function(e,t,i){var n=[],r=function(e,t){if(t<e[0].startTime)return 0;var i=e.length-1;if(t>e[i].endTime)return-1;for(var n=0,r=i;n<=r;){var o=Math.floor((r+n)/2);if(t<e[o].startTime)r=o-1;else{if(!(t>e[o].startTime&&n<i))return o;n=o+1}}return e[n].startTime-t<t-e[r].startTime?n:r}(e,t);if(r>-1)for(var o=r,a=e.length;o<a;o++){var s=e[o];if(s.startTime>=t&&s.endTime<=i)n.push(s);else if(s.startTime>i)return n}return n}(e.cues,t,i),a=0;a<o.length;a++)n&&!n(o[a])||e.removeCue(o[a]);"disabled"===r&&(e.mode=r)}function Kt(e){for(var t=[],i=0;i<e.length;i++){var n=e[i];"subtitles"!==n.kind&&"captions"!==n.kind||!n.label||t.push(e[i])}return t}var Zt="org.id3",Xt="com.apple.quicktime.HLS",Yt="https://aomedia.org/emsg/ID3";function Qt(){if("undefined"!=typeof self)return self.VTTCue||self.TextTrackCue}function Jt(t,i,n,r,o){var a=new t(i,n,"");try{a.value=r,o&&(a.type=o)}catch(e){a=new t(i,n,JSON.stringify(o?k({"type":o},r):r))}return a}var ei=function(){var e=Qt();try{e&&new e(0,Number.POSITIVE_INFINITY,"")}catch(e){return Number.MAX_VALUE}return Number.POSITIVE_INFINITY}();function ti(e,t){return e.getTime()/1e3-t}var ii=function(){function e(e){this.hls=void 0,this.id3Track=null,this.media=null,this.dateRangeCuesAppended={},this.hls=e,this._registerListeners()}var t=e.prototype;return t.destroy=function(){this._unregisterListeners(),this.id3Track=null,this.media=null,this.dateRangeCuesAppended={},this.hls=null},t._registerListeners=function(){var e=this.hls;e.on(ve.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(ve.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(ve.MANIFEST_LOADING,this.onManifestLoading,this),e.on(ve.FRAG_PARSING_METADATA,this.onFragParsingMetadata,this),e.on(ve.BUFFER_FLUSHING,this.onBufferFlushing,this),e.on(ve.LEVEL_UPDATED,this.onLevelUpdated,this)},t._unregisterListeners=function(){var e=this.hls;e.off(ve.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(ve.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(ve.MANIFEST_LOADING,this.onManifestLoading,this),e.off(ve.FRAG_PARSING_METADATA,this.onFragParsingMetadata,this),e.off(ve.BUFFER_FLUSHING,this.onBufferFlushing,this),e.off(ve.LEVEL_UPDATED,this.onLevelUpdated,this)},t.onMediaAttached=function(e,t){this.media=t.media},t.onMediaDetaching=function(){this.id3Track&&(Vt(this.id3Track),this.id3Track=null,this.media=null,this.dateRangeCuesAppended={})},t.onManifestLoading=function(){this.dateRangeCuesAppended={}},t.createTrack=function(e){var t=this.getID3Track(e.textTracks);return t.mode="hidden",t},t.getID3Track=function(e){if(this.media){for(var t=0;t<e.length;t++){var i=e[t];if("metadata"===i.kind&&"id3"===i.label)return Wt(i,this.media),i}return this.media.addTextTrack("metadata","id3")}},t.onFragParsingMetadata=function(e,t){if(this.media){var i=this.hls.config,n=i.enableEmsgMetadataCues,r=i.enableID3MetadataCues;if(n||r){var o=t.samples;this.id3Track||(this.id3Track=this.createTrack(this.media));var a=Qt();if(a)for(var s=0;s<o.length;s++){var l=o[s].type;if((l!==Yt||n)&&r){var u=Me(o[s].data);if(u){var c=o[s].pts,d=c+o[s].duration;d>ei&&(d=ei),d-c<=0&&(d=c+.25);for(var h=0;h<u.length;h++){var f=u[h];if(!Ie(f)){this.updateId3CueEnds(c,l);var p=Jt(a,c,d,f,l);p&&this.id3Track.addCue(p)}}}}}}}},t.updateId3CueEnds=function(e,t){var i,n=null==(i=this.id3Track)?void 0:i.cues;if(n)for(var r=n.length;r--;){var o=n[r];o.type===t&&o.startTime<e&&o.endTime===ei&&(o.endTime=e)}},t.onBufferFlushing=function(e,t){var i=t.startOffset,n=t.endOffset,r=t.type,o=this.id3Track,a=this.hls;if(a){var s=a.config,l=s.enableEmsgMetadataCues,u=s.enableID3MetadataCues;o&&(l||u)&&qt(o,i,n,"audio"===r?function(e){return e.type===Zt&&u}:"video"===r?function(e){return e.type===Yt&&l}:function(e){return e.type===Zt&&u||e.type===Yt&&l})}},t.onLevelUpdated=function(e,t){var m=this,i=t.details;if(this.media&&i.hasProgramDateTime&&this.hls.config.enableDateRangeMetadataCues){var y=this.dateRangeCuesAppended,n=this.id3Track,b=i.dateRanges,_=Object.keys(b);if(n)for(var r=Object.keys(y).filter(function(e){return!_.includes(e)}),o=function(){var t=r[a];Object.keys(y[t].cues).forEach(function(e){n.removeCue(y[t].cues[e])}),delete y[t]},a=r.length;a--;)o();var s=i.fragments[i.fragments.length-1];if(0!==_.length&&J(null==s?void 0:s.programDateTime)){this.id3Track||(this.id3Track=this.createTrack(this.media));for(var w=s.programDateTime/1e3-s.start,E=Qt(),l=function(){var e=_[x],n=b[e],t=ti(n.startDate,w),i=y[e],r=(null==i?void 0:i.cues)||{},o=(null==i?void 0:i.durationKnown)||!1,a=ei,s=n.endDate;if(s)a=ti(s,w),o=!0;else if(n.endOnNext&&!o){var l=_.reduce(function(e,t){if(t!==n.id){var i=b[t];if(i.class===n.class&&i.startDate>n.startDate&&(!e||n.startDate<e.startDate))return i}return e},null);l&&(a=ti(l.startDate,w),o=!0)}for(var u,c,d=Object.keys(n.attr),h=0;h<d.length;h++){var f=d[h];if("ID"!==(c=f)&&"CLASS"!==c&&"START-DATE"!==c&&"DURATION"!==c&&"END-DATE"!==c&&"END-ON-NEXT"!==c){var p=r[f];if(p)o&&!i.durationKnown&&(p.endTime=a);else if(E){var g=n.attr[f];z(f)&&(u=g,g=Uint8Array.from(u.replace(/^0x/,"").replace(/([\da-fA-F]{2}) ?/g,"0x$1 ").replace(/ +$/,"").split(" ")).buffer);var v=Jt(E,t,a,{"key":f,"data":g},Xt);v&&(v.id=e,m.id3Track.addCue(v),r[f]=v)}}}y[e]={"cues":r,"dateRange":n,"durationKnown":o}},x=0;x<_.length;x++)l()}}},e}(),ni=function(){function e(e){var t=this;this.hls=void 0,this.config=void 0,this.media=null,this.levelDetails=null,this.currentTime=0,this.stallCount=0,this._latency=null,this.timeupdateHandler=function(){return t.timeupdate()},this.hls=e,this.config=e.config,this.registerListeners()}var t=e.prototype;return t.destroy=function(){this.unregisterListeners(),this.onMediaDetaching(),this.levelDetails=null,this.hls=this.timeupdateHandler=null},t.registerListeners=function(){this.hls.on(ve.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.on(ve.MEDIA_DETACHING,this.onMediaDetaching,this),this.hls.on(ve.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.on(ve.LEVEL_UPDATED,this.onLevelUpdated,this),this.hls.on(ve.ERROR,this.onError,this)},t.unregisterListeners=function(){this.hls.off(ve.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.off(ve.MEDIA_DETACHING,this.onMediaDetaching,this),this.hls.off(ve.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.off(ve.LEVEL_UPDATED,this.onLevelUpdated,this),this.hls.off(ve.ERROR,this.onError,this)},t.onMediaAttached=function(e,t){this.media=t.media,this.media.addEventListener("timeupdate",this.timeupdateHandler)},t.onMediaDetaching=function(){this.media&&(this.media.removeEventListener("timeupdate",this.timeupdateHandler),this.media=null)},t.onManifestLoading=function(){this.levelDetails=null,this._latency=null,this.stallCount=0},t.onLevelUpdated=function(e,t){var i=t.details;this.levelDetails=i,i.advanced&&this.timeupdate(),!i.live&&this.media&&this.media.removeEventListener("timeupdate",this.timeupdateHandler)},t.onError=function(e,t){var i;t.details===ye.BUFFER_STALLED_ERROR&&(this.stallCount++,null!=(i=this.levelDetails)&&i.live&&be.warn("[playback-rate-controller]: Stall detected, adjusting target latency"))},t.timeupdate=function(){var e=this.media,t=this.levelDetails;if(e&&t){this.currentTime=e.currentTime;var i=this.computeLatency();if(null!==i){this._latency=i;var n=this.config,r=n.lowLatencyMode,o=n.maxLiveSyncPlaybackRate;if(r&&1!==o&&t.live){var a=this.targetLatency;if(null!==a){var s=i-a;if(s<Math.min(this.maxLatency,a+t.targetduration)&&s>.05&&this.forwardBufferLength>1){var l=Math.min(2,Math.max(1,o)),u=Math.round(2/(1+Math.exp(-.75*s-this.edgeStalled))*20)/20;e.playbackRate=Math.min(l,Math.max(1,u))}else 1!==e.playbackRate&&0!==e.playbackRate&&(e.playbackRate=1)}}}}},t.estimateLiveEdge=function(){var e=this.levelDetails;return null===e?null:e.edge+e.age},t.computeLatency=function(){var e=this.estimateLiveEdge();return null===e?null:e-this.currentTime},l(e,[{"key":"latency","get":function(){return this._latency||0}},{"key":"maxLatency","get":function(){var e=this.config,t=this.levelDetails;return void 0!==e.liveMaxLatencyDuration?e.liveMaxLatencyDuration:t?e.liveMaxLatencyDurationCount*t.targetduration:0}},{"key":"targetLatency","get":function(){var e=this.levelDetails;if(null===e)return null;var t=e.holdBack,i=e.partHoldBack,n=e.targetduration,r=this.config,o=r.liveSyncDuration,a=r.liveSyncDurationCount,s=r.lowLatencyMode,l=this.hls.userConfig,u=s&&i||t;(l.liveSyncDuration||l.liveSyncDurationCount||0===u)&&(u=void 0!==o?o:a*n);var c=n;return u+Math.min(1*this.stallCount,c)}},{"key":"liveSyncPosition","get":function(){var e=this.estimateLiveEdge(),t=this.targetLatency,i=this.levelDetails;if(null===e||null===t||null===i)return null;var n=i.edge,r=e-t-this.edgeStalled,o=n-i.totalduration,a=n-(this.config.lowLatencyMode&&i.partTarget||i.targetduration);return Math.min(Math.max(o,r),a)}},{"key":"drift","get":function(){var e=this.levelDetails;return null===e?1:e.drift}},{"key":"edgeStalled","get":function(){var e=this.levelDetails;if(null===e)return 0;var t=3*(this.config.lowLatencyMode&&e.partTarget||e.targetduration);return Math.max(e.age-t,0)}},{"key":"forwardBufferLength","get":function(){var e=this.media,t=this.levelDetails;if(!e||!t)return 0;var i=e.buffered.length;return(i?e.buffered.end(i-1):t.edge)-this.currentTime}}]),e}(),ri=["NONE","TYPE-0","TYPE-1",null],oi=["SDR","PQ","HLG"],ai="",si="YES",li="v2";function ui(e){var t=e.canSkipUntil,i=e.canSkipDateRanges,n=e.age;return t&&n<t/2?i?li:si:ai}var ci=function(){function e(e,t,i){this.msn=void 0,this.part=void 0,this.skip=void 0,this.msn=e,this.part=t,this.skip=i}return e.prototype.addDirectives=function(e){var t=new self.URL(e);return void 0!==this.msn&&t.searchParams.set("_HLS_msn",this.msn.toString()),void 0!==this.part&&t.searchParams.set("_HLS_part",this.part.toString()),this.skip&&t.searchParams.set("_HLS_skip",this.skip),t.href},e}(),di=function(){function e(e){this._attrs=void 0,this.audioCodec=void 0,this.bitrate=void 0,this.codecSet=void 0,this.url=void 0,this.frameRate=void 0,this.height=void 0,this.id=void 0,this.name=void 0,this.videoCodec=void 0,this.width=void 0,this.details=void 0,this.fragmentError=0,this.loadError=0,this.loaded=void 0,this.realBitrate=0,this.supportedPromise=void 0,this.supportedResult=void 0,this._avgBitrate=0,this._audioGroups=void 0,this._subtitleGroups=void 0,this._urlId=0,this.url=[e.url],this._attrs=[e.attrs],this.bitrate=e.bitrate,e.details&&(this.details=e.details),this.id=e.id||0,this.name=e.name,this.width=e.width||0,this.height=e.height||0,this.frameRate=e.attrs.optionalFloat("FRAME-RATE",0),this._avgBitrate=e.attrs.decimalInteger("AVERAGE-BANDWIDTH"),this.audioCodec=e.audioCodec,this.videoCodec=e.videoCodec,this.codecSet=[e.videoCodec,e.audioCodec].filter(function(e){return!!e}).map(function(e){return e.substring(0,4)}).join(","),this.addGroupId("audio",e.attrs.AUDIO),this.addGroupId("text",e.attrs.SUBTITLES)}var t=e.prototype;return t.hasAudioGroup=function(e){return hi(this._audioGroups,e)},t.hasSubtitleGroup=function(e){return hi(this._subtitleGroups,e)},t.addGroupId=function(e,t){if(t)if("audio"===e){var i=this._audioGroups;i||(i=this._audioGroups=[]),-1===i.indexOf(t)&&i.push(t)}else if("text"===e){var n=this._subtitleGroups;n||(n=this._subtitleGroups=[]),-1===n.indexOf(t)&&n.push(t)}},t.addFallback=function(){},l(e,[{"key":"maxBitrate","get":function(){return Math.max(this.realBitrate,this.bitrate)}},{"key":"averageBitrate","get":function(){return this._avgBitrate||this.realBitrate||this.bitrate}},{"key":"attrs","get":function(){return this._attrs[0]}},{"key":"codecs","get":function(){return this.attrs.CODECS||""}},{"key":"pathwayId","get":function(){return this.attrs["PATHWAY-ID"]||"."}},{"key":"videoRange","get":function(){return this.attrs["VIDEO-RANGE"]||"SDR"}},{"key":"score","get":function(){return this.attrs.optionalFloat("SCORE",0)}},{"key":"uri","get":function(){return this.url[0]||""}},{"key":"audioGroups","get":function(){return this._audioGroups}},{"key":"subtitleGroups","get":function(){return this._subtitleGroups}},{"key":"urlId","get":function(){return 0},"set":function(e){}},{"key":"audioGroupIds","get":function(){return this.audioGroups?[this.audioGroupId]:void 0}},{"key":"textGroupIds","get":function(){return this.subtitleGroups?[this.textGroupId]:void 0}},{"key":"audioGroupId","get":function(){var e;return null==(e=this.audioGroups)?void 0:e[0]}},{"key":"textGroupId","get":function(){var e;return null==(e=this.subtitleGroups)?void 0:e[0]}}]),e}();function hi(e,t){return!(!t||!e)&&-1!==e.indexOf(t)}function fi(e,t){var i=t.startPTS;if(J(i)){var n,r=0;t.sn>e.sn?(r=i-e.start,n=e):(r=e.start-i,n=t),n.duration!==r&&(n.duration=r)}else t.sn>e.sn?e.cc===t.cc&&e.minEndPTS?t.start=e.start+(e.minEndPTS-e.start):t.start=e.start+e.duration:t.start=Math.max(e.start-t.duration,0)}function pi(e,t,i,n,r,o){n-i<=0&&(be.warn("Fragment should have a positive duration",t),n=i+t.duration,o=r+t.duration);var a=i,s=n,l=t.startPTS,u=t.endPTS;if(J(l)){var c=Math.abs(l-i);J(t.deltaPTS)?t.deltaPTS=Math.max(c,t.deltaPTS):t.deltaPTS=c,a=Math.max(i,l),i=Math.min(i,l),r=Math.min(r,t.startDTS),s=Math.min(n,u),n=Math.max(n,u),o=Math.max(o,t.endDTS)}var d=i-t.start;0!==t.start&&(t.start=i),t.duration=n-t.start,t.startPTS=i,t.maxStartPTS=a,t.startDTS=r,t.endPTS=n,t.minEndPTS=s,t.endDTS=o;var h,f=t.sn;if(!e||f<e.startSN||f>e.endSN)return 0;var p=f-e.startSN,g=e.fragments;for(g[p]=t,h=p;h>0;h--)fi(g[h],g[h-1]);for(h=p;h<g.length-1;h++)fi(g[h],g[h+1]);return e.fragmentHint&&fi(g[g.length-1],e.fragmentHint),e.PTSKnown=e.alignedSliding=!0,d}function gi(e,i){for(var n=null,t=e.fragments,r=t.length-1;r>=0;r--){var o=t[r].initSegment;if(o){n=o;break}}e.fragmentHint&&delete e.fragmentHint.endPTS;var a,s,l,u,c,d=0;if(function(e,t,i){for(var n=t.skippedSegments,r=Math.max(e.startSN,t.startSN)-t.startSN,o=(e.fragmentHint?1:0)+(n?t.endSN:Math.min(e.endSN,t.endSN))-t.startSN,a=t.startSN-e.startSN,s=t.fragmentHint?t.fragments.concat(t.fragmentHint):t.fragments,l=e.fragmentHint?e.fragments.concat(e.fragmentHint):e.fragments,u=r;u<=o;u++){var c=l[a+u],d=s[u];n&&!d&&u<n&&(d=t.fragments[u]=c),c&&d&&i(c,d)}}(e,i,function(e,t){e.relurl&&(d=e.cc-t.cc),J(e.startPTS)&&J(e.endPTS)&&(t.start=t.startPTS=e.startPTS,t.startDTS=e.startDTS,t.maxStartPTS=e.maxStartPTS,t.endPTS=e.endPTS,t.endDTS=e.endDTS,t.minEndPTS=e.minEndPTS,t.duration=e.endPTS-e.startPTS,t.duration&&(a=t),i.PTSKnown=i.alignedSliding=!0),t.elementaryStreams=e.elementaryStreams,t.loader=e.loader,t.stats=e.stats,e.initSegment&&(t.initSegment=e.initSegment,n=e.initSegment)}),n&&(i.fragmentHint?i.fragments.concat(i.fragmentHint):i.fragments).forEach(function(e){var t;!e||e.initSegment&&e.initSegment.relurl!==(null==(t=n)?void 0:t.relurl)||(e.initSegment=n)}),i.skippedSegments)if(i.deltaUpdateFailed=i.fragments.some(function(e){return!e}),i.deltaUpdateFailed){be.warn("[level-helper] Previous playlist missing segments skipped in delta playlist");for(var h=i.skippedSegments;h--;)i.fragments.shift();i.startSN=i.fragments[0].sn,i.startCC=i.fragments[0].cc}else i.canSkipDateRanges&&(i.dateRanges=(s=e.dateRanges,l=i.dateRanges,u=i.recentlyRemovedDateranges,c=ge({},s),u&&u.forEach(function(e){delete c[e]}),Object.keys(l).forEach(function(e){var t=new ie(l[e].attr,c[e]);t.isValid?c[e]=t:be.warn('Ignoring invalid Playlist Delta Update DATERANGE tag: "'+JSON.stringify(l[e].attr)+'"')}),c));var f=i.fragments;if(d){be.warn("discontinuity sliding from playlist, take drift into account");for(var p=0;p<f.length;p++)f[p].cc+=d}i.skippedSegments&&(i.startCC=i.fragments[0].cc),function(e,t,i){if(e&&t)for(var n=0,r=0,o=e.length;r<=o;r++){var a=e[r],s=t[r+n];a&&s&&a.index===s.index&&a.fragment.sn===s.fragment.sn?i(a,s):n--}}(e.partList,i.partList,function(e,t){t.elementaryStreams=e.elementaryStreams,t.stats=e.stats}),a?pi(i,a,a.startPTS,a.endPTS,a.startDTS,a.endDTS):vi(e,i),f.length&&(i.totalduration=i.edge-f[0].start),i.driftStartTime=e.driftStartTime,i.driftStart=e.driftStart;var g=i.advancedDateTime;if(i.advanced&&g){var v=i.edge;i.driftStart||(i.driftStartTime=g,i.driftStart=v),i.driftEndTime=g,i.driftEnd=v}else i.driftEndTime=e.driftEndTime,i.driftEnd=e.driftEnd,i.advancedDateTime=e.advancedDateTime}function vi(e,t){var i=t.startSN+t.skippedSegments-e.startSN,n=e.fragments;i<0||i>=n.length||mi(t,n[i].start)}function mi(e,t){if(t){for(var i=e.fragments,n=e.skippedSegments;n<i.length;n++)i[n].start+=t;e.fragmentHint&&(e.fragmentHint.start+=t)}}function yi(e,t,i){var n;return null!=e&&e.details?bi(null==(n=e.details)?void 0:n.partList,t,i):null}function bi(e,t,i){if(e)for(var n=e.length;n--;){var r=e[n];if(r.index===i&&r.fragment.sn===t)return r}return null}function _i(e){e.forEach(function(e,t){var i=e.details;null!=i&&i.fragments&&i.fragments.forEach(function(e){e.level=t})})}function wi(e){switch(e.details){case ye.FRAG_LOAD_TIMEOUT:case ye.KEY_LOAD_TIMEOUT:case ye.LEVEL_LOAD_TIMEOUT:case ye.MANIFEST_LOAD_TIMEOUT:return!0}return!1}function Ei(e,t){var i=wi(t);return e.default[(i?"timeout":"error")+"Retry"]}function xi(e,t){var i="linear"===e.backoff?1:Math.pow(2,t);return Math.min(i*e.retryDelayMs,e.maxRetryDelayMs)}function Ti(e){return k(k({},e),{"errorRetry":null,"timeoutRetry":null})}function Si(e,t,i,n){if(!e)return!1;var r=null==n?void 0:n.code,o=t<e.maxNumRetry&&(function(e){return 0===e&&!1===navigator.onLine||!!e&&(e<400||e>499)}(r)||!!i);return e.shouldRetry?e.shouldRetry(e,t,i,n,o):o}var ki=function(e,t){for(var i=0,n=e.length-1,r=null,o=null;i<=n;){var a=t(o=e[r=(i+n)/2|0]);if(a>0)i=r+1;else{if(!(a<0))return o;n=r-1}}return null};function Ri(e,t,i,n,r){void 0===i&&(i=0),void 0===n&&(n=0),void 0===r&&(r=.005);var o=null;if(e){o=t[e.sn-t[0].sn+1]||null;var a=e.endDTS-i;a>0&&a<15e-7&&(i+=15e-7)}else 0===i&&0===t[0].start&&(o=t[0]);if(o&&((!e||e.level===o.level)&&0===Ci(i,n,o)||function(e,t,i){if(t&&0===t.start&&t.level<e.level&&(t.endPTS||0)>0){var n=t.tagList.reduce(function(e,t){return"INF"===t[0]&&(e+=parseFloat(t[1])),e},i);return e.start<=n}return!1}(o,e,Math.min(r,n))))return o;var s=ki(t,Ci.bind(null,i,n));return!s||s===e&&o?o:s}function Ci(e,t,i){if(void 0===e&&(e=0),void 0===t&&(t=0),i.start<=e&&i.start+i.duration>e)return 0;var n=Math.min(t,i.duration+(i.deltaPTS?i.deltaPTS:0));return i.start+i.duration-n<=e?1:i.start-n>e&&i.start?-1:0}function Ai(e,t,i){var n=1e3*Math.min(t,i.duration+(i.deltaPTS?i.deltaPTS:0));return(i.endProgramDateTime||0)-n>e}var Oi=0,Li=2,Pi=3,Ii=5,Di=0,Mi=1,Bi=2,Fi=function(){function e(e){this.hls=void 0,this.playlistError=0,this.penalizedRenditions={},this.log=void 0,this.warn=void 0,this.error=void 0,this.hls=e,this.log=be.log.bind(be,"[info]:"),this.warn=be.warn.bind(be,"[warning]:"),this.error=be.error.bind(be,"[error]:"),this.registerListeners()}var t=e.prototype;return t.registerListeners=function(){var e=this.hls;e.on(ve.ERROR,this.onError,this),e.on(ve.MANIFEST_LOADING,this.onManifestLoading,this),e.on(ve.LEVEL_UPDATED,this.onLevelUpdated,this)},t.unregisterListeners=function(){var e=this.hls;e&&(e.off(ve.ERROR,this.onError,this),e.off(ve.ERROR,this.onErrorOut,this),e.off(ve.MANIFEST_LOADING,this.onManifestLoading,this),e.off(ve.LEVEL_UPDATED,this.onLevelUpdated,this))},t.destroy=function(){this.unregisterListeners(),this.hls=null,this.penalizedRenditions={}},t.startLoad=function(e){},t.stopLoad=function(){this.playlistError=0},t.getVariantLevelIndex=function(e){return(null==e?void 0:e.type)===x?e.level:this.hls.loadLevel},t.onManifestLoading=function(){this.playlistError=0,this.penalizedRenditions={}},t.onLevelUpdated=function(){this.playlistError=0},t.onError=function(e,t){var i,n;if(!t.fatal){var r=this.hls,o=t.context;switch(t.details){case ye.FRAG_LOAD_ERROR:case ye.FRAG_LOAD_TIMEOUT:case ye.KEY_LOAD_ERROR:case ye.KEY_LOAD_TIMEOUT:return void(t.errorAction=this.getFragRetryOrSwitchAction(t));case ye.FRAG_PARSING_ERROR:if(null!=(i=t.frag)&&i.gap)return void(t.errorAction={"action":Oi,"flags":Di});case ye.FRAG_GAP:case ye.FRAG_DECRYPT_ERROR:return t.errorAction=this.getFragRetryOrSwitchAction(t),void(t.errorAction.action=Li);case ye.LEVEL_EMPTY_ERROR:case ye.LEVEL_PARSING_ERROR:var a,s,l=t.parent===x?t.level:r.loadLevel;return void(t.details===ye.LEVEL_EMPTY_ERROR&&null!=(a=t.context)&&null!=(s=a.levelDetails)&&s.live?t.errorAction=this.getPlaylistRetryOrSwitchAction(t,l):(t.levelRetry=!1,t.errorAction=this.getLevelSwitchAction(t,l)));case ye.LEVEL_LOAD_ERROR:case ye.LEVEL_LOAD_TIMEOUT:return void("number"==typeof(null==o?void 0:o.level)&&(t.errorAction=this.getPlaylistRetryOrSwitchAction(t,o.level)));case ye.AUDIO_TRACK_LOAD_ERROR:case ye.AUDIO_TRACK_LOAD_TIMEOUT:case ye.SUBTITLE_LOAD_ERROR:case ye.SUBTITLE_TRACK_LOAD_TIMEOUT:if(o){var u=r.levels[r.loadLevel];if(u&&(o.type===w&&u.hasAudioGroup(o.groupId)||o.type===E&&u.hasSubtitleGroup(o.groupId)))return t.errorAction=this.getPlaylistRetryOrSwitchAction(t,r.loadLevel),t.errorAction.action=Li,void(t.errorAction.flags=Mi)}return;case ye.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED:var c=r.levels[r.loadLevel],d=null==c?void 0:c.attrs["HDCP-LEVEL"];return void(d?t.errorAction={"action":Li,"flags":Bi,"hdcpLevel":d}:this.keySystemError(t));case ye.BUFFER_ADD_CODEC_ERROR:case ye.REMUX_ALLOC_ERROR:case ye.BUFFER_APPEND_ERROR:return void(t.errorAction=this.getLevelSwitchAction(t,null!=(n=t.level)?n:r.loadLevel));case ye.INTERNAL_EXCEPTION:case ye.BUFFER_APPENDING_ERROR:case ye.BUFFER_FULL_ERROR:case ye.LEVEL_SWITCH_ERROR:case ye.BUFFER_STALLED_ERROR:case ye.BUFFER_SEEK_OVER_HOLE:case ye.BUFFER_NUDGE_ON_STALL:return void(t.errorAction={"action":Oi,"flags":Di})}t.type===me.KEY_SYSTEM_ERROR&&this.keySystemError(t)}},t.keySystemError=function(e){var t=this.getVariantLevelIndex(e.frag);e.levelRetry=!1,e.errorAction=this.getLevelSwitchAction(e,t)},t.getPlaylistRetryOrSwitchAction=function(e,t){var i=Ei(this.hls.config.playlistLoadPolicy,e),n=this.playlistError++;if(Si(i,n,wi(e),e.response))return{"action":Ii,"flags":Di,"retryConfig":i,"retryCount":n};var r=this.getLevelSwitchAction(e,t);return i&&(r.retryConfig=i,r.retryCount=n),r},t.getFragRetryOrSwitchAction=function(e){var t=this.hls,i=this.getVariantLevelIndex(e.frag),n=t.levels[i],r=t.config,o=r.fragLoadPolicy,a=r.keyLoadPolicy,s=Ei(e.details.startsWith("key")?a:o,e),l=t.levels.reduce(function(e,t){return e+t.fragmentError},0);if(n&&(e.details!==ye.FRAG_GAP&&n.fragmentError++,Si(s,l,wi(e),e.response)))return{"action":Ii,"flags":Di,"retryConfig":s,"retryCount":l};var u=this.getLevelSwitchAction(e,i);return s&&(u.retryConfig=s,u.retryCount=l),u},t.getLevelSwitchAction=function(a,e){var t=this.hls;null==e&&(e=t.loadLevel);var s=this.hls.levels[e];if(s){var i,n,l=a.details;s.loadError++,l===ye.BUFFER_APPEND_ERROR&&s.fragmentError++;var u=-1,c=t.levels,d=t.loadLevel,h=t.minAutoLevel,f=t.maxAutoLevel;t.autoLevelEnabled||(t.loadLevel=-1);for(var r,p=null==(i=a.frag)?void 0:i.type,g=(p===I&&l===ye.FRAG_PARSING_ERROR||"audio"===a.sourceBufferName&&(l===ye.BUFFER_ADD_CODEC_ERROR||l===ye.BUFFER_APPEND_ERROR))&&c.some(function(e){var t=e.audioCodec;return s.audioCodec!==t}),v="video"===a.sourceBufferName&&(l===ye.BUFFER_ADD_CODEC_ERROR||l===ye.BUFFER_APPEND_ERROR)&&c.some(function(e){var t=e.codecSet,i=e.audioCodec;return s.codecSet!==t&&s.audioCodec===i}),o=null!=(n=a.context)?n:{},m=o.type,y=o.groupId,b=function(){var e=(_+d)%c.length;if(e!==d&&e>=h&&e<=f&&0===c[e].loadError){var t,i,n=c[e];if(l===ye.FRAG_GAP&&p===x&&a.frag){var r=c[e].details;if(r){var o=Ri(a.frag,r.fragments,a.frag.start);if(null!=o&&o.gap)return 0}}else{if(m===w&&n.hasAudioGroup(y)||m===E&&n.hasSubtitleGroup(y))return 0;if(p===I&&null!=(t=s.audioGroups)&&t.some(function(e){return n.hasAudioGroup(e)})||p===Ut&&null!=(i=s.subtitleGroups)&&i.some(function(e){return n.hasSubtitleGroup(e)})||g&&s.audioCodec===n.audioCodec||!g&&s.audioCodec!==n.audioCodec||v&&s.codecSet===n.codecSet)return 0}return u=e,1}},_=c.length;_--&&(0===(r=b())||1!==r););if(u>-1&&t.loadLevel!==u)return a.levelRetry=!0,this.playlistError=0,{"action":Li,"flags":Di,"nextAutoLevel":u}}return{"action":Li,"flags":Mi}},t.onErrorOut=function(e,t){var i;switch(null==(i=t.errorAction)?void 0:i.action){case Oi:break;case Li:this.sendAlternateToPenaltyBox(t),t.errorAction.resolved||t.details===ye.FRAG_GAP?/MediaSource readyState: ended/.test(t.error.message)&&(this.warn('MediaSource ended after "'+t.sourceBufferName+'" sourceBuffer append error. Attempting to recover from media error.'),this.hls.recoverMediaError()):t.fatal=!0}t.fatal&&this.hls.stopLoad()},t.sendAlternateToPenaltyBox=function(e){var t=this.hls,i=e.errorAction;if(i){var n=i.flags,r=i.hdcpLevel,o=i.nextAutoLevel;switch(n){case Di:this.switchLevel(e,o);break;case Bi:r&&(t.maxHdcpLevel=ri[ri.indexOf(r)-1],i.resolved=!0),this.warn('Restricting playback to HDCP-LEVEL of "'+t.maxHdcpLevel+'" or lower')}i.resolved||this.switchLevel(e,o)}},t.switchLevel=function(e,t){void 0!==t&&e.errorAction&&(this.warn("switching to level "+t+" after "+e.details),this.hls.nextAutoLevel=t,e.errorAction.resolved=!0,this.hls.nextLoadLevel=this.hls.nextAutoLevel)},e}(),Ni=function(){function e(e,t){this.hls=void 0,this.timer=-1,this.requestScheduled=-1,this.canLoad=!1,this.log=void 0,this.warn=void 0,this.log=be.log.bind(be,t+":"),this.warn=be.warn.bind(be,t+":"),this.hls=e}var t=e.prototype;return t.destroy=function(){this.clearTimer(),this.hls=this.log=this.warn=null},t.clearTimer=function(){-1!==this.timer&&(self.clearTimeout(this.timer),this.timer=-1)},t.startLoad=function(){this.canLoad=!0,this.requestScheduled=-1,this.loadPlaylist()},t.stopLoad=function(){this.canLoad=!1,this.clearTimer()},t.switchParams=function(e,t,i){var n=null==t?void 0:t.renditionReports;if(n){for(var r=-1,o=0;o<n.length;o++){var a=n[o],s=void 0;try{s=new self.URL(a.URI,t.url).href}catch(e){be.warn("Could not construct new URL for Rendition Report: "+e),s=a.URI||""}if(s===e){r=o;break}s===e.substring(0,s.length)&&(r=o)}if(-1!==r){var l=n[r],u=parseInt(l["LAST-MSN"])||(null==t?void 0:t.lastPartSn),c=parseInt(l["LAST-PART"])||(null==t?void 0:t.lastPartIndex);if(this.hls.config.lowLatencyMode){var d=Math.min(t.age-t.partTarget,t.targetduration);c>=0&&d>t.partTarget&&(c+=1)}var h=i&&ui(i);return new ci(u,c>=0?c:void 0,h)}}},t.loadPlaylist=function(e){-1===this.requestScheduled&&(this.requestScheduled=self.performance.now())},t.shouldLoadPlaylist=function(e){return this.canLoad&&!!e&&!!e.url&&(!e.details||e.details.live)},t.shouldReloadPlaylist=function(e){return-1===this.timer&&-1===this.requestScheduled&&this.shouldLoadPlaylist(e)},t.playlistLoaded=function(e,t,i){var n=this,r=t.details,o=t.stats,a=self.performance.now(),s=o.loading.first?Math.max(0,a-o.loading.first):0;if(r.advancedDateTime=Date.now()-s,r.live||null!=i&&i.live){if(r.reloaded(i),i&&this.log("live playlist "+e+" "+(r.advanced?"REFRESHED "+r.lastPartSn+"-"+r.lastPartIndex:r.updated?"UPDATED":"MISSED")),i&&r.fragments.length>0&&gi(i,r),!this.canLoad||!r.live)return;var l,u=void 0,c=void 0;if(r.canBlockReload&&r.endSN&&r.advanced){var d=this.hls.config.lowLatencyMode,h=r.lastPartSn,f=r.endSN,p=r.lastPartIndex,g=h===f;-1!==p?(u=g?f+1:h,c=g?d?0:p:p+1):u=f+1;var v=r.age,m=v+r.ageHeader,y=Math.min(m-r.partTarget,1.5*r.targetduration);if(y>0){if(i&&y>i.tuneInGoal)this.warn("CDN Tune-in goal increased from: "+i.tuneInGoal+" to: "+y+" with playlist age: "+r.age),y=0;else{var b=Math.floor(y/r.targetduration);u+=b,void 0!==c&&(c+=Math.round(y%r.targetduration/r.partTarget)),this.log("CDN Tune-in age: "+r.ageHeader+"s last advanced "+v.toFixed(2)+"s goal: "+y+" skip sn "+b+" to part "+c)}r.tuneInGoal=y}if(l=this.getDeliveryDirectives(r,t.deliveryDirectives,u,c),d||!g)return void this.loadPlaylist(l)}else(r.canBlockReload||r.canSkipUntil)&&(l=this.getDeliveryDirectives(r,t.deliveryDirectives,u,c));var _=this.hls.mainForwardBufferInfo,w=_?_.end-_.len:0,E=function(e,t){void 0===t&&(t=1/0);var i=1e3*e.targetduration;if(e.updated){var n=e.fragments;if(n.length&&4*i>t){var r=1e3*n[n.length-1].duration;r<i&&(i=r)}}else i/=2;return Math.round(i)}(r,1e3*(r.edge-w));r.updated&&a>this.requestScheduled+E&&(this.requestScheduled=o.loading.start),void 0!==u&&r.canBlockReload?this.requestScheduled=o.loading.first+E-(1e3*r.partTarget||1e3):-1===this.requestScheduled||this.requestScheduled+E<a?this.requestScheduled=a:this.requestScheduled-a<=0&&(this.requestScheduled+=E);var x=this.requestScheduled-a;x=Math.max(0,x),this.log("reload live playlist "+e+" in "+Math.round(x)+" ms"),this.timer=self.setTimeout(function(){return n.loadPlaylist(l)},x)}else this.clearTimer()},t.getDeliveryDirectives=function(e,t,i,n){var r=ui(e);return null!=t&&t.skip&&e.deltaUpdateFailed&&(i=t.msn,n=t.part,r=ai),new ci(i,n,r)},t.checkRetry=function(e){var t=this,i=e.details,n=wi(e),r=e.errorAction,o=r||{},a=o.action,s=o.retryCount,l=void 0===s?0:s,u=o.retryConfig,c=!!r&&!!u&&(a===Ii||!r.resolved&&a===Li);if(c){var d;if(this.requestScheduled=-1,l>=u.maxNumRetry)return!1;if(n&&null!=(d=e.context)&&d.deliveryDirectives)this.warn("Retrying playlist loading "+(l+1)+"/"+u.maxNumRetry+' after "'+i+'" without delivery-directives'),this.loadPlaylist();else{var h=xi(u,l);this.timer=self.setTimeout(function(){return t.loadPlaylist()},h),this.warn("Retrying playlist loading "+(l+1)+"/"+u.maxNumRetry+' after "'+i+'" in '+h+"ms")}e.levelRetry=!0,r.resolved=!0}return c},e}(),ji=function(){function e(e,t,i){void 0===t&&(t=0),void 0===i&&(i=0),this.halfLife=void 0,this.alpha_=void 0,this.estimate_=void 0,this.totalWeight_=void 0,this.halfLife=e,this.alpha_=e?Math.exp(Math.log(.5)/e):0,this.estimate_=t,this.totalWeight_=i}var t=e.prototype;return t.sample=function(e,t){var i=Math.pow(this.alpha_,e);this.estimate_=t*(1-i)+i*this.estimate_,this.totalWeight_+=e},t.getTotalWeight=function(){return this.totalWeight_},t.getEstimate=function(){if(this.alpha_){var e=1-Math.pow(this.alpha_,this.totalWeight_);if(e)return this.estimate_/e}return this.estimate_},e}(),Ui=function(){function e(e,t,i,n){void 0===n&&(n=100),this.defaultEstimate_=void 0,this.minWeight_=void 0,this.minDelayMs_=void 0,this.slow_=void 0,this.fast_=void 0,this.defaultTTFB_=void 0,this.ttfb_=void 0,this.defaultEstimate_=i,this.minWeight_=.001,this.minDelayMs_=50,this.slow_=new ji(e),this.fast_=new ji(t),this.defaultTTFB_=n,this.ttfb_=new ji(e)}var t=e.prototype;return t.update=function(e,t){var i=this.slow_,n=this.fast_,r=this.ttfb_;i.halfLife!==e&&(this.slow_=new ji(e,i.getEstimate(),i.getTotalWeight())),n.halfLife!==t&&(this.fast_=new ji(t,n.getEstimate(),n.getTotalWeight())),r.halfLife!==e&&(this.ttfb_=new ji(e,r.getEstimate(),r.getTotalWeight()))},t.sample=function(e,t){var i=(e=Math.max(e,this.minDelayMs_))/1e3,n=8*t/i;this.fast_.sample(i,n),this.slow_.sample(i,n)},t.sampleTTFB=function(e){var t=e/1e3,i=Math.sqrt(2)*Math.exp(-Math.pow(t,2)/2);this.ttfb_.sample(i,Math.max(e,5))},t.canEstimate=function(){return this.fast_.getTotalWeight()>=this.minWeight_},t.getEstimate=function(){return this.canEstimate()?Math.min(this.fast_.getEstimate(),this.slow_.getEstimate()):this.defaultEstimate_},t.getEstimateTTFB=function(){return this.ttfb_.getTotalWeight()>=this.minWeight_?this.ttfb_.getEstimate():this.defaultTTFB_},t.destroy=function(){},e}(),$i={"supported":!0,"configurations":[],"decodingInfoResults":[{"supported":!0,"powerEfficient":!0,"smooth":!0}]},Hi={};function zi(e,t,i){var n=e.videoCodec,r=e.audioCodec;if(!n||!r||!i)return Promise.resolve($i);var o={"width":e.width,"height":e.height,"bitrate":Math.ceil(Math.max(.9*e.bitrate,e.averageBitrate)),"framerate":e.frameRate||30},a=e.videoRange;"SDR"!==a&&(o.transferFunction=a.toLowerCase());var s=n.split(",").map(function(e){return{"type":"media-source","video":k(k({},o),{},{"contentType":yt(e,"video")})}});return r&&e.audioGroups&&e.audioGroups.forEach(function(n){var e;n&&(null==(e=t.groups[n])||e.tracks.forEach(function(e){if(e.groupId===n){var t=e.channels||"",i=parseFloat(t);J(i)&&i>2&&s.push.apply(s,r.split(",").map(function(e){return{"type":"media-source","audio":{"contentType":yt(e,"audio"),"channels":""+i}}}))}}))}),Promise.all(s.map(function(e){var t=function(e){var t=e.audio,i=e.video,n=i||t;if(n){var r=n.contentType.split('"')[1];if(i)return"r"+i.height+"x"+i.width+"f"+Math.ceil(i.framerate)+(i.transferFunction||"sd")+"_"+r+"_"+Math.ceil(i.bitrate/1e5);if(t)return"c"+t.channels+(t.spatialRendering?"s":"n")+"_"+r}return""}(e);return Hi[t]||(Hi[t]=i.decodingInfo(e))})).then(function(e){return{"supported":!e.some(function(e){return!e.supported}),"configurations":s,"decodingInfoResults":e}}).catch(function(e){return{"supported":!1,"configurations":s,"decodingInfoResults":[],"error":e}})}function Wi(e,t){var i=!1,n=[];return e&&(i="SDR"!==e,n=[e]),t&&(n=t.allowedVideoRanges||oi.slice(0),n=(i=void 0!==t.preferHDR?t.preferHDR:function(){if("function"==typeof matchMedia){var e=matchMedia("(dynamic-range: high)"),t=matchMedia("bad query");if(e.media!==t.media)return!0===e.matches}return!1}())?n.filter(function(e){return"SDR"!==e}):["SDR"]),{"preferHDR":i,"allowedVideoRanges":n}}function Gi(e,t){be.log('[abr] start candidates with "'+e+'" ignored because '+t)}function p(e,t,i){if("attrs"in e){var n=t.indexOf(e);if(-1!==n)return n}for(var r=0;r<t.length;r++)if(Vi(e,t[r],i))return r;return-1}function Vi(e,t,i){var n=e.groupId,r=e.name,o=e.lang,a=e.assocLang,s=e.characteristics,l=e.default,u=e.forced;return(void 0===n||t.groupId===n)&&(void 0===r||t.name===r)&&(void 0===o||t.lang===o)&&(void 0===o||t.assocLang===a)&&(void 0===l||t.default===l)&&(void 0===u||t.forced===u)&&(void 0===s||function(e,t){void 0===t&&(t="");var i=e.split(","),n=t.split(",");return i.length===n.length&&!i.some(function(e){return-1===n.indexOf(e)})}(s,t.characteristics))&&(void 0===i||i(e,t))}function qi(e,t){var i=e.audioCodec,n=e.channels;return!(void 0!==i&&(t.audioCodec||"").substring(0,4)!==i.substring(0,4)||void 0!==n&&n!==(t.channels||"2"))}function Ki(e,t,i){for(var n=t;n;n--)if(i(e[n]))return n;for(var r=t+1;r<e.length;r++)if(i(e[r]))return r;return-1}var Zi=function(){function e(e){var C=this;this.hls=void 0,this.lastLevelLoadSec=0,this.lastLoadedFragLevel=-1,this.firstSelection=-1,this._nextAutoLevel=-1,this.nextAutoLevelKey="",this.audioTracksByGroup=null,this.codecTiers=null,this.timer=-1,this.fragCurrent=null,this.partCurrent=null,this.bitrateTestDelay=0,this.bwEstimator=void 0,this._abandonRulesCheck=function(){var e=C.fragCurrent,t=C.partCurrent,i=C.hls,n=i.autoLevelEnabled,r=i.media;if(e&&r){var o=performance.now(),a=t?t.stats:e.stats,s=t?t.duration:e.duration,l=o-a.loading.start,u=i.minAutoLevel;if(a.aborted||a.loaded&&a.loaded===a.total||e.level<=u)return C.clearTimer(),void(C._nextAutoLevel=-1);if(n&&!r.paused&&r.playbackRate&&r.readyState){var c=i.mainForwardBufferInfo;if(null!==c){var d=C.bwEstimator.getEstimateTTFB(),h=Math.abs(r.playbackRate);if(!(l<=Math.max(d,s/(2*h)*1e3))){var f=c.len/h,p=a.loading.first?a.loading.first-a.loading.start:-1,g=a.loaded&&p>-1,v=C.getBwEstimate(),m=i.levels,y=m[e.level],b=a.total||Math.max(a.loaded,Math.round(s*y.averageBitrate/8)),_=g?l-p:l;_<1&&g&&(_=Math.min(l,8*a.loaded/v));var w=g?1e3*a.loaded/_:0,E=w?(b-a.loaded)/w:8*b/v+d/1e3;if(!(E<=f)){var x,T=w?8*w:v,S=Number.POSITIVE_INFINITY;for(x=e.level-1;x>u;x--){var k=m[x].maxBitrate;if((S=C.getTimeToLoadFrag(d/1e3,T,s*k,!m[x].details))<f)break}if(!(S>=E||S>10*s)){i.nextLoadLevel=i.nextAutoLevel=x,g?C.bwEstimator.sample(l-Math.min(d,p),a.loaded):C.bwEstimator.sampleTTFB(l);var R=m[x].maxBitrate;C.getBwEstimate()*C.hls.config.abrBandWidthUpFactor>R&&C.resetEstimator(R),C.clearTimer(),be.warn("[abr] Fragment "+e.sn+(t?" part "+t.index:"")+" of level "+e.level+" is loading too slowly;\n      Time to underbuffer: "+f.toFixed(3)+" s\n      Estimated load time for current fragment: "+E.toFixed(3)+" s\n      Estimated load time for down switch fragment: "+S.toFixed(3)+" s\n      TTFB estimate: "+(0|p)+" ms\n      Current BW estimate: "+(J(v)?0|v:"Unknown")+" bps\n      New BW estimate: "+(0|C.getBwEstimate())+" bps\n      Switching to level "+x+" @ "+(0|R)+" bps"),i.trigger(ve.FRAG_LOAD_EMERGENCY_ABORTED,{"frag":e,"part":t,"stats":a})}}}}}}},this.hls=e,this.bwEstimator=this.initEstimator(),this.registerListeners()}var t=e.prototype;return t.resetEstimator=function(e){e&&(be.log("setting initial bwe to "+e),this.hls.config.abrEwmaDefaultEstimate=e),this.firstSelection=-1,this.bwEstimator=this.initEstimator()},t.initEstimator=function(){var e=this.hls.config;return new Ui(e.abrEwmaSlowVoD,e.abrEwmaFastVoD,e.abrEwmaDefaultEstimate)},t.registerListeners=function(){var e=this.hls;e.on(ve.MANIFEST_LOADING,this.onManifestLoading,this),e.on(ve.FRAG_LOADING,this.onFragLoading,this),e.on(ve.FRAG_LOADED,this.onFragLoaded,this),e.on(ve.FRAG_BUFFERED,this.onFragBuffered,this),e.on(ve.LEVEL_SWITCHING,this.onLevelSwitching,this),e.on(ve.LEVEL_LOADED,this.onLevelLoaded,this),e.on(ve.LEVELS_UPDATED,this.onLevelsUpdated,this),e.on(ve.MAX_AUTO_LEVEL_UPDATED,this.onMaxAutoLevelUpdated,this),e.on(ve.ERROR,this.onError,this)},t.unregisterListeners=function(){var e=this.hls;e&&(e.off(ve.MANIFEST_LOADING,this.onManifestLoading,this),e.off(ve.FRAG_LOADING,this.onFragLoading,this),e.off(ve.FRAG_LOADED,this.onFragLoaded,this),e.off(ve.FRAG_BUFFERED,this.onFragBuffered,this),e.off(ve.LEVEL_SWITCHING,this.onLevelSwitching,this),e.off(ve.LEVEL_LOADED,this.onLevelLoaded,this),e.off(ve.LEVELS_UPDATED,this.onLevelsUpdated,this),e.off(ve.MAX_AUTO_LEVEL_UPDATED,this.onMaxAutoLevelUpdated,this),e.off(ve.ERROR,this.onError,this))},t.destroy=function(){this.unregisterListeners(),this.clearTimer(),this.hls=this._abandonRulesCheck=null,this.fragCurrent=this.partCurrent=null},t.onManifestLoading=function(e,t){this.lastLoadedFragLevel=-1,this.firstSelection=-1,this.lastLevelLoadSec=0,this.fragCurrent=this.partCurrent=null,this.onLevelsUpdated(),this.clearTimer()},t.onLevelsUpdated=function(){this.lastLoadedFragLevel>-1&&this.fragCurrent&&(this.lastLoadedFragLevel=this.fragCurrent.level),this._nextAutoLevel=-1,this.onMaxAutoLevelUpdated(),this.codecTiers=null,this.audioTracksByGroup=null},t.onMaxAutoLevelUpdated=function(){this.firstSelection=-1,this.nextAutoLevelKey=""},t.onFragLoading=function(e,t){var i,n=t.frag;this.ignoreFragment(n)||(n.bitrateTest||(this.fragCurrent=n,this.partCurrent=null!=(i=t.part)?i:null),this.clearTimer(),this.timer=self.setInterval(this._abandonRulesCheck,100))},t.onLevelSwitching=function(e,t){this.clearTimer()},t.onError=function(e,t){if(!t.fatal)switch(t.details){case ye.BUFFER_ADD_CODEC_ERROR:case ye.BUFFER_APPEND_ERROR:this.lastLoadedFragLevel=-1,this.firstSelection=-1;break;case ye.FRAG_LOAD_TIMEOUT:var i=t.frag,n=this.fragCurrent,r=this.partCurrent;if(i&&n&&i.sn===n.sn&&i.level===n.level){var o=performance.now(),a=r?r.stats:i.stats,s=o-a.loading.start,l=a.loading.first?a.loading.first-a.loading.start:-1;if(a.loaded&&l>-1){var u=this.bwEstimator.getEstimateTTFB();this.bwEstimator.sample(s-Math.min(u,l),a.loaded)}else this.bwEstimator.sampleTTFB(s)}}},t.getTimeToLoadFrag=function(e,t,i,n){return e+i/t+(n?this.lastLevelLoadSec:0)},t.onLevelLoaded=function(e,t){var i=this.hls.config,n=t.stats.loading,r=n.end-n.start;J(r)&&(this.lastLevelLoadSec=r/1e3),t.details.live?this.bwEstimator.update(i.abrEwmaSlowLive,i.abrEwmaFastLive):this.bwEstimator.update(i.abrEwmaSlowVoD,i.abrEwmaFastVoD)},t.onFragLoaded=function(e,t){var i=t.frag,n=t.part,r=n?n.stats:i.stats;if(i.type===x&&this.bwEstimator.sampleTTFB(r.loading.first-r.loading.start),!this.ignoreFragment(i)){if(this.clearTimer(),i.level===this._nextAutoLevel&&(this._nextAutoLevel=-1),this.firstSelection=-1,this.hls.config.abrMaxWithRealBitrate){var o=n?n.duration:i.duration,a=this.hls.levels[i.level],s=(a.loaded?a.loaded.bytes:0)+r.loaded,l=(a.loaded?a.loaded.duration:0)+o;a.loaded={"bytes":s,"duration":l},a.realBitrate=Math.round(8*s/l)}if(i.bitrateTest){var u={"stats":r,"frag":i,"part":n,"id":i.type};this.onFragBuffered(ve.FRAG_BUFFERED,u),i.bitrateTest=!1}else this.lastLoadedFragLevel=i.level}},t.onFragBuffered=function(e,t){var i=t.frag,n=t.part,r=null!=n&&n.stats.loaded?n.stats:i.stats;if(!r.aborted&&!this.ignoreFragment(i)){var o=r.parsing.end-r.loading.start-Math.min(r.loading.first-r.loading.start,this.bwEstimator.getEstimateTTFB());this.bwEstimator.sample(o,r.loaded),r.bwEstimate=this.getBwEstimate(),i.bitrateTest?this.bitrateTestDelay=o/1e3:this.bitrateTestDelay=0}},t.ignoreFragment=function(e){return e.type!==x||"initSegment"===e.sn},t.clearTimer=function(){this.timer>-1&&(self.clearInterval(this.timer),this.timer=-1)},t.getAutoLevelKey=function(){return this.getBwEstimate()+"_"+this.getStarvationDelay().toFixed(2)},t.getNextABRAutoLevel=function(){var e=this.fragCurrent,t=this.partCurrent,i=this.hls,n=i.maxAutoLevel,r=i.config,o=i.minAutoLevel,a=t?t.duration:e?e.duration:0,s=this.getBwEstimate(),l=this.getStarvationDelay(),u=r.abrBandWidthFactor,c=r.abrBandWidthUpFactor;if(l){var d=this.findBestLevel(s,o,n,l,0,u,c);if(d>=0)return d}var h=a?Math.min(a,r.maxStarvationDelay):r.maxStarvationDelay;if(!l){var f=this.bitrateTestDelay;f&&(h=(a?Math.min(a,r.maxLoadingDelay):r.maxLoadingDelay)-f,be.info("[abr] bitrate test took "+Math.round(1e3*f)+"ms, set first fragment max fetchDuration to "+Math.round(1e3*h)+" ms"),u=c=1)}var p=this.findBestLevel(s,o,n,l,h,u,c);if(be.info("[abr] "+(l?"rebuffering expected":"buffer is empty")+", optimal quality level "+p),p>-1)return p;var g=i.levels[o],v=i.levels[i.loadLevel];return(null==g?void 0:g.bitrate)<(null==v?void 0:v.bitrate)?o:i.loadLevel},t.getStarvationDelay=function(){var e=this.hls,t=e.media;if(!t)return 1/0;var i=t&&0!==t.playbackRate?Math.abs(t.playbackRate):1,n=e.mainForwardBufferInfo;return(n?n.len:0)/i},t.getBwEstimate=function(){return this.bwEstimator.canEstimate()?this.bwEstimator.getEstimate():this.hls.config.abrEwmaDefaultEstimate},t.findBestLevel=function(c,e,d,h,f,p,g){var t,v=this,m=h+f,y=this.lastLoadedFragLevel,b=-1===y?this.hls.firstLevel:y,i=this.fragCurrent,_=this.partCurrent,n=this.hls,w=n.levels,r=n.allAudioTracks,E=n.loadLevel,x=n.config;if(1===w.length)return 0;var T,S=w[b],k=!(null==S||null==(t=S.details)||!t.live),R=-1===E||-1===y,C="SDR",A=(null==S?void 0:S.frameRate)||0,O=x.audioPreference,o=x.videoPreference,L=this.audioTracksByGroup||(this.audioTracksByGroup=function(e){return e.reduce(function(e,t){var i=e.groups[t.groupId];i||(i=e.groups[t.groupId]={"tracks":[],"channels":{"2":0},"hasDefault":!1,"hasAutoSelect":!1}),i.tracks.push(t);var n=t.channels||"2";return i.channels[n]=(i.channels[n]||0)+1,i.hasDefault=i.hasDefault||t.default,i.hasAutoSelect=i.hasAutoSelect||t.autoselect,i.hasDefault&&(e.hasDefaultAudio=!0),i.hasAutoSelect&&(e.hasAutoSelectAudio=!0),e},{"hasDefaultAudio":!1,"hasAutoSelectAudio":!1,"groups":{}})}(r));if(R){if(-1!==this.firstSelection)return this.firstSelection;var a=this.codecTiers||(this.codecTiers=function(e,o,t,i){return e.slice(t,i+1).reduce(function(e,t){if(!t.codecSet)return e;var i=t.audioGroups,n=e[t.codecSet];n||(e[t.codecSet]=n={"minBitrate":1/0,"minHeight":1/0,"minFramerate":1/0,"maxScore":0,"videoRanges":{"SDR":0},"channels":{"2":0},"hasDefaultAudio":!i,"fragmentError":0}),n.minBitrate=Math.min(n.minBitrate,t.bitrate);var r=Math.min(t.height,t.width);return n.minHeight=Math.min(n.minHeight,r),n.minFramerate=Math.min(n.minFramerate,t.frameRate),n.maxScore=Math.max(n.maxScore,t.score),n.fragmentError+=t.fragmentError,n.videoRanges[t.videoRange]=(n.videoRanges[t.videoRange]||0)+1,i&&i.forEach(function(e){if(e){var t=o.groups[e];t&&(n.hasDefaultAudio=n.hasDefaultAudio||o.hasDefaultAudio?t.hasDefault:t.hasAutoSelect||!o.hasDefaultAudio&&!o.hasAutoSelectAudio,Object.keys(t.channels).forEach(function(e){n.channels[e]=(n.channels[e]||0)+t.channels[e]}))}}),e},{})}(w,L,e,d)),s=function(n,e,r,t,i){for(var o=Object.keys(n),a=null==t?void 0:t.channels,s=null==t?void 0:t.audioCodec,l=a&&2===parseInt(a),u=!0,c=!1,d=1/0,h=1/0,f=1/0,p=0,g=[],v=Wi(e,i),m=v.preferHDR,y=v.allowedVideoRanges,b=function(){var t=n[o[_]];u=t.channels[2]>0,d=Math.min(d,t.minHeight),h=Math.min(h,t.minFramerate),f=Math.min(f,t.minBitrate);var e=y.filter(function(e){return t.videoRanges[e]>0});e.length>0&&(c=!0,g=e)},_=o.length;_--;)b();d=J(d)?d:0,h=J(h)?h:0;var w=Math.max(1080,d),E=Math.max(30,h);return f=J(f)?f:r,r=Math.max(f,r),c||(e=void 0,g=[]),{"codecSet":o.reduce(function(e,t){var i=n[t];if(t===e)return e;if(i.minBitrate>r)return Gi(t,"min bitrate of "+i.minBitrate+" > current estimate of "+r),e;if(!i.hasDefaultAudio)return Gi(t,"no renditions with default or auto-select sound found"),e;if(s&&t.indexOf(s.substring(0,4))%5!=0)return Gi(t,'audio codec preference "'+s+'" not found'),e;if(a&&!l){if(!i.channels[a])return Gi(t,"no renditions with "+a+" channel sound found (channels options: "+Object.keys(i.channels)+")"),e}else if((!s||l)&&u&&0===i.channels[2])return Gi(t,"no renditions with stereo sound found"),e;return i.minHeight>w?(Gi(t,"min resolution of "+i.minHeight+" > maximum of "+w),e):i.minFramerate>E?(Gi(t,"min framerate of "+i.minFramerate+" > maximum of "+E),e):g.some(function(e){return i.videoRanges[e]>0})?i.maxScore<p?(Gi(t,"max score of "+i.maxScore+" < selected max of "+p),e):e&&(_t(t)>=_t(e)||i.fragmentError>n[e].fragmentError)?e:(p=i.maxScore,t):(Gi(t,"no variants with VIDEO-RANGE of "+JSON.stringify(g)+" found"),e)},void 0),"videoRanges":g,"preferHDR":m,"minFramerate":h,"minBitrate":f}}(a,C,c,O,o),B=s.codecSet,l=s.videoRanges,F=s.minFramerate,N=s.minBitrate,j=s.preferHDR;T=B,C=j?l[l.length-1]:l[0],A=F,c=Math.max(c,N),be.log("[abr] picked start tier "+JSON.stringify(s))}else T=null==S?void 0:S.codecSet,C=null==S?void 0:S.videoRange;for(var u,P=_?_.duration:i?i.duration:0,I=this.bwEstimator.getEstimateTTFB()/1e3,D=[],U=function(){var e,n=w[M],t=M>b;if(!n)return 0;if(x.useMediaCapabilities&&!n.supportedResult&&!n.supportedPromise){var i=navigator.mediaCapabilities;"function"==typeof(null==i?void 0:i.decodingInfo)&&function(e,n,t,i,r,o){var a=e.audioCodec?e.audioGroups:null,s=null==o?void 0:o.audioCodec,l=null==o?void 0:o.channels,u=l?parseInt(l):s?1/0:2,c=null;if(null!=a&&a.length)try{c=1===a.length&&a[0]?n.groups[a[0]].channels:a.reduce(function(t,e){if(e){var i=n.groups[e];if(!i)throw new Error("Audio track group "+e+" not found");Object.keys(i.channels).forEach(function(e){t[e]=(t[e]||0)+i.channels[e]})}return t},{"2":0})}catch(e){return!0}return void 0!==e.videoCodec&&(e.width>1920&&e.height>1088||e.height>1920&&e.width>1088||e.frameRate>Math.max(i,30)||"SDR"!==e.videoRange&&e.videoRange!==t||e.bitrate>Math.max(r,8e6))||!!c&&J(u)&&Object.keys(c).some(function(e){return parseInt(e)>u})}(n,L,C,A,c,O)?(n.supportedPromise=zi(n,L,i),n.supportedPromise.then(function(e){if(v.hls){n.supportedResult=e;var t=v.hls.levels,i=t.indexOf(n);e.error?be.warn('[abr] MediaCapabilities decodingInfo error: "'+e.error+'" for level '+i+" "+JSON.stringify(e)):e.supported||(be.warn("[abr] Unsupported MediaCapabilities decodingInfo result for level "+i+" "+JSON.stringify(e)),i>-1&&t.length>1&&(be.log("[abr] Removing unsupported level "+i),v.hls.removeLevel(i)))}})):n.supportedResult=$i}if(T&&n.codecSet!==T||C&&n.videoRange!==C||t&&A>n.frameRate||!t&&A>0&&A<n.frameRate||n.supportedResult&&(null==(e=n.supportedResult.decodingInfoResults)||!e[0].smooth))return D.push(M),0;var r,o=n.details,a=(_?null==o?void 0:o.partTarget:null==o?void 0:o.averagetargetduration)||P;r=t?g*c:p*c;var s=P&&h>=2*P&&0===f?w[M].averageBitrate:w[M].maxBitrate,l=v.getTimeToLoadFrag(I,r,s*a,void 0===o);if(r>=s&&(M===y||0===n.loadError&&0===n.fragmentError)&&(l<=I||!J(l)||k&&!v.bitrateTestDelay||l<m)){var u=v.forcedAutoLevel;return M===E||-1!==u&&u===E||(D.length&&be.trace("[abr] Skipped level(s) "+D.join(",")+" of "+d+' max with CODECS and VIDEO-RANGE:"'+w[D[0]].codecs+'" '+w[D[0]].videoRange+'; not compatible with "'+S.codecs+'" '+C),be.info("[abr] switch candidate:"+b+"->"+M+" adjustedbw("+Math.round(r)+")-bitrate="+Math.round(r-s)+" ttfb:"+I.toFixed(1)+" avgDuration:"+a.toFixed(1)+" maxFetchDuration:"+m.toFixed(1)+" fetchDuration:"+l.toFixed(1)+" firstSelection:"+R+" codecSet:"+T+" videoRange:"+C+" hls.loadLevel:"+E)),R&&(v.firstSelection=M),{"v":M}}},M=d;M>=e;M--)if(0!==(u=U())&&u)return u.v;return-1},l(e,[{"key":"firstAutoLevel","get":function(){var e=this.hls,t=e.maxAutoLevel,i=e.minAutoLevel,n=this.getBwEstimate(),r=this.hls.config.maxStarvationDelay,o=this.findBestLevel(n,i,t,0,r,1,1);if(o>-1)return o;var a=this.hls.firstLevel,s=Math.min(Math.max(a,i),t);return be.warn("[abr] Could not find best starting auto level. Defaulting to first in playlist "+a+" clamped to "+s),s}},{"key":"forcedAutoLevel","get":function(){return this.nextAutoLevelKey?-1:this._nextAutoLevel}},{"key":"nextAutoLevel","get":function(){var e=this.forcedAutoLevel,t=this.bwEstimator.canEstimate(),i=this.lastLoadedFragLevel>-1;if(!(-1===e||t&&i&&this.nextAutoLevelKey!==this.getAutoLevelKey()))return e;var n=t&&i?this.getNextABRAutoLevel():this.firstAutoLevel;if(-1!==e){var r=this.hls.levels;if(r.length>Math.max(e,n)&&r[e].loadError<=r[n].loadError)return e}return this._nextAutoLevel=n,this.nextAutoLevelKey=this.getAutoLevelKey(),n},"set":function(e){var t=this.hls,i=t.maxAutoLevel,n=t.minAutoLevel,r=Math.min(Math.max(e,n),i);this._nextAutoLevel!==r&&(this.nextAutoLevelKey="",this._nextAutoLevel=r)}}]),e}(),Xi=function(){function e(){this._boundTick=void 0,this._tickTimer=null,this._tickInterval=null,this._tickCallCount=0,this._boundTick=this.tick.bind(this)}var t=e.prototype;return t.destroy=function(){this.onHandlerDestroying(),this.onHandlerDestroyed()},t.onHandlerDestroying=function(){this.clearNextTick(),this.clearInterval()},t.onHandlerDestroyed=function(){},t.hasInterval=function(){return!!this._tickInterval},t.hasNextTick=function(){return!!this._tickTimer},t.setInterval=function(e){return!this._tickInterval&&(this._tickCallCount=0,this._tickInterval=self.setInterval(this._boundTick,e),!0)},t.clearInterval=function(){return!!this._tickInterval&&(self.clearInterval(this._tickInterval),this._tickInterval=null,!0)},t.clearNextTick=function(){return!!this._tickTimer&&(self.clearTimeout(this._tickTimer),this._tickTimer=null,!0)},t.tick=function(){this._tickCallCount++,1===this._tickCallCount&&(this.doTick(),this._tickCallCount>1&&this.tickImmediate(),this._tickCallCount=0)},t.tickImmediate=function(){this.clearNextTick(),this._tickTimer=self.setTimeout(this._boundTick,0)},t.doTick=function(){},e}(),Yi="NOT_LOADED",Qi="APPENDING",Ji="PARTIAL",en="OK",tn=function(){function e(e){this.activePartLists=Object.create(null),this.endListFragments=Object.create(null),this.fragments=Object.create(null),this.timeRanges=Object.create(null),this.bufferPadding=.2,this.hls=void 0,this.hasGaps=!1,this.hls=e,this._registerListeners()}var t=e.prototype;return t._registerListeners=function(){var e=this.hls;e.on(ve.BUFFER_APPENDED,this.onBufferAppended,this),e.on(ve.FRAG_BUFFERED,this.onFragBuffered,this),e.on(ve.FRAG_LOADED,this.onFragLoaded,this)},t._unregisterListeners=function(){var e=this.hls;e.off(ve.BUFFER_APPENDED,this.onBufferAppended,this),e.off(ve.FRAG_BUFFERED,this.onFragBuffered,this),e.off(ve.FRAG_LOADED,this.onFragLoaded,this)},t.destroy=function(){this._unregisterListeners(),this.fragments=this.activePartLists=this.endListFragments=this.timeRanges=null},t.getAppendedFrag=function(e,t){var i=this.activePartLists[t];if(i)for(var n=i.length;n--;){var r=i[n];if(!r)break;var o=r.end;if(r.start<=e&&null!==o&&e<=o)return r}return this.getBufferedFrag(e,t)},t.getBufferedFrag=function(e,t){for(var i=this.fragments,n=Object.keys(i),r=n.length;r--;){var o=i[n[r]];if((null==o?void 0:o.body.type)===t&&o.buffered){var a=o.body;if(a.start<=e&&e<=a.end)return a}}return null},t.detectEvictedFragments=function(n,r,o,e){var a=this;this.timeRanges&&(this.timeRanges[n]=r);var s=(null==e?void 0:e.fragment.sn)||-1;Object.keys(this.fragments).forEach(function(e){var i=a.fragments[e];if(i&&!(s>=i.body.sn))if(i.buffered||i.loaded){var t=i.range[n];t&&t.time.some(function(e){var t=!a.isTimeBuffered(e.startPTS,e.endPTS,r);return t&&a.removeFragment(i.body),t})}else i.body.type===o&&a.removeFragment(i.body)})},t.detectPartialFragments=function(e){var r=this,o=this.timeRanges,a=e.frag,s=e.part;if(o&&"initSegment"!==a.sn){var t=rn(a),l=this.fragments[t];if(!(!l||l.buffered&&a.gap)){var u=!a.relurl;Object.keys(o).forEach(function(e){var t=a.elementaryStreams[e];if(t){var i=o[e],n=u||!0===t.partial;l.range[e]=r.getBufferedTimes(a,s,n,i)}}),l.loaded=null,Object.keys(l.range).length?(l.buffered=!0,(l.body.endList=a.endList||l.body.endList)&&(this.endListFragments[l.body.type]=l),nn(l)||this.removeParts(a.sn-1,a.type)):this.removeFragment(l.body)}}},t.removeParts=function(t,e){var i=this.activePartLists[e];i&&(this.activePartLists[e]=i.filter(function(e){return e.fragment.sn>=t}))},t.fragBuffered=function(e,t){var i=rn(e),n=this.fragments[i];!n&&t&&(n=this.fragments[i]={"body":e,"appendedPTS":null,"loaded":null,"buffered":!1,"range":Object.create(null)},e.gap&&(this.hasGaps=!0)),n&&(n.loaded=null,n.buffered=!0)},t.getBufferedTimes=function(e,t,i,n){for(var r={"time":[],"partial":i},o=e.start,a=e.end,s=e.minEndPTS||a,l=e.maxStartPTS||o,u=0;u<n.length;u++){var c=n.start(u)-this.bufferPadding,d=n.end(u)+this.bufferPadding;if(l>=c&&s<=d){r.time.push({"startPTS":Math.max(o,n.start(u)),"endPTS":Math.min(a,n.end(u))});break}if(o<d&&a>c){var h=Math.max(o,n.start(u)),f=Math.min(a,n.end(u));f>h&&(r.partial=!0,r.time.push({"startPTS":h,"endPTS":f}))}else if(a<=c)break}return r},t.getPartialFragment=function(i){var n,r,o,a=null,s=0,l=this.bufferPadding,u=this.fragments;return Object.keys(u).forEach(function(e){var t=u[e];t&&nn(t)&&(r=t.body.start-l,o=t.body.end+l,i>=r&&i<=o&&(n=Math.min(i-r,o-i),s<=n&&(a=t.body,s=n)))}),a},t.isEndListAppended=function(e){var t=this.endListFragments[e];return void 0!==t&&(t.buffered||nn(t))},t.getState=function(e){var t=rn(e),i=this.fragments[t];return i?i.buffered?nn(i)?Ji:en:Qi:Yi},t.isTimeBuffered=function(e,t,i){for(var n,r,o=0;o<i.length;o++){if(n=i.start(o)-this.bufferPadding,r=i.end(o)+this.bufferPadding,e>=n&&t<=r)return!0;if(t<=n)return!1}return!1},t.onFragLoaded=function(e,t){var i=t.frag,n=t.part;if("initSegment"!==i.sn&&!i.bitrateTest){var r=n?null:t,o=rn(i);this.fragments[o]={"body":i,"appendedPTS":null,"loaded":r,"buffered":!1,"range":Object.create(null)}}},t.onBufferAppended=function(e,t){var i=this,n=t.frag,r=t.part,o=t.timeRanges;if("initSegment"!==n.sn){var a=n.type;if(r){var s=this.activePartLists[a];s||(this.activePartLists[a]=s=[]),s.push(r)}this.timeRanges=o,Object.keys(o).forEach(function(e){var t=o[e];i.detectEvictedFragments(e,t,a,r)})}},t.onFragBuffered=function(e,t){this.detectPartialFragments(t)},t.hasFragment=function(e){var t=rn(e);return!!this.fragments[t]},t.hasParts=function(e){var t;return!(null==(t=this.activePartLists[e])||!t.length)},t.removeFragmentsInRange=function(n,r,o,a,s){var l=this;a&&!this.hasGaps||Object.keys(this.fragments).forEach(function(e){var t=l.fragments[e];if(t){var i=t.body;i.type!==o||a&&!i.gap||i.start<r&&i.end>n&&(t.buffered||s)&&l.removeFragment(i)}})},t.removeFragment=function(e){var t=rn(e);e.stats.loaded=0,e.clearElementaryStreamInfo();var i=this.activePartLists[e.type];if(i){var n=e.sn;this.activePartLists[e.type]=i.filter(function(e){return e.fragment.sn!==n})}delete this.fragments[t],e.endList&&delete this.endListFragments[e.type]},t.removeAllFragments=function(){this.fragments=Object.create(null),this.endListFragments=Object.create(null),this.activePartLists=Object.create(null),this.hasGaps=!1},e}();function nn(e){var t,i,n;return e.buffered&&(e.body.gap||(null==(t=e.range.video)?void 0:t.partial)||(null==(i=e.range.audio)?void 0:i.partial)||(null==(n=e.range.audiovideo)?void 0:n.partial))}function rn(e){return e.type+"_"+e.level+"_"+e.sn}var on={"length":0,"start":function(){return 0},"end":function(){return 0}},T=function(){function a(){}return a.isBuffered=function(e,t){try{if(e)for(var i=a.getBuffered(e),n=0;n<i.length;n++)if(t>=i.start(n)&&t<=i.end(n))return!0}catch(e){}return!1},a.bufferInfo=function(e,t,i){try{if(e){var n,r=a.getBuffered(e),o=[];for(n=0;n<r.length;n++)o.push({"start":r.start(n),"end":r.end(n)});return this.bufferedInfo(o,t,i)}}catch(e){}return{"len":0,"start":t,"end":t,"nextStart":void 0}},a.bufferedInfo=function(e,t,i){t=Math.max(0,t),e.sort(function(e,t){var i=e.start-t.start;return i||t.end-e.end});var n=[];if(i)for(var r=0;r<e.length;r++){var o=n.length;if(o){var a=n[o-1].end;e[r].start-a<i?e[r].end>a&&(n[o-1].end=e[r].end):n.push(e[r])}else n.push(e[r])}else n=e;for(var s,l=0,u=t,c=t,d=0;d<n.length;d++){var h=n[d].start,f=n[d].end;if(t+i>=h&&t<f)u=h,l=(c=f)-t;else if(t+i<h){s=h;break}}return{"len":l,"start":u||0,"end":c||0,"nextStart":s}},a.getBuffered=function(e){try{return e.buffered}catch(e){return be.log("failed to get media.buffered",e),on}},a}(),an=function(e,t,i,n,r,o){void 0===n&&(n=0),void 0===r&&(r=-1),void 0===o&&(o=!1),this.level=void 0,this.sn=void 0,this.part=void 0,this.id=void 0,this.size=void 0,this.partial=void 0,this.transmuxing={"start":0,"executeStart":0,"executeEnd":0,"end":0},this.buffering={"audio":{"start":0,"executeStart":0,"executeEnd":0,"end":0},"video":{"start":0,"executeStart":0,"executeEnd":0,"end":0},"audiovideo":{"start":0,"executeStart":0,"executeEnd":0,"end":0}},this.level=e,this.sn=t,this.id=i,this.size=n,this.part=r,this.partial=o};function sn(e,t){for(var i=0,n=e.length;i<n;i++){var r;if((null==(r=e[i])?void 0:r.cc)===t)return e[i]}return null}function ln(e,t){if(e){var i=e.start+t;e.start=e.startPTS=i,e.endPTS=i+e.duration}}function un(e,t){for(var i=t.fragments,n=0,r=i.length;n<r;n++)ln(i[n],e);t.fragmentHint&&ln(t.fragmentHint,e),t.alignedSliding=!0}function cn(e,t,i){t&&(function(e,t,i){if(function(e,t,i){return!(!t||!(i.endCC>i.startCC||e&&e.cc<i.startCC))}(e,i,t)){var n=function(e,t){var i=e.fragments,n=t.fragments;if(n.length&&i.length){var r=sn(i,n[0].cc);if(r&&(!r||r.startPTS))return r;be.log("No frag in previous level to align on")}else be.log("No fragments to align")}(i,t);n&&J(n.start)&&(be.log("Adjusting PTS using last level due to CC increase within current level "+t.url),un(n.start,t))}}(e,i,t),!i.alignedSliding&&t&&dn(i,t),i.alignedSliding||!t||i.skippedSegments||vi(t,i))}function dn(e,t){if(e.hasProgramDateTime&&t.hasProgramDateTime){var i=e.fragments,n=t.fragments;if(i.length&&n.length){var r,o,a=Math.min(t.endCC,e.endCC);t.startCC<a&&e.startCC<a&&(r=sn(n,a),o=sn(i,a)),r&&o||(o=sn(i,(r=n[Math.floor(n.length/2)]).cc)||i[Math.floor(i.length/2)]);var s=r.programDateTime,l=o.programDateTime;s&&l&&un((l-s)/1e3-(o.start-r.start),e)}}}var hn=Math.pow(2,17),fn=function(){function e(e){this.config=void 0,this.loader=null,this.partLoadTimeout=-1,this.config=e}var t=e.prototype;return t.destroy=function(){this.loader&&(this.loader.destroy(),this.loader=null)},t.abort=function(){this.loader&&this.loader.abort()},t.load=function(s,l){var u=this,c=s.url;if(!c)return Promise.reject(new vn({"type":me.NETWORK_ERROR,"details":ye.FRAG_LOAD_ERROR,"fatal":!1,"frag":s,"error":new Error("Fragment does not have a "+(c?"part list":"url")),"networkDetails":null}));this.abort();var i=this.config,d=i.fLoader,h=i.loader;return new Promise(function(o,r){if(u.loader&&u.loader.destroy(),s.gap){if(s.tagList.some(function(e){return"GAP"===e[0]}))return void r(gn(s));s.gap=!1}var a=u.loader=s.loader=d?new d(i):new h(i),e=pn(s),t=Ti(i.fragLoadPolicy.default),n={"loadPolicy":t,"timeout":t.maxLoadTimeMs,"maxRetry":0,"retryDelay":0,"maxRetryDelay":0,"highWaterMark":"initSegment"===s.sn?1/0:hn};s.stats=a.stats,a.load(e,n,{"onSuccess":function(e,t,i,n){u.resetLoader(s,a);var r=e.data;i.resetIV&&s.decryptdata&&(s.decryptdata.iv=new Uint8Array(r.slice(0,16)),r=r.slice(16)),o({"frag":s,"part":null,"payload":r,"networkDetails":n})},"onError":function(e,t,i,n){u.resetLoader(s,a),r(new vn({"type":me.NETWORK_ERROR,"details":ye.FRAG_LOAD_ERROR,"fatal":!1,"frag":s,"response":k({"url":c,"data":void 0},e),"error":new Error("HTTP Error "+e.code+" "+e.text),"networkDetails":i,"stats":n}))},"onAbort":function(e,t,i){u.resetLoader(s,a),r(new vn({"type":me.NETWORK_ERROR,"details":ye.INTERNAL_ABORTED,"fatal":!1,"frag":s,"error":new Error("Aborted"),"networkDetails":i,"stats":e}))},"onTimeout":function(e,t,i){u.resetLoader(s,a),r(new vn({"type":me.NETWORK_ERROR,"details":ye.FRAG_LOAD_TIMEOUT,"fatal":!1,"frag":s,"error":new Error("Timeout after "+n.timeout+"ms"),"networkDetails":i,"stats":e}))},"onProgress":function(e,t,i,n){l&&l({"frag":s,"part":null,"payload":i,"networkDetails":n})}})})},t.loadPart=function(l,u,c){var d=this;this.abort();var t=this.config,i=t.fLoader,h=t.loader;return new Promise(function(o,r){if(d.loader&&d.loader.destroy(),l.gap||u.gap)r(gn(l,u));else{var a=d.loader=l.loader=i?new i(t):new h(t),s=pn(l,u),e=Ti(t.fragLoadPolicy.default),n={"loadPolicy":e,"timeout":e.maxLoadTimeMs,"maxRetry":0,"retryDelay":0,"maxRetryDelay":0,"highWaterMark":hn};u.stats=a.stats,a.load(s,n,{"onSuccess":function(e,t,i,n){d.resetLoader(l,a),d.updateStatsFromPart(l,u);var r={"frag":l,"part":u,"payload":e.data,"networkDetails":n};c(r),o(r)},"onError":function(e,t,i,n){d.resetLoader(l,a),r(new vn({"type":me.NETWORK_ERROR,"details":ye.FRAG_LOAD_ERROR,"fatal":!1,"frag":l,"part":u,"response":k({"url":s.url,"data":void 0},e),"error":new Error("HTTP Error "+e.code+" "+e.text),"networkDetails":i,"stats":n}))},"onAbort":function(e,t,i){l.stats.aborted=u.stats.aborted,d.resetLoader(l,a),r(new vn({"type":me.NETWORK_ERROR,"details":ye.INTERNAL_ABORTED,"fatal":!1,"frag":l,"part":u,"error":new Error("Aborted"),"networkDetails":i,"stats":e}))},"onTimeout":function(e,t,i){d.resetLoader(l,a),r(new vn({"type":me.NETWORK_ERROR,"details":ye.FRAG_LOAD_TIMEOUT,"fatal":!1,"frag":l,"part":u,"error":new Error("Timeout after "+n.timeout+"ms"),"networkDetails":i,"stats":e}))}})}})},t.updateStatsFromPart=function(e,t){var i=e.stats,n=t.stats,r=n.total;if(i.loaded+=n.loaded,r){var o=Math.round(e.duration/t.duration),a=Math.min(Math.round(i.loaded/r),o),s=(o-a)*Math.round(i.loaded/a);i.total=i.loaded+s}else i.total=Math.max(i.loaded,i.total);var l=i.loading,u=n.loading;l.start?l.first+=u.first-u.start:(l.start=u.start,l.first=u.first),l.end=u.end},t.resetLoader=function(e,t){e.loader=null,this.loader===t&&(self.clearTimeout(this.partLoadTimeout),this.loader=null),t.destroy()},e}();function pn(e,t){void 0===t&&(t=null);var i=t||e,n={"frag":e,"part":t,"responseType":"arraybuffer","url":i.url,"headers":{},"rangeStart":0,"rangeEnd":0},r=i.byteRangeStartOffset,o=i.byteRangeEndOffset;if(J(r)&&J(o)){var a,s=r,l=o;if("initSegment"===e.sn&&"AES-128"===(null==(a=e.decryptdata)?void 0:a.method)){var u=o-r;u%16&&(l=o+(16-u%16)),0!==r&&(n.resetIV=!0,s=r-16)}n.rangeStart=s,n.rangeEnd=l}return n}function gn(e,t){var i=new Error("GAP "+(e.gap?"tag":"attribute")+" found"),n={"type":me.MEDIA_ERROR,"details":ye.FRAG_GAP,"fatal":!1,"frag":e,"error":i,"networkDetails":null};return t&&(n.part=t),(t||e).stats.aborted=!0,new vn(n)}var vn=function(i){function e(e){var t;return(t=i.call(this,e.error.message)||this).data=void 0,t.data=e,t}return u(e,i),e}(f(Error)),mn=function(){function e(e,t){this.subtle=void 0,this.aesIV=void 0,this.subtle=e,this.aesIV=t}return e.prototype.decrypt=function(e,t){return this.subtle.decrypt({"name":"AES-CBC","iv":this.aesIV},t,e)},e}(),yn=function(){function e(e,t){this.subtle=void 0,this.key=void 0,this.subtle=e,this.key=t}return e.prototype.expandKey=function(){return this.subtle.importKey("raw",this.key,{"name":"AES-CBC"},!1,["encrypt","decrypt"])},e}(),bn=function(){function e(){this.rcon=[0,1,2,4,8,16,32,64,128,27,54],this.subMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.invSubMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.sBox=new Uint32Array(256),this.invSBox=new Uint32Array(256),this.key=new Uint32Array(0),this.ksRows=0,this.keySize=0,this.keySchedule=void 0,this.invKeySchedule=void 0,this.initTable()}var t=e.prototype;return t.uint8ArrayToUint32Array_=function(e){for(var t=new DataView(e),i=new Uint32Array(4),n=0;n<4;n++)i[n]=t.getUint32(4*n);return i},t.initTable=function(){var e=this.sBox,t=this.invSBox,i=this.subMix,n=i[0],r=i[1],o=i[2],a=i[3],s=this.invSubMix,l=s[0],u=s[1],c=s[2],d=s[3],h=new Uint32Array(256),f=0,p=0,g=0;for(g=0;g<256;g++)h[g]=g<128?g<<1:g<<1^283;for(g=0;g<256;g++){var v=p^p<<1^p<<2^p<<3^p<<4;v=v>>>8^255&v^99,e[f]=v,t[v]=f;var m=h[f],y=h[m],b=h[y],_=257*h[v]^16843008*v;n[f]=_<<24|_>>>8,r[f]=_<<16|_>>>16,o[f]=_<<8|_>>>24,a[f]=_,_=16843009*b^65537*y^257*m^16843008*f,l[v]=_<<24|_>>>8,u[v]=_<<16|_>>>16,c[v]=_<<8|_>>>24,d[v]=_,f?(f=m^h[h[h[b^m]]],p^=h[h[p]]):f=p=1}},t.expandKey=function(e){for(var t=this.uint8ArrayToUint32Array_(e),i=!0,n=0;n<t.length&&i;)i=t[n]===this.key[n],n++;if(!i){this.key=t;var r=this.keySize=t.length;if(4!==r&&6!==r&&8!==r)throw new Error("Invalid aes key size="+r);var o,a,s,l,u=this.ksRows=4*(r+6+1),c=this.keySchedule=new Uint32Array(u),d=this.invKeySchedule=new Uint32Array(u),h=this.sBox,f=this.rcon,p=this.invSubMix,g=p[0],v=p[1],m=p[2],y=p[3];for(o=0;o<u;o++)o<r?s=c[o]=t[o]:(l=s,o%r==0?(l=h[(l=l<<8|l>>>24)>>>24]<<24|h[l>>>16&255]<<16|h[l>>>8&255]<<8|h[255&l],l^=f[o/r|0]<<24):r>6&&o%r==4&&(l=h[l>>>24]<<24|h[l>>>16&255]<<16|h[l>>>8&255]<<8|h[255&l]),c[o]=s=(c[o-r]^l)>>>0);for(a=0;a<u;a++)o=u-a,l=3&a?c[o]:c[o-4],d[a]=a<4||o<=4?l:g[h[l>>>24]]^v[h[l>>>16&255]]^m[h[l>>>8&255]]^y[h[255&l]],d[a]=d[a]>>>0}},t.networkToHostOrderSwap=function(e){return e<<24|(65280&e)<<8|(16711680&e)>>8|e>>>24},t.decrypt=function(e,t,i){for(var n,r,o,a,s,l,u,c,d,h,f,p,g,v,m=this.keySize+6,y=this.invKeySchedule,b=this.invSBox,_=this.invSubMix,w=_[0],E=_[1],x=_[2],T=_[3],S=this.uint8ArrayToUint32Array_(i),k=S[0],R=S[1],C=S[2],A=S[3],O=new Int32Array(e),L=new Int32Array(O.length),P=this.networkToHostOrderSwap;t<O.length;){for(d=P(O[t]),h=P(O[t+1]),f=P(O[t+2]),p=P(O[t+3]),s=d^y[0],l=p^y[1],u=f^y[2],c=h^y[3],g=4,v=1;v<m;v++)n=w[s>>>24]^E[l>>16&255]^x[u>>8&255]^T[255&c]^y[g],r=w[l>>>24]^E[u>>16&255]^x[c>>8&255]^T[255&s]^y[g+1],o=w[u>>>24]^E[c>>16&255]^x[s>>8&255]^T[255&l]^y[g+2],a=w[c>>>24]^E[s>>16&255]^x[l>>8&255]^T[255&u]^y[g+3],s=n,l=r,u=o,c=a,g+=4;n=b[s>>>24]<<24^b[l>>16&255]<<16^b[u>>8&255]<<8^b[255&c]^y[g],r=b[l>>>24]<<24^b[u>>16&255]<<16^b[c>>8&255]<<8^b[255&s]^y[g+1],o=b[u>>>24]<<24^b[c>>16&255]<<16^b[s>>8&255]<<8^b[255&l]^y[g+2],a=b[c>>>24]<<24^b[s>>16&255]<<16^b[l>>8&255]<<8^b[255&u]^y[g+3],L[t]=P(n^k),L[t+1]=P(a^R),L[t+2]=P(o^C),L[t+3]=P(r^A),k=d,R=h,C=f,A=p,t+=4}return L.buffer},e}(),_n=function(){function e(e,t){var i=(void 0===t?{}:t).removePKCS7Padding,n=void 0===i||i;if(this.logEnabled=!0,this.removePKCS7Padding=void 0,this.subtle=null,this.softwareDecrypter=null,this.key=null,this.fastAesKey=null,this.remainderData=null,this.currentIV=null,this.currentResult=null,this.useSoftware=void 0,this.useSoftware=e.enableSoftwareAES,this.removePKCS7Padding=n,n)try{var r=self.crypto;r&&(this.subtle=r.subtle||r.webkitSubtle)}catch(e){}this.useSoftware=!this.subtle}var t=e.prototype;return t.destroy=function(){this.subtle=null,this.softwareDecrypter=null,this.key=null,this.fastAesKey=null,this.remainderData=null,this.currentIV=null,this.currentResult=null},t.isSync=function(){return this.useSoftware},t.flush=function(){var e=this.currentResult,t=this.remainderData;if(!e||t)return this.reset(),null;var i,n,r,o=new Uint8Array(e);return this.reset(),this.removePKCS7Padding?(n=(i=o).byteLength,(r=n&&new DataView(i.buffer).getUint8(n-1))?Se(i,0,n-r):i):o},t.reset=function(){this.currentResult=null,this.currentIV=null,this.remainderData=null,this.softwareDecrypter&&(this.softwareDecrypter=null)},t.decrypt=function(n,r,o){var a=this;return this.useSoftware?new Promise(function(e,t){a.softwareDecrypt(new Uint8Array(n),r,o);var i=a.flush();i?e(i.buffer):t(new Error("[softwareDecrypt] Failed to decrypt data"))}):this.webCryptoDecrypt(new Uint8Array(n),r,o)},t.softwareDecrypt=function(e,t,i){var n=this.currentIV,r=this.currentResult,o=this.remainderData;this.logOnce("JS AES decrypt"),o&&(e=A(o,e),this.remainderData=null);var a=this.getValidChunk(e);if(!a.length)return null;n&&(i=n);var s=this.softwareDecrypter;s||(s=this.softwareDecrypter=new bn),s.expandKey(t);var l=r;return this.currentResult=s.decrypt(a.buffer,0,i),this.currentIV=Se(a,-16).buffer,l||null},t.webCryptoDecrypt=function(t,i,n){var r=this;if(this.key!==i||!this.fastAesKey){if(!this.subtle)return Promise.resolve(this.onWebCryptoError(t,i,n));this.key=i,this.fastAesKey=new yn(this.subtle,i)}return this.fastAesKey.expandKey().then(function(e){return r.subtle?(r.logOnce("WebCrypto AES decrypt"),new mn(r.subtle,new Uint8Array(n)).decrypt(t.buffer,e)):Promise.reject(new Error("web crypto not initialized"))}).catch(function(e){return be.warn("[decrypter]: WebCrypto Error, disable WebCrypto API, "+e.name+": "+e.message),r.onWebCryptoError(t,i,n)})},t.onWebCryptoError=function(e,t,i){this.useSoftware=!0,this.logEnabled=!0,this.softwareDecrypt(e,t,i);var n=this.flush();if(n)return n.buffer;throw new Error("WebCrypto and softwareDecrypt: failed to decrypt data")},t.getValidChunk=function(e){var t=e,i=e.length-e.length%16;return i!==e.length&&(t=Se(e,0,i),this.remainderData=Se(e,i)),t},t.logOnce=function(e){this.logEnabled&&(be.log("[decrypter]: "+e),this.logEnabled=!1)},e}(),wn=function(e){for(var t="",i=e.length,n=0;n<i;n++)t+="["+e.start(n).toFixed(3)+"-"+e.end(n).toFixed(3)+"]";return t},s="STOPPED",b="IDLE",En="KEY_LOADING",xn="FRAG_LOADING",Tn="FRAG_LOADING_WAITING_RETRY",Sn="WAITING_TRACK",kn="PARSING",Rn="PARSED",Cn="ENDED",An="ERROR",On="WAITING_INIT_PTS",Ln="WAITING_LEVEL",Pn=function(a){function e(e,t,i,n,r){var o;return(o=a.call(this)||this).hls=void 0,o.fragPrevious=null,o.fragCurrent=null,o.fragmentTracker=void 0,o.transmuxer=null,o._state=s,o.playlistType=void 0,o.media=null,o.mediaBuffer=null,o.config=void 0,o.bitrateTest=!1,o.lastCurrentTime=0,o.nextLoadPosition=0,o.startPosition=0,o.startTimeOffset=null,o.loadedmetadata=!1,o.retryDate=0,o.levels=null,o.fragmentLoader=void 0,o.keyLoader=void 0,o.levelLastLoaded=null,o.startFragRequested=!1,o.decrypter=void 0,o.initPTS=[],o.onvseeking=null,o.onvended=null,o.logPrefix="",o.log=void 0,o.warn=void 0,o.playlistType=r,o.logPrefix=n,o.log=be.log.bind(be,n+":"),o.warn=be.warn.bind(be,n+":"),o.hls=e,o.fragmentLoader=new fn(e.config),o.keyLoader=i,o.fragmentTracker=t,o.config=e.config,o.decrypter=new _n(e.config),e.on(ve.MANIFEST_LOADED,o.onManifestLoaded,function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(o)),o}u(e,a);var t=e.prototype;return t.doTick=function(){this.onTickEnd()},t.onTickEnd=function(){},t.startLoad=function(e){},t.stopLoad=function(){this.fragmentLoader.abort(),this.keyLoader.abort(this.playlistType);var e=this.fragCurrent;null!=e&&e.loader&&(e.abortRequests(),this.fragmentTracker.removeFragment(e)),this.resetTransmuxer(),this.fragCurrent=null,this.fragPrevious=null,this.clearInterval(),this.clearNextTick(),this.state=s},t._streamEnded=function(e,t){if(t.live||e.nextStart||!e.end||!this.media)return!1;var i=t.partList;if(null!=i&&i.length){var n=i[i.length-1];return T.isBuffered(this.media,n.start+n.duration/2)}var r=t.fragments[t.fragments.length-1].type;return this.fragmentTracker.isEndListAppended(r)},t.getLevelDetails=function(){var e;if(this.levels&&null!==this.levelLastLoaded)return null==(e=this.levelLastLoaded)?void 0:e.details},t.onMediaAttached=function(e,t){var i=this.media=this.mediaBuffer=t.media;this.onvseeking=this.onMediaSeeking.bind(this),this.onvended=this.onMediaEnded.bind(this),i.addEventListener("seeking",this.onvseeking),i.addEventListener("ended",this.onvended);var n=this.config;this.levels&&n.autoStartLoad&&this.state===s&&this.startLoad(n.startPosition)},t.onMediaDetaching=function(){var e=this.media;null!=e&&e.ended&&(this.log("MSE detaching and video ended, reset startPosition"),this.startPosition=this.lastCurrentTime=0),e&&this.onvseeking&&this.onvended&&(e.removeEventListener("seeking",this.onvseeking),e.removeEventListener("ended",this.onvended),this.onvseeking=this.onvended=null),this.keyLoader&&this.keyLoader.detach(),this.media=this.mediaBuffer=null,this.loadedmetadata=!1,this.fragmentTracker.removeAllFragments(),this.stopLoad()},t.onMediaSeeking=function(){var e=this.config,t=this.fragCurrent,i=this.media,n=this.mediaBuffer,r=this.state,o=i?i.currentTime:0,a=T.bufferInfo(n||i,o,e.maxBufferHole);if(this.log("media seeking to "+(J(o)?o.toFixed(3):o)+", state: "+r),this.state===Cn)this.resetLoadingState();else if(t){var s=e.maxFragLookUpTolerance,l=t.start-s,u=t.start+t.duration+s;if(!a.len||u<a.start||l>a.end){var c=o>u;(o<l||c)&&(c&&t.loader&&(this.log("seeking outside of buffer while fragment load in progress, cancel fragment load"),t.abortRequests(),this.resetLoadingState()),this.fragPrevious=null)}}i&&(this.fragmentTracker.removeFragmentsInRange(o,1/0,this.playlistType,!0),this.lastCurrentTime=o),this.loadedmetadata||a.len||(this.nextLoadPosition=this.startPosition=o),this.tickImmediate()},t.onMediaEnded=function(){this.startPosition=this.lastCurrentTime=0},t.onManifestLoaded=function(e,t){this.startTimeOffset=t.startTimeOffset,this.initPTS=[]},t.onHandlerDestroying=function(){this.hls.off(ve.MANIFEST_LOADED,this.onManifestLoaded,this),this.stopLoad(),a.prototype.onHandlerDestroying.call(this),this.hls=null},t.onHandlerDestroyed=function(){this.state=s,this.fragmentLoader&&this.fragmentLoader.destroy(),this.keyLoader&&this.keyLoader.destroy(),this.decrypter&&this.decrypter.destroy(),this.hls=this.log=this.warn=this.decrypter=this.keyLoader=this.fragmentLoader=this.fragmentTracker=null,a.prototype.onHandlerDestroyed.call(this)},t.loadFragment=function(e,t,i){this._loadFragForPlayback(e,t,i)},t._loadFragForPlayback=function(i,e,t){var n=this;this._doFragLoad(i,e,t,function(e){if(n.fragContextChanged(i))return n.warn("Fragment "+i.sn+(e.part?" p: "+e.part.index:"")+" of level "+i.level+" was dropped during download."),void n.fragmentTracker.removeFragment(i);i.stats.chunkCount++,n._handleFragmentLoadProgress(e)}).then(function(e){if(e){var t=n.state;n.fragContextChanged(i)?(t===xn||!n.fragCurrent&&t===kn)&&(n.fragmentTracker.removeFragment(i),n.state=b):("payload"in e&&(n.log("Loaded fragment "+i.sn+" of level "+i.level),n.hls.trigger(ve.FRAG_LOADED,e)),n._handleFragmentLoadComplete(e))}}).catch(function(e){n.state!==s&&n.state!==An&&(n.warn("Frag error: "+((null==e?void 0:e.message)||e)),n.resetFragmentLoading(i))})},t.clearTrackerIfNeeded=function(e){var t,i=this.fragmentTracker;if(i.getState(e)===Qi){var n=e.type,r=this.getFwdBufferInfo(this.mediaBuffer,n),o=Math.max(e.duration,r?r.len:this.config.maxBufferLength),a=this.backtrackFragment;(1==(a?e.sn-a.sn:0)||this.reduceMaxBufferLength(o))&&i.removeFragment(e)}else 0===(null==(t=this.mediaBuffer)?void 0:t.buffered.length)?i.removeAllFragments():i.hasParts(e.type)&&(i.detectPartialFragments({"frag":e,"part":null,"stats":e.stats,"id":e.type}),i.getState(e)===Ji&&i.removeFragment(e))},t.checkLiveUpdate=function(e){if(e.updated&&!e.live){var t=e.fragments[e.fragments.length-1];this.fragmentTracker.detectPartialFragments({"frag":t,"part":null,"stats":t.stats,"id":t.type})}e.fragments[0]||(e.deltaUpdateFailed=!0)},t.flushMainBuffer=function(e,t,i){if(void 0===i&&(i=null),e-t){var n={"startOffset":e,"endOffset":t,"type":i};this.hls.trigger(ve.BUFFER_FLUSHING,n)}},t._loadInitSegment=function(o,e){var a=this;this._doFragLoad(o,e).then(function(e){if(!e||a.fragContextChanged(o)||!a.levels)throw new Error("init load aborted");return e}).then(function(i){var n=a.hls,e=i.payload,t=o.decryptdata;if(e&&e.byteLength>0&&null!=t&&t.key&&t.iv&&"AES-128"===t.method){var r=self.performance.now();return a.decrypter.decrypt(new Uint8Array(e),t.key.buffer,t.iv.buffer).catch(function(e){throw n.trigger(ve.ERROR,{"type":me.MEDIA_ERROR,"details":ye.FRAG_DECRYPT_ERROR,"fatal":!1,"error":e,"reason":e.message,"frag":o}),e}).then(function(e){var t=self.performance.now();return n.trigger(ve.FRAG_DECRYPTED,{"frag":o,"payload":e,"stats":{"tstart":r,"tdecrypt":t}}),i.payload=e,a.completeInitSegmentLoad(i)})}return a.completeInitSegmentLoad(i)}).catch(function(e){a.state!==s&&a.state!==An&&(a.warn(e),a.resetFragmentLoading(o))})},t.completeInitSegmentLoad=function(e){if(!this.levels)throw new Error("init load aborted, missing levels");var t=e.frag.stats;this.state=b,e.frag.data=new Uint8Array(e.payload),t.parsing.start=t.buffering.start=self.performance.now(),t.parsing.end=t.buffering.end=self.performance.now(),this.tick()},t.fragContextChanged=function(e){var t=this.fragCurrent;return!e||!t||e.sn!==t.sn||e.level!==t.level},t.fragBufferedComplete=function(e,t){var i,n,r,o,a=this.mediaBuffer?this.mediaBuffer:this.media;if(this.log("Buffered "+e.type+" sn: "+e.sn+(t?" part: "+t.index:"")+" of "+(this.playlistType===x?"level":"track")+" "+e.level+" (frag:["+(null!=(i=e.startPTS)?i:NaN).toFixed(3)+"-"+(null!=(n=e.endPTS)?n:NaN).toFixed(3)+"] > buffer:"+(a?wn(T.getBuffered(a)):"(detached)")+")"),"initSegment"!==e.sn){var s;if(e.type!==Ut){var l=e.elementaryStreams;if(!Object.keys(l).some(function(e){return!!l[e]}))return void(this.state=b)}var u=null==(s=this.levels)?void 0:s[e.level];null!=u&&u.fragmentError&&(this.log("Resetting level fragment error count of "+u.fragmentError+" on frag buffered"),u.fragmentError=0)}this.state=b,a&&(!this.loadedmetadata&&e.type==x&&a.buffered.length&&(null==(r=this.fragCurrent)?void 0:r.sn)===(null==(o=this.fragPrevious)?void 0:o.sn)&&(this.loadedmetadata=!0,this.seekToStartPos()),this.tick())},t.seekToStartPos=function(){},t._handleFragmentLoadComplete=function(e){var t=this.transmuxer;if(t){var i=e.frag,n=e.part,r=e.partsLoaded,o=!r||0===r.length||r.some(function(e){return!e}),a=new an(i.level,i.sn,i.stats.chunkCount+1,0,n?n.index:-1,!o);t.flush(a)}},t._handleFragmentLoadProgress=function(e){},t._doFragLoad=function(t,i,e,n){var r,o=this;void 0===e&&(e=null);var a=null==i?void 0:i.details;if(!this.levels||!a)throw new Error("frag load aborted, missing level"+(a?"":" detail")+"s");var s=null;if(!t.encrypted||null!=(r=t.decryptdata)&&r.key?!t.encrypted&&a.encryptedFragments.length&&this.keyLoader.loadClear(t,a.encryptedFragments):(this.log("Loading key for "+t.sn+" of ["+a.startSN+"-"+a.endSN+"], "+("[stream-controller]"===this.logPrefix?"level":"track")+" "+t.level),this.state=En,this.fragCurrent=t,s=this.keyLoader.load(t).then(function(e){if(!o.fragContextChanged(e.frag))return o.hls.trigger(ve.KEY_LOADED,e),o.state===En&&(o.state=b),e}),this.hls.trigger(ve.KEY_LOADING,{"frag":t}),null===this.fragCurrent&&(s=Promise.reject(new Error("frag load aborted, context changed in KEY_LOADING")))),e=Math.max(t.start,e||0),this.config.lowLatencyMode&&"initSegment"!==t.sn){var l=a.partList;if(l&&n){e>t.end&&a.fragmentHint&&(t=a.fragmentHint);var u=this.getNextPart(l,t,e);if(u>-1){var c,d=l[u];return this.log("Loading part sn: "+t.sn+" p: "+d.index+" cc: "+t.cc+" of playlist ["+a.startSN+"-"+a.endSN+"] parts [0-"+u+"-"+(l.length-1)+"] "+("[stream-controller]"===this.logPrefix?"level":"track")+": "+t.level+", target: "+parseFloat(e.toFixed(3))),this.nextLoadPosition=d.start+d.duration,this.state=xn,c=s?s.then(function(e){return!e||o.fragContextChanged(e.frag)?null:o.doFragPartsLoad(t,d,i,n)}).catch(function(e){return o.handleFragLoadError(e)}):this.doFragPartsLoad(t,d,i,n).catch(function(e){return o.handleFragLoadError(e)}),this.hls.trigger(ve.FRAG_LOADING,{"frag":t,"part":d,"targetBufferTime":e}),null===this.fragCurrent?Promise.reject(new Error("frag load aborted, context changed in FRAG_LOADING parts")):c}if(!t.url||this.loadedEndOfParts(l,e))return Promise.resolve(null)}}this.log("Loading fragment "+t.sn+" cc: "+t.cc+" "+(a?"of ["+a.startSN+"-"+a.endSN+"] ":"")+("[stream-controller]"===this.logPrefix?"level":"track")+": "+t.level+", target: "+parseFloat(e.toFixed(3))),J(t.sn)&&!this.bitrateTest&&(this.nextLoadPosition=t.start+t.duration),this.state=xn;var h,f=this.config.progressive;return h=f&&s?s.then(function(e){return!e||o.fragContextChanged(null==e?void 0:e.frag)?null:o.fragmentLoader.load(t,n)}).catch(function(e){return o.handleFragLoadError(e)}):Promise.all([this.fragmentLoader.load(t,f?n:void 0),s]).then(function(e){var t=e[0];return!f&&t&&n&&n(t),t}).catch(function(e){return o.handleFragLoadError(e)}),this.hls.trigger(ve.FRAG_LOADING,{"frag":t,"targetBufferTime":e}),null===this.fragCurrent?Promise.reject(new Error("frag load aborted, context changed in FRAG_LOADING")):h},t.doFragPartsLoad=function(l,i,u,c){var d=this;return new Promise(function(o,e){var t,a=[],s=null==(t=u.details)?void 0:t.partList;!function n(r){d.fragmentLoader.loadPart(l,r,c).then(function(e){a[r.index]=e;var t=e.part;d.hls.trigger(ve.FRAG_LOADED,e);var i=yi(u,l.sn,r.index+1)||bi(s,l.sn,r.index+1);if(!i)return o({"frag":l,"part":t,"partsLoaded":a});n(i)}).catch(e)}(i)})},t.handleFragLoadError=function(e){if("data"in e){var t=e.data;e.data&&t.details===ye.INTERNAL_ABORTED?this.handleFragLoadAborted(t.frag,t.part):this.hls.trigger(ve.ERROR,t)}else this.hls.trigger(ve.ERROR,{"type":me.OTHER_ERROR,"details":ye.INTERNAL_EXCEPTION,"err":e,"error":e,"fatal":!0});return null},t._handleTransmuxerFlush=function(e){var t=this.getCurrentContext(e);if(t&&this.state===kn){var i=t.frag,n=t.part,r=t.level,o=self.performance.now();i.stats.parsing.end=o,n&&(n.stats.parsing.end=o),this.updateLevelTiming(i,n,r,e.partial)}else this.fragCurrent||this.state===s||this.state===An||(this.state=b)},t.getCurrentContext=function(e){var t=this.levels,i=this.fragCurrent,n=e.level,r=e.sn,o=e.part;if(null==t||!t[n])return this.warn("Levels object was unset while buffering fragment "+r+" of level "+n+". The current chunk will not be buffered."),null;var a=t[n],s=o>-1?yi(a,r,o):null,l=s?s.fragment:function(e,t,i){if(null==e||!e.details)return null;var n=e.details,r=n.fragments[t-n.startSN];return r||((r=n.fragmentHint)&&r.sn===t?r:t<n.startSN&&i&&i.sn===t?i:null)}(a,r,i);return l?(i&&i!==l&&(l.stats=i.stats),{"frag":l,"part":s,"level":a}):null},t.bufferFragmentData=function(e,t,i,n,r){var o;if(e&&this.state===kn){var a=e.data1,s=e.data2,l=a;if(a&&s&&(l=A(a,s)),null!=(o=l)&&o.length){var u={"type":e.type,"frag":t,"part":i,"chunkMeta":n,"parent":t.type,"data":l};if(this.hls.trigger(ve.BUFFER_APPENDING,u),e.dropped&&e.independent&&!i){if(r)return;this.flushBufferGap(t)}}}},t.flushBufferGap=function(e){var t=this.media;if(t)if(T.isBuffered(t,t.currentTime)){var i=t.currentTime,n=T.bufferInfo(t,i,0),r=e.duration,o=Math.min(2*this.config.maxFragLookUpTolerance,.25*r),a=Math.max(Math.min(e.start-o,n.end-o),i+o);e.start-a>o&&this.flushMainBuffer(a,e.start)}else this.flushMainBuffer(0,e.start)},t.getFwdBufferInfo=function(e,t){var i=this.getLoadPosition();return J(i)?this.getFwdBufferInfoAtPos(e,i,t):null},t.getFwdBufferInfoAtPos=function(e,t,i){var n=this.config.maxBufferHole,r=T.bufferInfo(e,t,n);if(0===r.len&&void 0!==r.nextStart){var o=this.fragmentTracker.getBufferedFrag(t,i);if(o&&r.nextStart<o.end)return T.bufferInfo(e,t,Math.max(r.nextStart,n))}return r},t.getMaxBufferLength=function(e){var t,i=this.config;return t=e?Math.max(8*i.maxBufferSize/e,i.maxBufferLength):i.maxBufferLength,Math.min(t,i.maxMaxBufferLength)},t.reduceMaxBufferLength=function(e){var t=this.config,i=e||t.maxBufferLength,n=t.maxMaxBufferLength/2;return n>=i&&(t.maxMaxBufferLength=n,this.warn("Reduce max buffer length to "+n+"s"),!0)},t.getAppendedFrag=function(e,t){var i=this.fragmentTracker.getAppendedFrag(e,x);return i&&"fragment"in i?i.fragment:i},t.getNextFragment=function(e,t){var i=t.fragments,n=i.length;if(!n)return null;var r,o=this.config,a=i[0].start;if(t.live){var s=o.initialLiveManifestSize;if(n<s)return this.warn("Not enough fragments to start playback (have: "+n+", need: "+s+")"),null;(!t.PTSKnown&&!this.startFragRequested&&-1===this.startPosition||e<a)&&(r=this.getInitialLiveFragment(t,i),this.startPosition=this.nextLoadPosition=r?this.hls.liveSyncPosition||r.start:e)}else e<=a&&(r=i[0]);if(!r){var l=o.lowLatencyMode?t.partEnd:t.fragmentEnd;r=this.getFragmentAtPosition(e,l,t)}return this.mapToInitFragWhenRequired(r)},t.isLoopLoading=function(e,t){var i=this.fragmentTracker.getState(e);return(i===en||i===Ji&&!!e.gap)&&this.nextLoadPosition>t},t.getNextFragmentLoopLoading=function(e,t,i,n,r){var o=e.gap,a=this.getNextFragment(this.nextLoadPosition,t);if(null===a)return a;if(e=a,o&&e&&!e.gap&&i.nextStart){var s=this.getFwdBufferInfoAtPos(this.mediaBuffer?this.mediaBuffer:this.media,i.nextStart,n);if(null!==s&&i.len+s.len>=r)return this.log('buffer full after gaps in "'+n+'" playlist starting at sn: '+e.sn),null}return e},t.mapToInitFragWhenRequired=function(e){return null==e||!e.initSegment||null!=e&&e.initSegment.data||this.bitrateTest?e:e.initSegment},t.getNextPart=function(e,t,i){for(var n=-1,r=!1,o=!0,a=0,s=e.length;a<s;a++){var l=e[a];if(o=o&&!l.independent,n>-1&&i<l.start)break;var u=l.loaded;u?n=-1:(r||l.independent||o)&&l.fragment===t&&(n=a),r=u}return n},t.loadedEndOfParts=function(e,t){var i=e[e.length-1];return i&&t>i.start&&i.loaded},t.getInitialLiveFragment=function(e,t){var i=this.fragPrevious,n=null;if(i){if(e.hasProgramDateTime&&(this.log("Live playlist, switching playlist, load frag with same PDT: "+i.programDateTime),n=function(e,t,i){if(null===t||!Array.isArray(e)||!e.length||!J(t))return null;if(t<(e[0].programDateTime||0))return null;if(t>=(e[e.length-1].endProgramDateTime||0))return null;i=i||0;for(var n=0;n<e.length;++n){var r=e[n];if(Ai(t,i,r))return r}return null}(t,i.endProgramDateTime,this.config.maxFragLookUpTolerance)),!n){var r=i.sn+1;if(r>=e.startSN&&r<=e.endSN){var o=t[r-e.startSN];i.cc===o.cc&&(n=o,this.log("Live playlist, switching playlist, load frag with next SN: "+n.sn))}n||(n=function(e,t){return ki(e,function(e){return e.cc<t?1:e.cc>t?-1:0})}(t,i.cc),n&&this.log("Live playlist, switching playlist, load frag with same CC: "+n.sn))}}else{var a=this.hls.liveSyncPosition;null!==a&&(n=this.getFragmentAtPosition(a,this.bitrateTest?e.fragmentEnd:e.edge,e))}return n},t.getFragmentAtPosition=function(e,t,i){var n,r=this.config,o=this.fragPrevious,a=i.fragments,s=i.endSN,l=i.fragmentHint,u=r.maxFragLookUpTolerance,c=i.partList,d=!!(r.lowLatencyMode&&null!=c&&c.length&&l);if(d&&l&&!this.bitrateTest&&(a=a.concat(l),s=l.sn),n=e<t?Ri(o,a,e,e>t-u?0:u):a[a.length-1]){var h=n.sn-i.startSN,f=this.fragmentTracker.getState(n);if((f===en||f===Ji&&n.gap)&&(o=n),o&&n.sn===o.sn&&(!d||c[0].fragment.sn>n.sn)&&o&&n.level===o.level){var p=a[h+1];n=n.sn<s&&this.fragmentTracker.getState(p)!==en?p:null}}return n},t.synchronizeToLiveEdge=function(e){var t=this.config,i=this.media;if(i){var n=this.hls.liveSyncPosition,r=i.currentTime,o=e.fragments[0].start,a=e.edge,s=r>=o-t.maxFragLookUpTolerance&&r<=a;if(null!==n&&i.duration>n&&(r<n||!s)){var l=void 0!==t.liveMaxLatencyDuration?t.liveMaxLatencyDuration:t.liveMaxLatencyDurationCount*e.targetduration;(!s&&i.readyState<4||r<a-l)&&(this.loadedmetadata||(this.nextLoadPosition=n),i.readyState&&(this.warn("Playback: "+r.toFixed(3)+" is located too far from the end of live sliding playlist: "+a+", reset currentTime to : "+n.toFixed(3)),i.currentTime=n))}}},t.alignPlaylists=function(e,t,i){var n=e.fragments.length;if(!n)return this.warn("No fragments in live playlist"),0;var r=e.fragments[0].start,o=!t,a=e.alignedSliding&&J(r);if(o||!a&&!r){var s=this.fragPrevious;cn(s,i,e);var l=e.fragments[0].start;return this.log("Live playlist sliding: "+l.toFixed(2)+" start-sn: "+(t?t.startSN:"na")+"->"+e.startSN+" prev-sn: "+(s?s.sn:"na")+" fragments: "+n),l}return r},t.waitForCdnTuneIn=function(e){return e.live&&e.canBlockReload&&e.partTarget&&e.tuneInGoal>Math.max(e.partHoldBack,3*e.partTarget)},t.setStartPosition=function(e,t){var i=this.startPosition;if(i<t&&(i=-1),-1===i||-1===this.lastCurrentTime){var n=null!==this.startTimeOffset,r=n?this.startTimeOffset:e.startTimeOffset;null!==r&&J(r)?(i=t+r,r<0&&(i+=e.totalduration),i=Math.min(Math.max(t,i),t+e.totalduration),this.log("Start time offset "+r+" found in "+(n?"multivariant":"media")+" playlist, adjust startPosition to "+i),this.startPosition=i):e.live?i=this.hls.liveSyncPosition||t:this.startPosition=i=0,this.lastCurrentTime=i}this.nextLoadPosition=i},t.getLoadPosition=function(){var e=this.media,t=0;return this.loadedmetadata&&e?t=e.currentTime:this.nextLoadPosition&&(t=this.nextLoadPosition),t},t.handleFragLoadAborted=function(e,t){this.transmuxer&&"initSegment"!==e.sn&&e.stats.aborted&&(this.warn("Fragment "+e.sn+(t?" part "+t.index:"")+" of level "+e.level+" was aborted"),this.resetFragmentLoading(e))},t.resetFragmentLoading=function(e){this.fragCurrent&&(this.fragContextChanged(e)||this.state===Tn)||(this.state=b)},t.onFragmentOrKeyLoadError=function(e,t){if(t.chunkMeta&&!t.frag){var i=this.getCurrentContext(t.chunkMeta);i&&(t.frag=i.frag)}var n=t.frag;if(n&&n.type===e&&this.levels)if(this.fragContextChanged(n)){var r;this.warn("Frag load error must match current frag to retry "+n.url+" > "+(null==(r=this.fragCurrent)?void 0:r.url))}else{var o=t.details===ye.FRAG_GAP;o&&this.fragmentTracker.fragBuffered(n,!0);var a=t.errorAction,s=a||{},l=s.action,u=s.retryCount,c=void 0===u?0:u,d=s.retryConfig;if(a&&l===Ii&&d){this.resetStartWhenNotLoaded(this.levelLastLoaded);var h=xi(d,c);this.warn("Fragment "+n.sn+" of "+e+" "+n.level+" errored with "+t.details+", retrying loading "+(c+1)+"/"+d.maxNumRetry+" in "+h+"ms"),a.resolved=!0,this.retryDate=self.performance.now()+h,this.state=Tn}else if(d&&a){if(this.resetFragmentErrors(e),!(c<d.maxNumRetry))return void be.warn(t.details+" reached or exceeded max retry ("+c+")");o||l===Pi||(a.resolved=!0)}else(null==a?void 0:a.action)===Li?this.state=Ln:this.state=An;this.tickImmediate()}},t.reduceLengthAndFlushBuffer=function(e){if(this.state===kn||this.state===Rn){var t=e.parent,i=this.getFwdBufferInfo(this.mediaBuffer,t),n=i&&i.len>.5;n&&this.reduceMaxBufferLength(i.len);var r=!n;return r&&this.warn("Buffer full error while media.currentTime is not buffered, flush "+t+" buffer"),e.frag&&(this.fragmentTracker.removeFragment(e.frag),this.nextLoadPosition=e.frag.start),this.resetLoadingState(),r}return!1},t.resetFragmentErrors=function(e){e===I&&(this.fragCurrent=null),this.loadedmetadata||(this.startFragRequested=!1),this.state!==s&&(this.state=b)},t.afterBufferFlushed=function(e,t,i){if(e){var n=T.getBuffered(e);this.fragmentTracker.detectEvictedFragments(t,n,i),this.state===Cn&&this.resetLoadingState()}},t.resetLoadingState=function(){this.log("Reset loading state"),this.fragCurrent=null,this.fragPrevious=null,this.state=b},t.resetStartWhenNotLoaded=function(e){if(!this.loadedmetadata){this.startFragRequested=!1;var t=e?e.details:null;null!=t&&t.live?(this.startPosition=-1,this.setStartPosition(t,0),this.resetLoadingState()):this.nextLoadPosition=this.startPosition}},t.resetWhenMissingContext=function(e){this.warn("The loading context changed while buffering fragment "+e.sn+" of level "+e.level+". This chunk will not be buffered."),this.removeUnbufferedFrags(),this.resetStartWhenNotLoaded(this.levelLastLoaded),this.resetLoadingState()},t.removeUnbufferedFrags=function(e){void 0===e&&(e=0),this.fragmentTracker.removeFragmentsInRange(e,1/0,this.playlistType,!1,!0)},t.updateLevelTiming=function(o,e,a,s){var t,l=this,u=a.details;if(u){if(!Object.keys(o.elementaryStreams).reduce(function(e,t){var i=o.elementaryStreams[t];if(i){var n=i.endPTS-i.startPTS;if(n<=0)return l.warn("Could not parse fragment "+o.sn+" "+t+" duration reliably ("+n+")"),e||!1;var r=s?0:pi(u,o,i.startPTS,i.endPTS,i.startDTS,i.endDTS);return l.hls.trigger(ve.LEVEL_PTS_UPDATED,{"details":u,"level":a,"drift":r,"type":t,"frag":o,"start":i.startPTS,"end":i.endPTS}),!0}return e},!1)&&null===(null==(t=this.transmuxer)?void 0:t.error)){var i=new Error("Found no media in fragment "+o.sn+" of level "+o.level+" resetting transmuxer to fallback to playlist timing");if(0===a.fragmentError&&(a.fragmentError++,o.gap=!0,this.fragmentTracker.removeFragment(o),this.fragmentTracker.fragBuffered(o,!0)),this.warn(i.message),this.hls.trigger(ve.ERROR,{"type":me.MEDIA_ERROR,"details":ye.FRAG_PARSING_ERROR,"fatal":!1,"error":i,"frag":o,"reason":"Found no media in msn "+o.sn+' of level "'+a.url+'"'}),!this.hls)return;this.resetTransmuxer()}this.state=Rn,this.hls.trigger(ve.FRAG_PARSED,{"frag":o,"part":e})}else this.warn("level.details undefined")},t.resetTransmuxer=function(){this.transmuxer&&(this.transmuxer.destroy(),this.transmuxer=null)},t.recoverWorkerError=function(e){"demuxerWorker"===e.event&&(this.fragmentTracker.removeAllFragments(),this.resetTransmuxer(),this.resetStartWhenNotLoaded(this.levelLastLoaded),this.resetLoadingState())},l(e,[{"key":"state","get":function(){return this._state},"set":function(e){var t=this._state;t!==e&&(this._state=e,this.log(t+"->"+e))}}]),e}(Xi),In=function(){function e(){this.chunks=[],this.dataLength=0}var t=e.prototype;return t.push=function(e){this.chunks.push(e),this.dataLength+=e.length},t.flush=function(){var e,t=this.chunks,i=this.dataLength;return t.length?(e=1===t.length?t[0]:function(e,t){for(var i=new Uint8Array(t),n=0,r=0;r<e.length;r++){var o=e[r];i.set(o,n),n+=o.length}return i}(t,i),this.reset(),e):new Uint8Array(0)},t.reset=function(){this.chunks.length=0,this.dataLength=0},e}();function v(e,t){return void 0===e&&(e=""),void 0===t&&(t=9e4),{"type":e,"id":-1,"pid":-1,"inputTimeScale":t,"sequenceNumber":-1,"samples":[],"dropped":0}}var Dn=function(){function e(){this._audioTrack=void 0,this._id3Track=void 0,this.frameIndex=0,this.cachedData=null,this.basePTS=null,this.initPTS=null,this.lastPTS=null}var t=e.prototype;return t.resetInitSegment=function(e,t,i,n){this._id3Track={"type":"id3","id":3,"pid":-1,"inputTimeScale":9e4,"sequenceNumber":0,"samples":[],"dropped":0}},t.resetTimeStamp=function(e){this.initPTS=e,this.resetContiguity()},t.resetContiguity=function(){this.basePTS=null,this.lastPTS=null,this.frameIndex=0},t.canParse=function(e,t){return!1},t.appendFrame=function(e,t,i){},t.demux=function(e,t){this.cachedData&&(e=A(this.cachedData,e),this.cachedData=null);var i,n=Ae(e,0),r=n?n.length:0,o=this._audioTrack,a=this._id3Track,s=n?Pe(n):void 0,l=e.length;for((null===this.basePTS||0===this.frameIndex&&J(s))&&(this.basePTS=Mn(s,t,this.initPTS),this.lastPTS=this.basePTS),null===this.lastPTS&&(this.lastPTS=this.basePTS),n&&n.length>0&&a.samples.push({"pts":this.lastPTS,"dts":this.lastPTS,"data":n,"type":Zt,"duration":Number.POSITIVE_INFINITY});r<l;){if(this.canParse(e,r)){var u=this.appendFrame(o,e,r);u?(this.frameIndex++,this.lastPTS=u.sample.pts,i=r+=u.length):r=l}else Le(e,r)?(n=Ae(e,r),a.samples.push({"pts":this.lastPTS,"dts":this.lastPTS,"data":n,"type":Zt,"duration":Number.POSITIVE_INFINITY}),i=r+=n.length):r++;if(r===l&&i!==l){var c=Se(e,i);this.cachedData?this.cachedData=A(this.cachedData,c):this.cachedData=c}}return{"audioTrack":o,"videoTrack":v(),"id3Track":a,"textTrack":v()}},t.demuxSampleAes=function(e,t,i){return Promise.reject(new Error("["+this+"] This demuxer does not support Sample-AES decryption"))},t.flush=function(e){var t=this.cachedData;return t&&(this.cachedData=null,this.demux(t,0)),{"audioTrack":this._audioTrack,"videoTrack":v(),"id3Track":this._id3Track,"textTrack":v()}},t.destroy=function(){},e}(),Mn=function(e,t,i){return J(e)?90*e:9e4*t+(i?9e4*i.baseTime/i.timescale:0)};function Bn(e,t){return 255===e[t]&&240==(246&e[t+1])}function Fn(e,t){return 1&e[t+1]?7:9}function Nn(e,t){return(3&e[t+3])<<11|e[t+4]<<3|(224&e[t+5])>>>5}function jn(e,t){return t+1<e.length&&Bn(e,t)}function Un(e,t){if(jn(e,t)){var i=Fn(e,t);if(t+i>=e.length)return!1;var n=Nn(e,t);if(n<=i)return!1;var r=t+n;return r===e.length||jn(e,r)}return!1}function $n(e,t,i,n,r){if(!e.samplerate){var o=function(e,t,i,n){var r,o,a,s,l=navigator.userAgent.toLowerCase(),u=n,c=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];r=1+((192&t[i+2])>>>6);var d=(60&t[i+2])>>>2;if(!(d>c.length-1))return a=(1&t[i+2])<<2,a|=(192&t[i+3])>>>6,be.log("manifest codec:"+n+", ADTS type:"+r+", samplingIndex:"+d),/firefox/i.test(l)?d>=6?(r=5,s=new Array(4),o=d-3):(r=2,s=new Array(2),o=d):-1!==l.indexOf("android")?(r=2,s=new Array(2),o=d):(r=5,s=new Array(4),n&&(-1!==n.indexOf("mp4a.40.29")||-1!==n.indexOf("mp4a.40.5"))||!n&&d>=6?o=d-3:((n&&-1!==n.indexOf("mp4a.40.2")&&(d>=6&&1===a||/vivaldi/i.test(l))||!n&&1===a)&&(r=2,s=new Array(2)),o=d)),s[0]=r<<3,s[0]|=(14&d)>>1,s[1]|=(1&d)<<7,s[1]|=a<<3,5===r&&(s[1]|=(14&o)>>1,s[2]=(1&o)<<7,s[2]|=8,s[3]=0),{"config":s,"samplerate":c[d],"channelCount":a,"codec":"mp4a.40."+r,"manifestCodec":u};var h=new Error("invalid ADTS sampling index:"+d);e.emit(ve.ERROR,ve.ERROR,{"type":me.MEDIA_ERROR,"details":ye.FRAG_PARSING_ERROR,"fatal":!0,"error":h,"reason":h.message})}(t,i,n,r);if(!o)return;e.config=o.config,e.samplerate=o.samplerate,e.channelCount=o.channelCount,e.codec=o.codec,e.manifestCodec=o.manifestCodec,be.log("parsed codec:"+e.codec+", rate:"+o.samplerate+", channels:"+o.channelCount)}}function Hn(e){return 9216e4/e}function zn(e,t,i,n,r){var o,a=n+r*Hn(e.samplerate),s=function(e,t){var i=Fn(e,t);if(t+i<=e.length){var n=Nn(e,t)-i;if(n>0)return{"headerLength":i,"frameLength":n}}}(t,i);if(s){var l=s.frameLength,u=s.headerLength,c=u+l,d=Math.max(0,i+c-t.length);d?(o=new Uint8Array(c-u)).set(t.subarray(i+u,t.length),0):o=t.subarray(i+u,i+c);var h={"unit":o,"pts":a};return d||e.samples.push(h),{"sample":h,"length":c,"missing":d}}var f=t.length-i;return(o=new Uint8Array(f)).set(t.subarray(i,t.length),0),{"sample":{"unit":o,"pts":a},"length":f,"missing":-1}}var Wn=null,Gn=[32,64,96,128,160,192,224,256,288,320,352,384,416,448,32,48,56,64,80,96,112,128,160,192,224,256,320,384,32,40,48,56,64,80,96,112,128,160,192,224,256,320,32,48,56,64,80,96,112,128,144,160,176,192,224,256,8,16,24,32,40,48,56,64,80,96,112,128,144,160],Vn=[44100,48e3,32e3,22050,24e3,16e3,11025,12e3,8e3],qn=[[0,72,144,12],[0,0,0,0],[0,72,144,12],[0,144,144,12]],Kn=[0,1,1,4];function Zn(e,t,i,n,r){if(!(i+24>t.length)){var o=Xn(t,i);if(o&&i+o.frameLength<=t.length){var a=n+r*(9e4*o.samplesPerFrame/o.sampleRate),s={"unit":t.subarray(i,i+o.frameLength),"pts":a,"dts":a};return e.config=[],e.channelCount=o.channelCount,e.samplerate=o.sampleRate,e.samples.push(s),{"sample":s,"length":o.frameLength,"missing":0}}}}function Xn(e,t){var i=e[t+1]>>3&3,n=e[t+1]>>1&3,r=e[t+2]>>4&15,o=e[t+2]>>2&3;if(1!==i&&0!==r&&15!==r&&3!==o){var a=e[t+2]>>1&1,s=e[t+3]>>6,l=1e3*Gn[14*(3===i?3-n:3===n?3:4)+r-1],u=Vn[3*(3===i?0:2===i?1:2)+o],c=3===s?1:2,d=qn[i][n],h=Kn[n],f=8*d*h,p=Math.floor(d*l/u+a)*h;if(null===Wn){var g=(navigator.userAgent||"").match(/Chrome\/(\d+)/i);Wn=g?parseInt(g[1]):0}return!!Wn&&Wn<=87&&2===n&&l>=224e3&&0===s&&(e[t+3]=128|e[t+3]),{"sampleRate":u,"channelCount":c,"frameLength":p,"samplesPerFrame":f}}}function Yn(e,t){return 255===e[t]&&224==(224&e[t+1])&&0!=(6&e[t+1])}function Qn(e,t){return t+1<e.length&&Yn(e,t)}function Jn(e,t){if(t+1<e.length&&Yn(e,t)){var i=Xn(e,t),n=4;null!=i&&i.frameLength&&(n=i.frameLength);var r=t+n;return r===e.length||Qn(e,r)}return!1}var er=function(r){function e(e,t){var i;return(i=r.call(this)||this).observer=void 0,i.config=void 0,i.observer=e,i.config=t,i}u(e,r);var t=e.prototype;return t.resetInitSegment=function(e,t,i,n){r.prototype.resetInitSegment.call(this,e,t,i,n),this._audioTrack={"container":"audio/adts","type":"audio","id":2,"pid":-1,"sequenceNumber":0,"segmentCodec":"aac","samples":[],"manifestCodec":t,"duration":n,"inputTimeScale":9e4,"dropped":0}},e.probe=function(e){if(!e)return!1;var t=Ae(e,0),i=(null==t?void 0:t.length)||0;if(Jn(e,i))return!1;for(var n=e.length;i<n;i++)if(Un(e,i))return be.log("ADTS sync word found !"),!0;return!1},t.canParse=function(e,t){return function(e,t){return function(e,t){return t+5<e.length}(e,t)&&Bn(e,t)&&Nn(e,t)<=e.length-t}(e,t)},t.appendFrame=function(e,t,i){$n(e,this.observer,t,i,e.manifestCodec);var n=zn(e,t,i,this.basePTS,this.frameIndex);if(n&&0===n.missing)return n},e}(Dn),tr=/\/emsg[-/]ID3/i,ir=function(){function e(e,t){this.remainderData=null,this.timeOffset=0,this.config=void 0,this.videoTrack=void 0,this.audioTrack=void 0,this.id3Track=void 0,this.txtTrack=void 0,this.config=t}var t=e.prototype;return t.resetTimeStamp=function(){},t.resetInitSegment=function(e,t,i,n){var r=this.videoTrack=v("video",1),o=this.audioTrack=v("audio",1),a=this.txtTrack=v("text",1);if(this.id3Track=v("id3",1),this.timeOffset=0,null!=e&&e.byteLength){var s=Xe(e);if(s.video){var l=s.video,u=l.id,c=l.timescale,d=l.codec;r.id=u,r.timescale=a.timescale=c,r.codec=d}if(s.audio){var h=s.audio,f=h.id,p=h.timescale,g=h.codec;o.id=f,o.timescale=p,o.codec=g}a.id=We.text,r.sampleDuration=0,r.duration=o.duration=n}},t.resetContiguity=function(){this.remainderData=null},e.probe=function(e){return function(e){for(var t=e.byteLength,i=0;i<t;){var n=G(e,i);if(n>8&&109===e[i+4]&&111===e[i+5]&&111===e[i+6]&&102===e[i+7])return!0;i=n>1?i+n:t}return!1}(e)},t.demux=function(e,t){this.timeOffset=t;var i=e,n=this.videoTrack,r=this.txtTrack;if(this.config.progressive){this.remainderData&&(i=A(this.remainderData,e));var o=function(e){var t={"valid":null,"remainder":null},i=V(e,["moof"]);if(i.length<2)return t.remainder=e,t;var n=i[i.length-1];return t.valid=Se(e,0,n.byteOffset-8),t.remainder=Se(e,n.byteOffset-8),t}(i);this.remainderData=o.remainder,n.samples=o.valid||new Uint8Array}else n.samples=i;var a=this.extractID3Track(n,t);return r.samples=it(t,n),{"videoTrack":n,"audioTrack":this.audioTrack,"id3Track":a,"textTrack":this.txtTrack}},t.flush=function(){var e=this.timeOffset,t=this.videoTrack,i=this.txtTrack;t.samples=this.remainderData||new Uint8Array,this.remainderData=null;var n=this.extractID3Track(t,this.timeOffset);return i.samples=it(e,t),{"videoTrack":t,"audioTrack":v(),"id3Track":n,"textTrack":v()}},t.extractID3Track=function(e,o){var a=this.id3Track;if(e.samples.length){var t=V(e.samples,["emsg"]);t&&t.forEach(function(e){var t=function(e){var t=e[0],i="",n="",r=0,o=0,a=0,s=0,l=0,u=0;if(0===t){for(;"\0"!==W(e.subarray(u,u+1));)i+=W(e.subarray(u,u+1)),u+=1;for(i+=W(e.subarray(u,u+1)),u+=1;"\0"!==W(e.subarray(u,u+1));)n+=W(e.subarray(u,u+1)),u+=1;n+=W(e.subarray(u,u+1)),u+=1,r=G(e,12),o=G(e,16),s=G(e,20),l=G(e,24),u=28}else if(1===t){r=G(e,u+=4);var c=G(e,u+=4),d=G(e,u+=4);for(u+=4,a=Math.pow(2,32)*c+d,P(a)||(a=Number.MAX_SAFE_INTEGER,be.warn("Presentation time exceeds safe integer limit and wrapped to max safe integer in parsing emsg box")),s=G(e,u),l=G(e,u+=4),u+=4;"\0"!==W(e.subarray(u,u+1));)i+=W(e.subarray(u,u+1)),u+=1;for(i+=W(e.subarray(u,u+1)),u+=1;"\0"!==W(e.subarray(u,u+1));)n+=W(e.subarray(u,u+1)),u+=1;n+=W(e.subarray(u,u+1)),u+=1}return{"schemeIdUri":i,"value":n,"timeScale":r,"presentationTime":a,"presentationTimeDelta":o,"eventDuration":s,"id":l,"payload":e.subarray(u,e.byteLength)}}(e);if(tr.test(t.schemeIdUri)){var i=J(t.presentationTime)?t.presentationTime/t.timeScale:o+t.presentationTimeDelta/t.timeScale,n=4294967295===t.eventDuration?Number.POSITIVE_INFINITY:t.eventDuration/t.timeScale;n<=.001&&(n=Number.POSITIVE_INFINITY);var r=t.payload;a.samples.push({"data":r,"len":r.byteLength,"dts":i,"pts":i,"type":Yt,"duration":n})}})}return a},t.demuxSampleAes=function(e,t,i){return Promise.reject(new Error("The MP4 demuxer does not support SAMPLE-AES decryption"))},t.destroy=function(){},e}(),nr=function(e,t){var i=0,n=5;t+=n;for(var r=new Uint32Array(1),o=new Uint32Array(1),a=new Uint8Array(1);n>0;){a[0]=e[t];var s=Math.min(n,8),l=8-s;o[0]=4278190080>>>24+l<<l,r[0]=(a[0]&o[0])>>l,i=i?i<<s|r[0]:r[0],t+=1,n-=s}return i},rr=function(r){function e(e){var t;return(t=r.call(this)||this).observer=void 0,t.observer=e,t}u(e,r);var t=e.prototype;return t.resetInitSegment=function(e,t,i,n){r.prototype.resetInitSegment.call(this,e,t,i,n),this._audioTrack={"container":"audio/ac-3","type":"audio","id":2,"pid":-1,"sequenceNumber":0,"segmentCodec":"ac3","samples":[],"manifestCodec":t,"duration":n,"inputTimeScale":9e4,"dropped":0}},t.canParse=function(e,t){return t+64<e.length},t.appendFrame=function(e,t,i){var n=or(e,t,i,this.basePTS,this.frameIndex);if(-1!==n)return{"sample":e.samples[e.samples.length-1],"length":n,"missing":0}},e.probe=function(e){if(!e)return!1;var t=Ae(e,0);if(!t)return!1;var i=t.length;return 11===e[i]&&119===e[i+1]&&void 0!==Pe(t)&&nr(e,i)<16},e}(Dn);function or(e,t,i,n,r){if(i+8>t.length)return-1;if(11!==t[i]||119!==t[i+1])return-1;var o=t[i+4]>>6;if(o>=3)return-1;var a=[48e3,44100,32e3][o],s=63&t[i+4],l=2*[64,69,96,64,70,96,80,87,120,80,88,120,96,104,144,96,105,144,112,121,168,112,122,168,128,139,192,128,140,192,160,174,240,160,175,240,192,208,288,192,209,288,224,243,336,224,244,336,256,278,384,256,279,384,320,348,480,320,349,480,384,417,576,384,418,576,448,487,672,448,488,672,512,557,768,512,558,768,640,696,960,640,697,960,768,835,1152,768,836,1152,896,975,1344,896,976,1344,1024,1114,1536,1024,1115,1536,1152,1253,1728,1152,1254,1728,1280,1393,1920,1280,1394,1920][3*s+o];if(i+l>t.length)return-1;var u=t[i+6]>>5,c=0;2===u?c+=2:(1&u&&1!==u&&(c+=2),4&u&&(c+=2));var d=(t[i+6]<<8|t[i+7])>>12-c&1,h=[2,1,2,3,3,4,4,5][u]+d,f=t[i+5]>>3,p=7&t[i+5],g=new Uint8Array([o<<6|f<<1|p>>2,(3&p)<<6|u<<3|d<<2|s>>4,s<<4&224]),v=n+r*(1536/a*9e4),m=t.subarray(i,i+l);return e.config=g,e.channelCount=h,e.samplerate=a,e.samples.push({"unit":m,"pts":v}),l}var ar=function(){function e(){this.VideoSample=null}var t=e.prototype;return t.createVideoSample=function(e,t,i,n){return{"key":e,"frame":!1,"pts":t,"dts":i,"units":[],"debug":n,"length":0}},t.getLastNalUnit=function(e){var t,i,n=this.VideoSample;if(n&&0!==n.units.length||(n=e[e.length-1]),null!=(t=n)&&t.units){var r=n.units;i=r[r.length-1]}return i},t.pushAccessUnit=function(e,t){if(e.units.length&&e.frame){if(void 0===e.pts){var i=t.samples,n=i.length;if(!n)return void t.dropped++;var r=i[n-1];e.pts=r.pts,e.dts=r.dts}t.samples.push(e)}e.debug.length&&be.log(e.pts+"/"+e.dts+":"+e.debug)},e}(),sr=function(){function e(e){this.data=void 0,this.bytesAvailable=void 0,this.word=void 0,this.bitsAvailable=void 0,this.data=e,this.bytesAvailable=e.byteLength,this.word=0,this.bitsAvailable=0}var t=e.prototype;return t.loadWord=function(){var e=this.data,t=this.bytesAvailable,i=e.byteLength-t,n=new Uint8Array(4),r=Math.min(4,t);if(0===r)throw new Error("no bytes available");n.set(e.subarray(i,i+r)),this.word=new DataView(n.buffer).getUint32(0),this.bitsAvailable=8*r,this.bytesAvailable-=r},t.skipBits=function(e){var t;e=Math.min(e,8*this.bytesAvailable+this.bitsAvailable),this.bitsAvailable>e?(this.word<<=e,this.bitsAvailable-=e):(e-=this.bitsAvailable,e-=(t=e>>3)<<3,this.bytesAvailable-=t,this.loadWord(),this.word<<=e,this.bitsAvailable-=e)},t.readBits=function(e){var t=Math.min(this.bitsAvailable,e),i=this.word>>>32-t;if(e>32&&be.error("Cannot read more than 32 bits at a time"),this.bitsAvailable-=t,this.bitsAvailable>0)this.word<<=t;else{if(!(this.bytesAvailable>0))throw new Error("no bits available");this.loadWord()}return(t=e-t)>0&&this.bitsAvailable?i<<t|this.readBits(t):i},t.skipLZ=function(){var e;for(e=0;e<this.bitsAvailable;++e)if(0!=(this.word&2147483648>>>e))return this.word<<=e,this.bitsAvailable-=e,e;return this.loadWord(),e+this.skipLZ()},t.skipUEG=function(){this.skipBits(1+this.skipLZ())},t.skipEG=function(){this.skipBits(1+this.skipLZ())},t.readUEG=function(){var e=this.skipLZ();return this.readBits(e+1)-1},t.readEG=function(){var e=this.readUEG();return 1&e?1+e>>>1:-1*(e>>>1)},t.readBoolean=function(){return 1===this.readBits(1)},t.readUByte=function(){return this.readBits(8)},t.readUShort=function(){return this.readBits(16)},t.readUInt=function(){return this.readBits(32)},t.skipScalingList=function(e){for(var t=8,i=8,n=0;n<e;n++)0!==i&&(i=(t+this.readEG()+256)%256),t=0===i?t:i},t.readSPS=function(){var e,t,i,n=0,r=0,o=0,a=0,s=this.readUByte.bind(this),l=this.readBits.bind(this),u=this.readUEG.bind(this),c=this.readBoolean.bind(this),d=this.skipBits.bind(this),h=this.skipEG.bind(this),f=this.skipUEG.bind(this),p=this.skipScalingList.bind(this);s();var g=s();if(l(5),d(3),s(),f(),100===g||110===g||122===g||244===g||44===g||83===g||86===g||118===g||128===g){var v=u();if(3===v&&d(1),f(),f(),d(1),c())for(t=3!==v?8:12,i=0;i<t;i++)c()&&p(i<6?16:64)}f();var m=u();if(0===m)u();else if(1===m)for(d(1),h(),h(),e=u(),i=0;i<e;i++)h();f(),d(1);var y=u(),b=u(),_=l(1);0===_&&d(1),d(1),c()&&(n=u(),r=u(),o=u(),a=u());var w=[1,1];if(c()&&c())switch(s()){case 1:w=[1,1];break;case 2:w=[12,11];break;case 3:w=[10,11];break;case 4:w=[16,11];break;case 5:w=[40,33];break;case 6:w=[24,11];break;case 7:w=[20,11];break;case 8:w=[32,11];break;case 9:w=[80,33];break;case 10:w=[18,11];break;case 11:w=[15,11];break;case 12:w=[64,33];break;case 13:w=[160,99];break;case 14:w=[4,3];break;case 15:w=[3,2];break;case 16:w=[2,1];break;case 255:w=[s()<<8|s(),s()<<8|s()]}return{"width":Math.ceil(16*(y+1)-2*n-2*r),"height":(2-_)*(b+1)*16-(_?2:4)*(o+a),"pixelRatio":w}},t.readSliceType=function(){return this.readUByte(),this.readUEG(),this.readUEG()},e}(),lr=function(e){function t(){return e.apply(this,arguments)||this}u(t,e);var i=t.prototype;return i.parseAVCPES=function(p,g,v,e,m){var y,b=this,t=this.parseAVCNALu(p,v.data),_=this.VideoSample,w=!1;v.data=null,_&&t.length&&!p.audFound&&(this.pushAccessUnit(_,p),_=this.VideoSample=this.createVideoSample(!1,v.pts,v.dts,"")),t.forEach(function(e){var t;switch(e.type){case 1:var i=!1;y=!0;var n,r=e.data;if(w&&r.length>4){var o=new sr(r).readSliceType();2!==o&&4!==o&&7!==o&&9!==o||(i=!0)}i&&null!=(n=_)&&n.frame&&!_.key&&(b.pushAccessUnit(_,p),_=b.VideoSample=null),_||(_=b.VideoSample=b.createVideoSample(!0,v.pts,v.dts,"")),_.frame=!0,_.key=i;break;case 5:y=!0,null!=(t=_)&&t.frame&&!_.key&&(b.pushAccessUnit(_,p),_=b.VideoSample=null),_||(_=b.VideoSample=b.createVideoSample(!0,v.pts,v.dts,"")),_.key=!0,_.frame=!0;break;case 6:y=!0,rt(e.data,1,v.pts,g.samples);break;case 7:var a,s;y=!0,w=!0;var l=e.data,u=new sr(l).readSPS();if(!p.sps||p.width!==u.width||p.height!==u.height||(null==(a=p.pixelRatio)?void 0:a[0])!==u.pixelRatio[0]||(null==(s=p.pixelRatio)?void 0:s[1])!==u.pixelRatio[1]){p.width=u.width,p.height=u.height,p.pixelRatio=u.pixelRatio,p.sps=[l],p.duration=m;for(var c=l.subarray(1,4),d="avc1.",h=0;h<3;h++){var f=c[h].toString(16);f.length<2&&(f="0"+f),d+=f}p.codec=d}break;case 8:y=!0,p.pps=[e.data];break;case 9:y=!0,p.audFound=!0,_&&b.pushAccessUnit(_,p),_=b.VideoSample=b.createVideoSample(!1,v.pts,v.dts,"");break;case 12:y=!0;break;default:y=!1,_&&(_.debug+="unknown NAL "+e.type+" ")}_&&y&&_.units.push(e)}),e&&_&&(this.pushAccessUnit(_,p),this.VideoSample=null)},i.parseAVCNALu=function(e,t){var i,n,r=t.byteLength,o=e.naluState||0,a=o,s=[],l=0,u=-1,c=0;for(-1===o&&(u=0,c=31&t[0],o=0,l=1);l<r;)if(i=t[l++],o)if(1!==o)if(i)if(1===i){if(n=l-o-1,u>=0){var d={"data":t.subarray(u,n),"type":c};s.push(d)}else{var h=this.getLastNalUnit(e.samples);h&&(a&&l<=4-a&&h.state&&(h.data=h.data.subarray(0,h.data.byteLength-a)),n>0&&(h.data=A(h.data,t.subarray(0,n)),h.state=0))}l<r?(u=l,c=31&t[l],o=0):o=-1}else o=0;else o=3;else o=i?0:2;else o=i?0:1;if(u>=0&&o>=0){var f={"data":t.subarray(u,r),"type":c,"state":o};s.push(f)}if(0===s.length){var p=this.getLastNalUnit(e.samples);p&&(p.data=A(p.data,t))}return e.naluState=o,s},t}(ar),ur=function(){function e(e,t,i){this.keyData=void 0,this.decrypter=void 0,this.keyData=i,this.decrypter=new _n(t,{"removePKCS7Padding":!1})}var t=e.prototype;return t.decryptBuffer=function(e){return this.decrypter.decrypt(e,this.keyData.key.buffer,this.keyData.iv.buffer)},t.decryptAacSample=function(i,n,r){var o=this,a=i[n].unit;if(!(a.length<=16)){var e=a.subarray(16,a.length-a.length%16),t=e.buffer.slice(e.byteOffset,e.byteOffset+e.length);this.decryptBuffer(t).then(function(e){var t=new Uint8Array(e);a.set(t,16),o.decrypter.isSync()||o.decryptAacSamples(i,n+1,r)})}},t.decryptAacSamples=function(e,t,i){for(;;t++){if(t>=e.length)return void i();if(!(e[t].unit.length<32||(this.decryptAacSample(e,t,i),this.decrypter.isSync())))return}},t.getAvcEncryptedData=function(e){for(var t=16*Math.floor((e.length-48)/160)+16,i=new Int8Array(t),n=0,r=32;r<e.length-16;r+=160,n+=16)i.set(e.subarray(r,r+16),n);return i},t.getAvcDecryptedUnit=function(e,t){for(var i=new Uint8Array(t),n=0,r=32;r<e.length-16;r+=160,n+=16)e.set(i.subarray(n,n+16),r);return e},t.decryptAvcSample=function(t,i,n,r,o){var a=this,s=ot(o.data),e=this.getAvcEncryptedData(s);this.decryptBuffer(e.buffer).then(function(e){o.data=a.getAvcDecryptedUnit(s,e),a.decrypter.isSync()||a.decryptAvcSamples(t,i,n+1,r)})},t.decryptAvcSamples=function(e,t,i,n){if(e instanceof Uint8Array)throw new Error("Cannot decrypt samples of type Uint8Array");for(;;t++,i=0){if(t>=e.length)return void n();for(var r=e[t].units;!(i>=r.length);i++){var o=r[i];if(!(o.data.length<=48||1!==o.type&&5!==o.type||(this.decryptAvcSample(e,t,i,n,o),this.decrypter.isSync())))return}}},e}(),O=188,cr=function(){function R(e,t,i){this.observer=void 0,this.config=void 0,this.typeSupported=void 0,this.sampleAes=null,this.pmtParsed=!1,this.audioCodec=void 0,this.videoCodec=void 0,this._duration=0,this._pmtId=-1,this._videoTrack=void 0,this._audioTrack=void 0,this._id3Track=void 0,this._txtTrack=void 0,this.aacOverFlow=null,this.remainderData=null,this.videoParser=void 0,this.observer=e,this.config=t,this.typeSupported=i,this.videoParser=new lr}R.probe=function(e){var t=R.syncOffset(e);return t>0&&be.warn("MPEG2-TS detected but first sync word found @ offset "+t),-1!==t},R.syncOffset=function(e){for(var t=e.length,i=Math.min(940,t-O)+1,n=0;n<i;){for(var r=!1,o=-1,a=0,s=n;s<t;s+=O){if(71!==e[s]||t-s!==O&&71!==e[s+O]){if(a)return-1;break}if(a++,-1===o&&0!==(o=s)&&(i=Math.min(o+18612,e.length-O)+1),r||(r=0===dr(e,s)),r&&a>1&&(0===o&&a>2||s+O>i))return o}n++}return-1},R.createTrack=function(e,t){return{"container":"video"===e||"audio"===e?"video/mp2t":void 0,"type":e,"id":We[e],"pid":-1,"inputTimeScale":9e4,"sequenceNumber":0,"samples":[],"dropped":0,"duration":"audio"===e?t:void 0}};var e=R.prototype;return e.resetInitSegment=function(e,t,i,n){this.pmtParsed=!1,this._pmtId=-1,this._videoTrack=R.createTrack("video"),this._audioTrack=R.createTrack("audio",n),this._id3Track=R.createTrack("id3"),this._txtTrack=R.createTrack("text"),this._audioTrack.segmentCodec="aac",this.aacOverFlow=null,this.remainderData=null,this.audioCodec=t,this.videoCodec=i,this._duration=n},e.resetTimeStamp=function(){},e.resetContiguity=function(){var e=this._audioTrack,t=this._videoTrack,i=this._id3Track;e&&(e.pesData=null),t&&(t.pesData=null),i&&(i.pesData=null),this.aacOverFlow=null,this.remainderData=null},e.demux=function(e,t,i,n){var r;void 0===i&&(i=!1),void 0===n&&(n=!1),i||(this.sampleAes=null);var o=this._videoTrack,a=this._audioTrack,s=this._id3Track,l=this._txtTrack,u=o.pid,c=o.pesData,d=a.pid,h=s.pid,f=a.pesData,p=s.pesData,g=null,v=this.pmtParsed,m=this._pmtId,y=e.length;if(this.remainderData&&(y=(e=A(this.remainderData,e)).length,this.remainderData=null),y<O&&!n)return this.remainderData=e,{"audioTrack":a,"videoTrack":o,"id3Track":s,"textTrack":l};var b=Math.max(0,R.syncOffset(e));(y-=(y-b)%O)<e.byteLength&&!n&&(this.remainderData=new Uint8Array(e.buffer,y,e.buffer.byteLength-y));for(var _=0,w=b;w<y;w+=O)if(71===e[w]){var E=!!(64&e[w+1]),x=dr(e,w),T=void 0;if((48&e[w+3])>>4>1){if((T=w+5+e[w+4])===w+O)continue}else T=w+4;switch(x){case u:E&&(c&&(r=vr(c))&&this.videoParser.parseAVCPES(o,l,r,!1,this._duration),c={"data":[],"size":0}),c&&(c.data.push(e.subarray(T,w+O)),c.size+=w+O-T);break;case d:if(E){if(f&&(r=vr(f)))switch(a.segmentCodec){case"aac":this.parseAACPES(a,r);break;case"mp3":this.parseMPEGPES(a,r);break;case"ac3":this.parseAC3PES(a,r)}f={"data":[],"size":0}}f&&(f.data.push(e.subarray(T,w+O)),f.size+=w+O-T);break;case h:E&&(p&&(r=vr(p))&&this.parseID3PES(s,r),p={"data":[],"size":0}),p&&(p.data.push(e.subarray(T,w+O)),p.size+=w+O-T);break;case 0:E&&(T+=e[T]+1),m=this._pmtId=hr(e,T);break;case m:E&&(T+=e[T]+1);var S=fr(e,T,this.typeSupported,i,this.observer);(u=S.videoPid)>0&&(o.pid=u,o.segmentCodec=S.segmentVideoCodec),(d=S.audioPid)>0&&(a.pid=d,a.segmentCodec=S.segmentAudioCodec),(h=S.id3Pid)>0&&(s.pid=h),null===g||v||(be.warn("MPEG-TS PMT found at "+w+" after unknown PID '"+g+"'. Backtracking to sync byte @"+b+" to parse all TS packets."),g=null,w=b-188),v=this.pmtParsed=!0;break;case 17:case 8191:break;default:g=x}}else _++;_>0&&pr(this.observer,new Error("Found "+_+" TS packet/s that do not start with 0x47")),o.pesData=c,a.pesData=f,s.pesData=p;var k={"audioTrack":a,"videoTrack":o,"id3Track":s,"textTrack":l};return n&&this.extractRemainingSamples(k),k},e.flush=function(){var e,t=this.remainderData;return this.remainderData=null,e=t?this.demux(t,-1,!1,!0):{"videoTrack":this._videoTrack,"audioTrack":this._audioTrack,"id3Track":this._id3Track,"textTrack":this._txtTrack},this.extractRemainingSamples(e),this.sampleAes?this.decrypt(e,this.sampleAes):e},e.extractRemainingSamples=function(e){var t,i=e.audioTrack,n=e.videoTrack,r=e.id3Track,o=e.textTrack,a=n.pesData,s=i.pesData,l=r.pesData;if(a&&(t=vr(a))?(this.videoParser.parseAVCPES(n,o,t,!0,this._duration),n.pesData=null):n.pesData=a,s&&(t=vr(s))){switch(i.segmentCodec){case"aac":this.parseAACPES(i,t);break;case"mp3":this.parseMPEGPES(i,t);break;case"ac3":this.parseAC3PES(i,t)}i.pesData=null}else null!=s&&s.size&&be.log("last AAC PES packet truncated,might overlap between fragments"),i.pesData=s;l&&(t=vr(l))?(this.parseID3PES(r,t),r.pesData=null):r.pesData=l},e.demuxSampleAes=function(e,t,i){var n=this.demux(e,i,!0,!this.config.progressive),r=this.sampleAes=new ur(this.observer,this.config,t);return this.decrypt(n,r)},e.decrypt=function(n,r){return new Promise(function(e){var t=n.audioTrack,i=n.videoTrack;t.samples&&"aac"===t.segmentCodec?r.decryptAacSamples(t.samples,0,function(){i.samples?r.decryptAvcSamples(i.samples,0,0,function(){e(n)}):e(n)}):i.samples&&r.decryptAvcSamples(i.samples,0,0,function(){e(n)})})},e.destroy=function(){this._duration=0},e.parseAACPES=function(e,t){var i,n,r,o=0,a=this.aacOverFlow,s=t.data;if(a){this.aacOverFlow=null;var l=a.missing,u=a.sample.unit.byteLength;if(-1===l)s=A(a.sample.unit,s);else{var c=u-l;a.sample.unit.set(s.subarray(0,l),c),e.samples.push(a.sample),o=a.missing}}for(i=o,n=s.length;i<n-1&&!jn(s,i);i++);if(i!==o){var d,h=i<n-1;if(d=h?"AAC PES did not start with ADTS header,offset:"+i:"No ADTS header found in AAC PES",pr(this.observer,new Error(d),h),!h)return}if($n(e,this.observer,s,i,this.audioCodec),void 0!==t.pts)r=t.pts;else{if(!a)return void be.warn("[tsdemuxer]: AAC PES unknown PTS");var f=Hn(e.samplerate);r=a.sample.pts+f}for(var p,g=0;i<n;){if(i+=(p=zn(e,s,i,r,g)).length,p.missing){this.aacOverFlow=p;break}for(g++;i<n-1&&!jn(s,i);i++);}},e.parseMPEGPES=function(e,t){var i=t.data,n=i.length,r=0,o=0,a=t.pts;if(void 0!==a)for(;o<n;)if(Qn(i,o)){var s=Zn(e,i,o,a,r);if(!s)break;o+=s.length,r++}else o++;else be.warn("[tsdemuxer]: MPEG PES unknown PTS")},e.parseAC3PES=function(e,t){var i=t.data,n=t.pts;if(void 0!==n)for(var r,o=i.length,a=0,s=0;s<o&&(r=or(e,i,s,n,a++))>0;)s+=r;else be.warn("[tsdemuxer]: AC3 PES unknown PTS")},e.parseID3PES=function(e,t){if(void 0!==t.pts){var i=ge({},t,{"type":this._videoTrack?Yt:Zt,"duration":Number.POSITIVE_INFINITY});e.samples.push(i)}else be.warn("[tsdemuxer]: ID3 PES unknown PTS")},R}();function dr(e,t){return((31&e[t+1])<<8)+e[t+2]}function hr(e,t){return(31&e[t+10])<<8|e[t+11]}function fr(e,t,i,n,r){var o={"audioPid":-1,"videoPid":-1,"id3Pid":-1,"segmentVideoCodec":"avc","segmentAudioCodec":"aac"},a=t+3+((15&e[t+1])<<8|e[t+2])-4;for(t+=12+((15&e[t+10])<<8|e[t+11]);t<a;){var s=dr(e,t),l=(15&e[t+3])<<8|e[t+4];switch(e[t]){case 207:if(!n){gr("ADTS AAC");break}case 15:-1===o.audioPid&&(o.audioPid=s);break;case 21:-1===o.id3Pid&&(o.id3Pid=s);break;case 219:if(!n){gr("H.264");break}case 27:-1===o.videoPid&&(o.videoPid=s,o.segmentVideoCodec="avc");break;case 3:case 4:i.mpeg||i.mp3?-1===o.audioPid&&(o.audioPid=s,o.segmentAudioCodec="mp3"):be.log("MPEG audio found, not supported in this browser");break;case 193:if(!n){gr("AC-3");break}case 129:i.ac3?-1===o.audioPid&&(o.audioPid=s,o.segmentAudioCodec="ac3"):be.log("AC-3 audio found, not supported in this browser");break;case 6:if(-1===o.audioPid&&l>0)for(var u=t+5,c=l;c>2;){106===e[u]&&(!0!==i.ac3?be.log("AC-3 audio found, not supported in this browser for now"):(o.audioPid=s,o.segmentAudioCodec="ac3"));var d=e[u+1]+2;u+=d,c-=d}break;case 194:case 135:return pr(r,new Error("Unsupported EC-3 in M2TS found")),o;case 36:return pr(r,new Error("Unsupported HEVC in M2TS found")),o}t+=l+5}return o}function pr(e,t,i){be.warn("parsing error: "+t.message),e.emit(ve.ERROR,ve.ERROR,{"type":me.MEDIA_ERROR,"details":ye.FRAG_PARSING_ERROR,"fatal":!1,"levelRetry":i,"error":t,"reason":t.message})}function gr(e){be.log(e+" with AES-128-CBC encryption found in unencrypted stream")}function vr(e){var t,i,n,r,o,a=0,s=e.data;if(!e||0===e.size)return null;for(;s[0].length<19&&s.length>1;)s[0]=A(s[0],s[1]),s.splice(1,1);if(1===((t=s[0])[0]<<16)+(t[1]<<8)+t[2]){if((i=(t[4]<<8)+t[5])&&i>e.size-6)return null;var l=t[7];192&l&&(r=536870912*(14&t[9])+4194304*(255&t[10])+16384*(254&t[11])+128*(255&t[12])+(254&t[13])/2,64&l?r-(o=536870912*(14&t[14])+4194304*(255&t[15])+16384*(254&t[16])+128*(255&t[17])+(254&t[18])/2)>54e5&&(be.warn(Math.round((r-o)/9e4)+"s delta between PTS and DTS, align them"),r=o):o=r);var u=(n=t[8])+9;if(e.size<=u)return null;e.size-=u;for(var c=new Uint8Array(e.size),d=0,h=s.length;d<h;d++){var f=(t=s[d]).byteLength;if(u){if(u>f){u-=f;continue}t=t.subarray(u),f-=u,u=0}c.set(t,a),a+=f}return i&&(i-=n+3),{"data":c,"pts":r,"dts":o,"len":i}}return null}var mr=function(r){function e(){return r.apply(this,arguments)||this}u(e,r);var t=e.prototype;return t.resetInitSegment=function(e,t,i,n){r.prototype.resetInitSegment.call(this,e,t,i,n),this._audioTrack={"container":"audio/mpeg","type":"audio","id":2,"pid":-1,"sequenceNumber":0,"segmentCodec":"mp3","samples":[],"manifestCodec":t,"duration":n,"inputTimeScale":9e4,"dropped":0}},e.probe=function(e){if(!e)return!1;var t=Ae(e,0),i=(null==t?void 0:t.length)||0;if(t&&11===e[i]&&119===e[i+1]&&void 0!==Pe(t)&&nr(e,i)<=16)return!1;for(var n=e.length;i<n;i++)if(Jn(e,i))return be.log("MPEG Audio sync word found !"),!0;return!1},t.canParse=function(e,t){return function(e,t){return Yn(e,t)&&4<=e.length-t}(e,t)},t.appendFrame=function(e,t,i){if(null!==this.basePTS)return Zn(e,t,i,this.basePTS,this.frameIndex)},e}(Dn),yr=function(){function e(){}return e.getSilentFrame=function(e,t){if("mp4a.40.2"===e){if(1===t)return new Uint8Array([0,200,0,128,35,128]);if(2===t)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(3===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(4===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(5===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(6===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224])}else{if(1===t)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(2===t)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(3===t)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94])}},e}(),br=Math.pow(2,32)-1,_e=function(){function h(){}return h.init=function(){var e;for(e in h.types={"avc1":[],"avcC":[],"btrt":[],"dinf":[],"dref":[],"esds":[],"ftyp":[],"hdlr":[],"mdat":[],"mdhd":[],"mdia":[],"mfhd":[],"minf":[],"moof":[],"moov":[],"mp4a":[],".mp3":[],"dac3":[],"ac-3":[],"mvex":[],"mvhd":[],"pasp":[],"sdtp":[],"stbl":[],"stco":[],"stsc":[],"stsd":[],"stsz":[],"stts":[],"tfdt":[],"tfhd":[],"traf":[],"trak":[],"trun":[],"trex":[],"tkhd":[],"vmhd":[],"smhd":[]},h.types)h.types.hasOwnProperty(e)&&(h.types[e]=[e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2),e.charCodeAt(3)]);var t=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),i=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]);h.HDLR_TYPES={"video":t,"audio":i};var n=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),r=new Uint8Array([0,0,0,0,0,0,0,0]);h.STTS=h.STSC=h.STCO=r,h.STSZ=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),h.VMHD=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]),h.SMHD=new Uint8Array([0,0,0,0,0,0,0,0]),h.STSD=new Uint8Array([0,0,0,0,0,0,0,1]);var o=new Uint8Array([105,115,111,109]),a=new Uint8Array([97,118,99,49]),s=new Uint8Array([0,0,0,1]);h.FTYP=h.box(h.types.ftyp,o,s,o,a),h.DINF=h.box(h.types.dinf,h.box(h.types.dref,n))},h.box=function(e){for(var t=8,i=arguments.length,n=new Array(i>1?i-1:0),r=1;r<i;r++)n[r-1]=arguments[r];for(var o=n.length,a=o;o--;)t+=n[o].byteLength;var s=new Uint8Array(t);for(s[0]=t>>24&255,s[1]=t>>16&255,s[2]=t>>8&255,s[3]=255&t,s.set(e,4),o=0,t=8;o<a;o++)s.set(n[o],t),t+=n[o].byteLength;return s},h.hdlr=function(e){return h.box(h.types.hdlr,h.HDLR_TYPES[e])},h.mdat=function(e){return h.box(h.types.mdat,e)},h.mdhd=function(e,t){t*=e;var i=Math.floor(t/(br+1)),n=Math.floor(t%(br+1));return h.box(h.types.mdhd,new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,e>>24&255,e>>16&255,e>>8&255,255&e,i>>24,i>>16&255,i>>8&255,255&i,n>>24,n>>16&255,n>>8&255,255&n,85,196,0,0]))},h.mdia=function(e){return h.box(h.types.mdia,h.mdhd(e.timescale,e.duration),h.hdlr(e.type),h.minf(e))},h.mfhd=function(e){return h.box(h.types.mfhd,new Uint8Array([0,0,0,0,e>>24,e>>16&255,e>>8&255,255&e]))},h.minf=function(e){return"audio"===e.type?h.box(h.types.minf,h.box(h.types.smhd,h.SMHD),h.DINF,h.stbl(e)):h.box(h.types.minf,h.box(h.types.vmhd,h.VMHD),h.DINF,h.stbl(e))},h.moof=function(e,t,i){return h.box(h.types.moof,h.mfhd(e),h.traf(i,t))},h.moov=function(e){for(var t=e.length,i=[];t--;)i[t]=h.trak(e[t]);return h.box.apply(null,[h.types.moov,h.mvhd(e[0].timescale,e[0].duration)].concat(i).concat(h.mvex(e)))},h.mvex=function(e){for(var t=e.length,i=[];t--;)i[t]=h.trex(e[t]);return h.box.apply(null,[h.types.mvex].concat(i))},h.mvhd=function(e,t){t*=e;var i=Math.floor(t/(br+1)),n=Math.floor(t%(br+1)),r=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,e>>24&255,e>>16&255,e>>8&255,255&e,i>>24,i>>16&255,i>>8&255,255&i,n>>24,n>>16&255,n>>8&255,255&n,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return h.box(h.types.mvhd,r)},h.sdtp=function(e){var t,i,n=e.samples||[],r=new Uint8Array(4+n.length);for(t=0;t<n.length;t++)i=n[t].flags,r[t+4]=i.dependsOn<<4|i.isDependedOn<<2|i.hasRedundancy;return h.box(h.types.sdtp,r)},h.stbl=function(e){return h.box(h.types.stbl,h.stsd(e),h.box(h.types.stts,h.STTS),h.box(h.types.stsc,h.STSC),h.box(h.types.stsz,h.STSZ),h.box(h.types.stco,h.STCO))},h.avc1=function(e){var t,i,n,r=[],o=[];for(t=0;t<e.sps.length;t++)n=(i=e.sps[t]).byteLength,r.push(n>>>8&255),r.push(255&n),r=r.concat(Array.prototype.slice.call(i));for(t=0;t<e.pps.length;t++)n=(i=e.pps[t]).byteLength,o.push(n>>>8&255),o.push(255&n),o=o.concat(Array.prototype.slice.call(i));var a=h.box(h.types.avcC,new Uint8Array([1,r[3],r[4],r[5],255,224|e.sps.length].concat(r).concat([e.pps.length]).concat(o))),s=e.width,l=e.height,u=e.pixelRatio[0],c=e.pixelRatio[1];return h.box(h.types.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,s>>8&255,255&s,l>>8&255,255&l,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,100,97,105,108,121,109,111,116,105,111,110,47,104,108,115,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),a,h.box(h.types.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])),h.box(h.types.pasp,new Uint8Array([u>>24,u>>16&255,u>>8&255,255&u,c>>24,c>>16&255,c>>8&255,255&c])))},h.esds=function(e){var t=e.config.length;return new Uint8Array([0,0,0,0,3,23+t,0,1,0,4,15+t,64,21,0,0,0,0,0,0,0,0,0,0,0,5].concat([t]).concat(e.config).concat([6,1,2]))},h.audioStsd=function(e){var t=e.samplerate;return new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,e.channelCount,0,16,0,0,0,0,t>>8&255,255&t,0,0])},h.mp4a=function(e){return h.box(h.types.mp4a,h.audioStsd(e),h.box(h.types.esds,h.esds(e)))},h.mp3=function(e){return h.box(h.types[".mp3"],h.audioStsd(e))},h.ac3=function(e){return h.box(h.types["ac-3"],h.audioStsd(e),h.box(h.types.dac3,e.config))},h.stsd=function(e){return"audio"===e.type?"mp3"===e.segmentCodec&&"mp3"===e.codec?h.box(h.types.stsd,h.STSD,h.mp3(e)):"ac3"===e.segmentCodec?h.box(h.types.stsd,h.STSD,h.ac3(e)):h.box(h.types.stsd,h.STSD,h.mp4a(e)):h.box(h.types.stsd,h.STSD,h.avc1(e))},h.tkhd=function(e){var t=e.id,i=e.duration*e.timescale,n=e.width,r=e.height,o=Math.floor(i/(br+1)),a=Math.floor(i%(br+1));return h.box(h.types.tkhd,new Uint8Array([1,0,0,7,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,t>>24&255,t>>16&255,t>>8&255,255&t,0,0,0,0,o>>24,o>>16&255,o>>8&255,255&o,a>>24,a>>16&255,a>>8&255,255&a,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,n>>8&255,255&n,0,0,r>>8&255,255&r,0,0]))},h.traf=function(e,t){var i=h.sdtp(e),n=e.id,r=Math.floor(t/(br+1)),o=Math.floor(t%(br+1));return h.box(h.types.traf,h.box(h.types.tfhd,new Uint8Array([0,0,0,0,n>>24,n>>16&255,n>>8&255,255&n])),h.box(h.types.tfdt,new Uint8Array([1,0,0,0,r>>24,r>>16&255,r>>8&255,255&r,o>>24,o>>16&255,o>>8&255,255&o])),h.trun(e,i.length+16+20+8+16+8+8),i)},h.trak=function(e){return e.duration=e.duration||4294967295,h.box(h.types.trak,h.tkhd(e),h.mdia(e))},h.trex=function(e){var t=e.id;return h.box(h.types.trex,new Uint8Array([0,0,0,0,t>>24,t>>16&255,t>>8&255,255&t,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]))},h.trun=function(e,t){var i,n,r,o,a,s,l=e.samples||[],u=l.length,c=12+16*u,d=new Uint8Array(c);for(t+=8+c,d.set(["video"===e.type?1:0,0,15,1,u>>>24&255,u>>>16&255,u>>>8&255,255&u,t>>>24&255,t>>>16&255,t>>>8&255,255&t],0),i=0;i<u;i++)r=(n=l[i]).duration,o=n.size,a=n.flags,s=n.cts,d.set([r>>>24&255,r>>>16&255,r>>>8&255,255&r,o>>>24&255,o>>>16&255,o>>>8&255,255&o,a.isLeading<<2|a.dependsOn,a.isDependedOn<<6|a.hasRedundancy<<4|a.paddingValue<<1|a.isNonSync,61440&a.degradPrio,15&a.degradPrio,s>>>24&255,s>>>16&255,s>>>8&255,255&s],12+16*i);return h.box(h.types.trun,d)},h.initSegment=function(e){h.types||h.init();var t=h.moov(e);return A(h.FTYP,t)},h}();_e.types=void 0,_e.HDLR_TYPES=void 0,_e.STTS=void 0,_e.STSC=void 0,_e.STCO=void 0,_e.STSZ=void 0,_e.VMHD=void 0,_e.SMHD=void 0,_e.STSD=void 0,_e.FTYP=void 0,_e.DINF=void 0;var _r=9e4;function wr(e,t,i,n){void 0===i&&(i=1),void 0===n&&(n=!1);var r=e*t*i;return n?Math.round(r):r}function Er(e,t){return void 0===t&&(t=!1),wr(e,1e3,1/_r,t)}var xr=null,Tr=null,Sr=function(){function e(e,t,i,n){if(this.observer=void 0,this.config=void 0,this.typeSupported=void 0,this.ISGenerated=!1,this._initPTS=null,this._initDTS=null,this.nextAvcDts=null,this.nextAudioPts=null,this.videoSampleDuration=null,this.isAudioContiguous=!1,this.isVideoContiguous=!1,this.videoTrackConfig=void 0,this.observer=e,this.config=t,this.typeSupported=i,this.ISGenerated=!1,null===xr){var r=(navigator.userAgent||"").match(/Chrome\/(\d+)/i);xr=r?parseInt(r[1]):0}if(null===Tr){var o=navigator.userAgent.match(/Safari\/(\d+)/i);Tr=o?parseInt(o[1]):0}}var t=e.prototype;return t.destroy=function(){this.config=this.videoTrackConfig=this._initPTS=this._initDTS=null},t.resetTimeStamp=function(e){be.log("[mp4-remuxer]: initPTS & initDTS reset"),this._initPTS=this._initDTS=e},t.resetNextTimestamp=function(){be.log("[mp4-remuxer]: reset next timestamp"),this.isVideoContiguous=!1,this.isAudioContiguous=!1},t.resetInitSegment=function(){be.log("[mp4-remuxer]: ISGenerated flag reset"),this.ISGenerated=!1,this.videoTrackConfig=void 0},t.getVideoStartPts=function(e){var n=!1,t=e.reduce(function(e,t){var i=t.pts-e;return i<-4294967296?(n=!0,we(e,t.pts)):i>0?e:t.pts},e[0].pts);return n&&be.debug("PTS rollover detected"),t},t.remux=function(e,t,i,n,r,o,a,s){var l,u,c,d,h,f,p=r,g=r,v=e.pid>-1,m=t.pid>-1,y=t.samples.length,b=e.samples.length>0,_=a&&y>0||y>1;if((!v||b)&&(!m||_)||this.ISGenerated||a){if(this.ISGenerated){var w,E,x,T,S=this.videoTrackConfig;!S||t.width===S.width&&t.height===S.height&&(null==(w=t.pixelRatio)?void 0:w[0])===(null==(E=S.pixelRatio)?void 0:E[0])&&(null==(x=t.pixelRatio)?void 0:x[1])===(null==(T=S.pixelRatio)?void 0:T[1])||this.resetInitSegment()}else c=this.generateIS(e,t,r,o);var k,R=this.isVideoContiguous,C=-1;if(_&&(C=function(e){for(var t=0;t<e.length;t++)if(e[t].key)return t;return-1}(t.samples),!R&&this.config.forceKeyFrameOnDiscontinuity))if(f=!0,C>0){be.warn("[mp4-remuxer]: Dropped "+C+" out of "+y+" video samples due to a missing keyframe");var A=this.getVideoStartPts(t.samples);t.samples=t.samples.slice(C),t.dropped+=C,k=g+=(t.samples[0].pts-A)/t.inputTimeScale}else-1===C&&(be.warn("[mp4-remuxer]: No keyframe found out of "+y+" video samples"),f=!1);if(this.ISGenerated){if(b&&_){var O=this.getVideoStartPts(t.samples),L=(we(e.samples[0].pts,O)-O)/t.inputTimeScale;p+=Math.max(0,L),g+=Math.max(0,-L)}if(b){if(e.samplerate||(be.warn("[mp4-remuxer]: regenerate InitSegment as audio detected"),c=this.generateIS(e,t,r,o)),u=this.remuxAudio(e,p,this.isAudioContiguous,o,m||_||s===I?g:void 0),_){var P=u?u.endPTS-u.startPTS:0;t.inputTimeScale||(be.warn("[mp4-remuxer]: regenerate InitSegment as video detected"),c=this.generateIS(e,t,r,o)),l=this.remuxVideo(t,g,R,P)}}else _&&(l=this.remuxVideo(t,g,R,0));l&&(l.firstKeyFrame=C,l.independent=-1!==C,l.firstKeyFramePTS=k)}}return this.ISGenerated&&this._initPTS&&this._initDTS&&(i.samples.length&&(h=kr(i,r,this._initPTS,this._initDTS)),n.samples.length&&(d=Rr(n,r,this._initPTS))),{"audio":u,"video":l,"initSegment":c,"independent":f,"text":d,"id3":h}},t.generateIS=function(e,t,i,n){var r,o,a,s=e.samples,l=t.samples,u=this.typeSupported,c={},d=this._initPTS,h=!d||n,f="audio/mp4";if(h&&(r=o=1/0),e.config&&s.length){switch(e.timescale=e.samplerate,e.segmentCodec){case"mp3":u.mpeg?(f="audio/mpeg",e.codec=""):u.mp3&&(e.codec="mp3");break;case"ac3":e.codec="ac-3"}c.audio={"id":"audio","container":f,"codec":e.codec,"initSegment":"mp3"===e.segmentCodec&&u.mpeg?new Uint8Array(0):_e.initSegment([e]),"metadata":{"channelCount":e.channelCount}},h&&(a=e.inputTimeScale,d&&a===d.timescale?h=!1:r=o=s[0].pts-Math.round(a*i))}if(t.sps&&t.pps&&l.length){if(t.timescale=t.inputTimeScale,c.video={"id":"main","container":"video/mp4","codec":t.codec,"initSegment":_e.initSegment([t]),"metadata":{"width":t.width,"height":t.height}},h)if(a=t.inputTimeScale,d&&a===d.timescale)h=!1;else{var p=this.getVideoStartPts(l),g=Math.round(a*i);o=Math.min(o,we(l[0].dts,p)-g),r=Math.min(r,p-g)}this.videoTrackConfig={"width":t.width,"height":t.height,"pixelRatio":t.pixelRatio}}if(Object.keys(c).length)return this.ISGenerated=!0,h?(this._initPTS={"baseTime":r,"timescale":a},this._initDTS={"baseTime":o,"timescale":a}):r=a=void 0,{"tracks":c,"initPTS":r,"timescale":a}},t.remuxVideo=function(e,t,i,B){var n,r,o=e.inputTimeScale,a=e.samples,s=[],l=a.length,F=this._initPTS,u=this.nextAvcDts,c=8,d=this.videoSampleDuration,h=Number.POSITIVE_INFINITY,f=Number.NEGATIVE_INFINITY,N=!1;if(!i||null===u){var j=t*o,U=a[0].pts-we(a[0].dts,a[0].pts);xr&&null!==u&&Math.abs(j-U-u)<15e3?i=!0:u=j-U}for(var $=F.baseTime*o/F.timescale,p=0;p<l;p++){var g=a[p];g.pts=we(g.pts-$,u),g.dts=we(g.dts-$,u),g.dts<a[p>0?p-1:p].dts&&(N=!0)}N&&a.sort(function(e,t){var i=e.dts-t.dts,n=e.pts-t.pts;return i||n}),n=a[0].dts;var H=(r=a[a.length-1].dts)-n,v=H?Math.round(H/(l-1)):d||e.inputTimeScale/30;if(i){var m=n-u,y=m>v,z=m<-1;if((y||z)&&(y?be.warn("AVC: "+Er(m,!0)+" ms ("+m+"dts) hole between fragments detected at "+t.toFixed(3)):be.warn("AVC: "+Er(-m,!0)+" ms ("+m+"dts) overlapping between fragments detected at "+t.toFixed(3)),!z||u>=a[0].pts||xr)){n=u;var b=a[0].pts-m;if(y)a[0].dts=n,a[0].pts=b;else for(var _=0;_<a.length&&!(a[_].dts>b);_++)a[_].dts-=m,a[_].pts-=m;be.log("Video: Initial PTS/DTS adjusted: "+Er(b,!0)+"/"+Er(n,!0)+", delta: "+Er(m,!0)+" ms")}}for(var W=0,G=0,w=n=Math.max(0,n),E=0;E<l;E++){for(var x=a[E],V=x.units,q=V.length,T=0,S=0;S<q;S++)T+=V[S].data.length;G+=T,W+=q,x.length=T,x.dts<w?(x.dts=w,w+=v/4|0||1):w=x.dts,h=Math.min(x.pts,h),f=Math.max(x.pts,f)}r=a[l-1].dts;var k,R=G+4*W+8;try{k=new Uint8Array(R)}catch(e){return void this.observer.emit(ve.ERROR,ve.ERROR,{"type":me.MUX_ERROR,"details":ye.REMUX_ALLOC_ERROR,"fatal":!1,"error":e,"bytes":R,"reason":"fail allocating video mdat "+R})}var K=new DataView(k.buffer);K.setUint32(0,R),k.set(_e.types.mdat,4);for(var Z=!1,C=Number.POSITIVE_INFINITY,A=Number.POSITIVE_INFINITY,O=Number.NEGATIVE_INFINITY,X=Number.NEGATIVE_INFINITY,L=0;L<l;L++){for(var P=a[L],Y=P.units,Q=0,J=0,ee=Y.length;J<ee;J++){var te=Y[J],ie=te.data,ne=te.data.byteLength;K.setUint32(c,ne),c+=4,k.set(ie,c),c+=ne,Q+=4+ne}var I=void 0;if(L<l-1)d=a[L+1].dts-P.dts,I=a[L+1].pts-P.pts;else{var re=this.config,D=L>0?P.dts-a[L-1].dts:v;if(I=L>0?P.pts-a[L-1].pts:v,re.stretchShortVideoTrack&&null!==this.nextAudioPts){var oe=Math.floor(re.maxBufferHole*o),ae=(B?h+B*o:this.nextAudioPts)-P.pts;ae>oe?((d=ae-D)<0?d=D:Z=!0,be.log("[mp4-remuxer]: It is approximately "+ae/90+" ms to the next segment; using duration "+d/90+" ms for the last video frame.")):d=D}else d=D}var se=Math.round(P.pts-P.dts);C=Math.min(C,d),O=Math.max(O,d),A=Math.min(A,I),X=Math.max(X,I),s.push(new Ar(P.key,d,Q,se))}if(s.length)if(xr){if(xr<70){var le=s[0].flags;le.dependsOn=2,le.isNonSync=0}}else if(Tr&&X-A<O-C&&v/O<.025&&0===s[0].cts){be.warn("Found irregular gaps in sample duration. Using PTS instead of DTS to determine MP4 sample duration.");for(var ue=n,M=0,ce=s.length;M<ce;M++){var de=ue+s[M].duration,he=ue+s[M].cts;if(M<ce-1){var fe=de+s[M+1].cts;s[M].duration=fe-he}else s[M].duration=M?s[M-1].duration:v;s[M].cts=0,ue=de}}d=Z||!d?v:d,this.nextAvcDts=u=r+d,this.videoSampleDuration=d,this.isVideoContiguous=!0;var pe={"data1":_e.moof(e.sequenceNumber++,n,ge({},e,{"samples":s})),"data2":k,"startPTS":h/o,"endPTS":(f+d)/o,"startDTS":n/o,"endDTS":u/o,"type":"video","hasAudio":!1,"hasVideo":!0,"nb":s.length,"dropped":e.dropped};return e.samples=[],e.dropped=0,pe},t.getSamplesPerFrame=function(e){switch(e.segmentCodec){case"mp3":return 1152;case"ac3":return 1536;default:return 1024}},t.remuxAudio=function(e,B,t,i,n){var r=e.inputTimeScale,o=r/(e.samplerate?e.samplerate:r),a=this.getSamplesPerFrame(e),s=a*o,l=this._initPTS,u="mp3"===e.segmentCodec&&this.typeSupported.mpeg,c=[],d=void 0!==n,h=e.samples,f=u?0:8,p=this.nextAudioPts||-1,g=B*r,v=l.baseTime*r/l.timescale;if(this.isAudioContiguous=t=t||h.length&&p>0&&(i&&Math.abs(g-p)<9e3||Math.abs(we(h[0].pts-v,g)-p)<20*s),h.forEach(function(e){e.pts=we(e.pts-v,g)}),!t||p<0){if(h=h.filter(function(e){return e.pts>=0}),!h.length)return;p=0===n?0:i&&!d?Math.max(0,g):h[0].pts}if("aac"===e.segmentCodec)for(var m=this.config.maxAudioFramesDrift,y=0,b=p;y<h.length;y++){var _=h[y],w=_.pts,E=w-b,F=Math.abs(1e3*E/r);if(E<=-m*s&&d)0===y&&(be.warn("Audio frame @ "+(w/r).toFixed(3)+"s overlaps nextAudioPts by "+Math.round(1e3*E/r)+" ms."),this.nextAudioPts=p=b=w);else if(E>=m*s&&F<1e4&&d){var x=Math.round(E/s);(b=w-x*s)<0&&(x--,b+=s),0===y&&(this.nextAudioPts=p=b),be.warn("[mp4-remuxer]: Injecting "+x+" audio frame @ "+(b/r).toFixed(3)+"s due to "+Math.round(1e3*E/r)+" ms gap.");for(var T=0;T<x;T++){var N=Math.max(b,0),S=yr.getSilentFrame(e.manifestCodec||e.codec,e.channelCount);S||(be.log("[mp4-remuxer]: Unable to get silent frame for given audio codec; duplicating last frame instead."),S=_.unit.subarray()),h.splice(y,0,{"unit":S,"pts":N}),b+=s,y++}}_.pts=b,b+=s}for(var k,R=null,C=null,A=0,O=h.length;O--;)A+=h[O].unit.byteLength;for(var L=0,j=h.length;L<j;L++){var P=h[L],I=P.unit,D=P.pts;if(null!==C)c[L-1].duration=Math.round((D-C)/o);else{if(t&&"aac"===e.segmentCodec&&(D=p),R=D,!(A>0))return;A+=f;try{k=new Uint8Array(A)}catch(e){return void this.observer.emit(ve.ERROR,ve.ERROR,{"type":me.MUX_ERROR,"details":ye.REMUX_ALLOC_ERROR,"fatal":!1,"error":e,"bytes":A,"reason":"fail allocating audio mdat "+A})}u||(new DataView(k.buffer).setUint32(0,A),k.set(_e.types.mdat,4))}k.set(I,f);var M=I.byteLength;f+=M,c.push(new Ar(!0,a,M,0)),C=D}var U=c.length;if(U){var $=c[c.length-1];this.nextAudioPts=p=C+o*$.duration;var H=u?new Uint8Array(0):_e.moof(e.sequenceNumber++,R/o,ge({},e,{"samples":c}));e.samples=[];var z=R/r,W=p/r,G={"data1":H,"data2":k,"startPTS":z,"endPTS":W,"startDTS":z,"endDTS":W,"type":"audio","hasAudio":!0,"hasVideo":!1,"nb":U};return this.isAudioContiguous=!0,G}},t.remuxEmptyAudio=function(e,t,i,n){var r=e.inputTimeScale,o=r/(e.samplerate?e.samplerate:r),a=this.nextAudioPts,s=this._initDTS,l=9e4*s.baseTime/s.timescale,u=(null!==a?a:n.startDTS*r)+l,c=n.endDTS*r+l,d=1024*o,h=Math.ceil((c-u)/d),f=yr.getSilentFrame(e.manifestCodec||e.codec,e.channelCount);if(be.warn("[mp4-remuxer]: remux empty Audio"),f){for(var p=[],g=0;g<h;g++){var v=u+g*d;p.push({"unit":f,"pts":v,"dts":v})}return e.samples=p,this.remuxAudio(e,t,i,!1)}be.trace("[mp4-remuxer]: Unable to remuxEmptyAudio since we were unable to get a silent frame for given audio codec")},e}();function we(e,t){var i;if(null===t)return e;for(i=t<e?-8589934592:8589934592;Math.abs(e-t)>4294967296;)e+=i;return e}function kr(e,t,i,n){var r=e.samples.length;if(r){for(var o=e.inputTimeScale,a=0;a<r;a++){var s=e.samples[a];s.pts=we(s.pts-i.baseTime*o/i.timescale,t*o)/o,s.dts=we(s.dts-n.baseTime*o/n.timescale,t*o)/o}var l=e.samples;return e.samples=[],{"samples":l}}}function Rr(e,t,i){var n=e.samples.length;if(n){for(var r=e.inputTimeScale,o=0;o<n;o++){var a=e.samples[o];a.pts=we(a.pts-i.baseTime*r/i.timescale,t*r)/r}e.samples.sort(function(e,t){return e.pts-t.pts});var s=e.samples;return e.samples=[],{"samples":s}}}var Cr,Ar=function(e,t,i,n){this.size=void 0,this.duration=void 0,this.cts=void 0,this.flags=void 0,this.duration=t,this.size=i,this.cts=n,this.flags={"isLeading":0,"isDependedOn":0,"hasRedundancy":0,"degradPrio":0,"dependsOn":e?2:1,"isNonSync":e?0:1}},Or=function(){function e(){this.emitInitSegment=!1,this.audioCodec=void 0,this.videoCodec=void 0,this.initData=void 0,this.initPTS=null,this.initTracks=void 0,this.lastEndTime=null}var t=e.prototype;return t.destroy=function(){},t.resetTimeStamp=function(e){this.initPTS=e,this.lastEndTime=null},t.resetNextTimestamp=function(){this.lastEndTime=null},t.resetInitSegment=function(e,t,i,n){this.audioCodec=t,this.videoCodec=i,this.generateInitSegment(function(e,t){if(!e||!t)return e;var r=t.keyId;return r&&t.isCommonEncryption&&V(e,["moov","trak"]).forEach(function(e){var t=V(e,["mdia","minf","stbl","stsd"])[0].subarray(8),i=V(t,["enca"]),n=i.length>0;n||(i=V(t,["encv"])),i.forEach(function(e){V(n?e.subarray(28):e.subarray(78),["sinf"]).forEach(function(e){var t=et(e);if(t){var i=t.subarray(8,24);i.some(function(e){return 0!==e})||(be.log("[eme] Patching keyId in 'enc"+(n?"a":"v")+">sinf>>tenc' box: "+y(i)+" -> "+y(r)),t.set(r,8))}})})}),e}(e,n)),this.emitInitSegment=!0},t.generateInitSegment=function(e){var t=this.audioCodec,i=this.videoCodec;if(null==e||!e.byteLength)return this.initTracks=void 0,void(this.initData=void 0);var n=this.initData=Xe(e);n.audio&&(t=Lr(n.audio,M)),n.video&&(i=Lr(n.video,C));var r={};n.audio&&n.video?r.audiovideo={"container":"video/mp4","codec":t+","+i,"initSegment":e,"id":"main"}:n.audio?r.audio={"container":"audio/mp4","codec":t,"initSegment":e,"id":"audio"}:n.video?r.video={"container":"video/mp4","codec":i,"initSegment":e,"id":"main"}:be.warn("[passthrough-remuxer.ts]: initSegment does not contain moov or trak boxes."),this.initTracks=r},t.remux=function(e,t,i,n,r,o){var a,s,l=this.initPTS,u=this.lastEndTime,c={"audio":void 0,"video":void 0,"text":n,"id3":i,"initSegment":void 0};J(u)||(u=this.lastEndTime=r||0);var d=t.samples;if(null==d||!d.length)return c;var h={"initPTS":void 0,"timescale":1},f=this.initData;if(null!=(a=f)&&a.length||(this.generateInitSegment(d),f=this.initData),null==(s=f)||!s.length)return be.warn("[passthrough-remuxer.ts]: Failed to generate initSegment."),c;this.emitInitSegment&&(h.tracks=this.initTracks,this.emitInitSegment=!1);var p=function(e,t){for(var i=0,n=0,r=0,o=V(e,["moof","traf"]),a=0;a<o.length;a++){var s=o[a],l=V(s,["tfhd"])[0],u=t[G(l,4)];if(u){var c=u.default,d=G(l,0)|(null==c?void 0:c.flags),h=null==c?void 0:c.duration;8&d&&(h=G(l,2&d?12:8));for(var f=u.timescale||9e4,p=V(s,["trun"]),g=0;g<p.length;g++)!(i=tt(p[g]))&&h&&(i=h*G(p[g],4)),u.type===C?n+=i/f:u.type===M&&(r+=i/f)}}if(0===n&&0===r){for(var v=1/0,m=0,y=0,b=V(e,["sidx"]),_=0;_<b.length;_++){var w=Ze(b[_]);if(null!=w&&w.references){v=Math.min(v,w.earliestPresentationTime/w.timescale);var E=w.references.reduce(function(e,t){return e+t.info.duration||0},0);y=(m=Math.max(m,E+w.earliestPresentationTime/w.timescale))-v}}if(y&&J(y))return y}return n||r}(d,f),g=function(l,e){return V(e,["moof","traf"]).reduce(function(e,t){var a=V(t,["tfdt"])[0],s=a[0],i=V(t,["tfhd"]).reduce(function(e,t){var i=G(t,4),n=l[i];if(n){var r=G(a,4);if(1===s){if(r===He)return be.warn("[mp4-demuxer]: Ignoring assumed invalid signed 64-bit track fragment decode time"),e;r*=He+1,r+=G(a,8)}var o=r/(n.timescale||9e4);if(J(o)&&(null===e||o<e))return o}return e},null);return null!==i&&J(i)&&(null===e||i<e)?i:e},null)}(f,d),v=null===g?r:g;(function(e,t,i,n){if(null===e)return!0;var r=Math.max(n,1),o=t-e.baseTime/e.timescale;return Math.abs(o-i)>r}(l,v,r,p)||h.timescale!==l.timescale&&o)&&(h.initPTS=v-r,l&&1===l.timescale&&be.warn("Adjusting initPTS by "+(h.initPTS-l.baseTime)),this.initPTS=l={"baseTime":h.initPTS,"timescale":1});var m=e?v-l.baseTime/l.timescale:u,y=m+p;!function(r,e,s){V(e,["moof","traf"]).forEach(function(n){V(n,["tfhd"]).forEach(function(e){var t=G(e,4),i=r[t];if(i){var a=i.timescale||9e4;V(n,["tfdt"]).forEach(function(e){var t=e[0],i=s*a;if(i){var n=G(e,4);if(0===t)n-=i,Ke(e,4,n=Math.max(n,0));else{n*=Math.pow(2,32),n+=G(e,8),n-=i,n=Math.max(n,0);var r=Math.floor(n/(He+1)),o=Math.floor(n%(He+1));Ke(e,4,r),Ke(e,8,o)}}})}})})}(f,d,l.baseTime/l.timescale),p>0?this.lastEndTime=y:(be.warn("Duration parsed from mp4 should be greater than zero"),this.resetNextTimestamp());var b=!!f.audio,_=!!f.video,w="";b&&(w+="audio"),_&&(w+="video");var E={"data1":d,"startPTS":m,"startDTS":m,"endPTS":y,"endDTS":y,"type":w,"hasAudio":b,"hasVideo":_,"nb":1,"dropped":0};return c.audio="audio"===E.type?E:void 0,c.video="audio"!==E.type?E:void 0,c.initSegment=h,c.id3=kr(i,r,l,l),n.samples.length&&(c.text=Rr(n,r,l)),c},e}();function Lr(e,t){var i=null==e?void 0:e.codec;if(i&&i.length>4)return i;if(t===M){if("ec-3"===i||"ac-3"===i||"alac"===i)return i;if("fLaC"===i||"Opus"===i)return xt(i,!1);var n="mp4a.40.5";return be.info('Parsed audio codec "'+i+'" or audio object type not handled. Using "'+n+'"'),n}return be.warn('Unhandled video codec "'+i+'"'),"hvc1"===i||"hev1"===i?"hvc1.1.6.L120.90":"av01"===i?"av01.0.04M.08":"avc1.42e01e"}try{Cr=self.performance.now.bind(self.performance)}catch(e){be.debug("Unable to use Performance API on this environment"),Cr=null==se?void 0:se.Date.now}var Pr=[{"demux":ir,"remux":Or},{"demux":cr,"remux":Sr},{"demux":er,"remux":Sr},{"demux":mr,"remux":Sr}];Pr.splice(2,0,{"demux":rr,"remux":Sr});var Ir=function(){function e(e,t,i,n,r){this.async=!1,this.observer=void 0,this.typeSupported=void 0,this.config=void 0,this.vendor=void 0,this.id=void 0,this.demuxer=void 0,this.remuxer=void 0,this.decrypter=void 0,this.probe=void 0,this.decryptionPromise=null,this.transmuxConfig=void 0,this.currentTransmuxState=void 0,this.observer=e,this.typeSupported=t,this.config=i,this.vendor=n,this.id=r}var t=e.prototype;return t.configure=function(e){this.transmuxConfig=e,this.decrypter&&this.decrypter.reset()},t.push=function(e,t,i,n){var r=this,o=i.transmuxing;o.executeStart=Cr();var a=new Uint8Array(e),s=this.currentTransmuxState,l=this.transmuxConfig;n&&(this.currentTransmuxState=n);var u=n||s,c=u.contiguous,d=u.discontinuity,h=u.trackSwitch,f=u.accurateTimeOffset,p=u.timeOffset,g=u.initSegmentChange,v=l.audioCodec,m=l.videoCodec,y=l.defaultInitPts,b=l.duration,_=l.initSegmentData,w=function(e,t){var i=null;return e.byteLength>0&&null!=(null==t?void 0:t.key)&&null!==t.iv&&null!=t.method&&(i=t),i}(a,t);if(w&&"AES-128"===w.method){var E=this.getDecrypter();if(!E.isSync())return this.decryptionPromise=E.webCryptoDecrypt(a,w.key.buffer,w.iv.buffer).then(function(e){var t=r.push(e,null,i);return r.decryptionPromise=null,t}),this.decryptionPromise;var x=E.softwareDecrypt(a,w.key.buffer,w.iv.buffer);if(i.part>-1&&(x=E.flush()),!x)return o.executeEnd=Cr(),Dr(i);a=new Uint8Array(x)}var T=this.needsProbing(d,h);if(T){var S=this.configureTransmuxer(a);if(S)return be.warn("[transmuxer] "+S.message),this.observer.emit(ve.ERROR,ve.ERROR,{"type":me.MEDIA_ERROR,"details":ye.FRAG_PARSING_ERROR,"fatal":!1,"error":S,"reason":S.message}),o.executeEnd=Cr(),Dr(i)}(d||h||g||T)&&this.resetInitSegment(_,v,m,b,t),(d||g||T)&&this.resetInitialTimestamp(y),c||this.resetContiguity();var k=this.transmux(a,w,p,f,i),R=this.currentTransmuxState;return R.contiguous=!0,R.discontinuity=!1,R.trackSwitch=!1,o.executeEnd=Cr(),k},t.flush=function(t){var i=this,e=t.transmuxing;e.executeStart=Cr();var n=this.decrypter,r=this.currentTransmuxState,o=this.decryptionPromise;if(o)return o.then(function(){return i.flush(t)});var a=[],s=r.timeOffset;if(n){var l=n.flush();l&&a.push(this.push(l,null,t))}var u=this.demuxer,c=this.remuxer;if(!u||!c)return e.executeEnd=Cr(),[Dr(t)];var d=u.flush(s);return Mr(d)?d.then(function(e){return i.flushRemux(a,e,t),a}):(this.flushRemux(a,d,t),a)},t.flushRemux=function(e,t,i){var n=t.audioTrack,r=t.videoTrack,o=t.id3Track,a=t.textTrack,s=this.currentTransmuxState,l=s.accurateTimeOffset,u=s.timeOffset;be.log("[transmuxer.ts]: Flushed fragment "+i.sn+(i.part>-1?" p: "+i.part:"")+" of level "+i.level);var c=this.remuxer.remux(n,r,o,a,u,l,!0,this.id);e.push({"remuxResult":c,"chunkMeta":i}),i.transmuxing.executeEnd=Cr()},t.resetInitialTimestamp=function(e){var t=this.demuxer,i=this.remuxer;t&&i&&(t.resetTimeStamp(e),i.resetTimeStamp(e))},t.resetContiguity=function(){var e=this.demuxer,t=this.remuxer;e&&t&&(e.resetContiguity(),t.resetNextTimestamp())},t.resetInitSegment=function(e,t,i,n,r){var o=this.demuxer,a=this.remuxer;o&&a&&(o.resetInitSegment(e,t,i,n),a.resetInitSegment(e,t,i,r))},t.destroy=function(){this.demuxer&&(this.demuxer.destroy(),this.demuxer=void 0),this.remuxer&&(this.remuxer.destroy(),this.remuxer=void 0)},t.transmux=function(e,t,i,n,r){return t&&"SAMPLE-AES"===t.method?this.transmuxSampleAes(e,t,i,n,r):this.transmuxUnencrypted(e,i,n,r)},t.transmuxUnencrypted=function(e,t,i,n){var r=this.demuxer.demux(e,t,!1,!this.config.progressive),o=r.audioTrack,a=r.videoTrack,s=r.id3Track,l=r.textTrack;return{"remuxResult":this.remuxer.remux(o,a,s,l,t,i,!1,this.id),"chunkMeta":n}},t.transmuxSampleAes=function(e,t,i,n,r){var o=this;return this.demuxer.demuxSampleAes(e,t,i).then(function(e){return{"remuxResult":o.remuxer.remux(e.audioTrack,e.videoTrack,e.id3Track,e.textTrack,i,n,!1,o.id),"chunkMeta":r}})},t.configureTransmuxer=function(e){for(var t,i=this.config,n=this.observer,r=this.typeSupported,o=this.vendor,a=0,s=Pr.length;a<s;a++){var l;if(null!=(l=Pr[a].demux)&&l.probe(e)){t=Pr[a];break}}if(!t)return new Error("Failed to find demuxer by probing fragment data");var u=this.demuxer,c=this.remuxer,d=t.remux,h=t.demux;c&&c instanceof d||(this.remuxer=new d(n,i,r,o)),u&&u instanceof h||(this.demuxer=new h(n,i,r),this.probe=h.probe)},t.needsProbing=function(e,t){return!this.demuxer||!this.remuxer||e||t},t.getDecrypter=function(){var e=this.decrypter;return e||(e=this.decrypter=new _n(this.config)),e},e}(),Dr=function(e){return{"remuxResult":{},"chunkMeta":e}};function Mr(e){return"then"in e&&e.then instanceof Function}var Br=function(e,t,i,n,r){this.audioCodec=void 0,this.videoCodec=void 0,this.initSegmentData=void 0,this.duration=void 0,this.defaultInitPts=void 0,this.audioCodec=e,this.videoCodec=t,this.initSegmentData=i,this.duration=n,this.defaultInitPts=r||null},Fr=function(e,t,i,n,r,o){this.discontinuity=void 0,this.contiguous=void 0,this.accurateTimeOffset=void 0,this.trackSwitch=void 0,this.timeOffset=void 0,this.initSegmentChange=void 0,this.discontinuity=e,this.contiguous=t,this.accurateTimeOffset=i,this.trackSwitch=n,this.timeOffset=r,this.initSegmentChange=o},Nr={"exports":{}};!function(e){var n=Object.prototype.hasOwnProperty,f="~";function i(){}function s(e,t,i){this.fn=e,this.context=t,this.once=i||!1}function r(e,t,i,n,r){if("function"!=typeof i)throw new TypeError("The listener must be a function");var o=new s(i,n||e,r),a=f?f+t:t;return e._events[a]?e._events[a].fn?e._events[a]=[e._events[a],o]:e._events[a].push(o):(e._events[a]=o,e._eventsCount++),e}function u(e,t){0==--e._eventsCount?e._events=new i:delete e._events[t]}function t(){this._events=new i,this._eventsCount=0}Object.create&&(i.prototype=Object.create(null),(new i).__proto__||(f=!1)),t.prototype.eventNames=function(){var e,t,i=[];if(0===this._eventsCount)return i;for(t in e=this._events)n.call(e,t)&&i.push(f?t.slice(1):t);return Object.getOwnPropertySymbols?i.concat(Object.getOwnPropertySymbols(e)):i},t.prototype.listeners=function(e){var t=f?f+e:e,i=this._events[t];if(!i)return[];if(i.fn)return[i.fn];for(var n=0,r=i.length,o=new Array(r);n<r;n++)o[n]=i[n].fn;return o},t.prototype.listenerCount=function(e){var t=f?f+e:e,i=this._events[t];return i?i.fn?1:i.length:0},t.prototype.emit=function(e,t,i,n,r,o){var a=f?f+e:e;if(!this._events[a])return!1;var s,l,u=this._events[a],c=arguments.length;if(u.fn){switch(u.once&&this.removeListener(e,u.fn,void 0,!0),c){case 1:return u.fn.call(u.context),!0;case 2:return u.fn.call(u.context,t),!0;case 3:return u.fn.call(u.context,t,i),!0;case 4:return u.fn.call(u.context,t,i,n),!0;case 5:return u.fn.call(u.context,t,i,n,r),!0;case 6:return u.fn.call(u.context,t,i,n,r,o),!0}for(l=1,s=new Array(c-1);l<c;l++)s[l-1]=arguments[l];u.fn.apply(u.context,s)}else{var d,h=u.length;for(l=0;l<h;l++)switch(u[l].once&&this.removeListener(e,u[l].fn,void 0,!0),c){case 1:u[l].fn.call(u[l].context);break;case 2:u[l].fn.call(u[l].context,t);break;case 3:u[l].fn.call(u[l].context,t,i);break;case 4:u[l].fn.call(u[l].context,t,i,n);break;default:if(!s)for(d=1,s=new Array(c-1);d<c;d++)s[d-1]=arguments[d];u[l].fn.apply(u[l].context,s)}}return!0},t.prototype.on=function(e,t,i){return r(this,e,t,i,!1)},t.prototype.once=function(e,t,i){return r(this,e,t,i,!0)},t.prototype.removeListener=function(e,t,i,n){var r=f?f+e:e;if(!this._events[r])return this;if(!t)return u(this,r),this;var o=this._events[r];if(o.fn)o.fn!==t||n&&!o.once||i&&o.context!==i||u(this,r);else{for(var a=0,s=[],l=o.length;a<l;a++)(o[a].fn!==t||n&&!o[a].once||i&&o[a].context!==i)&&s.push(o[a]);s.length?this._events[r]=1===s.length?s[0]:s:u(this,r)}return this},t.prototype.removeAllListeners=function(e){var t;return e?(t=f?f+e:e,this._events[t]&&u(this,t)):(this._events=new i,this._eventsCount=0),this},t.prototype.off=t.prototype.removeListener,t.prototype.addListener=t.prototype.on,t.prefixed=f,t.EventEmitter=t,e.exports=t}(Nr);var jr=e(Nr.exports);function Ur(e,t){if(!((i=t.remuxResult).audio||i.video||i.text||i.id3||i.initSegment))return!1;var i,n=[],r=t.remuxResult,o=r.audio,a=r.video;return o&&$r(n,o),a&&$r(n,a),e.postMessage({"event":"transmuxComplete","data":t},n),!0}function $r(e,t){t.data1&&e.push(t.data1.buffer),t.data2&&e.push(t.data2.buffer)}function Hr(i,e,t){e.reduce(function(e,t){return Ur(i,t)||e},!1)||i.postMessage({"event":"transmuxComplete","data":e[0]}),i.postMessage({"event":"flush","data":t})}void 0!==ls&&ls&&function(a){var s=new jr,l=function(e,t){a.postMessage({"event":e,"data":t})};s.on(ve.FRAG_DECRYPTED,l),s.on(ve.ERROR,l);var u=function(){var e=function(t){var e=function(e){l("workerLog",{"logType":t,"message":e})};be[t]=e};for(var t in be)e(t)};a.addEventListener("message",function(e){var t=e.data;switch(t.cmd){case"init":var i=JSON.parse(t.config);a.transmuxer=new Ir(s,t.typeSupported,i,"",t.id),U(i.debug,t.id),u(),l("init",null);break;case"configure":a.transmuxer.configure(t.config);break;case"demux":var n=a.transmuxer.push(t.data,t.decryptdata,t.chunkMeta,t.state);Mr(n)?(a.transmuxer.async=!0,n.then(function(e){Ur(a,e)}).catch(function(e){l(ve.ERROR,{"type":me.MEDIA_ERROR,"details":ye.FRAG_PARSING_ERROR,"chunkMeta":t.chunkMeta,"fatal":!1,"error":e,"err":e,"reason":"transmuxer-worker push error"})})):(a.transmuxer.async=!1,Ur(a,n));break;case"flush":var r=t.chunkMeta,o=a.transmuxer.flush(r);Mr(o)||a.transmuxer.async?(Mr(o)||(o=Promise.resolve(o)),o.then(function(e){Hr(a,e,r)}).catch(function(e){l(ve.ERROR,{"type":me.MEDIA_ERROR,"details":ye.FRAG_PARSING_ERROR,"chunkMeta":t.chunkMeta,"fatal":!1,"error":e,"err":e,"reason":"transmuxer-worker flush error"})})):Hr(a,o,r)}})}(self);var zr=function(){function e(e,i,t,n){var r=this;this.error=null,this.hls=void 0,this.id=void 0,this.observer=void 0,this.frag=null,this.part=null,this.useWorker=void 0,this.workerContext=null,this.onwmsg=void 0,this.transmuxer=null,this.onTransmuxComplete=void 0,this.onFlush=void 0;var o=e.config;this.hls=e,this.id=i,this.useWorker=!!o.enableWorker,this.onTransmuxComplete=t,this.onFlush=n;var a=function(e,t){(t=t||{}).frag=r.frag,t.id=r.id,e===ve.ERROR&&(r.error=t.error),r.hls.trigger(e,t)};this.observer=new jr,this.observer.on(ve.FRAG_DECRYPTED,a),this.observer.on(ve.ERROR,a);var s,l,u,c,d=pt(o.preferManagedMediaSource)||{"isTypeSupported":function(){return!1}},h={"mpeg":d.isTypeSupported("audio/mpeg"),"mp3":d.isTypeSupported('audio/mp4; codecs="mp3"'),"ac3":d.isTypeSupported('audio/mp4; codecs="ac-3"')};if(!this.useWorker||"undefined"==typeof Worker||(o.workerPath,0))this.transmuxer=new Ir(this.observer,h,o,"",i);else try{o.workerPath?(be.log("loading Web Worker "+o.workerPath+' for "'+i+'"'),this.workerContext=(u=o.workerPath,c=new self.URL(u,self.location.href).href,{"worker":new self.Worker(c),"scriptURL":c})):(be.log('injecting Web Worker for "'+i+'"'),this.workerContext=(s=new self.Blob(["var exports={};var module={exports:exports};function define(f){f()};define.amd=true;("+ss.toString()+")(true);"],{"type":"text/javascript"}),l=self.URL.createObjectURL(s),{"worker":new self.Worker(l),"objectURL":l})),this.onwmsg=function(e){return r.onWorkerMessage(e)};var f=this.workerContext.worker;f.addEventListener("message",this.onwmsg),f.onerror=function(e){var t=new Error(e.message+"  ("+e.filename+":"+e.lineno+")");o.enableWorker=!1,be.warn('Error in "'+i+'" Web Worker, fallback to inline'),r.hls.trigger(ve.ERROR,{"type":me.OTHER_ERROR,"details":ye.INTERNAL_EXCEPTION,"fatal":!1,"event":"demuxerWorker","error":t})},f.postMessage({"cmd":"init","typeSupported":h,"vendor":"","id":i,"config":JSON.stringify(o)})}catch(e){be.warn('Error setting up "'+i+'" Web Worker, fallback to inline',e),this.resetWorker(),this.error=null,this.transmuxer=new Ir(this.observer,h,o,"",i)}}var t=e.prototype;return t.resetWorker=function(){if(this.workerContext){var e=this.workerContext,t=e.worker,i=e.objectURL;i&&self.URL.revokeObjectURL(i),t.removeEventListener("message",this.onwmsg),t.onerror=null,t.terminate(),this.workerContext=null}},t.destroy=function(){if(this.workerContext)this.resetWorker(),this.onwmsg=void 0;else{var e=this.transmuxer;e&&(e.destroy(),this.transmuxer=null)}var t=this.observer;t&&t.removeAllListeners(),this.frag=null,this.observer=null,this.hls=null},t.push=function(e,t,i,n,r,o,a,s,l,u){var c,d,h=this;l.transmuxing.start=self.performance.now();var f=this.transmuxer,p=o?o.start:r.start,g=r.decryptdata,v=this.frag,m=!(v&&r.cc===v.cc),y=!(v&&l.level===v.level),b=v?l.sn-v.sn:-1,_=this.part?l.part-this.part.index:-1,w=0===b&&l.id>1&&l.id===(null==v?void 0:v.stats.chunkCount),E=!y&&(1===b||0===b&&(1===_||w&&_<=0)),x=self.performance.now();(y||b||0===r.stats.parsing.start)&&(r.stats.parsing.start=x),!o||!_&&E||(o.stats.parsing.start=x);var T=!(v&&(null==(c=r.initSegment)?void 0:c.url)===(null==(d=v.initSegment)?void 0:d.url)),S=new Fr(m,E,s,y,p,T);if(!E||m||T){be.log("[transmuxer-interface, "+r.type+"]: Starting new transmux session for sn: "+l.sn+" p: "+l.part+" level: "+l.level+" id: "+l.id+"\n        discontinuity: "+m+"\n        trackSwitch: "+y+"\n        contiguous: "+E+"\n        accurateTimeOffset: "+s+"\n        timeOffset: "+p+"\n        initSegmentChange: "+T);var k=new Br(i,n,t,a,u);this.configureTransmuxer(k)}if(this.frag=r,this.part=o,this.workerContext)this.workerContext.worker.postMessage({"cmd":"demux","data":e,"decryptdata":g,"chunkMeta":l,"state":S},e instanceof ArrayBuffer?[e]:[]);else if(f){var R=f.push(e,g,l,S);Mr(R)?(f.async=!0,R.then(function(e){h.handleTransmuxComplete(e)}).catch(function(e){h.transmuxerError(e,l,"transmuxer-interface push error")})):(f.async=!1,this.handleTransmuxComplete(R))}},t.flush=function(t){var i=this;t.transmuxing.start=self.performance.now();var e=this.transmuxer;if(this.workerContext)this.workerContext.worker.postMessage({"cmd":"flush","chunkMeta":t});else if(e){var n=e.flush(t);Mr(n)||e.async?(Mr(n)||(n=Promise.resolve(n)),n.then(function(e){i.handleFlushResult(e,t)}).catch(function(e){i.transmuxerError(e,t,"transmuxer-interface flush error")})):this.handleFlushResult(n,t)}},t.transmuxerError=function(e,t,i){this.hls&&(this.error=e,this.hls.trigger(ve.ERROR,{"type":me.MEDIA_ERROR,"details":ye.FRAG_PARSING_ERROR,"chunkMeta":t,"frag":this.frag||void 0,"fatal":!1,"error":e,"err":e,"reason":i}))},t.handleFlushResult=function(e,t){var i=this;e.forEach(function(e){i.handleTransmuxComplete(e)}),this.onFlush(t)},t.onWorkerMessage=function(e){var t=e.data;if(null!=t&&t.event){var i=this.hls;if(this.hls)switch(t.event){case"init":var n,r=null==(n=this.workerContext)?void 0:n.objectURL;r&&self.URL.revokeObjectURL(r);break;case"transmuxComplete":this.handleTransmuxComplete(t.data);break;case"flush":this.onFlush(t.data);break;case"workerLog":be[t.data.logType]&&be[t.data.logType](t.data.message);break;default:t.data=t.data||{},t.data.frag=this.frag,t.data.id=this.id,i.trigger(t.event,t.data)}}else be.warn("worker message received with no "+(t?"event name":"data"))},t.configureTransmuxer=function(e){var t=this.transmuxer;this.workerContext?this.workerContext.worker.postMessage({"cmd":"configure","config":e}):t&&t.configure(e)},t.handleTransmuxComplete=function(e){e.chunkMeta.transmuxing.end=self.performance.now(),this.onTransmuxComplete(e)},e}();function Wr(e,t){if(e.length!==t.length)return!1;for(var i=0;i<e.length;i++)if(!Gr(e[i].attrs,t[i].attrs))return!1;return!0}function Gr(t,i,e){var n=t["STABLE-RENDITION-ID"];return n&&!e?n===i["STABLE-RENDITION-ID"]:!(e||["LANGUAGE","NAME","CHARACTERISTICS","AUTOSELECT","DEFAULT","FORCED","ASSOC-LANGUAGE"]).some(function(e){return t[e]!==i[e]})}function Vr(e,t){return t.label.toLowerCase()===e.name.toLowerCase()&&(!t.language||t.language.toLowerCase()===(e.lang||"").toLowerCase())}var qr=function(m){function e(e,t,i){var n;return(n=m.call(this,e,t,i,"[audio-stream-controller]",I)||this).videoBuffer=null,n.videoTrackCC=-1,n.waitingVideoCC=-1,n.bufferedTrack=null,n.switchingTrack=null,n.trackId=-1,n.waitingData=null,n.mainDetails=null,n.flushing=!1,n.bufferFlushed=!1,n.cachedTrackLoadedData=null,n._registerListeners(),n}u(e,m);var t=e.prototype;return t.onHandlerDestroying=function(){this._unregisterListeners(),m.prototype.onHandlerDestroying.call(this),this.mainDetails=null,this.bufferedTrack=null,this.switchingTrack=null},t._registerListeners=function(){var e=this.hls;e.on(ve.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(ve.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(ve.MANIFEST_LOADING,this.onManifestLoading,this),e.on(ve.LEVEL_LOADED,this.onLevelLoaded,this),e.on(ve.AUDIO_TRACKS_UPDATED,this.onAudioTracksUpdated,this),e.on(ve.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.on(ve.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.on(ve.ERROR,this.onError,this),e.on(ve.BUFFER_RESET,this.onBufferReset,this),e.on(ve.BUFFER_CREATED,this.onBufferCreated,this),e.on(ve.BUFFER_FLUSHING,this.onBufferFlushing,this),e.on(ve.BUFFER_FLUSHED,this.onBufferFlushed,this),e.on(ve.INIT_PTS_FOUND,this.onInitPtsFound,this),e.on(ve.FRAG_BUFFERED,this.onFragBuffered,this)},t._unregisterListeners=function(){var e=this.hls;e.off(ve.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(ve.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(ve.MANIFEST_LOADING,this.onManifestLoading,this),e.off(ve.LEVEL_LOADED,this.onLevelLoaded,this),e.off(ve.AUDIO_TRACKS_UPDATED,this.onAudioTracksUpdated,this),e.off(ve.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.off(ve.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.off(ve.ERROR,this.onError,this),e.off(ve.BUFFER_RESET,this.onBufferReset,this),e.off(ve.BUFFER_CREATED,this.onBufferCreated,this),e.off(ve.BUFFER_FLUSHING,this.onBufferFlushing,this),e.off(ve.BUFFER_FLUSHED,this.onBufferFlushed,this),e.off(ve.INIT_PTS_FOUND,this.onInitPtsFound,this),e.off(ve.FRAG_BUFFERED,this.onFragBuffered,this)},t.onInitPtsFound=function(e,t){var i=t.frag,n=t.id,r=t.initPTS,o=t.timescale;if("main"===n){var a=i.cc;this.initPTS[i.cc]={"baseTime":r,"timescale":o},this.log("InitPTS for cc: "+a+" found from main: "+r),this.videoTrackCC=a,this.state===On&&this.tick()}},t.startLoad=function(e){if(!this.levels)return this.startPosition=e,void(this.state=s);var t=this.lastCurrentTime;this.stopLoad(),this.setInterval(100),t>0&&-1===e?(this.log("Override startPosition with lastCurrentTime @"+t.toFixed(3)),e=t,this.state=b):(this.loadedmetadata=!1,this.state=Sn),this.nextLoadPosition=this.startPosition=this.lastCurrentTime=e,this.tick()},t.doTick=function(){switch(this.state){case b:this.doTickIdle();break;case Sn:var e,t=this.levels,i=this.trackId,n=null==t||null==(e=t[i])?void 0:e.details;if(n){if(this.waitForCdnTuneIn(n))break;this.state=On}break;case Tn:var r,o=performance.now(),a=this.retryDate;if(!a||o>=a||null!=(r=this.media)&&r.seeking){var s=this.levels,l=this.trackId;this.log("RetryDate reached, switch back to IDLE state"),this.resetStartWhenNotLoaded((null==s?void 0:s[l])||null),this.state=b}break;case On:var u=this.waitingData;if(u){var c=u.frag,d=u.part,h=u.cache,f=u.complete;if(void 0!==this.initPTS[c.cc]){this.waitingData=null,this.waitingVideoCC=-1,this.state=xn;var p={"frag":c,"part":d,"payload":h.flush(),"networkDetails":null};this._handleFragmentLoadProgress(p),f&&m.prototype._handleFragmentLoadComplete.call(this,p)}else if(this.videoTrackCC!==this.waitingVideoCC)this.log("Waiting fragment cc ("+c.cc+") cancelled because video is at cc "+this.videoTrackCC),this.clearWaitingFragment();else{var g=this.getLoadPosition(),v=T.bufferInfo(this.mediaBuffer,g,this.config.maxBufferHole);Ci(v.end,this.config.maxFragLookUpTolerance,c)<0&&(this.log("Waiting fragment cc ("+c.cc+") @ "+c.start+" cancelled because another fragment at "+v.end+" is needed"),this.clearWaitingFragment())}}else this.state=b}this.onTickEnd()},t.clearWaitingFragment=function(){var e=this.waitingData;e&&(this.fragmentTracker.removeFragment(e.frag),this.waitingData=null,this.waitingVideoCC=-1,this.state=b)},t.resetLoadingState=function(){this.clearWaitingFragment(),m.prototype.resetLoadingState.call(this)},t.onTickEnd=function(){var e=this.media;null!=e&&e.readyState&&(this.lastCurrentTime=e.currentTime)},t.doTickIdle=function(){var e=this.hls,t=this.levels,i=this.media,n=this.trackId,r=e.config;if((i||!this.startFragRequested&&r.startFragPrefetch)&&null!=t&&t[n]){var o=t[n],a=o.details;if(!a||a.live&&this.levelLastLoaded!==o||this.waitForCdnTuneIn(a))this.state=Sn;else{var s=this.mediaBuffer?this.mediaBuffer:this.media;this.bufferFlushed&&s&&(this.bufferFlushed=!1,this.afterBufferFlushed(s,M,I));var l=this.getFwdBufferInfo(s,I);if(null!==l){var u=this.bufferedTrack,c=this.switchingTrack;if(!c&&this._streamEnded(l,a))return e.trigger(ve.BUFFER_EOS,{"type":"audio"}),void(this.state=Cn);var d=this.getFwdBufferInfo(this.videoBuffer?this.videoBuffer:this.media,x),h=l.len,f=this.getMaxBufferLength(null==d?void 0:d.len),p=a.fragments,g=p[0].start,v=this.flushing?this.getLoadPosition():l.end;if(c&&i){var m=this.getLoadPosition();u&&!Gr(c.attrs,u.attrs)&&(v=m),a.PTSKnown&&m<g&&(l.end>g||l.nextStart)&&(this.log("Alt audio track ahead of main track, seek to start of alt audio track"),i.currentTime=g+.05)}if(!(h>=f&&!c&&v<p[p.length-1].start)){var y=this.getNextFragment(v,a),b=!1;if(y&&this.isLoopLoading(y,v)&&(b=!!y.gap,y=this.getNextFragmentLoopLoading(y,a,l,x,f)),y){var _=d&&y.start>d.end+a.targetduration;if(_||(null==d||!d.len)&&l.len){var w=this.getAppendedFrag(y.start,x);if(null===w)return;if(b||(b=!!w.gap||!!_&&0===d.len),_&&!b||b&&l.nextStart&&l.nextStart<w.end)return}this.loadFragment(y,o,v)}else this.bufferFlushed=!0}}}}},t.getMaxBufferLength=function(e){var t=m.prototype.getMaxBufferLength.call(this);return e?Math.min(Math.max(t,e),this.config.maxMaxBufferLength):t},t.onMediaDetaching=function(){this.videoBuffer=null,this.bufferFlushed=this.flushing=!1,m.prototype.onMediaDetaching.call(this)},t.onAudioTracksUpdated=function(e,t){var i=t.audioTracks;this.resetTransmuxer(),this.levels=i.map(function(e){return new di(e)})},t.onAudioTrackSwitching=function(e,t){var i=!!t.url;this.trackId=t.id;var n=this.fragCurrent;n&&(n.abortRequests(),this.removeUnbufferedFrags(n.start)),this.resetLoadingState(),i?this.setInterval(100):this.resetTransmuxer(),i?(this.switchingTrack=t,this.state=b,this.flushAudioIfNeeded(t)):(this.switchingTrack=null,this.bufferedTrack=t,this.state=s),this.tick()},t.onManifestLoading=function(){this.fragmentTracker.removeAllFragments(),this.startPosition=this.lastCurrentTime=0,this.bufferFlushed=this.flushing=!1,this.levels=this.mainDetails=this.waitingData=this.bufferedTrack=this.cachedTrackLoadedData=this.switchingTrack=null,this.startFragRequested=!1,this.trackId=this.videoTrackCC=this.waitingVideoCC=-1},t.onLevelLoaded=function(e,t){this.mainDetails=t.details,null!==this.cachedTrackLoadedData&&(this.hls.trigger(ve.AUDIO_TRACK_LOADED,this.cachedTrackLoadedData),this.cachedTrackLoadedData=null)},t.onAudioTrackLoaded=function(e,t){var i;if(null!=this.mainDetails){var n=this.levels,r=t.details,o=t.id;if(n){this.log("Audio track "+o+" loaded ["+r.startSN+","+r.endSN+"]"+(r.lastPartSn?"[part-"+r.lastPartSn+"-"+r.lastPartIndex+"]":"")+",duration:"+r.totalduration);var a=n[o],s=0;if(r.live||null!=(i=a.details)&&i.live){this.checkLiveUpdate(r);var l,u=this.mainDetails;if(r.deltaUpdateFailed||!u)return;!a.details&&r.hasProgramDateTime&&u.hasProgramDateTime?(dn(r,u),s=r.fragments[0].start):s=this.alignPlaylists(r,a.details,null==(l=this.levelLastLoaded)?void 0:l.details)}a.details=r,this.levelLastLoaded=a,this.startFragRequested||!this.mainDetails&&r.live||this.setStartPosition(this.mainDetails||r,s),this.state!==Sn||this.waitForCdnTuneIn(r)||(this.state=b),this.tick()}else this.warn("Audio tracks were reset while loading level "+o)}else this.cachedTrackLoadedData=t},t._handleFragmentLoadProgress=function(e){var t,i=e.frag,n=e.part,r=e.payload,o=this.config,a=this.trackId,s=this.levels;if(s){var l=s[a];if(l){var u=l.details;if(!u)return this.warn("Audio track details undefined on fragment load progress"),void this.removeUnbufferedFrags(i.start);var c=o.defaultAudioCodec||l.audioCodec||"mp4a.40.2",d=this.transmuxer;d||(d=this.transmuxer=new zr(this.hls,I,this._handleTransmuxComplete.bind(this),this._handleTransmuxerFlush.bind(this)));var h=this.initPTS[i.cc],f=null==(t=i.initSegment)?void 0:t.data;if(void 0!==h){var p=n?n.index:-1,g=-1!==p,v=new an(i.level,i.sn,i.stats.chunkCount,r.byteLength,p,g);d.push(r,f,c,"",i,n,u.totalduration,!1,v,h)}else this.log("Unknown video PTS for cc "+i.cc+", waiting for video PTS before demuxing audio frag "+i.sn+" of ["+u.startSN+" ,"+u.endSN+"],track "+a),(this.waitingData=this.waitingData||{"frag":i,"part":n,"cache":new In,"complete":!1}).cache.push(new Uint8Array(r)),this.waitingVideoCC=this.videoTrackCC,this.state=On}else this.warn("Audio track is undefined on fragment load progress")}else this.warn("Audio tracks were reset while fragment load was in progress. Fragment "+i.sn+" of level "+i.level+" will not be buffered")},t._handleFragmentLoadComplete=function(e){this.waitingData?this.waitingData.complete=!0:m.prototype._handleFragmentLoadComplete.call(this,e)},t.onBufferReset=function(){this.mediaBuffer=this.videoBuffer=null,this.loadedmetadata=!1},t.onBufferCreated=function(e,t){var i=t.tracks.audio;i&&(this.mediaBuffer=i.buffer||null),t.tracks.video&&(this.videoBuffer=t.tracks.video.buffer||null)},t.onFragBuffered=function(e,t){var i=t.frag,n=t.part;if(i.type===I)if(this.fragContextChanged(i))this.warn("Fragment "+i.sn+(n?" p: "+n.index:"")+" of level "+i.level+" finished buffering, but was aborted. state: "+this.state+", audioSwitch: "+(this.switchingTrack?this.switchingTrack.name:"false"));else{if("initSegment"!==i.sn){this.fragPrevious=i;var r=this.switchingTrack;r&&(this.bufferedTrack=r,this.switchingTrack=null,this.hls.trigger(ve.AUDIO_TRACK_SWITCHED,k({},r)))}this.fragBufferedComplete(i,n)}else if(!this.loadedmetadata&&i.type===x){var o=this.videoBuffer||this.media;o&&T.getBuffered(o).length&&(this.loadedmetadata=!0)}},t.onError=function(e,t){var i;if(t.fatal)this.state=An;else switch(t.details){case ye.FRAG_GAP:case ye.FRAG_PARSING_ERROR:case ye.FRAG_DECRYPT_ERROR:case ye.FRAG_LOAD_ERROR:case ye.FRAG_LOAD_TIMEOUT:case ye.KEY_LOAD_ERROR:case ye.KEY_LOAD_TIMEOUT:this.onFragmentOrKeyLoadError(I,t);break;case ye.AUDIO_TRACK_LOAD_ERROR:case ye.AUDIO_TRACK_LOAD_TIMEOUT:case ye.LEVEL_PARSING_ERROR:t.levelRetry||this.state!==Sn||(null==(i=t.context)?void 0:i.type)!==w||(this.state=b);break;case ye.BUFFER_APPEND_ERROR:case ye.BUFFER_FULL_ERROR:if(!t.parent||"audio"!==t.parent)return;if(t.details===ye.BUFFER_APPEND_ERROR)return void this.resetLoadingState();this.reduceLengthAndFlushBuffer(t)&&(this.bufferedTrack=null,m.prototype.flushMainBuffer.call(this,0,Number.POSITIVE_INFINITY,"audio"));break;case ye.INTERNAL_EXCEPTION:this.recoverWorkerError(t)}},t.onBufferFlushing=function(e,t){t.type!==C&&(this.flushing=!0)},t.onBufferFlushed=function(e,t){var i=t.type;if(i!==C){this.flushing=!1,this.bufferFlushed=!0,this.state===Cn&&(this.state=b);var n=this.mediaBuffer||this.media;n&&(this.afterBufferFlushed(n,i,I),this.tick())}},t._handleTransmuxComplete=function(e){var t,i="audio",n=this.hls,r=e.remuxResult,o=e.chunkMeta,a=this.getCurrentContext(o);if(a){var s=a.frag,l=a.part,u=a.level,c=u.details,d=r.audio,h=r.text,f=r.id3,p=r.initSegment;if(!this.fragContextChanged(s)&&c){if(this.state=kn,this.switchingTrack&&d&&this.completeAudioSwitch(this.switchingTrack),null!=p&&p.tracks){var g=s.initSegment||s;this._bufferInitSegment(u,p.tracks,g,o),n.trigger(ve.FRAG_PARSING_INIT_SEGMENT,{"frag":g,"id":i,"tracks":p.tracks})}if(d){var v=d.startPTS,m=d.endPTS,y=d.startDTS,b=d.endDTS;l&&(l.elementaryStreams[M]={"startPTS":v,"endPTS":m,"startDTS":y,"endDTS":b}),s.setElementaryStreamInfo(M,v,m,y,b),this.bufferFragmentData(d,s,l,o)}if(null!=f&&null!=(t=f.samples)&&t.length){var _=ge({"id":i,"frag":s,"details":c},f);n.trigger(ve.FRAG_PARSING_METADATA,_)}if(h){var w=ge({"id":i,"frag":s,"details":c},h);n.trigger(ve.FRAG_PARSING_USERDATA,w)}}else this.fragmentTracker.removeFragment(s)}else this.resetWhenMissingContext(o)},t._bufferInitSegment=function(e,t,i,n){if(this.state===kn){t.video&&delete t.video;var r=t.audio;if(r){r.id="audio";var o=e.audioCodec;this.log("Init audio buffer, container:"+r.container+", codecs[level/parsed]=["+o+"/"+r.codec+"]"),o&&1===o.split(",").length&&(r.levelCodec=o),this.hls.trigger(ve.BUFFER_CODECS,t);var a=r.initSegment;if(null!=a&&a.byteLength){var s={"type":"audio","frag":i,"part":null,"chunkMeta":n,"parent":i.type,"data":a};this.hls.trigger(ve.BUFFER_APPENDING,s)}this.tickImmediate()}}},t.loadFragment=function(e,t,i){var n,r=this.fragmentTracker.getState(e);if(this.fragCurrent=e,this.switchingTrack||r===Yi||r===Ji)if("initSegment"===e.sn)this._loadInitSegment(e,t);else if(null!=(n=t.details)&&n.live&&!this.initPTS[e.cc]){this.log("Waiting for video PTS in continuity counter "+e.cc+" of live stream before loading audio fragment "+e.sn+" of level "+this.trackId),this.state=On;var o=this.mainDetails;o&&o.fragments[0].start!==t.details.fragments[0].start&&dn(t.details,o)}else this.startFragRequested=!0,m.prototype.loadFragment.call(this,e,t,i);else this.clearTrackerIfNeeded(e)},t.flushAudioIfNeeded=function(e){var t=this.media,i=this.bufferedTrack,n=null==i?void 0:i.attrs,r=e.attrs;t&&n&&(n.CHANNELS!==r.CHANNELS||i.name!==e.name||i.lang!==e.lang)&&(this.log("Switching audio track : flushing all audio"),m.prototype.flushMainBuffer.call(this,0,Number.POSITIVE_INFINITY,"audio"),this.bufferedTrack=null)},t.completeAudioSwitch=function(e){var t=this.hls;this.flushAudioIfNeeded(e),this.bufferedTrack=e,this.switchingTrack=null,t.trigger(ve.AUDIO_TRACK_SWITCHED,k({},e))},e}(Pn),Kr=function(o){function e(e){var t;return(t=o.call(this,e,"[audio-track-controller]")||this).tracks=[],t.groupIds=null,t.tracksInGroup=[],t.trackId=-1,t.currentTrack=null,t.selectDefaultTrack=!0,t.registerListeners(),t}u(e,o);var t=e.prototype;return t.registerListeners=function(){var e=this.hls;e.on(ve.MANIFEST_LOADING,this.onManifestLoading,this),e.on(ve.MANIFEST_PARSED,this.onManifestParsed,this),e.on(ve.LEVEL_LOADING,this.onLevelLoading,this),e.on(ve.LEVEL_SWITCHING,this.onLevelSwitching,this),e.on(ve.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.on(ve.ERROR,this.onError,this)},t.unregisterListeners=function(){var e=this.hls;e.off(ve.MANIFEST_LOADING,this.onManifestLoading,this),e.off(ve.MANIFEST_PARSED,this.onManifestParsed,this),e.off(ve.LEVEL_LOADING,this.onLevelLoading,this),e.off(ve.LEVEL_SWITCHING,this.onLevelSwitching,this),e.off(ve.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.off(ve.ERROR,this.onError,this)},t.destroy=function(){this.unregisterListeners(),this.tracks.length=0,this.tracksInGroup.length=0,this.currentTrack=null,o.prototype.destroy.call(this)},t.onManifestLoading=function(){this.tracks=[],this.tracksInGroup=[],this.groupIds=null,this.currentTrack=null,this.trackId=-1,this.selectDefaultTrack=!0},t.onManifestParsed=function(e,t){this.tracks=t.audioTracks||[]},t.onAudioTrackLoaded=function(e,t){var i=t.id,n=t.groupId,r=t.details,o=this.tracksInGroup[i];if(o&&o.groupId===n){var a=o.details;o.details=t.details,this.log("Audio track "+i+' "'+o.name+'" lang:'+o.lang+" group:"+n+" loaded ["+r.startSN+"-"+r.endSN+"]"),i===this.trackId&&this.playlistLoaded(i,t,a)}else this.warn("Audio track with id:"+i+" and group:"+n+" not found in active group "+(null==o?void 0:o.groupId))},t.onLevelLoading=function(e,t){this.switchLevel(t.level)},t.onLevelSwitching=function(e,t){this.switchLevel(t.level)},t.switchLevel=function(e){var t=this.hls.levels[e];if(t){var i=t.audioGroups||null,n=this.groupIds,r=this.currentTrack;if(!i||(null==n?void 0:n.length)!==(null==i?void 0:i.length)||null!=i&&i.some(function(e){return-1===(null==n?void 0:n.indexOf(e))})){this.groupIds=i,this.trackId=-1,this.currentTrack=null;var o=this.tracks.filter(function(e){return!i||-1!==i.indexOf(e.groupId)});if(o.length)this.selectDefaultTrack&&!o.some(function(e){return e.default})&&(this.selectDefaultTrack=!1),o.forEach(function(e,t){e.id=t});else if(!r&&!this.tracksInGroup.length)return;this.tracksInGroup=o;var a=this.hls.config.audioPreference;if(!r&&a){var s=p(a,o,qi);if(s>-1)r=o[s];else{var l=p(a,this.tracks);r=this.tracks[l]}}var u=this.findTrackId(r);-1===u&&r&&(u=this.findTrackId(null));var c={"audioTracks":o};this.log("Updating audio tracks, "+o.length+" track(s) found in group(s): "+(null==i?void 0:i.join(","))),this.hls.trigger(ve.AUDIO_TRACKS_UPDATED,c);var d=this.trackId;if(-1!==u&&-1===d)this.setAudioTrack(u);else if(o.length&&-1===d){var h,f=new Error("No audio track selected for current audio group-ID(s): "+(null==(h=this.groupIds)?void 0:h.join(","))+" track count: "+o.length);this.warn(f.message),this.hls.trigger(ve.ERROR,{"type":me.MEDIA_ERROR,"details":ye.AUDIO_TRACK_LOAD_ERROR,"fatal":!0,"error":f})}}else this.shouldReloadPlaylist(r)&&this.setAudioTrack(this.trackId)}},t.onError=function(e,t){!t.fatal&&t.context&&(t.context.type!==w||t.context.id!==this.trackId||this.groupIds&&-1===this.groupIds.indexOf(t.context.groupId)||(this.requestScheduled=-1,this.checkRetry(t)))},t.setAudioOption=function(e){var t=this.hls;if(t.config.audioPreference=e,e){var i=this.allAudioTracks;if(this.selectDefaultTrack=!1,i.length){var n=this.currentTrack;if(n&&Vi(e,n,qi))return n;var r=p(e,this.tracksInGroup,qi);if(r>-1){var o=this.tracksInGroup[r];return this.setAudioTrack(r),o}if(n){var a=t.loadLevel;-1===a&&(a=t.firstAutoLevel);var s=function(n,e,r,t,o){var i=e[t],a=e.reduce(function(e,t,i){var n=t.uri;return(e[n]||(e[n]=[])).push(i),e},{})[i.uri];a.length>1&&(t=Math.max.apply(Math,a));var s=i.videoRange,l=i.frameRate,u=i.codecSet.substring(0,4),c=Ki(e,t,function(e){if(e.videoRange!==s||e.frameRate!==l||e.codecSet.substring(0,4)!==u)return!1;var t=e.audioGroups,i=r.filter(function(e){return!t||-1!==t.indexOf(e.groupId)});return p(n,i,o)>-1});return c>-1?c:Ki(e,t,function(e){var t=e.audioGroups,i=r.filter(function(e){return!t||-1!==t.indexOf(e.groupId)});return p(n,i,o)>-1})}(e,t.levels,i,a,qi);if(-1===s)return null;t.nextLoadLevel=s}if(e.channels||e.audioCodec){var l=p(e,i);if(l>-1)return i[l]}}}return null},t.setAudioTrack=function(e){var t=this.tracksInGroup;if(e<0||e>=t.length)this.warn("Invalid audio track id: "+e);else{this.clearTimer(),this.selectDefaultTrack=!1;var i=this.currentTrack,n=t[e],r=n.details&&!n.details.live;if(!(e===this.trackId&&n===i&&r||(this.log("Switching to audio-track "+e+' "'+n.name+'" lang:'+n.lang+" group:"+n.groupId+" channels:"+n.channels),this.trackId=e,this.currentTrack=n,this.hls.trigger(ve.AUDIO_TRACK_SWITCHING,k({},n)),r))){var o=this.switchParams(n.url,null==i?void 0:i.details,n.details);this.loadPlaylist(o)}}},t.findTrackId=function(e){for(var t=this.tracksInGroup,i=0;i<t.length;i++){var n=t[i];if((!this.selectDefaultTrack||n.default)&&(!e||Vi(e,n,qi)))return i}if(e){for(var r=e.name,o=e.lang,a=e.assocLang,s=e.characteristics,l=e.audioCodec,u=e.channels,c=0;c<t.length;c++)if(Vi({"name":r,"lang":o,"assocLang":a,"characteristics":s,"audioCodec":l,"channels":u},t[c],qi))return c;for(var d=0;d<t.length;d++){var h=t[d];if(Gr(e.attrs,h.attrs,["LANGUAGE","ASSOC-LANGUAGE","CHARACTERISTICS"]))return d}for(var f=0;f<t.length;f++){var p=t[f];if(Gr(e.attrs,p.attrs,["LANGUAGE"]))return f}}return-1},t.loadPlaylist=function(e){var t=this.currentTrack;if(this.shouldLoadPlaylist(t)&&t){o.prototype.loadPlaylist.call(this);var i=t.id,n=t.groupId,r=t.url;if(e)try{r=e.addDirectives(r)}catch(e){this.warn("Could not construct new URL with HLS Delivery Directives: "+e)}this.log("loading audio-track playlist "+i+' "'+t.name+'" lang:'+t.lang+" group:"+n),this.clearTimer(),this.hls.trigger(ve.AUDIO_TRACK_LOADING,{"url":r,"id":i,"groupId":n,"deliveryDirectives":e||null})}},l(e,[{"key":"allAudioTracks","get":function(){return this.tracks}},{"key":"audioTracks","get":function(){return this.tracksInGroup}},{"key":"audioTrack","get":function(){return this.trackId},"set":function(e){this.selectDefaultTrack=!1,this.setAudioTrack(e)}}]),e}(Ni),Zr=function(r){function e(e,t,i){var n;return(n=r.call(this,e,t,i,"[subtitle-stream-controller]",Ut)||this).currentTrackId=-1,n.tracksBuffered=[],n.mainDetails=null,n._registerListeners(),n}u(e,r);var t=e.prototype;return t.onHandlerDestroying=function(){this._unregisterListeners(),r.prototype.onHandlerDestroying.call(this),this.mainDetails=null},t._registerListeners=function(){var e=this.hls;e.on(ve.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(ve.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(ve.MANIFEST_LOADING,this.onManifestLoading,this),e.on(ve.LEVEL_LOADED,this.onLevelLoaded,this),e.on(ve.ERROR,this.onError,this),e.on(ve.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.on(ve.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),e.on(ve.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.on(ve.SUBTITLE_FRAG_PROCESSED,this.onSubtitleFragProcessed,this),e.on(ve.BUFFER_FLUSHING,this.onBufferFlushing,this),e.on(ve.FRAG_BUFFERED,this.onFragBuffered,this)},t._unregisterListeners=function(){var e=this.hls;e.off(ve.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(ve.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(ve.MANIFEST_LOADING,this.onManifestLoading,this),e.off(ve.LEVEL_LOADED,this.onLevelLoaded,this),e.off(ve.ERROR,this.onError,this),e.off(ve.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.off(ve.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),e.off(ve.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.off(ve.SUBTITLE_FRAG_PROCESSED,this.onSubtitleFragProcessed,this),e.off(ve.BUFFER_FLUSHING,this.onBufferFlushing,this),e.off(ve.FRAG_BUFFERED,this.onFragBuffered,this)},t.startLoad=function(e){this.stopLoad(),this.state=b,this.setInterval(500),this.nextLoadPosition=this.startPosition=this.lastCurrentTime=e,this.tick()},t.onManifestLoading=function(){this.mainDetails=null,this.fragmentTracker.removeAllFragments()},t.onMediaDetaching=function(){this.tracksBuffered=[],r.prototype.onMediaDetaching.call(this)},t.onLevelLoaded=function(e,t){this.mainDetails=t.details},t.onSubtitleFragProcessed=function(e,t){var i=t.frag,n=t.success;if(this.fragPrevious=i,this.state=b,n){var r=this.tracksBuffered[this.currentTrackId];if(r){for(var o,a=i.start,s=0;s<r.length;s++)if(a>=r[s].start&&a<=r[s].end){o=r[s];break}var l=i.start+i.duration;o?o.end=l:(o={"start":a,"end":l},r.push(o)),this.fragmentTracker.fragBuffered(i),this.fragBufferedComplete(i,null)}}},t.onBufferFlushing=function(e,t){var i=t.startOffset,n=t.endOffset;if(0===i&&n!==Number.POSITIVE_INFINITY){var r=n-1;if(r<=0)return;t.endOffsetSubtitles=Math.max(0,r),this.tracksBuffered.forEach(function(e){for(var t=0;t<e.length;)if(e[t].end<=r)e.shift();else{if(!(e[t].start<r))break;e[t].start=r,t++}}),this.fragmentTracker.removeFragmentsInRange(i,r,Ut)}},t.onFragBuffered=function(e,t){var i;this.loadedmetadata||t.frag.type!==x||null!=(i=this.media)&&i.buffered.length&&(this.loadedmetadata=!0)},t.onError=function(e,t){var i=t.frag;(null==i?void 0:i.type)===Ut&&(t.details===ye.FRAG_GAP&&this.fragmentTracker.fragBuffered(i,!0),this.fragCurrent&&this.fragCurrent.abortRequests(),this.state!==s&&(this.state=b))},t.onSubtitleTracksUpdated=function(e,t){var i=this,n=t.subtitleTracks;this.levels&&Wr(this.levels,n)?this.levels=n.map(function(e){return new di(e)}):(this.tracksBuffered=[],this.levels=n.map(function(e){var t=new di(e);return i.tracksBuffered[t.id]=[],t}),this.fragmentTracker.removeFragmentsInRange(0,Number.POSITIVE_INFINITY,Ut),this.fragPrevious=null,this.mediaBuffer=null)},t.onSubtitleTrackSwitch=function(e,t){var i;if(this.currentTrackId=t.id,null!=(i=this.levels)&&i.length&&-1!==this.currentTrackId){var n=this.levels[this.currentTrackId];null!=n&&n.details?this.mediaBuffer=this.mediaBufferTimeRanges:this.mediaBuffer=null,n&&this.setInterval(500)}else this.clearInterval()},t.onSubtitleTrackLoaded=function(e,t){var i,n=this.currentTrackId,r=this.levels,o=t.details,a=t.id;if(r){var s=r[a];if(!(a>=r.length)&&s){this.log("Subtitle track "+a+" loaded ["+o.startSN+","+o.endSN+"]"+(o.lastPartSn?"[part-"+o.lastPartSn+"-"+o.lastPartIndex+"]":"")+",duration:"+o.totalduration),this.mediaBuffer=this.mediaBufferTimeRanges;var l=0;if(o.live||null!=(i=s.details)&&i.live){var u=this.mainDetails;if(o.deltaUpdateFailed||!u)return;var c,d=u.fragments[0];s.details?0===(l=this.alignPlaylists(o,s.details,null==(c=this.levelLastLoaded)?void 0:c.details))&&d&&mi(o,l=d.start):o.hasProgramDateTime&&u.hasProgramDateTime?(dn(o,u),l=o.fragments[0].start):d&&mi(o,l=d.start)}s.details=o,this.levelLastLoaded=s,a===n&&(this.startFragRequested||!this.mainDetails&&o.live||this.setStartPosition(this.mainDetails||o,l),this.tick(),o.live&&!this.fragCurrent&&this.media&&this.state===b&&(Ri(null,o.fragments,this.media.currentTime,0)||(this.warn("Subtitle playlist not aligned with playback"),s.details=void 0)))}}else this.warn("Subtitle tracks were reset while loading level "+a)},t._handleFragmentLoadComplete=function(e){var t=this,i=e.frag,n=e.payload,r=i.decryptdata,o=this.hls;if(!this.fragContextChanged(i)&&n&&n.byteLength>0&&null!=r&&r.key&&r.iv&&"AES-128"===r.method){var a=performance.now();this.decrypter.decrypt(new Uint8Array(n),r.key.buffer,r.iv.buffer).catch(function(e){throw o.trigger(ve.ERROR,{"type":me.MEDIA_ERROR,"details":ye.FRAG_DECRYPT_ERROR,"fatal":!1,"error":e,"reason":e.message,"frag":i}),e}).then(function(e){var t=performance.now();o.trigger(ve.FRAG_DECRYPTED,{"frag":i,"payload":e,"stats":{"tstart":a,"tdecrypt":t}})}).catch(function(e){t.warn(e.name+": "+e.message),t.state=b})}},t.doTick=function(){if(this.media){if(this.state===b){var e=this.currentTrackId,t=this.levels,i=null==t?void 0:t[e];if(!i||!t.length||!i.details)return;var n=this.config,r=this.getLoadPosition(),o=T.bufferedInfo(this.tracksBuffered[this.currentTrackId]||[],r,n.maxBufferHole),a=o.end,s=o.len,l=this.getFwdBufferInfo(this.media,x),u=i.details;if(s>this.getMaxBufferLength(null==l?void 0:l.len)+u.levelTargetDuration)return;var c=u.fragments,d=c.length,h=u.edge,f=null,p=this.fragPrevious;if(a<h){var g=n.maxFragLookUpTolerance,v=a>h-g?0:g;!(f=Ri(p,c,Math.max(c[0].start,a),v))&&p&&p.start<c[0].start&&(f=c[0])}else f=c[d-1];if(!f)return;if("initSegment"!==(f=this.mapToInitFragWhenRequired(f)).sn){var m=c[f.sn-u.startSN-1];m&&m.cc===f.cc&&this.fragmentTracker.getState(m)===Yi&&(f=m)}this.fragmentTracker.getState(f)===Yi&&this.loadFragment(f,i,a)}}else this.state=b},t.getMaxBufferLength=function(e){var t=r.prototype.getMaxBufferLength.call(this);return e?Math.max(t,e):t},t.loadFragment=function(e,t,i){this.fragCurrent=e,"initSegment"===e.sn?this._loadInitSegment(e,t):(this.startFragRequested=!0,r.prototype.loadFragment.call(this,e,t,i))},l(e,[{"key":"mediaBufferTimeRanges","get":function(){return new Xr(this.tracksBuffered[this.currentTrackId]||[])}}]),e}(Pn),Xr=function(n){this.buffered=void 0;var t=function(e,t,i){if((t>>>=0)>i-1)throw new DOMException("Failed to execute '"+e+"' on 'TimeRanges': The index provided ("+t+") is greater than the maximum bound ("+i+")");return n[t][e]};this.buffered={get"length"(){return n.length},"end":function(e){return t("end",e,n.length)},"start":function(e){return t("start",e,n.length)}}},Yr=function(o){function e(e){var r;return(r=o.call(this,e,"[subtitle-track-controller]")||this).media=null,r.tracks=[],r.groupIds=null,r.tracksInGroup=[],r.trackId=-1,r.currentTrack=null,r.selectDefaultTrack=!0,r.queuedDefaultTrack=-1,r.asyncPollTrackChange=function(){return r.pollTrackChange(0)},r.useTextTrackPolling=!1,r.subtitlePollingInterval=-1,r._subtitleDisplay=!0,r.onTextTracksChanged=function(){if(r.useTextTrackPolling||self.clearInterval(r.subtitlePollingInterval),r.media&&r.hls.config.renderTextTracksNatively){for(var e=null,t=Kt(r.media.textTracks),i=0;i<t.length;i++)if("hidden"===t[i].mode)e=t[i];else if("showing"===t[i].mode){e=t[i];break}var n=r.findTrackForTextTrack(e);r.subtitleTrack!==n&&r.setSubtitleTrack(n)}},r.registerListeners(),r}u(e,o);var t=e.prototype;return t.destroy=function(){this.unregisterListeners(),this.tracks.length=0,this.tracksInGroup.length=0,this.currentTrack=null,this.onTextTracksChanged=this.asyncPollTrackChange=null,o.prototype.destroy.call(this)},t.registerListeners=function(){var e=this.hls;e.on(ve.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(ve.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(ve.MANIFEST_LOADING,this.onManifestLoading,this),e.on(ve.MANIFEST_PARSED,this.onManifestParsed,this),e.on(ve.LEVEL_LOADING,this.onLevelLoading,this),e.on(ve.LEVEL_SWITCHING,this.onLevelSwitching,this),e.on(ve.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.on(ve.ERROR,this.onError,this)},t.unregisterListeners=function(){var e=this.hls;e.off(ve.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(ve.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(ve.MANIFEST_LOADING,this.onManifestLoading,this),e.off(ve.MANIFEST_PARSED,this.onManifestParsed,this),e.off(ve.LEVEL_LOADING,this.onLevelLoading,this),e.off(ve.LEVEL_SWITCHING,this.onLevelSwitching,this),e.off(ve.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.off(ve.ERROR,this.onError,this)},t.onMediaAttached=function(e,t){this.media=t.media,this.media&&(this.queuedDefaultTrack>-1&&(this.subtitleTrack=this.queuedDefaultTrack,this.queuedDefaultTrack=-1),this.useTextTrackPolling=!(this.media.textTracks&&"onchange"in this.media.textTracks),this.useTextTrackPolling?this.pollTrackChange(500):this.media.textTracks.addEventListener("change",this.asyncPollTrackChange))},t.pollTrackChange=function(e){self.clearInterval(this.subtitlePollingInterval),this.subtitlePollingInterval=self.setInterval(this.onTextTracksChanged,e)},t.onMediaDetaching=function(){this.media&&(self.clearInterval(this.subtitlePollingInterval),this.useTextTrackPolling||this.media.textTracks.removeEventListener("change",this.asyncPollTrackChange),this.trackId>-1&&(this.queuedDefaultTrack=this.trackId),Kt(this.media.textTracks).forEach(function(e){Vt(e)}),this.subtitleTrack=-1,this.media=null)},t.onManifestLoading=function(){this.tracks=[],this.groupIds=null,this.tracksInGroup=[],this.trackId=-1,this.currentTrack=null,this.selectDefaultTrack=!0},t.onManifestParsed=function(e,t){this.tracks=t.subtitleTracks},t.onSubtitleTrackLoaded=function(e,t){var i=t.id,n=t.groupId,r=t.details,o=this.tracksInGroup[i];if(o&&o.groupId===n){var a=o.details;o.details=t.details,this.log("Subtitle track "+i+' "'+o.name+'" lang:'+o.lang+" group:"+n+" loaded ["+r.startSN+"-"+r.endSN+"]"),i===this.trackId&&this.playlistLoaded(i,t,a)}else this.warn("Subtitle track with id:"+i+" and group:"+n+" not found in active group "+(null==o?void 0:o.groupId))},t.onLevelLoading=function(e,t){this.switchLevel(t.level)},t.onLevelSwitching=function(e,t){this.switchLevel(t.level)},t.switchLevel=function(e){var t=this.hls.levels[e];if(t){var i=t.subtitleGroups||null,n=this.groupIds,r=this.currentTrack;if(!i||(null==n?void 0:n.length)!==(null==i?void 0:i.length)||null!=i&&i.some(function(e){return-1===(null==n?void 0:n.indexOf(e))})){this.groupIds=i,this.trackId=-1,this.currentTrack=null;var o=this.tracks.filter(function(e){return!i||-1!==i.indexOf(e.groupId)});if(o.length)this.selectDefaultTrack&&!o.some(function(e){return e.default})&&(this.selectDefaultTrack=!1),o.forEach(function(e,t){e.id=t});else if(!r&&!this.tracksInGroup.length)return;this.tracksInGroup=o;var a=this.hls.config.subtitlePreference;if(!r&&a){this.selectDefaultTrack=!1;var s=p(a,o);if(s>-1)r=o[s];else{var l=p(a,this.tracks);r=this.tracks[l]}}var u=this.findTrackId(r);-1===u&&r&&(u=this.findTrackId(null));var c={"subtitleTracks":o};this.log("Updating subtitle tracks, "+o.length+' track(s) found in "'+(null==i?void 0:i.join(","))+'" group-id'),this.hls.trigger(ve.SUBTITLE_TRACKS_UPDATED,c),-1!==u&&-1===this.trackId&&this.setSubtitleTrack(u)}else this.shouldReloadPlaylist(r)&&this.setSubtitleTrack(this.trackId)}},t.findTrackId=function(e){for(var t=this.tracksInGroup,i=this.selectDefaultTrack,n=0;n<t.length;n++){var r=t[n];if((!i||r.default)&&(i||e)&&(!e||Vi(r,e)))return n}if(e){for(var o=0;o<t.length;o++){var a=t[o];if(Gr(e.attrs,a.attrs,["LANGUAGE","ASSOC-LANGUAGE","CHARACTERISTICS"]))return o}for(var s=0;s<t.length;s++){var l=t[s];if(Gr(e.attrs,l.attrs,["LANGUAGE"]))return s}}return-1},t.findTrackForTextTrack=function(e){if(e)for(var t=this.tracksInGroup,i=0;i<t.length;i++)if(Vr(t[i],e))return i;return-1},t.onError=function(e,t){!t.fatal&&t.context&&(t.context.type!==E||t.context.id!==this.trackId||this.groupIds&&-1===this.groupIds.indexOf(t.context.groupId)||this.checkRetry(t))},t.setSubtitleOption=function(e){if(this.hls.config.subtitlePreference=e,e){var t=this.allSubtitleTracks;if(this.selectDefaultTrack=!1,t.length){var i=this.currentTrack;if(i&&Vi(e,i))return i;var n=p(e,this.tracksInGroup);if(n>-1){var r=this.tracksInGroup[n];return this.setSubtitleTrack(n),r}if(i)return null;var o=p(e,t);if(o>-1)return t[o]}}return null},t.loadPlaylist=function(e){o.prototype.loadPlaylist.call(this);var t=this.currentTrack;if(this.shouldLoadPlaylist(t)&&t){var i=t.id,n=t.groupId,r=t.url;if(e)try{r=e.addDirectives(r)}catch(e){this.warn("Could not construct new URL with HLS Delivery Directives: "+e)}this.log("Loading subtitle playlist for id "+i),this.hls.trigger(ve.SUBTITLE_TRACK_LOADING,{"url":r,"id":i,"groupId":n,"deliveryDirectives":e||null})}},t.toggleTrackModes=function(){var e=this.media;if(e){var t,i=Kt(e.textTracks),n=this.currentTrack;if(n&&((t=i.filter(function(e){return Vr(n,e)})[0])||this.warn('Unable to find subtitle TextTrack with name "'+n.name+'" and language "'+n.lang+'"')),[].slice.call(i).forEach(function(e){"disabled"!==e.mode&&e!==t&&(e.mode="disabled")}),t){var r=this.subtitleDisplay?"showing":"hidden";t.mode!==r&&(t.mode=r)}}},t.setSubtitleTrack=function(e){var t=this.tracksInGroup;if(this.media)if(e<-1||e>=t.length||!J(e))this.warn("Invalid subtitle track id: "+e);else{this.clearTimer(),this.selectDefaultTrack=!1;var i=this.currentTrack,n=t[e]||null;if(this.trackId=e,this.currentTrack=n,this.toggleTrackModes(),n){var r=!!n.details&&!n.details.live;if(e!==this.trackId||n!==i||!r){this.log("Switching to subtitle-track "+e+(n?' "'+n.name+'" lang:'+n.lang+" group:"+n.groupId:""));var o=n.id,a=n.groupId,s=void 0===a?"":a,l=n.name,u=n.type,c=n.url;this.hls.trigger(ve.SUBTITLE_TRACK_SWITCH,{"id":o,"groupId":s,"name":l,"type":u,"url":c});var d=this.switchParams(n.url,null==i?void 0:i.details,n.details);this.loadPlaylist(d)}}else this.hls.trigger(ve.SUBTITLE_TRACK_SWITCH,{"id":e})}else this.queuedDefaultTrack=e},l(e,[{"key":"subtitleDisplay","get":function(){return this._subtitleDisplay},"set":function(e){this._subtitleDisplay=e,this.trackId>-1&&this.toggleTrackModes()}},{"key":"allSubtitleTracks","get":function(){return this.tracks}},{"key":"subtitleTracks","get":function(){return this.tracksInGroup}},{"key":"subtitleTrack","get":function(){return this.trackId},"set":function(e){this.selectDefaultTrack=!1,this.setSubtitleTrack(e)}}]),e}(Ni),Qr=function(){function e(e){this.buffers=void 0,this.queues={"video":[],"audio":[],"audiovideo":[]},this.buffers=e}var t=e.prototype;return t.append=function(e,t,i){var n=this.queues[t];n.push(e),1!==n.length||i||this.executeNext(t)},t.insertAbort=function(e,t){this.queues[t].unshift(e),this.executeNext(t)},t.appendBlocker=function(e){var t,i=new Promise(function(e){t=e}),n={"execute":t,"onStart":function(){},"onComplete":function(){},"onError":function(){}};return this.append(n,e),i},t.executeNext=function(e){var t=this.queues[e];if(t.length){var i=t[0];try{i.execute()}catch(t){be.warn('[buffer-operation-queue]: Exception executing "'+e+'" SourceBuffer operation: '+t),i.onError(t);var n=this.buffers[e];null!=n&&n.updating||this.shiftAndExecuteNext(e)}}},t.shiftAndExecuteNext=function(e){this.queues[e].shift(),this.executeNext(e)},t.current=function(e){return this.queues[e][0]},e}(),Jr=/(avc[1234]|hvc1|hev1|dvh[1e]|vp09|av01)(?:\.[^.,]+)+/,eo=function(){function e(e){var i=this;this.details=null,this._objectUrl=null,this.operationQueue=void 0,this.listeners=void 0,this.hls=void 0,this.bufferCodecEventsExpected=0,this._bufferCodecEventsTotal=0,this.media=null,this.mediaSource=null,this.lastMpegAudioChunk=null,this.appendSource=void 0,this.appendErrors={"audio":0,"video":0,"audiovideo":0},this.tracks={},this.pendingTracks={},this.sourceBuffer=void 0,this.log=void 0,this.warn=void 0,this.error=void 0,this._onEndStreaming=function(e){i.hls&&i.hls.pauseBuffering()},this._onStartStreaming=function(e){i.hls&&i.hls.resumeBuffering()},this._onMediaSourceOpen=function(){var e=i.media,t=i.mediaSource;i.log("Media source opened"),e&&(e.removeEventListener("emptied",i._onMediaEmptied),i.updateMediaElementDuration(),i.hls.trigger(ve.MEDIA_ATTACHED,{"media":e,"mediaSource":t})),t&&t.removeEventListener("sourceopen",i._onMediaSourceOpen),i.checkPendingTracks()},this._onMediaSourceClose=function(){i.log("Media source closed")},this._onMediaSourceEnded=function(){i.log("Media source ended")},this._onMediaEmptied=function(){var e=i.mediaSrc,t=i._objectUrl;e!==t&&be.error("Media element src was set while attaching MediaSource ("+t+" > "+e+")")},this.hls=e;var t,n="[buffer-controller]";this.appendSource=(t=pt(e.config.preferManagedMediaSource),"undefined"!=typeof self&&t===self.ManagedMediaSource),this.log=be.log.bind(be,n),this.warn=be.warn.bind(be,n),this.error=be.error.bind(be,n),this._initSourceBuffer(),this.registerListeners()}var t=e.prototype;return t.hasSourceTypes=function(){return this.getSourceBufferTypes().length>0||Object.keys(this.pendingTracks).length>0},t.destroy=function(){this.unregisterListeners(),this.details=null,this.lastMpegAudioChunk=null,this.hls=null},t.registerListeners=function(){var e=this.hls;e.on(ve.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(ve.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(ve.MANIFEST_LOADING,this.onManifestLoading,this),e.on(ve.MANIFEST_PARSED,this.onManifestParsed,this),e.on(ve.BUFFER_RESET,this.onBufferReset,this),e.on(ve.BUFFER_APPENDING,this.onBufferAppending,this),e.on(ve.BUFFER_CODECS,this.onBufferCodecs,this),e.on(ve.BUFFER_EOS,this.onBufferEos,this),e.on(ve.BUFFER_FLUSHING,this.onBufferFlushing,this),e.on(ve.LEVEL_UPDATED,this.onLevelUpdated,this),e.on(ve.FRAG_PARSED,this.onFragParsed,this),e.on(ve.FRAG_CHANGED,this.onFragChanged,this)},t.unregisterListeners=function(){var e=this.hls;e.off(ve.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(ve.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(ve.MANIFEST_LOADING,this.onManifestLoading,this),e.off(ve.MANIFEST_PARSED,this.onManifestParsed,this),e.off(ve.BUFFER_RESET,this.onBufferReset,this),e.off(ve.BUFFER_APPENDING,this.onBufferAppending,this),e.off(ve.BUFFER_CODECS,this.onBufferCodecs,this),e.off(ve.BUFFER_EOS,this.onBufferEos,this),e.off(ve.BUFFER_FLUSHING,this.onBufferFlushing,this),e.off(ve.LEVEL_UPDATED,this.onLevelUpdated,this),e.off(ve.FRAG_PARSED,this.onFragParsed,this),e.off(ve.FRAG_CHANGED,this.onFragChanged,this)},t._initSourceBuffer=function(){this.sourceBuffer={},this.operationQueue=new Qr(this.sourceBuffer),this.listeners={"audio":[],"video":[],"audiovideo":[]},this.appendErrors={"audio":0,"video":0,"audiovideo":0},this.lastMpegAudioChunk=null},t.onManifestLoading=function(){this.bufferCodecEventsExpected=this._bufferCodecEventsTotal=0,this.details=null},t.onManifestParsed=function(e,t){var i=2;(t.audio&&!t.video||!t.altAudio)&&(i=1),this.bufferCodecEventsExpected=this._bufferCodecEventsTotal=i,this.log(this.bufferCodecEventsExpected+" bufferCodec event(s) expected")},t.onMediaAttaching=function(e,t){var i=this.media=t.media,n=pt(this.appendSource);if(i&&n){var r,o=this.mediaSource=new n;this.log("created media source: "+(null==(r=o.constructor)?void 0:r.name)),o.addEventListener("sourceopen",this._onMediaSourceOpen),o.addEventListener("sourceended",this._onMediaSourceEnded),o.addEventListener("sourceclose",this._onMediaSourceClose),this.appendSource&&(o.addEventListener("startstreaming",this._onStartStreaming),o.addEventListener("endstreaming",this._onEndStreaming));var a=this._objectUrl=self.URL.createObjectURL(o);if(this.appendSource)try{i.removeAttribute("src");var s=self.ManagedMediaSource;i.disableRemotePlayback=i.disableRemotePlayback||s&&o instanceof s,to(i),function(e,t){var i=self.document.createElement("source");i.type="video/mp4",i.src=t,e.appendChild(i)}(i,a),i.load()}catch(e){i.src=a}else i.src=a;i.addEventListener("emptied",this._onMediaEmptied)}},t.onMediaDetaching=function(){var e=this.media,t=this.mediaSource,i=this._objectUrl;if(t){if(this.log("media source detaching"),"open"===t.readyState)try{t.endOfStream()}catch(e){this.warn("onMediaDetaching: "+e.message+" while calling endOfStream")}this.onBufferReset(),t.removeEventListener("sourceopen",this._onMediaSourceOpen),t.removeEventListener("sourceended",this._onMediaSourceEnded),t.removeEventListener("sourceclose",this._onMediaSourceClose),this.appendSource&&(t.removeEventListener("startstreaming",this._onStartStreaming),t.removeEventListener("endstreaming",this._onEndStreaming)),e&&(e.removeEventListener("emptied",this._onMediaEmptied),i&&self.URL.revokeObjectURL(i),this.mediaSrc===i?(e.removeAttribute("src"),this.appendSource&&to(e),e.load()):this.warn("media|source.src was changed by a third party - skip cleanup")),this.mediaSource=null,this.media=null,this._objectUrl=null,this.bufferCodecEventsExpected=this._bufferCodecEventsTotal,this.pendingTracks={},this.tracks={}}this.hls.trigger(ve.MEDIA_DETACHED,void 0)},t.onBufferReset=function(){var t=this;this.getSourceBufferTypes().forEach(function(e){t.resetBuffer(e)}),this._initSourceBuffer()},t.resetBuffer=function(e){var t=this.sourceBuffer[e];try{var i;t&&(this.removeBufferListeners(e),this.sourceBuffer[e]=void 0,null!=(i=this.mediaSource)&&i.sourceBuffers.length&&this.mediaSource.removeSourceBuffer(t))}catch(t){this.warn("onBufferReset "+e,t)}},t.onBufferCodecs=function(e,p){var g=this,v=this.getSourceBufferTypes().length,t=Object.keys(p);if(t.forEach(function(e){if(v){var t=g.tracks[e];if(t&&"function"==typeof t.buffer.changeType){var i,n=p[e],r=n.id,o=n.codec,a=n.levelCodec,s=n.container,l=n.metadata,u=Tt(t.codec,t.levelCodec),c=null==u?void 0:u.replace(Jr,"$1"),d=Tt(o,a),h=null==(i=d)?void 0:i.replace(Jr,"$1");if(d&&c!==h){"audio"===e.slice(0,5)&&(d=xt(d,g.appendSource));var f=s+";codecs="+d;g.appendChangeType(e,f),g.log("switching codec "+u+" to "+d),g.tracks[e]={"buffer":t.buffer,"codec":o,"container":s,"levelCodec":a,"metadata":l,"id":r}}}}else g.pendingTracks[e]=p[e]}),!v){var i=Math.max(this.bufferCodecEventsExpected-1,0);this.bufferCodecEventsExpected!==i&&(this.log(i+" bufferCodec event(s) expected "+t.join(",")),this.bufferCodecEventsExpected=i),this.mediaSource&&"open"===this.mediaSource.readyState&&this.checkPendingTracks()}},t.appendChangeType=function(t,i){var n=this,r=this.operationQueue,e={"execute":function(){var e=n.sourceBuffer[t];e&&(n.log("changing "+t+" sourceBuffer type to "+i),e.changeType(i)),r.shiftAndExecuteNext(t)},"onStart":function(){},"onComplete":function(){},"onError":function(e){n.warn("Failed to change "+t+" SourceBuffer type",e)}};r.append(e,t,!!this.pendingTracks[t])},t.onBufferAppending=function(e,t){var r=this,n=this.hls,i=this.operationQueue,o=this.tracks,a=t.data,s=t.type,l=t.frag,u=t.part,c=t.chunkMeta,d=c.buffering[s],h=self.performance.now();d.start=h;var f=l.stats.buffering,p=u?u.stats.buffering:null;0===f.start&&(f.start=h),p&&0===p.start&&(p.start=h);var g=o.audio,v=!1;"audio"===s&&"audio/mpeg"===(null==g?void 0:g.container)&&(v=!this.lastMpegAudioChunk||1===c.id||this.lastMpegAudioChunk.sn!==c.sn,this.lastMpegAudioChunk=c);var m=l.start,y={"execute":function(){if(d.executeStart=self.performance.now(),v){var e=r.sourceBuffer[s];if(e){var t=m-e.timestampOffset;Math.abs(t)>=.1&&(r.log("Updating audio SourceBuffer timestampOffset to "+m+" (delta: "+t+") sn: "+l.sn+")"),e.timestampOffset=m)}}r.appendExecutor(a,s)},"onStart":function(){},"onComplete":function(){var e=self.performance.now();d.executeEnd=d.end=e,0===f.first&&(f.first=e),p&&0===p.first&&(p.first=e);var t=r.sourceBuffer,i={};for(var n in t)i[n]=T.getBuffered(t[n]);r.appendErrors[s]=0,"audio"===s||"video"===s?r.appendErrors.audiovideo=0:(r.appendErrors.audio=0,r.appendErrors.video=0),r.hls.trigger(ve.BUFFER_APPENDED,{"type":s,"frag":l,"part":u,"chunkMeta":c,"parent":l.type,"timeRanges":i})},"onError":function(e){var t={"type":me.MEDIA_ERROR,"parent":l.type,"details":ye.BUFFER_APPEND_ERROR,"sourceBufferName":s,"frag":l,"part":u,"chunkMeta":c,"error":e,"err":e,"fatal":!1};if(e.code===DOMException.QUOTA_EXCEEDED_ERR)t.details=ye.BUFFER_FULL_ERROR;else{var i=++r.appendErrors[s];t.details=ye.BUFFER_APPEND_ERROR,r.warn("Failed "+i+"/"+n.config.appendErrorMaxRetry+' times to append segment in "'+s+'" sourceBuffer'),i>=n.config.appendErrorMaxRetry&&(t.fatal=!0)}n.trigger(ve.ERROR,t)}};i.append(y,s,!!this.pendingTracks[s])},t.onBufferFlushing=function(e,i){var n=this,t=this.operationQueue,r=function(t){return{"execute":n.removeExecutor.bind(n,t,i.startOffset,i.endOffset),"onStart":function(){},"onComplete":function(){n.hls.trigger(ve.BUFFER_FLUSHED,{"type":t})},"onError":function(e){n.warn("Failed to remove from "+t+" SourceBuffer",e)}}};i.type?t.append(r(i.type),i.type):this.getSourceBufferTypes().forEach(function(e){t.append(r(e),e)})},t.onFragParsed=function(e,t){var i=this,n=t.frag,r=t.part,o=[],a=r?r.elementaryStreams:n.elementaryStreams;a[Z]?o.push("audiovideo"):(a[M]&&o.push("audio"),a[C]&&o.push("video")),0===o.length&&this.warn("Fragments must have at least one ElementaryStreamType set. type: "+n.type+" level: "+n.level+" sn: "+n.sn),this.blockBuffers(function(){var e=self.performance.now();n.stats.buffering.end=e,r&&(r.stats.buffering.end=e);var t=r?r.stats:n.stats;i.hls.trigger(ve.FRAG_BUFFERED,{"frag":n,"part":r,"stats":t,"id":n.type})},o)},t.onFragChanged=function(e,t){this.trimBuffers()},t.onBufferEos=function(e,n){var r=this;this.getSourceBufferTypes().reduce(function(e,t){var i=r.sourceBuffer[t];return!i||n.type&&n.type!==t||(i.ending=!0,i.ended||(i.ended=!0,r.log(t+" sourceBuffer now EOS"))),e&&!(i&&!i.ended)},!0)&&(this.log("Queueing mediaSource.endOfStream()"),this.blockBuffers(function(){r.getSourceBufferTypes().forEach(function(e){var t=r.sourceBuffer[e];t&&(t.ending=!1)});var e=r.mediaSource;e&&"open"===e.readyState?(r.log("Calling mediaSource.endOfStream()"),e.endOfStream()):e&&r.log("Could not call mediaSource.endOfStream(). mediaSource.readyState: "+e.readyState)}))},t.onLevelUpdated=function(e,t){var i=t.details;i.fragments.length&&(this.details=i,this.getSourceBufferTypes().length?this.blockBuffers(this.updateMediaElementDuration.bind(this)):this.updateMediaElementDuration())},t.trimBuffers=function(){var e=this.hls,t=this.details,i=this.media;if(i&&null!==t&&this.getSourceBufferTypes().length){var n=e.config,r=i.currentTime,o=t.levelTargetDuration,a=t.live&&null!==n.liveBackBufferLength?n.liveBackBufferLength:n.backBufferLength;if(J(a)&&a>0){var s=Math.max(a,o),l=Math.floor(r/o)*o-s;this.flushBackBuffer(r,o,l)}if(J(n.frontBufferFlushThreshold)&&n.frontBufferFlushThreshold>0){var u=Math.max(n.maxBufferLength,n.frontBufferFlushThreshold),c=Math.max(u,o),d=Math.floor(r/o)*o+c;this.flushFrontBuffer(r,o,d)}}},t.flushBackBuffer=function(n,r,o){var a=this,s=this.details,l=this.sourceBuffer;this.getSourceBufferTypes().forEach(function(e){var t=l[e];if(t){var i=T.getBuffered(t);if(i.length>0&&o>i.start(0)){if(a.hls.trigger(ve.BACK_BUFFER_REACHED,{"bufferEnd":o}),null!=s&&s.live)a.hls.trigger(ve.LIVE_BACK_BUFFER_REACHED,{"bufferEnd":o});else if(t.ended&&i.end(i.length-1)-n<2*r)return void a.log("Cannot flush "+e+" back buffer while SourceBuffer is in ended state");a.hls.trigger(ve.BUFFER_FLUSHING,{"startOffset":0,"endOffset":o,"type":e})}}})},t.flushFrontBuffer=function(a,s,l){var u=this,c=this.sourceBuffer;this.getSourceBufferTypes().forEach(function(e){var t=c[e];if(t){var i=T.getBuffered(t),n=i.length;if(n<2)return;var r=i.start(n-1),o=i.end(n-1);if(l>r||a>=r&&a<=o)return;if(t.ended&&a-o<2*s)return void u.log("Cannot flush "+e+" front buffer while SourceBuffer is in ended state");u.hls.trigger(ve.BUFFER_FLUSHING,{"startOffset":r,"endOffset":1/0,"type":e})}})},t.updateMediaElementDuration=function(){if(this.details&&this.media&&this.mediaSource&&"open"===this.mediaSource.readyState){var e=this.details,t=this.hls,i=this.media,n=this.mediaSource,r=e.fragments[0].start+e.totalduration,o=i.duration,a=J(n.duration)?n.duration:0;e.live&&t.config.liveDurationInfinity?(n.duration=1/0,this.updateSeekableRange(e)):(r>a&&r>o||!J(o))&&(this.log("Updating Media Source duration to "+r.toFixed(3)),n.duration=r)}},t.updateSeekableRange=function(e){var t=this.mediaSource,i=e.fragments;if(i.length&&e.live&&null!=t&&t.setLiveSeekableRange){var n=Math.max(0,i[0].start),r=Math.max(n,n+e.totalduration);this.log("Media Source duration is set to "+t.duration+". Setting seekable range to "+n+"-"+r+"."),t.setLiveSeekableRange(n,r)}},t.checkPendingTracks=function(){var e=this.bufferCodecEventsExpected,t=this.operationQueue,i=this.pendingTracks,n=Object.keys(i).length;if(n&&(!e||2===n||"audiovideo"in i)){this.createSourceBuffers(i),this.pendingTracks={};var r=this.getSourceBufferTypes();if(r.length)this.hls.trigger(ve.BUFFER_CREATED,{"tracks":this.tracks}),r.forEach(function(e){t.executeNext(e)});else{var o=new Error("could not create source buffer for media codec(s)");this.hls.trigger(ve.ERROR,{"type":me.MEDIA_ERROR,"details":ye.BUFFER_INCOMPATIBLE_CODECS_ERROR,"fatal":!0,"error":o,"reason":o.message})}}},t.createSourceBuffers=function(s){var l=this,u=this.sourceBuffer,c=this.mediaSource;if(!c)throw Error("createSourceBuffers called when mediaSource was null");var e=function(n){if(!u[n]){var e,t=s[n];if(!t)throw Error("source buffer exists for track "+n+", however track does not");var i=-1===(null==(e=t.levelCodec)?void 0:e.indexOf(","))?t.levelCodec:t.codec;i&&"audio"===n.slice(0,5)&&(i=xt(i,l.appendSource));var r=t.container+";codecs="+i;l.log("creating sourceBuffer("+r+")");try{var o=u[n]=c.addSourceBuffer(r),a=n;l.addBufferListener(a,"updatestart",l._onSBUpdateStart),l.addBufferListener(a,"updateend",l._onSBUpdateEnd),l.addBufferListener(a,"error",l._onSBUpdateError),l.appendSource&&l.addBufferListener(a,"bufferedchange",function(e,t){var i=t.removedRanges;null!=i&&i.length&&l.hls.trigger(ve.BUFFER_FLUSHED,{"type":n})}),l.tracks[n]={"buffer":o,"codec":i,"container":t.container,"levelCodec":t.levelCodec,"metadata":t.metadata,"id":t.id}}catch(e){l.error("error while trying to add sourceBuffer: "+e.message),l.hls.trigger(ve.ERROR,{"type":me.MEDIA_ERROR,"details":ye.BUFFER_ADD_CODEC_ERROR,"fatal":!1,"error":e,"sourceBufferName":n,"mimeType":r})}}};for(var t in s)e(t)},t._onSBUpdateStart=function(e){this.operationQueue.current(e).onStart()},t._onSBUpdateEnd=function(e){var t;if("closed"!==(null==(t=this.mediaSource)?void 0:t.readyState)){var i=this.operationQueue;i.current(e).onComplete(),i.shiftAndExecuteNext(e)}else this.resetBuffer(e)},t._onSBUpdateError=function(e,t){var i,n=new Error(e+" SourceBuffer error. MediaSource readyState: "+(null==(i=this.mediaSource)?void 0:i.readyState));this.error(""+n,t),this.hls.trigger(ve.ERROR,{"type":me.MEDIA_ERROR,"details":ye.BUFFER_APPENDING_ERROR,"sourceBufferName":e,"error":n,"fatal":!1});var r=this.operationQueue.current(e);r&&r.onError(n)},t.removeExecutor=function(e,t,i){var n=this.media,r=this.mediaSource,o=this.operationQueue,a=this.sourceBuffer[e];if(!n||!r||!a)return this.warn("Attempting to remove from the "+e+" SourceBuffer, but it does not exist"),void o.shiftAndExecuteNext(e);var s=J(n.duration)?n.duration:1/0,l=J(r.duration)?r.duration:1/0,u=Math.max(0,t),c=Math.min(i,s,l);c>u&&(!a.ending||a.ended)?(a.ended=!1,this.log("Removing ["+u+","+c+"] from the "+e+" SourceBuffer"),a.remove(u,c)):o.shiftAndExecuteNext(e)},t.appendExecutor=function(e,t){var i=this.sourceBuffer[t];if(i)i.ended=!1,i.appendBuffer(e);else if(!this.pendingTracks[t])throw new Error("Attempting to append to the "+t+" SourceBuffer, but it does not exist")},t.blockBuffers=function(e,t){var i=this;if(void 0===t&&(t=this.getSourceBufferTypes()),!t.length)return this.log("Blocking operation requested, but no SourceBuffers exist"),void Promise.resolve().then(e);var n=this.operationQueue,r=t.map(function(e){return n.appendBlocker(e)});Promise.all(r).then(function(){e(),t.forEach(function(e){var t=i.sourceBuffer[e];null!=t&&t.updating||n.shiftAndExecuteNext(e)})})},t.getSourceBufferTypes=function(){return Object.keys(this.sourceBuffer)},t.addBufferListener=function(e,t,i){var n=this.sourceBuffer[e];if(n){var r=i.bind(this,e);this.listeners[e].push({"event":t,"listener":r}),n.addEventListener(t,r)}},t.removeBufferListeners=function(e){var t=this.sourceBuffer[e];t&&this.listeners[e].forEach(function(e){t.removeEventListener(e.event,e.listener)})},l(e,[{"key":"mediaSrc","get":function(){var e,t=(null==(e=this.media)?void 0:e.firstChild)||this.media;return null==t?void 0:t.src}}]),e}();function to(t){var e=t.querySelectorAll("source");[].slice.call(e).forEach(function(e){t.removeChild(e)})}var io={"42":225,"92":233,"94":237,"95":243,"96":250,"123":231,"124":247,"125":209,"126":241,"127":9608,"128":174,"129":176,"130":189,"131":191,"132":8482,"133":162,"134":163,"135":9834,"136":224,"137":32,"138":232,"139":226,"140":234,"141":238,"142":244,"143":251,"144":193,"145":201,"146":211,"147":218,"148":220,"149":252,"150":8216,"151":161,"152":42,"153":8217,"154":9473,"155":169,"156":8480,"157":8226,"158":8220,"159":8221,"160":192,"161":194,"162":199,"163":200,"164":202,"165":203,"166":235,"167":206,"168":207,"169":239,"170":212,"171":217,"172":249,"173":219,"174":171,"175":187,"176":195,"177":227,"178":205,"179":204,"180":236,"181":210,"182":242,"183":213,"184":245,"185":123,"186":125,"187":92,"188":94,"189":95,"190":124,"191":8764,"192":196,"193":228,"194":214,"195":246,"196":223,"197":165,"198":164,"199":9475,"200":197,"201":229,"202":216,"203":248,"204":9487,"205":9491,"206":9495,"207":9499},no=function(e){return String.fromCharCode(io[e]||e)},ro=15,oo=100,ao={"17":1,"18":3,"21":5,"22":7,"23":9,"16":11,"19":12,"20":14},so={"17":2,"18":4,"21":6,"22":8,"23":10,"19":13,"20":15},lo={"25":1,"26":3,"29":5,"30":7,"31":9,"24":11,"27":12,"28":14},uo={"25":2,"26":4,"29":6,"30":8,"31":10,"27":13,"28":15},co=["white","green","blue","cyan","red","yellow","magenta","black","transparent"],ho=function(){function e(){this.time=null,this.verboseLevel=0}return e.prototype.log=function(e,t){if(this.verboseLevel>=e){var i="function"==typeof t?t():t;be.log(this.time+" ["+e+"] "+i)}},e}(),fo=function(e){for(var t=[],i=0;i<e.length;i++)t.push(e[i].toString(16));return t},po=function(){function e(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1}var t=e.prototype;return t.reset=function(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1},t.setStyles=function(e){for(var t=["foreground","underline","italics","background","flash"],i=0;i<t.length;i++){var n=t[i];e.hasOwnProperty(n)&&(this[n]=e[n])}},t.isDefault=function(){return"white"===this.foreground&&!this.underline&&!this.italics&&"black"===this.background&&!this.flash},t.equals=function(e){return this.foreground===e.foreground&&this.underline===e.underline&&this.italics===e.italics&&this.background===e.background&&this.flash===e.flash},t.copy=function(e){this.foreground=e.foreground,this.underline=e.underline,this.italics=e.italics,this.background=e.background,this.flash=e.flash},t.toString=function(){return"color="+this.foreground+", underline="+this.underline+", italics="+this.italics+", background="+this.background+", flash="+this.flash},e}(),go=function(){function e(){this.uchar=" ",this.penState=new po}var t=e.prototype;return t.reset=function(){this.uchar=" ",this.penState.reset()},t.setChar=function(e,t){this.uchar=e,this.penState.copy(t)},t.setPenState=function(e){this.penState.copy(e)},t.equals=function(e){return this.uchar===e.uchar&&this.penState.equals(e.penState)},t.copy=function(e){this.uchar=e.uchar,this.penState.copy(e.penState)},t.isEmpty=function(){return" "===this.uchar&&this.penState.isDefault()},e}(),vo=function(){function e(e){this.chars=[],this.pos=0,this.currPenState=new po,this.cueStartTime=null,this.logger=void 0;for(var t=0;t<oo;t++)this.chars.push(new go);this.logger=e}var t=e.prototype;return t.equals=function(e){for(var t=0;t<oo;t++)if(!this.chars[t].equals(e.chars[t]))return!1;return!0},t.copy=function(e){for(var t=0;t<oo;t++)this.chars[t].copy(e.chars[t])},t.isEmpty=function(){for(var e=!0,t=0;t<oo;t++)if(!this.chars[t].isEmpty()){e=!1;break}return e},t.setCursor=function(e){this.pos!==e&&(this.pos=e),this.pos<0?(this.logger.log(3,"Negative cursor position "+this.pos),this.pos=0):this.pos>oo&&(this.logger.log(3,"Too large cursor position "+this.pos),this.pos=oo)},t.moveCursor=function(e){var t=this.pos+e;if(e>1)for(var i=this.pos+1;i<t+1;i++)this.chars[i].setPenState(this.currPenState);this.setCursor(t)},t.backSpace=function(){this.moveCursor(-1),this.chars[this.pos].setChar(" ",this.currPenState)},t.insertChar=function(e){var t=this;e>=144&&this.backSpace();var i=no(e);this.pos>=oo?this.logger.log(0,function(){return"Cannot insert "+e.toString(16)+" ("+i+") at position "+t.pos+". Skipping it!"}):(this.chars[this.pos].setChar(i,this.currPenState),this.moveCursor(1))},t.clearFromPos=function(e){var t;for(t=e;t<oo;t++)this.chars[t].reset()},t.clear=function(){this.clearFromPos(0),this.pos=0,this.currPenState.reset()},t.clearToEndOfRow=function(){this.clearFromPos(this.pos)},t.getTextString=function(){for(var e=[],t=!0,i=0;i<oo;i++){var n=this.chars[i].uchar;" "!==n&&(t=!1),e.push(n)}return t?"":e.join("")},t.setPenStyles=function(e){this.currPenState.setStyles(e),this.chars[this.pos].setPenState(this.currPenState)},e}(),mo=function(){function e(e){this.rows=[],this.currRow=14,this.nrRollUpRows=null,this.lastOutputScreen=null,this.logger=void 0;for(var t=0;t<ro;t++)this.rows.push(new vo(e));this.logger=e}var t=e.prototype;return t.reset=function(){for(var e=0;e<ro;e++)this.rows[e].clear();this.currRow=14},t.equals=function(e){for(var t=!0,i=0;i<ro;i++)if(!this.rows[i].equals(e.rows[i])){t=!1;break}return t},t.copy=function(e){for(var t=0;t<ro;t++)this.rows[t].copy(e.rows[t])},t.isEmpty=function(){for(var e=!0,t=0;t<ro;t++)if(!this.rows[t].isEmpty()){e=!1;break}return e},t.backSpace=function(){this.rows[this.currRow].backSpace()},t.clearToEndOfRow=function(){this.rows[this.currRow].clearToEndOfRow()},t.insertChar=function(e){this.rows[this.currRow].insertChar(e)},t.setPen=function(e){this.rows[this.currRow].setPenStyles(e)},t.moveCursor=function(e){this.rows[this.currRow].moveCursor(e)},t.setCursor=function(e){this.logger.log(2,"setCursor: "+e),this.rows[this.currRow].setCursor(e)},t.setPAC=function(e){this.logger.log(2,function(){return"pacData = "+JSON.stringify(e)});var t=e.row-1;if(this.nrRollUpRows&&t<this.nrRollUpRows-1&&(t=this.nrRollUpRows-1),this.nrRollUpRows&&this.currRow!==t){for(var i=0;i<ro;i++)this.rows[i].clear();var n=this.currRow+1-this.nrRollUpRows,r=this.lastOutputScreen;if(r){var o=r.rows[n].cueStartTime,a=this.logger.time;if(null!==o&&null!==a&&o<a)for(var s=0;s<this.nrRollUpRows;s++)this.rows[t-this.nrRollUpRows+s+1].copy(r.rows[n+s])}}this.currRow=t;var l=this.rows[this.currRow];if(null!==e.indent){var u=e.indent,c=Math.max(u-1,0);l.setCursor(e.indent),e.color=l.chars[c].penState.foreground}var d={"foreground":e.color,"underline":e.underline,"italics":e.italics,"background":"black","flash":!1};this.setPen(d)},t.setBkgData=function(e){this.logger.log(2,function(){return"bkgData = "+JSON.stringify(e)}),this.backSpace(),this.setPen(e),this.insertChar(32)},t.setRollUpRows=function(e){this.nrRollUpRows=e},t.rollUp=function(){var e=this;if(null!==this.nrRollUpRows){this.logger.log(1,function(){return e.getDisplayText()});var t=this.currRow+1-this.nrRollUpRows,i=this.rows.splice(t,1)[0];i.clear(),this.rows.splice(this.currRow,0,i),this.logger.log(2,"Rolling up")}else this.logger.log(3,"roll_up but nrRollUpRows not set yet")},t.getDisplayText=function(e){e=e||!1;for(var t=[],i="",n=-1,r=0;r<ro;r++){var o=this.rows[r].getTextString();o&&(n=r+1,e?t.push("Row "+n+": '"+o+"'"):t.push(o.trim()))}return t.length>0&&(i=e?"["+t.join(" | ")+"]":t.join("\n")),i},t.getTextAndFormat=function(){return this.rows},e}(),yo=function(){function e(e,t,i){this.chNr=void 0,this.outputFilter=void 0,this.mode=void 0,this.verbose=void 0,this.displayedMemory=void 0,this.nonDisplayedMemory=void 0,this.lastOutputScreen=void 0,this.currRollUpRow=void 0,this.writeScreen=void 0,this.cueStartTime=void 0,this.logger=void 0,this.chNr=e,this.outputFilter=t,this.mode=null,this.verbose=0,this.displayedMemory=new mo(i),this.nonDisplayedMemory=new mo(i),this.lastOutputScreen=new mo(i),this.currRollUpRow=this.displayedMemory.rows[14],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null,this.logger=i}var t=e.prototype;return t.reset=function(){this.mode=null,this.displayedMemory.reset(),this.nonDisplayedMemory.reset(),this.lastOutputScreen.reset(),this.outputFilter.reset(),this.currRollUpRow=this.displayedMemory.rows[14],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null},t.getHandler=function(){return this.outputFilter},t.setHandler=function(e){this.outputFilter=e},t.setPAC=function(e){this.writeScreen.setPAC(e)},t.setBkgData=function(e){this.writeScreen.setBkgData(e)},t.setMode=function(e){e!==this.mode&&(this.mode=e,this.logger.log(2,function(){return"MODE="+e}),"MODE_POP-ON"===this.mode?this.writeScreen=this.nonDisplayedMemory:(this.writeScreen=this.displayedMemory,this.writeScreen.reset()),"MODE_ROLL-UP"!==this.mode&&(this.displayedMemory.nrRollUpRows=null,this.nonDisplayedMemory.nrRollUpRows=null),this.mode=e)},t.insertChars=function(e){for(var t=this,i=0;i<e.length;i++)this.writeScreen.insertChar(e[i]);var n=this.writeScreen===this.displayedMemory?"DISP":"NON_DISP";this.logger.log(2,function(){return n+": "+t.writeScreen.getDisplayText(!0)}),"MODE_PAINT-ON"!==this.mode&&"MODE_ROLL-UP"!==this.mode||(this.logger.log(1,function(){return"DISPLAYED: "+t.displayedMemory.getDisplayText(!0)}),this.outputDataUpdate())},t.ccRCL=function(){this.logger.log(2,"RCL - Resume Caption Loading"),this.setMode("MODE_POP-ON")},t.ccBS=function(){this.logger.log(2,"BS - BackSpace"),"MODE_TEXT"!==this.mode&&(this.writeScreen.backSpace(),this.writeScreen===this.displayedMemory&&this.outputDataUpdate())},t.ccAOF=function(){},t.ccAON=function(){},t.ccDER=function(){this.logger.log(2,"DER- Delete to End of Row"),this.writeScreen.clearToEndOfRow(),this.outputDataUpdate()},t.ccRU=function(e){this.logger.log(2,"RU("+e+") - Roll Up"),this.writeScreen=this.displayedMemory,this.setMode("MODE_ROLL-UP"),this.writeScreen.setRollUpRows(e)},t.ccFON=function(){this.logger.log(2,"FON - Flash On"),this.writeScreen.setPen({"flash":!0})},t.ccRDC=function(){this.logger.log(2,"RDC - Resume Direct Captioning"),this.setMode("MODE_PAINT-ON")},t.ccTR=function(){this.logger.log(2,"TR"),this.setMode("MODE_TEXT")},t.ccRTD=function(){this.logger.log(2,"RTD"),this.setMode("MODE_TEXT")},t.ccEDM=function(){this.logger.log(2,"EDM - Erase Displayed Memory"),this.displayedMemory.reset(),this.outputDataUpdate(!0)},t.ccCR=function(){this.logger.log(2,"CR - Carriage Return"),this.writeScreen.rollUp(),this.outputDataUpdate(!0)},t.ccENM=function(){this.logger.log(2,"ENM - Erase Non-displayed Memory"),this.nonDisplayedMemory.reset()},t.ccEOC=function(){var e=this;if(this.logger.log(2,"EOC - End Of Caption"),"MODE_POP-ON"===this.mode){var t=this.displayedMemory;this.displayedMemory=this.nonDisplayedMemory,this.nonDisplayedMemory=t,this.writeScreen=this.nonDisplayedMemory,this.logger.log(1,function(){return"DISP: "+e.displayedMemory.getDisplayText()})}this.outputDataUpdate(!0)},t.ccTO=function(e){this.logger.log(2,"TO("+e+") - Tab Offset"),this.writeScreen.moveCursor(e)},t.ccMIDROW=function(e){var t={"flash":!1};if(t.underline=e%2==1,t.italics=e>=46,t.italics)t.foreground="white";else{var i=Math.floor(e/2)-16;t.foreground=["white","green","blue","cyan","red","yellow","magenta"][i]}this.logger.log(2,"MIDROW: "+JSON.stringify(t)),this.writeScreen.setPen(t)},t.outputDataUpdate=function(e){void 0===e&&(e=!1);var t=this.logger.time;null!==t&&this.outputFilter&&(null!==this.cueStartTime||this.displayedMemory.isEmpty()?this.displayedMemory.equals(this.lastOutputScreen)||(this.outputFilter.newCue(this.cueStartTime,t,this.lastOutputScreen),e&&this.outputFilter.dispatchCue&&this.outputFilter.dispatchCue(),this.cueStartTime=this.displayedMemory.isEmpty()?null:t):this.cueStartTime=t,this.lastOutputScreen.copy(this.displayedMemory))},t.cueSplitAtTime=function(e){this.outputFilter&&(this.displayedMemory.isEmpty()||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,e,this.displayedMemory),this.cueStartTime=e))},e}(),bo=function(){function e(e,t,i){this.channels=void 0,this.currentChannel=0,this.cmdHistory={"a":null,"b":null},this.logger=void 0;var n=this.logger=new ho;this.channels=[null,new yo(e,t,n),new yo(e+1,i,n)]}var t=e.prototype;return t.getHandler=function(e){return this.channels[e].getHandler()},t.setHandler=function(e,t){this.channels[e].setHandler(t)},t.addData=function(e,s){var l=this;this.logger.time=e;for(var t=function(e){var t=127&s[e],i=127&s[e+1],n=!1,r=null;if(0===t&&0===i)return 0;l.logger.log(3,function(){return"["+fo([s[e],s[e+1]])+"] -> ("+fo([t,i])+")"});var o=l.cmdHistory;if(t>=16&&t<=31){if(function(e,t,i){return i.a===e&&i.b===t}(t,i,o))return _o(null,null,o),l.logger.log(3,function(){return"Repeated command ("+fo([t,i])+") is dropped"}),0;_o(t,i,l.cmdHistory),(n=l.parseCmd(t,i))||(n=l.parseMidrow(t,i)),n||(n=l.parsePAC(t,i)),n||(n=l.parseBackgroundAttributes(t,i))}else _o(null,null,o);if(!n&&(r=l.parseChars(t,i))){var a=l.currentChannel;a&&a>0?l.channels[a].insertChars(r):l.logger.log(2,"No channel found yet. TEXT-MODE?")}n||r||l.logger.log(2,function(){return"Couldn't parse cleaned data "+fo([t,i])+" orig: "+fo([s[e],s[e+1]])})},i=0;i<s.length;i+=2)t(i)},t.parseCmd=function(e,t){if(!((20===e||28===e||21===e||29===e)&&t>=32&&t<=47||(23===e||31===e)&&t>=33&&t<=35))return!1;var i=20===e||21===e||23===e?1:2,n=this.channels[i];return 20===e||21===e||28===e||29===e?32===t?n.ccRCL():33===t?n.ccBS():34===t?n.ccAOF():35===t?n.ccAON():36===t?n.ccDER():37===t?n.ccRU(2):38===t?n.ccRU(3):39===t?n.ccRU(4):40===t?n.ccFON():41===t?n.ccRDC():42===t?n.ccTR():43===t?n.ccRTD():44===t?n.ccEDM():45===t?n.ccCR():46===t?n.ccENM():47===t&&n.ccEOC():n.ccTO(t-32),this.currentChannel=i,!0},t.parseMidrow=function(e,t){var i=0;if((17===e||25===e)&&t>=32&&t<=47){if((i=17===e?1:2)!==this.currentChannel)return this.logger.log(0,"Mismatch channel in midrow parsing"),!1;var n=this.channels[i];return!!n&&(n.ccMIDROW(t),this.logger.log(3,function(){return"MIDROW ("+fo([e,t])+")"}),!0)}return!1},t.parsePAC=function(e,t){var i;if(!((e>=17&&e<=23||e>=25&&e<=31)&&t>=64&&t<=127||(16===e||24===e)&&t>=64&&t<=95))return!1;var n=e<=23?1:2;i=t>=64&&t<=95?1===n?ao[e]:lo[e]:1===n?so[e]:uo[e];var r=this.channels[n];return!!r&&(r.setPAC(this.interpretPAC(i,t)),this.currentChannel=n,!0)},t.interpretPAC=function(e,t){var i,n={"color":null,"italics":!1,"indent":null,"underline":!1,"row":e};return i=t>95?t-96:t-64,n.underline=1==(1&i),i<=13?n.color=["white","green","blue","cyan","red","yellow","magenta","white"][Math.floor(i/2)]:i<=15?(n.italics=!0,n.color="white"):n.indent=4*Math.floor((i-16)/2),n},t.parseChars=function(e,t){var i,n,r=null,o=null;return e>=25?(i=2,o=e-8):(i=1,o=e),o>=17&&o<=19?(n=17===o?t+80:18===o?t+112:t+144,this.logger.log(2,function(){return"Special char '"+no(n)+"' in channel "+i}),r=[n]):e>=32&&e<=127&&(r=0===t?[e]:[e,t]),r&&this.logger.log(3,function(){return"Char codes =  "+fo(r).join(",")}),r},t.parseBackgroundAttributes=function(e,t){var i;if(!((16===e||24===e)&&t>=32&&t<=47||(23===e||31===e)&&t>=45&&t<=47))return!1;var n={};16===e||24===e?(i=Math.floor((t-32)/2),n.background=co[i],t%2==1&&(n.background=n.background+"_semi")):45===t?n.background="transparent":(n.foreground="black",47===t&&(n.underline=!0));var r=e<=23?1:2;return this.channels[r].setBkgData(n),!0},t.reset=function(){for(var e=0;e<Object.keys(this.channels).length;e++){var t=this.channels[e];t&&t.reset()}_o(null,null,this.cmdHistory)},t.cueSplitAtTime=function(e){for(var t=0;t<this.channels.length;t++){var i=this.channels[t];i&&i.cueSplitAtTime(e)}},e}();function _o(e,t,i){i.a=e,i.b=t}var wo=function(){function e(e,t){this.timelineController=void 0,this.cueRanges=[],this.trackName=void 0,this.startTime=null,this.endTime=null,this.screen=null,this.timelineController=e,this.trackName=t}var t=e.prototype;return t.dispatchCue=function(){null!==this.startTime&&(this.timelineController.addCues(this.trackName,this.startTime,this.endTime,this.screen,this.cueRanges),this.startTime=null)},t.newCue=function(e,t,i){(null===this.startTime||this.startTime>e)&&(this.startTime=e),this.endTime=t,this.screen=i,this.timelineController.createCaptionsTrack(this.trackName)},t.reset=function(){this.cueRanges=[],this.startTime=null},e}(),Eo=function(){if(null!=se&&se.VTTCue)return self.VTTCue;var b=["","lr","rl"],t=["start","middle","end","left","right"];function _(e,t){if("string"!=typeof t)return!1;if(!Array.isArray(e))return!1;var i=t.toLowerCase();return!!~e.indexOf(i)&&i}function w(e){return _(t,e)}function E(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];for(var r=1;r<arguments.length;r++){var o=arguments[r];for(var a in o)e[a]=o[a]}return e}function e(e,t,i){var n=this,r={"enumerable":!0};n.hasBeenReset=!1;var o="",a=!1,s=e,l=t,u=i,c=null,d="",h=!0,f="auto",p="start",g=50,v="middle",m=50,y="middle";Object.defineProperty(n,"id",E({},r,{"get":function(){return o},"set":function(e){o=""+e}})),Object.defineProperty(n,"pauseOnExit",E({},r,{"get":function(){return a},"set":function(e){a=!!e}})),Object.defineProperty(n,"startTime",E({},r,{"get":function(){return s},"set":function(e){if("number"!=typeof e)throw new TypeError("Start time must be set to a number.");s=e,this.hasBeenReset=!0}})),Object.defineProperty(n,"endTime",E({},r,{"get":function(){return l},"set":function(e){if("number"!=typeof e)throw new TypeError("End time must be set to a number.");l=e,this.hasBeenReset=!0}})),Object.defineProperty(n,"text",E({},r,{"get":function(){return u},"set":function(e){u=""+e,this.hasBeenReset=!0}})),Object.defineProperty(n,"region",E({},r,{"get":function(){return c},"set":function(e){c=e,this.hasBeenReset=!0}})),Object.defineProperty(n,"vertical",E({},r,{"get":function(){return d},"set":function(e){var t=function(e){return _(b,e)}(e);if(!1===t)throw new SyntaxError("An invalid or illegal string was specified.");d=t,this.hasBeenReset=!0}})),Object.defineProperty(n,"snapToLines",E({},r,{"get":function(){return h},"set":function(e){h=!!e,this.hasBeenReset=!0}})),Object.defineProperty(n,"line",E({},r,{"get":function(){return f},"set":function(e){if("number"!=typeof e&&"auto"!==e)throw new SyntaxError("An invalid number or illegal string was specified.");f=e,this.hasBeenReset=!0}})),Object.defineProperty(n,"lineAlign",E({},r,{"get":function(){return p},"set":function(e){var t=w(e);if(!t)throw new SyntaxError("An invalid or illegal string was specified.");p=t,this.hasBeenReset=!0}})),Object.defineProperty(n,"position",E({},r,{"get":function(){return g},"set":function(e){if(e<0||e>100)throw new Error("Position must be between 0 and 100.");g=e,this.hasBeenReset=!0}})),Object.defineProperty(n,"positionAlign",E({},r,{"get":function(){return v},"set":function(e){var t=w(e);if(!t)throw new SyntaxError("An invalid or illegal string was specified.");v=t,this.hasBeenReset=!0}})),Object.defineProperty(n,"size",E({},r,{"get":function(){return m},"set":function(e){if(e<0||e>100)throw new Error("Size must be between 0 and 100.");m=e,this.hasBeenReset=!0}})),Object.defineProperty(n,"align",E({},r,{"get":function(){return y},"set":function(e){var t=w(e);if(!t)throw new SyntaxError("An invalid or illegal string was specified.");y=t,this.hasBeenReset=!0}})),n.displayState=void 0}return e.prototype.getCueAsHTML=function(){return self.WebVTT.convertCueToDOMTree(self,this.text)},e}(),xo=function(){function e(){}return e.prototype.decode=function(e,t){if(!e)return"";if("string"!=typeof e)throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(e))},e}();function To(e){function t(e,t,i,n){return 3600*(0|e)+60*(0|t)+(0|i)+parseFloat(n||0)}var i=e.match(/^(?:(\d+):)?(\d{2}):(\d{2})(\.\d+)?/);return i?parseFloat(i[2])>59?t(i[2],i[3],0,i[4]):t(i[1],i[2],i[3],i[4]):null}var So=function(){function e(){this.values=Object.create(null)}var t=e.prototype;return t.set=function(e,t){this.get(e)||""===t||(this.values[e]=t)},t.get=function(e,t,i){return i?this.has(e)?this.values[e]:t[i]:this.has(e)?this.values[e]:t},t.has=function(e){return e in this.values},t.alt=function(e,t,i){for(var n=0;n<i.length;++n)if(t===i[n]){this.set(e,t);break}},t.integer=function(e,t){/^-?\d+$/.test(t)&&this.set(e,parseInt(t,10))},t.percent=function(e,t){if(/^([\d]{1,3})(\.[\d]*)?%$/.test(t)){var i=parseFloat(t);if(i>=0&&i<=100)return this.set(e,i),!0}return!1},e}();function ko(e,t,i,n){var r=n?e.split(n):[e];for(var o in r)if("string"==typeof r[o]){var a=r[o].split(i);2===a.length&&t(a[0],a[1])}}var Ro=new Eo(0,0,""),Co="middle"===Ro.align?"middle":"center";function Ao(t,e,o){var i=t;function n(){var e=To(t);if(null===e)throw new Error("Malformed timestamp: "+i);return t=t.replace(/^[^\sa-zA-Z-]+/,""),e}function r(){t=t.replace(/^\s+/,"")}if(r(),e.startTime=n(),r(),"--\x3e"!==t.slice(0,3))throw new Error("Malformed time stamp (time stamps must be separated by '--\x3e'): "+i);t=t.slice(3),r(),e.endTime=n(),r(),function(e,t){var r=new So;ko(e,function(e,t){var i;switch(e){case"region":for(var n=o.length-1;n>=0;n--)if(o[n].id===t){r.set(e,o[n].region);break}break;case"vertical":r.alt(e,t,["rl","lr"]);break;case"line":i=t.split(","),r.integer(e,i[0]),r.percent(e,i[0])&&r.set("snapToLines",!1),r.alt(e,i[0],["auto"]),2===i.length&&r.alt("lineAlign",i[1],["start",Co,"end"]);break;case"position":i=t.split(","),r.percent(e,i[0]),2===i.length&&r.alt("positionAlign",i[1],["start",Co,"end","line-left","line-right","auto"]);break;case"size":r.percent(e,t);break;case"align":r.alt(e,t,["start",Co,"end","left","right"])}},/:/,/\s/),t.region=r.get("region",null),t.vertical=r.get("vertical","");var i=r.get("line","auto");"auto"===i&&-1===Ro.line&&(i=-1),t.line=i,t.lineAlign=r.get("lineAlign","start"),t.snapToLines=r.get("snapToLines",!0),t.size=r.get("size",100),t.align=r.get("align",Co);var n=r.get("position","auto");"auto"===n&&50===Ro.position&&(n="start"===t.align||"left"===t.align?0:"end"===t.align||"right"===t.align?100:50),t.position=n}(t,e)}function Oo(e){return e.replace(/<br(?: \/)?>/gi,"\n")}var Lo=function(){function e(){this.state="INITIAL",this.buffer="",this.decoder=new xo,this.regionList=[],this.cue=null,this.oncue=void 0,this.onparsingerror=void 0,this.onflush=void 0}var t=e.prototype;return t.parse=function(e){var n=this;function t(){var e=n.buffer,t=0;for(e=Oo(e);t<e.length&&"\r"!==e[t]&&"\n"!==e[t];)++t;var i=e.slice(0,t);return"\r"===e[t]&&++t,"\n"===e[t]&&++t,n.buffer=e.slice(t),i}e&&(n.buffer+=n.decoder.decode(e,{"stream":!0}));try{var i="";if("INITIAL"===n.state){if(!/\r\n|\n/.test(n.buffer))return this;var r=(i=t()).match(/^(ï»¿)?WEBVTT([ \t].*)?$/);if(null==r||!r[0])throw new Error("Malformed WebVTT signature.");n.state="HEADER"}for(var o=!1;n.buffer;){if(!/\r\n|\n/.test(n.buffer))return this;switch(o?o=!1:i=t(),n.state){case"HEADER":/:/.test(i)?ko(i,function(e,t){},/:/):i||(n.state="ID");continue;case"NOTE":i||(n.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(i)){n.state="NOTE";break}if(!i)continue;if(n.cue=new Eo(0,0,""),n.state="CUE",-1===i.indexOf("--\x3e")){n.cue.id=i;continue}case"CUE":if(!n.cue){n.state="BADCUE";continue}try{Ao(i,n.cue,n.regionList)}catch(e){n.cue=null,n.state="BADCUE";continue}n.state="CUETEXT";continue;case"CUETEXT":var a=-1!==i.indexOf("--\x3e");if(!i||a&&(o=!0)){n.oncue&&n.cue&&n.oncue(n.cue),n.cue=null,n.state="ID";continue}if(null===n.cue)continue;n.cue.text&&(n.cue.text+="\n"),n.cue.text+=i;continue;case"BADCUE":i||(n.state="ID")}}}catch(e){"CUETEXT"===n.state&&n.cue&&n.oncue&&n.oncue(n.cue),n.cue=null,n.state="INITIAL"===n.state?"BADWEBVTT":"BADCUE"}return this},t.flush=function(){var t=this;try{if((t.cue||"HEADER"===t.state)&&(t.buffer+="\n\n",t.parse()),"INITIAL"===t.state||"BADWEBVTT"===t.state)throw new Error("Malformed WebVTT signature.")}catch(e){t.onparsingerror&&t.onparsingerror(e)}return t.onflush&&t.onflush(),this},e}(),Po=/\r\n|\n\r|\n|\r/g,Io=function(e,t,i){return void 0===i&&(i=0),e.slice(i,i+t.length)===t},Do=function(e){for(var t=5381,i=e.length;i;)t=33*t^e.charCodeAt(--i);return(t>>>0).toString()};function Mo(e,t,i){return Do(e.toString())+Do(t.toString())+Do(i)}function Bo(e,s,l,u,c,t,i){var n,r,d,o=new Lo,a=S(new Uint8Array(e)).trim().replace(Po,"\n").split("\n"),h=[],f=s?(n=s.baseTime,void 0===(r=s.timescale)&&(r=1),wr(n,_r,1/r)):0,p="00:00.000",g=0,v=0,m=!0;o.oncue=function(e){var t=l[u],i=l.ccOffset,n=(g-f)/9e4;if(null!=t&&t.new&&(void 0!==v?i=l.ccOffset=t.start:function(e,t,i){var n=e[t],r=e[n.prevCC];if(!r||!r.new&&n.new)return e.ccOffset=e.presentationOffset=n.start,void(n.new=!1);for(;null!=(o=r)&&o.new;){var o;e.ccOffset+=n.start-r.start,n.new=!1,r=e[(n=r).prevCC]}e.presentationOffset=i}(l,u,n)),n){if(!s)return void(d=new Error("Missing initPTS for VTT MPEGTS"));i=n-l.presentationOffset}var r=e.endTime-e.startTime,o=we(9e4*(e.startTime+i-v),9e4*c)/9e4;e.startTime=Math.max(o,0),e.endTime=Math.max(o+r,0);var a=e.text.trim();e.text=decodeURIComponent(encodeURIComponent(a)),e.id||(e.id=Mo(e.startTime,e.endTime,a)),e.endTime>0&&h.push(e)},o.onparsingerror=function(e){d=e},o.onflush=function(){d?i(d):t(h)},a.forEach(function(e){if(m){if(Io(e,"X-TIMESTAMP-MAP=")){m=!1,e.slice(16).split(",").forEach(function(e){Io(e,"LOCAL:")?p=e.slice(6):Io(e,"MPEGTS:")&&(g=parseInt(e.slice(7)))});try{v=function(e){var t=parseInt(e.slice(-3)),i=parseInt(e.slice(-6,-4)),n=parseInt(e.slice(-9,-7)),r=e.length>9?parseInt(e.substring(0,e.indexOf(":"))):0;if(!(J(t)&&J(i)&&J(n)&&J(r)))throw Error("Malformed X-TIMESTAMP-MAP: Local:"+e);return t+=1e3*i,(t+=6e4*n)+36e5*r}(p)/1e3}catch(e){d=e}return}""===e&&(m=!1)}o.parse(e+"\n")}),o.flush()}var Fo="stpp.ttml.im1t",No=/^(\d{2,}):(\d{2}):(\d{2}):(\d{2})\.?(\d+)?$/,jo=/^(\d*(?:\.\d*)?)(h|m|s|ms|f|t)$/,Uo={"left":"start","center":"center","right":"end","start":"start","end":"end"};function $o(e,t,i,n){var r=V(new Uint8Array(e),["mdat"]);if(0!==r.length){var o,a,s,l,u=r.map(function(e){return S(e)}),c=(o=t.baseTime,a=1,void 0===(s=t.timescale)&&(s=1),void 0===l&&(l=!1),wr(o,a,1/s,l));try{u.forEach(function(e){return i(function(e,u){var t=(new DOMParser).parseFromString(e,"text/xml"),i=t.getElementsByTagName("tt")[0];if(!i)throw new Error("Invalid ttml");var n={"frameRate":30,"subFrameRate":1,"frameRateMultiplier":0,"tickRate":0},c=Object.keys(n).reduce(function(e,t){return e[t]=i.getAttribute("ttp:"+t)||n[t],e},{}),d="preserve"!==i.getAttribute("xml:space"),h=zo(Ho(i,"styling","style")),f=zo(Ho(i,"layout","region")),r=Ho(i,"body","[begin]");return[].map.call(r,function(e){var t=Wo(e,d);if(!t||!e.hasAttribute("begin"))return null;var i=qo(e.getAttribute("begin"),c),n=qo(e.getAttribute("dur"),c),r=qo(e.getAttribute("end"),c);if(null===i)throw Vo(e);if(null===r){if(null===n)throw Vo(e);r=i+n}var o=new Eo(i-u,r-u,t);o.id=Mo(o.startTime,o.endTime,o.text);var a=function(n,r,e){var o="http://www.w3.org/ns/ttml#styling",a=null,t=["displayAlign","textAlign","color","backgroundColor","fontSize","fontFamily"],i=null!=n&&n.hasAttribute("style")?n.getAttribute("style"):null;return i&&e.hasOwnProperty(i)&&(a=e[i]),t.reduce(function(e,t){var i=Go(r,o,t)||Go(n,o,t)||Go(a,o,t);return i&&(e[t]=i),e},{})}(f[e.getAttribute("region")],h[e.getAttribute("style")],h),s=a.textAlign;if(s){var l=Uo[s];l&&(o.lineAlign=l),o.align=s}return ge(o,a),o}).filter(function(e){return null!==e})}(e,c))})}catch(e){n(e)}}else n(new Error("Could not parse IMSC1 mdat"))}function Ho(e,t,i){var n=e.getElementsByTagName(t)[0];return n?[].slice.call(n.querySelectorAll(i)):[]}function zo(e){return e.reduce(function(e,t){var i=t.getAttribute("xml:id");return i&&(e[i]=t),e},{})}function Wo(e,r){return[].slice.call(e.childNodes).reduce(function(e,t,i){var n;return"br"===t.nodeName&&i?e+"\n":null!=(n=t.childNodes)&&n.length?Wo(t,r):r?e+t.textContent.trim().replace(/\s+/g," "):e+t.textContent},"")}function Go(e,t,i){return e&&e.hasAttributeNS(t,i)?e.getAttributeNS(t,i):null}function Vo(e){return new Error("Could not parse ttml timestamp "+e)}function qo(e,t){if(!e)return null;var i=To(e);return null===i&&(No.test(e)?i=function(e,t){var i=No.exec(e),n=(0|i[4])+(0|i[5])/t.subFrameRate;return 3600*(0|i[1])+60*(0|i[2])+(0|i[3])+n/t.frameRate}(e,t):jo.test(e)&&(i=function(e,t){var i=jo.exec(e),n=Number(i[1]);switch(i[2]){case"h":return 3600*n;case"m":return 60*n;case"ms":return 1e3*n;case"f":return n/t.frameRate;case"t":return n/t.tickRate}return n}(e,t))),i}var Ko=function(){function e(e){this.hls=void 0,this.media=null,this.config=void 0,this.enabled=!0,this.Cues=void 0,this.textTracks=[],this.tracks=[],this.initPTS=[],this.unparsedVttFrags=[],this.captionsTracks={},this.nonNativeCaptionsTracks={},this.cea608Parser1=void 0,this.cea608Parser2=void 0,this.lastCc=-1,this.lastSn=-1,this.lastPartIndex=-1,this.prevCC=-1,this.vttCCs={"ccOffset":0,"presentationOffset":0,"0":{"start":0,"prevCC":-1,"new":!0}},this.captionsProperties=void 0,this.hls=e,this.config=e.config,this.Cues=e.config.cueHandler,this.captionsProperties={"textTrack1":{"label":this.config.captionsTextTrack1Label,"languageCode":this.config.captionsTextTrack1LanguageCode},"textTrack2":{"label":this.config.captionsTextTrack2Label,"languageCode":this.config.captionsTextTrack2LanguageCode},"textTrack3":{"label":this.config.captionsTextTrack3Label,"languageCode":this.config.captionsTextTrack3LanguageCode},"textTrack4":{"label":this.config.captionsTextTrack4Label,"languageCode":this.config.captionsTextTrack4LanguageCode}},e.on(ve.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(ve.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(ve.MANIFEST_LOADING,this.onManifestLoading,this),e.on(ve.MANIFEST_LOADED,this.onManifestLoaded,this),e.on(ve.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.on(ve.FRAG_LOADING,this.onFragLoading,this),e.on(ve.FRAG_LOADED,this.onFragLoaded,this),e.on(ve.FRAG_PARSING_USERDATA,this.onFragParsingUserdata,this),e.on(ve.FRAG_DECRYPTED,this.onFragDecrypted,this),e.on(ve.INIT_PTS_FOUND,this.onInitPtsFound,this),e.on(ve.SUBTITLE_TRACKS_CLEARED,this.onSubtitleTracksCleared,this),e.on(ve.BUFFER_FLUSHING,this.onBufferFlushing,this)}var t=e.prototype;return t.destroy=function(){var e=this.hls;e.off(ve.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(ve.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(ve.MANIFEST_LOADING,this.onManifestLoading,this),e.off(ve.MANIFEST_LOADED,this.onManifestLoaded,this),e.off(ve.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.off(ve.FRAG_LOADING,this.onFragLoading,this),e.off(ve.FRAG_LOADED,this.onFragLoaded,this),e.off(ve.FRAG_PARSING_USERDATA,this.onFragParsingUserdata,this),e.off(ve.FRAG_DECRYPTED,this.onFragDecrypted,this),e.off(ve.INIT_PTS_FOUND,this.onInitPtsFound,this),e.off(ve.SUBTITLE_TRACKS_CLEARED,this.onSubtitleTracksCleared,this),e.off(ve.BUFFER_FLUSHING,this.onBufferFlushing,this),this.hls=this.config=null,this.cea608Parser1=this.cea608Parser2=void 0},t.initCea608Parsers=function(){if(this.config.enableCEA708Captions&&(!this.cea608Parser1||!this.cea608Parser2)){var e=new wo(this,"textTrack1"),t=new wo(this,"textTrack2"),i=new wo(this,"textTrack3"),n=new wo(this,"textTrack4");this.cea608Parser1=new bo(1,e,t),this.cea608Parser2=new bo(3,i,n)}},t.addCues=function(e,t,i,n,r){for(var o,a,s,l,u=!1,c=r.length;c--;){var d=r[c],h=(o=d[0],a=d[1],s=t,l=i,Math.min(a,l)-Math.max(o,s));if(h>=0&&(d[0]=Math.min(d[0],t),d[1]=Math.max(d[1],i),u=!0,h/(i-t)>.5))return}if(u||r.push([t,i]),this.config.renderTextTracksNatively){var f=this.captionsTracks[e];this.Cues.newCue(f,t,i,n)}else{var p=this.Cues.newCue(null,t,i,n);this.hls.trigger(ve.CUES_PARSED,{"type":"captions","cues":p,"track":e})}},t.onInitPtsFound=function(e,t){var i=this,n=t.frag,r=t.id,o=t.initPTS,a=t.timescale,s=this.unparsedVttFrags;"main"===r&&(this.initPTS[n.cc]={"baseTime":o,"timescale":a}),s.length&&(this.unparsedVttFrags=[],s.forEach(function(e){i.onFragLoaded(ve.FRAG_LOADED,e)}))},t.getExistingTrack=function(e,t){var i=this.media;if(i)for(var n=0;n<i.textTracks.length;n++){var r=i.textTracks[n];if(Xo(r,{"name":e,"lang":t,"attrs":{}}))return r}return null},t.createCaptionsTrack=function(e){this.config.renderTextTracksNatively?this.createNativeTrack(e):this.createNonNativeTrack(e)},t.createNativeTrack=function(e){if(!this.captionsTracks[e]){var t=this.captionsProperties,i=this.captionsTracks,n=this.media,r=t[e],o=r.label,a=r.languageCode,s=this.getExistingTrack(o,a);if(s)i[e]=s,Vt(i[e]),Wt(i[e],n);else{var l=this.createTextTrack("captions",o,a);l&&(l[e]=!0,i[e]=l)}}},t.createNonNativeTrack=function(e){if(!this.nonNativeCaptionsTracks[e]){var t=this.captionsProperties[e];if(t){var i={"_id":e,"label":t.label,"kind":"captions","default":!!t.media&&!!t.media.default,"closedCaptions":t.media};this.nonNativeCaptionsTracks[e]=i,this.hls.trigger(ve.NON_NATIVE_TEXT_TRACKS_FOUND,{"tracks":[i]})}}},t.createTextTrack=function(e,t,i){var n=this.media;if(n)return n.addTextTrack(e,t,i)},t.onMediaAttaching=function(e,t){this.media=t.media,this._cleanTracks()},t.onMediaDetaching=function(){var t=this.captionsTracks;Object.keys(t).forEach(function(e){Vt(t[e]),delete t[e]}),this.nonNativeCaptionsTracks={}},t.onManifestLoading=function(){this.lastCc=-1,this.lastSn=-1,this.lastPartIndex=-1,this.prevCC=-1,this.vttCCs={"ccOffset":0,"presentationOffset":0,"0":{"start":0,"prevCC":-1,"new":!0}},this._cleanTracks(),this.tracks=[],this.captionsTracks={},this.nonNativeCaptionsTracks={},this.textTracks=[],this.unparsedVttFrags=[],this.initPTS=[],this.cea608Parser1&&this.cea608Parser2&&(this.cea608Parser1.reset(),this.cea608Parser2.reset())},t._cleanTracks=function(){var e=this.media;if(e){var t=e.textTracks;if(t)for(var i=0;i<t.length;i++)Vt(t[i])}},t.onSubtitleTracksUpdated=function(e,t){var a=this,i=t.subtitleTracks||[],n=i.some(function(e){return e.textCodec===Fo});if(this.config.enableWebVTT||n&&this.config.enableIMSC1){if(Wr(this.tracks,i))return void(this.tracks=i);if(this.textTracks=[],this.tracks=i,this.config.renderTextTracksNatively){var r=this.media,s=r?Kt(r.textTracks):null;if(this.tracks.forEach(function(e,t){var i;if(s){for(var n=null,r=0;r<s.length;r++)if(s[r]&&Xo(s[r],e)){n=s[r],s[r]=null;break}n&&(i=n)}if(i)Vt(i);else{var o=Zo(e);(i=a.createTextTrack(o,e.name,e.lang))&&(i.mode="disabled")}i&&a.textTracks.push(i)}),null!=s&&s.length){var o=s.filter(function(e){return null!==e}).map(function(e){return e.label});o.length&&be.warn("Media element contains unused subtitle tracks: "+o.join(", ")+". Replace media element for each source to clear TextTracks and captions menu.")}}else if(this.tracks.length){var l=this.tracks.map(function(e){return{"label":e.name,"kind":e.type.toLowerCase(),"default":e.default,"subtitleTrack":e}});this.hls.trigger(ve.NON_NATIVE_TEXT_TRACKS_FOUND,{"tracks":l})}}},t.onManifestLoaded=function(e,t){var r=this;this.config.enableCEA708Captions&&t.captions&&t.captions.forEach(function(e){var t=/(?:CC|SERVICE)([1-4])/.exec(e.instreamId);if(t){var i="textTrack"+t[1],n=r.captionsProperties[i];n&&(n.label=e.name,e.lang&&(n.languageCode=e.lang),n.media=e)}})},t.closedCaptionsForLevel=function(e){var t=this.hls.levels[e.level];return null==t?void 0:t.attrs["CLOSED-CAPTIONS"]},t.onFragLoading=function(e,t){if(this.enabled&&t.frag.type===x){var i,n,r=this.cea608Parser1,o=this.cea608Parser2,a=this.lastSn,s=t.frag,l=s.cc,u=s.sn,c=null!=(i=null==(n=t.part)?void 0:n.index)?i:-1;r&&o&&(u!==a+1||u===a&&c!==this.lastPartIndex+1||l!==this.lastCc)&&(r.reset(),o.reset()),this.lastCc=l,this.lastSn=u,this.lastPartIndex=c}},t.onFragLoaded=function(e,t){var i=t.frag,n=t.payload;if(i.type===Ut)if(n.byteLength){var r=i.decryptdata,o="stats"in t;if(null==r||!r.encrypted||o){var a=this.tracks[i.level],s=this.vttCCs;s[i.cc]||(s[i.cc]={"start":i.start,"prevCC":this.prevCC,"new":!0},this.prevCC=i.cc),a&&a.textCodec===Fo?this._parseIMSC1(i,n):this._parseVTTs(t)}}else this.hls.trigger(ve.SUBTITLE_FRAG_PROCESSED,{"success":!1,"frag":i,"error":new Error("Empty subtitle payload")})},t._parseIMSC1=function(t,e){var i=this,n=this.hls;$o(e,this.initPTS[t.cc],function(e){i._appendCues(e,t.level),n.trigger(ve.SUBTITLE_FRAG_PROCESSED,{"success":!0,"frag":t})},function(e){be.log("Failed to parse IMSC1: "+e),n.trigger(ve.SUBTITLE_FRAG_PROCESSED,{"success":!1,"frag":t,"error":e})})},t._parseVTTs=function(i){var e,n=this,r=i.frag,o=i.payload,t=this.initPTS,a=this.unparsedVttFrags,s=t.length-1;if(t[r.cc]||-1!==s){var l=this.hls;Bo(null!=(e=r.initSegment)&&e.data?A(r.initSegment.data,new Uint8Array(o)):o,this.initPTS[r.cc],this.vttCCs,r.cc,r.start,function(e){n._appendCues(e,r.level),l.trigger(ve.SUBTITLE_FRAG_PROCESSED,{"success":!0,"frag":r})},function(e){var t="Missing initPTS for VTT MPEGTS"===e.message;t?a.push(i):n._fallbackToIMSC1(r,o),be.log("Failed to parse VTT cue: "+e),t&&s>r.cc||l.trigger(ve.SUBTITLE_FRAG_PROCESSED,{"success":!1,"frag":r,"error":e})})}else a.push(i)},t._fallbackToIMSC1=function(e,t){var i=this,n=this.tracks[e.level];n.textCodec||$o(t,this.initPTS[e.cc],function(){n.textCodec=Fo,i._parseIMSC1(e,t)},function(){n.textCodec="wvtt"})},t._appendCues=function(e,t){var i=this.hls;if(this.config.renderTextTracksNatively){var n=this.textTracks[t];if(!n||"disabled"===n.mode)return;e.forEach(function(e){return Gt(n,e)})}else{var r=this.tracks[t];if(!r)return;var o=r.default?"default":"subtitles"+t;i.trigger(ve.CUES_PARSED,{"type":"subtitles","cues":e,"track":o})}},t.onFragDecrypted=function(e,t){t.frag.type===Ut&&this.onFragLoaded(ve.FRAG_LOADED,t)},t.onSubtitleTracksCleared=function(){this.tracks=[],this.captionsTracks={}},t.onFragParsingUserdata=function(e,t){this.initCea608Parsers();var i=this.cea608Parser1,n=this.cea608Parser2;if(this.enabled&&i&&n){var r=t.frag,o=t.samples;if(r.type!==x||"NONE"!==this.closedCaptionsForLevel(r))for(var a=0;a<o.length;a++){var s=o[a].bytes;if(s){var l=this.extractCea608Data(s);i.addData(o[a].pts,l[0]),n.addData(o[a].pts,l[1])}}}},t.onBufferFlushing=function(e,t){var i=t.startOffset,n=t.endOffset,r=t.endOffsetSubtitles,o=t.type,a=this.media;if(a&&!(a.currentTime<n)){if(!o||"video"===o){var s=this.captionsTracks;Object.keys(s).forEach(function(e){return qt(s[e],i,n)})}if(this.config.renderTextTracksNatively&&0===i&&void 0!==r){var l=this.textTracks;Object.keys(l).forEach(function(e){return qt(l[e],i,r)})}}},t.extractCea608Data=function(e){for(var t=[[],[]],i=31&e[0],n=2,r=0;r<i;r++){var o=e[n++],a=127&e[n++],s=127&e[n++];if((0!==a||0!==s)&&0!=(4&o)){var l=3&o;0!==l&&1!==l||(t[l].push(a),t[l].push(s))}}return t},e}();function Zo(e){return e.characteristics&&/transcribes-spoken-dialog/gi.test(e.characteristics)&&/describes-music-and-sound/gi.test(e.characteristics)?"captions":"subtitles"}function Xo(e,t){return!!e&&e.kind===Zo(t)&&Vr(t,e)}var Yo=function(){function r(e){this.hls=void 0,this.autoLevelCapping=void 0,this.firstLevel=void 0,this.media=void 0,this.restrictedLevels=void 0,this.timer=void 0,this.clientRect=void 0,this.streamController=void 0,this.hls=e,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.firstLevel=-1,this.media=null,this.restrictedLevels=[],this.timer=void 0,this.clientRect=null,this.registerListeners()}var e=r.prototype;return e.setStreamController=function(e){this.streamController=e},e.destroy=function(){this.hls&&this.unregisterListener(),this.timer&&this.stopCapping(),this.media=null,this.clientRect=null,this.hls=this.streamController=null},e.registerListeners=function(){var e=this.hls;e.on(ve.FPS_DROP_LEVEL_CAPPING,this.onFpsDropLevelCapping,this),e.on(ve.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(ve.MANIFEST_PARSED,this.onManifestParsed,this),e.on(ve.LEVELS_UPDATED,this.onLevelsUpdated,this),e.on(ve.BUFFER_CODECS,this.onBufferCodecs,this),e.on(ve.MEDIA_DETACHING,this.onMediaDetaching,this)},e.unregisterListener=function(){var e=this.hls;e.off(ve.FPS_DROP_LEVEL_CAPPING,this.onFpsDropLevelCapping,this),e.off(ve.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(ve.MANIFEST_PARSED,this.onManifestParsed,this),e.off(ve.LEVELS_UPDATED,this.onLevelsUpdated,this),e.off(ve.BUFFER_CODECS,this.onBufferCodecs,this),e.off(ve.MEDIA_DETACHING,this.onMediaDetaching,this)},e.onFpsDropLevelCapping=function(e,t){var i=this.hls.levels[t.droppedLevel];this.isLevelAllowed(i)&&this.restrictedLevels.push({"bitrate":i.bitrate,"height":i.height,"width":i.width})},e.onMediaAttaching=function(e,t){this.media=t.media instanceof HTMLVideoElement?t.media:null,this.clientRect=null,this.timer&&this.hls.levels.length&&this.detectPlayerSize()},e.onManifestParsed=function(e,t){var i=this.hls;this.restrictedLevels=[],this.firstLevel=t.firstLevel,i.config.capLevelToPlayerSize&&t.video&&this.startCapping()},e.onLevelsUpdated=function(e,t){this.timer&&J(this.autoLevelCapping)&&this.detectPlayerSize()},e.onBufferCodecs=function(e,t){this.hls.config.capLevelToPlayerSize&&t.video&&this.startCapping()},e.onMediaDetaching=function(){this.stopCapping()},e.detectPlayerSize=function(){if(this.media){if(this.mediaHeight<=0||this.mediaWidth<=0)return void(this.clientRect=null);var e=this.hls.levels;if(e.length){var t=this.hls,i=this.getMaxLevel(e.length-1);i!==this.autoLevelCapping&&be.log("Setting autoLevelCapping to "+i+": "+e[i].height+"p@"+e[i].bitrate+" for media "+this.mediaWidth+"x"+this.mediaHeight),t.autoLevelCapping=i,t.autoLevelCapping>this.autoLevelCapping&&this.streamController&&this.streamController.nextLevelSwitch(),this.autoLevelCapping=t.autoLevelCapping}}},e.getMaxLevel=function(i){var n=this,e=this.hls.levels;if(!e.length)return-1;var t=e.filter(function(e,t){return n.isLevelAllowed(e)&&t<=i});return this.clientRect=null,r.getMaxLevelByMediaSize(t,this.mediaWidth,this.mediaHeight)},e.startCapping=function(){this.timer||(this.autoLevelCapping=Number.POSITIVE_INFINITY,self.clearInterval(this.timer),this.timer=self.setInterval(this.detectPlayerSize.bind(this),1e3),this.detectPlayerSize())},e.stopCapping=function(){this.restrictedLevels=[],this.firstLevel=-1,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.timer&&(self.clearInterval(this.timer),this.timer=void 0)},e.getDimensions=function(){if(this.clientRect)return this.clientRect;var e=this.media,t={"width":0,"height":0};if(e){var i=e.getBoundingClientRect();t.width=i.width,t.height=i.height,t.width||t.height||(t.width=i.right-i.left||e.width||0,t.height=i.bottom-i.top||e.height||0)}return this.clientRect=t,t},e.isLevelAllowed=function(t){return!this.restrictedLevels.some(function(e){return t.bitrate===e.bitrate&&t.width===e.width&&t.height===e.height})},r.getMaxLevelByMediaSize=function(e,t,i){if(null==e||!e.length)return-1;for(var n,r,o=e.length-1,a=Math.max(t,i),s=0;s<e.length;s+=1){var l=e[s];if((l.width>=a||l.height>=a)&&(n=l,!(r=e[s+1])||n.width!==r.width||n.height!==r.height)){o=s;break}}return o},l(r,[{"key":"mediaWidth","get":function(){return this.getDimensions().width*this.contentScaleFactor}},{"key":"mediaHeight","get":function(){return this.getDimensions().height*this.contentScaleFactor}},{"key":"contentScaleFactor","get":function(){var e=1;if(!this.hls.config.ignoreDevicePixelRatio)try{e=self.devicePixelRatio}catch(e){}return e}}]),r}(),Qo=function(){function e(e){this.hls=void 0,this.isVideoPlaybackQualityAvailable=!1,this.timer=void 0,this.media=null,this.lastTime=void 0,this.lastDroppedFrames=0,this.lastDecodedFrames=0,this.streamController=void 0,this.hls=e,this.registerListeners()}var t=e.prototype;return t.setStreamController=function(e){this.streamController=e},t.registerListeners=function(){this.hls.on(ve.MEDIA_ATTACHING,this.onMediaAttaching,this)},t.unregisterListeners=function(){this.hls.off(ve.MEDIA_ATTACHING,this.onMediaAttaching,this)},t.destroy=function(){this.timer&&clearInterval(this.timer),this.unregisterListeners(),this.isVideoPlaybackQualityAvailable=!1,this.media=null},t.onMediaAttaching=function(e,t){var i=this.hls.config;if(i.capLevelOnFPSDrop){var n=t.media instanceof self.HTMLVideoElement?t.media:null;this.media=n,n&&"function"==typeof n.getVideoPlaybackQuality&&(this.isVideoPlaybackQualityAvailable=!0),self.clearInterval(this.timer),this.timer=self.setInterval(this.checkFPSInterval.bind(this),i.fpsDroppedMonitoringPeriod)}},t.checkFPS=function(e,t,i){var n=performance.now();if(t){if(this.lastTime){var r=n-this.lastTime,o=i-this.lastDroppedFrames,a=t-this.lastDecodedFrames,s=1e3*o/r,l=this.hls;if(l.trigger(ve.FPS_DROP,{"currentDropped":o,"currentDecoded":a,"totalDroppedFrames":i}),s>0&&o>l.config.fpsDroppedMonitoringThreshold*a){var u=l.currentLevel;be.warn("drop FPS ratio greater than max allowed value for currentLevel: "+u),u>0&&(-1===l.autoLevelCapping||l.autoLevelCapping>=u)&&(u-=1,l.trigger(ve.FPS_DROP_LEVEL_CAPPING,{"level":u,"droppedLevel":l.currentLevel}),l.autoLevelCapping=u,this.streamController.nextLevelSwitch())}}this.lastTime=n,this.lastDroppedFrames=i,this.lastDecodedFrames=t}},t.checkFPSInterval=function(){var e=this.media;if(e)if(this.isVideoPlaybackQualityAvailable){var t=e.getVideoPlaybackQuality();this.checkFPS(e,t.totalVideoFrames,t.droppedVideoFrames)}else this.checkFPS(e,e.webkitDecodedFrameCount,e.webkitDroppedFrameCount)},e}(),Jo="[eme]",ea=function(){function r(e){this.hls=void 0,this.config=void 0,this.media=null,this.keyFormatPromise=null,this.keySystemAccessPromises={},this._requestLicenseFailureCount=0,this.mediaKeySessions=[],this.keyIdToKeySessionPromise={},this.setMediaKeysQueue=r.CDMCleanupPromise?[r.CDMCleanupPromise]:[],this.onMediaEncrypted=this._onMediaEncrypted.bind(this),this.onWaitingForKey=this._onWaitingForKey.bind(this),this.debug=be.debug.bind(be,Jo),this.log=be.log.bind(be,Jo),this.warn=be.warn.bind(be,Jo),this.error=be.error.bind(be,Jo),this.hls=e,this.config=e.config,this.registerListeners()}var e=r.prototype;return e.destroy=function(){this.unregisterListeners(),this.onMediaDetached();var e=this.config;e.requestMediaKeySystemAccessFunc=null,e.licenseXhrSetup=e.licenseResponseCallback=void 0,e.drmSystems=e.drmSystemOptions={},this.hls=this.onMediaEncrypted=this.onWaitingForKey=this.keyIdToKeySessionPromise=null,this.config=null},e.registerListeners=function(){this.hls.on(ve.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.on(ve.MEDIA_DETACHED,this.onMediaDetached,this),this.hls.on(ve.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.on(ve.MANIFEST_LOADED,this.onManifestLoaded,this)},e.unregisterListeners=function(){this.hls.off(ve.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.off(ve.MEDIA_DETACHED,this.onMediaDetached,this),this.hls.off(ve.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.off(ve.MANIFEST_LOADED,this.onManifestLoaded,this)},e.getLicenseServerUrl=function(e){var t=this.config,i=t.drmSystems,n=t.widevineLicenseUrl,r=i[e];if(r)return r.licenseUrl;if(e===m.WIDEVINE&&n)return n;throw new Error('no license server URL configured for key-system "'+e+'"')},e.getServerCertificateUrl=function(e){var t=this.config.drmSystems[e];if(t)return t.serverCertificateUrl;this.log('No Server Certificate in config.drmSystems["'+e+'"]')},e.attemptKeySystemAccess=function(e){var a=this,t=this.hls.levels,i=function(e,t,i){return!!e&&i.indexOf(e)===t},s=t.map(function(e){return e.audioCodec}).filter(i),l=t.map(function(e){return e.videoCodec}).filter(i);return s.length+l.length===0&&l.push("avc1.42e01e"),new Promise(function(r,o){!function t(i){var n=i.shift();a.getMediaKeysPromise(n,s,l).then(function(e){return r({"keySystem":n,"mediaKeys":e})}).catch(function(e){i.length?t(i):o(e instanceof g?e:new g({"type":me.KEY_SYSTEM_ERROR,"details":ye.KEY_SYSTEM_NO_ACCESS,"error":e,"fatal":!0},e.message))})}(e)})},e.requestMediaKeySystemAccess=function(e,t){var i=this.config.requestMediaKeySystemAccessFunc;if("function"!=typeof i){var n="Configured requestMediaKeySystemAccess is not a function "+i;return null===Te&&"http:"===self.location.protocol&&(n="navigator.requestMediaKeySystemAccess is not available over insecure protocol "+location.protocol),Promise.reject(new Error(n))}return i(e,t)},e.getMediaKeysPromise=function(n,e,t){var r=this,i=function(e,t,i,n){var r;switch(e){case m.FAIRPLAY:r=["cenc","sinf"];break;case m.WIDEVINE:case m.PLAYREADY:r=["cenc"];break;case m.CLEARKEY:r=["cenc","keyids"];break;default:throw new Error("Unknown key-system: "+e)}return function(e,t,i,n){return[{"initDataTypes":e,"persistentState":n.persistentState||"optional","distinctiveIdentifier":n.distinctiveIdentifier||"optional","sessionTypes":n.sessionTypes||[n.sessionType||"temporary"],"audioCapabilities":t.map(function(e){return{"contentType":'audio/mp4; codecs="'+e+'"',"robustness":n.audioRobustness||"","encryptionScheme":n.audioEncryptionScheme||null}}),"videoCapabilities":i.map(function(e){return{"contentType":'video/mp4; codecs="'+e+'"',"robustness":n.videoRobustness||"","encryptionScheme":n.videoEncryptionScheme||null}})}]}(r,t,i,n)}(n,e,t,this.config.drmSystemOptions),o=this.keySystemAccessPromises[n],a=null==o?void 0:o.keySystemAccess;if(!a){this.log('Requesting encrypted media "'+n+'" key-system access with config: '+JSON.stringify(i)),a=this.requestMediaKeySystemAccess(n,i);var s=this.keySystemAccessPromises[n]={"keySystemAccess":a};return a.catch(function(e){r.log('Failed to obtain access to key-system "'+n+'": '+e)}),a.then(function(e){r.log('Access for key-system "'+e.keySystem+'" obtained');var i=r.fetchServerCertificate(n);return r.log('Create media-keys for "'+n+'"'),s.mediaKeys=e.createMediaKeys().then(function(t){return r.log('Media-keys created for "'+n+'"'),i.then(function(e){return e?r.setMediaKeysServerCertificate(t,n,e):t})}),s.mediaKeys.catch(function(e){r.error('Failed to create media-keys for "'+n+'"}: '+e)}),s.mediaKeys})}return a.then(function(){return o.mediaKeys})},e.createMediaKeySessionContext=function(e){var t=e.decryptdata,i=e.keySystem,n=e.mediaKeys;this.log('Creating key-system session "'+i+'" keyId: '+y(t.keyId||[]));var r=n.createSession(),o={"decryptdata":t,"keySystem":i,"mediaKeys":n,"mediaKeysSession":r,"keyStatus":"status-pending"};return this.mediaKeySessions.push(o),o},e.renewKeySession=function(e){var t=e.decryptdata;if(t.pssh){var i=this.createMediaKeySessionContext(e),n=this.getKeyIdString(t);this.keyIdToKeySessionPromise[n]=this.generateRequestWithPreferredKeySession(i,"cenc",t.pssh,"expired")}else this.warn("Could not renew expired session. Missing pssh initData.");this.removeSession(e)},e.getKeyIdString=function(e){if(!e)throw new Error("Could not read keyId of undefined decryptdata");if(null===e.keyId)throw new Error("keyId is null");return y(e.keyId)},e.updateKeySession=function(e,t){var i,n=e.mediaKeysSession;return this.log('Updating key-session "'+n.sessionId+'" for keyID '+y((null==(i=e.decryptdata)?void 0:i.keyId)||[])+"\n      } (data length: "+(t?t.byteLength:t)+")"),n.update(t)},e.selectKeySystemFormat=function(e){var t=Object.keys(e.levelkeys||{});return this.keyFormatPromise||(this.log("Selecting key-system from fragment (sn: "+e.sn+" "+e.type+": "+e.level+") key formats "+t.join(", ")),this.keyFormatPromise=this.getKeyFormatPromise(t)),this.keyFormatPromise},e.getKeyFormatPromise=function(i){var o=this;return new Promise(function(n,r){var t=Ee(o.config),e=i.map(he).filter(function(e){return!!e&&-1!==t.indexOf(e)});return o.getKeySystemSelectionPromise(e).then(function(e){var t=e.keySystem,i=pe(t);i?n(i):r(new Error('Unable to find format for key-system "'+t+'"'))}).catch(r)})},e.loadKey=function(n){var r=this,o=n.keyInfo.decryptdata,e=this.getKeyIdString(o),a="(keyId: "+e+' format: "'+o.keyFormat+'" method: '+o.method+" uri: "+o.uri+")";this.log("Starting session for key "+a);var t=this.keyIdToKeySessionPromise[e];return t||(t=this.keyIdToKeySessionPromise[e]=this.getKeySystemForKeyPromise(o).then(function(e){var t=e.keySystem,i=e.mediaKeys;return r.throwIfDestroyed(),r.log("Handle encrypted media sn: "+n.frag.sn+" "+n.frag.type+": "+n.frag.level+" using key "+a),r.attemptSetMediaKeys(t,i).then(function(){r.throwIfDestroyed();var e=r.createMediaKeySessionContext({"keySystem":t,"mediaKeys":i,"decryptdata":o});return r.generateRequestWithPreferredKeySession(e,"cenc",o.pssh,"playlist-key")})})).catch(function(e){return r.handleError(e)}),t},e.throwIfDestroyed=function(e){if(!this.hls)throw new Error("invalid state")},e.handleError=function(e){this.hls&&(this.error(e.message),e instanceof g?this.hls.trigger(ve.ERROR,e.data):this.hls.trigger(ve.ERROR,{"type":me.KEY_SYSTEM_ERROR,"details":ye.KEY_SYSTEM_NO_KEYS,"error":e,"fatal":!0}))},e.getKeySystemForKeyPromise=function(e){var t=this.getKeyIdString(e),i=this.keyIdToKeySessionPromise[t];if(!i){var n=he(e.keyFormat),r=n?[n]:Ee(this.config);return this.attemptKeySystemAccess(r)}return i},e.getKeySystemSelectionPromise=function(e){if(e.length||(e=Ee(this.config)),0===e.length)throw new g({"type":me.KEY_SYSTEM_ERROR,"details":ye.KEY_SYSTEM_NO_CONFIGURED_LICENSE,"fatal":!0},"Missing key-system license configuration options "+JSON.stringify({"drmSystems":this.config.drmSystems}));return this.attemptKeySystemAccess(e)},e._onMediaEncrypted=function(e){var o=this,a=e.initDataType,s=e.initData;if(this.debug('"'+e.type+'" event: init data type: "'+a+'"'),null!==s){var l,t;if("sinf"===a&&this.config.drmSystems[m.FAIRPLAY]){var i=W(new Uint8Array(s));try{var n=Y(JSON.parse(i).sinf),r=et(new Uint8Array(n));if(!r)return;l=r.subarray(8,24),t=m.FAIRPLAY}catch(e){return void this.warn('Failed to parse sinf "encrypted" event message initData')}}else{var u=function(e){if(!(e instanceof ArrayBuffer)||e.byteLength<32)return null;var t={"version":0,"systemId":"","kids":null,"data":null},i=new DataView(e),n=i.getUint32(0);if(e.byteLength!==n&&n>44)return null;if(1886614376!==i.getUint32(4))return null;if(t.version=i.getUint32(8)>>>24,t.version>1)return null;t.systemId=y(new Uint8Array(e,12,16));var r=i.getUint32(28);if(0===t.version){if(n-32<r)return null;t.data=new Uint8Array(e,32,r)}else if(1===t.version){t.kids=[];for(var o=0;o<r;o++)t.kids.push(new Uint8Array(e,32+16*o,16))}return t}(s);if(null===u)return;0===u.version&&u.systemId===fe&&u.data&&(l=u.data.subarray(8,24)),t=function(e){if(e===fe)return m.WIDEVINE}(u.systemId)}if(t&&l){for(var c,d=y(l),h=this.keyIdToKeySessionPromise,f=this.mediaKeySessions,p=h[d],g=function(){var e=f[v],t=e.decryptdata;if(t.pssh||!t.keyId)return 0;var i=y(t.keyId);return d===i||-1!==t.uri.replace(/-/g,"").indexOf(d)?(p=h[i],delete h[i],t.pssh=new Uint8Array(s),t.keyId=l,p=h[d]=p.then(function(){return o.generateRequestWithPreferredKeySession(e,a,s,"encrypted-event-key-match")}),1):void 0},v=0;v<f.length&&(0===(c=g())||1!==c);v++);p||(p=h[d]=this.getKeySystemSelectionPromise([t]).then(function(e){var t,i=e.keySystem,n=e.mediaKeys;o.throwIfDestroyed();var r=new lt("ISO-23001-7",d,null!=(t=pe(i))?t:"");return r.pssh=new Uint8Array(s),r.keyId=l,o.attemptSetMediaKeys(i,n).then(function(){o.throwIfDestroyed();var e=o.createMediaKeySessionContext({"decryptdata":r,"keySystem":i,"mediaKeys":n});return o.generateRequestWithPreferredKeySession(e,a,s,"encrypted-event-no-match")})})),p.catch(function(e){return o.handleError(e)})}}},e._onWaitingForKey=function(e){this.log('"'+e.type+'" event')},e.attemptSetMediaKeys=function(e,t){var i=this,n=this.setMediaKeysQueue.slice();this.log('Setting media-keys for "'+e+'"');var r=Promise.all(n).then(function(){if(!i.media)throw new Error("Attempted to set mediaKeys without media element attached");return i.media.setMediaKeys(t)});return this.setMediaKeysQueue.push(r),r.then(function(){i.log('Media-keys set for "'+e+'"'),n.push(r),i.setMediaKeysQueue=i.setMediaKeysQueue.filter(function(e){return-1===n.indexOf(e)})})},e.generateRequestWithPreferredKeySession=function(r,e,t,i){var n,o,a=this,s=null==(n=this.config.drmSystems)||null==(o=n[r.keySystem])?void 0:o.generateRequest;if(s)try{var l=s.call(this.hls,e,t,r);if(!l)throw new Error("Invalid response from configured generateRequest filter");e=l.initDataType,t=r.decryptdata.pssh=l.initData?new Uint8Array(l.initData):null}catch(r){var u;if(this.warn(r.message),null!=(u=this.hls)&&u.config.debug)throw r}if(null===t)return this.log('Skipping key-session request for "'+i+'" (no initData)'),Promise.resolve(r);var c=this.getKeyIdString(r.decryptdata);this.log('Generating key-session request for "'+i+'": '+c+" (init data type: "+e+" length: "+(t?t.byteLength:null)+")");var d=new jr,h=r._onmessage=function(e){var t=r.mediaKeysSession;if(t){var i=e.messageType,n=e.message;a.log('"'+i+'" message event for session "'+t.sessionId+'" message size: '+n.byteLength),"license-request"===i||"license-renewal"===i?a.renewLicense(r,n).catch(function(e){a.handleError(e),d.emit("error",e)}):"license-release"===i?r.keySystem===m.FAIRPLAY&&(a.updateKeySession(r,ae("acknowledged")),a.removeSession(r)):a.warn('unhandled media key message type "'+i+'"')}else d.emit("error",new Error("invalid state"))},f=r._onkeystatuseschange=function(e){if(r.mediaKeysSession){a.onKeyStatusChange(r);var t=r.keyStatus;d.emit("keyStatus",t),"expired"===t&&(a.warn(r.keySystem+" expired for key "+c),a.renewKeySession(r))}else d.emit("error",new Error("invalid state"))};r.mediaKeysSession.addEventListener("message",h),r.mediaKeysSession.addEventListener("keystatuseschange",f);var p=new Promise(function(t,i){d.on("error",i),d.on("keyStatus",function(e){e.startsWith("usable")?t():"output-restricted"===e?i(new g({"type":me.KEY_SYSTEM_ERROR,"details":ye.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED,"fatal":!1},"HDCP level output restricted")):"internal-error"===e?i(new g({"type":me.KEY_SYSTEM_ERROR,"details":ye.KEY_SYSTEM_STATUS_INTERNAL_ERROR,"fatal":!0},'key status changed to "'+e+'"')):"expired"===e?i(new Error("key expired while generating request")):a.warn('unhandled key status change "'+e+'"')})});return r.mediaKeysSession.generateRequest(e,t).then(function(){var e;a.log('Request generated for key-session "'+(null==(e=r.mediaKeysSession)?void 0:e.sessionId)+'" keyId: '+c)}).catch(function(e){throw new g({"type":me.KEY_SYSTEM_ERROR,"details":ye.KEY_SYSTEM_NO_SESSION,"error":e,"fatal":!1},"Error generating key-session request: "+e)}).then(function(){return p}).catch(function(e){throw d.removeAllListeners(),a.removeSession(r),e}).then(function(){return d.removeAllListeners(),r})},e.onKeyStatusChange=function(i){var n=this;i.mediaKeysSession.keyStatuses.forEach(function(e,t){n.log('key status change "'+e+'" for keyStatuses keyId: '+y("buffer"in t?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):new Uint8Array(t))+" session keyId: "+y(new Uint8Array(i.decryptdata.keyId||[]))+" uri: "+i.decryptdata.uri),i.keyStatus=e})},e.fetchServerCertificate=function(s){var n=this.config,l=new(0,n.loader)(n),u=this.getServerCertificateUrl(s);return u?(this.log('Fetching server certificate for "'+s+'"'),new Promise(function(r,o){var a={"responseType":"arraybuffer","url":u},e=n.certLoadPolicy.default,t={"loadPolicy":e,"timeout":e.maxLoadTimeMs,"maxRetry":0,"retryDelay":0,"maxRetryDelay":0},i={"onSuccess":function(e,t,i,n){r(e.data)},"onError":function(e,t,i,n){o(new g({"type":me.KEY_SYSTEM_ERROR,"details":ye.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED,"fatal":!0,"networkDetails":i,"response":k({"url":a.url,"data":void 0},e)},'"'+s+'" certificate request failed ('+u+"). Status: "+e.code+" ("+e.text+")"))},"onTimeout":function(e,t,i){o(new g({"type":me.KEY_SYSTEM_ERROR,"details":ye.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED,"fatal":!0,"networkDetails":i,"response":{"url":a.url,"data":void 0}},'"'+s+'" certificate request timed out ('+u+")"))},"onAbort":function(e,t,i){o(new Error("aborted"))}};l.load(a,t,i)})):Promise.resolve()},e.setMediaKeysServerCertificate=function(n,r,o){var a=this;return new Promise(function(t,i){n.setServerCertificate(o).then(function(e){a.log("setServerCertificate "+(e?"success":"not supported by CDM")+" ("+(null==o?void 0:o.byteLength)+') on "'+r+'"'),t(n)}).catch(function(e){i(new g({"type":me.KEY_SYSTEM_ERROR,"details":ye.KEY_SYSTEM_SERVER_CERTIFICATE_UPDATE_FAILED,"error":e,"fatal":!0},e.message))})})},e.renewLicense=function(t,e){var i=this;return this.requestLicense(t,new Uint8Array(e)).then(function(e){return i.updateKeySession(t,new Uint8Array(e)).catch(function(e){throw new g({"type":me.KEY_SYSTEM_ERROR,"details":ye.KEY_SYSTEM_SESSION_UPDATE_FAILED,"error":e,"fatal":!0},e.message)})})},e.unpackPlayReadyKeyMessage=function(e,t){var i=String.fromCharCode.apply(null,new Uint16Array(t.buffer));if(!i.includes("PlayReadyKeyMessage"))return e.setRequestHeader("Content-Type","text/xml; charset=utf-8"),t;var n=(new DOMParser).parseFromString(i,"application/xml"),r=n.querySelectorAll("HttpHeader");if(r.length>0)for(var o,a=0,s=r.length;a<s;a++){var l,u,c=null==(l=(o=r[a]).querySelector("name"))?void 0:l.textContent,d=null==(u=o.querySelector("value"))?void 0:u.textContent;c&&d&&e.setRequestHeader(c,d)}var h=n.querySelector("Challenge"),f=null==h?void 0:h.textContent;if(!f)throw new Error("Cannot find <Challenge> in key message");return ae(atob(f))},e.setupLicenseXHR=function(t,i,n,r){var o=this,a=this.config.licenseXhrSetup;return a?Promise.resolve().then(function(){if(!n.decryptdata)throw new Error("Key removed");return a.call(o.hls,t,i,n,r)}).catch(function(e){if(!n.decryptdata)throw e;return t.open("POST",i,!0),a.call(o.hls,t,i,n,r)}).then(function(e){return t.readyState||t.open("POST",i,!0),{"xhr":t,"licenseChallenge":e||r}}):(t.open("POST",i,!0),Promise.resolve({"xhr":t,"licenseChallenge":r}))},e.requestLicense=function(u,c){var d=this,h=this.config.keyLoadPolicy.default;return new Promise(function(o,a){var s=d.getLicenseServerUrl(u.keySystem);d.log("Sending license request to URL: "+s);var l=new XMLHttpRequest;l.responseType="arraybuffer",l.onreadystatechange=function(){if(!d.hls||!u.mediaKeysSession)return a(new Error("invalid state"));if(4===l.readyState)if(200===l.status){d._requestLicenseFailureCount=0;var e=l.response;d.log("License received "+(e instanceof ArrayBuffer?e.byteLength:e));var t=d.config.licenseResponseCallback;if(t)try{e=t.call(d.hls,l,s,u)}catch(e){d.error(e)}o(e)}else{var i=h.errorRetry,n=i?i.maxNumRetry:0;if(d._requestLicenseFailureCount++,d._requestLicenseFailureCount>n||l.status>=400&&l.status<500)a(new g({"type":me.KEY_SYSTEM_ERROR,"details":ye.KEY_SYSTEM_LICENSE_REQUEST_FAILED,"fatal":!0,"networkDetails":l,"response":{"url":s,"data":void 0,"code":l.status,"text":l.statusText}},"License Request XHR failed ("+s+"). Status: "+l.status+" ("+l.statusText+")"));else{var r=n-d._requestLicenseFailureCount+1;d.warn("Retrying license request, "+r+" attempts left"),d.requestLicense(u,c).then(o,a)}}},u.licenseXhr&&u.licenseXhr.readyState!==XMLHttpRequest.DONE&&u.licenseXhr.abort(),u.licenseXhr=l,d.setupLicenseXHR(l,s,u,c).then(function(e){var t=e.xhr,i=e.licenseChallenge;u.keySystem==m.PLAYREADY&&(i=d.unpackPlayReadyKeyMessage(t,i)),t.send(i)})})},e.onMediaAttached=function(e,t){if(this.config.emeEnabled){var i=t.media;this.media=i,i.addEventListener("encrypted",this.onMediaEncrypted),i.addEventListener("waitingforkey",this.onWaitingForKey)}},e.onMediaDetached=function(){var t=this,e=this.media,i=this.mediaKeySessions;e&&(e.removeEventListener("encrypted",this.onMediaEncrypted),e.removeEventListener("waitingforkey",this.onWaitingForKey),this.media=null),this._requestLicenseFailureCount=0,this.setMediaKeysQueue=[],this.mediaKeySessions=[],this.keyIdToKeySessionPromise={},lt.clearKeyUriToKeyIdMap();var n=i.length;r.CDMCleanupPromise=Promise.all(i.map(function(e){return t.removeSession(e)}).concat(null==e?void 0:e.setMediaKeys(null).catch(function(e){t.log("Could not clear media keys: "+e)}))).then(function(){n&&(t.log("finished closing key sessions and clearing media keys"),i.length=0)}).catch(function(e){t.log("Could not close sessions and clear media keys: "+e)})},e.onManifestLoading=function(){this.keyFormatPromise=null},e.onManifestLoaded=function(e,t){var i=t.sessionKeys;if(i&&this.config.emeEnabled&&!this.keyFormatPromise){var n=i.reduce(function(e,t){return-1===e.indexOf(t.keyFormat)&&e.push(t.keyFormat),e},[]);this.log("Selecting key-system from session-keys "+n.join(", ")),this.keyFormatPromise=this.getKeyFormatPromise(n)}},e.removeSession=function(e){var t=this,i=e.mediaKeysSession,n=e.licenseXhr;if(i){this.log("Remove licenses and keys and close session "+i.sessionId),e._onmessage&&(i.removeEventListener("message",e._onmessage),e._onmessage=void 0),e._onkeystatuseschange&&(i.removeEventListener("keystatuseschange",e._onkeystatuseschange),e._onkeystatuseschange=void 0),n&&n.readyState!==XMLHttpRequest.DONE&&n.abort(),e.mediaKeysSession=e.decryptdata=e.licenseXhr=void 0;var r=this.mediaKeySessions.indexOf(e);return r>-1&&this.mediaKeySessions.splice(r,1),i.remove().catch(function(e){t.log("Could not remove session: "+e)}).then(function(){return i.close()}).catch(function(e){t.log("Could not close session: "+e)})}},r}();ea.CDMCleanupPromise=void 0;var c,ta,ia,na,g=function(n){function e(e,t){var i;return(i=n.call(this,t)||this).data=void 0,e.error||(e.error=new Error(t)),i.data=e,e.err=e.error,i}return u(e,n),e}(f(Error));!function(e){e.MANIFEST="m",e.AUDIO="a",e.VIDEO="v",e.MUXED="av",e.INIT="i",e.CAPTION="c",e.TIMED_TEXT="tt",e.KEY="k",e.OTHER="o"}(c||(c={})),function(e){e.DASH="d",e.HLS="h",e.SMOOTH="s",e.OTHER="o"}(ta||(ta={})),function(e){e.OBJECT="CMCD-Object",e.REQUEST="CMCD-Request",e.SESSION="CMCD-Session",e.STATUS="CMCD-Status"}(ia||(ia={}));var ra=((na={})[ia.OBJECT]=["br","d","ot","tb"],na[ia.REQUEST]=["bl","dl","mtp","nor","nrr","su"],na[ia.SESSION]=["cid","pr","sf","sid","st","v"],na[ia.STATUS]=["bs","rtp"],na),oa=function t(e,i){this.value=void 0,this.params=void 0,Array.isArray(e)&&(e=e.map(function(e){return e instanceof t?e:new t(e)})),this.value=e,this.params=i},aa=function(e){this.description=void 0,this.description=e},sa="Dict";function la(e,t,i,n){return new Error("failed to "+e+' "'+(r=t,(Array.isArray(r)?JSON.stringify(r):r instanceof Map?"Map{}":r instanceof Set?"Set{}":"object"==typeof r?JSON.stringify(r):String(r))+'" as ')+i,{"cause":n});var r}var ua="Bare Item",ca="Boolean",da="Byte Sequence",ha="Decimal",fa="Integer",pa=/[\x00-\x1f\x7f]+/,ga="Token",va="Key";function o(e,t,i){return la("serialize",e,t,i)}function ma(e){if(!1===ArrayBuffer.isView(e))throw o(e,da);return":"+(t=e,btoa(String.fromCharCode.apply(String,t))+":");var t}function ya(e){if(function(e){return e<-999999999999999||999999999999999<e}(e))throw o(e,fa);return e.toString()}function ba(e,t){if(e<0)return-ba(-e,t);var i=Math.pow(10,t);if(Math.abs(e*i%1-.5)<Number.EPSILON){var n=Math.floor(e*i);return(n%2==0?n:n+1)/i}return Math.round(e*i)/i}function _a(e){var t=ba(e,3);if(Math.floor(Math.abs(t)).toString().length>12)throw o(e,ha);var i=t.toString();return i.includes(".")?i:i+".0"}var wa="String";function Ea(e){var t,i=(t=e).description||t.toString().slice(7,-1);if(!1===/^([a-zA-Z*])([!#$%&'*+\-.^_`|~\w:/]*)$/.test(i))throw o(i,ga);return i}function xa(e){switch(typeof e){case"number":if(!J(e))throw o(e,ua);return Number.isInteger(e)?ya(e):_a(e);case"string":return function(e){if(pa.test(e))throw o(e,wa);return'"'+e.replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'}(e);case"symbol":return Ea(e);case"boolean":return function(e){if("boolean"!=typeof e)throw o(e,ca);return e?"?1":"?0"}(e);case"object":if(e instanceof Date)return function(e){return"@"+ya(e.getTime()/1e3)}(e);if(e instanceof Uint8Array)return ma(e);if(e instanceof aa)return Ea(e);default:throw o(e,ua)}}function Ta(e){if(!1===/^[a-z*][a-z0-9\-_.*]*$/.test(e))throw o(e,va);return e}function Sa(e){return null==e?"":Object.entries(e).map(function(e){var t=e[0],i=e[1];return!0===i?";"+Ta(t):";"+Ta(t)+"="+xa(i)}).join("")}function ka(e){return e instanceof oa?""+xa(e.value)+Sa(e.params):xa(e)}function Ra(e,t){var i;if(void 0===t&&(t={"whitespace":!0}),"object"!=typeof e)throw o(e,sa);var n=e instanceof Map?e.entries():Object.entries(e),r=null!=(i=t)&&i.whitespace?" ":"";return Array.from(n).map(function(e){var t=e[0],i=e[1];i instanceof oa==0&&(i=new oa(i));var n,r=Ta(t);return!0===i.value?r+=Sa(i.params):(r+="=",Array.isArray(i.value)?r+="("+(n=i).value.map(ka).join(" ")+")"+Sa(n.params):r+=ka(i)),r}).join(","+r)}var Ca=function(e){return"ot"===e||"sf"===e||"st"===e},Aa=function(e){return"number"==typeof e?J(e):null!=e&&""!==e&&!1!==e},Oa=function(e){return Math.round(e)},La=function(e){return 100*Oa(e/100)},Pa={"br":Oa,"d":Oa,"bl":La,"dl":La,"mtp":La,"nor":function(e,t){return null!=t&&t.baseUrl&&(e=function(e,t){var i=new URL(e),n=new URL(t);if(i.origin!==n.origin)return e;for(var r=i.pathname.split("/").slice(1),o=n.pathname.split("/").slice(1,-1);r[0]===o[0];)r.shift(),o.shift();for(;o.length;)o.shift(),r.unshift("..");return r.join("/")}(e,t.baseUrl)),encodeURIComponent(e)},"rtp":La,"tb":Oa};function Ia(e,t){return void 0===t&&(t={}),e?function(e,t){return Ra(e,t)}(function(n,r){var o={};if(null==n||"object"!=typeof n)return o;var e=Object.keys(n).sort(),a=ge({},Pa,null==r?void 0:r.formatters),s=null==r?void 0:r.filter;return e.forEach(function(e){if(null==s||!s(e)){var t=n[e],i=a[e];i&&(t=i(t,r)),"v"===e&&1===t||"pr"==e&&1===t||Aa(t)&&(Ca(e)&&"string"==typeof t&&(t=new aa(t)),o[e]=t)}}),o}(e,t),ge({"whitespace":!1},t)):""}function Da(e,t,i){return ge(e,function(e,r){var t;if(void 0===r&&(r={}),!e)return{};var i=Object.entries(e),a=Object.entries(ra).concat(Object.entries((null==(t=r)?void 0:t.customHeaderMap)||{})),n=i.reduce(function(e,t){var i,n=t[0],r=t[1],o=(null==(i=a.find(function(e){return e[1].includes(n)}))?void 0:i[0])||ia.REQUEST;return null!=e[o]||(e[o]={}),e[o][n]=r,e},{});return Object.entries(n).reduce(function(e,t){var i=t[0],n=t[1];return e[i]=Ia(n,r),e},{})}(t,i))}var Ma="CMCD",Ba=/CMCD=[^&#]+/;function Fa(e,t,i){var n=function(e,t){if(void 0===t&&(t={}),!e)return"";var i=Ia(e,t);return Ma+"="+encodeURIComponent(i)}(t,i);if(!n)return e;if(Ba.test(e))return e.replace(Ba,n);var r=e.includes("?")?"&":"?";return""+e+r+n}var Na=function(){function e(e){var o=this;this.hls=void 0,this.config=void 0,this.media=void 0,this.sid=void 0,this.cid=void 0,this.useHeaders=!1,this.includeKeys=void 0,this.initialized=!1,this.starved=!1,this.buffering=!0,this.audioBuffer=void 0,this.videoBuffer=void 0,this.onWaiting=function(){o.initialized&&(o.starved=!0),o.buffering=!0},this.onPlaying=function(){o.initialized||(o.initialized=!0),o.buffering=!1},this.applyPlaylistData=function(e){try{o.apply(e,{"ot":c.MANIFEST,"su":!o.initialized})}catch(e){be.warn("Could not generate manifest CMCD data.",e)}},this.applyFragmentData=function(e){try{var t=e.frag,i=o.hls.levels[t.level],n=o.getObjectType(t),r={"d":1e3*t.duration,"ot":n};n!==c.VIDEO&&n!==c.AUDIO&&n!=c.MUXED||(r.br=i.bitrate/1e3,r.tb=o.getTopBandwidth(n)/1e3,r.bl=o.getBufferLength(n)),o.apply(e,r)}catch(e){be.warn("Could not generate segment CMCD data.",e)}},this.hls=e;var t=this.config=e.config,i=t.cmcd;null!=i&&(t.pLoader=this.createPlaylistLoader(),t.fLoader=this.createFragmentLoader(),this.sid=i.sessionId||function(){try{return crypto.randomUUID()}catch(e){try{var t=URL.createObjectURL(new Blob),i=t.toString();return URL.revokeObjectURL(t),i.slice(i.lastIndexOf("/")+1)}catch(t){var n=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=(n+16*Math.random())%16|0;return n=Math.floor(n/16),("x"==e?t:3&t|8).toString(16)})}}}(),this.cid=i.contentId,this.useHeaders=!0===i.useHeaders,this.includeKeys=i.includeKeys,this.registerListeners())}var t=e.prototype;return t.registerListeners=function(){var e=this.hls;e.on(ve.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(ve.MEDIA_DETACHED,this.onMediaDetached,this),e.on(ve.BUFFER_CREATED,this.onBufferCreated,this)},t.unregisterListeners=function(){var e=this.hls;e.off(ve.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(ve.MEDIA_DETACHED,this.onMediaDetached,this),e.off(ve.BUFFER_CREATED,this.onBufferCreated,this)},t.destroy=function(){this.unregisterListeners(),this.onMediaDetached(),this.hls=this.config=this.audioBuffer=this.videoBuffer=null,this.onWaiting=this.onPlaying=null},t.onMediaAttached=function(e,t){this.media=t.media,this.media.addEventListener("waiting",this.onWaiting),this.media.addEventListener("playing",this.onPlaying)},t.onMediaDetached=function(){this.media&&(this.media.removeEventListener("waiting",this.onWaiting),this.media.removeEventListener("playing",this.onPlaying),this.media=null)},t.onBufferCreated=function(e,t){var i,n;this.audioBuffer=null==(i=t.tracks.audio)?void 0:i.buffer,this.videoBuffer=null==(n=t.tracks.video)?void 0:n.buffer},t.createData=function(){var e;return{"v":1,"sf":ta.HLS,"sid":this.sid,"cid":this.cid,"pr":null==(e=this.media)?void 0:e.playbackRate,"mtp":this.hls.bandwidthEstimate/1e3}},t.apply=function(e,i){void 0===i&&(i={}),ge(i,this.createData());var t=i.ot===c.INIT||i.ot===c.VIDEO||i.ot===c.MUXED;this.starved&&t&&(i.bs=!0,i.su=!0,this.starved=!1),null==i.su&&(i.su=this.buffering);var n=this.includeKeys;n&&(i=Object.keys(i).reduce(function(e,t){return n.includes(t)&&(e[t]=i[t]),e},{})),this.useHeaders?(e.headers||(e.headers={}),Da(e.headers,i)):e.url=Fa(e.url,i)},t.getObjectType=function(e){var t=e.type;return"subtitle"===t?c.TIMED_TEXT:"initSegment"===e.sn?c.INIT:"audio"===t?c.AUDIO:"main"===t?this.hls.audioTracks.length?c.VIDEO:c.MUXED:void 0},t.getTopBandwidth=function(e){var t,i=0,n=this.hls;if(e===c.AUDIO)t=n.audioTracks;else{var r=n.maxAutoLevel,o=r>-1?r+1:n.levels.length;t=n.levels.slice(0,o)}for(var a,s=R(t);!(a=s()).done;){var l=a.value;l.bitrate>i&&(i=l.bitrate)}return i>0?i:NaN},t.getBufferLength=function(e){var t=this.hls.media,i=e===c.AUDIO?this.audioBuffer:this.videoBuffer;return i&&t?1e3*T.bufferInfo(i,t.currentTime,this.config.maxBufferHole).len:NaN},t.createPlaylistLoader=function(){var e=this.config.pLoader,n=this.applyPlaylistData,i=e||this.config.loader;return function(){function e(e){this.loader=void 0,this.loader=new i(e)}var t=e.prototype;return t.destroy=function(){this.loader.destroy()},t.abort=function(){this.loader.abort()},t.load=function(e,t,i){n(e),this.loader.load(e,t,i)},l(e,[{"key":"stats","get":function(){return this.loader.stats}},{"key":"context","get":function(){return this.loader.context}}]),e}()},t.createFragmentLoader=function(){var e=this.config.fLoader,n=this.applyFragmentData,i=e||this.config.loader;return function(){function e(e){this.loader=void 0,this.loader=new i(e)}var t=e.prototype;return t.destroy=function(){this.loader.destroy()},t.abort=function(){this.loader.abort()},t.load=function(e,t,i){n(e),this.loader.load(e,t,i)},l(e,[{"key":"stats","get":function(){return this.loader.stats}},{"key":"context","get":function(){return this.loader.context}}]),e}()},e}(),ja=function(){function e(e){this.hls=void 0,this.log=void 0,this.loader=null,this.uri=null,this.pathwayId=".",this.pathwayPriority=null,this.timeToLoad=300,this.reloadTimer=-1,this.updated=0,this.started=!1,this.enabled=!0,this.levels=null,this.audioTracks=null,this.subtitleTracks=null,this.penalizedPathways={},this.hls=e,this.log=be.log.bind(be,"[content-steering]:"),this.registerListeners()}var t=e.prototype;return t.registerListeners=function(){var e=this.hls;e.on(ve.MANIFEST_LOADING,this.onManifestLoading,this),e.on(ve.MANIFEST_LOADED,this.onManifestLoaded,this),e.on(ve.MANIFEST_PARSED,this.onManifestParsed,this),e.on(ve.ERROR,this.onError,this)},t.unregisterListeners=function(){var e=this.hls;e&&(e.off(ve.MANIFEST_LOADING,this.onManifestLoading,this),e.off(ve.MANIFEST_LOADED,this.onManifestLoaded,this),e.off(ve.MANIFEST_PARSED,this.onManifestParsed,this),e.off(ve.ERROR,this.onError,this))},t.startLoad=function(){if(this.started=!0,this.clearTimeout(),this.enabled&&this.uri){if(this.updated){var e=1e3*this.timeToLoad-(performance.now()-this.updated);if(e>0)return void this.scheduleRefresh(this.uri,e)}this.loadSteeringManifest(this.uri)}},t.stopLoad=function(){this.started=!1,this.loader&&(this.loader.destroy(),this.loader=null),this.clearTimeout()},t.clearTimeout=function(){-1!==this.reloadTimer&&(self.clearTimeout(this.reloadTimer),this.reloadTimer=-1)},t.destroy=function(){this.unregisterListeners(),this.stopLoad(),this.hls=null,this.levels=this.audioTracks=this.subtitleTracks=null},t.removeLevel=function(t){var e=this.levels;e&&(this.levels=e.filter(function(e){return e!==t}))},t.onManifestLoading=function(){this.stopLoad(),this.enabled=!0,this.timeToLoad=300,this.updated=0,this.uri=null,this.pathwayId=".",this.levels=this.audioTracks=this.subtitleTracks=null},t.onManifestLoaded=function(e,t){var i=t.contentSteering;null!==i&&(this.pathwayId=i.pathwayId,this.uri=i.uri,this.started&&this.startLoad())},t.onManifestParsed=function(e,t){this.audioTracks=t.audioTracks,this.subtitleTracks=t.subtitleTracks},t.onError=function(e,t){var i=t.errorAction;if((null==i?void 0:i.action)===Li&&i.flags===Mi){var n=this.levels,r=this.pathwayPriority,o=this.pathwayId;if(t.context){var a=t.context,s=a.groupId,l=a.pathwayId,u=a.type;s&&n?o=this.getPathwayForGroupId(s,u,o):l&&(o=l)}o in this.penalizedPathways||(this.penalizedPathways[o]=performance.now()),!r&&n&&(r=n.reduce(function(e,t){return-1===e.indexOf(t.pathwayId)&&e.push(t.pathwayId),e},[])),r&&r.length>1&&(this.updatePathwayPriority(r),i.resolved=this.pathwayId!==o),i.resolved||be.warn("Could not resolve "+t.details+' ("'+t.error.message+'") with content-steering for Pathway: '+o+" levels: "+(n?n.length:n)+" priorities: "+JSON.stringify(r)+" penalized: "+JSON.stringify(this.penalizedPathways))}},t.filterParsedLevels=function(e){this.levels=e;var t=this.getLevelsForPathway(this.pathwayId);if(0===t.length){var i=e[0].pathwayId;this.log("No levels found in Pathway "+this.pathwayId+'. Setting initial Pathway to "'+i+'"'),t=this.getLevelsForPathway(i),this.pathwayId=i}return t.length!==e.length?(this.log("Found "+t.length+"/"+e.length+' levels in Pathway "'+this.pathwayId+'"'),t):e},t.getLevelsForPathway=function(t){return null===this.levels?[]:this.levels.filter(function(e){return t===e.pathwayId})},t.updatePathwayPriority=function(e){var t;this.pathwayPriority=e;var i=this.penalizedPathways,n=performance.now();Object.keys(i).forEach(function(e){n-i[e]>3e5&&delete i[e]});for(var r=0;r<e.length;r++){var o=e[r];if(!(o in i)){if(o===this.pathwayId)return;var a=this.hls.nextLoadLevel,s=this.hls.levels[a];if((t=this.getLevelsForPathway(o)).length>0){this.log('Setting Pathway to "'+o+'"'),this.pathwayId=o,_i(t),this.hls.trigger(ve.LEVELS_UPDATED,{"levels":t});var l=this.hls.levels[a];s&&l&&this.levels&&(l.attrs["STABLE-VARIANT-ID"]!==s.attrs["STABLE-VARIANT-ID"]&&l.bitrate!==s.bitrate&&this.log("Unstable Pathways change from bitrate "+s.bitrate+" to "+l.bitrate),this.hls.nextLoadLevel=a);break}}}},t.getPathwayForGroupId=function(e,t,i){for(var n=this.getLevelsForPathway(i).concat(this.levels||[]),r=0;r<n.length;r++)if(t===w&&n[r].hasAudioGroup(e)||t===E&&n[r].hasSubtitleGroup(e))return n[r].pathwayId;return i},t.clonePathways=function(e){var n=this,r=this.levels;if(r){var c={},d={};e.forEach(function(e){var l=e.ID,t=e["BASE-ID"],u=e["URI-REPLACEMENT"];if(!r.some(function(e){return e.pathwayId===l})){var i=n.getLevelsForPathway(t).map(function(e){var t=new ee(e.attrs);t["PATHWAY-ID"]=l;var i=t.AUDIO&&t.AUDIO+"_clone_"+l,n=t.SUBTITLES&&t.SUBTITLES+"_clone_"+l;i&&(c[t.AUDIO]=i,t.AUDIO=i),n&&(d[t.SUBTITLES]=n,t.SUBTITLES=n);var r=$a(e.uri,t["STABLE-VARIANT-ID"],"PER-VARIANT-URIS",u),o=new di({"attrs":t,"audioCodec":e.audioCodec,"bitrate":e.bitrate,"height":e.height,"name":e.name,"url":r,"videoCodec":e.videoCodec,"width":e.width});if(e.audioGroups)for(var a=1;a<e.audioGroups.length;a++)o.addGroupId("audio",e.audioGroups[a]+"_clone_"+l);if(e.subtitleGroups)for(var s=1;s<e.subtitleGroups.length;s++)o.addGroupId("text",e.subtitleGroups[s]+"_clone_"+l);return o});r.push.apply(r,i),Ua(n.audioTracks,c,u,l),Ua(n.subtitleTracks,d,u,l)}})}},t.loadSteeringManifest=function(e){var u,c=this,t=this.hls.config,i=t.loader;this.loader&&this.loader.destroy(),this.loader=new i(t);try{u=new self.URL(e)}catch(u){return this.enabled=!1,void this.log("Failed to parse Steering Manifest URI: "+e)}if("data:"!==u.protocol){var n=0|(this.hls.bandwidthEstimate||t.abrEwmaDefaultEstimate);u.searchParams.set("_HLS_pathway",this.pathwayId),u.searchParams.set("_HLS_throughput",""+n)}var r={"responseType":"json","url":u.href},o=t.steeringManifestLoadPolicy.default,a=o.errorRetry||o.timeoutRetry||{},s={"loadPolicy":o,"timeout":o.maxLoadTimeMs,"maxRetry":a.maxNumRetry||0,"retryDelay":a.retryDelayMs||0,"maxRetryDelay":a.maxRetryDelayMs||0},l={"onSuccess":function(e,t,i,n){c.log('Loaded steering manifest: "'+u+'"');var r=e.data;if(1===r.VERSION){c.updated=performance.now(),c.timeToLoad=r.TTL;var o=r["RELOAD-URI"],a=r["PATHWAY-CLONES"],s=r["PATHWAY-PRIORITY"];if(o)try{c.uri=new self.URL(o,u).href}catch(e){return c.enabled=!1,void c.log("Failed to parse Steering Manifest RELOAD-URI: "+o)}c.scheduleRefresh(c.uri||i.url),a&&c.clonePathways(a);var l={"steeringManifest":r,"url":u.toString()};c.hls.trigger(ve.STEERING_MANIFEST_LOADED,l),s&&c.updatePathwayPriority(s)}else c.log("Steering VERSION "+r.VERSION+" not supported!")},"onError":function(e,t,i,n){if(c.log("Error loading steering manifest: "+e.code+" "+e.text+" ("+t.url+")"),c.stopLoad(),410===e.code)return c.enabled=!1,void c.log("Steering manifest "+t.url+" no longer available");var r=1e3*c.timeToLoad;if(429!==e.code)c.scheduleRefresh(c.uri||t.url,r);else{var o=c.loader;if("function"==typeof(null==o?void 0:o.getResponseHeader)){var a=o.getResponseHeader("Retry-After");a&&(r=1e3*parseFloat(a))}c.log("Steering manifest "+t.url+" rate limited")}},"onTimeout":function(e,t,i){c.log("Timeout loading steering manifest ("+t.url+")"),c.scheduleRefresh(c.uri||t.url)}};this.log("Requesting steering manifest: "+u),this.loader.load(r,s,l)},t.scheduleRefresh=function(i,e){var n=this;void 0===e&&(e=1e3*this.timeToLoad),this.clearTimeout(),this.reloadTimer=self.setTimeout(function(){var e,t=null==(e=n.hls)?void 0:e.media;!t||t.ended?n.scheduleRefresh(i,1e3*n.timeToLoad):n.loadSteeringManifest(i)},e)},e}();function Ua(t,n,r,o){t&&Object.keys(n).forEach(function(i){var e=t.filter(function(e){return e.groupId===i}).map(function(e){var t=ge({},e);return t.details=void 0,t.attrs=new ee(t.attrs),t.url=t.attrs.URI=$a(e.url,e.attrs["STABLE-RENDITION-ID"],"PER-RENDITION-URIS",r),t.groupId=t.attrs["GROUP-ID"]=n[i],t.attrs["PATHWAY-ID"]=o,t});t.push.apply(t,e)})}function $a(e,t,i,n){var r,o=n.HOST,a=n.PARAMS,s=n[i];t&&(r=null==s?void 0:s[t])&&(e=r);var l=new self.URL(e);return o&&!r&&(l.host=o),a&&Object.keys(a).sort().forEach(function(e){e&&l.searchParams.set(e,a[e])}),l.href}var Ha=/^age:\s*[\d.]+\s*$/im,za=function(){function e(e){this.xhrSetup=void 0,this.requestTimeout=void 0,this.retryTimeout=void 0,this.retryDelay=void 0,this.config=null,this.callbacks=null,this.context=null,this.loader=null,this.stats=void 0,this.xhrSetup=e&&e.xhrSetup||null,this.stats=new K,this.retryDelay=0}var t=e.prototype;return t.destroy=function(){this.callbacks=null,this.abortInternal(),this.loader=null,this.config=null,this.context=null,this.xhrSetup=null},t.abortInternal=function(){var e=this.loader;self.clearTimeout(this.requestTimeout),self.clearTimeout(this.retryTimeout),e&&(e.onreadystatechange=null,e.onprogress=null,4!==e.readyState&&(this.stats.aborted=!0,e.abort()))},t.abort=function(){var e;this.abortInternal(),null!=(e=this.callbacks)&&e.onAbort&&this.callbacks.onAbort(this.stats,this.context,this.loader)},t.load=function(e,t,i){if(this.stats.loading.start)throw new Error("Loader can only be used once.");this.stats.loading.start=self.performance.now(),this.context=e,this.config=t,this.callbacks=i,this.loadInternal()},t.loadInternal=function(){var t=this,e=this.config,i=this.context;if(e&&i){var n=this.loader=new self.XMLHttpRequest,r=this.stats;r.loading.first=0,r.loaded=0,r.aborted=!1;var o=this.xhrSetup;o?Promise.resolve().then(function(){if(t.loader===n&&!t.stats.aborted)return o(n,i.url)}).catch(function(e){if(t.loader===n&&!t.stats.aborted)return n.open("GET",i.url,!0),o(n,i.url)}).then(function(){t.loader!==n||t.stats.aborted||t.openAndSendXhr(n,i,e)}).catch(function(e){t.callbacks.onError({"code":n.status,"text":e.message},i,n,r)}):this.openAndSendXhr(n,i,e)}},t.openAndSendXhr=function(e,t,i){e.readyState||e.open("GET",t.url,!0);var n=t.headers,r=i.loadPolicy,o=r.maxTimeToFirstByteMs,a=r.maxLoadTimeMs;if(n)for(var s in n)e.setRequestHeader(s,n[s]);t.rangeEnd&&e.setRequestHeader("Range","bytes="+t.rangeStart+"-"+(t.rangeEnd-1)),e.onreadystatechange=this.readystatechange.bind(this),e.onprogress=this.loadprogress.bind(this),e.responseType=t.responseType,self.clearTimeout(this.requestTimeout),i.timeout=o&&J(o)?o:a,this.requestTimeout=self.setTimeout(this.loadtimeout.bind(this),i.timeout),e.send()},t.readystatechange=function(){var e=this.context,t=this.loader,i=this.stats;if(e&&t){var n=t.readyState,r=this.config;if(!i.aborted&&n>=2&&(0===i.loading.first&&(i.loading.first=Math.max(self.performance.now(),i.loading.start),r.timeout!==r.loadPolicy.maxLoadTimeMs&&(self.clearTimeout(this.requestTimeout),r.timeout=r.loadPolicy.maxLoadTimeMs,this.requestTimeout=self.setTimeout(this.loadtimeout.bind(this),r.loadPolicy.maxLoadTimeMs-(i.loading.first-i.loading.start)))),4===n)){self.clearTimeout(this.requestTimeout),t.onreadystatechange=null,t.onprogress=null;var o=t.status,a="text"!==t.responseType;if(o>=200&&o<300&&(a&&t.response||null!==t.responseText)){i.loading.end=Math.max(self.performance.now(),i.loading.first);var s=a?t.response:t.responseText,l="arraybuffer"===t.responseType?s.byteLength:s.length;if(i.loaded=i.total=l,i.bwEstimate=8e3*i.total/(i.loading.end-i.loading.first),!this.callbacks)return;var u=this.callbacks.onProgress;if(u&&u(i,e,s,t),!this.callbacks)return;var c={"url":t.responseURL,"data":s,"code":o};this.callbacks.onSuccess(c,i,e,t)}else{var d=r.loadPolicy.errorRetry;Si(d,i.retry,!1,{"url":e.url,"data":void 0,"code":o})?this.retry(d):(be.error(o+" while loading "+e.url),this.callbacks.onError({"code":o,"text":t.statusText},e,t,i))}}}},t.loadtimeout=function(){if(this.config){var e=this.config.loadPolicy.timeoutRetry;if(Si(e,this.stats.retry,!0))this.retry(e);else{var t;be.warn("timeout while loading "+(null==(t=this.context)?void 0:t.url));var i=this.callbacks;i&&(this.abortInternal(),i.onTimeout(this.stats,this.context,this.loader))}}},t.retry=function(e){var t=this.context,i=this.stats;this.retryDelay=xi(e,i.retry),i.retry++,be.warn((status?"HTTP Status "+status:"Timeout")+" while loading "+(null==t?void 0:t.url)+", retrying "+i.retry+"/"+e.maxNumRetry+" in "+this.retryDelay+"ms"),this.abortInternal(),this.loader=null,self.clearTimeout(this.retryTimeout),this.retryTimeout=self.setTimeout(this.loadInternal.bind(this),this.retryDelay)},t.loadprogress=function(e){var t=this.stats;t.loaded=e.loaded,e.lengthComputable&&(t.total=e.total)},t.getCacheAge=function(){var e=null;if(this.loader&&Ha.test(this.loader.getAllResponseHeaders())){var t=this.loader.getResponseHeader("age");e=t?parseFloat(t):null}return e},t.getResponseHeader=function(e){return this.loader&&new RegExp("^"+e+":\\s*[\\d.]+\\s*$","im").test(this.loader.getAllResponseHeaders())?this.loader.getResponseHeader(e):null},e}(),Wa=/(\d+)-(\d+)\/(\d+)/,Ga=function(){function e(e){this.fetchSetup=void 0,this.requestTimeout=void 0,this.request=null,this.response=null,this.controller=void 0,this.context=null,this.config=null,this.callbacks=null,this.stats=void 0,this.loader=null,this.fetchSetup=e.fetchSetup||Va,this.controller=new self.AbortController,this.stats=new K}var t=e.prototype;return t.destroy=function(){this.loader=this.callbacks=this.context=this.config=this.request=null,this.abortInternal(),this.response=null,this.fetchSetup=this.controller=this.stats=null},t.abortInternal=function(){this.controller&&!this.stats.loading.end&&(this.stats.aborted=!0,this.controller.abort())},t.abort=function(){var e;this.abortInternal(),null!=(e=this.callbacks)&&e.onAbort&&this.callbacks.onAbort(this.stats,this.context,this.response)},t.load=function(r,o,a){var s=this,l=this.stats;if(l.loading.start)throw new Error("Loader can only be used once.");l.loading.start=self.performance.now();var e=function(e,t){var i={"method":"GET","mode":"cors","credentials":"same-origin","signal":t,"headers":new self.Headers(ge({},e.headers))};return e.rangeEnd&&i.headers.set("Range","bytes="+e.rangeStart+"-"+String(e.rangeEnd-1)),i}(r,this.controller.signal),u=a.onProgress,c="arraybuffer"===r.responseType,d=c?"byteLength":"length",t=o.loadPolicy,i=t.maxTimeToFirstByteMs,h=t.maxLoadTimeMs;this.context=r,this.config=o,this.callbacks=a,this.request=this.fetchSetup(r,e),self.clearTimeout(this.requestTimeout),o.timeout=i&&J(i)?i:h,this.requestTimeout=self.setTimeout(function(){s.abortInternal(),a.onTimeout(l,r,s.response)},o.timeout),self.fetch(this.request).then(function(e){s.response=s.loader=e;var t=Math.max(self.performance.now(),l.loading.start);if(self.clearTimeout(s.requestTimeout),o.timeout=h,s.requestTimeout=self.setTimeout(function(){s.abortInternal(),a.onTimeout(l,r,s.response)},h-(t-l.loading.start)),!e.ok){var i=e.status,n=e.statusText;throw new Ka(n||"fetch, bad network response",i,e)}return l.loading.first=t,l.total=function(e){var t=e.get("Content-Range");if(t){var i=function(e){var t=Wa.exec(e);if(t)return parseInt(t[2])-parseInt(t[1])+1}(t);if(J(i))return i}var n=e.get("Content-Length");if(n)return parseInt(n)}(e.headers)||l.total,u&&J(o.highWaterMark)?s.loadProgressively(e,l,r,o.highWaterMark,u):c?e.arrayBuffer():"json"===r.responseType?e.json():e.text()}).then(function(e){var t=s.response;if(!t)throw new Error("loader destroyed");self.clearTimeout(s.requestTimeout),l.loading.end=Math.max(self.performance.now(),l.loading.first);var i=e[d];i&&(l.loaded=l.total=i);var n={"url":t.url,"data":e,"code":t.status};u&&!J(o.highWaterMark)&&u(l,r,e,t),a.onSuccess(n,l,r,t)}).catch(function(e){if(self.clearTimeout(s.requestTimeout),!l.aborted){var t=e&&e.code||0,i=e?e.message:null;a.onError({"code":t,"text":i},r,e?e.details:null,l)}})},t.getCacheAge=function(){var e=null;if(this.response){var t=this.response.headers.get("age");e=t?parseFloat(t):null}return e},t.getResponseHeader=function(e){return this.response?this.response.headers.get(e):null},t.loadProgressively=function(r,o,a,s,l){void 0===s&&(s=0);var u=new In,e=r.body.getReader();return function n(){return e.read().then(function(e){if(e.done)return u.dataLength&&l(o,a,u.flush(),r),Promise.resolve(new ArrayBuffer(0));var t=e.value,i=t.length;return o.loaded+=i,i<s||u.dataLength?(u.push(t),u.dataLength>=s&&l(o,a,u.flush(),r)):l(o,a,t,r),n()}).catch(function(){return Promise.reject()})}()},e}();function Va(e,t){return new self.Request(e.url,t)}var qa,Ka=function(r){function e(e,t,i){var n;return(n=r.call(this,e)||this).code=void 0,n.details=void 0,n.code=t,n.details=i,n}return u(e,r),e}(f(Error)),Za=/\s/,Xa=k(k({"autoStartLoad":!0,"startPosition":-1,"defaultAudioCodec":void 0,"debug":!1,"capLevelOnFPSDrop":!1,"capLevelToPlayerSize":!1,"ignoreDevicePixelRatio":!1,"preferManagedMediaSource":!0,"initialLiveManifestSize":1,"maxBufferLength":30,"backBufferLength":1/0,"frontBufferFlushThreshold":1/0,"maxBufferSize":6e7,"maxBufferHole":.1,"highBufferWatchdogPeriod":2,"nudgeOffset":.1,"nudgeMaxRetry":3,"maxFragLookUpTolerance":.25,"liveSyncDurationCount":3,"liveMaxLatencyDurationCount":1/0,"liveSyncDuration":void 0,"liveMaxLatencyDuration":void 0,"maxLiveSyncPlaybackRate":1,"liveDurationInfinity":!1,"liveBackBufferLength":null,"maxMaxBufferLength":600,"enableWorker":!0,"workerPath":null,"enableSoftwareAES":!0,"startLevel":void 0,"startFragPrefetch":!1,"fpsDroppedMonitoringPeriod":5e3,"fpsDroppedMonitoringThreshold":.2,"appendErrorMaxRetry":3,"loader":za,"fLoader":void 0,"pLoader":void 0,"xhrSetup":void 0,"licenseXhrSetup":void 0,"licenseResponseCallback":void 0,"abrController":Zi,"bufferController":eo,"capLevelController":Yo,"errorController":Fi,"fpsController":Qo,"stretchShortVideoTrack":!1,"maxAudioFramesDrift":1,"forceKeyFrameOnDiscontinuity":!0,"abrEwmaFastLive":3,"abrEwmaSlowLive":9,"abrEwmaFastVoD":3,"abrEwmaSlowVoD":9,"abrEwmaDefaultEstimate":5e5,"abrEwmaDefaultEstimateMax":5e6,"abrBandWidthFactor":.95,"abrBandWidthUpFactor":.7,"abrMaxWithRealBitrate":!1,"maxStarvationDelay":4,"maxLoadingDelay":4,"minAutoBitrate":0,"emeEnabled":!1,"widevineLicenseUrl":void 0,"drmSystems":{},"drmSystemOptions":{},"requestMediaKeySystemAccessFunc":Te,"testBandwidth":!0,"progressive":!1,"lowLatencyMode":!0,"cmcd":void 0,"enableDateRangeMetadataCues":!0,"enableEmsgMetadataCues":!0,"enableID3MetadataCues":!0,"useMediaCapabilities":!0,"certLoadPolicy":{"default":{"maxTimeToFirstByteMs":8e3,"maxLoadTimeMs":2e4,"timeoutRetry":null,"errorRetry":null}},"keyLoadPolicy":{"default":{"maxTimeToFirstByteMs":8e3,"maxLoadTimeMs":2e4,"timeoutRetry":{"maxNumRetry":1,"retryDelayMs":1e3,"maxRetryDelayMs":2e4,"backoff":"linear"},"errorRetry":{"maxNumRetry":8,"retryDelayMs":1e3,"maxRetryDelayMs":2e4,"backoff":"linear"}}},"manifestLoadPolicy":{"default":{"maxTimeToFirstByteMs":1/0,"maxLoadTimeMs":2e4,"timeoutRetry":{"maxNumRetry":2,"retryDelayMs":0,"maxRetryDelayMs":0},"errorRetry":{"maxNumRetry":1,"retryDelayMs":1e3,"maxRetryDelayMs":8e3}}},"playlistLoadPolicy":{"default":{"maxTimeToFirstByteMs":1e4,"maxLoadTimeMs":2e4,"timeoutRetry":{"maxNumRetry":2,"retryDelayMs":0,"maxRetryDelayMs":0},"errorRetry":{"maxNumRetry":2,"retryDelayMs":1e3,"maxRetryDelayMs":8e3}}},"fragLoadPolicy":{"default":{"maxTimeToFirstByteMs":1e4,"maxLoadTimeMs":12e4,"timeoutRetry":{"maxNumRetry":4,"retryDelayMs":0,"maxRetryDelayMs":0},"errorRetry":{"maxNumRetry":6,"retryDelayMs":1e3,"maxRetryDelayMs":8e3}}},"steeringManifestLoadPolicy":{"default":{"maxTimeToFirstByteMs":1e4,"maxLoadTimeMs":2e4,"timeoutRetry":{"maxNumRetry":2,"retryDelayMs":0,"maxRetryDelayMs":0},"errorRetry":{"maxNumRetry":1,"retryDelayMs":1e3,"maxRetryDelayMs":8e3}}},"manifestLoadingTimeOut":1e4,"manifestLoadingMaxRetry":1,"manifestLoadingRetryDelay":1e3,"manifestLoadingMaxRetryTimeout":64e3,"levelLoadingTimeOut":1e4,"levelLoadingMaxRetry":4,"levelLoadingRetryDelay":1e3,"levelLoadingMaxRetryTimeout":64e3,"fragLoadingTimeOut":2e4,"fragLoadingMaxRetry":6,"fragLoadingRetryDelay":1e3,"fragLoadingMaxRetryTimeout":64e3},{"cueHandler":{"newCue":function(t,e,i,n){for(var r,o,a,s,l,u=[],c=self.VTTCue||self.TextTrackCue,d=0;d<n.rows.length;d++)if(a=!0,s=0,l="",!(r=n.rows[d]).isEmpty()){for(var h,f=0;f<r.chars.length;f++)Za.test(r.chars[f].uchar)&&a?s++:(l+=r.chars[f].uchar,a=!1);r.cueStartTime=e,e===i&&(i+=1e-4),s>=16?s--:s++;var p=Oo(l.trim()),g=Mo(e,i,p);null!=t&&null!=(h=t.cues)&&h.getCueById(g)||((o=new c(e,i,p)).id=g,o.line=d+1,o.align="left",o.position=10+Math.min(80,10*Math.floor(8*s/32)),u.push(o))}return t&&u.length&&(u.sort(function(e,t){return"auto"===e.line||"auto"===t.line?0:e.line>8&&t.line>8?t.line-e.line:e.line-t.line}),u.forEach(function(e){return Gt(t,e)})),u}},"enableWebVTT":!0,"enableIMSC1":!0,"enableCEA708Captions":!0,"captionsTextTrack1Label":"English","captionsTextTrack1LanguageCode":"en","captionsTextTrack2Label":"Spanish","captionsTextTrack2LanguageCode":"es","captionsTextTrack3Label":"Unknown CC","captionsTextTrack3LanguageCode":"","captionsTextTrack4Label":"Unknown CC","captionsTextTrack4LanguageCode":"","renderTextTracksNatively":!0}),{},{"subtitleStreamController":Zr,"subtitleTrackController":Yr,"timelineController":Ko,"audioStreamController":qr,"audioTrackController":Kr,"emeController":ea,"cmcdController":Na,"contentSteeringController":ja});function Ya(i){return i&&"object"==typeof i?Array.isArray(i)?i.map(Ya):Object.keys(i).reduce(function(e,t){return e[t]=Ya(i[t]),e},{}):i}function Qa(e){var t=e.loader;t!==Ga&&t!==za?(be.log("[config]: Custom loader detected, cannot enable progressive streaming"),e.progressive=!1):function(){if(self.fetch&&self.AbortController&&self.ReadableStream&&self.Request)try{return new self.ReadableStream({}),!0}catch(e){}return!1}()&&(e.loader=Ga,e.progressive=!0,e.enableSoftwareAES=!0,be.log("[config]: Progressive streaming enabled, using FetchLoader"))}var Ja=function(o){function e(e,t){var i;return(i=o.call(this,e,"[level-controller]")||this)._levels=[],i._firstLevel=-1,i._maxAutoLevel=-1,i._startLevel=void 0,i.currentLevel=null,i.currentLevelIndex=-1,i.manualLevelIndex=-1,i.steering=void 0,i.onParsedComplete=void 0,i.steering=t,i._registerListeners(),i}u(e,o);var t=e.prototype;return t._registerListeners=function(){var e=this.hls;e.on(ve.MANIFEST_LOADING,this.onManifestLoading,this),e.on(ve.MANIFEST_LOADED,this.onManifestLoaded,this),e.on(ve.LEVEL_LOADED,this.onLevelLoaded,this),e.on(ve.LEVELS_UPDATED,this.onLevelsUpdated,this),e.on(ve.FRAG_BUFFERED,this.onFragBuffered,this),e.on(ve.ERROR,this.onError,this)},t._unregisterListeners=function(){var e=this.hls;e.off(ve.MANIFEST_LOADING,this.onManifestLoading,this),e.off(ve.MANIFEST_LOADED,this.onManifestLoaded,this),e.off(ve.LEVEL_LOADED,this.onLevelLoaded,this),e.off(ve.LEVELS_UPDATED,this.onLevelsUpdated,this),e.off(ve.FRAG_BUFFERED,this.onFragBuffered,this),e.off(ve.ERROR,this.onError,this)},t.destroy=function(){this._unregisterListeners(),this.steering=null,this.resetLevels(),o.prototype.destroy.call(this)},t.stopLoad=function(){this._levels.forEach(function(e){e.loadError=0,e.fragmentError=0}),o.prototype.stopLoad.call(this)},t.resetLevels=function(){this._startLevel=void 0,this.manualLevelIndex=-1,this.currentLevelIndex=-1,this.currentLevel=null,this._levels=[],this._maxAutoLevel=-1},t.onManifestLoading=function(e,t){this.resetLevels()},t.onManifestLoaded=function(e,t){var b=this.hls.config.preferManagedMediaSource,_=[],w={},E={},x=!1,T=!1,S=!1;t.levels.forEach(function(e){var t,i,n=e.attrs,r=e.audioCodec,o=e.videoCodec;-1!==(null==(t=r)?void 0:t.indexOf("mp4a.40.34"))&&(qa||(qa=/chrome|firefox/i.test(navigator.userAgent)),qa&&(e.audioCodec=r=void 0)),r&&(e.audioCodec=r=xt(r,b)),0===(null==(i=o)?void 0:i.indexOf("avc1"))&&(o=e.videoCodec=function(e){var t=e.split(".");if(t.length>2){var i=t.shift()+".";return(i+=parseInt(t.shift()).toString(16))+("000"+parseInt(t.shift()).toString(16)).slice(-4)}return e}(o));var a=e.width,s=e.height,l=e.unknownCodecs;if(x||(x=!(!a||!s)),T||(T=!!o),S||(S=!!r),!(null!=l&&l.length||r&&!vt(r,"audio",b)||o&&!vt(o,"video",b))){var u=n.CODECS,c=n["FRAME-RATE"],d=n["HDCP-LEVEL"],h=n["PATHWAY-ID"],f=n.RESOLUTION,p=n["VIDEO-RANGE"],g=(h||".")+"-"+e.bitrate+"-"+f+"-"+c+"-"+u+"-"+p+"-"+d;if(w[g])if(w[g].uri===e.url||e.attrs["PATHWAY-ID"])w[g].addGroupId("audio",n.AUDIO),w[g].addGroupId("text",n.SUBTITLES);else{var v=E[g]+=1;e.attrs["PATHWAY-ID"]=new Array(v+1).join(".");var m=new di(e);w[g]=m,_.push(m)}else{var y=new di(e);w[g]=y,E[g]=1,_.push(y)}}}),this.filterAndSortMediaOptions(_,t,x,T,S)},t.filterAndSortMediaOptions=function(e,t,a,i,n){var r=this,o=[],s=[],l=e;if((a||i)&&n&&(l=l.filter(function(e){var t,i=e.videoCodec,n=e.videoRange,r=e.width,o=e.height;return(!!i||!(!r||!o))&&!!(t=n)&&oi.indexOf(t)>-1})),0!==l.length){if(t.audioTracks){var u=this.hls.config.preferManagedMediaSource;es(o=t.audioTracks.filter(function(e){return!e.audioCodec||vt(e.audioCodec,"audio",u)}))}t.subtitles&&es(s=t.subtitles);var c=l.slice(0);l.sort(function(e,t){if(e.attrs["HDCP-LEVEL"]!==t.attrs["HDCP-LEVEL"])return(e.attrs["HDCP-LEVEL"]||"")>(t.attrs["HDCP-LEVEL"]||"")?1:-1;if(a&&e.height!==t.height)return e.height-t.height;if(e.frameRate!==t.frameRate)return e.frameRate-t.frameRate;if(e.videoRange!==t.videoRange)return oi.indexOf(e.videoRange)-oi.indexOf(t.videoRange);if(e.videoCodec!==t.videoCodec){var i=bt(e.videoCodec),n=bt(t.videoCodec);if(i!==n)return n-i}if(e.uri===t.uri&&e.codecSet!==t.codecSet){var r=_t(e.codecSet),o=_t(t.codecSet);if(r!==o)return o-r}return e.averageBitrate!==t.averageBitrate?e.averageBitrate-t.averageBitrate:0});var d=c[0];if(this.steering&&(l=this.steering.filterParsedLevels(l)).length!==c.length)for(var h=0;h<c.length;h++)if(c[h].pathwayId===l[0].pathwayId){d=c[h];break}this._levels=l;for(var f=0;f<l.length;f++)if(l[f]===d){var p;this._firstLevel=f;var g=d.bitrate,v=this.hls.bandwidthEstimate;if(this.log("manifest loaded, "+l.length+" level(s) found, first bitrate: "+g),void 0===(null==(p=this.hls.userConfig)?void 0:p.abrEwmaDefaultEstimate)){var m=Math.min(g,this.hls.config.abrEwmaDefaultEstimateMax);m>v&&v===Xa.abrEwmaDefaultEstimate&&(this.hls.bandwidthEstimate=m)}break}var y=n&&!i,b={"levels":l,"audioTracks":o,"subtitleTracks":s,"sessionData":t.sessionData,"sessionKeys":t.sessionKeys,"firstLevel":this._firstLevel,"stats":t.stats,"audio":n,"video":i,"altAudio":!y&&o.some(function(e){return!!e.url})};this.hls.trigger(ve.MANIFEST_PARSED,b),(this.hls.config.autoStartLoad||this.hls.forceStartLoad)&&this.hls.startLoad(this.hls.config.startPosition)}else Promise.resolve().then(function(){if(r.hls){t.levels.length&&r.warn("One or more CODECS in variant not supported: "+JSON.stringify(t.levels[0].attrs));var e=new Error("no level with compatible codecs found in manifest");r.hls.trigger(ve.ERROR,{"type":me.MEDIA_ERROR,"details":ye.MANIFEST_INCOMPATIBLE_CODECS_ERROR,"fatal":!0,"url":t.url,"error":e,"reason":e.message})}})},t.onError=function(e,t){!t.fatal&&t.context&&t.context.type===jt&&t.context.level===this.level&&this.checkRetry(t)},t.onFragBuffered=function(e,t){var i=t.frag;if(void 0!==i&&i.type===x){var n=i.elementaryStreams;if(!Object.keys(n).some(function(e){return!!n[e]}))return;var r=this._levels[i.level];null!=r&&r.loadError&&(this.log("Resetting level error count of "+r.loadError+" on frag buffered"),r.loadError=0)}},t.onLevelLoaded=function(e,t){var i,n,r=t.level,o=t.details,a=this._levels[r];if(!a)return this.warn("Invalid level index "+r),void(null!=(n=t.deliveryDirectives)&&n.skip&&(o.deltaUpdateFailed=!0));r===this.currentLevelIndex?(0===a.fragmentError&&(a.loadError=0),this.playlistLoaded(r,t,a.details)):null!=(i=t.deliveryDirectives)&&i.skip&&(o.deltaUpdateFailed=!0)},t.loadPlaylist=function(e){o.prototype.loadPlaylist.call(this);var t=this.currentLevelIndex,i=this.currentLevel;if(i&&this.shouldLoadPlaylist(i)){var n=i.uri;if(e)try{n=e.addDirectives(n)}catch(e){this.warn("Could not construct new URL with HLS Delivery Directives: "+e)}var r=i.attrs["PATHWAY-ID"];this.log("Loading level index "+t+(void 0!==(null==e?void 0:e.msn)?" at sn "+e.msn+" part "+e.part:"")+" with"+(r?" Pathway "+r:"")+" "+n),this.clearTimer(),this.hls.trigger(ve.LEVEL_LOADING,{"url":n,"level":t,"pathwayId":i.attrs["PATHWAY-ID"],"id":0,"deliveryDirectives":e||null})}},t.removeLevel=function(i){var e,n=this,t=this._levels.filter(function(e,t){return t!==i||(n.steering&&n.steering.removeLevel(e),e===n.currentLevel&&(n.currentLevel=null,n.currentLevelIndex=-1,e.details&&e.details.fragments.forEach(function(e){return e.level=-1})),!1)});_i(t),this._levels=t,this.currentLevelIndex>-1&&null!=(e=this.currentLevel)&&e.details&&(this.currentLevelIndex=this.currentLevel.details.fragments[0].level),this.hls.trigger(ve.LEVELS_UPDATED,{"levels":t})},t.onLevelsUpdated=function(e,t){var i=t.levels;this._levels=i},t.checkMaxAutoUpdated=function(){var e=this.hls,t=e.autoLevelCapping,i=e.maxAutoLevel,n=e.maxHdcpLevel;this._maxAutoLevel!==i&&(this._maxAutoLevel=i,this.hls.trigger(ve.MAX_AUTO_LEVEL_UPDATED,{"autoLevelCapping":t,"levels":this.levels,"maxAutoLevel":i,"minAutoLevel":this.hls.minAutoLevel,"maxHdcpLevel":n}))},l(e,[{"key":"levels","get":function(){return 0===this._levels.length?null:this._levels}},{"key":"level","get":function(){return this.currentLevelIndex},"set":function(e){var t=this._levels;if(0!==t.length){if(e<0||e>=t.length){var i=new Error("invalid level idx"),n=e<0;if(this.hls.trigger(ve.ERROR,{"type":me.OTHER_ERROR,"details":ye.LEVEL_SWITCH_ERROR,"level":e,"fatal":n,"error":i,"reason":i.message}),n)return;e=Math.min(e,t.length-1)}var r=this.currentLevelIndex,o=this.currentLevel,a=o?o.attrs["PATHWAY-ID"]:void 0,s=t[e],l=s.attrs["PATHWAY-ID"];if(this.currentLevelIndex=e,this.currentLevel=s,r!==e||!s.details||!o||a!==l){this.log("Switching to level "+e+" ("+(s.height?s.height+"p ":"")+(s.videoRange?s.videoRange+" ":"")+(s.codecSet?s.codecSet+" ":"")+"@"+s.bitrate+")"+(l?" with Pathway "+l:"")+" from level "+r+(a?" with Pathway "+a:""));var u={"level":e,"attrs":s.attrs,"details":s.details,"bitrate":s.bitrate,"averageBitrate":s.averageBitrate,"maxBitrate":s.maxBitrate,"realBitrate":s.realBitrate,"width":s.width,"height":s.height,"codecSet":s.codecSet,"audioCodec":s.audioCodec,"videoCodec":s.videoCodec,"audioGroups":s.audioGroups,"subtitleGroups":s.subtitleGroups,"loaded":s.loaded,"loadError":s.loadError,"fragmentError":s.fragmentError,"name":s.name,"id":s.id,"uri":s.uri,"url":s.url,"urlId":0,"audioGroupIds":s.audioGroupIds,"textGroupIds":s.textGroupIds};this.hls.trigger(ve.LEVEL_SWITCHING,u);var c=s.details;if(!c||c.live){var d=this.switchParams(s.uri,null==o?void 0:o.details,c);this.loadPlaylist(d)}}}}},{"key":"manualLevel","get":function(){return this.manualLevelIndex},"set":function(e){this.manualLevelIndex=e,void 0===this._startLevel&&(this._startLevel=e),-1!==e&&(this.level=e)}},{"key":"firstLevel","get":function(){return this._firstLevel},"set":function(e){this._firstLevel=e}},{"key":"startLevel","get":function(){if(void 0===this._startLevel){var e=this.hls.config.startLevel;return void 0!==e?e:this.hls.firstAutoLevel}return this._startLevel},"set":function(e){this._startLevel=e}},{"key":"nextLoadLevel","get":function(){return-1!==this.manualLevelIndex?this.manualLevelIndex:this.hls.nextAutoLevel},"set":function(e){this.level=e,-1===this.manualLevelIndex&&(this.hls.nextAutoLevel=e)}}]),e}(Ni);function es(e){var i={};e.forEach(function(e){var t=e.groupId||"";e.id=i[t]=i[t]||0,i[t]++})}var ts=function(){function e(e){this.config=void 0,this.keyUriToKeyInfo={},this.emeController=null,this.config=e}var t=e.prototype;return t.abort=function(e){for(var t in this.keyUriToKeyInfo){var i=this.keyUriToKeyInfo[t].loader;if(i){var n;if(e&&e!==(null==(n=i.context)?void 0:n.frag.type))return;i.abort()}}},t.detach=function(){for(var e in this.keyUriToKeyInfo){var t=this.keyUriToKeyInfo[e];(t.mediaKeySessionContext||t.decryptdata.isCommonEncryption)&&delete this.keyUriToKeyInfo[e]}},t.destroy=function(){for(var e in this.detach(),this.keyUriToKeyInfo){var t=this.keyUriToKeyInfo[e].loader;t&&t.destroy()}this.keyUriToKeyInfo={}},t.createKeyLoadError=function(e,t,i,n,r){return void 0===t&&(t=ye.KEY_LOAD_ERROR),new vn({"type":me.NETWORK_ERROR,"details":t,"fatal":!1,"frag":e,"response":r,"error":i,"networkDetails":n})},t.loadClear=function(e,i){var n=this;if(this.emeController&&this.config.emeEnabled)for(var r=e.sn,o=e.cc,t=function(){var t=i[a];if(o<=t.cc&&("initSegment"===r||"initSegment"===t.sn||r<t.sn))return n.emeController.selectKeySystemFormat(t).then(function(e){t.setKeyFormat(e)}),1},a=0;a<i.length&&!t();a++);},t.load=function(t){var i=this;return!t.decryptdata&&t.encrypted&&this.emeController?this.emeController.selectKeySystemFormat(t).then(function(e){return i.loadInternal(t,e)}):this.loadInternal(t)},t.loadInternal=function(t,e){var i,n;e&&t.setKeyFormat(e);var r=t.decryptdata;if(!r){var o=new Error(e?"Expected frag.decryptdata to be defined after setting format "+e:"Missing decryption data on fragment in onKeyLoading");return Promise.reject(this.createKeyLoadError(t,ye.KEY_LOAD_ERROR,o))}var a=r.uri;if(!a)return Promise.reject(this.createKeyLoadError(t,ye.KEY_LOAD_ERROR,new Error('Invalid key URI: "'+a+'"')));var s,l=this.keyUriToKeyInfo[a];if(null!=(i=l)&&i.decryptdata.key)return r.key=l.decryptdata.key,Promise.resolve({"frag":t,"keyInfo":l});if(null!=(n=l)&&n.keyLoadPromise)switch(null==(s=l.mediaKeySessionContext)?void 0:s.keyStatus){case void 0:case"status-pending":case"usable":case"usable-in-future":return l.keyLoadPromise.then(function(e){return r.key=e.keyInfo.decryptdata.key,{"frag":t,"keyInfo":l}})}switch(l=this.keyUriToKeyInfo[a]={"decryptdata":r,"keyLoadPromise":null,"loader":null,"mediaKeySessionContext":null},r.method){case"ISO-23001-7":case"SAMPLE-AES":case"SAMPLE-AES-CENC":case"SAMPLE-AES-CTR":return"identity"===r.keyFormat?this.loadKeyHTTP(l,t):this.loadKeyEME(l,t);case"AES-128":return this.loadKeyHTTP(l,t);default:return Promise.reject(this.createKeyLoadError(t,ye.KEY_LOAD_ERROR,new Error('Key supplied with unsupported METHOD: "'+r.method+'"')))}},t.loadKeyEME=function(t,e){var i={"frag":e,"keyInfo":t};if(this.emeController&&this.config.emeEnabled){var n=this.emeController.loadKey(i);if(n)return(t.keyLoadPromise=n.then(function(e){return t.mediaKeySessionContext=e,i})).catch(function(e){throw t.keyLoadPromise=null,e})}return Promise.resolve(i)},t.loadKeyHTTP=function(n,o){var u=this,a=this.config,c=new(0,a.loader)(a);return o.keyLoader=n.loader=c,n.keyLoadPromise=new Promise(function(s,l){var r={"keyInfo":n,"frag":o,"responseType":"arraybuffer","url":n.decryptdata.uri},e=a.keyLoadPolicy.default,t={"loadPolicy":e,"timeout":e.maxLoadTimeMs,"maxRetry":0,"retryDelay":0,"maxRetryDelay":0},i={"onSuccess":function(e,t,i,n){var r=i.frag,o=i.keyInfo,a=i.url;if(!r.decryptdata||o!==u.keyUriToKeyInfo[a])return l(u.createKeyLoadError(r,ye.KEY_LOAD_ERROR,new Error("after key load, decryptdata unset or changed"),n));o.decryptdata.key=r.decryptdata.key=new Uint8Array(e.data),r.keyLoader=null,o.loader=null,s({"frag":r,"keyInfo":o})},"onError":function(e,t,i,n){u.resetLoader(t),l(u.createKeyLoadError(o,ye.KEY_LOAD_ERROR,new Error("HTTP Error "+e.code+" loading key "+e.text),i,k({"url":r.url,"data":void 0},e)))},"onTimeout":function(e,t,i){u.resetLoader(t),l(u.createKeyLoadError(o,ye.KEY_LOAD_TIMEOUT,new Error("key loading timed out"),i))},"onAbort":function(e,t,i){u.resetLoader(t),l(u.createKeyLoadError(o,ye.INTERNAL_ABORTED,new Error("key loading aborted"),i))}};c.load(r,t,i)})},t.resetLoader=function(e){var t=e.frag,i=e.keyInfo,n=e.url,r=i.loader;t.keyLoader===r&&(t.keyLoader=null,i.loader=null),delete this.keyUriToKeyInfo[n],r&&r.destroy()},e}();function is(){return self.SourceBuffer||self.WebKitSourceBuffer}function ns(){if(!pt())return!1;var e=is();return!e||e.prototype&&"function"==typeof e.prototype.appendBuffer&&"function"==typeof e.prototype.remove}var rs=function(){function e(e,t,i,n){this.config=void 0,this.media=null,this.fragmentTracker=void 0,this.hls=void 0,this.nudgeRetry=0,this.stallReported=!1,this.stalled=null,this.moved=!1,this.seeking=!1,this.config=e,this.media=t,this.fragmentTracker=i,this.hls=n}var t=e.prototype;return t.destroy=function(){this.media=null,this.hls=this.fragmentTracker=null},t.poll=function(e,t){var i=this.config,n=this.media,r=this.stalled;if(null!==n){var o=n.currentTime,a=n.seeking,s=this.seeking&&!a,l=!this.seeking&&a;if(this.seeking=a,o===e)if(l||s)this.stalled=null;else if(n.paused&&!a||n.ended||0===n.playbackRate||!T.getBuffered(n).length)this.nudgeRetry=0;else{var u=T.bufferInfo(n,o,0),c=u.nextStart||0;if(a){var d=u.len>2,h=!c||t&&t.start<=o||c-o>2&&!this.fragmentTracker.getPartialFragment(o);if(d||h)return;this.moved=!1}if(!this.moved&&null!==this.stalled){var f;if(!(u.len>0||c))return;var p=Math.max(c,u.start||0)-o,g=this.hls.levels?this.hls.levels[this.hls.currentLevel]:null,v=(null==g||null==(f=g.details)?void 0:f.live)?2*g.details.targetduration:2,m=this.fragmentTracker.getPartialFragment(o);if(p>0&&(p<=v||m))return void(n.paused||this._trySkipBufferHole(m))}var y=self.performance.now();if(null!==r){var b=y-r;if(a||!(b>=250)||(this._reportStall(u),this.media)){var _=T.bufferInfo(n,o,i.maxBufferHole);this._tryFixBufferStall(_,b)}}else this.stalled=y}else if(this.moved=!0,a||(this.nudgeRetry=0),null!==r){if(this.stallReported){var w=self.performance.now()-r;be.warn("playback not stuck anymore @"+o+", after "+Math.round(w)+"ms"),this.stallReported=!1}this.stalled=null}}},t._tryFixBufferStall=function(e,t){var i=this.config,n=this.fragmentTracker,r=this.media;if(null!==r){var o=r.currentTime,a=n.getPartialFragment(o);if(a&&(this._trySkipBufferHole(a)||!this.media))return;(e.len>i.maxBufferHole||e.nextStart&&e.nextStart-o<i.maxBufferHole)&&t>1e3*i.highBufferWatchdogPeriod&&(be.warn("Trying to nudge playhead over buffer-hole"),this.stalled=null,this._tryNudgeBuffer())}},t._reportStall=function(e){var t=this.hls,i=this.media;if(!this.stallReported&&i){this.stallReported=!0;var n=new Error("Playback stalling at @"+i.currentTime+" due to low buffer ("+JSON.stringify(e)+")");be.warn(n.message),t.trigger(ve.ERROR,{"type":me.MEDIA_ERROR,"details":ye.BUFFER_STALLED_ERROR,"fatal":!1,"error":n,"buffer":e.len})}},t._trySkipBufferHole=function(e){var t=this.config,i=this.hls,n=this.media;if(null===n)return 0;var r=n.currentTime,o=T.bufferInfo(n,r,0),a=r<o.start?o.start:o.nextStart;if(a){var s=o.len<=t.maxBufferHole,l=o.len>0&&o.len<1&&n.readyState<3,u=a-r;if(u>0&&(s||l)){if(u>t.maxBufferHole){var c=this.fragmentTracker,d=!1;if(0===r){var h=c.getAppendedFrag(0,x);h&&a<h.end&&(d=!0)}if(!d){var f=e||c.getAppendedFrag(r,x);if(f){for(var p=!1,g=f.end;g<a;){var v=c.getPartialFragment(g);if(!v){p=!0;break}g+=v.duration}if(p)return 0}}}var m=Math.max(a+.05,r+.1);if(be.warn("skipping hole, adjusting currentTime from "+r+" to "+m),this.moved=!0,this.stalled=null,n.currentTime=m,e&&!e.gap){var y=new Error("fragment loaded with buffer holes, seeking from "+r+" to "+m);i.trigger(ve.ERROR,{"type":me.MEDIA_ERROR,"details":ye.BUFFER_SEEK_OVER_HOLE,"fatal":!1,"error":y,"reason":y.message,"frag":e})}return m}}return 0},t._tryNudgeBuffer=function(){var e=this.config,t=this.hls,i=this.media,n=this.nudgeRetry;if(null!==i){var r=i.currentTime;if(this.nudgeRetry++,n<e.nudgeMaxRetry){var o=r+(n+1)*e.nudgeOffset,a=new Error("Nudging 'currentTime' from "+r+" to "+o);be.warn(a.message),i.currentTime=o,t.trigger(ve.ERROR,{"type":me.MEDIA_ERROR,"details":ye.BUFFER_NUDGE_ON_STALL,"error":a,"fatal":!1})}else{var s=new Error("Playhead still not moving while enough data buffered @"+r+" after "+e.nudgeMaxRetry+" nudges");be.error(s.message),t.trigger(ve.ERROR,{"type":me.MEDIA_ERROR,"details":ye.BUFFER_STALLED_ERROR,"error":s,"fatal":!0})}}},e}(),os=function(r){function e(e,t,i){var n;return(n=r.call(this,e,t,i,"[stream-controller]",x)||this).audioCodecSwap=!1,n.gapController=null,n.level=-1,n._forceStartLoad=!1,n.altAudio=!1,n.audioOnly=!1,n.fragPlaying=null,n.onvplaying=null,n.onvseeked=null,n.fragLastKbps=0,n.couldBacktrack=!1,n.backtrackFragment=null,n.audioCodecSwitch=!1,n.videoBuffer=null,n._registerListeners(),n}u(e,r);var t=e.prototype;return t._registerListeners=function(){var e=this.hls;e.on(ve.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(ve.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(ve.MANIFEST_LOADING,this.onManifestLoading,this),e.on(ve.MANIFEST_PARSED,this.onManifestParsed,this),e.on(ve.LEVEL_LOADING,this.onLevelLoading,this),e.on(ve.LEVEL_LOADED,this.onLevelLoaded,this),e.on(ve.FRAG_LOAD_EMERGENCY_ABORTED,this.onFragLoadEmergencyAborted,this),e.on(ve.ERROR,this.onError,this),e.on(ve.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.on(ve.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),e.on(ve.BUFFER_CREATED,this.onBufferCreated,this),e.on(ve.BUFFER_FLUSHED,this.onBufferFlushed,this),e.on(ve.LEVELS_UPDATED,this.onLevelsUpdated,this),e.on(ve.FRAG_BUFFERED,this.onFragBuffered,this)},t._unregisterListeners=function(){var e=this.hls;e.off(ve.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(ve.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(ve.MANIFEST_LOADING,this.onManifestLoading,this),e.off(ve.MANIFEST_PARSED,this.onManifestParsed,this),e.off(ve.LEVEL_LOADED,this.onLevelLoaded,this),e.off(ve.FRAG_LOAD_EMERGENCY_ABORTED,this.onFragLoadEmergencyAborted,this),e.off(ve.ERROR,this.onError,this),e.off(ve.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.off(ve.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),e.off(ve.BUFFER_CREATED,this.onBufferCreated,this),e.off(ve.BUFFER_FLUSHED,this.onBufferFlushed,this),e.off(ve.LEVELS_UPDATED,this.onLevelsUpdated,this),e.off(ve.FRAG_BUFFERED,this.onFragBuffered,this)},t.onHandlerDestroying=function(){this._unregisterListeners(),r.prototype.onHandlerDestroying.call(this)},t.startLoad=function(e){if(this.levels){var t=this.lastCurrentTime,i=this.hls;if(this.stopLoad(),this.setInterval(100),this.level=-1,!this.startFragRequested){var n=i.startLevel;-1===n&&(i.config.testBandwidth&&this.levels.length>1?(n=0,this.bitrateTest=!0):n=i.firstAutoLevel),i.nextLoadLevel=n,this.level=i.loadLevel,this.loadedmetadata=!1}t>0&&-1===e&&(this.log("Override startPosition with lastCurrentTime @"+t.toFixed(3)),e=t),this.state=b,this.nextLoadPosition=this.startPosition=this.lastCurrentTime=e,this.tick()}else this._forceStartLoad=!0,this.state=s},t.stopLoad=function(){this._forceStartLoad=!1,r.prototype.stopLoad.call(this)},t.doTick=function(){switch(this.state){case Ln:var e=this.levels,t=this.level,i=null==e?void 0:e[t],n=null==i?void 0:i.details;if(n&&(!n.live||this.levelLastLoaded===i)){if(this.waitForCdnTuneIn(n))break;this.state=b;break}if(this.hls.nextLoadLevel!==this.level){this.state=b;break}break;case Tn:var r,o=self.performance.now(),a=this.retryDate;if(!a||o>=a||null!=(r=this.media)&&r.seeking){var s=this.levels,l=this.level,u=null==s?void 0:s[l];this.resetStartWhenNotLoaded(u||null),this.state=b}}this.state===b&&this.doTickIdle(),this.onTickEnd()},t.onTickEnd=function(){r.prototype.onTickEnd.call(this),this.checkBuffer(),this.checkFragmentChanged()},t.doTickIdle=function(){var e=this.hls,t=this.levelLastLoaded,i=this.levels,n=this.media;if(null!==t&&(n||!this.startFragRequested&&e.config.startFragPrefetch)&&(!this.altAudio||!this.audioOnly)){var r=e.nextLoadLevel;if(null!=i&&i[r]){var o=i[r],a=this.getMainFwdBufferInfo();if(null!==a){var s=this.getLevelDetails();if(s&&this._streamEnded(a,s)){var l={};return this.altAudio&&(l.type="video"),this.hls.trigger(ve.BUFFER_EOS,l),void(this.state=Cn)}e.loadLevel!==r&&-1===e.manualLevel&&this.log("Adapting to level "+r+" from level "+this.level),this.level=e.nextLoadLevel=r;var u=o.details;if(!u||this.state===Ln||u.live&&this.levelLastLoaded!==o)return this.level=r,void(this.state=Ln);var c=a.len,d=this.getMaxBufferLength(o.maxBitrate);if(!(c>=d)){this.backtrackFragment&&this.backtrackFragment.start>a.end&&(this.backtrackFragment=null);var h=this.backtrackFragment?this.backtrackFragment.start:a.end,f=this.getNextFragment(h,u);if(this.couldBacktrack&&!this.fragPrevious&&f&&"initSegment"!==f.sn&&this.fragmentTracker.getState(f)!==en){var p,g=(null!=(p=this.backtrackFragment)?p:f).sn-u.startSN,v=u.fragments[g-1];v&&f.cc===v.cc&&(f=v,this.fragmentTracker.removeFragment(v))}else this.backtrackFragment&&a.len&&(this.backtrackFragment=null);if(f&&this.isLoopLoading(f,h)){if(!f.gap){var m=this.audioOnly&&!this.altAudio?M:C,y=(m===C?this.videoBuffer:this.mediaBuffer)||this.media;y&&this.afterBufferFlushed(y,m,x)}f=this.getNextFragmentLoopLoading(f,u,a,x,d)}f&&(!f.initSegment||f.initSegment.data||this.bitrateTest||(f=f.initSegment),this.loadFragment(f,o,h))}}}}},t.loadFragment=function(e,t,i){var n=this.fragmentTracker.getState(e);this.fragCurrent=e,n===Yi||n===Ji?"initSegment"===e.sn?this._loadInitSegment(e,t):this.bitrateTest?(this.log("Fragment "+e.sn+" of level "+e.level+" is being downloaded to test bitrate and will not be buffered"),this._loadBitrateTestFrag(e,t)):(this.startFragRequested=!0,r.prototype.loadFragment.call(this,e,t,i)):this.clearTrackerIfNeeded(e)},t.getBufferedFrag=function(e){return this.fragmentTracker.getBufferedFrag(e,x)},t.followingBufferedFrag=function(e){return e?this.getBufferedFrag(e.end+.5):null},t.immediateLevelSwitch=function(){this.abortCurrentFrag(),this.flushMainBuffer(0,Number.POSITIVE_INFINITY)},t.nextLevelSwitch=function(){var e=this.levels,t=this.media;if(null!=t&&t.readyState){var i,n=this.getAppendedFrag(t.currentTime);n&&n.start>1&&this.flushMainBuffer(0,n.start-1);var r=this.getLevelDetails();if(null!=r&&r.live){var o=this.getMainFwdBufferInfo();if(!o||o.len<2*r.targetduration)return}if(!t.paused&&e){var a=e[this.hls.nextLoadLevel],s=this.fragLastKbps;i=s&&this.fragCurrent?this.fragCurrent.duration*a.maxBitrate/(1e3*s)+1:0}else i=0;var l=this.getBufferedFrag(t.currentTime+i);if(l){var u=this.followingBufferedFrag(l);if(u){this.abortCurrentFrag();var c=u.maxStartPTS?u.maxStartPTS:u.start,d=u.duration,h=Math.max(l.end,c+Math.min(Math.max(d-this.config.maxFragLookUpTolerance,d*(this.couldBacktrack?.5:.125)),d*(this.couldBacktrack?.75:.25)));this.flushMainBuffer(h,Number.POSITIVE_INFINITY)}}}},t.abortCurrentFrag=function(){var e=this.fragCurrent;switch(this.fragCurrent=null,this.backtrackFragment=null,e&&(e.abortRequests(),this.fragmentTracker.removeFragment(e)),this.state){case En:case xn:case Tn:case kn:case Rn:this.state=b}this.nextLoadPosition=this.getLoadPosition()},t.flushMainBuffer=function(e,t){r.prototype.flushMainBuffer.call(this,e,t,this.altAudio?"video":null)},t.onMediaAttached=function(e,t){r.prototype.onMediaAttached.call(this,e,t);var i=t.media;this.onvplaying=this.onMediaPlaying.bind(this),this.onvseeked=this.onMediaSeeked.bind(this),i.addEventListener("playing",this.onvplaying),i.addEventListener("seeked",this.onvseeked),this.gapController=new rs(this.config,i,this.fragmentTracker,this.hls)},t.onMediaDetaching=function(){var e=this.media;e&&this.onvplaying&&this.onvseeked&&(e.removeEventListener("playing",this.onvplaying),e.removeEventListener("seeked",this.onvseeked),this.onvplaying=this.onvseeked=null,this.videoBuffer=null),this.fragPlaying=null,this.gapController&&(this.gapController.destroy(),this.gapController=null),r.prototype.onMediaDetaching.call(this)},t.onMediaPlaying=function(){this.tick()},t.onMediaSeeked=function(){var e=this.media,t=e?e.currentTime:null;J(t)&&this.log("Media seeked to "+t.toFixed(3));var i=this.getMainFwdBufferInfo();null!==i&&0!==i.len?this.tick():this.warn('Main forward buffer length on "seeked" event '+(i?i.len:"empty")+")")},t.onManifestLoading=function(){this.log("Trigger BUFFER_RESET"),this.hls.trigger(ve.BUFFER_RESET,void 0),this.fragmentTracker.removeAllFragments(),this.couldBacktrack=!1,this.startPosition=this.lastCurrentTime=this.fragLastKbps=0,this.levels=this.fragPlaying=this.backtrackFragment=this.levelLastLoaded=null,this.altAudio=this.audioOnly=this.startFragRequested=!1},t.onManifestParsed=function(e,t){var i,n,r=!1,o=!1;t.levels.forEach(function(e){var t=e.audioCodec;t&&(r=r||-1!==t.indexOf("mp4a.40.2"),o=o||-1!==t.indexOf("mp4a.40.5"))}),this.audioCodecSwitch=r&&o&&!("function"==typeof(null==(n=is())||null==(i=n.prototype)?void 0:i.changeType)),this.audioCodecSwitch&&this.log("Both AAC/HE-AAC audio found in levels; declaring level codec as HE-AAC"),this.levels=t.levels,this.startFragRequested=!1},t.onLevelLoading=function(e,t){var i=this.levels;if(i&&this.state===b){var n=i[t.level];(!n.details||n.details.live&&this.levelLastLoaded!==n||this.waitForCdnTuneIn(n.details))&&(this.state=Ln)}},t.onLevelLoaded=function(e,t){var i,n=this.levels,r=t.level,o=t.details,a=o.totalduration;if(n){this.log("Level "+r+" loaded ["+o.startSN+","+o.endSN+"]"+(o.lastPartSn?"[part-"+o.lastPartSn+"-"+o.lastPartIndex+"]":"")+", cc ["+o.startCC+", "+o.endCC+"] duration:"+a);var s=n[r],l=this.fragCurrent;!l||this.state!==xn&&this.state!==Tn||l.level!==t.level&&l.loader&&this.abortCurrentFrag();var u=0;if(o.live||null!=(i=s.details)&&i.live){var c;if(this.checkLiveUpdate(o),o.deltaUpdateFailed)return;u=this.alignPlaylists(o,s.details,null==(c=this.levelLastLoaded)?void 0:c.details)}if(s.details=o,this.levelLastLoaded=s,this.hls.trigger(ve.LEVEL_UPDATED,{"details":o,"level":r}),this.state===Ln){if(this.waitForCdnTuneIn(o))return;this.state=b}this.startFragRequested?o.live&&this.synchronizeToLiveEdge(o):this.setStartPosition(o,u),this.tick()}else this.warn("Levels were reset while loading level "+r)},t._handleFragmentLoadProgress=function(e){var t,i=e.frag,n=e.part,r=e.payload,o=this.levels;if(o){var a=o[i.level],s=a.details;if(!s)return this.warn("Dropping fragment "+i.sn+" of level "+i.level+" after level details were reset"),void this.fragmentTracker.removeFragment(i);var l=a.videoCodec,u=s.PTSKnown||!s.live,c=null==(t=i.initSegment)?void 0:t.data,d=this._getAudioCodec(a),h=this.transmuxer=this.transmuxer||new zr(this.hls,x,this._handleTransmuxComplete.bind(this),this._handleTransmuxerFlush.bind(this)),f=n?n.index:-1,p=-1!==f,g=new an(i.level,i.sn,i.stats.chunkCount,r.byteLength,f,p),v=this.initPTS[i.cc];h.push(r,c,d,l,i,n,s.totalduration,u,g,v)}else this.warn("Levels were reset while fragment load was in progress. Fragment "+i.sn+" of level "+i.level+" will not be buffered")},t.onAudioTrackSwitching=function(e,t){var i=this.altAudio;if(!t.url){if(this.mediaBuffer!==this.media){this.log("Switching on main audio, use media.buffered to schedule main fragment loading"),this.mediaBuffer=this.media;var n=this.fragCurrent;n&&(this.log("Switching to main audio track, cancel main fragment load"),n.abortRequests(),this.fragmentTracker.removeFragment(n)),this.resetTransmuxer(),this.resetLoadingState()}else this.audioOnly&&this.resetTransmuxer();var r=this.hls;i&&(r.trigger(ve.BUFFER_FLUSHING,{"startOffset":0,"endOffset":Number.POSITIVE_INFINITY,"type":null}),this.fragmentTracker.removeAllFragments()),r.trigger(ve.AUDIO_TRACK_SWITCHED,t)}},t.onAudioTrackSwitched=function(e,t){var i=t.id,n=!!this.hls.audioTracks[i].url;if(n){var r=this.videoBuffer;r&&this.mediaBuffer!==r&&(this.log("Switching on alternate audio, use video.buffered to schedule main fragment loading"),this.mediaBuffer=r)}this.altAudio=n,this.tick()},t.onBufferCreated=function(e,t){var i,n,r=t.tracks,o=!1;for(var a in r){var s=r[a];if("main"===s.id){if(n=a,i=s,"video"===a){var l=r[a];l&&(this.videoBuffer=l.buffer)}}else o=!0}o&&i?(this.log("Alternate track found, use "+n+".buffered to schedule main fragment loading"),this.mediaBuffer=i.buffer):this.mediaBuffer=this.media},t.onFragBuffered=function(e,t){var i=t.frag,n=t.part;if(!i||i.type===x){if(this.fragContextChanged(i))return this.warn("Fragment "+i.sn+(n?" p: "+n.index:"")+" of level "+i.level+" finished buffering, but was aborted. state: "+this.state),void(this.state===Rn&&(this.state=b));var r=n?n.stats:i.stats;this.fragLastKbps=Math.round(8*r.total/(r.buffering.end-r.loading.first)),"initSegment"!==i.sn&&(this.fragPrevious=i),this.fragBufferedComplete(i,n)}},t.onError=function(e,t){var i;if(t.fatal)this.state=An;else switch(t.details){case ye.FRAG_GAP:case ye.FRAG_PARSING_ERROR:case ye.FRAG_DECRYPT_ERROR:case ye.FRAG_LOAD_ERROR:case ye.FRAG_LOAD_TIMEOUT:case ye.KEY_LOAD_ERROR:case ye.KEY_LOAD_TIMEOUT:this.onFragmentOrKeyLoadError(x,t);break;case ye.LEVEL_LOAD_ERROR:case ye.LEVEL_LOAD_TIMEOUT:case ye.LEVEL_PARSING_ERROR:t.levelRetry||this.state!==Ln||(null==(i=t.context)?void 0:i.type)!==jt||(this.state=b);break;case ye.BUFFER_APPEND_ERROR:case ye.BUFFER_FULL_ERROR:if(!t.parent||"main"!==t.parent)return;if(t.details===ye.BUFFER_APPEND_ERROR)return void this.resetLoadingState();this.reduceLengthAndFlushBuffer(t)&&this.flushMainBuffer(0,Number.POSITIVE_INFINITY);break;case ye.INTERNAL_EXCEPTION:this.recoverWorkerError(t)}},t.checkBuffer=function(){var e=this.media,t=this.gapController;if(e&&t&&e.readyState){if(this.loadedmetadata||!T.getBuffered(e).length){var i=this.state!==b?this.fragCurrent:null;t.poll(this.lastCurrentTime,i)}this.lastCurrentTime=e.currentTime}},t.onFragLoadEmergencyAborted=function(){this.state=b,this.loadedmetadata||(this.startFragRequested=!1,this.nextLoadPosition=this.startPosition),this.tickImmediate()},t.onBufferFlushed=function(e,t){var i=t.type;if(i!==M||this.audioOnly&&!this.altAudio){var n=(i===C?this.videoBuffer:this.mediaBuffer)||this.media;this.afterBufferFlushed(n,i,x),this.tick()}},t.onLevelsUpdated=function(e,t){this.level>-1&&this.fragCurrent&&(this.level=this.fragCurrent.level),this.levels=t.levels},t.swapAudioCodec=function(){this.audioCodecSwap=!this.audioCodecSwap},t.seekToStartPos=function(){var e=this.media;if(e){var t=e.currentTime,i=this.startPosition;if(i>=0&&t<i){if(e.seeking)return void this.log("could not seek to "+i+", already seeking at "+t);var n=T.getBuffered(e),r=(n.length?n.start(0):0)-i;r>0&&(r<this.config.maxBufferHole||r<this.config.maxFragLookUpTolerance)&&(this.log("adjusting start position by "+r+" to match buffer start"),i+=r,this.startPosition=i),this.log("seek to target start position "+i+" from current time "+t),e.currentTime=i}}},t._getAudioCodec=function(e){var t=this.config.defaultAudioCodec||e.audioCodec;return this.audioCodecSwap&&t&&(this.log("Swapping audio codec"),t=-1!==t.indexOf("mp4a.40.5")?"mp4a.40.2":"mp4a.40.5"),t},t._loadBitrateTestFrag=function(n,r){var o=this;n.bitrateTest=!0,this._doFragLoad(n,r).then(function(e){var t=o.hls;if(e&&!o.fragContextChanged(n)){r.fragmentError=0,o.state=b,o.startFragRequested=!1,o.bitrateTest=!1;var i=n.stats;i.parsing.start=i.parsing.end=i.buffering.start=i.buffering.end=self.performance.now(),t.trigger(ve.FRAG_LOADED,e),n.bitrateTest=!1}})},t._handleTransmuxComplete=function(e){var t,i="main",n=this.hls,r=e.remuxResult,o=e.chunkMeta,a=this.getCurrentContext(o);if(a){var s=a.frag,l=a.part,u=a.level,c=r.video,d=r.text,h=r.id3,f=r.initSegment,p=u.details,g=this.altAudio?void 0:r.audio;if(this.fragContextChanged(s))this.fragmentTracker.removeFragment(s);else{if(this.state=kn,f){if(null!=f&&f.tracks){var v=s.initSegment||s;this._bufferInitSegment(u,f.tracks,v,o),n.trigger(ve.FRAG_PARSING_INIT_SEGMENT,{"frag":v,"id":i,"tracks":f.tracks})}var m=f.initPTS,y=f.timescale;J(m)&&(this.initPTS[s.cc]={"baseTime":m,"timescale":y},n.trigger(ve.INIT_PTS_FOUND,{"frag":s,"id":i,"initPTS":m,"timescale":y}))}if(c&&p&&"initSegment"!==s.sn){var b=p.fragments[s.sn-1-p.startSN],_=s.sn===p.startSN,w=!b||s.cc>b.cc;if(!1!==r.independent){var E=c.startPTS,x=c.endPTS,T=c.startDTS,S=c.endDTS;if(l)l.elementaryStreams[c.type]={"startPTS":E,"endPTS":x,"startDTS":T,"endDTS":S};else if(c.firstKeyFrame&&c.independent&&1===o.id&&!w&&(this.couldBacktrack=!0),c.dropped&&c.independent){var k=this.getMainFwdBufferInfo(),R=(k?k.end:this.getLoadPosition())+this.config.maxBufferHole,C=c.firstKeyFramePTS?c.firstKeyFramePTS:E;if(!_&&R<C-this.config.maxBufferHole&&!w)return void this.backtrack(s);w&&(s.gap=!0),s.setElementaryStreamInfo(c.type,s.start,x,s.start,S,!0)}else _&&E>2&&(s.gap=!0);s.setElementaryStreamInfo(c.type,E,x,T,S),this.backtrackFragment&&(this.backtrackFragment=s),this.bufferFragmentData(c,s,l,o,_||w)}else{if(!_&&!w)return void this.backtrack(s);s.gap=!0}}if(g){var A=g.startPTS,O=g.endPTS,L=g.startDTS,P=g.endDTS;l&&(l.elementaryStreams[M]={"startPTS":A,"endPTS":O,"startDTS":L,"endDTS":P}),s.setElementaryStreamInfo(M,A,O,L,P),this.bufferFragmentData(g,s,l,o)}if(p&&null!=h&&null!=(t=h.samples)&&t.length){var I={"id":i,"frag":s,"details":p,"samples":h.samples};n.trigger(ve.FRAG_PARSING_METADATA,I)}if(p&&d){var D={"id":i,"frag":s,"details":p,"samples":d.samples};n.trigger(ve.FRAG_PARSING_USERDATA,D)}}}else this.resetWhenMissingContext(o)},t._bufferInitSegment=function(e,i,n,r){var o=this;if(this.state===kn){this.audioOnly=!!i.audio&&!i.video,this.altAudio&&!this.audioOnly&&delete i.audio;var t=i.audio,a=i.video,s=i.audiovideo;if(t){var l=e.audioCodec,u=navigator.userAgent.toLowerCase();if(this.audioCodecSwitch){l&&(l=-1!==l.indexOf("mp4a.40.5")?"mp4a.40.2":"mp4a.40.5");var c=t.metadata;c&&"channelCount"in c&&1!==(c.channelCount||1)&&-1===u.indexOf("firefox")&&(l="mp4a.40.5")}l&&-1!==l.indexOf("mp4a.40.5")&&-1!==u.indexOf("android")&&"audio/mpeg"!==t.container&&(l="mp4a.40.2",this.log("Android: force audio codec to "+l)),e.audioCodec&&e.audioCodec!==l&&this.log('Swapping manifest audio codec "'+e.audioCodec+'" for "'+l+'"'),t.levelCodec=l,t.id="main",this.log("Init audio buffer, container:"+t.container+", codecs[selected/level/parsed]=["+(l||"")+"/"+(e.audioCodec||"")+"/"+t.codec+"]")}a&&(a.levelCodec=e.videoCodec,a.id="main",this.log("Init video buffer, container:"+a.container+", codecs[level/parsed]=["+(e.videoCodec||"")+"/"+a.codec+"]")),s&&this.log("Init audiovideo buffer, container:"+s.container+", codecs[level/parsed]=["+e.codecs+"/"+s.codec+"]"),this.hls.trigger(ve.BUFFER_CODECS,i),Object.keys(i).forEach(function(e){var t=i[e].initSegment;null!=t&&t.byteLength&&o.hls.trigger(ve.BUFFER_APPENDING,{"type":e,"data":t,"frag":n,"part":null,"chunkMeta":r,"parent":n.type})}),this.tickImmediate()}},t.getMainFwdBufferInfo=function(){return this.getFwdBufferInfo(this.mediaBuffer?this.mediaBuffer:this.media,x)},t.backtrack=function(e){this.couldBacktrack=!0,this.backtrackFragment=e,this.resetTransmuxer(),this.flushBufferGap(e),this.fragmentTracker.removeFragment(e),this.fragPrevious=null,this.nextLoadPosition=e.start,this.state=b},t.checkFragmentChanged=function(){var e=this.media,t=null;if(e&&e.readyState>1&&!1===e.seeking){var i=e.currentTime;if(T.isBuffered(e,i)?t=this.getAppendedFrag(i):T.isBuffered(e,i+.1)&&(t=this.getAppendedFrag(i+.1)),t){this.backtrackFragment=null;var n=this.fragPlaying,r=t.level;n&&t.sn===n.sn&&n.level===r||(this.fragPlaying=t,this.hls.trigger(ve.FRAG_CHANGED,{"frag":t}),n&&n.level===r||this.hls.trigger(ve.LEVEL_SWITCHED,{"level":r}))}}},l(e,[{"key":"nextLevel","get":function(){var e=this.nextBufferedFrag;return e?e.level:-1}},{"key":"currentFrag","get":function(){var e=this.media;return e?this.fragPlaying||this.getAppendedFrag(e.currentTime):null}},{"key":"currentProgramDateTime","get":function(){var e=this.media;if(e){var t=e.currentTime,i=this.currentFrag;if(i&&J(t)&&J(i.programDateTime)){var n=i.programDateTime+1e3*(t-i.start);return new Date(n)}}return null}},{"key":"currentLevel","get":function(){var e=this.currentFrag;return e?e.level:-1}},{"key":"nextBufferedFrag","get":function(){var e=this.currentFrag;return e?this.followingBufferedFrag(e):null}},{"key":"forceStartLoad","get":function(){return this._forceStartLoad}}]),e}(Pn),as=function(){function S(e){void 0===e&&(e={}),this.config=void 0,this.userConfig=void 0,this.coreComponents=void 0,this.networkControllers=void 0,this.started=!1,this._emitter=new jr,this._autoLevelCapping=-1,this._maxHdcpLevel=null,this.abrController=void 0,this.bufferController=void 0,this.capLevelController=void 0,this.latencyController=void 0,this.levelController=void 0,this.streamController=void 0,this.audioTrackController=void 0,this.subtitleTrackController=void 0,this.emeController=void 0,this.cmcdController=void 0,this._media=null,this.url=null,this.triggeringException=void 0,U(e.debug||!1,"Hls instance");var t=this.config=function(e,l){if((l.liveSyncDurationCount||l.liveMaxLatencyDurationCount)&&(l.liveSyncDuration||l.liveMaxLatencyDuration))throw new Error("Illegal hls.js config: don't mix up liveSyncDurationCount/liveMaxLatencyDurationCount and liveSyncDuration/liveMaxLatencyDuration");if(void 0!==l.liveMaxLatencyDurationCount&&(void 0===l.liveSyncDurationCount||l.liveMaxLatencyDurationCount<=l.liveSyncDurationCount))throw new Error('Illegal hls.js config: "liveMaxLatencyDurationCount" must be greater than "liveSyncDurationCount"');if(void 0!==l.liveMaxLatencyDuration&&(void 0===l.liveSyncDuration||l.liveMaxLatencyDuration<=l.liveSyncDuration))throw new Error('Illegal hls.js config: "liveMaxLatencyDuration" must be greater than "liveSyncDuration"');var u=Ya(e),t=["TimeOut","MaxRetry","RetryDelay","MaxRetryTimeout"];return["manifest","level","frag"].forEach(function(r){var o=("level"===r?"playlist":r)+"LoadPolicy",a=void 0===l[o],s=[];t.forEach(function(e){var t=r+"Loading"+e,i=l[t];if(void 0!==i&&a){s.push(t);var n=u[o].default;switch(l[o]={"default":n},e){case"TimeOut":n.maxLoadTimeMs=i,n.maxTimeToFirstByteMs=i;break;case"MaxRetry":n.errorRetry.maxNumRetry=i,n.timeoutRetry.maxNumRetry=i;break;case"RetryDelay":n.errorRetry.retryDelayMs=i,n.timeoutRetry.retryDelayMs=i;break;case"MaxRetryTimeout":n.errorRetry.maxRetryDelayMs=i,n.timeoutRetry.maxRetryDelayMs=i}}}),s.length&&be.warn('hls.js config: "'+s.join('", "')+'" setting(s) are deprecated, use "'+o+'": '+JSON.stringify(l[o]))}),k(k({},u),l)}(S.DefaultConfig,e);this.userConfig=e,t.progressive&&Qa(t);var i=t.abrController,n=t.bufferController,r=t.capLevelController,o=t.errorController,a=t.fpsController,s=new o(this),l=this.abrController=new i(this),u=this.bufferController=new n(this),c=this.capLevelController=new r(this),d=new a(this),h=new zt(this),f=new ii(this),p=t.contentSteeringController,g=p?new p(this):null,v=this.levelController=new Ja(this,g),m=new tn(this),y=new ts(this.config),b=this.streamController=new os(this,m,y);c.setStreamController(b),d.setStreamController(b);var _=[h,v,b];g&&_.splice(1,0,g),this.networkControllers=_;var w=[l,u,c,d,f,m];this.audioTrackController=this.createController(t.audioTrackController,_);var E=t.audioStreamController;E&&_.push(new E(this,m,y)),this.subtitleTrackController=this.createController(t.subtitleTrackController,_);var x=t.subtitleStreamController;x&&_.push(new x(this,m,y)),this.createController(t.timelineController,w),y.emeController=this.emeController=this.createController(t.emeController,w),this.cmcdController=this.createController(t.cmcdController,w),this.latencyController=this.createController(ni,w),this.coreComponents=w,_.push(s);var T=s.onErrorOut;"function"==typeof T&&this.on(ve.ERROR,T,s)}S.isMSESupported=function(){return ns()},S.isSupported=function(){return function(){if(!ns())return!1;var t=pt();return"function"==typeof(null==t?void 0:t.isTypeSupported)&&(["avc1.42E01E,mp4a.40.2","av01.0.01M.08","vp09.00.50.08"].some(function(e){return t.isTypeSupported(yt(e,"video"))})||["mp4a.40.2","fLaC"].some(function(e){return t.isTypeSupported(yt(e,"audio"))}))}()},S.getMediaSource=function(){return pt()};var e=S.prototype;return e.createController=function(e,t){if(e){var i=new e(this);return t&&t.push(i),i}return null},e.on=function(e,t,i){void 0===i&&(i=this),this._emitter.on(e,t,i)},e.once=function(e,t,i){void 0===i&&(i=this),this._emitter.once(e,t,i)},e.removeAllListeners=function(e){this._emitter.removeAllListeners(e)},e.off=function(e,t,i,n){void 0===i&&(i=this),this._emitter.off(e,t,i,n)},e.listeners=function(e){return this._emitter.listeners(e)},e.emit=function(e,t,i){return this._emitter.emit(e,t,i)},e.trigger=function(e,t){if(this.config.debug)return this.emit(e,e,t);try{return this.emit(e,e,t)}catch(t){if(be.error("An internal error happened while handling event "+e+'. Error message: "'+t.message+'". Here is a stacktrace:',t),!this.triggeringException){this.triggeringException=!0;var i=e===ve.ERROR;this.trigger(ve.ERROR,{"type":me.OTHER_ERROR,"details":ye.INTERNAL_EXCEPTION,"fatal":i,"event":e,"error":t}),this.triggeringException=!1}}return!1},e.listenerCount=function(e){return this._emitter.listenerCount(e)},e.destroy=function(){be.log("destroy"),this.trigger(ve.DESTROYING,void 0),this.detachMedia(),this.removeAllListeners(),this._autoLevelCapping=-1,this.url=null,this.networkControllers.forEach(function(e){return e.destroy()}),this.networkControllers.length=0,this.coreComponents.forEach(function(e){return e.destroy()}),this.coreComponents.length=0;var e=this.config;e.xhrSetup=e.fetchSetup=void 0,this.userConfig=null},e.attachMedia=function(e){be.log("attachMedia"),this._media=e,this.trigger(ve.MEDIA_ATTACHING,{"media":e})},e.detachMedia=function(){be.log("detachMedia"),this.trigger(ve.MEDIA_DETACHING,void 0),this._media=null},e.loadSource=function(e){this.stopLoad();var t=this.media,i=this.url,n=this.url=L.buildAbsoluteURL(self.location.href,e,{"alwaysNormalize":!0});this._autoLevelCapping=-1,this._maxHdcpLevel=null,be.log("loadSource:"+n),t&&i&&(i!==n||this.bufferController.hasSourceTypes())&&(this.detachMedia(),this.attachMedia(t)),this.trigger(ve.MANIFEST_LOADING,{"url":e})},e.startLoad=function(t){void 0===t&&(t=-1),be.log("startLoad("+t+")"),this.started=!0,this.networkControllers.forEach(function(e){e.startLoad(t)})},e.stopLoad=function(){be.log("stopLoad"),this.started=!1,this.networkControllers.forEach(function(e){e.stopLoad()})},e.resumeBuffering=function(){this.started&&this.networkControllers.forEach(function(e){"fragmentLoader"in e&&e.startLoad(-1)})},e.pauseBuffering=function(){this.networkControllers.forEach(function(e){"fragmentLoader"in e&&e.stopLoad()})},e.swapAudioCodec=function(){be.log("swapAudioCodec"),this.streamController.swapAudioCodec()},e.recoverMediaError=function(){be.log("recoverMediaError");var e=this._media;this.detachMedia(),e&&this.attachMedia(e)},e.removeLevel=function(e){this.levelController.removeLevel(e)},e.setAudioOption=function(e){var t;return null==(t=this.audioTrackController)?void 0:t.setAudioOption(e)},e.setSubtitleOption=function(e){var t;return null==(t=this.subtitleTrackController)||t.setSubtitleOption(e),null},l(S,[{"key":"levels","get":function(){var e=this.levelController.levels;return e||[]}},{"key":"currentLevel","get":function(){return this.streamController.currentLevel},"set":function(e){be.log("set currentLevel:"+e),this.levelController.manualLevel=e,this.streamController.immediateLevelSwitch()}},{"key":"nextLevel","get":function(){return this.streamController.nextLevel},"set":function(e){be.log("set nextLevel:"+e),this.levelController.manualLevel=e,this.streamController.nextLevelSwitch()}},{"key":"loadLevel","get":function(){return this.levelController.level},"set":function(e){be.log("set loadLevel:"+e),this.levelController.manualLevel=e}},{"key":"nextLoadLevel","get":function(){return this.levelController.nextLoadLevel},"set":function(e){this.levelController.nextLoadLevel=e}},{"key":"firstLevel","get":function(){return Math.max(this.levelController.firstLevel,this.minAutoLevel)},"set":function(e){be.log("set firstLevel:"+e),this.levelController.firstLevel=e}},{"key":"startLevel","get":function(){var e=this.levelController.startLevel;return-1===e&&this.abrController.forcedAutoLevel>-1?this.abrController.forcedAutoLevel:e},"set":function(e){be.log("set startLevel:"+e),-1!==e&&(e=Math.max(e,this.minAutoLevel)),this.levelController.startLevel=e}},{"key":"capLevelToPlayerSize","get":function(){return this.config.capLevelToPlayerSize},"set":function(e){var t=!!e;t!==this.config.capLevelToPlayerSize&&(t?this.capLevelController.startCapping():(this.capLevelController.stopCapping(),this.autoLevelCapping=-1,this.streamController.nextLevelSwitch()),this.config.capLevelToPlayerSize=t)}},{"key":"autoLevelCapping","get":function(){return this._autoLevelCapping},"set":function(e){this._autoLevelCapping!==e&&(be.log("set autoLevelCapping:"+e),this._autoLevelCapping=e,this.levelController.checkMaxAutoUpdated())}},{"key":"bandwidthEstimate","get":function(){var e=this.abrController.bwEstimator;return e?e.getEstimate():NaN},"set":function(e){this.abrController.resetEstimator(e)}},{"key":"ttfbEstimate","get":function(){var e=this.abrController.bwEstimator;return e?e.getEstimateTTFB():NaN}},{"key":"maxHdcpLevel","get":function(){return this._maxHdcpLevel},"set":function(e){(function(e){return ri.indexOf(e)>-1})(e)&&this._maxHdcpLevel!==e&&(this._maxHdcpLevel=e,this.levelController.checkMaxAutoUpdated())}},{"key":"autoLevelEnabled","get":function(){return-1===this.levelController.manualLevel}},{"key":"manualLevel","get":function(){return this.levelController.manualLevel}},{"key":"minAutoLevel","get":function(){var e=this.levels,t=this.config.minAutoBitrate;if(!e)return 0;for(var i=e.length,n=0;n<i;n++)if(e[n].maxBitrate>=t)return n;return 0}},{"key":"maxAutoLevel","get":function(){var e,t=this.levels,i=this.autoLevelCapping,n=this.maxHdcpLevel;if(e=-1===i&&null!=t&&t.length?t.length-1:i,n)for(var r=e;r--;){var o=t[r].attrs["HDCP-LEVEL"];if(o&&o<=n)return r}return e}},{"key":"firstAutoLevel","get":function(){return this.abrController.firstAutoLevel}},{"key":"nextAutoLevel","get":function(){return this.abrController.nextAutoLevel},"set":function(e){this.abrController.nextAutoLevel=e}},{"key":"playingDate","get":function(){return this.streamController.currentProgramDateTime}},{"key":"mainForwardBufferInfo","get":function(){return this.streamController.getMainFwdBufferInfo()}},{"key":"allAudioTracks","get":function(){var e=this.audioTrackController;return e?e.allAudioTracks:[]}},{"key":"audioTracks","get":function(){var e=this.audioTrackController;return e?e.audioTracks:[]}},{"key":"audioTrack","get":function(){var e=this.audioTrackController;return e?e.audioTrack:-1},"set":function(e){var t=this.audioTrackController;t&&(t.audioTrack=e)}},{"key":"allSubtitleTracks","get":function(){var e=this.subtitleTrackController;return e?e.allSubtitleTracks:[]}},{"key":"subtitleTracks","get":function(){var e=this.subtitleTrackController;return e?e.subtitleTracks:[]}},{"key":"subtitleTrack","get":function(){var e=this.subtitleTrackController;return e?e.subtitleTrack:-1},"set":function(e){var t=this.subtitleTrackController;t&&(t.subtitleTrack=e)}},{"key":"media","get":function(){return this._media}},{"key":"subtitleDisplay","get":function(){var e=this.subtitleTrackController;return!!e&&e.subtitleDisplay},"set":function(e){var t=this.subtitleTrackController;t&&(t.subtitleDisplay=e)}},{"key":"lowLatencyMode","get":function(){return this.config.lowLatencyMode},"set":function(e){this.config.lowLatencyMode=e}},{"key":"liveSyncPosition","get":function(){return this.latencyController.liveSyncPosition}},{"key":"latency","get":function(){return this.latencyController.latency}},{"key":"maxLatency","get":function(){return this.latencyController.maxLatency}},{"key":"targetLatency","get":function(){return this.latencyController.targetLatency}},{"key":"drift","get":function(){return this.latencyController.drift}},{"key":"forceStartLoad","get":function(){return this.streamController.forceStartLoad}}],[{"key":"version","get":function(){return"1.5.11"}},{"key":"Events","get":function(){return ve}},{"key":"ErrorTypes","get":function(){return me}},{"key":"ErrorDetails","get":function(){return ye}},{"key":"DefaultConfig","get":function(){return S.defaultConfig?S.defaultConfig:Xa},"set":function(e){S.defaultConfig=e}}]),S}();return as.defaultConfig=void 0,as},"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).Hls=t()}(!1);jQuery.fn.highlight=function(e){function u(e,t){var i=0;if(e.nodeType==3){var n=e.data.toUpperCase().indexOf(t);if(n>=0){var r=document.createElement("span");r.className="highlight";var o=e.splitText(n);var a=o.splitText(t.length);var s=o.cloneNode(true);r.appendChild(s);o.parentNode.replaceChild(r,o);i=1}}else if(e.nodeType==1&&e.childNodes&&!/(script|style)/i.test(e.tagName)){for(var l=0;l<e.childNodes.length;++l){l+=u(e.childNodes[l],t)}}return i}return this.each(function(){u(this,e.toUpperCase())})};jQuery.fn.removeHighlight=function(){return this.find("span.highlight").each(function(){this.parentNode.firstChild.nodeName;with(this.parentNode){replaceChild(this.firstChild,this);normalize()}}).end()};(function(e,t){typeof exports==="object"&&typeof module!=="undefined"?module.exports=t():typeof define==="function"&&define.amd?define(t):e.PointerEventsPolyfill=t()})(this,function(){"use strict";var a=["bubbles","cancelable","view","detail","screenX","screenY","clientX","clientY","ctrlKey","altKey","shiftKey","metaKey","button","relatedTarget","pageX","pageY"];var s=[false,false,null,null,0,0,0,0,false,false,false,false,0,null,0,0];function n(e,t){t=t||Object.create(null);var i=document.createEvent("Event");i.initEvent(e,t.bubbles||false,t.cancelable||false);for(var n=2,r;n<a.length;n++){r=a[n];i[r]=t[r]||s[n]}i.buttons=t.buttons||0;var o=0;if(t.pressure&&i.buttons){o=t.pressure}else{o=i.buttons?.5:0}i.x=i.clientX;i.y=i.clientY;i.pointerId=t.pointerId||0;i.width=t.width||0;i.height=t.height||0;i.pressure=o;i.tiltX=t.tiltX||0;i.tiltY=t.tiltY||0;i.pointerType=t.pointerType||"";i.hwTimestamp=t.hwTimestamp||0;i.isPrimary=t.isPrimary||false;return i}var e=window.Map&&window.Map.prototype.forEach;var t=e?Map:i;function i(){this.array=[];this.size=0}i.prototype={"set":function(e,t){if(t===undefined){return this.delete(e)}if(!this.has(e)){this.size++}this.array[e]=t},"has":function(e){return this.array[e]!==undefined},"delete":function(e){if(this.has(e)){delete this.array[e];this.size--}},"get":function(e){return this.array[e]},"clear":function(){this.array.length=0;this.size=0},"forEach":function(i,n){return this.array.forEach(function(e,t){i.call(n,e,t,this)},this)}};var r=["bubbles","cancelable","view","detail","screenX","screenY","clientX","clientY","ctrlKey","altKey","shiftKey","metaKey","button","relatedTarget","buttons","pointerId","width","height","pressure","tiltX","tiltY","pointerType","hwTimestamp","isPrimary","type","target","currentTarget","which","pageX","pageY","timeStamp"];var o=[false,false,null,null,0,0,0,0,false,false,false,false,0,null,0,0,0,0,0,0,0,"",0,false,"",null,null,0,0,0,0];var l={"pointerover":1,"pointerout":1,"pointerenter":1,"pointerleave":1};var u=typeof SVGElementInstance!=="undefined";var c={"pointermap":new t,"eventMap":Object.create(null),"captureInfo":Object.create(null),"eventSources":Object.create(null),"eventSourceList":[],"registerSource":function(e,t){var i=t;var n=i.events;if(n){n.forEach(function(e){if(i[e]){this.eventMap[e]=i[e].bind(i)}},this);this.eventSources[e]=i;this.eventSourceList.push(i)}},"register":function(e){var t=this.eventSourceList.length;for(var i=0,n;i<t&&(n=this.eventSourceList[i]);i++){n.register.call(n,e)}},"unregister":function(e){var t=this.eventSourceList.length;for(var i=0,n;i<t&&(n=this.eventSourceList[i]);i++){n.unregister.call(n,e)}},"contains":function(e,t){try{return e.contains(t)}catch(e){return false}},"down":function(e){e.bubbles=true;this.fireEvent("pointerdown",e)},"move":function(e){e.bubbles=true;this.fireEvent("pointermove",e)},"up":function(e){e.bubbles=true;this.fireEvent("pointerup",e)},"enter":function(e){e.bubbles=false;this.fireEvent("pointerenter",e)},"leave":function(e){e.bubbles=false;this.fireEvent("pointerleave",e)},"over":function(e){e.bubbles=true;this.fireEvent("pointerover",e)},"out":function(e){e.bubbles=true;this.fireEvent("pointerout",e)},"cancel":function(e){e.bubbles=true;this.fireEvent("pointercancel",e)},"leaveOut":function(e){this.out(e);this.propagate(e,this.leave,false)},"enterOver":function(e){this.over(e);this.propagate(e,this.enter,true)},"eventHandler":function(e){if(e._handledByPE){return}var t=e.type;var i=this.eventMap&&this.eventMap[t];if(i){i(e)}e._handledByPE=true},"listen":function(t,e){e.forEach(function(e){this.addEvent(t,e)},this)},"unlisten":function(t,e){e.forEach(function(e){this.removeEvent(t,e)},this)},"addEvent":function(e,t){e.addEventListener(t,this.boundHandler)},"removeEvent":function(e,t){e.removeEventListener(t,this.boundHandler)},"makeEvent":function(e,t){if(this.captureInfo[t.pointerId]){t.relatedTarget=null}var i=new n(e,t);if(t.preventDefault){i.preventDefault=t.preventDefault}i._target=i._target||t.target;return i},"fireEvent":function(e,t){var i=this.makeEvent(e,t);return this.dispatchEvent(i)},"cloneEvent":function(e){var t=Object.create(null);var i;for(var n=0;n<r.length;n++){i=r[n];t[i]=e[i]||o[n];if(u&&(i==="target"||i==="relatedTarget")){if(t[i]instanceof SVGElementInstance){t[i]=t[i].correspondingUseElement}}}if(e.preventDefault){t.preventDefault=function(){e.preventDefault()}}return t},"getTarget":function(e){var t=this.captureInfo[e.pointerId];if(!t){return e._target}if(e._target===t||!(e.type in l)){return t}},"propagate":function(t,i,e){var n=t.target;var r=[];while(!n.contains(t.relatedTarget)&&n!==document){r.push(n);n=n.parentNode}if(e){r.reverse()}r.forEach(function(e){t.target=e;i.call(this,t)},this)},"setCapture":function(e,t){if(this.captureInfo[e]){this.releaseCapture(e)}this.captureInfo[e]=t;var i=new n("gotpointercapture");i.pointerId=e;this.implicitRelease=this.releaseCapture.bind(this,e);document.addEventListener("pointerup",this.implicitRelease);document.addEventListener("pointercancel",this.implicitRelease);i._target=t;this.asyncDispatchEvent(i)},"releaseCapture":function(e){var t=this.captureInfo[e];if(t){var i=new n("lostpointercapture");i.pointerId=e;this.captureInfo[e]=undefined;document.removeEventListener("pointerup",this.implicitRelease);document.removeEventListener("pointercancel",this.implicitRelease);i._target=t;this.asyncDispatchEvent(i)}},"dispatchEvent":function(e){var t=this.getTarget(e);if(t){return t.dispatchEvent(e)}},"asyncDispatchEvent":function(e){requestAnimationFrame(this.dispatchEvent.bind(this,e))}};c.boundHandler=c.eventHandler.bind(c);var d={"shadow":function(e){if(e){return e.shadowRoot||e.webkitShadowRoot}},"canTarget":function(e){return e&&Boolean(e.elementFromPoint)},"targetingShadow":function(e){var t=this.shadow(e);if(this.canTarget(t)){return t}},"olderShadow":function(e){var t=e.olderShadowRoot;if(!t){var i=e.querySelector("shadow");if(i){t=i.olderShadowRoot}}return t},"allShadows":function(e){var t=[];var i=this.shadow(e);while(i){t.push(i);i=this.olderShadow(i)}return t},"searchRoot":function(e,t,i){if(e){var n=e.elementFromPoint(t,i);var r,o;o=this.targetingShadow(n);while(o){r=o.elementFromPoint(t,i);if(!r){o=this.olderShadow(o)}else{var a=this.targetingShadow(r);return this.searchRoot(a,t,i)||r}}return n}},"owner":function(e){var t=e;while(t.parentNode){t=t.parentNode}if(t.nodeType!==Node.DOCUMENT_NODE&&t.nodeType!==Node.DOCUMENT_FRAGMENT_NODE){t=document}return t},"findTarget":function(e){var t=e.clientX;var i=e.clientY;var n=this.owner(e.target);if(!n.elementFromPoint(t,i)){n=document}return this.searchRoot(n,t,i)}};var h=Array.prototype.forEach.call.bind(Array.prototype.forEach);var B=Array.prototype.map.call.bind(Array.prototype.map);var F=Array.prototype.slice.call.bind(Array.prototype.slice);var N=Array.prototype.filter.call.bind(Array.prototype.filter);var f=window.MutationObserver||window.WebKitMutationObserver;var j="[touch-action]";var U={"subtree":true,"childList":true,"attributes":true,"attributeOldValue":true,"attributeFilter":["touch-action"]};function p(e,t,i,n){this.addCallback=e.bind(n);this.removeCallback=t.bind(n);this.changedCallback=i.bind(n);if(f){this.observer=new f(this.mutationWatcher.bind(this))}}p.prototype={"watchSubtree":function(e){if(this.observer&&d.canTarget(e)){this.observer.observe(e,U)}},"enableOnSubtree":function(e){this.watchSubtree(e);if(e===document&&document.readyState!=="complete"){this.installOnLoad()}else{this.installNewSubtree(e)}},"installNewSubtree":function(e){h(this.findElements(e),this.addElement,this)},"findElements":function(e){if(e.querySelectorAll){return e.querySelectorAll(j)}return[]},"removeElement":function(e){this.removeCallback(e)},"addElement":function(e){this.addCallback(e)},"elementChanged":function(e,t){this.changedCallback(e,t)},"concatLists":function(e,t){return e.concat(F(t))},"installOnLoad":function(){document.addEventListener("readystatechange",function(){if(document.readyState==="complete"){this.installNewSubtree(document)}}.bind(this))},"isElement":function(e){return e.nodeType===Node.ELEMENT_NODE},"flattenMutationTree":function(e){var t=B(e,this.findElements,this);t.push(N(e,this.isElement));return t.reduce(this.concatLists,[])},"mutationWatcher":function(e){e.forEach(this.mutationHandler,this)},"mutationHandler":function(e){if(e.type==="childList"){var t=this.flattenMutationTree(e.addedNodes);t.forEach(this.addElement,this);var i=this.flattenMutationTree(e.removedNodes);i.forEach(this.removeElement,this)}else if(e.type==="attributes"){this.elementChanged(e.target,e.oldValue)}}};function g(e){return"body /shadow-deep/ "+v(e)}function v(e){return'[touch-action="'+e+'"]'}function m(e){return"{ -ms-touch-action: "+e+"; touch-action: "+e+"; }"}var $=["none","auto","pan-x","pan-y",{"rule":"pan-x pan-y","selectors":["pan-x pan-y","pan-y pan-x"]}];var y="";var H=window.PointerEvent||window.MSPointerEvent;var b=!window.ShadowDOMPolyfill&&document.head.createShadowRoot;function z(){if(H){$.forEach(function(e){if(String(e)===e){y+=v(e)+m(e)+"\n";if(b){y+=g(e)+m(e)+"\n"}}else{y+=e.selectors.map(v)+m(e.rule)+"\n";if(b){y+=e.selectors.map(g)+m(e.rule)+"\n"}}});var e=document.createElement("style");e.textContent=y;document.head.appendChild(e)}}var _=c.pointermap;var w=25;var E=[1,4,2,8,16];var x=false;try{x=new MouseEvent("test",{"buttons":1}).buttons===1}catch(e){}var T={"POINTER_ID":1,"POINTER_TYPE":"mouse","events":["mousedown","mousemove","mouseup","mouseover","mouseout"],"register":function(e){c.listen(e,this.events)},"unregister":function(e){c.unlisten(e,this.events)},"lastTouches":[],"isEventSimulatedFromTouch":function(e){var t=this.lastTouches;var i=e.clientX;var n=e.clientY;for(var r=0,o=t.length,a;r<o&&(a=t[r]);r++){var s=Math.abs(i-a.x);var l=Math.abs(n-a.y);if(s<=w&&l<=w){return true}}},"prepareEvent":function(e){var t=c.cloneEvent(e);var i=t.preventDefault;t.preventDefault=function(){e.preventDefault();i()};t.pointerId=this.POINTER_ID;t.isPrimary=true;t.pointerType=this.POINTER_TYPE;return t},"prepareButtonsForMove":function(e,t){var i=_.get(this.POINTER_ID);if(t.which===0||!i){e.buttons=0}else{e.buttons=i.buttons}t.buttons=e.buttons},"mousedown":function(e){if(!this.isEventSimulatedFromTouch(e)){var t=_.get(this.POINTER_ID);var i=this.prepareEvent(e);if(!x){i.buttons=E[i.button];if(t){i.buttons|=t.buttons}e.buttons=i.buttons}_.set(this.POINTER_ID,e);if(!t||t.buttons===0){c.down(i)}else{c.move(i)}}},"mousemove":function(e){if(!this.isEventSimulatedFromTouch(e)){var t=this.prepareEvent(e);if(!x){this.prepareButtonsForMove(t,e)}t.button=-1;_.set(this.POINTER_ID,e);c.move(t)}},"mouseup":function(e){if(!this.isEventSimulatedFromTouch(e)){var t=_.get(this.POINTER_ID);var i=this.prepareEvent(e);if(!x){var n=E[i.button];i.buttons=t?t.buttons&~n:0;e.buttons=i.buttons}_.set(this.POINTER_ID,e);i.buttons&=~E[i.button];if(i.buttons===0){c.up(i)}else{c.move(i)}}},"mouseover":function(e){if(!this.isEventSimulatedFromTouch(e)){var t=this.prepareEvent(e);if(!x){this.prepareButtonsForMove(t,e)}t.button=-1;_.set(this.POINTER_ID,e);c.enterOver(t)}},"mouseout":function(e){if(!this.isEventSimulatedFromTouch(e)){var t=this.prepareEvent(e);if(!x){this.prepareButtonsForMove(t,e)}t.button=-1;c.leaveOut(t)}},"cancel":function(e){var t=this.prepareEvent(e);c.cancel(t);this.deactivateMouse()},"deactivateMouse":function(){_.delete(this.POINTER_ID)}};var W=c.captureInfo;var G=d.findTarget.bind(d);var S=d.allShadows.bind(d);var k=c.pointermap;var V=2500;var q=200;var R="touch-action";var C;var A={"events":["touchstart","touchmove","touchend","touchcancel"],"register":function(e){C.enableOnSubtree(e)},"unregister":function(){},"elementAdded":function(e){var t=e.getAttribute(R);var i=this.touchActionToScrollType(t);if(i){e._scrollType=i;c.listen(e,this.events);S(e).forEach(function(e){e._scrollType=i;c.listen(e,this.events)},this)}},"elementRemoved":function(e){e._scrollType=undefined;c.unlisten(e,this.events);S(e).forEach(function(e){e._scrollType=undefined;c.unlisten(e,this.events)},this)},"elementChanged":function(e,t){var i=e.getAttribute(R);var n=this.touchActionToScrollType(i);var r=this.touchActionToScrollType(t);if(n&&r){e._scrollType=n;S(e).forEach(function(e){e._scrollType=n},this)}else if(r){this.elementRemoved(e)}else if(n){this.elementAdded(e)}},"scrollTypes":{"EMITTER":"none","XSCROLLER":"pan-x","YSCROLLER":"pan-y","SCROLLER":/^(?:pan-x pan-y)|(?:pan-y pan-x)|auto$/},"touchActionToScrollType":function(e){var t=e;var i=this.scrollTypes;if(t==="none"){return"none"}else if(t===i.XSCROLLER){return"X"}else if(t===i.YSCROLLER){return"Y"}else if(i.SCROLLER.exec(t)){return"XY"}},"POINTER_TYPE":"touch","firstTouch":null,"isPrimaryTouch":function(e){return this.firstTouch===e.identifier},"setPrimaryTouch":function(e){if(k.size===0||k.size===1&&k.has(1)){this.firstTouch=e.identifier;this.firstXY={"X":e.clientX,"Y":e.clientY};this.scrolling=false;this.cancelResetClickCount()}},"removePrimaryPointer":function(e){if(e.isPrimary){this.firstTouch=null;this.firstXY=null;this.resetClickCount()}},"clickCount":0,"resetId":null,"resetClickCount":function(){var e=function(){this.clickCount=0;this.resetId=null}.bind(this);this.resetId=setTimeout(e,q)},"cancelResetClickCount":function(){if(this.resetId){clearTimeout(this.resetId)}},"typeToButtons":function(e){var t=0;if(e==="touchstart"||e==="touchmove"){t=1}return t},"touchToPointer":function(e){var t=this.currentTouchEvent;var i=c.cloneEvent(e);var n=i.pointerId=e.identifier+2;i.target=W[n]||G(i);i.bubbles=true;i.cancelable=true;i.detail=this.clickCount;i.button=0;i.buttons=this.typeToButtons(t.type);i.width=e.radiusX||e.webkitRadiusX||0;i.height=e.radiusY||e.webkitRadiusY||0;i.pressure=e.force||e.webkitForce||.5;i.isPrimary=this.isPrimaryTouch(e);i.pointerType=this.POINTER_TYPE;i.altKey=t.altKey;i.ctrlKey=t.ctrlKey;i.metaKey=t.metaKey;i.shiftKey=t.shiftKey;var r=this;i.preventDefault=function(){r.scrolling=false;r.firstXY=null;t.preventDefault()};return i},"processTouches":function(e,t){var i=e.changedTouches;this.currentTouchEvent=e;for(var n=0,r;n<i.length;n++){r=i[n];t.call(this,this.touchToPointer(r))}},"shouldScroll":function(e){if(this.firstXY){var t;var i=e.currentTarget._scrollType;if(i==="none"){t=false}else if(i==="XY"){t=true}else{var n=e.changedTouches[0];var r=i;var o=i==="Y"?"X":"Y";var a=Math.abs(n["client"+r]-this.firstXY[r]);var s=Math.abs(n["client"+o]-this.firstXY[o]);t=a>=s}this.firstXY=null;return t}},"findTouch":function(e,t){for(var i=0,n=e.length,r;i<n&&(r=e[i]);i++){if(r.identifier===t){return true}}},"vacuumTouches":function(e){var n=e.touches;if(k.size>=n.length){var r=[];k.forEach(function(e,t){if(t!==1&&!this.findTouch(n,t-2)){var i=e.out;r.push(i)}},this);r.forEach(this.cancelOut,this)}},"touchstart":function(e){this.vacuumTouches(e);this.setPrimaryTouch(e.changedTouches[0]);this.dedupSynthMouse(e);if(!this.scrolling){this.clickCount++;this.processTouches(e,this.overDown)}},"overDown":function(e){k.set(e.pointerId,{"target":e.target,"out":e,"outTarget":e.target});c.enterOver(e);c.down(e)},"touchmove":function(e){if(!this.scrolling){if(this.shouldScroll(e)){this.scrolling=true;this.touchcancel(e)}else{e.preventDefault();this.processTouches(e,this.moveOverOut)}}},"moveOverOut":function(e){var t=e;var i=k.get(t.pointerId);if(!i){return}var n=i.out;var r=i.outTarget;c.move(t);if(n&&r!==t.target){n.relatedTarget=t.target;t.relatedTarget=r;n.target=r;if(t.target){c.leaveOut(n);c.enterOver(t)}else{t.target=r;t.relatedTarget=null;this.cancelOut(t)}}i.out=t;i.outTarget=t.target},"touchend":function(e){this.dedupSynthMouse(e);this.processTouches(e,this.upOut)},"upOut":function(e){if(!this.scrolling){c.up(e);c.leaveOut(e)}this.cleanUpPointer(e)},"touchcancel":function(e){this.processTouches(e,this.cancelOut)},"cancelOut":function(e){c.cancel(e);c.leaveOut(e);this.cleanUpPointer(e)},"cleanUpPointer":function(e){k.delete(e.pointerId);this.removePrimaryPointer(e)},"dedupSynthMouse":function(e){var t=T.lastTouches;var i=e.changedTouches[0];if(this.isPrimaryTouch(i)){var n={"x":i.clientX,"y":i.clientY};t.push(n);var r=function(e,t){var i=e.indexOf(t);if(i>-1){e.splice(i,1)}}.bind(null,t,n);setTimeout(r,V)}}};C=new p(A.elementAdded,A.elementRemoved,A.elementChanged,A);var O=c.pointermap;var K=window.MSPointerEvent&&typeof window.MSPointerEvent.MSPOINTER_TYPE_MOUSE==="number";var Z={"events":["MSPointerDown","MSPointerMove","MSPointerUp","MSPointerOut","MSPointerOver","MSPointerCancel","MSGotPointerCapture","MSLostPointerCapture"],"register":function(e){c.listen(e,this.events)},"unregister":function(e){c.unlisten(e,this.events)},"POINTER_TYPES":["","unavailable","touch","pen","mouse"],"prepareEvent":function(e){var t=e;if(K){t=c.cloneEvent(e);t.pointerType=this.POINTER_TYPES[e.pointerType]}return t},"cleanup":function(e){O.delete(e)},"MSPointerDown":function(e){O.set(e.pointerId,e);var t=this.prepareEvent(e);c.down(t)},"MSPointerMove":function(e){var t=this.prepareEvent(e);c.move(t)},"MSPointerUp":function(e){var t=this.prepareEvent(e);c.up(t);this.cleanup(e.pointerId)},"MSPointerOut":function(e){var t=this.prepareEvent(e);c.leaveOut(t)},"MSPointerOver":function(e){var t=this.prepareEvent(e);c.enterOver(t)},"MSPointerCancel":function(e){var t=this.prepareEvent(e);c.cancel(t);this.cleanup(e.pointerId)},"MSLostPointerCapture":function(e){var t=c.makeEvent("lostpointercapture",e);c.dispatchEvent(t)},"MSGotPointerCapture":function(e){var t=c.makeEvent("gotpointercapture",e);c.dispatchEvent(t)}};function X(){if(!window.PointerEvent){window.PointerEvent=n;if(window.navigator.msPointerEnabled){var e=window.navigator.msMaxTouchPoints;Object.defineProperty(window.navigator,"maxTouchPoints",{"value":e,"enumerable":true});c.registerSource("ms",Z)}else{c.registerSource("mouse",T);if(window.ontouchstart!==undefined){c.registerSource("touch",A)}}c.register(document)}}var Y=window.navigator;var L;var P;function I(e){if(!c.pointermap.has(e)){var t=new Error("InvalidPointerId");t.name="InvalidPointerId";throw t}}function D(e){if(!e.ownerDocument.contains(e)){var t=new Error("InvalidStateError");t.name="InvalidStateError";throw t}}function M(e){var t=c.pointermap.get(e);return t.buttons!==0}if(Y.msPointerEnabled){L=function(e){I(e);D(this);if(M(e)){this.msSetPointerCapture(e)}};P=function(e){I(e);this.msReleasePointerCapture(e)}}else{L=function e(t){I(t);D(this);if(M(t)){c.setCapture(t,this)}};P=function e(t){I(t);c.releaseCapture(t,this)}}function Q(){if(window.Element&&!Element.prototype.setPointerCapture){Object.defineProperties(Element.prototype,{"setPointerCapture":{"value":L},"releasePointerCapture":{"value":P}})}}z();X();Q();var J={"dispatcher":c,"Installer":p,"PointerEvent":n,"PointerMap":t,"targetFinding":d};return J});(function(e){"use strict";if(typeof define==="function"&&define.amd){define(["jquery"],e)}else if(typeof exports!=="undefined"){module.exports=e(require("jquery"))}else{e(jQuery)}})(function(u){"use strict";var a=window.Slick||{};a=function(){var r=0;function e(e,t){var i=this,n;i.defaults={"accessibility":true,"adaptiveHeight":false,"appendArrows":u(e),"appendDots":u(e),"arrows":true,"asNavFor":null,"prevArrow":'<button type="button" data-role="none" class="slick-prev" aria-label="Previous" tabindex="0" role="button">Previous</button>',"nextArrow":'<button type="button" data-role="none" class="slick-next" aria-label="Next" tabindex="0" role="button">Next</button>',"autoplay":false,"autoplaySpeed":3e3,"centerMode":false,"centerPadding":"50px","cssEase":"ease","customPaging":function(e,t){return u('<button type="button" data-role="none" role="button" tabindex="0" />').text(t+1)},"dots":false,"dotsClass":"slick-dots","draggable":true,"easing":"linear","edgeFriction":.35,"fade":false,"focusOnSelect":false,"infinite":true,"initialSlide":0,"lazyLoad":"ondemand","mobileFirst":false,"pauseOnHover":true,"pauseOnFocus":true,"pauseOnDotsHover":false,"respondTo":"window","responsive":null,"rows":1,"rtl":false,"slide":"","slidesPerRow":1,"slidesToShow":1,"slidesToScroll":1,"speed":500,"swipe":true,"swipeToSlide":false,"touchMove":true,"touchThreshold":5,"useCSS":true,"useTransform":true,"variableWidth":false,"vertical":false,"verticalSwiping":false,"waitForAnimate":true,"zIndex":1e3};i.initials={"animating":false,"dragging":false,"autoPlayTimer":null,"currentDirection":0,"currentLeft":null,"currentSlide":0,"direction":1,"$dots":null,"listWidth":null,"listHeight":null,"loadIndex":0,"$nextArrow":null,"$prevArrow":null,"slideCount":null,"slideWidth":null,"$slideTrack":null,"$slides":null,"sliding":false,"slideOffset":0,"swipeLeft":null,"$list":null,"touchObject":{},"transformsEnabled":false,"unslicked":false};u.extend(i,i.initials);i.activeBreakpoint=null;i.animType=null;i.animProp=null;i.breakpoints=[];i.breakpointSettings=[];i.cssTransitions=false;i.focussed=false;i.interrupted=false;i.hidden="hidden";i.paused=true;i.positionProp=null;i.respondTo=null;i.rowCount=1;i.shouldClick=true;i.$slider=u(e);i.$slidesCache=null;i.transformType=null;i.transitionType=null;i.visibilityChange="visibilitychange";i.windowWidth=0;i.windowTimer=null;n=u(e).data("slick")||{};i.options=u.extend({},i.defaults,t,n);i.currentSlide=i.options.initialSlide;i.originalSettings=i.options;if(typeof document.mozHidden!=="undefined"){i.hidden="mozHidden";i.visibilityChange="mozvisibilitychange"}else if(typeof document.webkitHidden!=="undefined"){i.hidden="webkitHidden";i.visibilityChange="webkitvisibilitychange"}i.autoPlay=u.proxy(i.autoPlay,i);i.autoPlayClear=u.proxy(i.autoPlayClear,i);i.autoPlayIterator=u.proxy(i.autoPlayIterator,i);i.changeSlide=u.proxy(i.changeSlide,i);i.clickHandler=u.proxy(i.clickHandler,i);i.selectHandler=u.proxy(i.selectHandler,i);i.setPosition=u.proxy(i.setPosition,i);i.swipeHandler=u.proxy(i.swipeHandler,i);i.dragHandler=u.proxy(i.dragHandler,i);i.keyHandler=u.proxy(i.keyHandler,i);i.instanceUid=r++;i.htmlExpr=/^(?:\s*(<[\w\W]+>)[^>]*)$/;i.registerBreakpoints();i.init(true)}return e}();a.prototype.activateADA=function(){var e=this;e.$slideTrack.find(".slick-active").attr({"aria-hidden":"false"}).find("a, input, button, select").attr({"tabindex":"0"})};a.prototype.addSlide=a.prototype.slickAdd=function(e,t,i){var n=this;if(typeof t==="boolean"){i=t;t=null}else if(t<0||t>=n.slideCount){return false}n.unload();if(typeof t==="number"){if(t===0&&n.$slides.length===0){u(e).appendTo(n.$slideTrack)}else if(i){u(e).insertBefore(n.$slides.eq(t))}else{u(e).insertAfter(n.$slides.eq(t))}}else{if(i===true){u(e).prependTo(n.$slideTrack)}else{u(e).appendTo(n.$slideTrack)}}n.$slides=n.$slideTrack.children(this.options.slide);n.$slideTrack.children(this.options.slide).detach();n.$slideTrack.append(n.$slides);n.$slides.each(function(e,t){u(t).attr("data-slick-index",e)});n.$slidesCache=n.$slides;n.reinit()};a.prototype.animateHeight=function(){var e=this;if(e.options.slidesToShow===1&&e.options.adaptiveHeight===true&&e.options.vertical===false){var t=e.$slides.eq(e.currentSlide).outerHeight(true);e.$list.animate({"height":t},e.options.speed)}};a.prototype.animateSlide=function(e,t){var i={},n=this;n.animateHeight();if(n.options.rtl===true&&n.options.vertical===false){e=-e}if(n.transformsEnabled===false){if(n.options.vertical===false){n.$slideTrack.animate({"left":e},n.options.speed,n.options.easing,t)}else{n.$slideTrack.animate({"top":e},n.options.speed,n.options.easing,t)}}else{if(n.cssTransitions===false){if(n.options.rtl===true){n.currentLeft=-n.currentLeft}u({"animStart":n.currentLeft}).animate({"animStart":e},{"duration":n.options.speed,"easing":n.options.easing,"step":function(e){e=Math.ceil(e);if(n.options.vertical===false){i[n.animType]="translate("+e+"px, 0px)";n.$slideTrack.css(i)}else{i[n.animType]="translate(0px,"+e+"px)";n.$slideTrack.css(i)}},"complete":function(){if(t){t.call()}}})}else{n.applyTransition();e=Math.ceil(e);if(n.options.vertical===false){i[n.animType]="translate3d("+e+"px, 0px, 0px)"}else{i[n.animType]="translate3d(0px,"+e+"px, 0px)"}n.$slideTrack.css(i);if(t){setTimeout(function(){n.disableTransition();t.call()},n.options.speed)}}}};a.prototype.getNavTarget=function(){var e=this,t=e.options.asNavFor;if(t&&t!==null){t=u(t).not(e.$slider)}return t};a.prototype.asNavFor=function(t){var e=this,i=e.getNavTarget();if(i!==null&&typeof i==="object"){i.each(function(){var e=u(this).slick("getSlick");if(!e.unslicked){e.slideHandler(t,true)}})}};a.prototype.applyTransition=function(e){var t=this,i={};if(t.options.fade===false){i[t.transitionType]=t.transformType+" "+t.options.speed+"ms "+t.options.cssEase}else{i[t.transitionType]="opacity "+t.options.speed+"ms "+t.options.cssEase}if(t.options.fade===false){t.$slideTrack.css(i)}else{t.$slides.eq(e).css(i)}};a.prototype.autoPlay=function(){var e=this;e.autoPlayClear();if(e.slideCount>e.options.slidesToShow){e.autoPlayTimer=setInterval(e.autoPlayIterator,e.options.autoplaySpeed)}};a.prototype.autoPlayClear=function(){var e=this;if(e.autoPlayTimer){clearInterval(e.autoPlayTimer)}};a.prototype.autoPlayIterator=function(){var e=this,t=e.currentSlide+e.options.slidesToScroll;if(!e.paused&&!e.interrupted&&!e.focussed){if(e.options.infinite===false){if(e.direction===1&&e.currentSlide+1===e.slideCount-1){e.direction=0}else if(e.direction===0){t=e.currentSlide-e.options.slidesToScroll;if(e.currentSlide-1===0){e.direction=1}}}e.slideHandler(t)}};a.prototype.buildArrows=function(){var e=this;if(e.options.arrows===true){e.$prevArrow=u(e.options.prevArrow).addClass("slick-arrow");e.$nextArrow=u(e.options.nextArrow).addClass("slick-arrow");if(e.slideCount>e.options.slidesToShow){e.$prevArrow.removeClass("slick-hidden").removeAttr("aria-hidden tabindex");e.$nextArrow.removeClass("slick-hidden").removeAttr("aria-hidden tabindex");if(e.htmlExpr.test(e.options.prevArrow)){e.$prevArrow.prependTo(e.options.appendArrows)}if(e.htmlExpr.test(e.options.nextArrow)){e.$nextArrow.appendTo(e.options.appendArrows)}if(e.options.infinite!==true){e.$prevArrow.addClass("slick-disabled").attr("aria-disabled","true")}}else{e.$prevArrow.add(e.$nextArrow).addClass("slick-hidden").attr({"aria-disabled":"true","tabindex":"-1"})}}};a.prototype.buildDots=function(){var e=this,t,i;if(e.options.dots===true&&e.slideCount>e.options.slidesToShow){e.$slider.addClass("slick-dotted");i=u("<ul />").addClass(e.options.dotsClass);for(t=0;t<=e.getDotCount();t+=1){i.append(u("<li />").append(e.options.customPaging.call(this,e,t)))}e.$dots=i.appendTo(e.options.appendDots);e.$dots.find("li").first().addClass("slick-active").attr("aria-hidden","false")}};a.prototype.buildOut=function(){var e=this;e.$slides=e.$slider.children(e.options.slide+":not(.slick-cloned)").addClass("slick-slide");e.slideCount=e.$slides.length;e.$slides.each(function(e,t){u(t).attr("data-slick-index",e).data("originalStyling",u(t).attr("style")||"")});e.$slider.addClass("slick-slider");e.$slideTrack=e.slideCount===0?u('<div class="slick-track"/>').appendTo(e.$slider):e.$slides.wrapAll('<div class="slick-track"/>').parent();e.$list=e.$slideTrack.wrap('<div aria-live="polite" class="slick-list"/>').parent();e.$slideTrack.css("opacity",0);if(e.options.centerMode===true||e.options.swipeToSlide===true){e.options.slidesToScroll=1}u("img[data-lazy]",e.$slider).not("[src]").addClass("slick-loading");e.setupInfinite();e.buildArrows();e.buildDots();e.updateDots();e.setSlideClasses(typeof e.currentSlide==="number"?e.currentSlide:0);if(e.options.draggable===true){e.$list.addClass("draggable")}};a.prototype.buildRows=function(){var e=this,t,i,n,r,o,a,s;r=document.createDocumentFragment();a=e.$slider.children();if(e.options.rows>1){s=e.options.slidesPerRow*e.options.rows;o=Math.ceil(a.length/s);for(t=0;t<o;t++){var l=document.createElement("div");for(i=0;i<e.options.rows;i++){var u=document.createElement("div");for(n=0;n<e.options.slidesPerRow;n++){var c=t*s+(i*e.options.slidesPerRow+n);if(a.get(c)){u.appendChild(a.get(c))}}l.appendChild(u)}r.appendChild(l)}e.$slider.empty().append(r);e.$slider.children().children().children().css({"width":100/e.options.slidesPerRow+"%","display":"inline-block"})}};a.prototype.checkResponsive=function(e,t){var i=this,n,r,o,a=false;var s=i.$slider.width();var l=window.innerWidth||u(window).width();if(i.respondTo==="window"){o=l}else if(i.respondTo==="slider"){o=s}else if(i.respondTo==="min"){o=Math.min(l,s)}if(i.options.responsive&&i.options.responsive.length&&i.options.responsive!==null){r=null;for(n in i.breakpoints){if(i.breakpoints.hasOwnProperty(n)){if(i.originalSettings.mobileFirst===false){if(o<i.breakpoints[n]){r=i.breakpoints[n]}}else{if(o>i.breakpoints[n]){r=i.breakpoints[n]}}}}if(r!==null){if(i.activeBreakpoint!==null){if(r!==i.activeBreakpoint||t){i.activeBreakpoint=r;if(i.breakpointSettings[r]==="unslick"){i.unslick(r)}else{i.options=u.extend({},i.originalSettings,i.breakpointSettings[r]);if(e===true){i.currentSlide=i.options.initialSlide}i.refresh(e)}a=r}}else{i.activeBreakpoint=r;if(i.breakpointSettings[r]==="unslick"){i.unslick(r)}else{i.options=u.extend({},i.originalSettings,i.breakpointSettings[r]);if(e===true){i.currentSlide=i.options.initialSlide}i.refresh(e)}a=r}}else{if(i.activeBreakpoint!==null){i.activeBreakpoint=null;i.options=i.originalSettings;if(e===true){i.currentSlide=i.options.initialSlide}i.refresh(e);a=r}}if(!e&&a!==false){i.$slider.trigger("breakpoint",[i,a])}}};a.prototype.changeSlide=function(e,t){var i=this,n=u(e.currentTarget),r,o,a;if(n.is("a")){e.preventDefault()}if(!n.is("li")){n=n.closest("li")}a=i.slideCount%i.options.slidesToScroll!==0;r=a?0:(i.slideCount-i.currentSlide)%i.options.slidesToScroll;switch(e.data.message){case"previous":o=r===0?i.options.slidesToScroll:i.options.slidesToShow-r;if(i.slideCount>i.options.slidesToShow){i.slideHandler(i.currentSlide-o,false,t)}break;case"next":o=r===0?i.options.slidesToScroll:r;if(i.slideCount>i.options.slidesToShow){i.slideHandler(i.currentSlide+o,false,t)}break;case"index":var s=e.data.index===0?0:e.data.index||n.index()*i.options.slidesToScroll;i.slideHandler(i.checkNavigable(s),false,t);n.children().trigger("focus");break;default:return}};a.prototype.checkNavigable=function(e){var t=this,i,n;i=t.getNavigableIndexes();n=0;if(e>i[i.length-1]){e=i[i.length-1]}else{for(var r in i){if(e<i[r]){e=n;break}n=i[r]}}return e};a.prototype.cleanUpEvents=function(){var e=this;if(e.options.dots&&e.$dots!==null){u("li",e.$dots).off("click.slick",e.changeSlide).off("mouseenter.slick",u.proxy(e.interrupt,e,true)).off("mouseleave.slick",u.proxy(e.interrupt,e,false))}e.$slider.off("focus.slick blur.slick");if(e.options.arrows===true&&e.slideCount>e.options.slidesToShow){e.$prevArrow&&e.$prevArrow.off("click.slick",e.changeSlide);e.$nextArrow&&e.$nextArrow.off("click.slick",e.changeSlide)}e.$list.off("touchstart.slick mousedown.slick",e.swipeHandler);e.$list.off("touchmove.slick mousemove.slick",e.swipeHandler);e.$list.off("touchend.slick mouseup.slick",e.swipeHandler);e.$list.off("touchcancel.slick mouseleave.slick",e.swipeHandler);e.$list.off("click.slick",e.clickHandler);u(document).off(e.visibilityChange,e.visibility);e.cleanUpSlideEvents();if(e.options.accessibility===true){e.$list.off("keydown.slick",e.keyHandler)}if(e.options.focusOnSelect===true){u(e.$slideTrack).children().off("click.slick",e.selectHandler)}u(window).off("orientationchange.slick.slick-"+e.instanceUid,e.orientationChange);u(window).off("resize.slick.slick-"+e.instanceUid,e.resize);u("[draggable!=true]",e.$slideTrack).off("dragstart",e.preventDefault);u(window).off("load.slick.slick-"+e.instanceUid,e.setPosition);u(document).off("ready.slick.slick-"+e.instanceUid,e.setPosition)};a.prototype.cleanUpSlideEvents=function(){var e=this;e.$list.off("mouseenter.slick",u.proxy(e.interrupt,e,true));e.$list.off("mouseleave.slick",u.proxy(e.interrupt,e,false))};a.prototype.cleanUpRows=function(){var e=this,t;if(e.options.rows>1){t=e.$slides.children().children();t.removeAttr("style");e.$slider.empty().append(t)}};a.prototype.clickHandler=function(e){var t=this;if(t.shouldClick===false){e.stopImmediatePropagation();e.stopPropagation();e.preventDefault()}};a.prototype.destroy=function(e){var t=this;t.autoPlayClear();t.touchObject={};t.cleanUpEvents();u(".slick-cloned",t.$slider).detach();if(t.$dots){t.$dots.remove()}if(t.$prevArrow&&t.$prevArrow.length){t.$prevArrow.removeClass("slick-disabled slick-arrow slick-hidden").removeAttr("aria-hidden aria-disabled tabindex").css("display","");if(t.htmlExpr.test(t.options.prevArrow)){t.$prevArrow.remove()}}if(t.$nextArrow&&t.$nextArrow.length){t.$nextArrow.removeClass("slick-disabled slick-arrow slick-hidden").removeAttr("aria-hidden aria-disabled tabindex").css("display","");if(t.htmlExpr.test(t.options.nextArrow)){t.$nextArrow.remove()}}if(t.$slides){t.$slides.removeClass("slick-slide slick-active slick-center slick-visible slick-current").removeAttr("aria-hidden").removeAttr("data-slick-index").each(function(){u(this).attr("style",u(this).data("originalStyling"))});t.$slideTrack.children(this.options.slide).detach();t.$slideTrack.detach();t.$list.detach();t.$slider.append(t.$slides)}t.cleanUpRows();t.$slider.removeClass("slick-slider");t.$slider.removeClass("slick-initialized");t.$slider.removeClass("slick-dotted");t.unslicked=true;if(!e){t.$slider.trigger("destroy",[t])}};a.prototype.disableTransition=function(e){var t=this,i={};i[t.transitionType]="";if(t.options.fade===false){t.$slideTrack.css(i)}else{t.$slides.eq(e).css(i)}};a.prototype.fadeSlide=function(e,t){var i=this;if(i.cssTransitions===false){i.$slides.eq(e).css({"zIndex":i.options.zIndex});i.$slides.eq(e).animate({"opacity":1},i.options.speed,i.options.easing,t)}else{i.applyTransition(e);i.$slides.eq(e).css({"opacity":1,"zIndex":i.options.zIndex});if(t){setTimeout(function(){i.disableTransition(e);t.call()},i.options.speed)}}};a.prototype.fadeSlideOut=function(e){var t=this;if(t.cssTransitions===false){t.$slides.eq(e).animate({"opacity":0,"zIndex":t.options.zIndex-2},t.options.speed,t.options.easing)}else{t.applyTransition(e);t.$slides.eq(e).css({"opacity":0,"zIndex":t.options.zIndex-2})}};a.prototype.filterSlides=a.prototype.slickFilter=function(e){var t=this;if(e!==null){t.$slidesCache=t.$slides;t.unload();t.$slideTrack.children(this.options.slide).detach();t.$slidesCache.filter(e).appendTo(t.$slideTrack);t.reinit()}};a.prototype.focusHandler=function(){var i=this;i.$slider.off("focus.slick blur.slick").on("focus.slick blur.slick","*:not(.slick-arrow)",function(e){e.stopImmediatePropagation();var t=u(this);setTimeout(function(){if(i.options.pauseOnFocus){i.focussed=t.is(":focus");i.autoPlay()}},0)})};a.prototype.getCurrent=a.prototype.slickCurrentSlide=function(){var e=this;return e.currentSlide};a.prototype.getDotCount=function(){var e=this;var t=0;var i=0;var n=0;if(e.options.infinite===true){while(t<e.slideCount){++n;t=i+e.options.slidesToScroll;i+=e.options.slidesToScroll<=e.options.slidesToShow?e.options.slidesToScroll:e.options.slidesToShow}}else if(e.options.centerMode===true){n=e.slideCount}else if(!e.options.asNavFor){n=1+Math.ceil((e.slideCount-e.options.slidesToShow)/e.options.slidesToScroll)}else{while(t<e.slideCount){++n;t=i+e.options.slidesToScroll;i+=e.options.slidesToScroll<=e.options.slidesToShow?e.options.slidesToScroll:e.options.slidesToShow}}return n-1};a.prototype.getLeft=function(e){var t=this,i,n,r=0,o;t.slideOffset=0;n=t.$slides.first().outerHeight(true);if(t.options.infinite===true){if(t.slideCount>t.options.slidesToShow){t.slideOffset=t.slideWidth*t.options.slidesToShow*-1;r=n*t.options.slidesToShow*-1}if(t.slideCount%t.options.slidesToScroll!==0){if(e+t.options.slidesToScroll>t.slideCount&&t.slideCount>t.options.slidesToShow){if(e>t.slideCount){t.slideOffset=(t.options.slidesToShow-(e-t.slideCount))*t.slideWidth*-1;r=(t.options.slidesToShow-(e-t.slideCount))*n*-1}else{t.slideOffset=t.slideCount%t.options.slidesToScroll*t.slideWidth*-1;r=t.slideCount%t.options.slidesToScroll*n*-1}}}}else{if(e+t.options.slidesToShow>t.slideCount){t.slideOffset=(e+t.options.slidesToShow-t.slideCount)*t.slideWidth;r=(e+t.options.slidesToShow-t.slideCount)*n}}if(t.slideCount<=t.options.slidesToShow){t.slideOffset=0;r=0}if(t.options.centerMode===true&&t.options.infinite===true){t.slideOffset+=t.slideWidth*Math.floor(t.options.slidesToShow/2)-t.slideWidth}else if(t.options.centerMode===true){t.slideOffset=0;t.slideOffset+=t.slideWidth*Math.floor(t.options.slidesToShow/2)}if(t.options.vertical===false){i=e*t.slideWidth*-1+t.slideOffset}else{i=e*n*-1+r}if(t.options.variableWidth===true){if(t.slideCount<=t.options.slidesToShow||t.options.infinite===false){o=t.$slideTrack.children(".slick-slide").eq(e)}else{o=t.$slideTrack.children(".slick-slide").eq(e+t.options.slidesToShow)}if(t.options.rtl===true){if(o[0]){i=(t.$slideTrack.width()-o[0].offsetLeft-o.width())*-1}else{i=0}}else{i=o[0]?o[0].offsetLeft*-1:0}if(t.options.centerMode===true){if(t.slideCount<=t.options.slidesToShow||t.options.infinite===false){o=t.$slideTrack.children(".slick-slide").eq(e)}else{o=t.$slideTrack.children(".slick-slide").eq(e+t.options.slidesToShow+1)}if(t.options.rtl===true){if(o[0]){i=(t.$slideTrack.width()-o[0].offsetLeft-o.width())*-1}else{i=0}}else{i=o[0]?o[0].offsetLeft*-1:0}i+=(t.$list.width()-o.outerWidth())/2}}return i};a.prototype.getOption=a.prototype.slickGetOption=function(e){var t=this;return t.options[e]};a.prototype.getNavigableIndexes=function(){var e=this,t=0,i=0,n=[],r;if(e.options.infinite===false){r=e.slideCount}else{t=e.options.slidesToScroll*-1;i=e.options.slidesToScroll*-1;r=e.slideCount*2}while(t<r){n.push(t);t=i+e.options.slidesToScroll;i+=e.options.slidesToScroll<=e.options.slidesToShow?e.options.slidesToScroll:e.options.slidesToShow}return n};a.prototype.getSlick=function(){return this};a.prototype.getSlideCount=function(){var i=this,e,n,r;r=i.options.centerMode===true?i.slideWidth*Math.floor(i.options.slidesToShow/2):0;if(i.options.swipeToSlide===true){i.$slideTrack.find(".slick-slide").each(function(e,t){if(t.offsetLeft-r+u(t).outerWidth()/2>i.swipeLeft*-1){n=t;return false}});e=Math.abs(u(n).attr("data-slick-index")-i.currentSlide)||1;return e}else{return i.options.slidesToScroll}};a.prototype.goTo=a.prototype.slickGoTo=function(e,t){var i=this;i.changeSlide({"data":{"message":"index","index":parseInt(e)}},t)};a.prototype.init=function(e){var t=this;if(!u(t.$slider).hasClass("slick-initialized")){u(t.$slider).addClass("slick-initialized");t.buildRows();t.buildOut();t.setProps();t.startLoad();t.loadSlider();t.initializeEvents();t.updateArrows();t.updateDots();t.checkResponsive(true);t.focusHandler()}if(e){t.$slider.trigger("init",[t])}if(t.options.accessibility===true){t.initADA()}if(t.options.autoplay){t.paused=false;t.autoPlay()}};a.prototype.initADA=function(){var t=this;t.$slides.add(t.$slideTrack.find(".slick-cloned")).attr({"aria-hidden":"true","tabindex":"-1"}).find("a, input, button, select").attr({"tabindex":"-1"});t.$slideTrack.attr("role","listbox");t.$slides.not(t.$slideTrack.find(".slick-cloned")).each(function(e){u(this).attr({"role":"option","aria-describedby":"slick-slide"+t.instanceUid+e+""})});if(t.$dots!==null){t.$dots.attr("role","tablist").find("li").each(function(e){u(this).attr({"role":"presentation","aria-selected":"false","aria-controls":"navigation"+t.instanceUid+e+"","id":"slick-slide"+t.instanceUid+e+""})}).first().attr("aria-selected","true").end().find("button").attr("role","button").end().closest("div").attr("role","toolbar")}t.activateADA()};a.prototype.initArrowEvents=function(){var e=this;if(e.options.arrows===true&&e.slideCount>e.options.slidesToShow){e.$prevArrow.off("click.slick").on("click.slick",{"message":"previous"},e.changeSlide);e.$nextArrow.off("click.slick").on("click.slick",{"message":"next"},e.changeSlide)}};a.prototype.initDotEvents=function(){var e=this;if(e.options.dots===true&&e.slideCount>e.options.slidesToShow){u("li",e.$dots).on("click.slick",{"message":"index"},e.changeSlide)}if(e.options.dots===true&&e.options.pauseOnDotsHover===true){u("li",e.$dots).on("mouseenter.slick",u.proxy(e.interrupt,e,true)).on("mouseleave.slick",u.proxy(e.interrupt,e,false))}};a.prototype.initSlideEvents=function(){var e=this;if(e.options.pauseOnHover){e.$list.on("mouseenter.slick",u.proxy(e.interrupt,e,true));e.$list.on("mouseleave.slick",u.proxy(e.interrupt,e,false))}};a.prototype.initializeEvents=function(){var e=this;e.initArrowEvents();e.initDotEvents();e.initSlideEvents();e.$list.on("touchstart.slick mousedown.slick",{"action":"start"},e.swipeHandler);e.$list.on("touchmove.slick mousemove.slick",{"action":"move"},e.swipeHandler);e.$list.on("touchend.slick mouseup.slick",{"action":"end"},e.swipeHandler);e.$list.on("touchcancel.slick mouseleave.slick",{"action":"end"},e.swipeHandler);e.$list.on("click.slick",e.clickHandler);u(document).on(e.visibilityChange,u.proxy(e.visibility,e));if(e.options.accessibility===true){e.$list.on("keydown.slick",e.keyHandler)}if(e.options.focusOnSelect===true){u(e.$slideTrack).children().on("click.slick",e.selectHandler)}u(window).on("orientationchange.slick.slick-"+e.instanceUid,u.proxy(e.orientationChange,e));u(window).on("resize.slick.slick-"+e.instanceUid,u.proxy(e.resize,e));u("[draggable!=true]",e.$slideTrack).on("dragstart",e.preventDefault);u(window).on("load.slick.slick-"+e.instanceUid,e.setPosition);u(document).on("ready.slick.slick-"+e.instanceUid,e.setPosition)};a.prototype.initUI=function(){var e=this;if(e.options.arrows===true&&e.slideCount>e.options.slidesToShow){e.$prevArrow.show();e.$nextArrow.show()}if(e.options.dots===true&&e.slideCount>e.options.slidesToShow){e.$dots.show()}};a.prototype.keyHandler=function(e){var t=this;if(!e.target.tagName.match("TEXTAREA|INPUT|SELECT")){if(e.keyCode===37&&t.options.accessibility===true){t.changeSlide({"data":{"message":t.options.rtl===true?"next":"previous"}})}else if(e.keyCode===39&&t.options.accessibility===true){t.changeSlide({"data":{"message":t.options.rtl===true?"previous":"next"}})}}};a.prototype.lazyLoad=function(){var n=this,e,t,i,r;function o(e){u("img[data-lazy]",e).each(function(){var e=u(this),t=u(this).attr("data-lazy"),i=document.createElement("img");i.onload=function(){e.animate({"opacity":0},100,function(){e.attr("src",t).animate({"opacity":1},200,function(){e.removeAttr("data-lazy").removeClass("slick-loading")});n.$slider.trigger("lazyLoaded",[n,e,t])})};i.onerror=function(){e.removeAttr("data-lazy").removeClass("slick-loading").addClass("slick-lazyload-error");n.$slider.trigger("lazyLoadError",[n,e,t])};i.src=t})}if(n.options.centerMode===true){if(n.options.infinite===true){i=n.currentSlide+(n.options.slidesToShow/2+1);r=i+n.options.slidesToShow+2}else{i=Math.max(0,n.currentSlide-(n.options.slidesToShow/2+1));r=2+(n.options.slidesToShow/2+1)+n.currentSlide}}else{i=n.options.infinite?n.options.slidesToShow+n.currentSlide:n.currentSlide;r=Math.ceil(i+n.options.slidesToShow);if(n.options.fade===true){if(i>0)i--;if(r<=n.slideCount)r++}}e=n.$slider.find(".slick-slide").slice(i,r);o(e);if(n.slideCount<=n.options.slidesToShow){t=n.$slider.find(".slick-slide");o(t)}else if(n.currentSlide>=n.slideCount-n.options.slidesToShow){t=n.$slider.find(".slick-cloned").slice(0,n.options.slidesToShow);o(t)}else if(n.currentSlide===0){t=n.$slider.find(".slick-cloned").slice(n.options.slidesToShow*-1);o(t)}};a.prototype.loadSlider=function(){var e=this;e.setPosition();e.$slideTrack.css({"opacity":1});e.$slider.removeClass("slick-loading");e.initUI();if(e.options.lazyLoad==="progressive"){e.progressiveLazyLoad()}};a.prototype.next=a.prototype.slickNext=function(){var e=this;e.changeSlide({"data":{"message":"next"}})};a.prototype.orientationChange=function(){var e=this;e.checkResponsive();e.setPosition()};a.prototype.pause=a.prototype.slickPause=function(){var e=this;e.autoPlayClear();e.paused=true};a.prototype.play=a.prototype.slickPlay=function(){var e=this;e.autoPlay();e.options.autoplay=true;e.paused=false;e.focussed=false;e.interrupted=false};a.prototype.postSlide=function(e){var t=this;if(!t.unslicked){t.$slider.trigger("afterChange",[t,e]);t.animating=false;t.setPosition();t.swipeLeft=null;if(t.options.autoplay){t.autoPlay()}if(t.options.accessibility===true){t.initADA()}}};a.prototype.prev=a.prototype.slickPrev=function(){var e=this;e.changeSlide({"data":{"message":"previous"}})};a.prototype.preventDefault=function(e){e.preventDefault()};a.prototype.progressiveLazyLoad=function(e){e=e||1;var t=this,i=u("img[data-lazy]",t.$slider),n,r,o;if(i.length){n=i.first();r=n.attr("data-lazy");o=document.createElement("img");o.onload=function(){n.attr("src",r).removeAttr("data-lazy").removeClass("slick-loading");if(t.options.adaptiveHeight===true){t.setPosition()}t.$slider.trigger("lazyLoaded",[t,n,r]);t.progressiveLazyLoad()};o.onerror=function(){if(e<3){setTimeout(function(){t.progressiveLazyLoad(e+1)},500)}else{n.removeAttr("data-lazy").removeClass("slick-loading").addClass("slick-lazyload-error");t.$slider.trigger("lazyLoadError",[t,n,r]);t.progressiveLazyLoad()}};o.src=r}else{t.$slider.trigger("allImagesLoaded",[t])}};a.prototype.refresh=function(e){var t=this,i,n;n=t.slideCount-t.options.slidesToShow;if(!t.options.infinite&&t.currentSlide>n){t.currentSlide=n}if(t.slideCount<=t.options.slidesToShow){t.currentSlide=0}i=t.currentSlide;t.destroy(true);u.extend(t,t.initials,{"currentSlide":i});t.init();if(!e){t.changeSlide({"data":{"message":"index","index":i}},false)}};a.prototype.registerBreakpoints=function(){var i=this,e,t,n,r=i.options.responsive||null;if(u.type(r)==="array"&&r.length){i.respondTo=i.options.respondTo||"window";for(e in r){n=i.breakpoints.length-1;t=r[e].breakpoint;if(r.hasOwnProperty(e)){while(n>=0){if(i.breakpoints[n]&&i.breakpoints[n]===t){i.breakpoints.splice(n,1)}n--}i.breakpoints.push(t);i.breakpointSettings[t]=r[e].settings}}i.breakpoints.sort(function(e,t){return i.options.mobileFirst?e-t:t-e})}};a.prototype.reinit=function(){var e=this;e.$slides=e.$slideTrack.children(e.options.slide).addClass("slick-slide");e.slideCount=e.$slides.length;if(e.currentSlide>=e.slideCount&&e.currentSlide!==0){e.currentSlide=e.currentSlide-e.options.slidesToScroll}if(e.slideCount<=e.options.slidesToShow){e.currentSlide=0}e.registerBreakpoints();e.setProps();e.setupInfinite();e.buildArrows();e.updateArrows();e.initArrowEvents();e.buildDots();e.updateDots();e.initDotEvents();e.cleanUpSlideEvents();e.initSlideEvents();e.checkResponsive(false,true);if(e.options.focusOnSelect===true){u(e.$slideTrack).children().on("click.slick",e.selectHandler)}e.setSlideClasses(typeof e.currentSlide==="number"?e.currentSlide:0);e.setPosition();e.focusHandler();e.paused=!e.options.autoplay;e.autoPlay();e.$slider.trigger("reInit",[e])};a.prototype.resize=function(){var e=this;if(u(window).width()!==e.windowWidth){clearTimeout(e.windowDelay);e.windowDelay=window.setTimeout(function(){e.windowWidth=u(window).width();e.checkResponsive();if(!e.unslicked){e.setPosition()}},50)}};a.prototype.removeSlide=a.prototype.slickRemove=function(e,t,i){var n=this;if(typeof e==="boolean"){t=e;e=t===true?0:n.slideCount-1}else{e=t===true?--e:e}if(n.slideCount<1||e<0||e>n.slideCount-1){return false}n.unload();if(i===true){n.$slideTrack.children().remove()}else{n.$slideTrack.children(this.options.slide).eq(e).remove()}n.$slides=n.$slideTrack.children(this.options.slide);n.$slideTrack.children(this.options.slide).detach();n.$slideTrack.append(n.$slides);n.$slidesCache=n.$slides;n.reinit()};a.prototype.setCSS=function(e){var t=this,i={},n,r;if(t.options.rtl===true){e=-e}n=t.positionProp=="left"?Math.ceil(e)+"px":"0px";r=t.positionProp=="top"?Math.ceil(e)+"px":"0px";i[t.positionProp]=e;if(t.transformsEnabled===false){t.$slideTrack.css(i)}else{i={};if(t.cssTransitions===false){i[t.animType]="translate("+n+", "+r+")";t.$slideTrack.css(i)}else{i[t.animType]="translate3d("+n+", "+r+", 0px)";t.$slideTrack.css(i)}}};a.prototype.setDimensions=function(){var e=this;if(e.options.vertical===false){if(e.options.centerMode===true){e.$list.css({"padding":"0px "+e.options.centerPadding})}}else{e.$list.height(e.$slides.first().outerHeight(true)*e.options.slidesToShow);if(e.options.centerMode===true){e.$list.css({"padding":e.options.centerPadding+" 0px"})}}e.listWidth=e.$list.width();e.listHeight=e.$list.height();if(e.options.vertical===false&&e.options.variableWidth===false){e.slideWidth=Math.ceil(e.listWidth/e.options.slidesToShow);e.$slideTrack.width(Math.ceil(e.slideWidth*e.$slideTrack.children(".slick-slide").length))}else if(e.options.variableWidth===true){e.$slideTrack.width(5e3*e.slideCount)}else{e.slideWidth=Math.ceil(e.listWidth);e.$slideTrack.height(Math.ceil(e.$slides.first().outerHeight(true)*e.$slideTrack.children(".slick-slide").length))}var t=e.$slides.first().outerWidth(true)-e.$slides.first().width();if(e.options.variableWidth===false)e.$slideTrack.children(".slick-slide").width(e.slideWidth-t)};a.prototype.setFade=function(){var i=this,n;i.$slides.each(function(e,t){n=i.slideWidth*e*-1;if(i.options.rtl===true){u(t).css({"position":"relative","right":n,"top":0,"zIndex":i.options.zIndex-2,"opacity":0})}else{u(t).css({"position":"relative","left":n,"top":0,"zIndex":i.options.zIndex-2,"opacity":0})}});i.$slides.eq(i.currentSlide).css({"zIndex":i.options.zIndex-1,"opacity":1})};a.prototype.setHeight=function(){var e=this;if(e.options.slidesToShow===1&&e.options.adaptiveHeight===true&&e.options.vertical===false){var t=e.$slides.eq(e.currentSlide).outerHeight(true);e.$list.css("height",t)}};a.prototype.setOption=a.prototype.slickSetOption=function(){var i=this,e,t,n,r,o=false,a;if(u.type(arguments[0])==="object"){n=arguments[0];o=arguments[1];a="multiple"}else if(u.type(arguments[0])==="string"){n=arguments[0];r=arguments[1];o=arguments[2];if(arguments[0]==="responsive"&&u.type(arguments[1])==="array"){a="responsive"}else if(typeof arguments[1]!=="undefined"){a="single"}}if(a==="single"){i.options[n]=r}else if(a==="multiple"){u.each(n,function(e,t){i.options[e]=t})}else if(a==="responsive"){for(t in r){if(u.type(i.options.responsive)!=="array"){i.options.responsive=[r[t]]}else{e=i.options.responsive.length-1;while(e>=0){if(i.options.responsive[e].breakpoint===r[t].breakpoint){i.options.responsive.splice(e,1)}e--}i.options.responsive.push(r[t])}}}if(o){i.unload();i.reinit()}};a.prototype.setPosition=function(){var e=this;e.setDimensions();e.setHeight();if(e.options.fade===false){e.setCSS(e.getLeft(e.currentSlide))}else{e.setFade()}e.$slider.trigger("setPosition",[e])};a.prototype.setProps=function(){var e=this,t=document.body.style;e.positionProp=e.options.vertical===true?"top":"left";if(e.positionProp==="top"){e.$slider.addClass("slick-vertical")}else{e.$slider.removeClass("slick-vertical")}if(t.WebkitTransition!==undefined||t.MozTransition!==undefined||t.msTransition!==undefined){if(e.options.useCSS===true){e.cssTransitions=true}}if(e.options.fade){if(typeof e.options.zIndex==="number"){if(e.options.zIndex<3){e.options.zIndex=3}}else{e.options.zIndex=e.defaults.zIndex}}if(t.OTransform!==undefined){e.animType="OTransform";e.transformType="-o-transform";e.transitionType="OTransition";if(t.perspectiveProperty===undefined&&t.webkitPerspective===undefined)e.animType=false}if(t.MozTransform!==undefined){e.animType="MozTransform";e.transformType="-moz-transform";e.transitionType="MozTransition";if(t.perspectiveProperty===undefined&&t.MozPerspective===undefined)e.animType=false}if(t.webkitTransform!==undefined){e.animType="webkitTransform";e.transformType="-webkit-transform";e.transitionType="webkitTransition";if(t.perspectiveProperty===undefined&&t.webkitPerspective===undefined)e.animType=false}if(t.msTransform!==undefined){e.animType="msTransform";e.transformType="-ms-transform";e.transitionType="msTransition";if(t.msTransform===undefined)e.animType=false}if(t.transform!==undefined&&e.animType!==false){e.animType="transform";e.transformType="transform";e.transitionType="transition"}e.transformsEnabled=e.options.useTransform&&(e.animType!==null&&e.animType!==false)};a.prototype.setSlideClasses=function(e){var t=this,i,n,r,o;n=t.$slider.find(".slick-slide").removeClass("slick-active slick-center slick-current").attr("aria-hidden","true");t.$slides.eq(e).addClass("slick-current");if(t.options.centerMode===true){i=Math.floor(t.options.slidesToShow/2);if(t.options.infinite===true){if(e>=i&&e<=t.slideCount-1-i){t.$slides.slice(e-i,e+i+1).addClass("slick-active").attr("aria-hidden","false")}else{r=t.options.slidesToShow+e;n.slice(r-i+1,r+i+2).addClass("slick-active").attr("aria-hidden","false")}if(e===0){n.eq(n.length-1-t.options.slidesToShow).addClass("slick-center")}else if(e===t.slideCount-1){n.eq(t.options.slidesToShow).addClass("slick-center")}}t.$slides.eq(e).addClass("slick-center")}else{if(e>=0&&e<=t.slideCount-t.options.slidesToShow){t.$slides.slice(e,e+t.options.slidesToShow).addClass("slick-active").attr("aria-hidden","false")}else if(n.length<=t.options.slidesToShow){n.addClass("slick-active").attr("aria-hidden","false")}else{o=t.slideCount%t.options.slidesToShow;r=t.options.infinite===true?t.options.slidesToShow+e:e;if(t.options.slidesToShow==t.options.slidesToScroll&&t.slideCount-e<t.options.slidesToShow){n.slice(r-(t.options.slidesToShow-o),r+o).addClass("slick-active").attr("aria-hidden","false")}else{n.slice(r,r+t.options.slidesToShow).addClass("slick-active").attr("aria-hidden","false")}}}if(t.options.lazyLoad==="ondemand"){t.lazyLoad()}};a.prototype.setupInfinite=function(){var e=this,t,i,n;if(e.options.fade===true){e.options.centerMode=false}if(e.options.infinite===true&&e.options.fade===false){i=null;if(e.slideCount>e.options.slidesToShow){if(e.options.centerMode===true){n=e.options.slidesToShow+1}else{n=e.options.slidesToShow}for(t=e.slideCount;t>e.slideCount-n;t-=1){i=t-1;u(e.$slides[i]).clone(true).attr("id","").attr("data-slick-index",i-e.slideCount).prependTo(e.$slideTrack).addClass("slick-cloned")}for(t=0;t<n;t+=1){i=t;u(e.$slides[i]).clone(true).attr("id","").attr("data-slick-index",i+e.slideCount).appendTo(e.$slideTrack).addClass("slick-cloned")}e.$slideTrack.find(".slick-cloned").find("[id]").each(function(){u(this).attr("id","")})}}};a.prototype.interrupt=function(e){var t=this;if(!e){t.autoPlay()}t.interrupted=e};a.prototype.selectHandler=function(e){var t=this;var i=u(e.target).is(".slick-slide")?u(e.target):u(e.target).parents(".slick-slide");var n=parseInt(i.attr("data-slick-index"));if(!n)n=0;if(t.slideCount<=t.options.slidesToShow){t.setSlideClasses(n);t.asNavFor(n);return}t.slideHandler(n)};a.prototype.slideHandler=function(e,t,i){var n,r,o,a,s=null,l=this,u;t=t||false;if(l.animating===true&&l.options.waitForAnimate===true){return}if(l.options.fade===true&&l.currentSlide===e){return}if(l.slideCount<=l.options.slidesToShow){return}if(t===false){l.asNavFor(e)}n=e;s=l.getLeft(n);a=l.getLeft(l.currentSlide);l.currentLeft=l.swipeLeft===null?a:l.swipeLeft;if(l.options.infinite===false&&l.options.centerMode===false&&(e<0||e>l.getDotCount()*l.options.slidesToScroll)){if(l.options.fade===false){n=l.currentSlide;if(i!==true){l.animateSlide(a,function(){l.postSlide(n)})}else{l.postSlide(n)}}return}else if(l.options.infinite===false&&l.options.centerMode===true&&(e<0||e>l.slideCount-l.options.slidesToScroll)){if(l.options.fade===false){n=l.currentSlide;if(i!==true){l.animateSlide(a,function(){l.postSlide(n)})}else{l.postSlide(n)}}return}if(l.options.autoplay){clearInterval(l.autoPlayTimer)}if(n<0){if(l.slideCount%l.options.slidesToScroll!==0){r=l.slideCount-l.slideCount%l.options.slidesToScroll}else{r=l.slideCount+n}}else if(n>=l.slideCount){if(l.slideCount%l.options.slidesToScroll!==0){r=0}else{r=n-l.slideCount}}else{r=n}l.animating=true;l.$slider.trigger("beforeChange",[l,l.currentSlide,r]);o=l.currentSlide;l.currentSlide=r;l.setSlideClasses(l.currentSlide);if(l.options.asNavFor){u=l.getNavTarget();u=u.slick("getSlick");if(u.slideCount<=u.options.slidesToShow){u.setSlideClasses(l.currentSlide)}}l.updateDots();l.updateArrows();if(l.options.fade===true){if(i!==true){l.fadeSlideOut(o);l.fadeSlide(r,function(){l.postSlide(r)})}else{l.postSlide(r)}l.animateHeight();return}if(i!==true){l.animateSlide(s,function(){l.postSlide(r)})}else{l.postSlide(r)}};a.prototype.startLoad=function(){var e=this;if(e.options.arrows===true&&e.slideCount>e.options.slidesToShow){e.$prevArrow.hide();e.$nextArrow.hide()}if(e.options.dots===true&&e.slideCount>e.options.slidesToShow){e.$dots.hide()}e.$slider.addClass("slick-loading")};a.prototype.swipeDirection=function(){var e,t,i,n,r=this;e=r.touchObject.startX-r.touchObject.curX;t=r.touchObject.startY-r.touchObject.curY;i=Math.atan2(t,e);n=Math.round(i*180/Math.PI);if(n<0){n=360-Math.abs(n)}if(n<=45&&n>=0){return r.options.rtl===false?"left":"right"}if(n<=360&&n>=315){return r.options.rtl===false?"left":"right"}if(n>=135&&n<=225){return r.options.rtl===false?"right":"left"}if(r.options.verticalSwiping===true){if(n>=35&&n<=135){return"down"}else{return"up"}}return"vertical"};a.prototype.swipeEnd=function(e){var t=this,i,n;t.dragging=false;t.interrupted=false;t.shouldClick=t.touchObject.swipeLength>10?false:true;if(t.touchObject.curX===undefined){return false}if(t.touchObject.edgeHit===true){t.$slider.trigger("edge",[t,t.swipeDirection()])}if(t.touchObject.swipeLength>=t.touchObject.minSwipe){n=t.swipeDirection();switch(n){case"left":case"down":i=t.options.swipeToSlide?t.checkNavigable(t.currentSlide+t.getSlideCount()):t.currentSlide+t.getSlideCount();t.currentDirection=0;break;case"right":case"up":i=t.options.swipeToSlide?t.checkNavigable(t.currentSlide-t.getSlideCount()):t.currentSlide-t.getSlideCount();t.currentDirection=1;break;default:}if(n!="vertical"){t.slideHandler(i);t.touchObject={};t.$slider.trigger("swipe",[t,n])}}else{if(t.touchObject.startX!==t.touchObject.curX){t.slideHandler(t.currentSlide);t.touchObject={}}}};a.prototype.swipeHandler=function(e){var t=this;if(t.options.swipe===false||"ontouchend"in document&&t.options.swipe===false){return}else if(t.options.draggable===false&&e.type.indexOf("mouse")!==-1){return}t.touchObject.fingerCount=e.originalEvent&&e.originalEvent.touches!==undefined?e.originalEvent.touches.length:1;t.touchObject.minSwipe=t.listWidth/t.options.touchThreshold;if(t.options.verticalSwiping===true){t.touchObject.minSwipe=t.listHeight/t.options.touchThreshold}switch(e.data.action){case"start":t.swipeStart(e);break;case"move":t.swipeMove(e);break;case"end":t.swipeEnd(e);break}};a.prototype.swipeMove=function(e){var t=this,i=false,n,r,o,a,s;s=e.originalEvent!==undefined?e.originalEvent.touches:null;if(!t.dragging||s&&s.length!==1){return false}n=t.getLeft(t.currentSlide);t.touchObject.curX=s!==undefined?s[0].pageX:e.clientX;t.touchObject.curY=s!==undefined?s[0].pageY:e.clientY;t.touchObject.swipeLength=Math.round(Math.sqrt(Math.pow(t.touchObject.curX-t.touchObject.startX,2)));if(t.options.verticalSwiping===true){t.touchObject.swipeLength=Math.round(Math.sqrt(Math.pow(t.touchObject.curY-t.touchObject.startY,2)))}r=t.swipeDirection();if(r==="vertical"){return}if(e.originalEvent!==undefined&&t.touchObject.swipeLength>4){e.preventDefault()}a=(t.options.rtl===false?1:-1)*(t.touchObject.curX>t.touchObject.startX?1:-1);if(t.options.verticalSwiping===true){a=t.touchObject.curY>t.touchObject.startY?1:-1}o=t.touchObject.swipeLength;t.touchObject.edgeHit=false;if(t.options.infinite===false){if(t.currentSlide===0&&r==="right"||t.currentSlide>=t.getDotCount()&&r==="left"){o=t.touchObject.swipeLength*t.options.edgeFriction;t.touchObject.edgeHit=true}}if(t.options.vertical===false){t.swipeLeft=n+o*a}else{t.swipeLeft=n+o*(t.$list.height()/t.listWidth)*a}if(t.options.verticalSwiping===true){t.swipeLeft=n+o*a}if(t.options.fade===true||t.options.touchMove===false){return false}if(t.animating===true){t.swipeLeft=null;return false}t.setCSS(t.swipeLeft)};a.prototype.swipeStart=function(e){var t=this,i;t.interrupted=true;if(t.touchObject.fingerCount!==1||t.slideCount<=t.options.slidesToShow){t.touchObject={};return false}if(e.originalEvent!==undefined&&e.originalEvent.touches!==undefined){i=e.originalEvent.touches[0]}t.touchObject.startX=t.touchObject.curX=i!==undefined?i.pageX:e.clientX;t.touchObject.startY=t.touchObject.curY=i!==undefined?i.pageY:e.clientY;t.dragging=true};a.prototype.unfilterSlides=a.prototype.slickUnfilter=function(){var e=this;if(e.$slidesCache!==null){e.unload();e.$slideTrack.children(this.options.slide).detach();e.$slidesCache.appendTo(e.$slideTrack);e.reinit()}};a.prototype.unload=function(){var e=this;u(".slick-cloned",e.$slider).remove();if(e.$dots){e.$dots.remove()}if(e.$prevArrow&&e.htmlExpr.test(e.options.prevArrow)){e.$prevArrow.remove()}if(e.$nextArrow&&e.htmlExpr.test(e.options.nextArrow)){e.$nextArrow.remove()}e.$slides.removeClass("slick-slide slick-active slick-visible slick-current").attr("aria-hidden","true").css("width","")};a.prototype.unslick=function(e){var t=this;t.$slider.trigger("unslick",[t,e]);t.destroy()};a.prototype.updateArrows=function(){var e=this,t;t=Math.floor(e.options.slidesToShow/2);if(e.options.arrows===true&&e.slideCount>e.options.slidesToShow&&!e.options.infinite){e.$prevArrow.removeClass("slick-disabled").attr("aria-disabled","false");e.$nextArrow.removeClass("slick-disabled").attr("aria-disabled","false");if(e.currentSlide===0){e.$prevArrow.addClass("slick-disabled").attr("aria-disabled","true");e.$nextArrow.removeClass("slick-disabled").attr("aria-disabled","false")}else if(e.currentSlide>=e.slideCount-e.options.slidesToShow&&e.options.centerMode===false){e.$nextArrow.addClass("slick-disabled").attr("aria-disabled","true");e.$prevArrow.removeClass("slick-disabled").attr("aria-disabled","false")}else if(e.currentSlide>=e.slideCount-1&&e.options.centerMode===true){e.$nextArrow.addClass("slick-disabled").attr("aria-disabled","true");e.$prevArrow.removeClass("slick-disabled").attr("aria-disabled","false")}}};a.prototype.updateDots=function(){var e=this;if(e.$dots!==null){e.$dots.find("li").removeClass("slick-active").attr("aria-hidden","true");e.$dots.find("li").eq(Math.floor(e.currentSlide/e.options.slidesToScroll)).addClass("slick-active").attr("aria-hidden","false")}};a.prototype.visibility=function(){var e=this;if(e.options.autoplay){if(document[e.hidden]){e.interrupted=true}else{e.interrupted=false}}};u.fn.slick=function(){var e=this,t=arguments[0],i=Array.prototype.slice.call(arguments,1),n=e.length,r,o;for(r=0;r<n;r++){if(typeof t=="object"||typeof t=="undefined")e[r].slick=new a(e[r],t);else o=e[r].slick[t].apply(e[r].slick,i);if(typeof o!="undefined")return o}return e}});(function(a){var s,l=a();a.fn.sortable=function(o){var e=String(o);o=a.extend({"connectWith":false},o);return this.each(function(){if(/^enable|disable|destroy$/.test(e)){var t=a(this).children(a(this).data("items")).attr("draggable",e=="enable");if(e=="destroy"){t.add(this).removeData("connectWith items").off("dragstart.h5s dragend.h5s selectstart.h5s dragover.h5s dragenter.h5s drop.h5s")}return}var i,n,t=a(this).children(o.items);var r=a("<"+(/^ul|ol$/i.test(this.tagName)?"li":"div")+' class="sortable-placeholder">');t.find(o.handle).mousedown(function(){i=true}).mouseup(function(){i=false});a(this).data("items",o.items);l=l.add(r);if(o.connectWith){a(o.connectWith).add(this).data("connectWith",o.connectWith)}t.attr("draggable","true").on("dragstart.h5s",function(e){if(o.handle&&!i){return false}i=false;var t=e.originalEvent.dataTransfer;t.effectAllowed="move";t.setData("Text","dummy");n=(s=a(this)).addClass("sortable-dragging").index()}).on("dragend.h5s",function(){s.removeClass("sortable-dragging").show();l.detach();if(n!=s.index()){t.parent().trigger("sortupdate",{"item":s})}s=null}).not("a[href], img").on("selectstart.h5s",function(){this.dragDrop&&this.dragDrop();return false}).end().add([this,r]).on("dragover.h5s dragenter.h5s drop.h5s",function(e){if(!t.is(s)&&o.connectWith!==a(s).parent().data("connectWith")){return true}if(e.type=="drop"){e.stopPropagation();l.filter(":visible").after(s);return false}e.preventDefault();e.originalEvent.dataTransfer.dropEffect="move";if(t.is(this)){if(o.forcePlaceholderSize){r.height(s.outerHeight())}s.hide();a(this)[r.index()<a(this).index()?"after":"before"](r);l.not(r).detach()}else if(!l.is(this)&&!a(this).children(o.items).length){l.detach();a(this).append(r)}return false})})}})(jQuery);(function(s){function r(e,t){this.$element=e;if(!this.$element.length){throw new Error("Empty SwipeLike container")}this._settings=s.extend({},{"animationSpeed":400,"threshold":1},t);this._init()}r.prototype={"_init":function(){this._$container=this.$element.find(".swipeLike-buffer");this._containerWidth=this._$container.width();this._startX=0;this._startY=0;this._dragStart=false;this._$container.bind("pointerdown",this._handleInputEvents.bind(this));this._$container.bind("pointermove",this._handleInputEvents.bind(this));this._$container.bind("pointerup",this._handleInputEvents.bind(this))},"pushPane":function(e){this._$container.prepend(e)},"swipePane":function(e){this.$element.trigger("swipe",{"like":e,"pane":this._getCurrentPane()});this._getCurrentPane().remove()},"dislike":function(){this._getCurrentDislikeSelector().css("transition",this._settings.animationSpeed+"ms ease-in-out").css("opacity",1);this._animateCurrentPane({"x":-this._containerWidth,"y":this._containerWidth*-.5,"rotate":-60},function(){this.swipePane(false)}.bind(this))},"like":function(){this._getCurrentLikeSelector().css("transition",this._settings.animationSpeed+"ms ease-in-out").css("opacity",1);this._animateCurrentPane({"x":this._containerWidth,"y":this._containerWidth*-.5,"rotate":60},function(){this.swipePane(true)}.bind(this))},"_getCurrentPane":function(){return this._$container.find(".swipeLike-item").last()},"_animateCurrentPane":function(e,t){this._getCurrentPane().one("transitionend",t).css("transition",this._settings.animationSpeed+"ms ease-in-out");this._transitCurrentPane(e)},"_transitCurrentPane":function(e){this._getCurrentPane().css("transform","translate("+e.x+"px,"+e.y+"px) rotate("+e.rotate+"deg)")},"_getCurrentLikeSelector":function(){return this._getCurrentPane().find(".swipeLike-like")},"_getCurrentDislikeSelector":function(){return this._getCurrentPane().find(".swipeLike-dislike")},"_handleInputEvents":function(e){e.preventDefault();var t,i,n,r,o;switch(e.type){case"pointerdown":if(this._dragStart===false){this._getCurrentPane().css("transition","all 0s ease 0s");this._dragStart=true;this._startX=e.pageX;this._startY=e.pageY}break;case"pointermove":if(this._dragStart===true){t=e.pageX;i=e.pageY;n=parseInt(t)-parseInt(this._startX);r=parseInt(i)-parseInt(this._startY);var a=100/this._containerWidth*n/10;this._transitCurrentPane({"x":n,"y":r,"rotate":a/2});o=Math.abs(n)/this._settings.threshold/100+.2;if(o>1){o=1}if(n>=0){this._getCurrentLikeSelector().css("opacity",o);this._getCurrentDislikeSelector().css("opacity",0)}else if(n<0){this._getCurrentDislikeSelector().css("opacity",o);this._getCurrentLikeSelector().css("opacity",0)}}break;case"pointerup":this._dragStart=false;t=e.pageX;i=e.pageY;n=parseInt(t)-parseInt(this._startX);r=parseInt(i)-parseInt(this._startY);o=Math.abs(Math.abs(n)/this._settings.threshold/100+.2);if(o>=1){if(n>0){this._animateCurrentPane({"x":this._containerWidth,"y":r+this._containerWidth,"rotate":60},function(){this.swipePane(true)}.bind(this))}else{this._animateCurrentPane({"x":-this._containerWidth,"y":r+this._containerWidth,"rotate":-60},function(){this.swipePane(false)}.bind(this))}}else{this._animateCurrentPane({"x":0,"y":0,"rotate":0},s.noop);this._getCurrentLikeSelector().css("opacity",0);this._getCurrentDislikeSelector().css("opacity",0)}break}}};r.prototype.constructor=r;s.fn.swipeLike=function(i,n){return this.each(function(){var e=s(this);var t=e.data("swipeLike");if(!t){t=new r(e,i);e.data("swipeLike",t)}else if(t[i]){if(!Array.isArray(n)){n=[n]}t[i].apply(t,n)}})}})(jQuery);(function(e,t){var i=function(e){this.$element=e;this._visible=null;this._preventHiding=false;this._modal=false;if(!this._getContent().length){throw new Error("OpenerWindow must be applied to the appropriate DOM layout")}this.$element.toggleClass("opener",true);var t=this;this.$element.find(".toggleOpener").on("click",function(){t.toggle()})};i.prototype.expand=function(){if(!this.isVisible()){this.$element.addClass("active");this._visible=true;this.$element.trigger("openerWindow.expand");if(this.isModal()){this._getModalClose().enable()}}};i.prototype.collapse=function(){if(!this._preventHiding&&(this.isVisible()||null==this._visible)){this.$element.removeClass("active");this._visible=false;this.$element.trigger("openerWindow.collapse");if(this.isModal()){this._getModalClose().disable()}}};i.prototype.toggle=function(){if(this.isVisible()){this.collapse()}else{this.expand()}};i.prototype.isVisible=function(){return this._visible};i.prototype.setPreventHiding=function(e){return this._preventHiding=e};i.prototype.isModal=function(){return this._modal};i.prototype.setModal=function(e){this._modal=e;if(e&&this.isVisible){this._getModalClose().enable()}if(!e){this._getModalClose().disable()}};i.prototype._getContent=function(){return this.$element.find(".opener-content")};i.prototype._getModalClose=function(){if(!this._modalClose){this._modalClose=new ModalClose(this.$element[0],this.collapse.bind(this))}return this._modalClose};if(e["OpenerWindow"]){throw new Error("OpenerWindow is already defined")}e["OpenerWindow"]=i})(window,jQuery);(function(t,i){if(typeof define=="function"&&define.amd){define("jquery-bridget/jquery-bridget",["jquery"],function(e){return i(t,e)})}else if(typeof module=="object"&&module.exports){module.exports=i(t,require("jquery"))}else{t.jQueryBridget=i(t,t.jQuery)}})(window,function e(t,o){"use strict";var a=Array.prototype.slice;var i=t.console;var d=typeof i=="undefined"?function(){}:function(e){i.error(e)};function n(u,r,c){c=c||o||t.jQuery;if(!c){return}if(!r.prototype.option){r.prototype.option=function(e){if(!c.isPlainObject(e)){return}this.options=c.extend(true,this.options,e)}}c.fn[u]=function(e){if(typeof e=="string"){var t=a.call(arguments,1);return i(this,e,t)}n(this,e);return this};function i(e,o,a){var s;var l="$()."+u+'("'+o+'")';e.each(function(e,t){var i=c.data(t,u);if(!i){d(u+" not initialized. Cannot call methods, i.e. "+l);return}var n=i[o];if(!n||o.charAt(0)=="_"){d(l+" is not a valid method");return}var r=n.apply(i,a);s=s===undefined?r:s});return s!==undefined?s:e}function n(e,n){e.each(function(e,t){var i=c.data(t,u);if(i){i.option(n);i._init()}else{i=new r(t,n);c.data(t,u,i)}})}s(c)}function s(e){if(!e||e&&e.bridget){return}e.bridget=n}s(o||t.jQuery);return n});(function(e,t){if(typeof define=="function"&&define.amd){define("get-size/get-size",t)}else if(typeof module=="object"&&module.exports){module.exports=t()}else{e.getSize=t()}})(window,function e(){"use strict";function m(e){var t=parseFloat(e);var i=e.indexOf("%")==-1&&!isNaN(t);return i&&t}function t(){}var i=typeof console=="undefined"?t:function(e){console.error(e)};var y=["paddingLeft","paddingRight","paddingTop","paddingBottom","marginLeft","marginRight","marginTop","marginBottom","borderLeftWidth","borderRightWidth","borderTopWidth","borderBottomWidth"];var b=y.length;function _(){var e={"width":0,"height":0,"innerWidth":0,"innerHeight":0,"outerWidth":0,"outerHeight":0};for(var t=0;t<b;t++){var i=y[t];e[i]=0}return e}function w(e){var t=getComputedStyle(e);if(!t){i("Style returned "+t+". Are you running this code in a hidden iframe on Firefox? "+"See https://bit.ly/getsizebug1")}return t}var n=false;var E;function x(){if(n){return}n=true;var e=document.createElement("div");e.style.width="200px";e.style.padding="1px 2px 3px 4px";e.style.borderStyle="solid";e.style.borderWidth="1px 2px 3px 4px";e.style.boxSizing="border-box";var t=document.body||document.documentElement;t.appendChild(e);var i=w(e);E=Math.round(m(i.width))==200;r.isBoxSizeOuter=E;t.removeChild(e)}function r(e){x();if(typeof e=="string"){e=document.querySelector(e)}if(!e||typeof e!="object"||!e.nodeType){return}var t=w(e);if(t.display=="none"){return _()}var i={};i.width=e.offsetWidth;i.height=e.offsetHeight;var n=i.isBorderBox=t.boxSizing=="border-box";for(var r=0;r<b;r++){var o=y[r];var a=t[o];var s=parseFloat(a);i[o]=!isNaN(s)?s:0}var l=i.paddingLeft+i.paddingRight;var u=i.paddingTop+i.paddingBottom;var c=i.marginLeft+i.marginRight;var d=i.marginTop+i.marginBottom;var h=i.borderLeftWidth+i.borderRightWidth;var f=i.borderTopWidth+i.borderBottomWidth;var p=n&&E;var g=m(t.width);if(g!==false){i.width=g+(p?0:l+h)}var v=m(t.height);if(v!==false){i.height=v+(p?0:u+f)}i.innerWidth=i.width-(l+h);i.innerHeight=i.height-(u+f);i.outerWidth=i.width+c;i.outerHeight=i.height+d;return i}return r});(function(e,t){if(typeof define=="function"&&define.amd){define("ev-emitter/ev-emitter",t)}else if(typeof module=="object"&&module.exports){module.exports=t()}else{e.EvEmitter=t()}})(typeof window!="undefined"?window:this,function(){function e(){}var t=e.prototype;t.on=function(e,t){if(!e||!t){return}var i=this._events=this._events||{};var n=i[e]=i[e]||[];if(n.indexOf(t)==-1){n.push(t)}return this};t.once=function(e,t){if(!e||!t){return}this.on(e,t);var i=this._onceEvents=this._onceEvents||{};var n=i[e]=i[e]||{};n[t]=true;return this};t.off=function(e,t){var i=this._events&&this._events[e];if(!i||!i.length){return}var n=i.indexOf(t);if(n!=-1){i.splice(n,1)}return this};t.emitEvent=function(e,t){var i=this._events&&this._events[e];if(!i||!i.length){return}i=i.slice(0);t=t||[];var n=this._onceEvents&&this._onceEvents[e];for(var r=0;r<i.length;r++){var o=i[r];var a=n&&n[o];if(a){this.off(e,o);delete n[o]}o.apply(this,t)}return this};t.allOff=function(){delete this._events;delete this._onceEvents};return e});(function(e,t){"use strict";if(typeof define=="function"&&define.amd){define("desandro-matches-selector/matches-selector",t)}else if(typeof module=="object"&&module.exports){module.exports=t()}else{e.matchesSelector=t()}})(window,function e(){"use strict";var n=function(){var e=window.Element.prototype;if(e.matches){return"matches"}if(e.matchesSelector){return"matchesSelector"}var t=["webkit","moz","ms","o"];for(var i=0;i<t.length;i++){var n=t[i];var r=n+"MatchesSelector";if(e[r]){return r}}}();return function e(t,i){return t[n](i)}});(function(t,i){if(typeof define=="function"&&define.amd){define("fizzy-ui-utils/utils",["desandro-matches-selector/matches-selector"],function(e){return i(t,e)})}else if(typeof module=="object"&&module.exports){module.exports=i(t,require("desandro-matches-selector"))}else{t.fizzyUIUtils=i(t,t.matchesSelector)}})(window,function e(u,o){var c={};c.extend=function(e,t){for(var i in t){e[i]=t[i]}return e};c.modulo=function(e,t){return(e%t+t)%t};var i=Array.prototype.slice;c.makeArray=function(e){if(Array.isArray(e)){return e}if(e===null||e===undefined){return[]}var t=typeof e=="object"&&typeof e.length=="number";if(t){return i.call(e)}return[e]};c.removeFrom=function(e,t){var i=e.indexOf(t);if(i!=-1){e.splice(i,1)}};c.getParent=function(e,t){while(e.parentNode&&e!=document.body){e=e.parentNode;if(o(e,t)){return e}}};c.getQueryElement=function(e){if(typeof e=="string"){return document.querySelector(e)}return e};c.handleEvent=function(e){var t="on"+e.type;if(this[t]){this[t](e)}};c.filterFindElements=function(e,n){e=c.makeArray(e);var r=[];e.forEach(function(e){if(!(e instanceof HTMLElement)){return}if(!n){r.push(e);return}if(o(e,n)){r.push(e)}var t=e.querySelectorAll(n);for(var i=0;i<t.length;i++){r.push(t[i])}});return r};c.debounceMethod=function(e,t,n){n=n||100;var r=e.prototype[t];var o=t+"Timeout";e.prototype[t]=function(){var e=this[o];clearTimeout(e);var t=arguments;var i=this;this[o]=setTimeout(function(){r.apply(i,t);delete i[o]},n)}};c.docReady=function(e){var t=document.readyState;if(t=="complete"||t=="interactive"){setTimeout(e)}else{document.addEventListener("DOMContentLoaded",e)}};c.toDashed=function(e){return e.replace(/(.)([A-Z])/g,function(e,t,i){return t+"-"+i}).toLowerCase()};var d=u.console;c.htmlInit=function(s,l){c.docReady(function(){var e=c.toDashed(l);var r="data-"+e;var t=document.querySelectorAll("["+r+"]");var i=document.querySelectorAll(".js-"+e);var n=c.makeArray(t).concat(c.makeArray(i));var o=r+"-options";var a=u.jQuery;n.forEach(function(t){var e=t.getAttribute(r)||t.getAttribute(o);var i;try{i=e&&JSON.parse(e)}catch(e){if(d){d.error("Error parsing "+r+" on "+t.className+": "+e)}return}var n=new s(t,i);if(a){a.data(t,l,n)}})})};return c});(function(e,t){if(typeof define=="function"&&define.amd){define("outlayer/item",["ev-emitter/ev-emitter","get-size/get-size"],t)}else if(typeof module=="object"&&module.exports){module.exports=t(require("ev-emitter"),require("get-size"))}else{e.Outlayer={};e.Outlayer.Item=t(e.EvEmitter,e.getSize)}})(window,function e(t,i){"use strict";function r(e){for(var t in e){return false}t=null;return true}var n=document.documentElement.style;var o=typeof n.transition=="string"?"transition":"WebkitTransition";var a=typeof n.transform=="string"?"transform":"WebkitTransform";var s={"WebkitTransition":"webkitTransitionEnd","transition":"transitionend"}[o];var l={"transform":a,"transition":o,"transitionDuration":o+"Duration","transitionProperty":o+"Property","transitionDelay":o+"Delay"};function u(e,t){if(!e){return}this.element=e;this.layout=t;this.position={"x":0,"y":0};this._create()}var c=u.prototype=Object.create(t.prototype);c.constructor=u;c._create=function(){this._transn={"ingProperties":{},"clean":{},"onEnd":{}};this.css({"position":"absolute"})};c.handleEvent=function(e){var t="on"+e.type;if(this[t]){this[t](e)}};c.getSize=function(){this.size=i(this.element)};c.css=function(e){var t=this.element.style;for(var i in e){var n=l[i]||i;t[n]=e[i]}};c.getPosition=function(){var e=getComputedStyle(this.element);var t=this.layout._getOption("originLeft");var i=this.layout._getOption("originTop");var n=e[t?"left":"right"];var r=e[i?"top":"bottom"];var o=parseFloat(n);var a=parseFloat(r);var s=this.layout.size;if(n.indexOf("%")!=-1){o=o/100*s.width}if(r.indexOf("%")!=-1){a=a/100*s.height}o=isNaN(o)?0:o;a=isNaN(a)?0:a;o-=t?s.paddingLeft:s.paddingRight;a-=i?s.paddingTop:s.paddingBottom;this.position.x=o;this.position.y=a};c.layoutPosition=function(){var e=this.layout.size;var t={};var i=this.layout._getOption("originLeft");var n=this.layout._getOption("originTop");var r=i?"paddingLeft":"paddingRight";var o=i?"left":"right";var a=i?"right":"left";var s=this.position.x+e[r];t[o]=this.getXValue(s);t[a]="";var l=n?"paddingTop":"paddingBottom";var u=n?"top":"bottom";var c=n?"bottom":"top";var d=this.position.y+e[l];t[u]=this.getYValue(d);t[c]="";this.css(t);this.emitEvent("layout",[this])};c.getXValue=function(e){var t=this.layout._getOption("horizontal");return this.layout.options.percentPosition&&!t?e/this.layout.size.width*100+"%":e+"px"};c.getYValue=function(e){var t=this.layout._getOption("horizontal");return this.layout.options.percentPosition&&t?e/this.layout.size.height*100+"%":e+"px"};c._transitionTo=function(e,t){this.getPosition();var i=this.position.x;var n=this.position.y;var r=e==this.position.x&&t==this.position.y;this.setPosition(e,t);if(r&&!this.isTransitioning){this.layoutPosition();return}var o=e-i;var a=t-n;var s={};s.transform=this.getTranslate(o,a);this.transition({"to":s,"onTransitionEnd":{"transform":this.layoutPosition},"isCleaning":true})};c.getTranslate=function(e,t){var i=this.layout._getOption("originLeft");var n=this.layout._getOption("originTop");e=i?e:-e;t=n?t:-t;return"translate3d("+e+"px, "+t+"px, 0)"};c.goTo=function(e,t){this.setPosition(e,t);this.layoutPosition()};c.moveTo=c._transitionTo;c.setPosition=function(e,t){this.position.x=parseFloat(e);this.position.y=parseFloat(t)};c._nonTransition=function(e){this.css(e.to);if(e.isCleaning){this._removeStyles(e.to)}for(var t in e.onTransitionEnd){e.onTransitionEnd[t].call(this)}};c.transition=function(e){if(!parseFloat(this.layout.options.transitionDuration)){this._nonTransition(e);return}var t=this._transn;for(var i in e.onTransitionEnd){t.onEnd[i]=e.onTransitionEnd[i]}for(i in e.to){t.ingProperties[i]=true;if(e.isCleaning){t.clean[i]=true}}if(e.from){this.css(e.from);var n=this.element.offsetHeight;n=null}this.enableTransition(e.to);this.css(e.to);this.isTransitioning=true};function d(e){return e.replace(/([A-Z])/g,function(e){return"-"+e.toLowerCase()})}var h="opacity,"+d(a);c.enableTransition=function(){if(this.isTransitioning){return}var e=this.layout.options.transitionDuration;e=typeof e=="number"?e+"ms":e;this.css({"transitionProperty":h,"transitionDuration":e,"transitionDelay":this.staggerDelay||0});this.element.addEventListener(s,this,false)};c.onwebkitTransitionEnd=function(e){this.ontransitionend(e)};c.onotransitionend=function(e){this.ontransitionend(e)};var f={"-webkit-transform":"transform"};c.ontransitionend=function(e){if(e.target!==this.element){return}var t=this._transn;var i=f[e.propertyName]||e.propertyName;delete t.ingProperties[i];if(r(t.ingProperties)){this.disableTransition()}if(i in t.clean){this.element.style[e.propertyName]="";delete t.clean[i]}if(i in t.onEnd){var n=t.onEnd[i];n.call(this);delete t.onEnd[i]}this.emitEvent("transitionEnd",[this])};c.disableTransition=function(){this.removeTransitionStyles();this.element.removeEventListener(s,this,false);this.isTransitioning=false};c._removeStyles=function(e){var t={};for(var i in e){t[i]=""}this.css(t)};var p={"transitionProperty":"","transitionDuration":"","transitionDelay":""};c.removeTransitionStyles=function(){this.css(p)};c.stagger=function(e){e=isNaN(e)?0:e;this.staggerDelay=e+"ms"};c.removeElem=function(){this.element.parentNode.removeChild(this.element);this.css({"display":""});this.emitEvent("remove",[this])};c.remove=function(){if(!o||!parseFloat(this.layout.options.transitionDuration)){this.removeElem();return}this.once("transitionEnd",function(){this.removeElem()});this.hide()};c.reveal=function(){delete this.isHidden;this.css({"display":""});var e=this.layout.options;var t={};var i=this.getHideRevealTransitionEndProperty("visibleStyle");t[i]=this.onRevealTransitionEnd;this.transition({"from":e.hiddenStyle,"to":e.visibleStyle,"isCleaning":true,"onTransitionEnd":t})};c.onRevealTransitionEnd=function(){if(!this.isHidden){this.emitEvent("reveal")}};c.getHideRevealTransitionEndProperty=function(e){var t=this.layout.options[e];if(t.opacity){return"opacity"}for(var i in t){return i}};c.hide=function(){this.isHidden=true;this.css({"display":""});var e=this.layout.options;var t={};var i=this.getHideRevealTransitionEndProperty("hiddenStyle");t[i]=this.onHideTransitionEnd;this.transition({"from":e.visibleStyle,"to":e.hiddenStyle,"isCleaning":true,"onTransitionEnd":t})};c.onHideTransitionEnd=function(){if(this.isHidden){this.css({"display":"none"});this.emitEvent("hide")}};c.destroy=function(){this.css({"position":"","left":"","right":"","top":"","bottom":"","transition":"","transform":""})};return u});(function(r,o){"use strict";if(typeof define=="function"&&define.amd){define("outlayer/outlayer",["ev-emitter/ev-emitter","get-size/get-size","fizzy-ui-utils/utils","./item"],function(e,t,i,n){return o(r,e,t,i,n)})}else if(typeof module=="object"&&module.exports){module.exports=o(r,require("ev-emitter"),require("get-size"),require("fizzy-ui-utils"),require("./item"))}else{r.Outlayer=o(r,r.EvEmitter,r.getSize,r.fizzyUIUtils,r.Outlayer.Item)}})(window,function e(t,i,o,a,n){"use strict";var s=t.console;var l=t.jQuery;var r=function(){};var u=0;var c={};function d(e,t){var i=a.getQueryElement(e);if(!i){if(s){s.error("Bad element for "+this.constructor.namespace+": "+(i||e))}return}this.element=i;if(l){this.$element=l(this.element)}this.options=a.extend({},this.constructor.defaults);this.option(t);var n=++u;this.element.outlayerGUID=n;c[n]=this;this._create();var r=this._getOption("initLayout");if(r){this.layout()}}d.namespace="outlayer";d.Item=n;d.defaults={"containerStyle":{"position":"relative"},"initLayout":true,"originLeft":true,"originTop":true,"resize":true,"resizeContainer":true,"transitionDuration":"0.4s","hiddenStyle":{"opacity":0,"transform":"scale(0.001)"},"visibleStyle":{"opacity":1,"transform":"scale(1)"}};var h=d.prototype;a.extend(h,i.prototype);h.option=function(e){a.extend(this.options,e)};h._getOption=function(e){var t=this.constructor.compatOptions[e];return t&&this.options[t]!==undefined?this.options[t]:this.options[e]};d.compatOptions={"initLayout":"isInitLayout","horizontal":"isHorizontal","layoutInstant":"isLayoutInstant","originLeft":"isOriginLeft","originTop":"isOriginTop","resize":"isResizeBound","resizeContainer":"isResizingContainer"};h._create=function(){this.reloadItems();this.stamps=[];this.stamp(this.options.stamp);a.extend(this.element.style,this.options.containerStyle);var e=this._getOption("resize");if(e){this.bindResize()}};h.reloadItems=function(){this.items=this._itemize(this.element.children)};h._itemize=function(e){var t=this._filterFindItemElements(e);var i=this.constructor.Item;var n=[];for(var r=0;r<t.length;r++){var o=t[r];var a=new i(o,this);n.push(a)}return n};h._filterFindItemElements=function(e){return a.filterFindElements(e,this.options.itemSelector)};h.getItemElements=function(){return this.items.map(function(e){return e.element})};h.layout=function(){this._resetLayout();this._manageStamps();var e=this._getOption("layoutInstant");var t=e!==undefined?e:!this._isLayoutInited;this.layoutItems(this.items,t);this._isLayoutInited=true};h._init=h.layout;h._resetLayout=function(){this.getSize()};h.getSize=function(){this.size=o(this.element)};h._getMeasurement=function(e,t){var i=this.options[e];var n;if(!i){this[e]=0}else{if(typeof i=="string"){n=this.element.querySelector(i)}else if(i instanceof HTMLElement){n=i}this[e]=n?o(n)[t]:i}};h.layoutItems=function(e,t){e=this._getItemsForLayout(e);this._layoutItems(e,t);this._postLayout()};h._getItemsForLayout=function(e){return e.filter(function(e){return!e.isIgnored})};h._layoutItems=function(e,i){this._emitCompleteOnItems("layout",e);if(!e||!e.length){return}var n=[];e.forEach(function(e){var t=this._getItemLayoutPosition(e);t.item=e;t.isInstant=i||e.isLayoutInstant;n.push(t)},this);this._processLayoutQueue(n)};h._getItemLayoutPosition=function(){return{"x":0,"y":0}};h._processLayoutQueue=function(e){this.updateStagger();e.forEach(function(e,t){this._positionItem(e.item,e.x,e.y,e.isInstant,t)},this)};h.updateStagger=function(){var e=this.options.stagger;if(e===null||e===undefined){this.stagger=0;return}this.stagger=g(e);return this.stagger};h._positionItem=function(e,t,i,n,r){if(n){e.goTo(t,i)}else{e.stagger(r*this.stagger);e.moveTo(t,i)}};h._postLayout=function(){this.resizeContainer()};h.resizeContainer=function(){var e=this._getOption("resizeContainer");if(!e){return}var t=this._getContainerSize();if(t){this._setContainerMeasure(t.width,true);this._setContainerMeasure(t.height,false)}};h._getContainerSize=r;h._setContainerMeasure=function(e,t){if(e===undefined){return}var i=this.size;if(i.isBorderBox){e+=t?i.paddingLeft+i.paddingRight+i.borderLeftWidth+i.borderRightWidth:i.paddingBottom+i.paddingTop+i.borderTopWidth+i.borderBottomWidth}e=Math.max(e,0);this.element.style[t?"width":"height"]=e+"px"};h._emitCompleteOnItems=function(t,e){var i=this;function n(){i.dispatchEvent(t+"Complete",null,[e])}var r=e.length;if(!e||!r){n();return}var o=0;function a(){o++;if(o==r){n()}}e.forEach(function(e){e.once(t,a)})};h.dispatchEvent=function(e,t,i){var n=t?[t].concat(i):i;this.emitEvent(e,n);if(l){this.$element=this.$element||l(this.element);if(t){var r=l.Event(t);r.type=e;this.$element.trigger(r,i)}else{this.$element.trigger(e,i)}}};h.ignore=function(e){var t=this.getItem(e);if(t){t.isIgnored=true}};h.unignore=function(e){var t=this.getItem(e);if(t){delete t.isIgnored}};h.stamp=function(e){e=this._find(e);if(!e){return}this.stamps=this.stamps.concat(e);e.forEach(this.ignore,this)};h.unstamp=function(e){e=this._find(e);if(!e){return}e.forEach(function(e){a.removeFrom(this.stamps,e);this.unignore(e)},this)};h._find=function(e){if(!e){return}if(typeof e=="string"){e=this.element.querySelectorAll(e)}e=a.makeArray(e);return e};h._manageStamps=function(){if(!this.stamps||!this.stamps.length){return}this._getBoundingRect();this.stamps.forEach(this._manageStamp,this)};h._getBoundingRect=function(){var e=this.element.getBoundingClientRect();var t=this.size;this._boundingRect={"left":e.left+t.paddingLeft+t.borderLeftWidth,"top":e.top+t.paddingTop+t.borderTopWidth,"right":e.right-(t.paddingRight+t.borderRightWidth),"bottom":e.bottom-(t.paddingBottom+t.borderBottomWidth)}};h._manageStamp=r;h._getElementOffset=function(e){var t=e.getBoundingClientRect();var i=this._boundingRect;var n=o(e);var r={"left":t.left-i.left-n.marginLeft,"top":t.top-i.top-n.marginTop,"right":i.right-t.right-n.marginRight,"bottom":i.bottom-t.bottom-n.marginBottom};return r};h.handleEvent=a.handleEvent;h.bindResize=function(){t.addEventListener("resize",this);this.isResizeBound=true};h.unbindResize=function(){t.removeEventListener("resize",this);this.isResizeBound=false};h.onresize=function(){this.resize()};a.debounceMethod(d,"onresize",100);h.resize=function(){if(!this.isResizeBound||!this.needsResizeLayout()){return}this.layout()};h.needsResizeLayout=function(){var e=o(this.element);var t=this.size&&e;return t&&e.innerWidth!==this.size.innerWidth};h.addItems=function(e){var t=this._itemize(e);if(t.length){this.items=this.items.concat(t)}return t};h.appended=function(e){var t=this.addItems(e);if(!t.length){return}this.layoutItems(t,true);this.reveal(t)};h.prepended=function(e){var t=this._itemize(e);if(!t.length){return}var i=this.items.slice(0);this.items=t.concat(i);this._resetLayout();this._manageStamps();this.layoutItems(t,true);this.reveal(t);this.layoutItems(i)};h.reveal=function(e){this._emitCompleteOnItems("reveal",e);if(!e||!e.length){return}var i=this.updateStagger();e.forEach(function(e,t){e.stagger(t*i);e.reveal()})};h.hide=function(e){this._emitCompleteOnItems("hide",e);if(!e||!e.length){return}var i=this.updateStagger();e.forEach(function(e,t){e.stagger(t*i);e.hide()})};h.revealItemElements=function(e){var t=this.getItems(e);this.reveal(t)};h.hideItemElements=function(e){var t=this.getItems(e);this.hide(t)};h.getItem=function(e){for(var t=0;t<this.items.length;t++){var i=this.items[t];if(i.element==e){return i}}};h.getItems=function(e){e=a.makeArray(e);var i=[];e.forEach(function(e){var t=this.getItem(e);if(t){i.push(t)}},this);return i};h.remove=function(e){var t=this.getItems(e);this._emitCompleteOnItems("remove",t);if(!t||!t.length){return}t.forEach(function(e){e.remove();a.removeFrom(this.items,e)},this)};h.destroy=function(){var e=this.element.style;e.height="";e.position="";e.width="";this.items.forEach(function(e){e.destroy()});this.unbindResize();var t=this.element.outlayerGUID;delete c[t];delete this.element.outlayerGUID;if(l){l.removeData(this.element,this.constructor.namespace)}};d.data=function(e){e=a.getQueryElement(e);var t=e&&e.outlayerGUID;return t&&c[t]};d.create=function(e,t){var i=f(d);i.defaults=a.extend({},d.defaults);a.extend(i.defaults,t);i.compatOptions=a.extend({},d.compatOptions);i.namespace=e;i.data=d.data;i.Item=f(n);a.htmlInit(i,e);if(l&&l.bridget){l.bridget(e,i)}return i};function f(e){function t(){e.apply(this,arguments)}t.prototype=Object.create(e.prototype);t.prototype.constructor=t;return t}var p={"ms":1,"s":1e3};function g(e){if(typeof e=="number"){return e}var t=e.match(/(^\d*\.?\d*)(\w*)/);var i=t&&t[1];var n=t&&t[2];if(!i.length){return 0}i=parseFloat(i);var r=p[n]||1;return i*r}d.Item=n;return d});(function(e,t){if(typeof define=="function"&&define.amd){define("packery/js/rect",t)}else if(typeof module=="object"&&module.exports){module.exports=t()}else{e.Packery=e.Packery||{};e.Packery.Rect=t()}})(window,function e(){"use strict";function s(e){for(var t in s.defaults){this[t]=s.defaults[t]}for(t in e){this[t]=e[t]}}s.defaults={"x":0,"y":0,"width":0,"height":0};var t=s.prototype;t.contains=function(e){var t=e.width||0;var i=e.height||0;return this.x<=e.x&&this.y<=e.y&&this.x+this.width>=e.x+t&&this.y+this.height>=e.y+i};t.overlaps=function(e){var t=this.x+this.width;var i=this.y+this.height;var n=e.x+e.width;var r=e.y+e.height;return this.x<n&&t>e.x&&this.y<r&&i>e.y};t.getMaximalFreeRects=function(e){if(!this.overlaps(e)){return false}var t=[];var i;var n=this.x+this.width;var r=this.y+this.height;var o=e.x+e.width;var a=e.y+e.height;if(this.y<e.y){i=new s({"x":this.x,"y":this.y,"width":this.width,"height":e.y-this.y});t.push(i)}if(n>o){i=new s({"x":o,"y":this.y,"width":n-o,"height":this.height});t.push(i)}if(r>a){i=new s({"x":this.x,"y":a,"width":this.width,"height":r-a});t.push(i)}if(this.x<e.x){i=new s({"x":this.x,"y":this.y,"width":e.x-this.x,"height":this.height});t.push(i)}return t};t.canFit=function(e){return this.width>=e.width&&this.height>=e.height};return s});(function(e,t){if(typeof define=="function"&&define.amd){define("packery/js/packer",["./rect"],t)}else if(typeof module=="object"&&module.exports){module.exports=t(require("./rect"))}else{var i=e.Packery=e.Packery||{};i.Packer=t(i.Rect)}})(window,function e(t){"use strict";function i(e,t,i){this.width=e||0;this.height=t||0;this.sortDirection=i||"downwardLeftToRight";this.reset()}var n=i.prototype;n.reset=function(){this.spaces=[];var e=new t({"x":0,"y":0,"width":this.width,"height":this.height});this.spaces.push(e);this.sorter=r[this.sortDirection]||r.downwardLeftToRight};n.pack=function(e){for(var t=0;t<this.spaces.length;t++){var i=this.spaces[t];if(i.canFit(e)){this.placeInSpace(e,i);break}}};n.columnPack=function(e){for(var t=0;t<this.spaces.length;t++){var i=this.spaces[t];var n=i.x<=e.x&&i.x+i.width>=e.x+e.width&&i.height>=e.height-.01;if(n){e.y=i.y;this.placed(e);break}}};n.rowPack=function(e){for(var t=0;t<this.spaces.length;t++){var i=this.spaces[t];var n=i.y<=e.y&&i.y+i.height>=e.y+e.height&&i.width>=e.width-.01;if(n){e.x=i.x;this.placed(e);break}}};n.placeInSpace=function(e,t){e.x=t.x;e.y=t.y;this.placed(e)};n.placed=function(e){var t=[];for(var i=0;i<this.spaces.length;i++){var n=this.spaces[i];var r=n.getMaximalFreeRects(e);if(r){t.push.apply(t,r)}else{t.push(n)}}this.spaces=t;this.mergeSortSpaces()};n.mergeSortSpaces=function(){i.mergeRects(this.spaces);this.spaces.sort(this.sorter)};n.addSpace=function(e){this.spaces.push(e);this.mergeSortSpaces()};i.mergeRects=function(e){var t=0;var i=e[t];e:while(i){var n=0;var r=e[t+n];while(r){if(r==i){n++}else if(r.contains(i)){e.splice(t,1);i=e[t];continue e}else if(i.contains(r)){e.splice(t+n,1)}else{n++}r=e[t+n]}t++;i=e[t]}return e};var r={"downwardLeftToRight":function(e,t){return e.y-t.y||e.x-t.x},"rightwardTopToBottom":function(e,t){return e.x-t.x||e.y-t.y}};return i});(function(e,t){if(typeof define=="function"&&define.amd){define("packery/js/item",["outlayer/outlayer","./rect"],t)}else if(typeof module=="object"&&module.exports){module.exports=t(require("outlayer"),require("./rect"))}else{e.Packery.Item=t(e.Outlayer,e.Packery.Rect)}})(window,function e(t,i){"use strict";var n=document.documentElement.style;var r=typeof n.transform=="string"?"transform":"WebkitTransform";var o=function e(){t.Item.apply(this,arguments)};var a=o.prototype=Object.create(t.Item.prototype);var s=a._create;a._create=function(){s.call(this);this.rect=new i};var l=a.moveTo;a.moveTo=function(e,t){var i=Math.abs(this.position.x-e);var n=Math.abs(this.position.y-t);var r=this.layout.dragItemCount&&!this.isPlacing&&!this.isTransitioning&&i<1&&n<1;if(r){this.goTo(e,t);return}l.apply(this,arguments)};a.enablePlacing=function(){this.removeTransitionStyles();if(this.isTransitioning&&r){this.element.style[r]="none"}this.isTransitioning=false;this.getSize();this.layout._setRectSize(this.element,this.rect);this.isPlacing=true};a.disablePlacing=function(){this.isPlacing=false};a.removeElem=function(){var e=this.element.parentNode;if(e){e.removeChild(this.element)}this.layout.packer.addSpace(this.rect);this.emitEvent("remove",[this])};a.showDropPlaceholder=function(){var e=this.dropPlaceholder;if(!e){e=this.dropPlaceholder=document.createElement("div");e.className="packery-drop-placeholder";e.style.position="absolute"}e.style.width=this.size.width+"px";e.style.height=this.size.height+"px";this.positionDropPlaceholder();this.layout.element.appendChild(e)};a.positionDropPlaceholder=function(){this.dropPlaceholder.style[r]="translate("+this.rect.x+"px, "+this.rect.y+"px)"};a.hideDropPlaceholder=function(){var e=this.dropPlaceholder.parentNode;if(e){e.removeChild(this.dropPlaceholder)}};return o});(function(e,t){if(typeof define=="function"&&define.amd){define(["get-size/get-size","outlayer/outlayer","packery/js/rect","packery/js/packer","packery/js/item"],t)}else if(typeof module=="object"&&module.exports){module.exports=t(require("get-size"),require("outlayer"),require("./rect"),require("./packer"),require("./item"))}else{e.Packery=t(e.getSize,e.Outlayer,e.Packery.Rect,e.Packery.Packer,e.Packery.Item)}})(window,function e(c,t,g,i,n){"use strict";g.prototype.canFit=function(e){return this.width>=e.width-1&&this.height>=e.height-1};var r=t.create("packery");r.Item=n;var o=r.prototype;o._create=function(){t.prototype._create.call(this);this.packer=new i;this.shiftPacker=new i;this.isEnabled=true;this.dragItemCount=0;var n=this;this.handleDraggabilly={"dragStart":function(){n.itemDragStart(this.element)},"dragMove":function(){n.itemDragMove(this.element,this.position.x,this.position.y)},"dragEnd":function(){n.itemDragEnd(this.element)}};this.handleUIDraggable={"start":function e(t,i){if(!i){return}n.itemDragStart(t.currentTarget)},"drag":function e(t,i){if(!i){return}n.itemDragMove(t.currentTarget,i.position.left,i.position.top)},"stop":function e(t,i){if(!i){return}n.itemDragEnd(t.currentTarget)}}};o._resetLayout=function(){this.getSize();this._getMeasurements();var e,t,i;if(this._getOption("horizontal")){e=Infinity;t=this.size.innerHeight+this.gutter;i="rightwardTopToBottom"}else{e=this.size.innerWidth+this.gutter;t=Infinity;i="downwardLeftToRight"}this.packer.width=this.shiftPacker.width=e;this.packer.height=this.shiftPacker.height=t;this.packer.sortDirection=this.shiftPacker.sortDirection=i;this.packer.reset();this.maxY=0;this.maxX=0};o._getMeasurements=function(){this._getMeasurement("columnWidth","width");this._getMeasurement("rowHeight","height");this._getMeasurement("gutter","width")};o._getItemLayoutPosition=function(e){this._setRectSize(e.element,e.rect);if(this.isShifting||this.dragItemCount>0){var t=this._getPackMethod();this.packer[t](e.rect)}else{this.packer.pack(e.rect)}this._setMaxXY(e.rect);return e.rect};o.shiftLayout=function(){this.isShifting=true;this.layout();delete this.isShifting};o._getPackMethod=function(){return this._getOption("horizontal")?"rowPack":"columnPack"};o._setMaxXY=function(e){this.maxX=Math.max(e.x+e.width,this.maxX);this.maxY=Math.max(e.y+e.height,this.maxY)};o._setRectSize=function(e,t){var i=c(e);var n=i.outerWidth;var r=i.outerHeight;if(n||r){n=this._applyGridGutter(n,this.columnWidth);r=this._applyGridGutter(r,this.rowHeight)}t.width=Math.min(n,this.packer.width);t.height=Math.min(r,this.packer.height)};o._applyGridGutter=function(e,t){if(!t){return e+this.gutter}t+=this.gutter;var i=e%t;var n=i&&i<1?"round":"ceil";e=Math[n](e/t)*t;return e};o._getContainerSize=function(){if(this._getOption("horizontal")){return{"width":this.maxX-this.gutter}}else{return{"height":this.maxY-this.gutter}}};o._manageStamp=function(e){var t=this.getItem(e);var i;if(t&&t.isPlacing){i=t.rect}else{var n=this._getElementOffset(e);i=new g({"x":this._getOption("originLeft")?n.left:n.right,"y":this._getOption("originTop")?n.top:n.bottom})}this._setRectSize(e,i);this.packer.placed(i);this._setMaxXY(i)};function a(e,t){return e.position.y-t.position.y||e.position.x-t.position.x}function s(e,t){return e.position.x-t.position.x||e.position.y-t.position.y}o.sortItemsByPosition=function(){var e=this._getOption("horizontal")?s:a;this.items.sort(e)};o.fit=function(e,t,i){var n=this.getItem(e);if(!n){return}this.stamp(n.element);n.enablePlacing();this.updateShiftTargets(n);t=t===undefined?n.rect.x:t;i=i===undefined?n.rect.y:i;this.shift(n,t,i);this._bindFitEvents(n);n.moveTo(n.rect.x,n.rect.y);this.shiftLayout();this.unstamp(n.element);this.sortItemsByPosition();n.disablePlacing()};o._bindFitEvents=function(e){var t=this;var i=0;function n(){i++;if(i!=2){return}t.dispatchEvent("fitComplete",null,[e])}e.once("layout",n);this.once("layoutComplete",n)};o.resize=function(){if(!this.isResizeBound||!this.needsResizeLayout()){return}if(this.options.shiftPercentResize){this.resizeShiftPercentLayout()}else{this.layout()}};o.needsResizeLayout=function(){var e=c(this.element);var t=this._getOption("horizontal")?"innerHeight":"innerWidth";return e[t]!=this.size[t]};o.resizeShiftPercentLayout=function(){var e=this._getItemsForLayout(this.items);var t=this._getOption("horizontal");var i=t?"y":"x";var n=t?"height":"width";var r=t?"rowHeight":"columnWidth";var o=t?"innerHeight":"innerWidth";var a=this[r];a=a&&a+this.gutter;if(a){this._getMeasurements();var s=this[r]+this.gutter;e.forEach(function(e){var t=Math.round(e.rect[i]/a);e.rect[i]=t*s})}else{var l=c(this.element)[o]+this.gutter;var u=this.packer[n];e.forEach(function(e){e.rect[i]=e.rect[i]/u*l})}this.shiftLayout()};o.itemDragStart=function(e){if(!this.isEnabled){return}this.stamp(e);var t=this.getItem(e);if(!t){return}t.enablePlacing();t.showDropPlaceholder();this.dragItemCount++;this.updateShiftTargets(t)};o.updateShiftTargets=function(e){this.shiftPacker.reset();this._getBoundingRect();var r=this._getOption("originLeft");var o=this._getOption("originTop");this.stamps.forEach(function(e){var t=this.getItem(e);if(t&&t.isPlacing){return}var i=this._getElementOffset(e);var n=new g({"x":r?i.left:i.right,"y":o?i.top:i.bottom});this._setRectSize(e,n);this.shiftPacker.placed(n)},this);var l=this._getOption("horizontal");var t=l?"rowHeight":"columnWidth";var u=l?"height":"width";this.shiftTargetKeys=[];this.shiftTargets=[];var c;var d=this[t];d=d&&d+this.gutter;if(d){var i=Math.ceil(e.rect[u]/d);var n=Math.floor((this.shiftPacker[u]+this.gutter)/d);c=(n-i)*d;for(var a=0;a<n;a++){var s=l?0:a*d;var h=l?a*d:0;this._addShiftTarget(s,h,c)}}else{c=this.shiftPacker[u]+this.gutter-e.rect[u];this._addShiftTarget(0,0,c)}var f=this._getItemsForLayout(this.items);var p=this._getPackMethod();f.forEach(function(e){var t=e.rect;this._setRectSize(e.element,t);this.shiftPacker[p](t);this._addShiftTarget(t.x,t.y,c);var i=l?t.x+t.width:t.x;var n=l?t.y:t.y+t.height;this._addShiftTarget(i,n,c);if(d){var r=Math.round(t[u]/d);for(var o=1;o<r;o++){var a=l?i:t.x+d*o;var s=l?t.y+d*o:n;this._addShiftTarget(a,s,c)}}},this)};o._addShiftTarget=function(e,t,i){var n=this._getOption("horizontal")?t:e;if(n!==0&&n>i){return}var r=e+","+t;var o=this.shiftTargetKeys.indexOf(r)!=-1;if(o){return}this.shiftTargetKeys.push(r);this.shiftTargets.push({"x":e,"y":t})};o.shift=function(e,t,i){var n;var r=Infinity;var o={"x":t,"y":i};this.shiftTargets.forEach(function(e){var t=l(e,o);if(t<r){n=e;r=t}});e.rect.x=n.x;e.rect.y=n.y};function l(e,t){var i=t.x-e.x;var n=t.y-e.y;return Math.sqrt(i*i+n*n)}var u=120;o.itemDragMove=function(e,t,i){var n=this.isEnabled&&this.getItem(e);if(!n){return}t-=this.size.paddingLeft;i-=this.size.paddingTop;var r=this;function o(){r.shift(n,t,i);n.positionDropPlaceholder();r.layout()}var a=new Date;var s=this._itemDragTime&&a-this._itemDragTime<u;if(s){clearTimeout(this.dragTimeout);this.dragTimeout=setTimeout(o,u)}else{o();this._itemDragTime=a}};o.itemDragEnd=function(e){var t=this.isEnabled&&this.getItem(e);if(!t){return}clearTimeout(this.dragTimeout);t.element.classList.add("is-positioning-post-drag");var i=0;var n=this;function r(){i++;if(i!=2){return}t.element.classList.remove("is-positioning-post-drag");t.hideDropPlaceholder();n.dispatchEvent("dragItemPositioned",null,[t])}t.once("layout",r);this.once("layoutComplete",r);t.moveTo(t.rect.x,t.rect.y);this.layout();this.dragItemCount=Math.max(0,this.dragItemCount-1);this.sortItemsByPosition();t.disablePlacing();this.unstamp(t.element)};o.bindDraggabillyEvents=function(e){this._bindDraggabillyEvents(e,"on")};o.unbindDraggabillyEvents=function(e){this._bindDraggabillyEvents(e,"off")};o._bindDraggabillyEvents=function(e,t){var i=this.handleDraggabilly;e[t]("dragStart",i.dragStart);e[t]("dragMove",i.dragMove);e[t]("dragEnd",i.dragEnd)};o.bindUIDraggableEvents=function(e){this._bindUIDraggableEvents(e,"on")};o.unbindUIDraggableEvents=function(e){this._bindUIDraggableEvents(e,"off")};o._bindUIDraggableEvents=function(e,t){var i=this.handleUIDraggable;e[t]("dragstart",i.start)[t]("drag",i.drag)[t]("dragstop",i.stop)};var d=o.destroy;o.destroy=function(){d.apply(this,arguments);this.isEnabled=false};r.Rect=g;r.Packer=i;return r});(function(){"use strict";var e=typeof module!=="undefined"&&module.exports;var i=typeof Element!=="undefined"&&"ALLOW_KEYBOARD_INPUT"in Element;var n=function(){var e;var t;var i=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]];var n=0;var r=i.length;var o={};for(;n<r;n++){e=i[n];if(e&&e[1]in document){for(n=0,t=e.length;n<t;n++){o[i[0][n]]=e[n]}return o}}return false}();var t={"request":function(e){var t=n.requestFullscreen;e=e||document.documentElement;if(/5\.1[\.\d]* Safari/.test(navigator.userAgent)){e[t]()}else{e[t](i&&Element.ALLOW_KEYBOARD_INPUT)}},"exit":function(){document[n.exitFullscreen]()},"toggle":function(e){if(this.isFullscreen){this.exit()}else{this.request(e)}},"raw":n};if(!n){if(e){module.exports=false}else{window.screenfull=false}return}Object.defineProperties(t,{"isFullscreen":{"get":function(){return Boolean(document[n.fullscreenElement])}},"element":{"enumerable":true,"get":function(){return document[n.fullscreenElement]}},"enabled":{"enumerable":true,"get":function(){return Boolean(document[n.fullscreenEnabled])}}});if(e){module.exports=t}else{window.screenfull=t}})();(function(){function c(o,a,s){function l(i,e){if(!a[i]){if(!o[i]){var t="function"==typeof require&&require;if(!e&&t)return t(i,!0);if(u)return u(i,!0);var n=new Error("Cannot find module '"+i+"'");throw n.code="MODULE_NOT_FOUND",n}var r=a[i]={"exports":{}};o[i][0].call(r.exports,function(e){var t=o[i][1][e];return l(t||e)},r,r.exports,c,o,a,s)}return a[i].exports}for(var u="function"==typeof require&&require,e=0;e<s.length;e++)l(s[e]);return l}return c})()({"1":[function(e,t,i){(function(e){(function(){"use strict";var n=["BigInt64Array","BigUint64Array","Float32Array","Float64Array","Int16Array","Int32Array","Int8Array","Uint16Array","Uint32Array","Uint8Array","Uint8ClampedArray"];var r=typeof globalThis==="undefined"?e:globalThis;t.exports=function e(){var t=[];for(var i=0;i<n.length;i++){if(typeof r[n[i]]==="function"){t[t.length]=n[i]}}return t}}).call(this)}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{}],"2":[function(e,t,i){"use strict";var r=e("get-intrinsic");var o=e("./");var a=o(r("String.prototype.indexOf"));t.exports=function e(t,i){var n=r(t,!!i);if(typeof n==="function"&&a(t,".prototype.")>-1){return o(n)}return n}},{"./":3,"get-intrinsic":8}],"3":[function(e,t,i){"use strict";var r=e("function-bind");var n=e("get-intrinsic");var o=n("%Function.prototype.apply%");var a=n("%Function.prototype.call%");var s=n("%Reflect.apply%",true)||r.call(a,o);var l=n("%Object.getOwnPropertyDescriptor%",true);var u=n("%Object.defineProperty%",true);var c=n("%Math.max%");if(u){try{u({},"a",{"value":1})}catch(e){u=null}}t.exports=function e(t){var i=s(r,a,arguments);if(l&&u){var n=l(i,"length");if(n.configurable){u(i,"length",{"value":1+c(0,t.length-(arguments.length-1))})}}return i};var d=function e(){return s(r,o,arguments)};if(u){u(t.exports,"apply",{"value":d})}else{t.exports.apply=d}},{"function-bind":7,"get-intrinsic":8}],"4":[function(e,t,i){"use strict";var n=e("get-intrinsic");var r=n("%Object.getOwnPropertyDescriptor%",true);if(r){try{r([],"length")}catch(e){r=null}}t.exports=r},{"get-intrinsic":8}],"5":[function(e,t,i){"use strict";var o=e("is-callable");var a=Object.prototype.toString;var s=Object.prototype.hasOwnProperty;var l=function e(t,i,n){for(var r=0,o=t.length;r<o;r++){if(s.call(t,r)){if(n==null){i(t[r],r,t)}else{i.call(n,t[r],r,t)}}}};var u=function e(t,i,n){for(var r=0,o=t.length;r<o;r++){if(n==null){i(t.charAt(r),r,t)}else{i.call(n,t.charAt(r),r,t)}}};var c=function e(t,i,n){for(var r in t){if(s.call(t,r)){if(n==null){i(t[r],r,t)}else{i.call(n,t[r],r,t)}}}};var n=function e(t,i,n){if(!o(i)){throw new TypeError("iterator must be a function")}var r;if(arguments.length>=3){r=n}if(a.call(t)==="[object Array]"){l(t,i,r)}else if(typeof t==="string"){u(t,i,r)}else{c(t,i,r)}};t.exports=n},{"is-callable":15}],"6":[function(e,t,i){"use strict";var c="Function.prototype.bind called on incompatible ";var d=Array.prototype.slice;var h=Object.prototype.toString;var f="[object Function]";t.exports=function e(t){var i=this;if(typeof i!=="function"||h.call(i)!==f){throw new TypeError(c+i)}var n=d.call(arguments,1);var r;var o=function(){if(this instanceof r){var e=i.apply(this,n.concat(d.call(arguments)));if(Object(e)===e){return e}return this}else{return i.apply(t,n.concat(d.call(arguments)))}};var a=Math.max(0,i.length-n.length);var s=[];for(var l=0;l<a;l++){s.push("$"+l)}r=Function("binder","return function ("+s.join(",")+"){ return binder.apply(this,arguments); }")(o);if(i.prototype){var u=function e(){};u.prototype=i.prototype;r.prototype=new u;u.prototype=null}return r}},{}],"7":[function(e,t,i){"use strict";var n=e("./implementation");t.exports=Function.prototype.bind||n},{"./implementation":6}],"8":[function(e,t,i){"use strict";var v;var m=SyntaxError;var n=Function;var y=TypeError;var o=function(e){try{return n('"use strict"; return ('+e+").constructor;")()}catch(e){}};var b=Object.getOwnPropertyDescriptor;if(b){try{b({},"")}catch(e){b=null}}var r=function(){throw new y};var a=b?function(){try{arguments.callee;return r}catch(e){try{return b(arguments,"callee").get}catch(e){return r}}}():r;var s=e("has-symbols")();var l=Object.getPrototypeOf||function(e){return e.__proto__};var u={};var c=typeof Uint8Array==="undefined"?v:l(Uint8Array);var _={"%AggregateError%":typeof AggregateError==="undefined"?v:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer==="undefined"?v:ArrayBuffer,"%ArrayIteratorPrototype%":s?l([][Symbol.iterator]()):v,"%AsyncFromSyncIteratorPrototype%":v,"%AsyncFunction%":u,"%AsyncGenerator%":u,"%AsyncGeneratorFunction%":u,"%AsyncIteratorPrototype%":u,"%Atomics%":typeof Atomics==="undefined"?v:Atomics,"%BigInt%":typeof BigInt==="undefined"?v:BigInt,"%Boolean%":Boolean,"%DataView%":typeof DataView==="undefined"?v:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":typeof Float32Array==="undefined"?v:Float32Array,"%Float64Array%":typeof Float64Array==="undefined"?v:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry==="undefined"?v:FinalizationRegistry,"%Function%":n,"%GeneratorFunction%":u,"%Int8Array%":typeof Int8Array==="undefined"?v:Int8Array,"%Int16Array%":typeof Int16Array==="undefined"?v:Int16Array,"%Int32Array%":typeof Int32Array==="undefined"?v:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":s?l(l([][Symbol.iterator]())):v,"%JSON%":typeof JSON==="object"?JSON:v,"%Map%":typeof Map==="undefined"?v:Map,"%MapIteratorPrototype%":typeof Map==="undefined"||!s?v:l((new Map)[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise==="undefined"?v:Promise,"%Proxy%":typeof Proxy==="undefined"?v:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":typeof Reflect==="undefined"?v:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set==="undefined"?v:Set,"%SetIteratorPrototype%":typeof Set==="undefined"||!s?v:l((new Set)[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer==="undefined"?v:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":s?l(""[Symbol.iterator]()):v,"%Symbol%":s?Symbol:v,"%SyntaxError%":m,"%ThrowTypeError%":a,"%TypedArray%":c,"%TypeError%":y,"%Uint8Array%":typeof Uint8Array==="undefined"?v:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray==="undefined"?v:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array==="undefined"?v:Uint16Array,"%Uint32Array%":typeof Uint32Array==="undefined"?v:Uint32Array,"%URIError%":URIError,"%WeakMap%":typeof WeakMap==="undefined"?v:WeakMap,"%WeakRef%":typeof WeakRef==="undefined"?v:WeakRef,"%WeakSet%":typeof WeakSet==="undefined"?v:WeakSet};var d=function e(t){var i;if(t==="%AsyncFunction%"){i=o("async function () {}")}else if(t==="%GeneratorFunction%"){i=o("function* () {}")}else if(t==="%AsyncGeneratorFunction%"){i=o("async function* () {}")}else if(t==="%AsyncGenerator%"){var n=e("%AsyncGeneratorFunction%");if(n){i=n.prototype}}else if(t==="%AsyncIteratorPrototype%"){var r=e("%AsyncGenerator%");if(r){i=l(r.prototype)}}_[t]=i;return i};var h={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]};var f=e("function-bind");var w=e("has");var E=f.call(Function.call,Array.prototype.concat);var x=f.call(Function.apply,Array.prototype.splice);var p=f.call(Function.call,String.prototype.replace);var T=f.call(Function.call,String.prototype.slice);var S=f.call(Function.call,RegExp.prototype.exec);var g=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g;var k=/\\(\\)?/g;var R=function e(t){var i=T(t,0,1);var n=T(t,-1);if(i==="%"&&n!=="%"){throw new m("invalid intrinsic syntax, expected closing `%`")}else if(n==="%"&&i!=="%"){throw new m("invalid intrinsic syntax, expected opening `%`")}var r=[];p(t,g,function(e,t,i,n){r[r.length]=i?p(n,k,"$1"):t||e});return r};var C=function e(t,i){var n=t;var r;if(w(h,n)){r=h[n];n="%"+r[0]+"%"}if(w(_,n)){var o=_[n];if(o===u){o=d(n)}if(typeof o==="undefined"&&!i){throw new y("intrinsic "+t+" exists, but is not available. Please file an issue!")}return{"alias":r,"name":n,"value":o}}throw new m("intrinsic "+t+" does not exist!")};t.exports=function e(t,i){if(typeof t!=="string"||t.length===0){throw new y("intrinsic name must be a non-empty string")}if(arguments.length>1&&typeof i!=="boolean"){throw new y('"allowMissing" argument must be a boolean')}if(S(/^%?[^%]*%?$/,t)===null){throw new m("`%` may not be present anywhere but at the beginning and end of the intrinsic name")}var n=R(t);var r=n.length>0?n[0]:"";var o=C("%"+r+"%",i);var a=o.name;var s=o.value;var l=false;var u=o.alias;if(u){r=u[0];x(n,E([0,1],u))}for(var c=1,d=true;c<n.length;c+=1){var h=n[c];var f=T(h,0,1);var p=T(h,-1);if((f==='"'||f==="'"||f==="`"||(p==='"'||p==="'"||p==="`"))&&f!==p){throw new m("property names with quotes must have matching quotes")}if(h==="constructor"||!d){l=true}r+="."+h;a="%"+r+"%";if(w(_,a)){s=_[a]}else if(s!=null){if(!(h in s)){if(!i){throw new y("base intrinsic for "+t+" exists, but the property is not available.")}return void v}if(b&&c+1>=n.length){var g=b(s,h);d=!!g;if(d&&"get"in g&&!("originalValue"in g.get)){s=g.get}else{s=s[h]}}else{d=w(s,h);s=s[h]}if(d&&!l){_[a]=s}}}return s}},{"function-bind":7,"has":12,"has-symbols":9}],"9":[function(e,t,i){"use strict";var n=typeof Symbol!=="undefined"&&Symbol;var r=e("./shams");t.exports=function e(){if(typeof n!=="function"){return false}if(typeof Symbol!=="function"){return false}if(typeof n("foo")!=="symbol"){return false}if(typeof Symbol("bar")!=="symbol"){return false}return r()}},{"./shams":10}],"10":[function(e,t,i){"use strict";t.exports=function e(){if(typeof Symbol!=="function"||typeof Object.getOwnPropertySymbols!=="function"){return false}if(typeof Symbol.iterator==="symbol"){return true}var t={};var i=Symbol("test");var n=Object(i);if(typeof i==="string"){return false}if(Object.prototype.toString.call(i)!=="[object Symbol]"){return false}if(Object.prototype.toString.call(n)!=="[object Symbol]"){return false}var r=42;t[i]=r;for(i in t){return false}if(typeof Object.keys==="function"&&Object.keys(t).length!==0){return false}if(typeof Object.getOwnPropertyNames==="function"&&Object.getOwnPropertyNames(t).length!==0){return false}var o=Object.getOwnPropertySymbols(t);if(o.length!==1||o[0]!==i){return false}if(!Object.prototype.propertyIsEnumerable.call(t,i)){return false}if(typeof Object.getOwnPropertyDescriptor==="function"){var a=Object.getOwnPropertyDescriptor(t,i);if(a.value!==r||a.enumerable!==true){return false}}return true}},{}],"11":[function(e,t,i){"use strict";var n=e("has-symbols/shams");t.exports=function e(){return n()&&!!Symbol.toStringTag}},{"has-symbols/shams":10}],"12":[function(e,t,i){"use strict";var n=e("function-bind");t.exports=n.call(Function.call,Object.prototype.hasOwnProperty)},{"function-bind":7}],"13":[function(e,t,i){if(typeof Object.create==="function"){t.exports=function e(t,i){if(i){t.super_=i;t.prototype=Object.create(i.prototype,{"constructor":{"value":t,"enumerable":false,"writable":true,"configurable":true}})}}}else{t.exports=function e(t,i){if(i){t.super_=i;var n=function(){};n.prototype=i.prototype;t.prototype=new n;t.prototype.constructor=t}}}},{}],"14":[function(e,t,i){"use strict";var n=e("has-tostringtag/shams")();var r=e("call-bind/callBound");var o=r("Object.prototype.toString");var a=function e(t){if(n&&t&&typeof t==="object"&&Symbol.toStringTag in t){return false}return o(t)==="[object Arguments]"};var s=function e(t){if(a(t)){return true}return t!==null&&typeof t==="object"&&typeof t.length==="number"&&t.length>=0&&o(t)!=="[object Array]"&&o(t.callee)==="[object Function]"};var l=function(){return a(arguments)}();a.isLegacyArguments=s;t.exports=l?a:s},{"call-bind/callBound":2,"has-tostringtag/shams":11}],"15":[function(e,t,i){"use strict";var n=Function.prototype.toString;var r=typeof Reflect==="object"&&Reflect!==null&&Reflect.apply;var o;var a;if(typeof r==="function"&&typeof Object.defineProperty==="function"){try{o=Object.defineProperty({},"length",{"get":function(){throw a}});a={};r(function(){throw 42},null,o)}catch(e){if(e!==a){r=null}}}else{r=null}var s=/^\s*class\b/;var l=function e(t){try{var i=n.call(t);return s.test(i)}catch(e){return false}};var u=function e(t){try{if(l(t)){return false}n.call(t);return true}catch(e){return false}};var c=Object.prototype.toString;var d="[object Object]";var h="[object Function]";var f="[object GeneratorFunction]";var p="[object HTMLAllCollection]";var g="[object HTML document.all class]";var v="[object HTMLCollection]";var m=typeof Symbol==="function"&&!!Symbol.toStringTag;var y=!(0 in[,]);var b=function e(){return false};if(typeof document==="object"){var _=document.all;if(c.call(_)===c.call(document.all)){b=function e(t){if((y||!t)&&(typeof t==="undefined"||typeof t==="object")){try{var i=c.call(t);return(i===p||i===g||i===v||i===d)&&t("")==null}catch(e){}}return false}}}t.exports=r?function e(t){if(b(t)){return true}if(!t){return false}if(typeof t!=="function"&&typeof t!=="object"){return false}try{r(t,null,o)}catch(e){if(e!==a){return false}}return!l(t)&&u(t)}:function e(t){if(b(t)){return true}if(!t){return false}if(typeof t!=="function"&&typeof t!=="object"){return false}if(m){return u(t)}if(l(t)){return false}var i=c.call(t);if(i!==h&&i!==f&&!/^\[object HTML/.test(i)){return false}return u(t)}},{}],"16":[function(e,t,i){"use strict";var r=Object.prototype.toString;var o=Function.prototype.toString;var a=/^\s*(?:function)?\*/;var s=e("has-tostringtag/shams")();var l=Object.getPrototypeOf;var u=function(){if(!s){return false}try{return Function("return function*() {}")()}catch(e){}};var c;t.exports=function e(t){if(typeof t!=="function"){return false}if(a.test(o.call(t))){return true}if(!s){var i=r.call(t);return i==="[object GeneratorFunction]"}if(!l){return false}if(typeof c==="undefined"){var n=u();c=n?l(n):false}return l(t)===c}},{"has-tostringtag/shams":11}],"17":[function(p,g,e){(function(f){(function(){"use strict";var t=p("for-each");var e=p("available-typed-arrays");var i=p("call-bind/callBound");var n=i("Object.prototype.toString");var r=p("has-tostringtag/shams")();var o=typeof globalThis==="undefined"?f:globalThis;var a=e();var s=i("Array.prototype.indexOf",true)||function e(t,i){for(var n=0;n<t.length;n+=1){if(t[n]===i){return n}}return-1};var l=i("String.prototype.slice");var u={};var c=p("es-abstract/helpers/getOwnPropertyDescriptor");var d=Object.getPrototypeOf;if(r&&c&&d){t(a,function(e){var t=new o[e];if(Symbol.toStringTag in t){var i=d(t);var n=c(i,Symbol.toStringTag);if(!n){var r=d(i);n=c(r,Symbol.toStringTag)}u[e]=n.get}})}var h=function e(i){var n=false;t(u,function(e,t){if(!n){try{n=e.call(i)===t}catch(e){}}});return n};g.exports=function e(t){if(!t||typeof t!=="object"){return false}if(!r||!(Symbol.toStringTag in t)){var i=l(n(t),8,-1);return s(a,i)>-1}if(!c){return false}return h(t)}}).call(this)}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"available-typed-arrays":1,"call-bind/callBound":2,"es-abstract/helpers/getOwnPropertyDescriptor":4,"for-each":5,"has-tostringtag/shams":11}],"18":[function(e,t,i){var n=t.exports={};var r;var o;function a(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}(function(){try{if(typeof setTimeout==="function"){r=setTimeout}else{r=a}}catch(e){r=a}try{if(typeof clearTimeout==="function"){o=clearTimeout}else{o=s}}catch(e){o=s}})();function l(t){if(r===setTimeout){return setTimeout(t,0)}if((r===a||!r)&&setTimeout){r=setTimeout;return setTimeout(t,0)}try{return r(t,0)}catch(e){try{return r.call(null,t,0)}catch(e){return r.call(this,t,0)}}}function u(t){if(o===clearTimeout){return clearTimeout(t)}if((o===s||!o)&&clearTimeout){o=clearTimeout;return clearTimeout(t)}try{return o(t)}catch(e){try{return o.call(null,t)}catch(e){return o.call(this,t)}}}var c=[];var d=false;var h;var f=-1;function p(){if(!d||!h){return}d=false;if(h.length){c=h.concat(c)}else{f=-1}if(c.length){g()}}function g(){if(d){return}var e=l(p);d=true;var t=c.length;while(t){h=c;c=[];while(++f<t){if(h){h[f].run()}}f=-1;t=c.length}h=null;d=false;u(e)}n.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1){for(var i=1;i<arguments.length;i++){t[i-1]=arguments[i]}}c.push(new v(e,t));if(c.length===1&&!d){l(g)}};function v(e,t){this.fun=e;this.array=t}v.prototype.run=function(){this.fun.apply(null,this.array)};n.title="browser";n.browser=true;n.env={};n.argv=[];n.version="";n.versions={};function m(){}n.on=m;n.addListener=m;n.once=m;n.off=m;n.removeListener=m;n.removeAllListeners=m;n.emit=m;n.prependListener=m;n.prependOnceListener=m;n.listeners=function(e){return[]};n.binding=function(e){throw new Error("process.binding is not supported")};n.cwd=function(){return"/"};n.chdir=function(e){throw new Error("process.chdir is not supported")};n.umask=function(){return 0}},{}],"19":[function(e,t,i){t.exports=function e(t){return t&&typeof t==="object"&&typeof t.copy==="function"&&typeof t.fill==="function"&&typeof t.readUInt8==="function"}},{}],"20":[function(e,B,t){"use strict";var i=e("is-arguments");var n=e("is-generator-function");var r=e("which-typed-array");var o=e("is-typed-array");function a(e){return e.call.bind(e)}var s=typeof BigInt!=="undefined";var l=typeof Symbol!=="undefined";var u=a(Object.prototype.toString);var c=a(Number.prototype.valueOf);var d=a(String.prototype.valueOf);var h=a(Boolean.prototype.valueOf);if(s){var f=a(BigInt.prototype.valueOf)}if(l){var p=a(Symbol.prototype.valueOf)}function g(e,t){if(typeof e!=="object"){return false}try{t(e);return true}catch(e){return false}}t.isArgumentsObject=i;t.isGeneratorFunction=n;t.isTypedArray=o;function v(e){return typeof Promise!=="undefined"&&e instanceof Promise||e!==null&&typeof e==="object"&&typeof e.then==="function"&&typeof e.catch==="function"}t.isPromise=v;function m(e){if(typeof ArrayBuffer!=="undefined"&&ArrayBuffer.isView){return ArrayBuffer.isView(e)}return o(e)||R(e)}t.isArrayBufferView=m;function y(e){return r(e)==="Uint8Array"}t.isUint8Array=y;function b(e){return r(e)==="Uint8ClampedArray"}t.isUint8ClampedArray=b;function F(e){return r(e)==="Uint16Array"}t.isUint16Array=F;function N(e){return r(e)==="Uint32Array"}t.isUint32Array=N;function j(e){return r(e)==="Int8Array"}t.isInt8Array=j;function U(e){return r(e)==="Int16Array"}t.isInt16Array=U;function $(e){return r(e)==="Int32Array"}t.isInt32Array=$;function H(e){return r(e)==="Float32Array"}t.isFloat32Array=H;function z(e){return r(e)==="Float64Array"}t.isFloat64Array=z;function W(e){return r(e)==="BigInt64Array"}t.isBigInt64Array=W;function G(e){return r(e)==="BigUint64Array"}t.isBigUint64Array=G;function _(e){return u(e)==="[object Map]"}_.working=typeof Map!=="undefined"&&_(new Map);function V(e){if(typeof Map==="undefined"){return false}return _.working?_(e):e instanceof Map}t.isMap=V;function w(e){return u(e)==="[object Set]"}w.working=typeof Set!=="undefined"&&w(new Set);function q(e){if(typeof Set==="undefined"){return false}return w.working?w(e):e instanceof Set}t.isSet=q;function E(e){return u(e)==="[object WeakMap]"}E.working=typeof WeakMap!=="undefined"&&E(new WeakMap);function K(e){if(typeof WeakMap==="undefined"){return false}return E.working?E(e):e instanceof WeakMap}t.isWeakMap=K;function x(e){return u(e)==="[object WeakSet]"}x.working=typeof WeakSet!=="undefined"&&x(new WeakSet);function Z(e){return x(e)}t.isWeakSet=Z;function T(e){return u(e)==="[object ArrayBuffer]"}T.working=typeof ArrayBuffer!=="undefined"&&T(new ArrayBuffer);function S(e){if(typeof ArrayBuffer==="undefined"){return false}return T.working?T(e):e instanceof ArrayBuffer}t.isArrayBuffer=S;function k(e){return u(e)==="[object DataView]"}k.working=typeof ArrayBuffer!=="undefined"&&typeof DataView!=="undefined"&&k(new DataView(new ArrayBuffer(1),0,1));function R(e){if(typeof DataView==="undefined"){return false}return k.working?k(e):e instanceof DataView}t.isDataView=R;var C=typeof SharedArrayBuffer!=="undefined"?SharedArrayBuffer:undefined;function A(e){return u(e)==="[object SharedArrayBuffer]"}function O(e){if(typeof C==="undefined"){return false}if(typeof A.working==="undefined"){A.working=A(new C)}return A.working?A(e):e instanceof C}t.isSharedArrayBuffer=O;function X(e){return u(e)==="[object AsyncFunction]"}t.isAsyncFunction=X;function Y(e){return u(e)==="[object Map Iterator]"}t.isMapIterator=Y;function Q(e){return u(e)==="[object Set Iterator]"}t.isSetIterator=Q;function J(e){return u(e)==="[object Generator]"}t.isGeneratorObject=J;function ee(e){return u(e)==="[object WebAssembly.Module]"}t.isWebAssemblyCompiledModule=ee;function L(e){return g(e,c)}t.isNumberObject=L;function P(e){return g(e,d)}t.isStringObject=P;function I(e){return g(e,h)}t.isBooleanObject=I;function D(e){return s&&g(e,f)}t.isBigIntObject=D;function M(e){return l&&g(e,p)}t.isSymbolObject=M;function te(e){return L(e)||P(e)||I(e)||D(e)||M(e)}t.isBoxedPrimitive=te;function ie(e){return typeof Uint8Array!=="undefined"&&(S(e)||O(e))}t.isAnyArrayBuffer=ie;["isProxy","isExternal","isModuleNamespaceObject"].forEach(function(e){Object.defineProperty(t,e,{"enumerable":false,"value":function(){throw new Error(e+" is not supported in userland")}})})},{"is-arguments":14,"is-generator-function":16,"is-typed-array":17,"which-typed-array":22}],"21":[function(N,e,j){(function(F){(function(){var i=Object.getOwnPropertyDescriptors||function e(t){var i=Object.keys(t);var n={};for(var r=0;r<i.length;r++){n[i[r]]=Object.getOwnPropertyDescriptor(t,i[r])}return n};var s=/%[sdj%]/g;j.format=function(e){if(!w(e)){var t=[];for(var i=0;i<arguments.length;i++){t.push(l(arguments[i]))}return t.join(" ")}var i=1;var n=arguments;var r=n.length;var o=String(e).replace(s,function(e){if(e==="%%")return"%";if(i>=r)return e;switch(e){case"%s":return String(n[i++]);case"%d":return Number(n[i++]);case"%j":try{return JSON.stringify(n[i++])}catch(e){return"[Circular]"}default:return e}});for(var a=n[i];i<r;a=n[++i]){if(u(a)||!T(a)){o+=" "+a}else{o+=" "+l(a)}}return o};j.deprecate=function(e,t){if(typeof F!=="undefined"&&F.noDeprecation===true){return e}if(typeof F==="undefined"){return function(){return j.deprecate(e,t).apply(this,arguments)}}var i=false;function n(){if(!i){if(F.throwDeprecation){throw new Error(t)}else if(F.traceDeprecation){console.trace(t)}else{console.error(t)}i=true}return e.apply(this,arguments)}return n};var e={};var n=/^$/;if(F.env.NODE_DEBUG){var t=F.env.NODE_DEBUG;t=t.replace(/[|\\{}()[\]^$+?.]/g,"\\$&").replace(/\*/g,".*").replace(/,/g,"$|^").toUpperCase();n=new RegExp("^"+t+"$","i")}j.debuglog=function(t){t=t.toUpperCase();if(!e[t]){if(n.test(t)){var i=F.pid;e[t]=function(){var e=j.format.apply(j,arguments);console.error("%s %d: %s",t,i,e)}}else{e[t]=function(){}}}return e[t]};function l(e,t){var i={"seen":[],"stylize":o};if(arguments.length>=3)i.depth=arguments[2];if(arguments.length>=4)i.colors=arguments[3];if(a(t)){i.showHidden=t}else if(t){j._extend(i,t)}if(E(i.showHidden))i.showHidden=false;if(E(i.depth))i.depth=2;if(E(i.colors))i.colors=false;if(E(i.customInspect))i.customInspect=true;if(i.colors)i.stylize=r;return p(i,e,i.depth)}j.inspect=l;l.colors={"bold":[1,22],"italic":[3,23],"underline":[4,24],"inverse":[7,27],"white":[37,39],"grey":[90,39],"black":[30,39],"blue":[34,39],"cyan":[36,39],"green":[32,39],"magenta":[35,39],"red":[31,39],"yellow":[33,39]};l.styles={"special":"cyan","number":"yellow","boolean":"yellow","undefined":"grey","null":"bold","string":"green","date":"magenta","regexp":"red"};function r(e,t){var i=l.styles[t];if(i){return"["+l.colors[i][0]+"m"+e+"["+l.colors[i][1]+"m"}else{return e}}function o(e,t){return e}function f(e){var i={};e.forEach(function(e,t){i[e]=true});return i}function p(t,i,n){if(t.customInspect&&i&&R(i.inspect)&&i.inspect!==j.inspect&&!(i.constructor&&i.constructor.prototype===i)){var e=i.inspect(n,t);if(!w(e)){e=p(t,e,n)}return e}var r=g(t,i);if(r){return r}var o=Object.keys(i);var a=f(o);if(t.showHidden){o=Object.getOwnPropertyNames(i)}if(k(i)&&(o.indexOf("message")>=0||o.indexOf("description")>=0)){return v(i)}if(o.length===0){if(R(i)){var s=i.name?": "+i.name:"";return t.stylize("[Function"+s+"]","special")}if(x(i)){return t.stylize(RegExp.prototype.toString.call(i),"regexp")}if(S(i)){return t.stylize(Date.prototype.toString.call(i),"date")}if(k(i)){return v(i)}}var l="",u=false,c=["{","}"];if(_(i)){u=true;c=["[","]"]}if(R(i)){var d=i.name?": "+i.name:"";l=" [Function"+d+"]"}if(x(i)){l=" "+RegExp.prototype.toString.call(i)}if(S(i)){l=" "+Date.prototype.toUTCString.call(i)}if(k(i)){l=" "+v(i)}if(o.length===0&&(!u||i.length==0)){return c[0]+l+c[1]}if(n<0){if(x(i)){return t.stylize(RegExp.prototype.toString.call(i),"regexp")}else{return t.stylize("[Object]","special")}}t.seen.push(i);var h;if(u){h=m(t,i,n,a,o)}else{h=o.map(function(e){return y(t,i,n,a,e,u)})}t.seen.pop();return b(h,l,c)}function g(e,t){if(E(t))return e.stylize("undefined","undefined");if(w(t)){var i="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(i,"string")}if(d(t))return e.stylize(""+t,"number");if(a(t))return e.stylize(""+t,"boolean");if(u(t))return e.stylize("null","null")}function v(e){return"["+Error.prototype.toString.call(e)+"]"}function m(t,i,n,r,e){var o=[];for(var a=0,s=i.length;a<s;++a){if(I(i,String(a))){o.push(y(t,i,n,r,String(a),true))}else{o.push("")}}e.forEach(function(e){if(!e.match(/^\d+$/)){o.push(y(t,i,n,r,e,true))}});return o}function y(e,t,i,n,r,o){var a,s,l;l=Object.getOwnPropertyDescriptor(t,r)||{"value":t[r]};if(l.get){if(l.set){s=e.stylize("[Getter/Setter]","special")}else{s=e.stylize("[Getter]","special")}}else{if(l.set){s=e.stylize("[Setter]","special")}}if(!I(n,r)){a="["+r+"]"}if(!s){if(e.seen.indexOf(l.value)<0){if(u(i)){s=p(e,l.value,null)}else{s=p(e,l.value,i-1)}if(s.indexOf("\n")>-1){if(o){s=s.split("\n").map(function(e){return"  "+e}).join("\n").substr(2)}else{s="\n"+s.split("\n").map(function(e){return"   "+e}).join("\n")}}}else{s=e.stylize("[Circular]","special")}}if(E(a)){if(o&&r.match(/^\d+$/)){return s}a=JSON.stringify(""+r);if(a.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)){a=a.substr(1,a.length-2);a=e.stylize(a,"name")}else{a=a.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'");a=e.stylize(a,"string")}}return a+": "+s}function b(e,t,i){var n=0;var r=e.reduce(function(e,t){n++;if(t.indexOf("\n")>=0)n++;return e+t.replace(/\u001b\[\d\d?m/g,"").length+1},0);if(r>60){return i[0]+(t===""?"":t+"\n ")+" "+e.join(",\n  ")+" "+i[1]}return i[0]+t+" "+e.join(", ")+" "+i[1]}j.types=N("./support/types");function _(e){return Array.isArray(e)}j.isArray=_;function a(e){return typeof e==="boolean"}j.isBoolean=a;function u(e){return e===null}j.isNull=u;function c(e){return e==null}j.isNullOrUndefined=c;function d(e){return typeof e==="number"}j.isNumber=d;function w(e){return typeof e==="string"}j.isString=w;function h(e){return typeof e==="symbol"}j.isSymbol=h;function E(e){return e===void 0}j.isUndefined=E;function x(e){return T(e)&&A(e)==="[object RegExp]"}j.isRegExp=x;j.types.isRegExp=x;function T(e){return typeof e==="object"&&e!==null}j.isObject=T;function S(e){return T(e)&&A(e)==="[object Date]"}j.isDate=S;j.types.isDate=S;function k(e){return T(e)&&(A(e)==="[object Error]"||e instanceof Error)}j.isError=k;j.types.isNativeError=k;function R(e){return typeof e==="function"}j.isFunction=R;function C(e){return e===null||typeof e==="boolean"||typeof e==="number"||typeof e==="string"||typeof e==="symbol"||typeof e==="undefined"}j.isPrimitive=C;j.isBuffer=N("./support/isBuffer");function A(e){return Object.prototype.toString.call(e)}function O(e){return e<10?"0"+e.toString(10):e.toString(10)}var L=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function P(){var e=new Date;var t=[O(e.getHours()),O(e.getMinutes()),O(e.getSeconds())].join(":");return[e.getDate(),L[e.getMonth()],t].join(" ")}j.log=function(){console.log("%s - %s",P(),j.format.apply(j,arguments))};j.inherits=N("inherits");j._extend=function(e,t){if(!t||!T(t))return e;var i=Object.keys(t);var n=i.length;while(n--){e[i[n]]=t[i[n]]}return e};function I(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var D=typeof Symbol!=="undefined"?Symbol("util.promisify.custom"):undefined;j.promisify=function e(o){if(typeof o!=="function")throw new TypeError('The "original" argument must be of type Function');if(D&&o[D]){var t=o[D];if(typeof t!=="function"){throw new TypeError('The "util.promisify.custom" argument must be of type Function')}Object.defineProperty(t,D,{"value":t,"enumerable":false,"writable":false,"configurable":true});return t}function t(){var i,n;var e=new Promise(function(e,t){i=e;n=t});var t=[];for(var r=0;r<arguments.length;r++){t.push(arguments[r])}t.push(function(e,t){if(e){n(e)}else{i(t)}});try{o.apply(this,t)}catch(e){n(e)}return e}Object.setPrototypeOf(t,Object.getPrototypeOf(o));if(D)Object.defineProperty(t,D,{"value":t,"enumerable":false,"writable":false,"configurable":true});return Object.defineProperties(t,i(o))};j.promisify.custom=D;function M(e,t){if(!e){var i=new Error("Promise was rejected with a falsy value");i.reason=e;e=i}return t(e)}function B(o){if(typeof o!=="function"){throw new TypeError('The "original" argument must be of type Function')}function e(){var e=[];for(var t=0;t<arguments.length;t++){e.push(arguments[t])}var i=e.pop();if(typeof i!=="function"){throw new TypeError("The last argument must be of type Function")}var n=this;var r=function(){return i.apply(n,arguments)};o.apply(this,e).then(function(e){F.nextTick(r.bind(null,null,e))},function(e){F.nextTick(M.bind(null,e,r))})}Object.setPrototypeOf(e,Object.getPrototypeOf(o));Object.defineProperties(e,i(o));return e}j.callbackify=B}).call(this)}).call(this,N("_process"))},{"./support/isBuffer":19,"./support/types":20,"_process":18,"inherits":13}],"22":[function(p,g,e){(function(f){(function(){"use strict";var t=p("for-each");var e=p("available-typed-arrays");var i=p("call-bind/callBound");var n=i("Object.prototype.toString");var r=p("has-tostringtag/shams")();var o=typeof globalThis==="undefined"?f:globalThis;var a=e();var s=i("String.prototype.slice");var l={};var u=p("es-abstract/helpers/getOwnPropertyDescriptor");var c=Object.getPrototypeOf;if(r&&u&&c){t(a,function(e){if(typeof o[e]==="function"){var t=new o[e];if(Symbol.toStringTag in t){var i=c(t);var n=u(i,Symbol.toStringTag);if(!n){var r=c(i);n=u(r,Symbol.toStringTag)}l[e]=n.get}}})}var d=function e(n){var r=false;t(l,function(e,t){if(!r){try{var i=e.call(n);if(i===t){r=i}}catch(e){}}});return r};var h=p("is-typed-array");g.exports=function e(t){if(!h(t)){return false}if(!r||!(Symbol.toStringTag in t)){return s(n(t),8,-1)}return d(t)}}).call(this)}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"available-typed-arrays":1,"call-bind/callBound":2,"es-abstract/helpers/getOwnPropertyDescriptor":4,"for-each":5,"has-tostringtag/shams":11,"is-typed-array":17}],"23":[function(e,t,i){var n=window.cm=window.cm||{};var r=n.lib=window.cm.lib||{};n.logger=e("logger");_.extend(r,{"Observer":e("cm/observer"),"Media":{"Video":e("cm/media/video"),"Audio":e("cm/media/audio")},"PersistentStorage":e("cm/storage")})},{"cm/media/audio":28,"cm/media/video":29,"cm/observer":30,"cm/storage":31,"logger":33}],"24":[function(t,e,i){(function(e){e.UserAgentParser=t("user-agent/browser")})(window||{})},{"user-agent/browser":35}],"25":[function(e,t,i){function n(e){this._data=e||{}}n.prototype={"setItem":function(e,t){this._data[e]=t},"getItem":function(e){var t=this._data[e];return!_.isUndefined(t)?t:null},"removeItem":function(e){delete this._data[e]},"clear":function(){Object.keys(this._data).forEach(function(e){this.removeItem(e)}.bind(this))}};n.prototype.constructor=n;t.exports=n},{}],"26":[function(e,t,i){var n=function(){};_.extend(n.prototype,Backbone.Events);n.prototype.constructor=n;n.extend=Backbone.View.extend;t.exports=n},{}],"27":[function(e,t,i){var n=e("./event");var o=e("./observer");var r=n.extend({"constructor":function(e,t){this._element=e;this._options=_.defaults(t||{},{"loop":false,"autoplay":false});this._sources=[];this._isPlaying=false;this.setOptions();this._setPromiseLoaded();this._bindElementEvents();this._shimElementPlay()},"getElement":function(){return this._element},"setOptions":function(e){var i=this.getElement();_.chain(this._options).extend(e||{}).each(function(e,t){i[t]=e})},"play":function(){this.trigger("media:play");return this._play().then(function(){this.trigger("media:playing")}.bind(this))},"stop":function(){this.trigger("media:stop");return this._stop().then(function(){this.trigger("media:stopped")}.bind(this))},"release":function(){this.trigger("media:release");return this._release().then(function(){this.trigger("media:released")}.bind(this))},"mute":function(e){this.getElement().muted=Boolean(e);this.trigger("media:mute",e)},"attachStream":function(e){this._setPromiseLoaded();var t=this.getElement();if("srcObject"in t){t.srcObject=e}else if("mozSrcObject"in t){t.mozSrcObject=e}else if("src"in t){t.src=URL.createObjectURL(e)}else{throw Error("Failed to attach a stream to the media.")}this.trigger("media:attachStream",e)},"setSources":function(e){_.each(e,this.setSource,this)},"setSource":function(e){this._setPromiseLoaded();var t=document.createElement("source");t.src=e;this.getElement().appendChild(t);this._sources.push(t);this.trigger("media:setSource",e)},"hasSource":function(){return this._sources.length>0||!!this.getElement().src||!!this.getElement().srcObject||!!this.getElement().mozSrcObject},"isPlaying":function(){return this._isPlaying},"getDuration":function(){var e=this.getElement();return!_.isNaN(e.duration)?Math.round(e.duration*1e3):null},"getPromiseLoaded":function(){return this._promiseLoaded},"getPromisePlaying":function(){return this._getPromiseForEvent("playing")},"getPromiseStopped":function(){return this._getPromiseForEvent("stop")},"getPromiseEmptied":function(){return this._getPromiseForEvent("emptied")},"_play":function(){var e=this;var t=this.getElement();if(!this.hasSource()){return Promise.reject(new Error("Failed to play, no media source found."))}if(this.isPlaying()){return Promise.resolve(this)}var i=e.getPromisePlaying();t.play();return this.getPromiseLoaded().then(function(){t.play()}).then(function(){return i})},"_stop":function(){if(!this.isPlaying()){return Promise.resolve()}var e=this.getPromiseStopped();var t=this.getElement();t.pause();if(t.seekable.length>0){t.currentTime=0}return e},"_release":function(){if(!this.hasSource()){return Promise.resolve()}var e=this.getPromiseEmptied();var t=this._sources;var i=this.getElement();return this.stop().then(function(){_.each(t,function(e){i.removeChild(e)});t.splice(0,t.length);i.removeAttribute("src");i.removeAttribute("srcObject");i.removeAttribute("mozSrcObject");i.load();return e})},"_setPromiseLoaded":function(){this._promiseLoaded=this._getPromiseForEvent("canplay")},"_getPromiseForEvent":function(i){var n=this;var r=new o;var e=new Promise(function(e,t){r.listenTo(n,i,e);r.listenTo(n,"error",t)});return e.finally(function(){r.stopListening()})},"_bindElementEvents":function(){var i=this;this._element.addEventListener("playing",function(){i._isPlaying=true;i.trigger("playing")});this._element.addEventListener("pause",function(){i._isPlaying=false;i.trigger("stop")});this._element.addEventListener("emptied",function(){i._isPlaying=false;i._setPromiseLoaded();i.trigger("emptied")});this._element.addEventListener("canplay",function(){i.trigger("canplay")});this._element.addEventListener("error",function(){var e=this.error?this.error.code:null;var t=null;switch(e){case MediaError.MEDIA_ERR_ABORTED:t=new Error("The fetching process for the media resource was aborted by the user agent at the user's request.");break;case MediaError.MEDIA_ERR_NETWORK:t=new Error("A network error of some description caused the user agent to stop fetching the media resource, after the resource was established to be usable.");break;case MediaError.MEDIA_ERR_DECODE:t=new Error("An error of some description occurred while decoding the media resource, after the resource was established to be usable.");break;case MediaError.MEDIA_ERR_SRC_NOT_SUPPORTED:t=new Error("The media resource indicated by the src attribute was not suitable.");break;default:t=new Error("Unexpected media error.")}i.trigger("error",t)});this.on("all",function(){var e=_.toArray(arguments);if(/^media\:/.test(e[0])){this.trigger.apply(this,["media"].concat(e))}})},"_shimElementPlay":function(){var e=this.getElement();var t=e.play;e.play=function(){(t.call(this)||Promise.resolve()).catch(function(e){console.warn(e)})}}});t.exports=r},{"./event":26,"./observer":30}],"28":[function(e,t,i){var n=e("../media");var r=n.extend({"constructor":function(e,t){e=e||document.createElement("audio");n.call(this,e,t)}});t.exports=r},{"../media":27}],"29":[function(e,t,i){var n=e("../media");var r=n.extend({"constructor":function e(t,i){t=t||document.createElement("video");n.call(this,t,i)}});t.exports=r},{"../media":27}],"30":[function(e,t,i){var n=e("./event");var r=n.extend({});t.exports=r},{"./event":26}],"31":[function(e,t,i){var n=e("./event");var r=e("./adapter/memory");var o=n.extend({"constructor":function(e,t,i){this._name=e;this._adapter=null;this._logger=i&&i.warn?i:console;if(this._isSupported(t)){this._adapter=t}else{this._adapter=new r}},"get":function(e){var t=this.read();if(e){return t[e]}else{return t}},"set":function(e,t){var i=this.read();if(!_.isUndefined(t)){i[e]=t}else{_.extend(i,e)}this.write(i)},"has":function(e){var t=this.read();return _.contains(_.keys(t),e)},"remove":function(e){var t=this.read();delete t[e];this.write(t)},"clear":function(){this.write()},"delete":function(){this.getAdapter().removeItem(this.getName())},"read":function(){var e=null;try{var t=this.getAdapter().getItem(this.getName());e=!_.isNull(t)?JSON.parse(t):{}}catch(e){}if(!_.isObject(e)||_.isArray(e)){this.getLogger().warn("Invalid value stored in `%s`, reset as an empty Object",this.getName(),e);e={};this.write(e)}return e},"write":function(e){e=!_.isUndefined(e)?e:{};this.getAdapter().setItem(this.getName(),JSON.stringify(e))},"getName":function(){return this._name},"getAdapter":function(){return this._adapter},"getLogger":function(){return this._logger},"_isSupported":function(e){try{var t="PersistentStorage._checkAdapterSupport:"+Math.random();var i="value-"+Math.random();e.setItem(t,i);if(e.getItem(t)!==i){throw new Error("Failed to retrieve data from storage adapter")}e.removeItem(t);return true}catch(e){this.getLogger().warn("Storage adapter not supported",e);return false}}});t.exports=o},{"./adapter/memory":25,"./event":26}],"32":[function(e,t,i){var o=e("util");var n=function(e){this._records=[];this._options=_.defaults(e||{},{"retention":300,"recordMaxSize":200,"jsonMaxSize":50,"format":"[{date} {level}] {message}"})};n.prototype={"getFormattedRecords":function(){return _.map(this.getRecords(),function(e){return this._recordFormatter(e)},this).join("\n")},"getRecords":function(){return this._records},"addRecord":function(e,t){var i={"date":this._getDate(),"messages":e,"context":t};this._records.push(i);this._cleanupRecords()},"flushRecords":function(){this._records=[]},"_cleanupRecords":function(){var e=this._options.retention;var t=this._options.recordMaxSize;if(e>0){var i=this._getDate()-e*1e3;this._records=_.filter(this._records,function(e){return e.date>i})}if(t>0&&this._records.length>t){this._records=this._records.slice(-t)}},"_recordFormatter":function(e){var n=this._options.format;_.each({"date":e.date.toISOString(),"level":e.context.level.name,"message":this._messageFormatter(e.messages)},function(e,t){var i=new RegExp("{"+t+"}","g");n=n.replace(i,e)});return n},"_messageFormatter":function(e){var t=_.toArray(e);var i,n,r;for(i=0;i<t.length;i++){r=n=t[i];if(_.isString(n)&&0===i){n=n.replace(/%[idfoO]/g,"%s")}else if(n instanceof RegExp){n=n.toString()}else if(n instanceof Date){n=n.toISOString()}else if(_.isObject(n)&&n._class){n="["+n._class+(n._id&&n._id.id?":"+n._id.id:"")+"]"}else if(_.isObject(n)&&/^\[object ((?!Object).)+\]$/.test(n.toString())){n=n.toString()}try{if(_.isString(n)||_.isNumber(n)){r=n}else{r=JSON.stringify(n);if(r.length>this._options.jsonMaxSize){r=r.slice(0,this._options.jsonMaxSize-4)+"…"+r[r.length-1]}}}catch(e){if(_.isUndefined(n)){r="undefined"}else if(_.isNull(n)){r="null"}else{r="[unknown]"}}t[i]=r}return o.format.apply(o.format,t)},"_getDate":function(){return new Date}};t.exports=n},{"util":21}],"33":[function(e,t,i){var n=e("./vendor/src/logger");var r=e("./handlers/recorder");var o=n.createDefaultHandler();var a=new r;var s={"dev":false};n.getFormattedRecords=function(){return a.getFormattedRecords()};n.getRecords=function(){return a.getRecords()};n.addRecordError=function(e){a.addRecord([e.message],{"level":n.ERROR})};n.setHandler(function(e,t){var i=t.level.value<n.WARN.value;if(!i||s.dev&&i){o(e,t)}a.addRecord(e,t)});n.configure=function(e){_.extend(s,e)};n.setLevel(n.DEBUG);t.exports=n},{"./handlers/recorder":32,"./vendor/src/logger":34}],"34":[function(e,u,t){(function(e){"use strict";var s={};s.VERSION="1.3.0";var i;var n={};var t=function(e,t){return function(){return t.apply(e,arguments)}};var r=function(){var e=arguments,t=e[0],i,n;for(n=1;n<e.length;n++){for(i in e[n]){if(!(i in t)&&e[n].hasOwnProperty(i)){t[i]=e[n][i]}}}return t};var o=function(e,t){return{"value":e,"name":t}};s.DEBUG=o(1,"DEBUG");s.INFO=o(2,"INFO");s.TIME=o(3,"TIME");s.WARN=o(4,"WARN");s.ERROR=o(8,"ERROR");s.OFF=o(99,"OFF");var a=function(e){this.context=e;this.setLevel(e.filterLevel);this.log=this.info};a.prototype={"setLevel":function(e){if(e&&"value"in e){this.context.filterLevel=e}},"enabledFor":function(e){var t=this.context.filterLevel;return e.value>=t.value},"debug":function(){this.invoke(s.DEBUG,arguments)},"info":function(){this.invoke(s.INFO,arguments)},"warn":function(){this.invoke(s.WARN,arguments)},"error":function(){this.invoke(s.ERROR,arguments)},"time":function(e){if(typeof e==="string"&&e.length>0){this.invoke(s.TIME,[e,"start"])}},"timeEnd":function(e){if(typeof e==="string"&&e.length>0){this.invoke(s.TIME,[e,"end"])}},"invoke":function(e,t){if(i&&this.enabledFor(e)){i(t,r({"level":e},this.context))}}};var l=new a({"filterLevel":s.OFF});(function(){var e=s;e.enabledFor=t(l,l.enabledFor);e.debug=t(l,l.debug);e.time=t(l,l.time);e.timeEnd=t(l,l.timeEnd);e.info=t(l,l.info);e.warn=t(l,l.warn);e.error=t(l,l.error);e.log=e.info})();s.setHandler=function(e){i=e};s.setLevel=function(e){l.setLevel(e);for(var t in n){if(n.hasOwnProperty(t)){n[t].setLevel(e)}}};s.get=function(e){return n[e]||(n[e]=new a(r({"name":e},l.context)))};s.createDefaultHandler=function(r){r=r||{};r.formatter=r.formatter||function e(t,i){if(i.name){t.unshift("["+i.name+"]")}};var o={};var a=function(e,t){Function.prototype.apply.call(e,console,t)};if(typeof console==="undefined"){return function(){}}return function(e,t){e=Array.prototype.slice.call(e);var i=console.log;var n;if(t.level===s.TIME){n=(t.name?"["+t.name+"] ":"")+e[0];if(e[1]==="start"){if(console.time){console.time(n)}else{o[n]=(new Date).getTime()}}else{if(console.timeEnd){console.timeEnd(n)}else{a(i,[n+": "+((new Date).getTime()-o[n])+"ms"])}}}else{if(t.level===s.WARN&&console.warn){i=console.warn}else if(t.level===s.ERROR&&console.error){i=console.error}else if(t.level===s.INFO&&console.info){i=console.info}r.formatter(e,t);a(i,e)}}};s.useDefaults=function(e){s.setLevel(e&&e.defaultLevel||s.DEBUG);s.setHandler(s.createDefaultHandler(e))};if(typeof define==="function"&&define.amd){define(s)}else if(typeof u!=="undefined"&&u.exports){u.exports=s}else{s._prevLogger=e.Logger;s.noConflict=function(){e.Logger=s._prevLogger;return s};e.Logger=s}})(this)},{}],"35":[function(e,t,r){"use strict";var i=e("./vendor/lib/regexps");var s=i.os,l=s.length;var u=i.browser,c=u.length;var d=i.device,h=d.length;function f(e,t,i,n,r){this.family=e||"Other";this.major=t||"0";this.minor=i||"0";this.patch=n||"0";this.source=r||""}Object.defineProperty(f.prototype,"os",{"get":function e(){var t=this.source,i=l,n=s,r=0,o,a;for(;r<i;r++){if(a=n[r][0].exec(t)){o=n[r];if(o[1]){a[1]=o[1].replace("$1",a[1])}break}}return Object.defineProperty(this,"os",{"value":!o||!a?new p:new p(a[1],o[2]||a[2],o[3]||a[3],o[4]||a[4])}).os},"set":function e(t){if(!(t instanceof p)){return false}return Object.defineProperty(this,"os",{"value":t}).os}});Object.defineProperty(f.prototype,"device",{"get":function e(){var t=this.source,i=h,n=d,r=0,o,a;for(;r<i;r++){if(a=n[r][0].exec(t)){o=n[r];if(o[1]){a[1]=o[1].replace("$1",a[1])}break}}return Object.defineProperty(this,"device",{"value":!o||!a?new g:new g(a[1],o[2]||a[2],o[3]||a[3],o[4]||a[4])}).device},"set":function e(t){if(!(t instanceof g)){return false}return Object.defineProperty(this,"device",{"value":t}).device}});f.prototype.toAgent=function e(){var t=this.family,i=this.toVersion();if(i){t+=" "+i}return t};f.prototype.toString=function e(){var t=this.toAgent(),i=this.os!=="Other"?this.os:false;return t+(i?" / "+i:"")};f.prototype.toVersion=function e(){var t="";if(this.major){t+=this.major;if(this.minor){t+="."+this.minor;if(this.patch){t+=(isNaN(+this.patch)?" ":".")+this.patch}}}return t};f.prototype.toJSON=function e(){return{"family":this.family,"major":this.major,"minor":this.minor,"patch":this.patch,"device":this.device,"os":this.os}};function p(e,t,i,n){this.family=e||"Other";this.major=t||"";this.minor=i||"";this.patch=n||""}p.prototype.toString=function e(){var t=this.family,i=this.toVersion();if(i){t+=" "+i}return t};p.prototype.toVersion=function e(){var t="";if(this.major){t+=this.major;if(this.minor){t+="."+this.minor;if(this.patch){t+=(isNaN(+this.patch)?" ":".")+this.patch}}}return t};p.prototype.toJSON=function e(){return{"family":this.family,"major":this.major||undefined,"minor":this.minor||undefined,"patch":this.patch||undefined}};function g(e,t,i,n){this.family=e||"Other";this.major=t||"";this.minor=i||"";this.patch=n||""}g.prototype.toString=function e(){var t=this.family,i=this.toVersion();if(i){t+=" "+i}return t};g.prototype.toVersion=function e(){var t="";if(this.major){t+=this.major;if(this.minor){t+="."+this.minor;if(this.patch){t+=(isNaN(+this.patch)?" ":".")+this.patch}}}return t};g.prototype.toString=function e(){var t=this.family,i=this.toVersion();if(i){t+=" "+i}return t};g.prototype.toJSON=function e(){return{"family":this.family,"major":this.major||undefined,"minor":this.minor||undefined,"patch":this.patch||undefined}};r.Device=g;r.OperatingSystem=p;r.Agent=f;r.parse=function e(t,i){if(!t){return new f}var n=c,r=u,o=0,a,s;for(;o<n;o++){if(s=r[o][0].exec(t)){a=r[o];if(a[1]){s[1]=a[1].replace("$1",s[1])}if(!i){return new f(s[1],a[2]||s[2],a[3]||s[3],a[4]||s[4],t)}break}}if(!a||!s){return new f("","","","",t)}if(i&&~i.indexOf("Chrome/")&&~t.indexOf("chromeframe")){s[1]="Chrome Frame (IE "+s[1]+"."+s[2]+")";a=e(i);a[2]=a.major;a[3]=a.minor;a[4]=a.patch}return new f(s[1],a[2]||s[2],a[3]||s[3],a[4]||s[4],t)};r.is=function e(t){var i=(t||"").toLowerCase(),n={"chrome":false,"firefox":false,"ie":false,"mobile_safari":false,"mozilla":false,"opera":false,"safari":false,"webkit":false,"version":(i.match(r.is.versionRE)||[0,"0"])[1]};if(~i.indexOf("webkit")){n.webkit=true;if(~i.indexOf("chrome")){n.chrome=true}else if(~i.indexOf("safari")){n.safari=true;if(~i.indexOf("mobile")&&~i.indexOf("apple")){n.mobile_safari=true}}}else if(~i.indexOf("opera")){n.opera=true}else if(~i.indexOf("mozilla")&&!~i.indexOf("compatible")){n.mozilla=true;if(~i.indexOf("firefox")){n.firefox=true}}else if(~i.indexOf("msie")){n.ie=true}return n};r.is.versionRE=/.+(?:rv|it|ra|ie)[\/: ]([\d.]+)/;r.fromJSON=function e(t){if(typeof t==="string"){t=JSON.parse(t)}var i=new f(t.family,t.major,t.minor,t.patch),n=t.os;if("device"in t){i.device=new g(t.device.family)}else{i.device=new g}if("os"in t&&n){if(typeof n==="string"){i.os=new p(n)}else{i.os=new p(n.family,n.major,n.minor,n.patch)}}return i}},{"./vendor/lib/regexps":36}],"36":[function(e,t,i){"use strict";var n;i.browser=Object.create(null);n=Object.create(null);n[0]=new RegExp("(Rival IQ, rivaliq.com)");n[1]="Rival IQ";n[2]=0;n[3]=0;n[4]=0;i.browser[0]=n;n=Object.create(null);n[0]=new RegExp("(CFNetwork)(?:/(\\d+)\\.(\\d+)\\.?(\\d+)?)?");n[1]="CFNetwork";n[2]=0;n[3]=0;n[4]=0;i.browser[1]=n;n=Object.create(null);n[0]=new RegExp("(Pingdom.com_bot_version_)(\\d+)\\.(\\d+)");n[1]="PingdomBot";n[2]=0;n[3]=0;n[4]=0;i.browser[2]=n;n=Object.create(null);n[0]=new RegExp("(facebookexternalhit)/(\\d+)\\.(\\d+)");n[1]="FacebookBot";n[2]=0;n[3]=0;n[4]=0;i.browser[3]=n;n=Object.create(null);n[0]=new RegExp("Google.*/\\+/web/snippet");n[1]="GooglePlusBot";n[2]=0;n[3]=0;n[4]=0;i.browser[4]=n;n=Object.create(null);n[0]=new RegExp("(Twitterbot)/(\\d+)\\.(\\d+)");n[1]="TwitterBot";n[2]=0;n[3]=0;n[4]=0;i.browser[5]=n;n=Object.create(null);n[0]=new RegExp("/((?:Ant-)?Nutch|[A-z]+[Bb]ot|[A-z]+[Ss]pider|Axtaris|fetchurl|Isara|ShopSalad|Tailsweep)[ \\-](\\d+)(?:\\.(\\d+)(?:\\.(\\d+))?)?");n[1]=0;n[2]=0;n[3]=0;n[4]=0;i.browser[6]=n;n=Object.create(null);n[0]=new RegExp("(008|Altresium|Argus|BaiduMobaider|BoardReader|DNSGroup|DataparkSearch|EDI|Goodzer|Grub|INGRID|Infohelfer|LinkedInBot|LOOQ|Nutch|PathDefender|Peew|PostPost|Steeler|Twitterbot|VSE|WebCrunch|WebZIP|Y!J-BR[A-Z]|YahooSeeker|envolk|sproose|wminer)/(\\d+)(?:\\.(\\d+)(?:\\.(\\d+))?)?");n[1]=0;n[2]=0;n[3]=0;n[4]=0;i.browser[7]=n;n=Object.create(null);n[0]=new RegExp("(MSIE) (\\d+)\\.(\\d+)([a-z]\\d?)?;.* MSIECrawler");n[1]="MSIECrawler";n[2]=0;n[3]=0;n[4]=0;i.browser[8]=n;n=Object.create(null);n[0]=new RegExp("(Google-HTTP-Java-Client|Apache-HttpClient|http%20client|Python-urllib|HttpMonitor|TLSProber|WinHTTP|JNLP)(?:[ /](\\d+)(?:\\.(\\d+)(?:\\.(\\d+))?)?)?");n[1]=0;n[2]=0;n[3]=0;n[4]=0;i.browser[9]=n;n=Object.create(null);n[0]=new RegExp("(1470\\.net crawler|50\\.nu|8bo Crawler Bot|Aboundex|Accoona-[A-z]+-Agent|AdsBot-Google(?:-[a-z]+)?|altavista|AppEngine-Google|archive.*?\\.org_bot|archiver|Ask Jeeves|[Bb]ai[Dd]u[Ss]pider(?:-[A-Za-z]+)*|bingbot|BingPreview|blitzbot|BlogBridge|BoardReader(?: [A-Za-z]+)*|boitho.com-dc|BotSeer|\\b\\w*favicon\\w*\\b|\\bYeti(?:-[a-z]+)?|Catchpoint bot|[Cc]harlotte|Checklinks|clumboot|Comodo HTTP\\(S\\) Crawler|Comodo-Webinspector-Crawler|ConveraCrawler|CRAWL-E|CrawlConvera|Daumoa(?:-feedfetcher)?|Feed Seeker Bot|findlinks|Flamingo_SearchEngine|FollowSite Bot|furlbot|Genieo|gigabot|GomezAgent|gonzo1|(?:[a-zA-Z]+-)?Googlebot(?:-[a-zA-Z]+)?|Google SketchUp|grub-client|gsa-crawler|heritrix|HiddenMarket|holmes|HooWWWer|htdig|ia_archiver|ICC-Crawler|Icarus6j|ichiro(?:/mobile)?|IconSurf|IlTrovatore(?:-Setaccio)?|InfuzApp|Innovazion Crawler|InternetArchive|IP2[a-z]+Bot|jbot\\b|KaloogaBot|Kraken|Kurzor|larbin|LEIA|LesnikBot|Linguee Bot|LinkAider|LinkedInBot|Lite Bot|Llaut|lycos|Mail\\.RU_Bot|masidani_bot|Mediapartners-Google|Microsoft .*? Bot|mogimogi|mozDex|MJ12bot|msnbot(?:-media *)?|msrbot|netresearch|Netvibes|NewsGator[^/]*|^NING|Nutch[^/]*|Nymesis|ObjectsSearch|Orbiter|OOZBOT|PagePeeker|PagesInventory|PaxleFramework|Peeplo Screenshot Bot|PlantyNet_WebRobot|Pompos|Read%20Later|Reaper|RedCarpet|Retreiver|Riddler|Rival IQ|scooter|Scrapy|Scrubby|searchsight|seekbot|semanticdiscovery|Simpy|SimplePie|SEOstats|SimpleRSS|SiteCon|Slurp|snappy|Speedy Spider|Squrl Java|TheUsefulbot|ThumbShotsBot|Thumbshots\\.ru|TwitterBot|URL2PNG|Vagabondo|VoilaBot|^vortex|Votay bot|^voyager|WASALive.Bot|Web-sniffer|WebThumb|WeSEE:[A-z]+|WhatWeb|WIRE|WordPress|Wotbox|www\\.almaden\\.ibm\\.com|Xenu(?:.s)? Link Sleuth|Xerka [A-z]+Bot|yacy(?:bot)?|Yahoo[a-z]*Seeker|Yahoo! Slurp|Yandex\\w+|YodaoBot(?:-[A-z]+)?|YottaaMonitor|Yowedo|^Zao|^Zao-Crawler|ZeBot_www\\.ze\\.bz|ZooShot|ZyBorg)(?:[ /]v?(\\d+)(?:\\.(\\d+)(?:\\.(\\d+))?)?)?");n[1]=0;n[2]=0;n[3]=0;n[4]=0;i.browser[10]=n;n=Object.create(null);n[0]=new RegExp("(?:\\/[A-Za-z0-9\\.]+)? *([A-Za-z0-9 \\-_\\!\\[\\]:]*(?:[Aa]rchiver|[Ii]ndexer|[Ss]craper|[Bb]ot|[Ss]pider|[Cc]rawl[a-z]*))/(\\d+)(?:\\.(\\d+)(?:\\.(\\d+))?)?");n[1]=0;n[2]=0;n[3]=0;n[4]=0;i.browser[11]=n;n=Object.create(null);n[0]=new RegExp("(?:\\/[A-Za-z0-9\\.]+)? *([A-Za-z0-9 _\\!\\[\\]:]*(?:[Aa]rchiver|[Ii]ndexer|[Ss]craper|[Bb]ot|[Ss]pider|[Cc]rawl[a-z]*)) (\\d+)(?:\\.(\\d+)(?:\\.(\\d+))?)?");n[1]=0;n[2]=0;n[3]=0;n[4]=0;i.browser[12]=n;n=Object.create(null);n[0]=new RegExp("((?:[A-z0-9]+|[A-z\\-]+ ?)?(?: the )?(?:[Ss][Pp][Ii][Dd][Ee][Rr]|[Ss]crape|[A-Za-z0-9-]*(?:[^C][^Uu])[Bb]ot|[Cc][Rr][Aa][Ww][Ll])[A-z0-9]*)(?:(?:[ /]| v)(\\d+)(?:\\.(\\d+)(?:\\.(\\d+))?)?)?");n[1]=0;n[2]=0;n[3]=0;n[4]=0;i.browser[13]=n;n=Object.create(null);n[0]=new RegExp("(HbbTV)/(\\d+)\\.(\\d+)\\.(\\d+) \\(");n[1]=0;n[2]=0;n[3]=0;n[4]=0;i.browser[14]=n;n=Object.create(null);n[0]=new RegExp("(Chimera|SeaMonkey|Camino)/(\\d+)\\.(\\d+)\\.?([ab]?\\d+[a-z]*)?");n[1]=0;n[2]=0;n[3]=0;n[4]=0;i.browser[15]=n;n=Object.create(null);n[0]=new RegExp("\\[FB.*;(FBAV)/(\\d+)(?:\\.(\\d+)(?:\\.(\\d)+)?)?");n[1]="Facebook";n[2]=0;n[3]=0;n[4]=0;i.browser[16]=n;n=Object.create(null);n[0]=new RegExp("\\[(Pinterest)/[^\\]]+\\]");n[1]=0;n[2]=0;n[3]=0;n[4]=0;i.browser[17]=n;n=Object.create(null);n[0]=new RegExp("(Pinterest)(?: for Android(?: Tablet)?)?/(\\d+)(?:\\.(\\d+)(?:\\.(\\d)+)?)?");n[1]=0;n[2]=0;n[3]=0;n[4]=0;i.browser[18]=n;n=Object.create(null);n[0]=new RegExp("(Pale[Mm]oon)/(\\d+)\\.(\\d+)\\.?(\\d+)?");n[1]="Pale Moon (Firefox Variant)";n[2]=0;n[3]=0;n[4]=0;i.browser[19]=n;n=Object.create(null);n[0]=new RegExp("(Fennec)/(\\d+)\\.(\\d+)\\.?([ab]?\\d+[a-z]*)");n[1]="Firefox Mobile";n[2]=0;n[3]=0;n[4]=0;i.browser[20]=n;n=Object.create(null);n[0]=new RegExp("(Fennec)/(\\d+)\\.(\\d+)(pre)");n[1]="Firefox Mobile";n[2]=0;n[3]=0;n[4]=0;i.browser[21]=n;n=Object.create(null);n[0]=new RegExp("(Fennec)/(\\d+)\\.(\\d+)");n[1]="Firefox Mobile";n[2]=0;n[3]=0;n[4]=0;i.browser[22]=n;n=Object.create(null);n[0]=new RegExp("(?:Mobile|Tablet);.*(Firefox)/(\\d+)\\.(\\d+)");n[1]="Firefox Mobile";n[2]=0;n[3]=0;n[4]=0;i.browser[23]=n;n=Object.create(null);n[0]=new RegExp("(Namoroka|Shiretoko|Minefield)/(\\d+)\\.(\\d+)\\.(\\d+(?:pre)?)");n[1]="Firefox ($1)";n[2]=0;n[3]=0;n[4]=0;i.browser[24]=n;n=Object.create(null);n[0]=new RegExp("(Firefox)/(\\d+)\\.(\\d+)(a\\d+[a-z]*)");n[1]="Firefox Alpha";n[2]=0;n[3]=0;n[4]=0;i.browser[25]=n;n=Object.create(null);n[0]=new RegExp("(Firefox)/(\\d+)\\.(\\d+)(b\\d+[a-z]*)");n[1]="Firefox Beta";n[2]=0;n[3]=0;n[4]=0;i.browser[26]=n;n=Object.create(null);n[0]=new RegExp("(Firefox)-(?:\\d+\\.\\d+)?/(\\d+)\\.(\\d+)(a\\d+[a-z]*)");n[1]="Firefox Alpha";n[2]=0;n[3]=0;n[4]=0;i.browser[27]=n;n=Object.create(null);n[0]=new RegExp("(Firefox)-(?:\\d+\\.\\d+)?/(\\d+)\\.(\\d+)(b\\d+[a-z]*)");n[1]="Firefox Beta";n[2]=0;n[3]=0;n[4]=0;i.browser[28]=n;n=Object.create(null);n[0]=new RegExp("(Namoroka|Shiretoko|Minefield)/(\\d+)\\.(\\d+)([ab]\\d+[a-z]*)?");n[1]="Firefox ($1)";n[2]=0;n[3]=0;n[4]=0;i.browser[29]=n;n=Object.create(null);n[0]=new RegExp("(Firefox).*Tablet browser (\\d+)\\.(\\d+)\\.(\\d+)");n[1]="MicroB";n[2]=0;n[3]=0;n[4]=0;i.browser[30]=n;n=Object.create(null);n[0]=new RegExp("(MozillaDeveloperPreview)/(\\d+)\\.(\\d+)([ab]\\d+[a-z]*)?");n[1]=0;n[2]=0;n[3]=0;n[4]=0;i.browser[31]=n;n=Object.create(null);n[0]=new RegExp("(FxiOS)/(\\d+)\\.(\\d+)(\\.(\\d+))?(\\.(\\d+))?");n[1]="Firefox iOS";n[2]=0;n[3]=0;n[4]=0;i.browser[32]=n;n=Object.create(null);n[0]=new RegExp("(Flock)/(\\d+)\\.(\\d+)(b\\d+?)");n[1]=0;n[2]=0;n[3]=0;n[4]=0;i.browser[33]=n;n=Object.create(null);n[0]=new RegExp("(RockMelt)/(\\d+)\\.(\\d+)\\.(\\d+)");n[1]=0;n[2]=0;n[3]=0;n[4]=0;i.browser[34]=n;n=Object.create(null);n[0]=new RegExp("(Navigator)/(\\d+)\\.(\\d+)\\.(\\d+)");n[1]="Netscape";n[2]=0;n[3]=0;n[4]=0;i.browser[35]=n;n=Object.create(null);n[0]=new RegExp("(Navigator)/(\\d+)\\.(\\d+)([ab]\\d+)");n[1]="Netscape";n[2]=0;n[3]=0;n[4]=0;i.browser[36]=n;n=Object.create(null);n[0]=new RegExp("(Netscape6)/(\\d+)\\.(\\d+)\\.?([ab]?\\d+)?");n[1]="Netscape";n[2]=0;n[3]=0;n[4]=0;i.browser[37]=n;n=Object.create(null);n[0]=new RegExp("(MyIBrow)/(\\d+)\\.(\\d+)");n[1]="My Internet Browser";n[2]=0;n[3]=0;n[4]=0;i.browser[38]=n;n=Object.create(null);n[0]=new RegExp("(UC ?Browser|UCWEB|U3)[ /]?(\\d+)\\.(\\d+)\\.(\\d+)");n[1]="UC Browser";n[2]=0;n[3]=0;n[4]=0;i.browser[39]=n;n=Object.create(null);n[0]=new RegExp("(Opera Tablet).*Version/(\\d+)\\.(\\d+)(?:\\.(\\d+))?");n[1]=0;n[2]=0;n[3]=0;n[4]=0;i.browser[40]=n;n=Object.create(null);n[0]=new RegExp("(Opera Mini)(?:/att)?/?(\\d+)?(?:\\.(\\d+))?(?:\\.(\\d+))?");n[1]=0;n[2]=0;n[3]=0;n[4]=0;i.browser[41]=n;n=Object.create(null);n[0]=new RegExp("(Opera)/.+Opera Mobi.+Version/(\\d+)\\.(\\d+)");n[1]="Opera Mobile";n[2]=0;n[3]=0;n[4]=0;i.browser[42]=n;n=Object.create(null);n[0]=new RegExp("(Opera)/(\\d+)\\.(\\d+).+Opera Mobi");n[1]="Opera Mobile";n[2]=0;n[3]=0;n[4]=0;i.browser[43]=n;n=Object.create(null);n[0]=new RegExp("Opera Mobi.+(Opera)(?:/|\\s+)(\\d+)\\.(\\d+)");n[1]="Opera Mobile";n[2]=0;n[3]=0;n[4]=0;i.browser[44]=n;n=Object.create(null);n[0]=new RegExp("Opera Mobi");n[1]="Opera Mobile";n[2]=0;n[3]=0;n[4]=0;i.browser[45]=n;n=Object.create(null);n[0]=new RegExp("(Opera)/9.80.*Version/(\\d+)\\.(\\d+)(?:\\.(\\d+))?");n[1]=0;n[2]=0;n[3]=0;n[4]=0;i.browser[46]=n;n=Object.create(null);n[0]=new RegExp("(?:Mobile Safari).*(OPR)/(\\d+)\\.(\\d+)\\.(\\d+)");n[1]="Opera Mobile";n[2]=0;n[3]=0;n[4]=0;i.browser[47]=n;n=Object.create(null);n[0]=new RegExp("(?:Chrome).*(OPR)/(\\d+)\\.(\\d+)\\.(\\d+)");n[1]="Opera";n[2]=0;n[3]=0;n[4]=0;i.browser[48]=n;n=Object.create(null);n[0]=new RegExp("(Coast)/(\\d+).(\\d+).(\\d+)");n[1]="Opera Coast";n[2]=0;n[3]=0;n[4]=0;i.browser[49]=n;n=Object.create(null);n[0]=new RegExp("(OPiOS)/(\\d+).(\\d+).(\\d+)");n[1]="Opera Mini";n[2]=0;n[3]=0;n[4]=0;i.browser[50]=n;n=Object.create(null);n[0]=new RegExp("(hpw|web)OS/(\\d+)\\.(\\d+)(?:\\.(\\d+))?");n[1]="webOS Browser";n[2]=0;n[3]=0;n[4]=0;i.browser[51]=n;n=Object.create(null);n[0]=new RegExp("(luakit)");n[1]="LuaKit";n[2]=0;n[3]=0;n[4]=0;i.browser[52]=n;n=Object.create(null);n[0]=new RegExp("(Snowshoe)/(\\d+)\\.(\\d+).(\\d+)");n[1]=0;n[2]=0;n[3]=0;n[4]=0;i.browser[53]=n;n=Object.create(null);n[0]=new RegExp("(Lightning)/(\\d+)\\.(\\d+)\\.?((?:[ab]?\\d+[a-z]*)|(?:\\d*))");n[1]=0;n[2]=0;n[3]=0;n[4]=0;i.browser[54]=n;n=Object.create(null);n[0]=new RegExp("(Firefox)/(\\d+)\\.(\\d+)\\.(\\d+(?:pre)?) \\(Swiftfox\\)");n[1]="Swiftfox";n[2]=0;n[3]=0;n[4]=0;i.browser[55]=n;n=Object.create(null);n[0]=new RegExp("(Firefox)/(\\d+)\\.(\\d+)([ab]\\d+[a-z]*)? \\(Swiftfox\\)");n[1]="Swiftfox";n[2]=0;n[3]=0;n[4]=0;i.browser[56]=n;n=Object.create(null);n[0]=new RegExp("(rekonq)/(\\d+)\\.(\\d+)\\.?(\\d+)? Safari");n[1]="Rekonq";n[2]=0;n[3]=0;n[4]=0;i.browser[57]=n;n=Object.create(null);n[0]=new RegExp("rekonq");n[1]="Rekonq";n[2]=0;n[3]=0;n[4]=0;i.browser[58]=n;n=Object.create(null);n[0]=new RegExp("(conkeror|Conkeror)/(\\d+)\\.(\\d+)\\.?(\\d+)?");n[1]="Conkeror";n[2]=0;n[3]=0;n[4]=0;i.browser[59]=n;n=Object.create(null);n[0]=new RegExp("(konqueror)/(\\d+)\\.(\\d+)\\.(\\d+)");n[1]="Konqueror";n[2]=0;n[3]=0;n[4]=0;i.browser[60]=n;n=Object.create(null);n[0]=new RegExp("(WeTab)-Browser");n[1]=0;n[2]=0;n[3]=0;n[4]=0;i.browser[61]=n;n=Object.create(null);n[0]=new RegExp("(Comodo_Dragon)/(\\d+)\\.(\\d+)\\.(\\d+)");n[1]="Comodo Dragon";n[2]=0;n[3]=0;n[4]=0;i.browser[62]=n;n=Object.create(null);n[0]=new RegExp("(Symphony) (\\d+).(\\d+)");n[1]=0;n[2]=0;n[3]=0;n[4]=0;i.browser[63]=n;n=Object.create(null);n[0]=new RegExp("(Minimo)");n[1]=0;n[2]=0;n[3]=0;n[4]=0;i.browser[64]=n;n=Object.create(null);n[0]=new RegExp("PLAYSTATION 3.+WebKit");n[1]="NetFront NX";n[2]=0;n[3]=0;n[4]=0;i.browser[65]=n;n=Object.create(null);n[0]=new RegExp("PLAYSTATION 3");n[1]="NetFront";n[2]=0;n[3]=0;n[4]=0;i.browser[66]=n;n=Object.create(null);n[0]=new RegExp("(PlayStation Portable)");n[1]="NetFront";n[2]=0;n[3]=0;n[4]=0;i.browser[67]=n;n=Object.create(null);n[0]=new RegExp("(PlayStation Vita)");n[1]="NetFront NX";n[2]=0;n[3]=0;n[4]=0;i.browser[68]=n;n=Object.create(null);n[0]=new RegExp("AppleWebKit.+ (NX)/(\\d+)\\.(\\d+)\\.(\\d+)");n[1]="NetFront NX";n[2]=0;n[3]=0;n[4]=0;i.browser[69]=n;n=Object.create(null);n[0]=new RegExp("(Nintendo 3DS)");n[1]="NetFront NX";n[2]=0;n[3]=0;n[4]=0;i.browser[70]=n;n=Object.create(null);n[0]=new RegExp("(Silk)/(\\d+)\\.(\\d+)(?:\\.([0-9\\-]+))?");n[1]="Amazon Silk";n[2]=0;n[3]=0;n[4]=0;i.browser[71]=n;n=Object.create(null);n[0]=new RegExp("(Puffin)/(\\d+)\\.(\\d+)(?:\\.(\\d+))?");n[1]=0;n[2]=0;n[3]=0;n[4]=0;i.browser[72]=n;n=Object.create(null);n[0]=new RegExp("Windows Phone .*(Edge)/(\\d+)\\.(\\d+)");n[1]="Edge Mobile";n[2]=0;n[3]=0;n[4]=0;i.browser[73]=n;n=Object.create(null);n[0]=new RegExp("(SamsungBrowser)/(\\d+)\\.(\\d+)");n[1]="Samsung Internet";n[2]=0;n[3]=0;n[4]=0;i.browser[74]=n;n=Object.create(null);n[0]=new RegExp("(CrMo)/(\\d+)\\.(\\d+)\\.(\\d+)\\.(\\d+)");n[1]="Chrome Mobile";n[2]=0;n[3]=0;n[4]=0;i.browser[75]=n;n=Object.create(null);n[0]=new RegExp("(CriOS)/(\\d+)\\.(\\d+)\\.(\\d+)\\.(\\d+)");n[1]="Chrome Mobile iOS";n[2]=0;n[3]=0;n[4]=0;i.browser[76]=n;n=Object.create(null);n[0]=new RegExp("(Chrome)/(\\d+)\\.(\\d+)\\.(\\d+)\\.(\\d+) Mobile(?:[ /]|$)");n[1]="Chrome Mobile";n[2]=0;n[3]=0;n[4]=0;i.browser[77]=n;n=Object.create(null);n[0]=new RegExp(" Mobile .*(Chrome)/(\\d+)\\.(\\d+)\\.(\\d+)\\.(\\d+)");n[1]="Chrome Mobile";n[2]=0;n[3]=0;n[4]=0;i.browser[78]=n;n=Object.create(null);n[0]=new RegExp("(chromeframe)/(\\d+)\\.(\\d+)\\.(\\d+)");n[1]="Chrome Frame";n[2]=0;n[3]=0;n[4]=0;i.browser[79]=n;n=Object.create(null);n[0]=new RegExp("(SLP Browser)/(\\d+)\\.(\\d+)");n[1]="Tizen Browser";n[2]=0;n[3]=0;n[4]=0;i.browser[80]=n;n=Object.create(null);n[0]=new RegExp("(SE 2\\.X) MetaSr (\\d+)\\.(\\d+)");n[1]="Sogou Explorer";n[2]=0;n[3]=0;n[4]=0;i.browser[81]=n;n=Object.create(null);n[0]=new RegExp("(baidubrowser)[/\\s](\\d+)");n[1]="Baidu Browser";n[2]=0;n[3]=0;n[4]=0;i.browser[82]=n;n=Object.create(null);n[0]=new RegExp("(FlyFlow)/(\\d+)\\.(\\d+)");n[1]="Baidu Explorer";n[2]=0;n[3]=0;n[4]=0;i.browser[83]=n;n=Object.create(null);n[0]=new RegExp("(MQQBrowser/Mini)(?:(\\d+)(?:\\.(\\d+)(?:\\.(\\d+))?)?)?");n[1]="QQ Browser Mini";n[2]=0;n[3]=0;n[4]=0;i.browser[84]=n;n=Object.create(null);n[0]=new RegExp("(MQQBrowser)(?:/(\\d+)(?:\\.(\\d+)(?:\\.(\\d+))?)?)?");n[1]="QQ Browser Mobile";n[2]=0;n[3]=0;n[4]=0;i.browser[85]=n;n=Object.create(null);n[0]=new RegExp("(QQBrowser)(?:/(\\d+)(?:\\.(\\d+)\\.(\\d+)(?:\\.(\\d+))?)?)?");n[1]="QQ Browser";n[2]=0;n[3]=0;n[4]=0;i.browser[86]=n;n=Object.create(null);n[0]=new RegExp("(Rackspace Monitoring)/(\\d+)\\.(\\d+)");n[1]="RackspaceBot";n[2]=0;n[3]=0;n[4]=0;i.browser[87]=n;n=Object.create(null);n[0]=new RegExp("(PyAMF)/(\\d+)\\.(\\d+)\\.(\\d+)");n[1]=0;n[2]=0;n[3]=0;n[4]=0;i.browser[88]=n;n=Object.create(null);n[0]=new RegExp("(YaBrowser)/(\\d+)\\.(\\d+)\\.(\\d+)");n[1]="Yandex Browser";n[2]=0;n[3]=0;n[4]=0;i.browser[89]=n;n=Object.create(null);n[0]=new RegExp("(Chrome)/(\\d+)\\.(\\d+)\\.(\\d+).* MRCHROME");n[1]="Mail.ru Chromium Browser";n[2]=0;n[3]=0;n[4]=0;i.browser[90]=n;n=Object.create(null);n[0]=new RegExp("(AOL) (\\d+)\\.(\\d+); AOLBuild (\\d+)");n[1]=0;n[2]=0;n[3]=0;n[4]=0;i.browser[91]=n;n=Object.create(null);n[0]=new RegExp("\\b(MobileIron|Crosswalk|AdobeAIR|FireWeb|Jasmine|ANTGalio|Midori|Fresco|Lobo|PaleMoon|Maxthon|Lynx|OmniWeb|Dillo|Camino|Demeter|Fluid|Fennec|Epiphany|Shiira|Sunrise|Spotify|Flock|Netscape|Lunascape|WebPilot|NetFront|Netfront|Konqueror|SeaMonkey|Kazehakase|Vienna|Iceape|Iceweasel|IceWeasel|Iron|K-Meleon|Sleipnir|Galeon|GranParadiso|Opera Mini|iCab|NetNewsWire|ThunderBrowse|Iris|UP\\.Browser|Bunjalloo|Google Earth|Raven for Mac|Openwave)/(\\d+)\\.(\\d+)\\.(\\d+)");n[1]=0;n[2]=0;n[3]=0;n[4]=0;i.browser[92]=n;n=Object.create(null);n[0]=new RegExp("Microsoft Office Outlook 12\\.\\d+\\.\\d+|MSOffice 12");n[1]="Outlook";n[2]="2007";n[3]=0;n[4]=0;i.browser[93]=n;n=Object.create(null);n[0]=new RegExp("Microsoft Outlook 14\\.\\d+\\.\\d+|MSOffice 14");n[1]="Outlook";n[2]="2010";n[3]=0;n[4]=0;i.browser[94]=n;n=Object.create(null);n[0]=new RegExp("Microsoft Outlook 15\\.\\d+\\.\\d+");n[1]="Outlook";n[2]="2013";n[3]=0;n[4]=0;i.browser[95]=n;n=Object.create(null);n[0]=new RegExp("Microsoft Outlook (?:Mail )?16\\.\\d+\\.\\d+");n[1]="Outlook";n[2]="2016";n[3]=0;n[4]=0;i.browser[96]=n;n=Object.create(null);n[0]=new RegExp("Outlook-Express\\/7\\.0.*");n[1]="Windows Live Mail";n[2]=0;n[3]=0;n[4]=0;i.browser[97]=n;n=Object.create(null);n[0]=new RegExp("(Airmail) (\\d+)\\.(\\d+)(?:\\.(\\d+))?");n[1]=0;n[2]=0;n[3]=0;n[4]=0;i.browser[98]=n;n=Object.create(null);n[0]=new RegExp("(Thunderbird)/(\\d+)\\.(\\d+)(?:\\.(\\d+(?:pre)?))?");n[1]="Thunderbird";n[2]=0;n[3]=0;n[4]=0;i.browser[99]=n;n=Object.create(null);n[0]=new RegExp("(Vivaldi)/(\\d+)\\.(\\d+)\\.(\\d+)");n[1]=0;n[2]=0;n[3]=0;n[4]=0;i.browser[100]=n;n=Object.create(null);n[0]=new RegExp("(Edge)/(\\d+)\\.(\\d+)");n[1]=0;n[2]=0;n[3]=0;n[4]=0;i.browser[101]=n;n=Object.create(null);n[0]=new RegExp("(brave)/(\\d+)\\.(\\d+)\\.(\\d+) Chrome");n[1]="Brave";n[2]=0;n[3]=0;n[4]=0;i.browser[102]=n;n=Object.create(null);n[0]=new RegExp("(Chromium|Chrome)/(\\d+)\\.(\\d+)\\.(\\d+)");n[1]=0;n[2]=0;n[3]=0;n[4]=0;i.browser[103]=n;n=Object.create(null);n[0]=new RegExp("\\b(Dolphin)(?: |HDCN/|/INT\\-)(\\d+)\\.(\\d+)\\.?(\\d+)?");n[1]=0;n[2]=0;n[3]=0;n[4]=0;i.browser[104]=n;n=Object.create(null);n[0]=new RegExp("(bingbot|Bolt|Jasmine|IceCat|Skyfire|Midori|Maxthon|Lynx|Arora|IBrowse|Dillo|Camino|Shiira|Fennec|Phoenix|Chrome|Flock|Netscape|Lunascape|Epiphany|WebPilot|Opera Mini|Opera|NetFront|Netfront|Konqueror|Googlebot|SeaMonkey|Kazehakase|Vienna|Iceape|Iceweasel|IceWeasel|Iron|K-Meleon|Sleipnir|Galeon|GranParadiso|iCab|iTunes|MacAppStore|NetNewsWire|Space Bison|Stainless|Orca|Dolfin|BOLT|Minimo|Tizen Browser|Polaris|Abrowser|Planetweb|ICE Browser|mDolphin|qutebrowser|Otter|QupZilla)/(\\d+)\\.(\\d+)\\.?(\\d+)?");n[1]=0;n[2]=0;n[3]=0;n[4]=0;i.browser[105]=n;n=Object.create(null);n[0]=new RegExp("(Chromium|Chrome)/(\\d+)\\.(\\d+)");n[1]=0;n[2]=0;n[3]=0;n[4]=0;i.browser[106]=n;n=Object.create(null);n[0]=new RegExp("(IEMobile)[ /](\\d+)\\.(\\d+)");n[1]="IE Mobile";n[2]=0;n[3]=0;n[4]=0;i.browser[107]=n;n=Object.create(null);n[0]=new RegExp("(iRider|Crazy Browser|SkipStone|iCab|Lunascape|Sleipnir|Maemo Browser) (\\d+)\\.(\\d+)\\.(\\d+)");n[1]=0;n[2]=0;n[3]=0;n[4]=0;i.browser[108]=n;n=Object.create(null);n[0]=new RegExp("(iCab|Lunascape|Opera|Android|Jasmine|Polaris) (\\d+)\\.(\\d+)\\.?(\\d+)?");n[1]=0;n[2]=0;n[3]=0;n[4]=0;i.browser[109]=n;n=Object.create(null);n[0]=new RegExp("(Kindle)/(\\d+)\\.(\\d+)");n[1]=0;n[2]=0;n[3]=0;n[4]=0;i.browser[110]=n;n=Object.create(null);n[0]=new RegExp("(Android) Donut");n[1]=0;n[2]="1";n[3]="2";n[4]=0;i.browser[111]=n;n=Object.create(null);n[0]=new RegExp("(Android) Eclair");n[1]=0;n[2]="2";n[3]="1";n[4]=0;i.browser[112]=n;n=Object.create(null);n[0]=new RegExp("(Android) Froyo");n[1]=0;n[2]="2";n[3]="2";n[4]=0;i.browser[113]=n;n=Object.create(null);n[0]=new RegExp("(Android) Gingerbread");n[1]=0;n[2]="2";n[3]="3";n[4]=0;i.browser[114]=n;n=Object.create(null);n[0]=new RegExp("(Android) Honeycomb");n[1]=0;n[2]="3";n[3]=0;n[4]=0;i.browser[115]=n;n=Object.create(null);n[0]=new RegExp("(MSIE) (\\d+)\\.(\\d+).*XBLWP7");n[1]="IE Large Screen";n[2]=0;n[3]=0;n[4]=0;i.browser[116]=n;n=Object.create(null);n[0]=new RegExp("(Obigo)InternetBrowser");n[1]=0;n[2]=0;n[3]=0;n[4]=0;i.browser[117]=n;n=Object.create(null);n[0]=new RegExp("(Obigo)\\-Browser");n[1]=0;n[2]=0;n[3]=0;n[4]=0;i.browser[118]=n;n=Object.create(null);n[0]=new RegExp("(Obigo|OBIGO)[^\\d]*(\\d+)(?:.(\\d+))?");n[1]="Obigo";n[2]=0;n[3]=0;n[4]=0;i.browser[119]=n;n=Object.create(null);n[0]=new RegExp("(MAXTHON|Maxthon) (\\d+)\\.(\\d+)");n[1]="Maxthon";n[2]=0;n[3]=0;n[4]=0;i.browser[120]=n;n=Object.create(null);n[0]=new RegExp("(Maxthon|MyIE2|Uzbl|Shiira)");n[1]=0;n[2]="0";n[3]=0;n[4]=0;i.browser[121]=n;n=Object.create(null);n[0]=new RegExp("(BrowseX) \\((\\d+)\\.(\\d+)\\.(\\d+)");n[1]=0;n[2]=0;n[3]=0;n[4]=0;i.browser[122]=n;n=Object.create(null);n[0]=new RegExp("(NCSA_Mosaic)/(\\d+)\\.(\\d+)");n[1]="NCSA Mosaic";n[2]=0;n[3]=0;n[4]=0;i.browser[123]=n;n=Object.create(null);n[0]=new RegExp("(POLARIS)/(\\d+)\\.(\\d+)");n[1]="Polaris";n[2]=0;n[3]=0;n[4]=0;i.browser[124]=n;n=Object.create(null);n[0]=new RegExp("(Embider)/(\\d+)\\.(\\d+)");n[1]="Polaris";n[2]=0;n[3]=0;n[4]=0;i.browser[125]=n;n=Object.create(null);n[0]=new RegExp("(BonEcho)/(\\d+)\\.(\\d+)\\.?([ab]?\\d+)?");n[1]="Bon Echo";n[2]=0;n[3]=0;n[4]=0;i.browser[126]=n;n=Object.create(null);n[0]=new RegExp("(iPod|iPhone|iPad).+Version/(\\d+)\\.(\\d+)(?:\\.(\\d+))?.* Safari");n[1]="Mobile Safari";n[2]=0;n[3]=0;n[4]=0;i.browser[127]=n;n=Object.create(null);n[0]=new RegExp("(iPod|iPhone|iPad).+Version/(\\d+)\\.(\\d+)(?:\\.(\\d+))?");n[1]="Mobile Safari UI/WKWebView";n[2]=0;n[3]=0;n[4]=0;i.browser[128]=n;n=Object.create(null);n[0]=new RegExp("(iPod|iPod touch|iPhone|iPad);.*CPU.*OS (\\d+)_(\\d+)(?:_(\\d+))?.*Mobile.* Safari");n[1]="Mobile Safari";n[2]=0;n[3]=0;n[4]=0;i.browser[129]=n;n=Object.create(null);n[0]=new RegExp("(iPod|iPod touch|iPhone|iPad);.*CPU.*OS (\\d+)_(\\d+)(?:_(\\d+))?.*Mobile");n[1]="Mobile Safari UI/WKWebView";n[2]=0;n[3]=0;n[4]=0;i.browser[130]=n;n=Object.create(null);n[0]=new RegExp("(iPod|iPhone|iPad).* Safari");n[1]="Mobile Safari";n[2]=0;n[3]=0;n[4]=0;i.browser[131]=n;n=Object.create(null);n[0]=new RegExp("(iPod|iPhone|iPad)");n[1]="Mobile Safari UI/WKWebView";n[2]=0;n[3]=0;n[4]=0;i.browser[132]=n;n=Object.create(null);n[0]=new RegExp("(AvantGo) (\\d+).(\\d+)");n[1]=0;n[2]=0;n[3]=0;n[4]=0;i.browser[133]=n;n=Object.create(null);n[0]=new RegExp("(OneBrowser)/(\\d+).(\\d+)");n[1]="ONE Browser";n[2]=0;n[3]=0;n[4]=0;i.browser[134]=n;n=Object.create(null);n[0]=new RegExp("(Avant)");n[1]=0;n[2]="1";n[3]=0;n[4]=0;i.browser[135]=n;n=Object.create(null);n[0]=new RegExp("(QtCarBrowser)");n[1]=0;n[2]="1";n[3]=0;n[4]=0;i.browser[136]=n;n=Object.create(null);n[0]=new RegExp("^(iBrowser/Mini)(\\d+).(\\d+)");n[1]="iBrowser Mini";n[2]=0;n[3]=0;n[4]=0;i.browser[137]=n;n=Object.create(null);n[0]=new RegExp("^(iBrowser|iRAPP)/(\\d+).(\\d+)");n[1]=0;n[2]=0;n[3]=0;n[4]=0;i.browser[138]=n;n=Object.create(null);n[0]=new RegExp("^(Nokia)");n[1]="Nokia Services (WAP) Browser";n[2]=0;n[3]=0;n[4]=0;i.browser[139]=n;n=Object.create(null);n[0]=new RegExp("(NokiaBrowser)/(\\d+)\\.(\\d+).(\\d+)\\.(\\d+)");n[1]="Nokia Browser";n[2]=0;n[3]=0;n[4]=0;i.browser[140]=n;n=Object.create(null);n[0]=new RegExp("(NokiaBrowser)/(\\d+)\\.(\\d+).(\\d+)");n[1]="Nokia Browser";n[2]=0;n[3]=0;n[4]=0;i.browser[141]=n;n=Object.create(null);n[0]=new RegExp("(NokiaBrowser)/(\\d+)\\.(\\d+)");n[1]="Nokia Browser";n[2]=0;n[3]=0;n[4]=0;i.browser[142]=n;n=Object.create(null);n[0]=new RegExp("(BrowserNG)/(\\d+)\\.(\\d+).(\\d+)");n[1]="Nokia Browser";n[2]=0;n[3]=0;n[4]=0;i.browser[143]=n;n=Object.create(null);n[0]=new RegExp("(Series60)/5\\.0");n[1]="Nokia Browser";n[2]="7";n[3]="0";n[4]=0;i.browser[144]=n;n=Object.create(null);n[0]=new RegExp("(Series60)/(\\d+)\\.(\\d+)");n[1]="Nokia OSS Browser";n[2]=0;n[3]=0;n[4]=0;i.browser[145]=n;n=Object.create(null);n[0]=new RegExp("(S40OviBrowser)/(\\d+)\\.(\\d+)\\.(\\d+)\\.(\\d+)");n[1]="Ovi Browser";n[2]=0;n[3]=0;n[4]=0;i.browser[146]=n;n=Object.create(null);n[0]=new RegExp("(Nokia)[EN]?(\\d+)");n[1]=0;n[2]=0;n[3]=0;n[4]=0;i.browser[147]=n;n=Object.create(null);n[0]=new RegExp("(PlayBook).+RIM Tablet OS (\\d+)\\.(\\d+)\\.(\\d+)");n[1]="BlackBerry WebKit";n[2]=0;n[3]=0;n[4]=0;i.browser[148]=n;n=Object.create(null);n[0]=new RegExp("(Black[bB]erry|BB10).+Version/(\\d+)\\.(\\d+)\\.(\\d+)");n[1]="BlackBerry WebKit";n[2]=0;n[3]=0;n[4]=0;i.browser[149]=n;n=Object.create(null);n[0]=new RegExp("(Black[bB]erry)\\s?(\\d+)");n[1]="BlackBerry";n[2]=0;n[3]=0;n[4]=0;i.browser[150]=n;n=Object.create(null);n[0]=new RegExp("(OmniWeb)/v(\\d+)\\.(\\d+)");n[1]=0;n[2]=0;n[3]=0;n[4]=0;i.browser[151]=n;n=Object.create(null);n[0]=new RegExp("(Blazer)/(\\d+)\\.(\\d+)");n[1]="Palm Blazer";n[2]=0;n[3]=0;n[4]=0;i.browser[152]=n;n=Object.create(null);n[0]=new RegExp("(Pre)/(\\d+)\\.(\\d+)");n[1]="Palm Pre";n[2]=0;n[3]=0;n[4]=0;i.browser[153]=n;n=Object.create(null);n[0]=new RegExp("(ELinks)/(\\d+)\\.(\\d+)");n[1]=0;n[2]=0;n[3]=0;n[4]=0;i.browser[154]=n;n=Object.create(null);n[0]=new RegExp("(ELinks) \\((\\d+)\\.(\\d+)");n[1]=0;n[2]=0;n[3]=0;n[4]=0;i.browser[155]=n;n=Object.create(null);n[0]=new RegExp("(Links) \\((\\d+)\\.(\\d+)");n[1]=0;n[2]=0;n[3]=0;n[4]=0;i.browser[156]=n;n=Object.create(null);n[0]=new RegExp("(QtWeb) Internet Browser/(\\d+)\\.(\\d+)");n[1]=0;n[2]=0;n[3]=0;n[4]=0;i.browser[157]=n;n=Object.create(null);n[0]=new RegExp("(PhantomJS)/(\\d+)\\.(\\d+)\\.(\\d+)");n[1]=0;n[2]=0;n[3]=0;n[4]=0;i.browser[158]=n;n=Object.create(null);n[0]=new RegExp("(AppleWebKit)/(\\d+)\\.?(\\d+)?\\+ .* Safari");n[1]="WebKit Nightly";n[2]=0;n[3]=0;n[4]=0;i.browser[159]=n;n=Object.create(null);n[0]=new RegExp("(Version)/(\\d+)\\.(\\d+)(?:\\.(\\d+))?.*Safari/");n[1]="Safari";n[2]=0;n[3]=0;n[4]=0;i.browser[160]=n;n=Object.create(null);n[0]=new RegExp("(Safari)/\\d+");n[1]=0;n[2]=0;n[3]=0;n[4]=0;i.browser[161]=n;n=Object.create(null);n[0]=new RegExp("(OLPC)/Update(\\d+)\\.(\\d+)");n[1]=0;n[2]=0;n[3]=0;n[4]=0;i.browser[162]=n;n=Object.create(null);n[0]=new RegExp("(OLPC)/Update()\\.(\\d+)");n[1]=0;n[2]="0";n[3]=0;n[4]=0;i.browser[163]=n;n=Object.create(null);n[0]=new RegExp("(SEMC\\-Browser)/(\\d+)\\.(\\d+)");n[1]=0;n[2]=0;n[3]=0;n[4]=0;i.browser[164]=n;n=Object.create(null);n[0]=new RegExp("(Teleca)");n[1]="Teleca Browser";n[2]=0;n[3]=0;n[4]=0;i.browser[165]=n;n=Object.create(null);n[0]=new RegExp("(Phantom)/V(\\d+)\\.(\\d+)");n[1]="Phantom Browser";n[2]=0;n[3]=0;n[4]=0;i.browser[166]=n;n=Object.create(null);n[0]=new RegExp("Trident(.*)rv.(\\d+)\\.(\\d+)");n[1]="IE";n[2]=0;n[3]=0;n[4]=0;i.browser[167]=n;n=Object.create(null);n[0]=new RegExp("(Espial)/(\\d+)(?:\\.(\\d+))?(?:\\.(\\d+))?");n[1]=0;n[2]=0;n[3]=0;n[4]=0;i.browser[168]=n;n=Object.create(null);n[0]=new RegExp("(AppleWebKit)/(\\d+)\\.(\\d+)\\.(\\d+)");n[1]="Apple Mail";n[2]=0;n[3]=0;n[4]=0;i.browser[169]=n;n=Object.create(null);n[0]=new RegExp("(Firefox)/(\\d+)\\.(\\d+)\\.(\\d+)");n[1]=0;n[2]=0;n[3]=0;n[4]=0;i.browser[170]=n;n=Object.create(null);n[0]=new RegExp("(Firefox)/(\\d+)\\.(\\d+)(pre|[ab]\\d+[a-z]*)?");n[1]=0;n[2]=0;n[3]=0;n[4]=0;i.browser[171]=n;n=Object.create(null);n[0]=new RegExp("([MS]?IE) (\\d+)\\.(\\d+)");n[1]="IE";n[2]=0;n[3]=0;n[4]=0;i.browser[172]=n;n=Object.create(null);n[0]=new RegExp("(python-requests)/(\\d+)\\.(\\d+)");n[1]="Python Requests";n[2]=0;n[3]=0;n[4]=0;i.browser[173]=n;n=Object.create(null);n[0]=new RegExp("(Java)[/ ]{0,1}\\d+\\.(\\d+)\\.(\\d+)[_-]*([a-zA-Z0-9]+)*");n[1]=0;n[2]=0;n[3]=0;n[4]=0;i.browser[174]=n;n=Object.create(null);n[0]=new RegExp("^(Roku)/DVP-(\\d+)\\.(\\d+)");n[1]=0;n[2]=0;n[3]=0;n[4]=0;i.browser[175]=n;n=Object.create(null);n[0]=new RegExp("(Wget)/(\\d+)\\.(\\d+)\\.?([ab]?\\d+[a-z]*)");n[1]=0;n[2]=0;n[3]=0;n[4]=0;i.browser[176]=n;n=Object.create(null);n[0]=new RegExp("(curl)/(\\d+)\\.(\\d+)\\.(\\d+)");n[1]="cURL";n[2]=0;n[3]=0;n[4]=0;i.browser[177]=n;i.browser.length=178;i.device=Object.create(null);n=Object.create(null);n[0]=new RegExp("(Rival IQ, rivaliq.com)");n[1]="Spider";n[2]=0;n[3]=0;n[4]=0;i.device[0]=n;n=Object.create(null);n[0]=new RegExp("(?:(?:iPhone|Windows CE|Android).*(?:(?:Bot|Yeti)-Mobile|YRSpider|bots?/\\d|(?:bot|spider)\\.html)|AdsBot-Google-Mobile.*iPhone)");n[1]="Spider";n[2]=0;n[3]=0;n[4]=0;i.device[1]=n;n=Object.create(null);n[0]=new RegExp("(?:DoCoMo|\\bMOT\\b|\\bLG\\b|Nokia|Samsung|SonyEricsson).*(?:(?:Bot|Yeti)-Mobile|bots?/\\d|(?:bot|crawler)\\.html|(?:jump|google|Wukong)bot|ichiro/mobile|/spider|YahooSeeker)");n[1]="Spider";n[2]=0;n[3]=0;n[4]=0;i.device[2]=n;n=Object.create(null);n[0]=new RegExp("\\bSmartWatch *\\( *([^;]+) *; *([^;]+) *;");n[1]="$1 $2";n[2]=0;n[3]=0;n[4]=0;i.device[3]=n;n=Object.create(null);n[0]=new RegExp("Android Application[^\\-]+ - (Sony) ?(Ericsson)? (.+) \\w+ - ");n[1]="$1 $2";n[2]=0;n[3]=0;n[4]=0;i.device[4]=n;n=Object.create(null);n[0]=new RegExp("Android Application[^\\-]+ - (?:HTC|HUAWEI|LGE|LENOVO|MEDION|TCT) (HTC|HUAWEI|LG|LENOVO|MEDION|ALCATEL)[ _\\-](.+) \\w+ - ");n[1]="$1 $2";n[2]=0;n[3]=0;n[4]=0;i.device[5]=n;n=Object.create(null);n[0]=new RegExp("Android Application[^\\-]+ - ([^ ]+) (.+) \\w+ - ");n[1]="$1 $2";n[2]=0;n[3]=0;n[4]=0;i.device[6]=n;n=Object.create(null);n[0]=new RegExp("; *([BLRQ]C\\d{4}[A-Z]+) +Build/");n[1]="3Q $1";n[2]=0;n[3]=0;n[4]=0;i.device[7]=n;n=Object.create(null);n[0]=new RegExp("; *(?:3Q_)([^;/]+) +Build");n[1]="3Q $1";n[2]=0;n[3]=0;n[4]=0;i.device[8]=n;n=Object.create(null);n[0]=new RegExp("Android [34].*; *(A100|A101|A110|A200|A210|A211|A500|A501|A510|A511|A700(?: Lite| 3G)?|A701|B1-A71|A1-\\d{3}|B1-\\d{3}|V360|V370|W500|W500P|W501|W501P|W510|W511|W700|Slider SL101|DA22[^;/]+) Build");n[1]="$1";n[2]=0;n[3]=0;n[4]=0;i.device[9]=n;n=Object.create(null);n[0]=new RegExp("; *Acer Iconia Tab ([^;/]+) Build");n[1]="$1";n[2]=0;n[3]=0;n[4]=0;i.device[10]=n;n=Object.create(null);n[0]=new RegExp("; *(Z1[1235]0|E320[^/]*|S500|S510|Liquid[^;/]*|Iconia A\\d+) Build");n[1]="$1";n[2]=0;n[3]=0;n[4]=0;i.device[11]=n;n=Object.create(null);n[0]=new RegExp("; *(Acer |ACER )([^;/]+) Build");n[1]="$1$2";n[2]=0;n[3]=0;n[4]=0;i.device[12]=n;n=Object.create(null);n[0]=new RegExp("; *(Advent )?(Vega(?:Bean|Comb)?).* Build");n[1]="$1$2";n[2]=0;n[3]=0;n[4]=0;i.device[13]=n;n=Object.create(null);n[0]=new RegExp("; *(Ainol )?((?:NOVO|[Nn]ovo)[^;/]+) Build");n[1]="$1$2";n[2]=0;n[3]=0;n[4]=0;i.device[14]=n;n=Object.create(null);n[0]=new RegExp("; *AIRIS[ _\\-]?([^/;\\)]+) *(?:;|\\)|Build)");n[1]="$1";n[2]=0;n[3]=0;n[4]=0;i.device[15]=n;n=Object.create(null);n[0]=new RegExp("; *(OnePAD[^;/]+) Build");n[1]="$1";n[2]=0;n[3]=0;n[4]=0;i.device[16]=n;n=Object.create(null);n[0]=new RegExp("; *Airpad[ \\-]([^;/]+) Build");n[1]="Airpad $1";n[2]=0;n[3]=0;n[4]=0;i.device[17]=n;n=Object.create(null);n[0]=new RegExp("; *(one ?touch) (EVO7|T10|T20) Build");n[1]="Alcatel One Touch $2";n[2]=0;n[3]=0;n[4]=0;i.device[18]=n;n=Object.create(null);n[0]=new RegExp("; *(?:alcatel[ _])?(?:(?:one[ _]?touch[ _])|ot[ \\-])([^;/]+);? Build");n[1]="Alcatel One Touch $1";n[2]=0;n[3]=0;n[4]=0;i.device[19]=n;n=Object.create(null);n[0]=new RegExp("; *(TCL)[ _]([^;/]+) Build");n[1]="$1 $2";n[2]=0;n[3]=0;n[4]=0;i.device[20]=n;n=Object.create(null);n[0]=new RegExp("; *(Vodafone Smart II|Optimus_Madrid) Build");n[1]="Alcatel $1";n[2]=0;n[3]=0;n[4]=0;i.device[21]=n;n=Object.create(null);n[0]=new RegExp("; *BASE_Lutea_3 Build");n[1]="Alcatel One Touch 998";n[2]=0;n[3]=0;n[4]=0;i.device[22]=n;n=Object.create(null);n[0]=new RegExp("; *BASE_Varia Build");n[1]="Alcatel One Touch 918D";n[2]=0;n[3]=0;n[4]=0;i.device[23]=n;n=Object.create(null);n[0]=new RegExp("; *((?:FINE|Fine)\\d[^;/]+) Build");n[1]="$1";n[2]=0;n[3]=0;n[4]=0;i.device[24]=n;n=Object.create(null);n[0]=new RegExp("; *(ALLVIEW[ _]?|Allview[ _]?)((?:Speed|SPEED).*) Build/");n[1]="$1$2";n[2]=0;n[3]=0;n[4]=0;i.device[25]=n;n=Object.create(null);n[0]=new RegExp("; *(ALLVIEW[ _]?|Allview[ _]?)?(AX1_Shine|AX2_Frenzy) Build");n[1]="$1$2";n[2]=0;n[3]=0;n[4]=0;i.device[26]=n;n=Object.create(null);n[0]=new RegExp("; *(ALLVIEW[ _]?|Allview[ _]?)([^;/]*) Build");n[1]="$1$2";n[2]=0;n[3]=0;n[4]=0;i.device[27]=n;n=Object.create(null);n[0]=new RegExp("; *(A13-MID) Build");n[1]="$1";n[2]=0;n[3]=0;n[4]=0;i.device[28]=n;n=Object.create(null);n[0]=new RegExp("; *(Allwinner)[ _\\-]?([^;/]+) Build");n[1]="$1 $2";n[2]=0;n[3]=0;n[4]=0;i.device[29]=n;n=Object.create(null);n[0]=new RegExp("; *(A651|A701B?|A702|A703|A705|A706|A707|A711|A712|A713|A717|A722|A785|A801|A802|A803|A901|A902|A1002|A1003|A1006|A1007|A9701|A9703|Q710|Q80) Build");n[1]="$1";n[2]=0;n[3]=0;n[4]=0;i.device[30]=n;n=Object.create(null);n[0]=new RegExp("; *(?:AMOI|Amoi)[ _]([^;/]+) Build");n[1]="Amoi $1";n[2]=0;n[3]=0;n[4]=0;i.device[31]=n;n=Object.create(null);n[0]=new RegExp("^(?:AMOI|Amoi)[ _]([^;/]+) Linux");n[1]="Amoi $1";n[2]=0;n[3]=0;n[4]=0;i.device[32]=n;n=Object.create(null);n[0]=new RegExp("; *(MW(?:0[789]|10)[^;/]+) Build");n[1]="$1";n[2]=0;n[3]=0;n[4]=0;i.device[33]=n;n=Object.create(null);n[0]=new RegExp("; *(G7|M1013|M1015G|M11[CG]?|M-?12[B]?|M15|M19[G]?|M30[ACQ]?|M31[GQ]|M32|M33[GQ]|M36|M37|M38|M701T|M710|M712B|M713|M715G|M716G|M71(?:G|GS|T)?|M72[T]?|M73[T]?|M75[GT]?|M77G|M79T|M7L|M7LN|M81|M810|M81T|M82|M92|M92KS|M92S|M717G|M721|M722G|M723|M725G|M739|M785|M791|M92SK|M93D) Build");n[1]="Aoson $1";n[2]=0;n[3]=0;n[4]=0;i.device[34]=n;n=Object.create(null);n[0]=new RegExp("; *Aoson ([^;/]+) Build");n[1]="Aoson $1";n[2]=0;n[3]=0;n[4]=0;i.device[35]=n;n=Object.create(null);n[0]=new RegExp("; *[Aa]panda[ _\\-]([^;/]+) Build");n[1]="Apanda $1";n[2]=0;n[3]=0;n[4]=0;i.device[36]=n;n=Object.create(null);n[0]=new RegExp("; *(?:ARCHOS|Archos) ?(GAMEPAD.*?)(?: Build|[;/\\(\\)\\-])");n[1]="Archos $1";n[2]=0;n[3]=0;n[4]=0;i.device[37]=n;n=Object.create(null);n[0]=new RegExp("ARCHOS; GOGI; ([^;]+);");n[1]="Archos $1";n[2]=0;n[3]=0;n[4]=0;i.device[38]=n;n=Object.create(null);n[0]=new RegExp("(?:ARCHOS|Archos)[ _]?(.*?)(?: Build|[;/\\(\\)\\-]|$)");n[1]="Archos $1";n[2]=0;n[3]=0;n[4]=0;i.device[39]=n;n=Object.create(null);n[0]=new RegExp("; *(AN(?:7|8|9|10|13)[A-Z0-9]{1,4}) Build");n[1]="Archos $1";n[2]=0;n[3]=0;n[4]=0;i.device[40]=n;n=Object.create(null);n[0]=new RegExp("; *(A28|A32|A43|A70(?:BHT|CHT|HB|S|X)|A101(?:B|C|IT)|A7EB|A7EB-WK|101G9|80G9) Build");n[1]="Archos $1";n[2]=0;n[3]=0;n[4]=0;i.device[41]=n;n=Object.create(null);n[0]=new RegExp("; *(PAD-FMD[^;/]+) Build");n[1]="$1";n[2]=0;n[3]=0;n[4]=0;i.device[42]=n;n=Object.create(null);n[0]=new RegExp("; *(BioniQ) ?([^;/]+) Build");n[1]="$1 $2";n[2]=0;n[3]=0;n[4]=0;i.device[43]=n;n=Object.create(null);n[0]=new RegExp("; *(AN\\d[^;/]+|ARCHM\\d+) Build");n[1]="Arnova $1";n[2]=0;n[3]=0;n[4]=0;i.device[44]=n;n=Object.create(null);n[0]=new RegExp("; *(?:ARNOVA|Arnova) ?([^;/]+) Build");n[1]="Arnova $1";n[2]=0;n[3]=0;n[4]=0;i.device[45]=n;n=Object.create(null);n[0]=new RegExp("; *(?:ASSISTANT )?(AP)-?([1789]\\d{2}[A-Z]{0,2}|80104) Build");n[1]="Assistant $1-$2";n[2]=0;n[3]=0;n[4]=0;i.device[46]=n;n=Object.create(null);n[0]=new RegExp("; *(ME17\\d[^;/]*|ME3\\d{2}[^;/]+|K00[A-Z]|Nexus 10|Nexus 7(?: 2013)?|PadFone[^;/]*|Transformer[^;/]*|TF\\d{3}[^;/]*|eeepc) Build");n[1]="Asus $1";n[2]=0;n[3]=0;n[4]=0;i.device[47]=n;n=Object.create(null);n[0]=new RegExp("; *ASUS[ _]*([^;/]+) Build");n[1]="Asus $1";n[2]=0;n[3]=0;n[4]=0;i.device[48]=n;n=Object.create(null);n[0]=new RegExp("; *Garmin-Asus ([^;/]+) Build");n[1]="Garmin-Asus $1";n[2]=0;n[3]=0;n[4]=0;i.device[49]=n;n=Object.create(null);n[0]=new RegExp("; *(Garminfone) Build");n[1]="Garmin $1";n[2]=0;n[3]=0;n[4]=0;i.device[50]=n;n=Object.create(null);n[0]=new RegExp("; (@TAB-[^;/]+) Build");n[1]="$1";n[2]=0;n[3]=0;n[4]=0;i.device[51]=n;n=Object.create(null);n[0]=new RegExp("; *(T-(?:07|[^0]\\d)[^;/]+) Build");n[1]="$1";n[2]=0;n[3]=0;n[4]=0;i.device[52]=n;n=Object.create(null);n[0]=new RegExp("; *(?:Axioo[ _\\-]([^;/]+)|(picopad)[ _\\-]([^;/]+)) Build");n[1]="Axioo $1$2 $3";n[2]=0;n[3]=0;n[4]=0;i.device[53]=n;n=Object.create(null);n[0]=new RegExp("; *(V(?:100|700|800)[^;/]*) Build");n[1]="$1";n[2]=0;n[3]=0;n[4]=0;i.device[54]=n;n=Object.create(null);n[0]=new RegExp("; *(IBAK\\-[^;/]*) Build");n[1]="$1";n[2]=0;n[3]=0;n[4]=0;i.device[55]=n;n=Object.create(null);n[0]=new RegExp("; *(HY5001|HY6501|X12|X21|I5) Build");n[1]="Bedove $1";n[2]=0;n[3]=0;n[4]=0;i.device[56]=n;n=Object.create(null);n[0]=new RegExp("; *(JC-[^;/]*) Build");n[1]="Benss $1";n[2]=0;n[3]=0;n[4]=0;i.device[57]=n;n=Object.create(null);n[0]=new RegExp("; *(BB) ([^;/]+) Build");n[1]="$1 $2";n[2]=0;n[3]=0;n[4]=0;i.device[58]=n;n=Object.create(null);n[0]=new RegExp("; *(BlackBird)[ _](I8.*) Build");n[1]="$1 $2";n[2]=0;n[3]=0;n[4]=0;i.device[59]=n;n=Object.create(null);n[0]=new RegExp("; *(BlackBird)[ _](.*) Build");n[1]="$1 $2";n[2]=0;n[3]=0;n[4]=0;i.device[60]=n;n=Object.create(null);n[0]=new RegExp("; *([0-9]+BP[EM][^;/]*|Endeavour[^;/]+) Build");n[1]="Blaupunkt $1";n[2]=0;n[3]=0;n[4]=0;i.device[61]=n;n=Object.create(null);n[0]=new RegExp("; *((?:BLU|Blu)[ _\\-])([^;/]+) Build");n[1]="$1$2";n[2]=0;n[3]=0;n[4]=0;i.device[62]=n;n=Object.create(null);n[0]=new RegExp("; *(?:BMOBILE )?(Blu|BLU|DASH [^;/]+|VIVO 4\\.3|TANK 4\\.5) Build");n[1]="$1";n[2]=0;n[3]=0;n[4]=0;i.device[63]=n;n=Object.create(null);n[0]=new RegExp("; *(TOUCH\\d[^;/]+) Build");n[1]="$1";n[2]=0;n[3]=0;n[4]=0;i.device[64]=n;n=Object.create(null);n[0]=new RegExp("; *(AX5\\d+) Build");n[1]="$1";n[2]=0;n[3]=0;n[4]=0;i.device[65]=n;n=Object.create(null);n[0]=new RegExp("; *([Bb]q) ([^;/]+);? Build");n[1]="$1 $2";n[2]=0;n[3]=0;n[4]=0;i.device[66]=n;n=Object.create(null);n[0]=new RegExp("; *(Maxwell [^;/]+) Build");n[1]="$1";n[2]=0;n[3]=0;n[4]=0;i.device[67]=n;n=Object.create(null);n[0]=new RegExp("; *((?:B-Tab|B-TAB) ?\\d[^;/]+) Build");n[1]="$1";n[2]=0;n[3]=0;n[4]=0;i.device[68]=n;n=Object.create(null);n[0]=new RegExp("; *(Broncho) ([^;/]+) Build");n[1]="$1 $2";n[2]=0;n[3]=0;n[4]=0;i.device[69]=n;n=Object.create(null);n[0]=new RegExp("; *CAPTIVA ([^;/]+) Build");n[1]="Captiva $1";n[2]=0;n[3]=0;n[4]=0;i.device[70]=n;n=Object.create(null);n[0]=new RegExp("; *(C771|CAL21|IS11CA) Build");n[1]="$1";n[2]=0;n[3]=0;n[4]=0;i.device[71]=n;n=Object.create(null);n[0]=new RegExp("; *(?:Cat|CAT) ([^;/]+) Build");n[1]="Cat $1";n[2]=0;n[3]=0;n[4]=0;i.device[72]=n;n=Object.create(null);n[0]=new RegExp("; *(?:Cat)(Nova.*) Build");n[1]="Cat $1";n[2]=0;n[3]=0;n[4]=0;i.device[73]=n;n=Object.create(null);n[0]=new RegExp("; *(INM8002KP|ADM8000KP_[AB]) Build");n[1]="$1";n[2]=0;n[3]=0;n[4]=0;i.device[74]=n;n=Object.create(null);n[0]=new RegExp("; *(?:[Cc]elkon[ _\\*]|CELKON[ _\\*])([^;/\\)]+) ?(?:Build|;|\\))");n[1]="$1";n[2]=0;n[3]=0;n[4]=0;i.device[75]=n;n=Object.create(null);n[0]=new RegExp("Build/(?:[Cc]elkon)+_?([^;/_\\)]+)");n[1]="$1";n[2]=0;n[3]=0;n[4]=0;i.device[76]=n;n=Object.create(null);n[0]=new RegExp("; *(CT)-?(\\d+) Build");n[1]="$1$2";n[2]=0;n[3]=0;n[4]=0;i.device[77]=n;n=Object.create(null);n[0]=new RegExp("; *(A19|A19Q|A105|A107[^;/\\)]*) ?(?:Build|;|\\))");n[1]="$1";n[2]=0;n[3]=0;n[4]=0;i.device[78]=n;n=Object.create(null);n[0]=new RegExp("; *(TPC[0-9]{4,5}) Build");n[1]="$1";n[2]=0;n[3]=0;n[4]=0;i.device[79]=n;n=Object.create(null);n[0]=new RegExp("; *(Cloudfone)[ _](Excite)([^ ][^;/]+) Build");n[1]="$1 $2 $3";n[2]=0;n[3]=0;n[4]=0;i.device[80]=n;n=Object.create(null);n[0]=new RegExp("; *(Excite|ICE)[ _](\\d+[^;/]+) Build");n[1]="Cloudfone $1 $2";n[2]=0;n[3]=0;n[4]=0;i.device[81]=n;n=Object.create(null);n[0]=new RegExp("; *(Cloudfone|CloudPad)[ _]([^;/]+) Build");n[1]="$1 $2";n[2]=0;n[3]=0;n[4]=0;i.device[82]=n;n=Object.create(null);n[0]=new RegExp("; *((?:Aquila|Clanga|Rapax)[^;/]+) Build");n[1]="$1";n[2]=0;n[3]=0;n[4]=0;i.device[83]=n;n=Object.create(null);n[0]=new RegExp("; *(?:CFW-|Kyros )?(MID[0-9]{4}(?:[ABC]|SR|TV)?)(\\(3G\\)-4G| GB 8K| 3G| 8K| GB)? *(?:Build|[;\\)])");n[1]="CobyKyros $1$2";n[2]=0;n[3]=0;n[4]=0;i.device[84]=n;n=Object.create(null);n[0]=new RegExp("; *([^;/]*)Coolpad[ _]([^;/]+) Build");n[1]="$1$2";n[2]=0;n[3]=0;n[4]=0;i.device[85]=n;n=Object.create(null);n[0]=new RegExp("; *(CUBE[ _])?([KU][0-9]+ ?GT.*|A5300) Build");n[1]="$1$2";n[2]=0;n[3]=0;n[4]=0;i.device[86]=n;n=Object.create(null);n[0]=new RegExp("; *CUBOT ([^;/]+) Build");n[1]="$1";n[2]=0;n[3]=0;n[4]=0;i.device[87]=n;n=Object.create(null);n[0]=new RegExp("; *(BOBBY) Build");n[1]="$1";n[2]=0;n[3]=0;n[4]=0;i.device[88]=n;n=Object.create(null);n[0]=new RegExp("; *(Dslide [^;/]+) Build");n[1]="$1";n[2]=0;n[3]=0;n[4]=0;i.device[89]=n;n=Object.create(null);n[0]=new RegExp("; *(XCD)[ _]?(28|35) Build");n[1]="Dell $1$2";n[2]=0;n[3]=0;n[4]=0;i.device[90]=n;n=Object.create(null);n[0]=new RegExp("; *(001DL) Build");n[1]="Dell $1";n[2]=0;n[3]=0;n[4]=0;i.device[91]=n;n=Object.create(null);n[0]=new RegExp("; *(?:Dell|DELL) (Streak) Build");n[1]="Dell $1";n[2]=0;n[3]=0;n[4]=0;i.device[92]=n;n=Object.create(null);n[0]=new RegExp("; *(101DL|GS01|Streak Pro[^;/]*) Build");n[1]="Dell $1";n[2]=0;n[3]=0;n[4]=0;i.device[93]=n;n=Object.create(null);n[0]=new RegExp("; *([Ss]treak ?7) Build");n[1]="Dell $1";n[2]=0;n[3]=0;n[4]=0;i.device[94]=n;n=Object.create(null);n[0]=new RegExp("; *(Mini-3iX) Build");n[1]="Dell $1";n[2]=0;n[3]=0;n[4]=0;i.device[95]=n;n=Object.create(null);n[0]=new RegExp("; *(?:Dell|DELL)[ _](Aero|Venue|Thunder|Mini.*|Streak[ _]Pro) Build");n[1]="Dell $1";n[2]=0;n[3]=0;n[4]=0;i.device[96]=n;n=Object.create(null);n[0]=new RegExp("; *Dell[ _]([^;/]+) Build");n[1]="Dell $1";n[2]=0;n[3]=0;n[4]=0;i.device[97]=n;n=Object.create(null);n[0]=new RegExp("; *Dell ([^;/]+) Build");n[1]="Dell $1";n[2]=0;n[3]=0;n[4]=0;i.device[98]=n;n=Object.create(null);n[0]=new RegExp("; *(TA[CD]-\\d+[^;/]*) Build");n[1]="$1";n[2]=0;n[3]=0;n[4]=0;i.device[99]=n;n=Object.create(null);n[0]=new RegExp("; *(iP[789]\\d{2}(?:-3G)?|IP10\\d{2}(?:-8GB)?) Build");n[1]="$1";n[2]=0;n[3]=0;n[4]=0;i.device[100]=n;n=Object.create(null);n[0]=new RegExp("; *(AirTab)[ _\\-]([^;/]+) Build");n[1]="$1 $2";n[2]=0;n[3]=0;n[4]=0;i.device[101]=n;n=Object.create(null);n[0]=new RegExp("; *(F\\-\\d[^;/]+) Build");n[1]="$1";n[2]=0;n[3]=0;n[4]=0;i.device[102]=n;n=Object.create(null);n[0]=new RegExp("; *(HT-03A) Build");n[1]="$1";n[2]=0;n[3]=0;n[4]=0;i.device[103]=n;n=Object.create(null);n[0]=new RegExp("; *(HT\\-\\d[^;/]+) Build");n[1]="$1";n[2]=0;n[3]=0;n[4]=0;i.device[104]=n;n=Object.create(null);n[0]=new RegExp("; *(L\\-\\d[^;/]+) Build");n[1]="$1";n[2]=0;n[3]=0;n[4]=0;i.device[105]=n;n=Object.create(null);n[0]=new RegExp("; *(N\\-\\d[^;/]+) Build");n[1]="$1";n[2]=0;n[3]=0;n[4]=0;i.device[106]=n;n=Object.create(null);n[0]=new RegExp("; *(P\\-\\d[^;/]+) Build");n[1]="$1";n[2]=0;n[3]=0;n[4]=0;i.device[107]=n;n=Object.create(null);n[0]=new RegExp("; *(SC\\-\\d[^;/]+) Build");n[1]="$1";n[2]=0;n[3]=0;n[4]=0;i.device[108]=n;n=Object.create(null);n[0]=new RegExp("; *(SH\\-\\d[^;/]+) Build");n[1]="$1";n[2]=0;n[3]=0;n[4]=0;i.device[109]=n;n=Object.create(null);n[0]=new RegExp("; *(SO\\-\\d[^;/]+) Build");n[1]="$1";n[2]=0;n[3]=0;n[4]=0;i.device[110]=n;n=Object.create(null);n[0]=new RegExp("; *(T\\-0[12][^;/]+) Build");n[1]="$1";n[2]=0;n[3]=0;n[4]=0;i.device[111]=n;n=Object.create(null);n[0]=new RegExp("; *(DOOV)[ _]([^;/]+) Build");n[1]="$1 $2";n[2]=0;n[3]=0;n[4]=0;i.device[112]=n;n=Object.create(null);n[0]=new RegExp("; *(Enot|ENOT)[ -]?([^;/]+) Build");n[1]="$1 $2";n[2]=0;n[3]=0;n[4]=0;i.device[113]=n;n=Object.create(null);n[0]=new RegExp("; *[^;/]+ Build/(?:CROSS|Cross)+[ _\\-]([^\\)]+)");n[1]="CROSS $1";n[2]=0;n[3]=0;n[4]=0;i.device[114]=n;n=Object.create(null);n[0]=new RegExp("; *(CROSS|Cross)[ _\\-]([^;/]+) Build");n[1]="$1 $2";n[2]=0;n[3]=0;n[4]=0;i.device[115]=n;n=Object.create(null);n[0]=new RegExp("; *Explay[_ ](.+?)(?:[\\)]| Build)");n[1]="$1";n[2]=0;n[3]=0;n[4]=0;i.device[116]=n;n=Object.create(null);n[0]=new RegExp("; *(IQ.*) Build");n[1]="$1";n[2]=0;n[3]=0;n[4]=0;i.device[117]=n;n=Object.create(null);n[0]=new RegExp("; *(Fly|FLY)[ _](IQ[^;]+|F[34]\\d+[^;]*);? Build");n[1]="$1 $2";n[2]=0;n[3]=0;n[4]=0;i.device[118]=n;n=Object.create(null);n[0]=new RegExp("; *(M532|Q572|FJL21) Build/");n[1]="$1";n[2]=0;n[3]=0;n[4]=0;i.device[119]=n;n=Object.create(null);n[0]=new RegExp("; *(G1) Build");n[1]="$1";n[2]=0;n[3]=0;n[4]=0;i.device[120]=n;n=Object.create(null);n[0]=new RegExp("; *(Geeksphone) ([^;/]+) Build");n[1]="$1 $2";n[2]=0;n[3]=0;n[4]=0;i.device[121]=n;n=Object.create(null);n[0]=new RegExp("; *(G[^F]?FIVE) ([^;/]+) Build");n[1]="$1 $2";n[2]=0;n[3]=0;n[4]=0;i.device[122]=n;n=Object.create(null);n[0]=new RegExp("; *(Gionee)[ _\\-]([^;/]+)(?:/[^;/]+)? Build");n[1]="$1 $2";n[2]=0;n[3]=0;n[4]=0;i.device[123]=n;n=Object.create(null);n[0]=new RegExp("; *(GN\\d+[A-Z]?|INFINITY_PASSION|Ctrl_V1) Build");n[1]="Gionee $1";n[2]=0;n[3]=0;n[4]=0;i.device[124]=n;n=Object.create(null);n[0]=new RegExp("; *(E3) Build/JOP40D");n[1]="Gionee $1";n[2]=0;n[3]=0;n[4]=0;i.device[125]=n;n=Object.create(null);n[0]=new RegExp("; *((?:FONE|QUANTUM|INSIGNIA) \\d+[^;/]*|PLAYTAB) Build");n[1]="GoClever $1";n[2]=0;n[3]=0;n[4]=0;i.device[126]=n;n=Object.create(null);n[0]=new RegExp("; *GOCLEVER ([^;/]+) Build");n[1]="GoClever $1";n[2]=0;n[3]=0;n[4]=0;i.device[127]=n;n=Object.create(null);n[0]=new RegExp("; *(Glass \\d+) Build");n[1]="$1";n[2]=0;n[3]=0;n[4]=0;i.device[128]=n;n=Object.create(null);n[0]=new RegExp("; *(GSmart)[ -]([^/]+) Build");n[1]="$1 $2";n[2]=0;n[3]=0;n[4]=0;i.device[129]=n;n=Object.create(null);n[0]=new RegExp("; *(imx5[13]_[^/]+) Build");n[1]="Freescale $1";n[2]=0;n[3]=0;n[4]=0;i.device[130]=n;n=Object.create(null);n[0]=new RegExp("; *Haier[ _\\-]([^/]+) Build");n[1]="Haier $1";n[2]=0;n[3]=0;n[4]=0;i.device[131]=n;n=Object.create(null);n[0]=new RegExp("; *(PAD1016) Build");n[1]="Haipad $1";n[2]=0;n[3]=0;n[4]=0;i.device[132]=n;n=Object.create(null);n[0]=new RegExp("; *(M701|M7|M8|M9) Build");n[1]="Haipad $1";n[2]=0;n[3]=0;n[4]=0;i.device[133]=n;n=Object.create(null);n[0]=new RegExp("; *(SN\\d+T[^;\\)/]*)(?: Build|[;\\)])");n[1]="Hannspree $1";n[2]=0;n[3]=0;n[4]=0;i.device[134]=n;n=Object.create(null);n[0]=new RegExp("Build/HCL ME Tablet ([^;\\)]+)[\\);]");n[1]="HCLme $1";n[2]=0;n[3]=0;n[4]=0;i.device[135]=n;n=Object.create(null);n[0]=new RegExp("; *([^;\\/]+) Build/HCL");n[1]="HCLme $1";n[2]=0;n[3]=0;n[4]=0;i.device[136]=n;n=Object.create(null);n[0]=new RegExp("; *(MID-?\\d{4}C[EM]) Build");n[1]="Hena $1";n[2]=0;n[3]=0;n[4]=0;i.device[137]=n;n=Object.create(null);n[0]=new RegExp("; *(EG\\d{2,}|HS-[^;/]+|MIRA[^;/]+) Build");n[1]="Hisense $1";n[2]=0;n[3]=0;n[4]=0;i.device[138]=n;n=Object.create(null);n[0]=new RegExp("; *(andromax[^;/]+) Build");n[1]="Hisense $1";n[2]=0;n[3]=0;n[4]=0;i.device[139]=n;n=Object.create(null);n[0]=new RegExp("; *(?:AMAZE[ _](S\\d+)|(S\\d+)[ _]AMAZE) Build");n[1]="AMAZE $1$2";n[2]=0;n[3]=0;n[4]=0;i.device[140]=n;n=Object.create(null);n[0]=new RegExp("; *(PlayBook) Build");n[1]="HP $1";n[2]=0;n[3]=0;n[4]=0;i.device[141]=n;n=Object.create(null);n[0]=new RegExp("; *HP ([^/]+) Build");n[1]="HP $1";n[2]=0;n[3]=0;n[4]=0;i.device[142]=n;n=Object.create(null);n[0]=new RegExp("; *([^/]+_tenderloin) Build");n[1]="HP TouchPad";n[2]=0;n[3]=0;n[4]=0;i.device[143]=n;n=Object.create(null);n[0]=new RegExp("; *(HUAWEI |Huawei-)?([UY][^;/]+) Build/(?:Huawei|HUAWEI)([UY][^\\);]+)\\)");n[1]="$1$2";n[2]=0;n[3]=0;n[4]=0;i.device[144]=n;n=Object.create(null);n[0]=new RegExp("; *([^;/]+) Build[/ ]Huawei(MT1-U06|[A-Z]+\\d+[^\\);]+)[^\\);]*\\)");n[1]="$1";n[2]=0;n[3]=0;n[4]=0;i.device[145]=n;n=Object.create(null);n[0]=new RegExp("; *(S7|M860) Build");n[1]="$1";n[2]=0;n[3]=0;n[4]=0;i.device[146]=n;n=Object.create(null);n[0]=new RegExp("; *((?:HUAWEI|Huawei)[ \\-]?)(MediaPad) Build");n[1]="$1$2";n[2]=0;n[3]=0;n[4]=0;i.device[147]=n;n=Object.create(null);n[0]=new RegExp("; *((?:HUAWEI[ _]?|Huawei[ _])?Ascend[ _])([^;/]+) Build");n[1]="$1$2";n[2]=0;n[3]=0;n[4]=0;i.device[148]=n;n=Object.create(null);n[0]=new RegExp("; *((?:HUAWEI|Huawei)[ _\\-]?)((?:G700-|MT-)[^;/]+) Build");n[1]="$1$2";n[2]=0;n[3]=0;n[4]=0;i.device[149]=n;n=Object.create(null);n[0]=new RegExp("; *((?:HUAWEI|Huawei)[ _\\-]?)([^;/]+) Build");n[1]="$1$2";n[2]=0;n[3]=0;n[4]=0;i.device[150]=n;n=Object.create(null);n[0]=new RegExp("; *(MediaPad[^;]+|SpringBoard) Build/Huawei");n[1]="$1";n[2]=0;n[3]=0;n[4]=0;i.device[151]=n;n=Object.create(null);n[0]=new RegExp("; *([^;]+) Build/Huawei");n[1]="$1";n[2]=0;n[3]=0;n[4]=0;i.device[152]=n;n=Object.create(null);n[0]=new RegExp("; *([Uu])([89]\\d{3}) Build");n[1]="$1$2";n[2]=0;n[3]=0;n[4]=0;i.device[153]=n;n=Object.create(null);n[0]=new RegExp("; *(?:Ideos |IDEOS )(S7) Build");n[1]="Huawei Ideos$1";n[2]=0;n[3]=0;n[4]=0;i.device[154]=n;n=Object.create(null);n[0]=new RegExp("; *(?:Ideos |IDEOS )([^;/]+\\s*|\\s*)Build");n[1]="Huawei Ideos$1";n[2]=0;n[3]=0;n[4]=0;i.device[155]=n;n=Object.create(null);n[0]=new RegExp("; *(Orange Daytona|Pulse|Pulse Mini|Vodafone 858|C8500|C8600|C8650|C8660|Nexus 6P) Build");n[1]="Huawei $1";n[2]=0;n[3]=0;n[4]=0;i.device[156]=n;n=Object.create(null);n[0]=new RegExp("; *HTC[ _]([^;]+); Windows Phone");n[1]="HTC $1";n[2]=0;n[3]=0;n[4]=0;i.device[157]=n;n=Object.create(null);n[0]=new RegExp("; *(?:HTC[ _/])+([^ _/]+)(?:[/\\\\]1\\.0 | V|/| +)\\d+\\.\\d[\\d\\.]*(?: *Build|\\))");n[1]="HTC $1";n[2]=0;n[3]=0;n[4]=0;i.device[158]=n;n=Object.create(null);n[0]=new RegExp("; *(?:HTC[ _/])+([^ _/]+)(?:[ _/]([^ _/]+))?(?:[/\\\\]1\\.0 | V|/| +)\\d+\\.\\d[\\d\\.]*(?: *Build|\\))");n[1]="HTC $1 $2";n[2]=0;n[3]=0;n[4]=0;i.device[159]=n;n=Object.create(null);n[0]=new RegExp("; *(?:HTC[ _/])+([^ _/]+)(?:[ _/]([^ _/]+)(?:[ _/]([^ _/]+))?)?(?:[/\\\\]1\\.0 | V|/| +)\\d+\\.\\d[\\d\\.]*(?: *Build|\\))");n[1]="HTC $1 $2 $3";n[2]=0;n[3]=0;n[4]=0;i.device[160]=n;n=Object.create(null);n[0]=new RegExp("; *(?:HTC[ _/])+([^ _/]+)(?:[ _/]([^ _/]+)(?:[ _/]([^ _/]+)(?:[ _/]([^ _/]+))?)?)?(?:[/\\\\]1\\.0 | V|/| +)\\d+\\.\\d[\\d\\.]*(?: *Build|\\))");n[1]="HTC $1 $2 $3 $4";n[2]=0;n[3]=0;n[4]=0;i.device[161]=n;n=Object.create(null);n[0]=new RegExp("; *(?:(?:HTC|htc)(?:_blocked)*[ _/])+([^ _/;]+)(?: *Build|[;\\)]| - )");n[1]="HTC $1";n[2]=0;n[3]=0;n[4]=0;i.device[162]=n;n=Object.create(null);n[0]=new RegExp("; *(?:(?:HTC|htc)(?:_blocked)*[ _/])+([^ _/]+)(?:[ _/]([^ _/;\\)]+))?(?: *Build|[;\\)]| - )");n[1]="HTC $1 $2";n[2]=0;n[3]=0;n[4]=0;i.device[163]=n;n=Object.create(null);n[0]=new RegExp("; *(?:(?:HTC|htc)(?:_blocked)*[ _/])+([^ _/]+)(?:[ _/]([^ _/]+)(?:[ _/]([^ _/;\\)]+))?)?(?: *Build|[;\\)]| - )");n[1]="HTC $1 $2 $3";n[2]=0;n[3]=0;n[4]=0;i.device[164]=n;n=Object.create(null);n[0]=new RegExp("; *(?:(?:HTC|htc)(?:_blocked)*[ _/])+([^ _/]+)(?:[ _/]([^ _/]+)(?:[ _/]([^ _/]+)(?:[ _/]([^ /;]+))?)?)?(?: *Build|[;\\)]| - )");n[1]="HTC $1 $2 $3 $4";n[2]=0;n[3]=0;n[4]=0;i.device[165]=n;n=Object.create(null);n[0]=new RegExp("HTC Streaming Player [^\\/]*/[^\\/]*/ htc_([^/]+) /");n[1]="HTC $1";n[2]=0;n[3]=0;n[4]=0;i.device[166]=n;n=Object.create(null);n[0]=new RegExp("(?:[;,] *|^)(?:htccn_chs-)?HTC[ _-]?([^;]+?)(?: *Build|clay|Android|-?Mozilla| Opera| Profile| UNTRUSTED|[;/\\(\\)]|$)");n[1]="HTC $1";n[2]=0;n[3]=0;n[4]=0;i.device[167]=n;n=Object.create(null);n[0]=new RegExp("; *(A6277|ADR6200|ADR6300|ADR6350|ADR6400[A-Z]*|ADR6425[A-Z]*|APX515CKT|ARIA|Desire[^_ ]*|Dream|EndeavorU|Eris|Evo|Flyer|HD2|Hero|HERO200|Hero CDMA|HTL21|Incredible|Inspire[A-Z0-9]*|Legend|Liberty|Nexus ?(?:One|HD2)|One|One S C2|One[ _]?(?:S|V|X\\+?)\\w*|PC36100|PG06100|PG86100|S31HT|Sensation|Wildfire)(?: Build|[/;\\(\\)])");n[1]="HTC $1";n[2]=0;n[3]=0;n[4]=0;i.device[168]=n;n=Object.create(null);n[0]=new RegExp("; *(ADR6200|ADR6400L|ADR6425LVW|Amaze|DesireS?|EndeavorU|Eris|EVO|Evo\\d[A-Z]+|HD2|IncredibleS?|Inspire[A-Z0-9]*|Inspire[A-Z0-9]*|Sensation[A-Z0-9]*|Wildfire)[ _-](.+?)(?:[/;\\)]|Build|MIUI|1\\.0)");n[1]="HTC $1 $2";n[2]=0;n[3]=0;n[4]=0;i.device[169]=n;n=Object.create(null);n[0]=new RegExp("; *HYUNDAI (T\\d[^/]*) Build");n[1]="Hyundai $1";n[2]=0;n[3]=0;n[4]=0;i.device[170]=n;n=Object.create(null);n[0]=new RegExp("; *HYUNDAI ([^;/]+) Build");n[1]="Hyundai $1";n[2]=0;n[3]=0;n[4]=0;i.device[171]=n;n=Object.create(null);n[0]=new RegExp("; *(X700|Hold X|MB-6900) Build");n[1]="Hyundai $1";n[2]=0;n[3]=0;n[4]=0;i.device[172]=n;n=Object.create(null);n[0]=new RegExp("; *(?:iBall[ _\\-])?(Andi)[ _]?(\\d[^;/]*) Build");n[1]="$1 $2";n[2]=0;n[3]=0;n[4]=0;i.device[173]=n;n=Object.create(null);n[0]=new RegExp("; *(IBall)(?:[ _]([^;/]+)|) Build");n[1]="$1 $2";n[2]=0;n[3]=0;n[4]=0;i.device[174]=n;n=Object.create(null);n[0]=new RegExp("; *(NT-\\d+[^ ;/]*|Net[Tt]AB [^;/]+|Mercury [A-Z]+|iconBIT)(?: S/N:[^;/]+)? Build");n[1]="$1";n[2]=0;n[3]=0;n[4]=0;i.device[175]=n;n=Object.create(null);n[0]=new RegExp("; *(IMO)[ _]([^;/]+) Build");n[1]="$1 $2";n[2]=0;n[3]=0;n[4]=0;i.device[176]=n;n=Object.create(null);n[0]=new RegExp("; *i-?mobile[ _]([^/]+) Build/");n[1]="i-mobile $1";n[2]=0;n[3]=0;n[4]=0;i.device[177]=n;n=Object.create(null);n[0]=new RegExp("; *(i-(?:style|note)[^/]*) Build/");n[1]="i-mobile $1";n[2]=0;n[3]=0;n[4]=0;i.device[178]=n;n=Object.create(null);n[0]=new RegExp("; *(ImPAD) ?(\\d+(?:.)*) Build");n[1]="$1 $2";n[2]=0;n[3]=0;n[4]=0;i.device[179]=n;n=Object.create(null);n[0]=new RegExp("; *(Infinix)[ _]([^;/]+) Build");n[1]="$1 $2";n[2]=0;n[3]=0;n[4]=0;i.device[180]=n;n=Object.create(null);n[0]=new RegExp("; *(Informer)[ \\-]([^;/]+) Build");n[1]="$1 $2";n[2]=0;n[3]=0;n[4]=0;i.device[181]=n;n=Object.create(null);n[0]=new RegExp("; *(TAB) ?([78][12]4) Build");n[1]="Intenso $1";n[2]=0;n[3]=0;n[4]=0;i.device[182]=n;n=Object.create(null);n[0]=new RegExp("; *(?:Intex[ _])?(AQUA|Aqua)([ _\\.\\-])([^;/]+) *(?:Build|;)");n[1]="$1$2$3";n[2]=0;n[3]=0;n[4]=0;i.device[183]=n;n=Object.create(null);n[0]=new RegExp("; *(?:INTEX|Intex)(?:[_ ]([^\\ _;/]+))(?:[_ ]([^\\ _;/]+))? *(?:Build|;)");n[1]="$1 $2";n[2]=0;n[3]=0;n[4]=0;i.device[184]=n;n=Object.create(null);n[0]=new RegExp("; *([iI]Buddy)[ _]?(Connect)(?:_|\\?_| )?([^;/]*) *(?:Build|;)");n[1]="$1 $2 $3";n[2]=0;n[3]=0;n[4]=0;i.device[185]=n;n=Object.create(null);n[0]=new RegExp("; *(I-Buddy)[ _]([^;/]+) *(?:Build|;)");n[1]="$1 $2";n[2]=0;n[3]=0;n[4]=0;i.device[186]=n;n=Object.create(null);n[0]=new RegExp("; *(iOCEAN) ([^/]+) Build");n[1]="$1 $2";n[2]=0;n[3]=0;n[4]=0;i.device[187]=n;n=Object.create(null);n[0]=new RegExp("; *(TP\\d+(?:\\.\\d+)?\\-\\d[^;/]+) Build");n[1]="ionik $1";n[2]=0;n[3]=0;n[4]=0;i.device[188]=n;n=Object.create(null);n[0]=new RegExp("; *(M702pro) Build");n[1]="$1";n[2]=0;n[3]=0;n[4]=0;i.device[189]=n;n=Object.create(null);n[0]=new RegExp("; *(DE88Plus|MD70) Build");n[1]="$1";n[2]=0;n[3]=0;n[4]=0;i.device[190]=n;n=Object.create(null);n[0]=new RegExp("; *IVIO[_\\-]([^;/]+) Build");n[1]="$1";n[2]=0;n[3]=0;n[4]=0;i.device[191]=n;n=Object.create(null);n[0]=new RegExp("; *(TPC-\\d+|JAY-TECH) Build");n[1]="$1";n[2]=0;n[3]=0;n[4]=0;i.device[192]=n;n=Object.create(null);n[0]=new RegExp("; *(JY-[^;/]+|G[234]S?) Build");n[1]="$1";n[2]=0;n[3]=0;n[4]=0;i.device[193]=n;n=Object.create(null);n[0]=new RegExp("; *(JXD)[ _\\-]([^;/]+) Build");n[1]="$1 $2";n[2]=0;n[3]=0;n[4]=0;i.device[194]=n;n=Object.create(null);n[0]=new RegExp("; *Karbonn[ _]?([^;/]+) *(?:Build|;)");n[1]="$1";n[2]=0;n[3]=0;n[4]=0;i.device[195]=n;n=Object.create(null);n[0]=new RegExp("; *([^;]+) Build/Karbonn");n[1]="$1";n[2]=0;n[3]=0;n[4]=0;i.device[196]=n;n=Object.create(null);n[0]=new RegExp("; *(A11|A39|A37|A34|ST8|ST10|ST7|Smart Tab3|Smart Tab2|Titanium S\\d) +Build");n[1]="$1";n[2]=0;n[3]=0;n[4]=0;i.device[197]=n;n=Object.create(null);n[0]=new RegExp("; *(IS01|IS03|IS05|IS\\d{2}SH) Build");n[1]="$1";n[2]=0;n[3]=0;n[4]=0;i.device[198]=n;n=Object.create(null);n[0]=new RegExp("; *(IS04) Build");n[1]="$1";n[2]=0;n[3]=0;n[4]=0;i.device[199]=n;n=Object.create(null);n[0]=new RegExp("; *(IS06|IS\\d{2}PT) Build");n[1]="$1";n[2]=0;n[3]=0;n[4]=0;i.device[200]=n;n=Object.create(null);n[0]=new RegExp("; *(IS11S) Build");n[1]="$1";n[2]=0;n[3]=0;n[4]=0;i.device[201]=n;n=Object.create(null);n[0]=new RegExp("; *(IS11CA) Build");n[1]="$1";n[2]=0;n[3]=0;n[4]=0;i.device[202]=n;n=Object.create(null);n[0]=new RegExp("; *(IS11LG) Build");n[1]="$1";n[2]=0;n[3]=0;n[4]=0;i.device[203]=n;n=Object.create(null);n[0]=new RegExp("; *(IS11N) Build");n[1]="$1";n[2]=0;n[3]=0;n[4]=0;i.device[204]=n;n=Object.create(null);n[0]=new RegExp("; *(IS11PT) Build");n[1]="$1";n[2]=0;n[3]=0;n[4]=0;i.device[205]=n;n=Object.create(null);n[0]=new RegExp("; *(IS12F) Build");n[1]="$1";n[2]=0;n[3]=0;n[4]=0;i.device[206]=n;n=Object.create(null);n[0]=new RegExp("; *(IS12M) Build");n[1]="$1";n[2]=0;n[3]=0;n[4]=0;i.device[207]=n;n=Object.create(null);n[0]=new RegExp("; *(IS12S) Build");n[1]="$1";n[2]=0;n[3]=0;n[4]=0;i.device[208]=n;n=Object.create(null);n[0]=new RegExp("; *(ISW11F) Build");n[1]="$1";n[2]=0;n[3]=0;n[4]=0;i.device[209]=n;n=Object.create(null);n[0]=new RegExp("; *(ISW11HT) Build");n[1]="$1";n[2]=0;n[3]=0;n[4]=0;i.device[210]=n;n=Object.create(null);n[0]=new RegExp("; *(ISW11K) Build");n[1]="$1";n[2]=0;n[3]=0;n[4]=0;i.device[211]=n;n=Object.create(null);n[0]=new RegExp("; *(ISW11M) Build");n[1]="$1";n[2]=0;n[3]=0;n[4]=0;i.device[212]=n;n=Object.create(null);n[0]=new RegExp("; *(ISW11SC) Build");n[1]="$1";n[2]=0;n[3]=0;n[4]=0;i.device[213]=n;n=Object.create(null);n[0]=new RegExp("; *(ISW12HT) Build");n[1]="$1";n[2]=0;n[3]=0;n[4]=0;i.device[214]=n;n=Object.create(null);n[0]=new RegExp("; *(ISW13HT) Build");n[1]="$1";n[2]=0;n[3]=0;n[4]=0;i.device[215]=n;n=Object.create(null);n[0]=new RegExp("; *(ISW?[0-9]{2}[A-Z]{0,2}) Build");n[1]="$1";n[2]=0;n[3]=0;n[4]=0;i.device[216]=n;n=Object.create(null);n[0]=new RegExp("; *(INFOBAR [^;/]+) Build");n[1]="$1";n[2]=0;n[3]=0;n[4]=0;i.device[217]=n;n=Object.create(null);n[0]=new RegExp("; *(JOYPAD|Joypad)[ _]([^;/]+) Build/");n[1]="$1 $2";n[2]=0;n[3]=0;n[4]=0;i.device[218]=n;n=Object.create(null);n[0]=new RegExp("; *(Vox|VOX|Arc|K080) Build/");n[1]="$1";n[2]=0;n[3]=0;n[4]=0;i.device[219]=n;n=Object.create(null);n[0]=new RegExp("\\b(Kobo Touch)\\b");n[1]="$1";n[2]=0;n[3]=0;n[4]=0;i.device[220]=n;n=Object.create(null);n[0]=new RegExp("; *(K-Touch)[ _]([^;/]+) Build");n[1]="$1 $2";n[2]=0;n[3]=0;n[4]=0;i.device[221]=n;n=Object.create(null);n[0]=new RegExp("; *((?:EV|KM)-S\\d+[A-Z]?) Build");n[1]="$1";n[2]=0;n[3]=0;n[4]=0;i.device[222]=n;n=Object.create(null);n[0]=new RegExp("; *(Zio|Hydro|Torque|Event|EVENT|Echo|Milano|Rise|URBANO PROGRESSO|WX04K|WX06K|WX10K|KYL21|101K|C5[12]\\d{2}) Build/");n[1]="$1";n[2]=0;n[3]=0;n[4]=0;i.device[223]=n;n=Object.create(null);n[0]=new RegExp("; *(?:LAVA[ _])?IRIS[ _\\-]?([^/;\\)]+) *(?:;|\\)|Build)");n[1]="Iris $1";n[2]=0;n[3]=0;n[4]=0;i.device[224]=n;n=Object.create(null);n[0]=new RegExp("; *LAVA[ _]([^;/]+) Build");n[1]="$1";n[2]=0;n[3]=0;n[4]=0;i.device[225]=n;n=Object.create(null);n[0]=new RegExp("; *(?:(Aspire A1)|(?:LEMON|Lemon)[ _]([^;/]+))_? Build");n[1]="Lemon $1$2";n[2]=0;n[3]=0;n[4]=0;i.device[226]=n;n=Object.create(null);n[0]=new RegExp("; *(TAB-1012) Build/");n[1]="Lenco $1";n[2]=0;n[3]=0;n[4]=0;i.device[227]=n;n=Object.create(null);n[0]=new RegExp("; Lenco ([^;/]+) Build/");n[1]="Lenco $1";n[2]=0;n[3]=0;n[4]=0;i.device[228]=n;n=Object.create(null);n[0]=new RegExp("; *(A1_07|A2107A-H|S2005A-H|S1-37AH0) Build");n[1]="$1";n[2]=0;n[3]=0;n[4]=0;i.device[229]=n;n=Object.create(null);n[0]=new RegExp("; *(Idea[Tp]ab)[ _]([^;/]+);? Build");n[1]="Lenovo $1 $2";n[2]=0;n[3]=0;n[4]=0;i.device[230]=n;n=Object.create(null);n[0]=new RegExp("; *(Idea(?:Tab|pad)) ?([^;/]+) Build");n[1]="Lenovo $1 $2";n[2]=0;n[3]=0;n[4]=0;i.device[231]=n;n=Object.create(null);n[0]=new RegExp("; *(ThinkPad) ?(Tablet) Build/");n[1]="Lenovo $1 $2";n[2]=0;n[3]=0;n[4]=0;i.device[232]=n;n=Object.create(null);n[0]=new RegExp("; *(?:LNV-)?(?:=?[Ll]enovo[ _\\-]?|LENOVO[ _])+(.+?)(?:Build|[;/\\)])");n[1]="Lenovo $1";n[2]=0;n[3]=0;n[4]=0;i.device[233]=n;n=Object.create(null);n[0]=new RegExp("[;,] (?:Vodafone )?(SmartTab) ?(II) ?(\\d+) Build/");n[1]="Lenovo $1 $2 $3";n[2]=0;n[3]=0;n[4]=0;i.device[234]=n;n=Object.create(null);n[0]=new RegExp("; *(?:Ideapad )?K1 Build/");n[1]="Lenovo Ideapad K1";n[2]=0;n[3]=0;n[4]=0;i.device[235]=n;n=Object.create(null);n[0]=new RegExp("; *(3GC101|3GW10[01]|A390) Build/");n[1]="$1";n[2]=0;n[3]=0;n[4]=0;i.device[236]=n;n=Object.create(null);n[0]=new RegExp("\\b(?:Lenovo|LENOVO)+[ _\\-]?([^,;:/ ]+)");n[1]="Lenovo $1";n[2]=0;n[3]=0;n[4]=0;i.device[237]=n;n=Object.create(null);n[0]=new RegExp("; *(MFC\\d+)[A-Z]{2}([^;,/]*),? Build");n[1]="$1$2";n[2]=0;n[3]=0;n[4]=0;i.device[238]=n;n=Object.create(null);n[0]=new RegExp("; *(E[34][0-9]{2}|LS[6-8][0-9]{2}|VS[6-9][0-9]+[^;/]+|Nexus 4|Nexus 5X?|GT540f?|Optimus (?:2X|G|4X HD)|OptimusX4HD) *(?:Build|;)");n[1]="$1";n[2]=0;n[3]=0;n[4]=0;i.device[239]=n;n=Object.create(null);n[0]=new RegExp("[;:] *(L-\\d+[A-Z]|LGL\\d+[A-Z]?)(?:/V\\d+)? *(?:Build|[;\\)])");n[1]="$1";n[2]=0;n[3]=0;n[4]=0;i.device[240]=n;n=Object.create(null);n[0]=new RegExp("; *(LG-)([A-Z]{1,2}\\d{2,}[^,;/\\)\\(]*?)(?:Build| V\\d+|[,;/\\)\\(]|$)");n[1]="$1$2";n[2]=0;n[3]=0;n[4]=0;i.device[241]=n;n=Object.create(null);n[0]=new RegExp("; *(LG[ \\-]|LG)([^;/]+)[;/]? Build");n[1]="$1$2";n[2]=0;n[3]=0;n[4]=0;i.device[242]=n;n=Object.create(null);n[0]=new RegExp("^(LG)-([^;/]+)/ Mozilla/.*; Android");n[1]="$1 $2";n[2]=0;n[3]=0;n[4]=0;i.device[243]=n;n=Object.create(null);n[0]=new RegExp("(Web0S); Linux/(SmartTV)");n[1]="LG $1 $2";n[2]=0;n[3]=0;n[4]=0;i.device[244]=n;n=Object.create(null);n[0]=new RegExp("; *((?:SMB|smb)[^;/]+) Build/");n[1]="$1";n[2]=0;n[3]=0;n[4]=0;i.device[245]=n;n=Object.create(null);n[0]=new RegExp("; *(?:Malata|MALATA) ([^;/]+) Build/");n[1]="$1";n[2]=0;n[3]=0;n[4]=0;i.device[246]=n;n=Object.create(null);n[0]=new RegExp("; *(MS[45][0-9]{3}|MID0[568][NS]?|MID[1-9]|MID[78]0[1-9]|MID970[1-9]|MID100[1-9]) Build/");n[1]="$1";n[2]=0;n[3]=0;n[4]=0;i.device[247]=n;n=Object.create(null);n[0]=new RegExp("; *(M1052|M806|M9000|M9100|M9701|MID100|MID120|MID125|MID130|MID135|MID140|MID701|MID710|MID713|MID727|MID728|MID731|MID732|MID733|MID735|MID736|MID737|MID760|MID800|MID810|MID820|MID830|MID833|MID835|MID860|MID900|MID930|MID933|MID960|MID980) Build/");n[1]="$1";n[2]=0;n[3]=0;n[4]=0;i.device[248]=n;n=Object.create(null);n[0]=new RegExp("; *(GenxDroid7|MSD7.*|AX\\d.*|Tab 701|Tab 722) Build/");n[1]="Maxx $1";n[2]=0;n[3]=0;n[4]=0;i.device[249]=n;n=Object.create(null);n[0]=new RegExp("; *(M-PP[^;/]+|PhonePad ?\\d{2,}[^;/]+) Build");n[1]="Mediacom $1";n[2]=0;n[3]=0;n[4]=0;i.device[250]=n;n=Object.create(null);n[0]=new RegExp("; *(M-MP[^;/]+|SmartPad ?\\d{2,}[^;/]+) Build");n[1]="Mediacom $1";n[2]=0;n[3]=0;n[4]=0;i.device[251]=n;n=Object.create(null);n[0]=new RegExp("; *(?:MD_)?LIFETAB[ _]([^;/]+) Build");n[1]="Medion Lifetab $1";n[2]=0;n[3]=0;n[4]=0;i.device[252]=n;n=Object.create(null);n[0]=new RegExp("; *MEDION ([^;/]+) Build");n[1]="Medion $1";n[2]=0;n[3]=0;n[4]=0;i.device[253]=n;n=Object.create(null);n[0]=new RegExp("; *(M030|M031|M035|M040|M065|m9) Build");n[1]="Meizu $1";n[2]=0;n[3]=0;n[4]=0;i.device[254]=n;n=Object.create(null);n[0]=new RegExp("; *(?:meizu_|MEIZU )(.+?) *(?:Build|[;\\)])");n[1]="Meizu $1";n[2]=0;n[3]=0;n[4]=0;i.device[255]=n;n=Object.create(null);n[0]=new RegExp("; *(?:Micromax[ _](A111|A240)|(A111|A240)) Build");n[1]="Micromax $1$2";n[2]=0;n[3]=0;n[4]=0;i.device[256]=n;n=Object.create(null);n[0]=new RegExp("; *Micromax[ _](A\\d{2,3}[^;/]*) Build");n[1]="Micromax $1";n[2]=0;n[3]=0;n[4]=0;i.device[257]=n;n=Object.create(null);n[0]=new RegExp("; *(A\\d{2}|A[12]\\d{2}|A90S|A110Q) Build");n[1]="Micromax $1";n[2]=0;n[3]=0;n[4]=0;i.device[258]=n;n=Object.create(null);n[0]=new RegExp("; *Micromax[ _](P\\d{3}[^;/]*) Build");n[1]="Micromax $1";n[2]=0;n[3]=0;n[4]=0;i.device[259]=n;n=Object.create(null);n[0]=new RegExp("; *(P\\d{3}|P\\d{3}\\(Funbook\\)) Build");n[1]="Micromax $1";n[2]=0;n[3]=0;n[4]=0;i.device[260]=n;n=Object.create(null);n[0]=new RegExp("; *(MITO)[ _\\-]?([^;/]+) Build");n[1]="$1 $2";n[2]=0;n[3]=0;n[4]=0;i.device[261]=n;n=Object.create(null);n[0]=new RegExp("; *(Cynus)[ _](F5|T\\d|.+?) *(?:Build|[;/\\)])");n[1]="$1 $2";n[2]=0;n[3]=0;n[4]=0;i.device[262]=n;n=Object.create(null);n[0]=new RegExp("; *(MODECOM )?(FreeTab) ?([^;/]+) Build");n[1]="$1$2 $3";n[2]=0;n[3]=0;n[4]=0;i.device[263]=n;n=Object.create(null);n[0]=new RegExp("; *(MODECOM )([^;/]+) Build");n[1]="$1 $2";n[2]=0;n[3]=0;n[4]=0;i.device[264]=n;n=Object.create(null);n[0]=new RegExp("; *(MZ\\d{3}\\+?|MZ\\d{3} 4G|Xoom|XOOM[^;/]*) Build");n[1]="Motorola $1";n[2]=0;n[3]=0;n[4]=0;i.device[265]=n;n=Object.create(null);n[0]=new RegExp("; *(Milestone )(XT[^;/]*) Build");n[1]="Motorola $1$2";n[2]=0;n[3]=0;n[4]=0;i.device[266]=n;n=Object.create(null);n[0]=new RegExp("; *(Motoroi ?x|Droid X|DROIDX) Build");n[1]="Motorola $1";n[2]=0;n[3]=0;n[4]=0;i.device[267]=n;n=Object.create(null);n[0]=new RegExp("; *(Droid[^;/]*|DROID[^;/]*|Milestone[^;/]*|Photon|Triumph|Devour|Titanium) Build");n[1]="Motorola $1";n[2]=0;n[3]=0;n[4]=0;i.device[268]=n;n=Object.create(null);n[0]=new RegExp("; *(A555|A85[34][^;/]*|A95[356]|ME[58]\\d{2}\\+?|ME600|ME632|ME722|MB\\d{3}\\+?|MT680|MT710|MT870|MT887|MT917|WX435|WX453|WX44[25]|XT\\d{3,4}[A-Z\\+]*|CL[iI]Q|CL[iI]Q XT) Build");n[1]="$1";n[2]=0;n[3]=0;n[4]=0;i.device[269]=n;n=Object.create(null);n[0]=new RegExp("; *(Motorola MOT-|Motorola[ _\\-]|MOT\\-?)([^;/]+) Build");n[1]="$1$2";n[2]=0;n[3]=0;n[4]=0;i.device[270]=n;n=Object.create(null);n[0]=new RegExp("; *(Moto[_ ]?|MOT\\-)([^;/]+) Build");n[1]="$1$2";n[2]=0;n[3]=0;n[4]=0;i.device[271]=n;n=Object.create(null);n[0]=new RegExp("; *((?:MP[DQ]C|MPG\\d{1,4}|MP\\d{3,4}|MID(?:(?:10[234]|114|43|7[247]|8[24]|7)C|8[01]1))[^;/]*) Build");n[1]="$1";n[2]=0;n[3]=0;n[4]=0;i.device[272]=n;n=Object.create(null);n[0]=new RegExp("; *(?:MSI[ _])?(Primo\\d+|Enjoy[ _\\-][^;/]+) Build");n[1]="$1";n[2]=0;n[3]=0;n[4]=0;i.device[273]=n;n=Object.create(null);n[0]=new RegExp("; *Multilaser[ _]([^;/]+) Build");n[1]="$1";n[2]=0;n[3]=0;n[4]=0;i.device[274]=n;n=Object.create(null);n[0]=new RegExp("; *(My)[_]?(Pad)[ _]([^;/]+) Build");n[1]="$1$2 $3";n[2]=0;n[3]=0;n[4]=0;i.device[275]=n;n=Object.create(null);n[0]=new RegExp("; *(My)\\|?(Phone)[ _]([^;/]+) Build");n[1]="$1$2 $3";n[2]=0;n[3]=0;n[4]=0;i.device[276]=n;n=Object.create(null);n[0]=new RegExp("; *(A\\d+)[ _](Duo)? Build");n[1]="$1 $2";n[2]=0;n[3]=0;n[4]=0;i.device[277]=n;n=Object.create(null);n[0]=new RegExp("; *(myTab[^;/]*) Build");n[1]="$1";n[2]=0;n[3]=0;n[4]=0;i.device[278]=n;n=Object.create(null);n[0]=new RegExp("; *(NABI2?-)([^;/]+) Build/");n[1]="$1$2";n[2]=0;n[3]=0;n[4]=0;i.device[279]=n;n=Object.create(null);n[0]=new RegExp("; *(N-\\d+[CDE]) Build/");n[1]="$1";n[2]=0;n[3]=0;n[4]=0;i.device[280]=n;n=Object.create(null);n[0]=new RegExp("; ?(NEC-)(.*) Build/");n[1]="$1$2";n[2]=0;n[3]=0;n[4]=0;i.device[281]=n;n=Object.create(null);n[0]=new RegExp("; *(LT-NA7) Build/");n[1]="$1";n[2]=0;n[3]=0;n[4]=0;i.device[282]=n;n=Object.create(null);n[0]=new RegExp("; *(NXM\\d+[A-z0-9_]*|Next\\d[A-z0-9_ \\-]*|NEXT\\d[A-z0-9_ \\-]*|Nextbook [A-z0-9_ ]*|DATAM803HC|M805)(?: Build|[\\);])");n[1]="$1";n[2]=0;n[3]=0;n[4]=0;i.device[283]=n;n=Object.create(null);n[0]=new RegExp("; *(Nokia)([ _\\-]*)([^;/]*) Build");n[1]="$1$2$3";n[2]=0;n[3]=0;n[4]=0;i.device[284]=n;n=Object.create(null);n[0]=new RegExp("; *(Nook ?|Barnes & Noble Nook |BN )([^;/]+) Build");n[1]="$1$2";n[2]=0;n[3]=0;n[4]=0;i.device[285]=n;n=Object.create(null);n[0]=new RegExp("; *(NOOK )?(BNRV200|BNRV200A|BNTV250|BNTV250A|BNTV400|BNTV600|LogicPD Zoom2) Build");n[1]="$1$2";n[2]=0;n[3]=0;n[4]=0;i.device[286]=n;n=Object.create(null);n[0]=new RegExp("; Build/(Nook)");n[1]="$1";n[2]=0;n[3]=0;n[4]=0;i.device[287]=n;n=Object.create(null);n[0]=new RegExp("; *(OP110|OliPad[^;/]+) Build");n[1]="Olivetti $1";n[2]=0;n[3]=0;n[4]=0;i.device[288]=n;n=Object.create(null);n[0]=new RegExp("; *OMEGA[ _\\-](MID[^;/]+) Build");n[1]="Omega $1";n[2]=0;n[3]=0;n[4]=0;i.device[289]=n;n=Object.create(null);n[0]=new RegExp("^(MID7500|MID\\d+) Mozilla/5\\.0 \\(iPad;");n[1]="Omega $1";n[2]=0;n[3]=0;n[4]=0;i.device[290]=n;n=Object.create(null);n[0]=new RegExp("; *((?:CIUS|cius)[^;/]*) Build");n[1]="Openpeak $1";n[2]=0;n[3]=0;n[4]=0;i.device[291]=n;n=Object.create(null);n[0]=new RegExp("; *(Find ?(?:5|7a)|R8[012]\\d{1,2}|T703\\d{0,1}|U70\\d{1,2}T?|X90\\d{1,2}) Build");n[1]="Oppo $1";n[2]=0;n[3]=0;n[4]=0;i.device[292]=n;n=Object.create(null);n[0]=new RegExp("; *OPPO ?([^;/]+) Build/");n[1]="Oppo $1";n[2]=0;n[3]=0;n[4]=0;i.device[293]=n;n=Object.create(null);n[0]=new RegExp("; *(?:Odys\\-|ODYS\\-|ODYS )([^;/]+) Build");n[1]="Odys $1";n[2]=0;n[3]=0;n[4]=0;i.device[294]=n;n=Object.create(null);n[0]=new RegExp("; *(SELECT) ?(7) Build");n[1]="Odys $1 $2";n[2]=0;n[3]=0;n[4]=0;i.device[295]=n;n=Object.create(null);n[0]=new RegExp("; *(PEDI)_(PLUS)_(W) Build");n[1]="Odys $1 $2 $3";n[2]=0;n[3]=0;n[4]=0;i.device[296]=n;n=Object.create(null);n[0]=new RegExp("; *(AEON|BRAVIO|FUSION|FUSION2IN1|Genio|EOS10|IEOS[^;/]*|IRON|Loox|LOOX|LOOX Plus|Motion|NOON|NOON_PRO|NEXT|OPOS|PEDI[^;/]*|PRIME[^;/]*|STUDYTAB|TABLO|Tablet-PC-4|UNO_X8|XELIO[^;/]*|Xelio ?\\d+ ?[Pp]ro|XENO10|XPRESS PRO) Build");n[1]="Odys $1";n[2]=0;n[3]=0;n[4]=0;i.device[297]=n;n=Object.create(null);n[0]=new RegExp("; *(TP-\\d+) Build/");n[1]="Orion $1";n[2]=0;n[3]=0;n[4]=0;i.device[298]=n;n=Object.create(null);n[0]=new RegExp("; *(G100W?) Build/");n[1]="PackardBell $1";n[2]=0;n[3]=0;n[4]=0;i.device[299]=n;n=Object.create(null);n[0]=new RegExp("; *(Panasonic)[_ ]([^;/]+) Build");n[1]="$1 $2";n[2]=0;n[3]=0;n[4]=0;i.device[300]=n;n=Object.create(null);n[0]=new RegExp("; *(FZ-A1B|JT-B1) Build");n[1]="Panasonic $1";n[2]=0;n[3]=0;n[4]=0;i.device[301]=n;n=Object.create(null);n[0]=new RegExp("; *(dL1|DL1) Build");n[1]="Panasonic $1";n[2]=0;n[3]=0;n[4]=0;i.device[302]=n;n=Object.create(null);n[0]=new RegExp("; *(SKY[ _])?(IM\\-[AT]\\d{3}[^;/]+).* Build/");n[1]="Pantech $1$2";n[2]=0;n[3]=0;n[4]=0;i.device[303]=n;n=Object.create(null);n[0]=new RegExp("; *((?:ADR8995|ADR910L|ADR930L|ADR930VW|PTL21|P8000)(?: 4G)?) Build/");n[1]="$1";n[2]=0;n[3]=0;n[4]=0;i.device[304]=n;n=Object.create(null);n[0]=new RegExp("; *Pantech([^;/]+).* Build/");n[1]="Pantech $1";n[2]=0;n[3]=0;n[4]=0;i.device[305]=n;n=Object.create(null);n[0]=new RegExp("; *(papyre)[ _\\-]([^;/]+) Build/");n[1]="$1 $2";n[2]=0;n[3]=0;n[4]=0;i.device[306]=n;n=Object.create(null);n[0]=new RegExp("; *(?:Touchlet )?(X10\\.[^;/]+) Build/");n[1]="Pearl $1";n[2]=0;n[3]=0;n[4]=0;i.device[307]=n;n=Object.create(null);n[0]=new RegExp("; PHICOMM (i800) Build/");n[1]="Phicomm $1";n[2]=0;n[3]=0;n[4]=0;i.device[308]=n;n=Object.create(null);n[0]=new RegExp("; PHICOMM ([^;/]+) Build/");n[1]="Phicomm $1";n[2]=0;n[3]=0;n[4]=0;i.device[309]=n;n=Object.create(null);n[0]=new RegExp("; *(FWS\\d{3}[^;/]+) Build/");n[1]="Phicomm $1";n[2]=0;n[3]=0;n[4]=0;i.device[310]=n;n=Object.create(null);n[0]=new RegExp("; *(D633|D822|D833|T539|T939|V726|W335|W336|W337|W3568|W536|W5510|W626|W632|W6350|W6360|W6500|W732|W736|W737|W7376|W820|W832|W8355|W8500|W8510|W930) Build");n[1]="$1";n[2]=0;n[3]=0;n[4]=0;i.device[311]=n;n=Object.create(null);n[0]=new RegExp("; *(?:Philips|PHILIPS)[ _]([^;/]+) Build");n[1]="Philips $1";n[2]=0;n[3]=0;n[4]=0;i.device[312]=n;n=Object.create(null);n[0]=new RegExp("Android 4\\..*; *(M[12356789]|U[12368]|S[123])\\ ?(pro)? Build");n[1]="Pipo $1$2";n[2]=0;n[3]=0;n[4]=0;i.device[313]=n;n=Object.create(null);n[0]=new RegExp("; *(MOMO[^;/]+) Build");n[1]="$1";n[2]=0;n[3]=0;n[4]=0;i.device[314]=n;n=Object.create(null);n[0]=new RegExp("; *(?:Polaroid[ _])?((?:MIDC\\d{3,}|PMID\\d{2,}|PTAB\\d{3,})[^;/]*)(\\/[^;/]*)? Build/");n[1]="$1";n[2]=0;n[3]=0;n[4]=0;i.device[315]=n;n=Object.create(null);n[0]=new RegExp("; *(?:Polaroid )(Tablet) Build/");n[1]="$1";n[2]=0;n[3]=0;n[4]=0;i.device[316]=n;n=Object.create(null);n[0]=new RegExp("; *(POMP)[ _\\-](.+?) *(?:Build|[;/\\)])");n[1]="$1 $2";n[2]=0;n[3]=0;n[4]=0;i.device[317]=n;n=Object.create(null);n[0]=new RegExp("; *(TB07STA|TB10STA|TB07FTA|TB10FTA) Build/");n[1]="$1";n[2]=0;n[3]=0;n[4]=0;i.device[318]=n;n=Object.create(null);n[0]=new RegExp("; *(?:Positivo )?((?:YPY|Ypy)[^;/]+) Build/");n[1]="$1";n[2]=0;n[3]=0;n[4]=0;i.device[319]=n;n=Object.create(null);n[0]=new RegExp("; *(MOB-[^;/]+) Build/");n[1]="$1";n[2]=0;n[3]=0;n[4]=0;i.device[320]=n;n=Object.create(null);n[0]=new RegExp("; *POV[ _\\-]([^;/]+) Build/");n[1]="POV $1";n[2]=0;n[3]=0;n[4]=0;i.device[321]=n;n=Object.create(null);n[0]=new RegExp("; *((?:TAB-PLAYTAB|TAB-PROTAB|PROTAB|PlayTabPro|Mobii[ _\\-]|TAB-P)[^;/]*) Build/");n[1]="POV $1";n[2]=0;n[3]=0;n[4]=0;i.device[322]=n;n=Object.create(null);n[0]=new RegExp("; *(?:Prestigio )?((?:PAP|PMP)\\d[^;/]+) Build/");n[1]="Prestigio $1";n[2]=0;n[3]=0;n[4]=0;i.device[323]=n;n=Object.create(null);n[0]=new RegExp("; *(PLT[0-9]{4}.*) Build/");n[1]="$1";n[2]=0;n[3]=0;n[4]=0;i.device[324]=n;n=Object.create(null);n[0]=new RegExp("; *(A2|A5|A8|A900)_?(Classic)? Build");n[1]="$1 $2";n[2]=0;n[3]=0;n[4]=0;i.device[325]=n;n=Object.create(null);n[0]=new RegExp("; *(Q[Mm]obile)_([^_]+)_([^_]+) Build");n[1]="Qmobile $2 $3";n[2]=0;n[3]=0;n[4]=0;i.device[326]=n;n=Object.create(null);n[0]=new RegExp("; *(Q\\-?[Mm]obile)[_ ](A[^;/]+) Build");n[1]="Qmobile $2";n[2]=0;n[3]=0;n[4]=0;i.device[327]=n;n=Object.create(null);n[0]=new RegExp("; *(Q\\-Smart)[ _]([^;/]+) Build/");n[1]="$1 $2";n[2]=0;n[3]=0;n[4]=0;i.device[328]=n;n=Object.create(null);n[0]=new RegExp("; *(Q\\-?[Mm]obile)[ _\\-](S[^;/]+) Build/");n[1]="$1 $2";n[2]=0;n[3]=0;n[4]=0;i.device[329]=n;n=Object.create(null);n[0]=new RegExp("; *(TA1013) Build");n[1]="$1";n[2]=0;n[3]=0;n[4]=0;i.device[330]=n;n=Object.create(null);n[0]=new RegExp("; *(RK\\d+),? Build/");n[1]="$1";n[2]=0;n[3]=0;n[4]=0;i.device[331]=n;n=Object.create(null);n[0]=new RegExp(" Build/(RK\\d+)");n[1]="$1";n[2]=0;n[3]=0;n[4]=0;i.device[332]=n;n=Object.create(null);n[0]=new RegExp("; *(SAMSUNG |Samsung )?((?:Galaxy (?:Note II|S\\d)|GT-I9082|GT-I9205|GT-N7\\d{3}|SM-N9005)[^;/]*)\\/?[^;/]* Build/");n[1]="Samsung $1$2";n[2]=0;n[3]=0;n[4]=0;i.device[333]=n;n=Object.create(null);n[0]=new RegExp("; *(Google )?(Nexus [Ss](?: 4G)?) Build/");n[1]="Samsung $1$2";n[2]=0;n[3]=0;n[4]=0;i.device[334]=n;n=Object.create(null);n[0]=new RegExp("; *(SAMSUNG |Samsung )([^\\/]*)\\/[^ ]* Build/");n[1]="Samsung $2";n[2]=0;n[3]=0;n[4]=0;i.device[335]=n;n=Object.create(null);n[0]=new RegExp("; *(Galaxy(?: Ace| Nexus| S ?II+|Nexus S| with MCR 1.2| Mini Plus 4G)?) Build/");n[1]="Samsung $1";n[2]=0;n[3]=0;n[4]=0;i.device[336]=n;n=Object.create(null);n[0]=new RegExp("; *(SAMSUNG[ _\\-] *)+([^;/]+) Build");n[1]="Samsung $2";n[2]=0;n[3]=0;n[4]=0;i.device[337]=n;n=Object.create(null);n[0]=new RegExp("; *(SAMSUNG-)?(GT\\-[BINPS]\\d{4}[^\\/]*)(\\/[^ ]*) Build");n[1]="Samsung $1$2$3";n[2]=0;n[3]=0;n[4]=0;i.device[338]=n;n=Object.create(null);n[0]=new RegExp("(?:; *|^)((?:GT\\-[BIiNPS]\\d{4}|I9\\d{2}0[A-Za-z\\+]?\\b)[^;/\\)]*?)(?:Build|Linux|MIUI|[;/\\)])");n[1]="Samsung $1";n[2]=0;n[3]=0;n[4]=0;i.device[339]=n;n=Object.create(null);n[0]=new RegExp("; (SAMSUNG-)([A-Za-z0-9\\-]+).* Build/");n[1]="Samsung $1$2";n[2]=0;n[3]=0;n[4]=0;i.device[340]=n;n=Object.create(null);n[0]=new RegExp("; *((?:SCH|SGH|SHV|SHW|SPH|SC|SM)\\-[A-Za-z0-9 ]+)(/?[^ ]*)? Build");n[1]="Samsung $1";n[2]=0;n[3]=0;n[4]=0;i.device[341]=n;n=Object.create(null);n[0]=new RegExp(" ((?:SCH)\\-[A-Za-z0-9 ]+)(/?[^ ]*)? Build");n[1]="Samsung $1";n[2]=0;n[3]=0;n[4]=0;i.device[342]=n;n=Object.create(null);n[0]=new RegExp("; *(Behold ?(?:2|II)|YP\\-G[^;/]+|EK-GC100|SCL21|I9300) Build");n[1]="Samsung $1";n[2]=0;n[3]=0;n[4]=0;i.device[343]=n;n=Object.create(null);n[0]=new RegExp("; *(SH\\-?\\d\\d[^;/]+|SBM\\d[^;/]+) Build");n[1]="$1";n[2]=0;n[3]=0;n[4]=0;i.device[344]=n;n=Object.create(null);n[0]=new RegExp("; *(SHARP[ -])([^;/]+) Build");n[1]="$1$2";n[2]=0;n[3]=0;n[4]=0;i.device[345]=n;n=Object.create(null);n[0]=new RegExp("; *(SPX[_\\-]\\d[^;/]*) Build/");n[1]="$1";n[2]=0;n[3]=0;n[4]=0;i.device[346]=n;n=Object.create(null);n[0]=new RegExp("; *(SX7\\-PEARL\\.GmbH) Build/");n[1]="$1";n[2]=0;n[3]=0;n[4]=0;i.device[347]=n;n=Object.create(null);n[0]=new RegExp("; *(SP[T]?\\-\\d{2}[^;/]*) Build/");n[1]="$1";n[2]=0;n[3]=0;n[4]=0;i.device[348]=n;n=Object.create(null);n[0]=new RegExp("; *(SK\\-.*) Build/");n[1]="$1";n[2]=0;n[3]=0;n[4]=0;i.device[349]=n;n=Object.create(null);n[0]=new RegExp("; *(?:SKYTEX|SX)-([^;/]+) Build");n[1]="$1";n[2]=0;n[3]=0;n[4]=0;i.device[350]=n;n=Object.create(null);n[0]=new RegExp("; *(IMAGINE [^;/]+) Build");n[1]="$1";n[2]=0;n[3]=0;n[4]=0;i.device[351]=n;n=Object.create(null);n[0]=new RegExp("; *(SmartQ) ?([^;/]+) Build/");n[1]="$1 $2";n[2]=0;n[3]=0;n[4]=0;i.device[352]=n;n=Object.create(null);n[0]=new RegExp("; *(WF7C|WF10C|SBT[^;/]+) Build");n[1]="$1";n[2]=0;n[3]=0;n[4]=0;i.device[353]=n;n=Object.create(null);n[0]=new RegExp("; *(SBM(?:003SH|005SH|006SH|007SH|102SH)) Build");n[1]="$1";n[2]=0;n[3]=0;n[4]=0;i.device[354]=n;n=Object.create(null);n[0]=new RegExp("; *(003P|101P|101P11C|102P) Build");n[1]="$1";n[2]=0;n[3]=0;n[4]=0;i.device[355]=n;n=Object.create(null);n[0]=new RegExp("; *(00\\dZ) Build/");n[1]="$1";n[2]=0;n[3]=0;n[4]=0;i.device[356]=n;n=Object.create(null);n[0]=new RegExp("; HTC(X06HT) Build");n[1]="$1";n[2]=0;n[3]=0;n[4]=0;i.device[357]=n;n=Object.create(null);n[0]=new RegExp("; *(001HT|X06HT) Build");n[1]="$1";n[2]=0;n[3]=0;n[4]=0;i.device[358]=n;n=Object.create(null);n[0]=new RegExp("; *(201M) Build");n[1]="$1";n[2]=0;n[3]=0;n[4]=0;i.device[359]=n;n=Object.create(null);n[0]=new RegExp("; *(ST\\d{4}.*)Build/ST");n[1]="Trekstor $1";n[2]=0;n[3]=0;n[4]=0;i.device[360]=n;n=Object.create(null);n[0]=new RegExp("; *(ST\\d{4}.*) Build/");n[1]="Trekstor $1";n[2]=0;n[3]=0;n[4]=0;i.device[361]=n;n=Object.create(null);n[0]=new RegExp("; *(Sony ?Ericsson ?)([^;/]+) Build");n[1]="$1$2";n[2]=0;n[3]=0;n[4]=0;i.device[362]=n;n=Object.create(null);n[0]=new RegExp("; *((?:SK|ST|E|X|LT|MK|MT|WT)\\d{2}[a-z0-9]*(?:-o)?|R800i|U20i) Build");n[1]="$1";n[2]=0;n[3]=0;n[4]=0;i.device[363]=n;n=Object.create(null);n[0]=new RegExp("; *(Xperia (?:A8|Arc|Acro|Active|Live with Walkman|Mini|Neo|Play|Pro|Ray|X\\d+)[^;/]*) Build");n[1]="$1";n[2]=0;n[3]=0;n[4]=0;i.device[364]=n;n=Object.create(null);n[0]=new RegExp("; Sony (Tablet[^;/]+) Build");n[1]="Sony $1";n[2]=0;n[3]=0;n[4]=0;i.device[365]=n;n=Object.create(null);n[0]=new RegExp("; Sony ([^;/]+) Build");n[1]="Sony $1";n[2]=0;n[3]=0;n[4]=0;i.device[366]=n;n=Object.create(null);n[0]=new RegExp("; *(Sony)([A-Za-z0-9\\-]+) Build");n[1]="$1 $2";n[2]=0;n[3]=0;n[4]=0;i.device[367]=n;n=Object.create(null);n[0]=new RegExp("; *(Xperia [^;/]+) Build");n[1]="$1";n[2]=0;n[3]=0;n[4]=0;i.device[368]=n;n=Object.create(null);n[0]=new RegExp("; *(C(?:1[0-9]|2[0-9]|53|55|6[0-9])[0-9]{2}|D[25]\\d{3}|D6[56]\\d{2}) Build");n[1]="$1";n[2]=0;n[3]=0;n[4]=0;i.device[369]=n;n=Object.create(null);n[0]=new RegExp("; *(SGP\\d{3}|SGPT\\d{2}) Build");n[1]="$1";n[2]=0;n[3]=0;n[4]=0;i.device[370]=n;n=Object.create(null);n[0]=new RegExp("; *(NW-Z1000Series) Build");n[1]="$1";n[2]=0;n[3]=0;n[4]=0;i.device[371]=n;n=Object.create(null);n[0]=new RegExp("PLAYSTATION 3");n[1]="PlayStation 3";n[2]=0;n[3]=0;n[4]=0;i.device[372]=n;n=Object.create(null);n[0]=new RegExp("(PlayStation (?:Portable|Vita|\\d+))");n[1]="$1";n[2]=0;n[3]=0;n[4]=0;i.device[373]=n;n=Object.create(null);n[0]=new RegExp("; *((?:CSL_Spice|Spice|SPICE|CSL)[ _\\-]?)?([Mm][Ii])([ _\\-])?(\\d{3}[^;/]*) Build/");n[1]="$1$2$3$4";n[2]=0;n[3]=0;n[4]=0;i.device[374]=n;n=Object.create(null);n[0]=new RegExp("; *(Sprint )(.+?) *(?:Build|[;/])");n[1]="$1$2";n[2]=0;n[3]=0;n[4]=0;i.device[375]=n;n=Object.create(null);n[0]=new RegExp("\\b(Sprint)[: ]([^;,/ ]+)");n[1]="$1$2";n[2]=0;n[3]=0;n[4]=0;i.device[376]=n;n=Object.create(null);n[0]=new RegExp("; *(TAGI[ ]?)(MID) ?([^;/]+) Build/");n[1]="$1$2$3";n[2]=0;n[3]=0;n[4]=0;i.device[377]=n;n=Object.create(null);n[0]=new RegExp("; *(Oyster500|Opal 800) Build");n[1]="Tecmobile $1";n[2]=0;n[3]=0;n[4]=0;i.device[378]=n;n=Object.create(null);n[0]=new RegExp("; *(TECNO[ _])([^;/]+) Build/");n[1]="$1$2";n[2]=0;n[3]=0;n[4]=0;i.device[379]=n;n=Object.create(null);n[0]=new RegExp("; *Android for (Telechips|Techvision) ([^ ]+) ");n[1]="$1 $2";n[2]=0;n[3]=0;n[4]=0;i.device[380]=n;n=Object.create(null);n[0]=new RegExp("; *(T-Hub2) Build/");n[1]="$1";n[2]=0;n[3]=0;n[4]=0;i.device[381]=n;n=Object.create(null);n[0]=new RegExp("; *(PAD) ?(100[12]) Build/");n[1]="Terra $1$2";n[2]=0;n[3]=0;n[4]=0;i.device[382]=n;n=Object.create(null);n[0]=new RegExp("; *(T[BM]-\\d{3}[^;/]+) Build/");n[1]="$1";n[2]=0;n[3]=0;n[4]=0;i.device[383]=n;n=Object.create(null);n[0]=new RegExp("; *(tolino [^;/]+) Build");n[1]="$1";n[2]=0;n[3]=0;n[4]=0;i.device[384]=n;n=Object.create(null);n[0]=new RegExp("; *Build/.* (TOLINO_BROWSER)");n[1]="$1";n[2]=0;n[3]=0;n[4]=0;i.device[385]=n;n=Object.create(null);n[0]=new RegExp("; *(?:CJ[ -])?(ThL|THL)[ -]([^;/]+) Build/");n[1]="$1 $2";n[2]=0;n[3]=0;n[4]=0;i.device[386]=n;n=Object.create(null);n[0]=new RegExp("; *(T100|T200|T5|W100|W200|W8s) Build/");n[1]="$1";n[2]=0;n[3]=0;n[4]=0;i.device[387]=n;n=Object.create(null);n[0]=new RegExp("; *(T-Mobile[ _]G2[ _]Touch) Build");n[1]="$1";n[2]=0;n[3]=0;n[4]=0;i.device[388]=n;n=Object.create(null);n[0]=new RegExp("; *(T-Mobile[ _]G2) Build");n[1]="$1";n[2]=0;n[3]=0;n[4]=0;i.device[389]=n;n=Object.create(null);n[0]=new RegExp("; *(T-Mobile myTouch Q) Build");n[1]="$1";n[2]=0;n[3]=0;n[4]=0;i.device[390]=n;n=Object.create(null);n[0]=new RegExp("; *(T-Mobile myTouch) Build");n[1]="$1";n[2]=0;n[3]=0;n[4]=0;i.device[391]=n;n=Object.create(null);n[0]=new RegExp("; *(T-Mobile_Espresso) Build");n[1]="$1";n[2]=0;n[3]=0;n[4]=0;i.device[392]=n;n=Object.create(null);n[0]=new RegExp("; *(T-Mobile G1) Build");n[1]="$1";n[2]=0;n[3]=0;n[4]=0;i.device[393]=n;n=Object.create(null);n[0]=new RegExp("\\b(T-Mobile ?)?(myTouch)[ _]?([34]G)[ _]?([^\\/]*) (?:Mozilla|Build)");n[1]="$1$2 $3 $4";n[2]=0;n[3]=0;n[4]=0;i.device[394]=n;n=Object.create(null);n[0]=new RegExp("\\b(T-Mobile)_([^_]+)_(.*) Build");n[1]="$1 $2 $3";n[2]=0;n[3]=0;n[4]=0;i.device[395]=n;n=Object.create(null);n[0]=new RegExp("\\b(T-Mobile)[_ ]?(.*?)Build");n[1]="$1 $2";n[2]=0;n[3]=0;n[4]=0;i.device[396]=n;n=Object.create(null);n[0]=new RegExp(" (ATP[0-9]{4}) Build");n[1]="$1";n[2]=0;n[3]=0;n[4]=0;i.device[397]=n;n=Object.create(null);n[0]=new RegExp(" *(TOOKY)[ _\\-]([^;/]+) ?(?:Build|;)");n[1]="$1 $2";n[2]=0;n[3]=0;n[4]=0;i.device[398]=n;n=Object.create(null);n[0]=new RegExp("\\b(TOSHIBA_AC_AND_AZ|TOSHIBA_FOLIO_AND_A|FOLIO_AND_A)");n[1]="$1";n[2]=0;n[3]=0;n[4]=0;i.device[399]=n;n=Object.create(null);n[0]=new RegExp("; *([Ff]olio ?100) Build/");n[1]="$1";n[2]=0;n[3]=0;n[4]=0;i.device[400]=n;n=Object.create(null);n[0]=new RegExp("; *(AT[0-9]{2,3}(?:\\-A|LE\\-A|PE\\-A|SE|a)?|AT7-A|AT1S0|Hikari-iFrame/WDPF-[^;/]+|THRiVE|Thrive) Build/");n[1]="Toshiba $1";n[2]=0;n[3]=0;n[4]=0;i.device[401]=n;n=Object.create(null);n[0]=new RegExp("; *(TM-MID\\d+[^;/]+|TOUCHMATE|MID-750) Build");n[1]="$1";n[2]=0;n[3]=0;n[4]=0;i.device[402]=n;n=Object.create(null);n[0]=new RegExp("; *(TM-SM\\d+[^;/]+) Build");n[1]="$1";n[2]=0;n[3]=0;n[4]=0;i.device[403]=n;n=Object.create(null);n[0]=new RegExp("; *(A10 [Bb]asic2?) Build/");n[1]="$1";n[2]=0;n[3]=0;n[4]=0;i.device[404]=n;n=Object.create(null);n[0]=new RegExp("; *(TREQ[ _\\-])([^;/]+) Build");n[1]="$1$2";n[2]=0;n[3]=0;n[4]=0;i.device[405]=n;n=Object.create(null);n[0]=new RegExp("; *(X-?5|X-?3) Build/");n[1]="$1";n[2]=0;n[3]=0;n[4]=0;i.device[406]=n;n=Object.create(null);n[0]=new RegExp("; *(A502\\+?|A936|A603|X1|X2) Build/");n[1]="$1";n[2]=0;n[3]=0;n[4]=0;i.device[407]=n;n=Object.create(null);n[0]=new RegExp("(TOUCH(?:TAB|PAD).+?) Build/");n[1]="Versus $1";n[2]=0;n[3]=0;n[4]=0;i.device[408]=n;n=Object.create(null);n[0]=new RegExp("(VERTU) ([^;/]+) Build/");n[1]="$1 $2";n[2]=0;n[3]=0;n[4]=0;i.device[409]=n;n=Object.create(null);n[0]=new RegExp("; *(Videocon)[ _\\-]([^;/]+) *(?:Build|;)");n[1]="$1 $2";n[2]=0;n[3]=0;n[4]=0;i.device[410]=n;n=Object.create(null);n[0]=new RegExp(" (VT\\d{2}[A-Za-z]*) Build");n[1]="$1";n[2]=0;n[3]=0;n[4]=0;i.device[411]=n;n=Object.create(null);n[0]=new RegExp("; *((?:ViewPad|ViewPhone|VSD)[^;/]+) Build/");n[1]="$1";n[2]=0;n[3]=0;n[4]=0;i.device[412]=n;n=Object.create(null);n[0]=new RegExp("; *(ViewSonic-)([^;/]+) Build/");n[1]="$1$2";n[2]=0;n[3]=0;n[4]=0;i.device[413]=n;n=Object.create(null);n[0]=new RegExp("; *(GTablet.*) Build/");n[1]="$1";n[2]=0;n[3]=0;n[4]=0;i.device[414]=n;n=Object.create(null);n[0]=new RegExp("; *([Vv]ivo)[ _]([^;/]+) Build");n[1]="$1 $2";n[2]=0;n[3]=0;n[4]=0;i.device[415]=n;n=Object.create(null);n[0]=new RegExp("(Vodafone) (.*) Build/");n[1]="$1 $2";n[2]=0;n[3]=0;n[4]=0;i.device[416]=n;n=Object.create(null);n[0]=new RegExp("; *(?:Walton[ _\\-])?(Primo[ _\\-][^;/]+) Build");n[1]="Walton $1";n[2]=0;n[3]=0;n[4]=0;i.device[417]=n;n=Object.create(null);n[0]=new RegExp("; *(?:WIKO[ \\-])?(CINK\\+?|BARRY|BLOOM|DARKFULL|DARKMOON|DARKNIGHT|DARKSIDE|FIZZ|HIGHWAY|IGGY|OZZY|RAINBOW|STAIRWAY|SUBLIM|WAX|CINK [^;/]+) Build/");n[1]="Wiko $1";n[2]=0;n[3]=0;n[4]=0;i.device[418]=n;n=Object.create(null);n[0]=new RegExp("; *WellcoM-([^;/]+) Build");n[1]="Wellcom $1";n[2]=0;n[3]=0;n[4]=0;i.device[419]=n;n=Object.create(null);n[0]=new RegExp("(?:(WeTab)-Browser|; (wetab) Build)");n[1]="$1";n[2]=0;n[3]=0;n[4]=0;i.device[420]=n;n=Object.create(null);n[0]=new RegExp("; *(AT-AS[^;/]+) Build");n[1]="Wolfgang $1";n[2]=0;n[3]=0;n[4]=0;i.device[421]=n;n=Object.create(null);n[0]=new RegExp("; *(?:Woxter|Wxt) ([^;/]+) Build");n[1]="Woxter $1";n[2]=0;n[3]=0;n[4]=0;i.device[422]=n;n=Object.create(null);n[0]=new RegExp("; *(?:Xenta |Luna )?(TAB[234][0-9]{2}|TAB0[78]-\\d{3}|TAB0?9-\\d{3}|TAB1[03]-\\d{3}|SMP\\d{2}-\\d{3}) Build/");n[1]="Yarvik $1";n[2]=0;n[3]=0;n[4]=0;i.device[423]=n;n=Object.create(null);n[0]=new RegExp("; *([A-Z]{2,4})(M\\d{3,}[A-Z]{2})([^;\\)\\/]*)(?: Build|[;\\)])");n[1]="Yifang $1$2$3";n[2]=0;n[3]=0;n[4]=0;i.device[424]=n;n=Object.create(null);n[0]=new RegExp("; *((MI|HM|MI-ONE|Redmi)[ -](NOTE |Note )?[^;/]*) (Build|MIUI)/");n[1]="XiaoMi $1";n[2]=0;n[3]=0;n[4]=0;i.device[425]=n;n=Object.create(null);n[0]=new RegExp("; *XOLO[ _]([^;/]*tab.*) Build");n[1]="Xolo $1";n[2]=0;n[3]=0;n[4]=0;i.device[426]=n;n=Object.create(null);n[0]=new RegExp("; *XOLO[ _]([^;/]+) Build");n[1]="Xolo $1";n[2]=0;n[3]=0;n[4]=0;i.device[427]=n;n=Object.create(null);n[0]=new RegExp("; *(q\\d0{2,3}[a-z]?) Build");n[1]="Xolo $1";n[2]=0;n[3]=0;n[4]=0;i.device[428]=n;n=Object.create(null);n[0]=new RegExp("; *(PAD ?[79]\\d+[^;/]*|TelePAD\\d+[^;/]) Build");n[1]="Xoro $1";n[2]=0;n[3]=0;n[4]=0;i.device[429]=n;n=Object.create(null);n[0]=new RegExp("; *(?:(?:ZOPO|Zopo)[ _]([^;/]+)|(ZP ?(?:\\d{2}[^;/]+|C2))|(C[2379])) Build");n[1]="$1$2$3";n[2]=0;n[3]=0;n[4]=0;i.device[430]=n;n=Object.create(null);n[0]=new RegExp("; *(ZiiLABS) (Zii[^;/]*) Build");n[1]="$1 $2";n[2]=0;n[3]=0;n[4]=0;i.device[431]=n;n=Object.create(null);n[0]=new RegExp("; *(Zii)_([^;/]*) Build");n[1]="$1 $2";n[2]=0;n[3]=0;n[4]=0;i.device[432]=n;n=Object.create(null);n[0]=new RegExp("; *(ARIZONA|(?:ATLAS|Atlas) W|D930|Grand (?:[SX][^;]*|Era|Memo[^;]*)|JOE|(?:Kis|KIS)\\b[^;]*|Libra|Light [^;]*|N8[056][01]|N850L|N8000|N9[15]\\d{2}|N9810|NX501|Optik|(?:Vip )Racer[^;]*|RacerII|RACERII|San Francisco[^;]*|V9[AC]|V55|V881|Z[679][0-9]{2}[A-z]?) Build");n[1]="$1";n[2]=0;n[3]=0;n[4]=0;i.device[433]=n;n=Object.create(null);n[0]=new RegExp("; *([A-Z]\\d+)_USA_[^;]* Build");n[1]="$1";n[2]=0;n[3]=0;n[4]=0;i.device[434]=n;n=Object.create(null);n[0]=new RegExp("; *(SmartTab\\d+)[^;]* Build");n[1]="$1";n[2]=0;n[3]=0;n[4]=0;i.device[435]=n;n=Object.create(null);n[0]=new RegExp("; *(?:Blade|BLADE|ZTE-BLADE)([^;/]*) Build");n[1]="ZTE Blade$1";n[2]=0;n[3]=0;n[4]=0;i.device[436]=n;n=Object.create(null);n[0]=new RegExp("; *(?:Skate|SKATE|ZTE-SKATE)([^;/]*) Build");n[1]="ZTE Skate$1";n[2]=0;n[3]=0;n[4]=0;i.device[437]=n;n=Object.create(null);n[0]=new RegExp("; *(Orange |Optimus )(Monte Carlo|San Francisco) Build");n[1]="$1$2";n[2]=0;n[3]=0;n[4]=0;i.device[438]=n;n=Object.create(null);n[0]=new RegExp("; *(?:ZXY-ZTE_|ZTE\\-U |ZTE[\\- _]|ZTE-C[_ ])([^;/]+) Build");n[1]="ZTE $1";n[2]=0;n[3]=0;n[4]=0;i.device[439]=n;n=Object.create(null);n[0]=new RegExp("; (BASE) (lutea|Lutea 2|Tab[^;]*) Build");n[1]="$1 $2";n[2]=0;n[3]=0;n[4]=0;i.device[440]=n;n=Object.create(null);n[0]=new RegExp("; (Avea inTouch 2|soft stone|tmn smart a7|Movistar[ _]Link) Build");n[1]="$1";n[2]=0;n[3]=0;n[4]=0;i.device[441]=n;n=Object.create(null);n[0]=new RegExp("; *(vp9plus)\\)");n[1]="$1";n[2]=0;n[3]=0;n[4]=0;i.device[442]=n;n=Object.create(null);n[0]=new RegExp("; ?(Cloud[ _]Z5|z1000|Z99 2G|z99|z930|z999|z990|z909|Z919|z900) Build/");n[1]="$1";n[2]=0;n[3]=0;n[4]=0;i.device[443]=n;n=Object.create(null);n[0]=new RegExp("; ?(KFOT|Kindle Fire) Build\\b");n[1]="Kindle Fire";n[2]=0;n[3]=0;n[4]=0;i.device[444]=n;n=Object.create(null);n[0]=new RegExp("; ?(KFOTE|Amazon Kindle Fire2) Build\\b");n[1]="Kindle Fire 2";n[2]=0;n[3]=0;n[4]=0;i.device[445]=n;n=Object.create(null);n[0]=new RegExp("; ?(KFTT) Build\\b");n[1]="Kindle Fire HD";n[2]=0;n[3]=0;n[4]=0;i.device[446]=n;n=Object.create(null);n[0]=new RegExp("; ?(KFJWI) Build\\b");n[1]='Kindle Fire HD 8.9" WiFi';n[2]=0;n[3]=0;n[4]=0;i.device[447]=n;n=Object.create(null);n[0]=new RegExp("; ?(KFJWA) Build\\b");n[1]='Kindle Fire HD 8.9" 4G';n[2]=0;n[3]=0;n[4]=0;i.device[448]=n;n=Object.create(null);n[0]=new RegExp("; ?(KFSOWI) Build\\b");n[1]='Kindle Fire HD 7" WiFi';n[2]=0;n[3]=0;n[4]=0;i.device[449]=n;n=Object.create(null);n[0]=new RegExp("; ?(KFTHWI) Build\\b");n[1]='Kindle Fire HDX 7" WiFi';n[2]=0;n[3]=0;n[4]=0;i.device[450]=n;n=Object.create(null);n[0]=new RegExp("; ?(KFTHWA) Build\\b");n[1]='Kindle Fire HDX 7" 4G';n[2]=0;n[3]=0;n[4]=0;i.device[451]=n;n=Object.create(null);n[0]=new RegExp("; ?(KFAPWI) Build\\b");n[1]='Kindle Fire HDX 8.9" WiFi';n[2]=0;n[3]=0;n[4]=0;i.device[452]=n;n=Object.create(null);n[0]=new RegExp("; ?(KFAPWA) Build\\b");n[1]='Kindle Fire HDX 8.9" 4G';n[2]=0;n[3]=0;n[4]=0;i.device[453]=n;n=Object.create(null);n[0]=new RegExp("; ?Amazon ([^;/]+) Build\\b");n[1]="$1";n[2]=0;n[3]=0;n[4]=0;i.device[454]=n;n=Object.create(null);n[0]=new RegExp("; ?(Kindle) Build\\b");n[1]="Kindle";n[2]=0;n[3]=0;n[4]=0;i.device[455]=n;n=Object.create(null);n[0]=new RegExp("; ?(Silk)/(\\d+)\\.(\\d+)(?:\\.([0-9\\-]+))? Build\\b");n[1]="Kindle Fire";n[2]=0;n[3]=0;n[4]=0;i.device[456]=n;n=Object.create(null);n[0]=new RegExp(" (Kindle)/(\\d+\\.\\d+)");n[1]="Kindle";n[2]=0;n[3]=0;n[4]=0;i.device[457]=n;n=Object.create(null);n[0]=new RegExp(" (Silk|Kindle)/(\\d+)\\.");n[1]="Kindle";n[2]=0;n[3]=0;n[4]=0;i.device[458]=n;n=Object.create(null);n[0]=new RegExp("(sprd)\\-([^/]+)/");n[1]="$1 $2";n[2]=0;n[3]=0;n[4]=0;i.device[459]=n;n=Object.create(null);n[0]=new RegExp("; *(H\\d{2}00\\+?) Build");n[1]="$1";n[2]=0;n[3]=0;n[4]=0;i.device[460]=n;n=Object.create(null);n[0]=new RegExp("; *(iphone|iPhone5) Build/");n[1]="Xianghe $1";n[2]=0;n[3]=0;n[4]=0;i.device[461]=n;n=Object.create(null);n[0]=new RegExp("; *(e\\d{4}[a-z]?_?v\\d+|v89_[^;/]+)[^;/]+ Build/");n[1]="Xianghe $1";n[2]=0;n[3]=0;n[4]=0;i.device[462]=n;n=Object.create(null);n[0]=new RegExp("\\bUSCC[_\\-]?([^ ;/\\)]+)");n[1]="$1";n[2]=0;n[3]=0;n[4]=0;i.device[463]=n;n=Object.create(null);n[0]=new RegExp("Windows Phone [^;]+; .*?IEMobile/[^;\\)]+[;\\)] ?(?:ARM; ?Touch; ?|Touch; ?)?(?:ALCATEL)[^;]*; *([^;,\\)]+)");n[1]="Alcatel $1";n[2]=0;n[3]=0;n[4]=0;i.device[464]=n;n=Object.create(null);n[0]=new RegExp("Windows Phone [^;]+; .*?IEMobile/[^;\\)]+[;\\)] ?(?:ARM; ?Touch; ?|Touch; ?|WpsLondonTest; ?)?(?:ASUS|Asus)[^;]*; *([^;,\\)]+)");n[1]="Asus $1";n[2]=0;n[3]=0;n[4]=0;i.device[465]=n;n=Object.create(null);n[0]=new RegExp("Windows Phone [^;]+; .*?IEMobile/[^;\\)]+[;\\)] ?(?:ARM; ?Touch; ?|Touch; ?)?(?:DELL|Dell)[^;]*; *([^;,\\)]+)");n[1]="Dell $1";n[2]=0;n[3]=0;n[4]=0;i.device[466]=n;n=Object.create(null);n[0]=new RegExp("Windows Phone [^;]+; .*?IEMobile/[^;\\)]+[;\\)] ?(?:ARM; ?Touch; ?|Touch; ?|WpsLondonTest; ?)?(?:HTC|Htc|HTC_blocked[^;]*)[^;]*; *(?:HTC)?([^;,\\)]+)");n[1]="HTC $1";n[2]=0;n[3]=0;n[4]=0;i.device[467]=n;n=Object.create(null);n[0]=new RegExp("Windows Phone [^;]+; .*?IEMobile/[^;\\)]+[;\\)] ?(?:ARM; ?Touch; ?|Touch; ?)?(?:HUAWEI)[^;]*; *(?:HUAWEI )?([^;,\\)]+)");n[1]="Huawei $1";n[2]=0;n[3]=0;n[4]=0;i.device[468]=n;n=Object.create(null);n[0]=new RegExp("Windows Phone [^;]+; .*?IEMobile/[^;\\)]+[;\\)] ?(?:ARM; ?Touch; ?|Touch; ?)?(?:LG|Lg)[^;]*; *(?:LG[ \\-])?([^;,\\)]+)");n[1]="LG $1";n[2]=0;n[3]=0;n[4]=0;i.device[469]=n;n=Object.create(null);n[0]=new RegExp("Windows Phone [^;]+; .*?IEMobile/[^;\\)]+[;\\)] ?(?:ARM; ?Touch; ?|Touch; ?)?(?:NOKIA|Nokia)[^;]*; *(?:NOKIA ?|Nokia ?|LUMIA ?|[Ll]umia ?)*(\\d{3,}[^;\\)]*)");n[1]="Lumia $1";n[2]=0;n[3]=0;n[4]=0;i.device[470]=n;n=Object.create(null);n[0]=new RegExp("Windows Phone [^;]+; .*?IEMobile/[^;\\)]+[;\\)] ?(?:ARM; ?Touch; ?|Touch; ?)?(?:NOKIA|Nokia)[^;]*; *(RM-\\d{3,})");n[1]="Nokia $1";n[2]=0;n[3]=0;n[4]=0;i.device[471]=n;n=Object.create(null);n[0]=new RegExp("(?:Windows Phone [^;]+; .*?IEMobile/[^;\\)]+[;\\)]|WPDesktop;) ?(?:ARM; ?Touch; ?|Touch; ?)?(?:NOKIA|Nokia)[^;]*; *(?:NOKIA ?|Nokia ?|LUMIA ?|[Ll]umia ?)*([^;\\)]+)");n[1]="Nokia $1";n[2]=0;n[3]=0;n[4]=0;i.device[472]=n;n=Object.create(null);n[0]=new RegExp("Windows Phone [^;]+; .*?IEMobile/[^;\\)]+[;\\)] ?(?:ARM; ?Touch; ?|Touch; ?)?(?:Microsoft(?: Corporation)?)[^;]*; *([^;,\\)]+)");n[1]="Microsoft $1";n[2]=0;n[3]=0;n[4]=0;i.device[473]=n;n=Object.create(null);n[0]=new RegExp("Windows Phone [^;]+; .*?IEMobile/[^;\\)]+[;\\)] ?(?:ARM; ?Touch; ?|Touch; ?|WpsLondonTest; ?)?(?:SAMSUNG)[^;]*; *(?:SAMSUNG )?([^;,\\.\\)]+)");n[1]="Samsung $1";n[2]=0;n[3]=0;n[4]=0;i.device[474]=n;n=Object.create(null);n[0]=new RegExp("Windows Phone [^;]+; .*?IEMobile/[^;\\)]+[;\\)] ?(?:ARM; ?Touch; ?|Touch; ?|WpsLondonTest; ?)?(?:TOSHIBA|FujitsuToshibaMobileCommun)[^;]*; *([^;,\\)]+)");n[1]="Toshiba $1";n[2]=0;n[3]=0;n[4]=0;i.device[475]=n;n=Object.create(null);n[0]=new RegExp("Windows Phone [^;]+; .*?IEMobile/[^;\\)]+[;\\)] ?(?:ARM; ?Touch; ?|Touch; ?|WpsLondonTest; ?)?([^;]+); *([^;,\\)]+)");n[1]="$1 $2";n[2]=0;n[3]=0;n[4]=0;i.device[476]=n;n=Object.create(null);n[0]=new RegExp("(?:^|; )SAMSUNG\\-([A-Za-z0-9\\-]+).* Bada/");n[1]="Samsung $1";n[2]=0;n[3]=0;n[4]=0;i.device[477]=n;n=Object.create(null);n[0]=new RegExp("\\(Mobile; ALCATEL ?(One|ONE) ?(Touch|TOUCH) ?([^;/]+)(?:/[^;]+)?; rv:[^\\)]+\\) Gecko/[^\\/]+ Firefox/");n[1]="Alcatel $1 $2 $3";n[2]=0;n[3]=0;n[4]=0;i.device[478]=n;n=Object.create(null);n[0]=new RegExp("\\(Mobile; (?:ZTE([^;]+)|(OpenC)); rv:[^\\)]+\\) Gecko/[^\\/]+ Firefox/");n[1]="ZTE $1$2";n[2]=0;n[3]=0;n[4]=0;i.device[479]=n;n=Object.create(null);n[0]=new RegExp("Nokia(N[0-9]+)([A-z_\\-][A-z0-9_\\-]*)");n[1]="Nokia $1";n[2]=0;n[3]=0;n[4]=0;i.device[480]=n;n=Object.create(null);n[0]=new RegExp("(?:NOKIA|Nokia)(?:\\-| *)(?:([A-Za-z0-9]+)\\-[0-9a-f]{32}|([A-Za-z0-9\\-]+)(?:UCBrowser)|([A-Za-z0-9\\-]+))");n[1]="Nokia $1$2$3";n[2]=0;n[3]=0;n[4]=0;i.device[481]=n;n=Object.create(null);n[0]=new RegExp("Lumia ([A-Za-z0-9\\-]+)");n[1]="Lumia $1";n[2]=0;n[3]=0;n[4]=0;i.device[482]=n;n=Object.create(null);n[0]=new RegExp("\\(Symbian; U; S60 V5; [A-z]{2}\\-[A-z]{2}; (SonyEricsson|Samsung|Nokia|LG)([^;/]+)\\)");n[1]="$1 $2";n[2]=0;n[3]=0;n[4]=0;i.device[483]=n;n=Object.create(null);n[0]=new RegExp("\\(Symbian(?:/3)?; U; ([^;]+);");n[1]="Nokia $1";n[2]=0;n[3]=0;n[4]=0;i.device[484]=n;n=Object.create(null);n[0]=new RegExp("BB10; ([A-Za-z0-9\\- ]+)\\)");n[1]="BlackBerry $1";n[2]=0;n[3]=0;n[4]=0;i.device[485]=n;n=Object.create(null);n[0]=new RegExp("Play[Bb]ook.+RIM Tablet OS");n[1]="BlackBerry Playbook";n[2]=0;n[3]=0;n[4]=0;i.device[486]=n;n=Object.create(null);n[0]=new RegExp("Black[Bb]erry ([0-9]+);");n[1]="BlackBerry $1";n[2]=0;n[3]=0;n[4]=0;i.device[487]=n;n=Object.create(null);n[0]=new RegExp("Black[Bb]erry([0-9]+)");n[1]="BlackBerry $1";n[2]=0;n[3]=0;n[4]=0;i.device[488]=n;n=Object.create(null);n[0]=new RegExp("Black[Bb]erry;");n[1]="BlackBerry";n[2]=0;n[3]=0;n[4]=0;i.device[489]=n;n=Object.create(null);n[0]=new RegExp("(Pre|Pixi)/\\d+\\.\\d+");n[1]="Palm $1";n[2]=0;n[3]=0;n[4]=0;i.device[490]=n;n=Object.create(null);n[0]=new RegExp("Palm([0-9]+)");n[1]="Palm $1";n[2]=0;n[3]=0;n[4]=0;i.device[491]=n;n=Object.create(null);n[0]=new RegExp("Treo([A-Za-z0-9]+)");n[1]="Palm Treo $1";n[2]=0;n[3]=0;n[4]=0;i.device[492]=n;n=Object.create(null);n[0]=new RegExp("webOS.*(P160U(?:NA)?)/(\\d+).(\\d+)");n[1]="HP Veer";n[2]=0;n[3]=0;n[4]=0;i.device[493]=n;n=Object.create(null);n[0]=new RegExp("(Touch[Pp]ad)/\\d+\\.\\d+");n[1]="HP TouchPad";n[2]=0;n[3]=0;n[4]=0;i.device[494]=n;n=Object.create(null);n[0]=new RegExp("HPiPAQ([A-Za-z0-9]+)/\\d+.\\d+");n[1]="HP iPAQ $1";n[2]=0;n[3]=0;n[4]=0;i.device[495]=n;n=Object.create(null);n[0]=new RegExp("PDA; (PalmOS)/sony/model ([a-z]+)/Revision");n[1]="$1";n[2]=0;n[3]=0;n[4]=0;i.device[496]=n;n=Object.create(null);n[0]=new RegExp("(Apple\\s?TV)");n[1]="AppleTV";n[2]=0;n[3]=0;n[4]=0;i.device[497]=n;n=Object.create(null);n[0]=new RegExp("(QtCarBrowser)");n[1]="Tesla Model S";n[2]=0;n[3]=0;n[4]=0;i.device[498]=n;n=Object.create(null);n[0]=new RegExp("((?:iPhone|iPad|iPod)\\d+,\\d+)");n[1]="$1";n[2]=0;n[3]=0;n[4]=0;i.device[499]=n;n=Object.create(null);n[0]=new RegExp("(iPad)(?:;| Simulator;)");n[1]="$1";n[2]=0;n[3]=0;n[4]=0;i.device[500]=n;n=Object.create(null);n[0]=new RegExp("(iPod)(?:;| touch;| Simulator;)");n[1]="$1";n[2]=0;n[3]=0;n[4]=0;i.device[501]=n;n=Object.create(null);n[0]=new RegExp("(iPhone)(?:;| Simulator;)");n[1]="$1";n[2]=0;n[3]=0;n[4]=0;i.device[502]=n;n=Object.create(null);n[0]=new RegExp("CFNetwork/.* Darwin/\\d.*\\(((?:Mac|iMac|PowerMac|PowerBook)[^\\d]*)(\\d+)(?:,|%2C)(\\d+)");n[1]="$1$2,$3";n[2]=0;n[3]=0;n[4]=0;i.device[503]=n;n=Object.create(null);n[0]=new RegExp("CFNetwork/.* Darwin/\\d");n[1]="iOS-Device";n[2]=0;n[3]=0;n[4]=0;i.device[504]=n;n=Object.create(null);n[0]=new RegExp("acer_([A-Za-z0-9]+)_");n[1]="Acer $1";n[2]=0;n[3]=0;n[4]=0;i.device[505]=n;n=Object.create(null);n[0]=new RegExp("(?:ALCATEL|Alcatel)-([A-Za-z0-9\\-]+)");n[1]="Alcatel $1";n[2]=0;n[3]=0;n[4]=0;i.device[506]=n;n=Object.create(null);n[0]=new RegExp("(?:Amoi|AMOI)\\-([A-Za-z0-9]+)");n[1]="Amoi $1";n[2]=0;n[3]=0;n[4]=0;i.device[507]=n;n=Object.create(null);n[0]=new RegExp("(?:; |\\/|^)((?:Transformer (?:Pad|Prime) |Transformer |PadFone[ _]?)[A-Za-z0-9]*)");n[1]="Asus $1";n[2]=0;n[3]=0;n[4]=0;i.device[508]=n;n=Object.create(null);n[0]=new RegExp("(?:asus.*?ASUS|Asus|ASUS|asus)[\\- ;]*((?:Transformer (?:Pad|Prime) |Transformer |Padfone |Nexus[ _])?[A-Za-z0-9]+)");n[1]="Asus $1";n[2]=0;n[3]=0;n[4]=0;i.device[509]=n;n=Object.create(null);n[0]=new RegExp("\\bBIRD[ \\-\\.]([A-Za-z0-9]+)");n[1]="Bird $1";n[2]=0;n[3]=0;n[4]=0;i.device[510]=n;n=Object.create(null);n[0]=new RegExp("\\bDell ([A-Za-z0-9]+)");n[1]="Dell $1";n[2]=0;n[3]=0;n[4]=0;i.device[511]=n;n=Object.create(null);n[0]=new RegExp("DoCoMo/2\\.0 ([A-Za-z0-9]+)");n[1]="DoCoMo $1";n[2]=0;n[3]=0;n[4]=0;i.device[512]=n;n=Object.create(null);n[0]=new RegExp("([A-Za-z0-9]+)_W;FOMA");n[1]="DoCoMo $1";n[2]=0;n[3]=0;n[4]=0;i.device[513]=n;n=Object.create(null);n[0]=new RegExp("([A-Za-z0-9]+);FOMA");n[1]="DoCoMo $1";n[2]=0;n[3]=0;n[4]=0;i.device[514]=n;n=Object.create(null);n[0]=new RegExp("\\b(?:HTC/|HTC/[a-z0-9]+/)?HTC[ _\\-;]? *(.*?)(?:-?Mozilla|fingerPrint|[;/\\(\\)]|$)");n[1]="HTC $1";n[2]=0;n[3]=0;n[4]=0;i.device[515]=n;n=Object.create(null);n[0]=new RegExp("Huawei([A-Za-z0-9]+)");n[1]="Huawei $1";n[2]=0;n[3]=0;n[4]=0;i.device[516]=n;n=Object.create(null);n[0]=new RegExp("HUAWEI-([A-Za-z0-9]+)");n[1]="Huawei $1";n[2]=0;n[3]=0;n[4]=0;i.device[517]=n;n=Object.create(null);n[0]=new RegExp("vodafone([A-Za-z0-9]+)");n[1]="Huawei Vodafone $1";n[2]=0;n[3]=0;n[4]=0;i.device[518]=n;n=Object.create(null);n[0]=new RegExp("i\\-mate ([A-Za-z0-9]+)");n[1]="i-mate $1";n[2]=0;n[3]=0;n[4]=0;i.device[519]=n;n=Object.create(null);n[0]=new RegExp("Kyocera\\-([A-Za-z0-9]+)");n[1]="Kyocera $1";n[2]=0;n[3]=0;n[4]=0;i.device[520]=n;n=Object.create(null);n[0]=new RegExp("KWC\\-([A-Za-z0-9]+)");n[1]="Kyocera $1";n[2]=0;n[3]=0;n[4]=0;i.device[521]=n;n=Object.create(null);n[0]=new RegExp("Lenovo[_\\-]([A-Za-z0-9]+)");n[1]="Lenovo $1";n[2]=0;n[3]=0;n[4]=0;i.device[522]=n;n=Object.create(null);n[0]=new RegExp("(HbbTV)/[0-9]+\\.[0-9]+\\.[0-9]+ \\([^;]*; *(LG)E *; *([^;]*) *;[^;]*;[^;]*;\\)");n[1]="$1";n[2]=0;n[3]=0;n[4]=0;i.device[523]=n;n=Object.create(null);n[0]=new RegExp("(HbbTV)/1\\.1\\.1.*CE-HTML/1\\.\\d;(Vendor/)*(THOM[^;]*?)[;\\s](?:.*SW-Version/.*)*(LF[^;]+);?");n[1]="$1";n[2]=0;n[3]=0;n[4]=0;i.device[524]=n;n=Object.create(null);n[0]=new RegExp("(HbbTV)(?:/1\\.1\\.1)?(?: ?\\(;;;;;\\))?; *CE-HTML(?:/1\\.\\d)?; *([^ ]+) ([^;]+);");n[1]="$1";n[2]=0;n[3]=0;n[4]=0;i.device[525]=n;n=Object.create(null);n[0]=new RegExp("(HbbTV)/1\\.1\\.1 \\(;;;;;\\) Maple_2011");n[1]="$1";n[2]=0;n[3]=0;n[4]=0;i.device[526]=n;n=Object.create(null);n[0]=new RegExp("(HbbTV)/[0-9]+\\.[0-9]+\\.[0-9]+ \\([^;]*; *(?:CUS:([^;]*)|([^;]+)) *; *([^;]*) *;.*;");n[1]="$1";n[2]=0;n[3]=0;n[4]=0;i.device[527]=n;n=Object.create(null);n[0]=new RegExp("(HbbTV)/[0-9]+\\.[0-9]+\\.[0-9]+");n[1]="$1";n[2]=0;n[3]=0;n[4]=0;i.device[528]=n;n=Object.create(null);n[0]=new RegExp('LGE; (?:Media\\/)?([^;]*);[^;]*;[^;]*;?\\); "?LG NetCast(\\.TV|\\.Media|)-\\d+');n[1]="NetCast$2";n[2]=0;n[3]=0;n[4]=0;i.device[529]=n;n=Object.create(null);n[0]=new RegExp("InettvBrowser/[0-9]+\\.[0-9A-Z]+ \\([^;]*;(Sony)([^;]*);[^;]*;[^\\)]*\\)");n[1]="Inettv";n[2]=0;n[3]=0;n[4]=0;i.device[530]=n;n=Object.create(null);n[0]=new RegExp("InettvBrowser/[0-9]+\\.[0-9A-Z]+ \\([^;]*;([^;]*);[^;]*;[^\\)]*\\)");n[1]="Inettv";n[2]=0;n[3]=0;n[4]=0;i.device[531]=n;n=Object.create(null);n[0]=new RegExp("(?:InettvBrowser|TSBNetTV|NETTV|HBBTV)");n[1]="Inettv";n[2]=0;n[3]=0;n[4]=0;i.device[532]=n;n=Object.create(null);n[0]=new RegExp("Series60/\\d\\.\\d (LG)[\\-]?([A-Za-z0-9 \\-]+)");n[1]="$1 $2";n[2]=0;n[3]=0;n[4]=0;i.device[533]=n;n=Object.create(null);n[0]=new RegExp("\\b(?:LGE[ \\-]LG\\-(?:AX)?|LGE |LGE?-LG|LGE?[ \\-]|LG[ /\\-]|lg[\\-])([A-Za-z0-9]+)\\b");n[1]="LG $1";n[2]=0;n[3]=0;n[4]=0;i.device[534]=n;n=Object.create(null);n[0]=new RegExp("(?:^LG[\\-]?|^LGE[\\-/]?)([A-Za-z]+[0-9]+[A-Za-z]*)");n[1]="LG $1";n[2]=0;n[3]=0;n[4]=0;i.device[535]=n;n=Object.create(null);n[0]=new RegExp("^LG([0-9]+[A-Za-z]*)");n[1]="LG $1";n[2]=0;n[3]=0;n[4]=0;i.device[536]=n;n=Object.create(null);n[0]=new RegExp("(KIN\\.[^ ]+) (\\d+)\\.(\\d+)");n[1]="Microsoft $1";n[2]=0;n[3]=0;n[4]=0;i.device[537]=n;n=Object.create(null);n[0]=new RegExp("(?:MSIE|XBMC).*\\b(Xbox)\\b");n[1]="$1";n[2]=0;n[3]=0;n[4]=0;i.device[538]=n;n=Object.create(null);n[0]=new RegExp("; ARM; Trident/6\\.0; Touch[\\);]");n[1]="Microsoft Surface RT";n[2]=0;n[3]=0;n[4]=0;i.device[539]=n;n=Object.create(null);n[0]=new RegExp("Motorola\\-([A-Za-z0-9]+)");n[1]="Motorola $1";n[2]=0;n[3]=0;n[4]=0;i.device[540]=n;n=Object.create(null);n[0]=new RegExp("MOTO\\-([A-Za-z0-9]+)");n[1]="Motorola $1";n[2]=0;n[3]=0;n[4]=0;i.device[541]=n;n=Object.create(null);n[0]=new RegExp("MOT\\-([A-z0-9][A-z0-9\\-]*)");n[1]="Motorola $1";n[2]=0;n[3]=0;n[4]=0;i.device[542]=n;n=Object.create(null);n[0]=new RegExp("Nintendo WiiU");n[1]="Nintendo Wii U";n[2]=0;n[3]=0;n[4]=0;i.device[543]=n;n=Object.create(null);n[0]=new RegExp("Nintendo (DS|3DS|DSi|Wii);");n[1]="Nintendo $1";n[2]=0;n[3]=0;n[4]=0;i.device[544]=n;n=Object.create(null);n[0]=new RegExp("(?:Pantech|PANTECH)[ _-]?([A-Za-z0-9\\-]+)");n[1]="Pantech $1";n[2]=0;n[3]=0;n[4]=0;i.device[545]=n;n=Object.create(null);n[0]=new RegExp("Philips([A-Za-z0-9]+)");n[1]="Philips $1";n[2]=0;n[3]=0;n[4]=0;i.device[546]=n;n=Object.create(null);n[0]=new RegExp("Philips ([A-Za-z0-9]+)");n[1]="Philips $1";n[2]=0;n[3]=0;n[4]=0;i.device[547]=n;n=Object.create(null);n[0]=new RegExp("SymbianOS/9\\.\\d.* Samsung[/\\-]([A-Za-z0-9 \\-]+)");n[1]="Samsung $1";n[2]=0;n[3]=0;n[4]=0;i.device[548]=n;n=Object.create(null);n[0]=new RegExp("(Samsung)(SGH)(i[0-9]+)");n[1]="$1 $2$3";n[2]=0;n[3]=0;n[4]=0;i.device[549]=n;n=Object.create(null);n[0]=new RegExp("SAMSUNG-ANDROID-MMS/([^;/]+)");n[1]="$1";n[2]=0;n[3]=0;n[4]=0;i.device[550]=n;n=Object.create(null);n[0]=new RegExp("SAMSUNG(?:; |[ -/])([A-Za-z0-9\\-]+)");n[1]="Samsung $1";n[2]=0;n[3]=0;n[4]=0;i.device[551]=n;n=Object.create(null);n[0]=new RegExp("(Dreamcast)");n[1]="Sega $1";n[2]=0;n[3]=0;n[4]=0;i.device[552]=n;n=Object.create(null);n[0]=new RegExp("^SIE-([A-Za-z0-9]+)");n[1]="Siemens $1";n[2]=0;n[3]=0;n[4]=0;i.device[553]=n;n=Object.create(null);n[0]=new RegExp("Softbank/[12]\\.0/([A-Za-z0-9]+)");n[1]="Softbank $1";n[2]=0;n[3]=0;n[4]=0;i.device[554]=n;n=Object.create(null);n[0]=new RegExp("SonyEricsson ?([A-Za-z0-9\\-]+)");n[1]="Ericsson $1";n[2]=0;n[3]=0;n[4]=0;i.device[555]=n;n=Object.create(null);n[0]=new RegExp("Android [^;]+; ([^ ]+) (Sony)/");n[1]="$2 $1";n[2]=0;n[3]=0;n[4]=0;i.device[556]=n;n=Object.create(null);n[0]=new RegExp("(Sony)(?:BDP\\/|\\/)?([^ /;\\)]+)[ /;\\)]");n[1]="$1 $2";n[2]=0;n[3]=0;n[4]=0;i.device[557]=n;n=Object.create(null);n[0]=new RegExp("Puffin/[\\d\\.]+IT");n[1]="iPad";n[2]=0;n[3]=0;n[4]=0;i.device[558]=n;n=Object.create(null);n[0]=new RegExp("Puffin/[\\d\\.]+IP");n[1]="iPhone";n[2]=0;n[3]=0;n[4]=0;i.device[559]=n;n=Object.create(null);n[0]=new RegExp("Puffin/[\\d\\.]+AT");n[1]="Generic Tablet";n[2]=0;n[3]=0;n[4]=0;i.device[560]=n;n=Object.create(null);n[0]=new RegExp("Puffin/[\\d\\.]+AP");n[1]="Generic Smartphone";n[2]=0;n[3]=0;n[4]=0;i.device[561]=n;n=Object.create(null);n[0]=new RegExp("Android[\\- ][\\d]+\\.[\\d]+; [A-Za-z]{2}\\-[A-Za-z]{0,2}; WOWMobile (.+) Build");n[1]=0;n[2]=0;n[3]=0;n[4]=0;i.device[562]=n;n=Object.create(null);n[0]=new RegExp("Android[\\- ][\\d]+\\.[\\d]+\\-update1; [A-Za-z]{2}\\-[A-Za-z]{0,2} *; *(.+?) Build");n[1]=0;n[2]=0;n[3]=0;n[4]=0;i.device[563]=n;n=Object.create(null);n[0]=new RegExp("Android[\\- ][\\d]+(?:\\.[\\d]+){1,2}; *[A-Za-z]{2}[_\\-][A-Za-z]{0,2}\\-? *; *(.+?) Build");n[1]=0;n[2]=0;n[3]=0;n[4]=0;i.device[564]=n;n=Object.create(null);n[0]=new RegExp("Android[\\- ][\\d]+(?:\\.[\\d]+){1,2}; *[A-Za-z]{0,2}\\- *; *(.+?) Build");n[1]=0;n[2]=0;n[3]=0;n[4]=0;i.device[565]=n;n=Object.create(null);n[0]=new RegExp("Android[\\- ][\\d]+(?:\\.[\\d]+){1,2}; *[a-z]{0,2}[_\\-]?[A-Za-z]{0,2};? Build");n[1]="Generic Smartphone";n[2]=0;n[3]=0;n[4]=0;i.device[566]=n;n=Object.create(null);n[0]=new RegExp("Android[\\- ][\\d]+(?:\\.[\\d]+){1,2}; *\\-?[A-Za-z]{2}; *(.+?) Build");n[1]=0;n[2]=0;n[3]=0;n[4]=0;i.device[567]=n;n=Object.create(null);n[0]=new RegExp("Android[\\- ][\\d]+(?:\\.[\\d]+){1,2}(?:;.*)?; *(.+?) Build");n[1]=0;n[2]=0;n[3]=0;n[4]=0;i.device[568]=n;n=Object.create(null);n[0]=new RegExp("(GoogleTV)");n[1]=0;n[2]=0;n[3]=0;n[4]=0;i.device[569]=n;n=Object.create(null);n[0]=new RegExp("(WebTV)/\\d+.\\d+");n[1]=0;n[2]=0;n[3]=0;n[4]=0;i.device[570]=n;n=Object.create(null);n[0]=new RegExp("^(Roku)/DVP-\\d+\\.\\d+");n[1]=0;n[2]=0;n[3]=0;n[4]=0;i.device[571]=n;n=Object.create(null);n[0]=new RegExp("(Android 3\\.\\d|Opera Tablet|Tablet; .+Firefox/|Android.*(?:Tab|Pad))");n[1]="Generic Tablet";n[2]=0;n[3]=0;n[4]=0;i.device[572]=n;n=Object.create(null);n[0]=new RegExp("(Symbian|\\bS60(Version|V\\d)|\\bS60\\b|\\((Series 60|Windows Mobile|Palm OS|Bada); Opera Mini|Windows CE|Opera Mobi|BREW|Brew|Mobile; .+Firefox/|iPhone OS|Android|MobileSafari|Windows *Phone|\\(webOS/|PalmOS)");n[1]="Generic Smartphone";n[2]=0;n[3]=0;n[4]=0;i.device[573]=n;n=Object.create(null);n[0]=new RegExp("(hiptop|avantgo|plucker|xiino|blazer|elaine)");n[1]="Generic Smartphone";n[2]=0;n[3]=0;n[4]=0;i.device[574]=n;n=Object.create(null);n[0]=new RegExp("(bot|zao|borg|DBot|oegp|silk|Xenu|zeal|^NING|CCBot|crawl|htdig|lycos|slurp|teoma|voila|yahoo|Sogou|CiBra|Nutch|^Java/|^JNLP/|Daumoa|Genieo|ichiro|larbin|pompos|Scrapy|snappy|speedy|spider|msnbot|msrbot|vortex|^vortex|crawler|favicon|indexer|Riddler|scooter|scraper|scrubby|WhatWeb|WinHTTP|bingbot|openbot|gigabot|furlbot|polybot|seekbot|^voyager|archiver|Icarus6j|mogimogi|Netvibes|blitzbot|altavista|charlotte|findlinks|Retreiver|TLSProber|WordPress|SeznamBot|ProoXiBot|wsr\\-agent|Squrl Java|EtaoSpider|PaperLiBot|SputnikBot|A6\\-Indexer|netresearch|searchsight|baiduspider|YisouSpider|ICC\\-Crawler|http%20client|Python-urllib|dataparksearch|converacrawler|Screaming Frog|AppEngine-Google|YahooCacheSystem|fast\\-webcrawler|Sogou Pic Spider|semanticdiscovery|Innovazion Crawler|facebookexternalhit|Google.*/\\+/web/snippet|Google-HTTP-Java-Client|BlogBridge|IlTrovatore-Setaccio|InternetArchive|GomezAgent|WebThumbnail|heritrix|NewsGator|PagePeeker|Reaper|ZooShot|holmes)");n[1]="Spider";n[2]=0;n[3]=0;n[4]=0;i.device[575]=n;n=Object.create(null);n[0]=new RegExp("^(1207|3gso|4thp|501i|502i|503i|504i|505i|506i|6310|6590|770s|802s|a wa|acer|acs\\-|airn|alav|asus|attw|au\\-m|aur |aus |abac|acoo|aiko|alco|alca|amoi|anex|anny|anyw|aptu|arch|argo|bmobile|bell|bird|bw\\-n|bw\\-u|beck|benq|bilb|blac|c55/|cdm\\-|chtm|capi|comp|cond|dall|dbte|dc\\-s|dica|ds\\-d|ds12|dait|devi|dmob|doco|dopo|dorado|el(?:38|39|48|49|50|55|58|68)|el[3456]\\d{2}dual|erk0|esl8|ex300|ez40|ez60|ez70|ezos|ezze|elai|emul|eric|ezwa|fake|fly\\-|fly_|g\\-mo|g1 u|g560|gf\\-5|grun|gene|go.w|good|grad|hcit|hd\\-m|hd\\-p|hd\\-t|hei\\-|hp i|hpip|hs\\-c|htc |htc\\-|htca|htcg)");n[1]="Generic Feature Phone";n[2]=0;n[3]=0;n[4]=0;i.device[576]=n;n=Object.create(null);n[0]=new RegExp("^(htcp|htcs|htct|htc_|haie|hita|huaw|hutc|i\\-20|i\\-go|i\\-ma|i\\-mobile|i230|iac|iac\\-|iac/|ig01|im1k|inno|iris|jata|kddi|kgt|kgt/|kpt |kwc\\-|klon|lexi|lg g|lg\\-a|lg\\-b|lg\\-c|lg\\-d|lg\\-f|lg\\-g|lg\\-k|lg\\-l|lg\\-m|lg\\-o|lg\\-p|lg\\-s|lg\\-t|lg\\-u|lg\\-w|lg/k|lg/l|lg/u|lg50|lg54|lge\\-|lge/|leno|m1\\-w|m3ga|m50/|maui|mc01|mc21|mcca|medi|meri|mio8|mioa|mo01|mo02|mode|modo|mot |mot\\-|mt50|mtp1|mtv |mate|maxo|merc|mits|mobi|motv|mozz|n100|n101|n102|n202|n203|n300|n302|n500|n502|n505|n700|n701|n710|nec\\-|nem\\-|newg|neon)");n[1]="Generic Feature Phone";n[2]=0;n[3]=0;n[4]=0;i.device[577]=n;n=Object.create(null);n[0]=new RegExp("^(netf|noki|nzph|o2 x|o2\\-x|opwv|owg1|opti|oran|ot\\-s|p800|pand|pg\\-1|pg\\-2|pg\\-3|pg\\-6|pg\\-8|pg\\-c|pg13|phil|pn\\-2|pt\\-g|palm|pana|pire|pock|pose|psio|qa\\-a|qc\\-2|qc\\-3|qc\\-5|qc\\-7|qc07|qc12|qc21|qc32|qc60|qci\\-|qwap|qtek|r380|r600|raks|rim9|rove|s55/|sage|sams|sc01|sch\\-|scp\\-|sdk/|se47|sec\\-|sec0|sec1|semc|sgh\\-|shar|sie\\-|sk\\-0|sl45|slid|smb3|smt5|sp01|sph\\-|spv |spv\\-|sy01|samm|sany|sava|scoo|send|siem|smar|smit|soft|sony|t\\-mo|t218|t250|t600|t610|t618|tcl\\-|tdg\\-|telm|tim\\-|ts70|tsm\\-|tsm3|tsm5|tx\\-9|tagt)");n[1]="Generic Feature Phone";n[2]=0;n[3]=0;n[4]=0;i.device[578]=n;n=Object.create(null);n[0]=new RegExp("^(talk|teli|topl|tosh|up.b|upg1|utst|v400|v750|veri|vk\\-v|vk40|vk50|vk52|vk53|vm40|vx98|virg|vertu|vite|voda|vulc|w3c |w3c\\-|wapj|wapp|wapu|wapm|wig |wapi|wapr|wapv|wapy|wapa|waps|wapt|winc|winw|wonu|x700|xda2|xdag|yas\\-|your|zte\\-|zeto|aste|audi|avan|blaz|brew|brvw|bumb|ccwa|cell|cldc|cmd\\-|dang|eml2|fetc|hipt|http|ibro|idea|ikom|ipaq|jbro|jemu|jigs|keji|kyoc|kyok|libw|m\\-cr|midp|mmef|moto|mwbp|mywa|newt|nok6|o2im|pant|pdxg|play|pluc|port|prox|rozo|sama|seri|smal|symb|treo|upsi|vx52|vx53|vx60|vx61|vx70|vx80|vx81|vx83|vx85|wap\\-|webc|whit|wmlb|xda\\-|xda_)");n[1]="Generic Feature Phone";n[2]=0;n[3]=0;n[4]=0;i.device[579]=n;n=Object.create(null);n[0]=new RegExp("^(Ice)$");n[1]="Generic Feature Phone";n[2]=0;n[3]=0;n[4]=0;i.device[580]=n;n=Object.create(null);n[0]=new RegExp("(wap[\\-\\ ]browser|maui|netfront|obigo|teleca|up\\.browser|midp|Opera Mini)");n[1]="Generic Feature Phone";n[2]=0;n[3]=0;n[4]=0;i.device[581]=n;i.device.length=582;i.os=Object.create(null);n=Object.create(null);n[0]=new RegExp("HbbTV/\\d+\\.\\d+\\.\\d+ \\( ;(LG)E ;NetCast 4.0");n[1]=0;n[2]="2013";n[3]=0;n[4]=0;i.os[0]=n;n=Object.create(null);n[0]=new RegExp("HbbTV/\\d+\\.\\d+\\.\\d+ \\( ;(LG)E ;NetCast 3.0");n[1]=0;n[2]="2012";n[3]=0;n[4]=0;i.os[1]=n;n=Object.create(null);n[0]=new RegExp("HbbTV/1.1.1 \\(;;;;;\\) Maple_2011");n[1]="Samsung";n[2]="2011";n[3]=0;n[4]=0;i.os[2]=n;n=Object.create(null);n[0]=new RegExp("HbbTV/\\d+\\.\\d+\\.\\d+ \\(;(Samsung);SmartTV([0-9]{4});.*FXPDEUC");n[1]=0;n[2]=0;n[3]="UE40F7000";n[4]=0;i.os[3]=n;n=Object.create(null);n[0]=new RegExp("HbbTV/\\d+\\.\\d+\\.\\d+ \\(;(Samsung);SmartTV([0-9]{4});.*MST12DEUC");n[1]=0;n[2]=0;n[3]="UE32F4500";n[4]=0;i.os[4]=n;n=Object.create(null);n[0]=new RegExp("HbbTV/1.1.1 \\(; (Philips);.*NETTV/4");n[1]=0;n[2]="2013";n[3]=0;n[4]=0;i.os[5]=n;n=Object.create(null);n[0]=new RegExp("HbbTV/1.1.1 \\(; (Philips);.*NETTV/3");n[1]=0;n[2]="2012";n[3]=0;n[4]=0;i.os[6]=n;n=Object.create(null);n[0]=new RegExp("HbbTV/1.1.1 \\(; (Philips);.*NETTV/2");n[1]=0;n[2]="2011";n[3]=0;n[4]=0;i.os[7]=n;n=Object.create(null);n[0]=new RegExp("HbbTV/\\d+\\.\\d+\\.\\d+.*(firetv)-firefox-plugin (\\d+).(\\d+).(\\d+)");n[1]="FireHbbTV";n[2]=0;n[3]=0;n[4]=0;i.os[8]=n;n=Object.create(null);n[0]=new RegExp("HbbTV/\\d+\\.\\d+\\.\\d+ \\(.*; ?([a-zA-Z]+) ?;.*(201[1-9]).*\\)");n[1]=0;n[2]=0;n[3]=0;n[4]=0;i.os[9]=n;n=Object.create(null);n[0]=new RegExp("(Windows Phone) (?:OS[ /])?(\\d+)\\.(\\d+)");n[1]=0;n[2]=0;n[3]=0;n[4]=0;i.os[10]=n;n=Object.create(null);n[0]=new RegExp("(Android)[ \\-/](\\d+)\\.(\\d+)(?:[.\\-]([a-z0-9]+))?");n[1]=0;n[2]=0;n[3]=0;n[4]=0;i.os[11]=n;n=Object.create(null);n[0]=new RegExp("(Android) Donut");n[1]=0;n[2]="1";n[3]="2";n[4]=0;i.os[12]=n;n=Object.create(null);n[0]=new RegExp("(Android) Eclair");n[1]=0;n[2]="2";n[3]="1";n[4]=0;i.os[13]=n;n=Object.create(null);n[0]=new RegExp("(Android) Froyo");n[1]=0;n[2]="2";n[3]="2";n[4]=0;i.os[14]=n;n=Object.create(null);n[0]=new RegExp("(Android) Gingerbread");n[1]=0;n[2]="2";n[3]="3";n[4]=0;i.os[15]=n;n=Object.create(null);n[0]=new RegExp("(Android) Honeycomb");n[1]=0;n[2]="3";n[3]=0;n[4]=0;i.os[16]=n;n=Object.create(null);n[0]=new RegExp("^UCWEB.*; (Adr) (\\d+)\\.(\\d+)(?:[.\\-]([a-z0-9]+))?;");n[1]="Android";n[2]=0;n[3]=0;n[4]=0;i.os[17]=n;n=Object.create(null);n[0]=new RegExp("^UCWEB.*; (iPad OS|iPh OS) (\\d+)_(\\d+)(?:_(\\d+))?;");n[1]="iOS";n[2]=0;n[3]=0;n[4]=0;i.os[18]=n;n=Object.create(null);n[0]=new RegExp("^UCWEB.*; (wds) (\\d+)\\.(\\d+)(?:\\.(\\d+))?;");n[1]="Windows Phone";n[2]=0;n[3]=0;n[4]=0;i.os[19]=n;n=Object.create(null);n[0]=new RegExp("^(JUC).*; ?U; ?(?:Android)?(\\d+)\\.(\\d+)(?:[\\.\\-]([a-z0-9]+))?");n[1]="Android";n[2]=0;n[3]=0;n[4]=0;i.os[20]=n;n=Object.create(null);n[0]=new RegExp("(Silk-Accelerated=[a-z]{4,5})");n[1]="Android";n[2]=0;n[3]=0;n[4]=0;i.os[21]=n;n=Object.create(null);n[0]=new RegExp("(XBLWP7)");n[1]="Windows Phone";n[2]=0;n[3]=0;n[4]=0;i.os[22]=n;n=Object.create(null);n[0]=new RegExp("(Windows ?Mobile)");n[1]="Windows Mobile";n[2]=0;n[3]=0;n[4]=0;i.os[23]=n;n=Object.create(null);n[0]=new RegExp("(Windows (?:NT 5\\.2|NT 5\\.1))");n[1]="Windows XP";n[2]=0;n[3]=0;n[4]=0;i.os[24]=n;n=Object.create(null);n[0]=new RegExp("(Windows NT 6\\.1)");n[1]="Windows 7";n[2]=0;n[3]=0;n[4]=0;i.os[25]=n;n=Object.create(null);n[0]=new RegExp("(Windows NT 6\\.0)");n[1]="Windows Vista";n[2]=0;n[3]=0;n[4]=0;i.os[26]=n;n=Object.create(null);n[0]=new RegExp("(Win 9x 4\\.90)");n[1]="Windows ME";n[2]=0;n[3]=0;n[4]=0;i.os[27]=n;n=Object.create(null);n[0]=new RegExp("(Windows 98|Windows XP|Windows ME|Windows 95|Windows CE|Windows 7|Windows NT 4\\.0|Windows Vista|Windows 2000|Windows 3.1)");n[1]=0;n[2]=0;n[3]=0;n[4]=0;i.os[28]=n;n=Object.create(null);n[0]=new RegExp("(Windows NT 6\\.2; ARM;)");n[1]="Windows RT";n[2]=0;n[3]=0;n[4]=0;i.os[29]=n;n=Object.create(null);n[0]=new RegExp("(Windows NT 6\\.2)");n[1]="Windows 8";n[2]=0;n[3]=0;n[4]=0;i.os[30]=n;n=Object.create(null);n[0]=new RegExp("(Windows NT 6\\.3; ARM;)");n[1]="Windows RT 8.1";n[2]=0;n[3]=0;n[4]=0;i.os[31]=n;n=Object.create(null);n[0]=new RegExp("(Windows NT 6\\.3)");n[1]="Windows 8.1";n[2]=0;n[3]=0;n[4]=0;i.os[32]=n;n=Object.create(null);n[0]=new RegExp("(Windows NT 6\\.4)");n[1]="Windows 10";n[2]=0;n[3]=0;n[4]=0;i.os[33]=n;n=Object.create(null);n[0]=new RegExp("(Windows NT 10\\.0)");n[1]="Windows 10";n[2]=0;n[3]=0;n[4]=0;i.os[34]=n;n=Object.create(null);n[0]=new RegExp("(Windows NT 5\\.0)");n[1]="Windows 2000";n[2]=0;n[3]=0;n[4]=0;i.os[35]=n;n=Object.create(null);n[0]=new RegExp("(WinNT4.0)");n[1]="Windows NT 4.0";n[2]=0;n[3]=0;n[4]=0;i.os[36]=n;n=Object.create(null);n[0]=new RegExp("(Windows ?CE)");n[1]="Windows CE";n[2]=0;n[3]=0;n[4]=0;i.os[37]=n;n=Object.create(null);n[0]=new RegExp("Win ?(95|98|3.1|NT|ME|2000)");n[1]="Windows $1";n[2]=0;n[3]=0;n[4]=0;i.os[38]=n;n=Object.create(null);n[0]=new RegExp("Win16");n[1]="Windows 3.1";n[2]=0;n[3]=0;n[4]=0;i.os[39]=n;n=Object.create(null);n[0]=new RegExp("Win32");n[1]="Windows 95";n[2]=0;n[3]=0;n[4]=0;i.os[40]=n;n=Object.create(null);n[0]=new RegExp("(Tizen)/(\\d+)\\.(\\d+)");n[1]=0;n[2]=0;n[3]=0;n[4]=0;i.os[41]=n;n=Object.create(null);n[0]=new RegExp("((?:Mac ?|; )OS X)[\\s/](?:(\\d+)[_.](\\d+)(?:[_.](\\d+))?|Mach-O)");n[1]="Mac OS X";n[2]=0;n[3]=0;n[4]=0;i.os[42]=n;n=Object.create(null);n[0]=new RegExp(" (Dar)(win)/(9).(\\d+).*\\((?:i386|x86_64|Power Macintosh)\\)");n[1]="Mac OS X";n[2]="10";n[3]="5";n[4]=0;i.os[43]=n;n=Object.create(null);n[0]=new RegExp(" (Dar)(win)/(10).(\\d+).*\\((?:i386|x86_64)\\)");n[1]="Mac OS X";n[2]="10";n[3]="6";n[4]=0;i.os[44]=n;n=Object.create(null);n[0]=new RegExp(" (Dar)(win)/(11).(\\d+).*\\((?:i386|x86_64)\\)");n[1]="Mac OS X";n[2]="10";n[3]="7";n[4]=0;i.os[45]=n;n=Object.create(null);n[0]=new RegExp(" (Dar)(win)/(12).(\\d+).*\\((?:i386|x86_64)\\)");n[1]="Mac OS X";n[2]="10";n[3]="8";n[4]=0;i.os[46]=n;n=Object.create(null);n[0]=new RegExp(" (Dar)(win)/(13).(\\d+).*\\((?:i386|x86_64)\\)");n[1]="Mac OS X";n[2]="10";n[3]="9";n[4]=0;i.os[47]=n;n=Object.create(null);n[0]=new RegExp("Mac_PowerPC");n[1]="Mac OS";n[2]=0;n[3]=0;n[4]=0;i.os[48]=n;n=Object.create(null);n[0]=new RegExp("(?:PPC|Intel) (Mac OS X)");n[1]=0;n[2]=0;n[3]=0;n[4]=0;i.os[49]=n;n=Object.create(null);n[0]=new RegExp("(Apple\\s?TV)(?:/(\\d+)\\.(\\d+))?");n[1]="ATV OS X";n[2]=0;n[3]=0;n[4]=0;i.os[50]=n;n=Object.create(null);n[0]=new RegExp("(CPU OS|iPhone OS|CPU iPhone) +(\\d+)[_\\.](\\d+)(?:[_\\.](\\d+))?");n[1]="iOS";n[2]=0;n[3]=0;n[4]=0;i.os[51]=n;n=Object.create(null);n[0]=new RegExp("(iPhone|iPad|iPod); Opera");n[1]="iOS";n[2]=0;n[3]=0;n[4]=0;i.os[52]=n;n=Object.create(null);n[0]=new RegExp("(iPhone|iPad|iPod).*Mac OS X.*Version/(\\d+)\\.(\\d+)");n[1]="iOS";n[2]=0;n[3]=0;n[4]=0;i.os[53]=n;n=Object.create(null);n[0]=new RegExp("(CFNetwork)/(5)48\\.0\\.3.* Darwin/11\\.0\\.0");n[1]="iOS";n[2]=0;n[3]=0;n[4]=0;i.os[54]=n;n=Object.create(null);n[0]=new RegExp("(CFNetwork)/(5)48\\.(0)\\.4.* Darwin/(1)1\\.0\\.0");n[1]="iOS";n[2]=0;n[3]=0;n[4]=0;i.os[55]=n;n=Object.create(null);n[0]=new RegExp("(CFNetwork)/(5)48\\.(1)\\.4");n[1]="iOS";n[2]=0;n[3]=0;n[4]=0;i.os[56]=n;n=Object.create(null);n[0]=new RegExp("(CFNetwork)/(4)85\\.1(3)\\.9");n[1]="iOS";n[2]=0;n[3]=0;n[4]=0;i.os[57]=n;n=Object.create(null);n[0]=new RegExp("(CFNetwork)/(6)09\\.(1)\\.4");n[1]="iOS";n[2]=0;n[3]=0;n[4]=0;i.os[58]=n;n=Object.create(null);n[0]=new RegExp("(CFNetwork)/(6)(0)9");n[1]="iOS";n[2]=0;n[3]=0;n[4]=0;i.os[59]=n;n=Object.create(null);n[0]=new RegExp("(CFNetwork)/6(7)2\\.(1)\\.13");n[1]="iOS";n[2]=0;n[3]=0;n[4]=0;i.os[60]=n;n=Object.create(null);n[0]=new RegExp("(CFNetwork)/6(7)2\\.(1)\\.(1)4");n[1]="iOS";n[2]=0;n[3]=0;n[4]=0;i.os[61]=n;n=Object.create(null);n[0]=new RegExp("(CF)(Network)/6(7)(2)\\.1\\.15");n[1]="iOS";n[2]="7";n[3]="1";n[4]=0;i.os[62]=n;n=Object.create(null);n[0]=new RegExp("(CFNetwork)/6(7)2\\.(0)\\.(?:2|8)");n[1]="iOS";n[2]=0;n[3]=0;n[4]=0;i.os[63]=n;n=Object.create(null);n[0]=new RegExp("(CFNetwork)/709\\.1");n[1]="iOS";n[2]="8";n[3]="0.b5";n[4]=0;i.os[64]=n;n=Object.create(null);n[0]=new RegExp("(CF)(Network)/711\\.(\\d)");n[1]="iOS";n[2]="8";n[3]=0;n[4]=0;i.os[65]=n;n=Object.create(null);n[0]=new RegExp("(CF)(Network)/(720)\\.(\\d)");n[1]="Mac OS X";n[2]="10";n[3]="10";n[4]=0;i.os[66]=n;n=Object.create(null);n[0]=new RegExp("(CF)(Network)/758\\.(\\d)");n[1]="iOS";n[2]="9";n[3]=0;n[4]=0;i.os[67]=n;n=Object.create(null);n[0]=new RegExp("CFNetwork/.* Darwin/(9)\\.\\d+");n[1]="iOS";n[2]="1";n[3]=0;n[4]=0;i.os[68]=n;n=Object.create(null);n[0]=new RegExp("CFNetwork/.* Darwin/(10)\\.\\d+");n[1]="iOS";n[2]="4";n[3]=0;n[4]=0;i.os[69]=n;n=Object.create(null);n[0]=new RegExp("CFNetwork/.* Darwin/(11)\\.\\d+");n[1]="iOS";n[2]="5";n[3]=0;n[4]=0;i.os[70]=n;n=Object.create(null);n[0]=new RegExp("CFNetwork/.* Darwin/(13)\\.\\d+");n[1]="iOS";n[2]="6";n[3]=0;n[4]=0;i.os[71]=n;n=Object.create(null);n[0]=new RegExp("CFNetwork/6.* Darwin/(14)\\.\\d+");n[1]="iOS";n[2]="7";n[3]=0;n[4]=0;i.os[72]=n;n=Object.create(null);n[0]=new RegExp("CFNetwork/7.* Darwin/(14)\\.\\d+");n[1]="iOS";n[2]="8";n[3]="0";n[4]=0;i.os[73]=n;n=Object.create(null);n[0]=new RegExp("CFNetwork/7.* Darwin/(15)\\.\\d+");n[1]="iOS";n[2]="9";n[3]="0";n[4]=0;i.os[74]=n;n=Object.create(null);n[0]=new RegExp("\\b(iOS[ /]|iPhone(?:/| v|[ _]OS[/,]|; | OS : |\\d,\\d/|\\d,\\d; )|iPad/)(\\d{1,2})[_\\.](\\d{1,2})(?:[_\\.](\\d+))?");n[1]="iOS";n[2]=0;n[3]=0;n[4]=0;i.os[75]=n;n=Object.create(null);n[0]=new RegExp("(tvOS)/(\\d+).(\\d+)");n[1]="tvOS";n[2]=0;n[3]=0;n[4]=0;i.os[76]=n;n=Object.create(null);n[0]=new RegExp("(CrOS) [a-z0-9_]+ (\\d+)\\.(\\d+)(?:\\.(\\d+))?");n[1]="Chrome OS";n[2]=0;n[3]=0;n[4]=0;i.os[77]=n;n=Object.create(null);n[0]=new RegExp("([Dd]ebian)");n[1]="Debian";n[2]=0;n[3]=0;n[4]=0;i.os[78]=n;n=Object.create(null);n[0]=new RegExp("(Linux Mint)(?:/(\\d+))?");n[1]=0;n[2]=0;n[3]=0;n[4]=0;i.os[79]=n;n=Object.create(null);n[0]=new RegExp("(Mandriva)(?: Linux)?/(?:[\\d.-]+m[a-z]{2}(\\d+).(\\d))?");n[1]=0;n[2]=0;n[3]=0;n[4]=0;i.os[80]=n;n=Object.create(null);n[0]=new RegExp("(Symbian[Oo][Ss])[/ ](\\d+)\\.(\\d+)");n[1]="Symbian OS";n[2]=0;n[3]=0;n[4]=0;i.os[81]=n;n=Object.create(null);n[0]=new RegExp("(Symbian/3).+NokiaBrowser/7\\.3");n[1]="Symbian^3 Anna";n[2]=0;n[3]=0;n[4]=0;i.os[82]=n;n=Object.create(null);n[0]=new RegExp("(Symbian/3).+NokiaBrowser/7\\.4");n[1]="Symbian^3 Belle";n[2]=0;n[3]=0;n[4]=0;i.os[83]=n;n=Object.create(null);n[0]=new RegExp("(Symbian/3)");n[1]="Symbian^3";n[2]=0;n[3]=0;n[4]=0;i.os[84]=n;n=Object.create(null);n[0]=new RegExp("\\b(Series 60|SymbOS|S60Version|S60V\\d|S60\\b)");n[1]="Symbian OS";n[2]=0;n[3]=0;n[4]=0;i.os[85]=n;n=Object.create(null);n[0]=new RegExp("(MeeGo)");n[1]=0;n[2]=0;n[3]=0;n[4]=0;i.os[86]=n;n=Object.create(null);n[0]=new RegExp("Symbian [Oo][Ss]");n[1]="Symbian OS";n[2]=0;n[3]=0;n[4]=0;i.os[87]=n;n=Object.create(null);n[0]=new RegExp("Series40;");n[1]="Nokia Series 40";n[2]=0;n[3]=0;n[4]=0;i.os[88]=n;n=Object.create(null);n[0]=new RegExp("Series30Plus;");n[1]="Nokia Series 30 Plus";n[2]=0;n[3]=0;n[4]=0;i.os[89]=n;n=Object.create(null);n[0]=new RegExp("(BB10);.+Version/(\\d+)\\.(\\d+)\\.(\\d+)");n[1]="BlackBerry OS";n[2]=0;n[3]=0;n[4]=0;i.os[90]=n;n=Object.create(null);n[0]=new RegExp("(Black[Bb]erry)[0-9a-z]+/(\\d+)\\.(\\d+)\\.(\\d+)(?:\\.(\\d+))?");n[1]="BlackBerry OS";n[2]=0;n[3]=0;n[4]=0;i.os[91]=n;n=Object.create(null);n[0]=new RegExp("(Black[Bb]erry).+Version/(\\d+)\\.(\\d+)\\.(\\d+)(?:\\.(\\d+))?");n[1]="BlackBerry OS";n[2]=0;n[3]=0;n[4]=0;i.os[92]=n;n=Object.create(null);n[0]=new RegExp("(RIM Tablet OS) (\\d+)\\.(\\d+)\\.(\\d+)");n[1]="BlackBerry Tablet OS";n[2]=0;n[3]=0;n[4]=0;i.os[93]=n;n=Object.create(null);n[0]=new RegExp("(Play[Bb]ook)");n[1]="BlackBerry Tablet OS";n[2]=0;n[3]=0;n[4]=0;i.os[94]=n;n=Object.create(null);n[0]=new RegExp("(Black[Bb]erry)");n[1]="BlackBerry OS";n[2]=0;n[3]=0;n[4]=0;i.os[95]=n;n=Object.create(null);n[0]=new RegExp("\\((?:Mobile|Tablet);.+Gecko/18.0 Firefox/\\d+\\.\\d+");n[1]="Firefox OS";n[2]="1";n[3]="0";n[4]="1";i.os[96]=n;n=Object.create(null);n[0]=new RegExp("\\((?:Mobile|Tablet);.+Gecko/18.1 Firefox/\\d+\\.\\d+");n[1]="Firefox OS";n[2]="1";n[3]="1";n[4]=0;i.os[97]=n;n=Object.create(null);n[0]=new RegExp("\\((?:Mobile|Tablet);.+Gecko/26.0 Firefox/\\d+\\.\\d+");n[1]="Firefox OS";n[2]="1";n[3]="2";n[4]=0;i.os[98]=n;n=Object.create(null);n[0]=new RegExp("\\((?:Mobile|Tablet);.+Gecko/28.0 Firefox/\\d+\\.\\d+");n[1]="Firefox OS";n[2]="1";n[3]="3";n[4]=0;i.os[99]=n;n=Object.create(null);n[0]=new RegExp("\\((?:Mobile|Tablet);.+Gecko/30.0 Firefox/\\d+\\.\\d+");n[1]="Firefox OS";n[2]="1";n[3]="4";n[4]=0;i.os[100]=n;n=Object.create(null);n[0]=new RegExp("\\((?:Mobile|Tablet);.+Gecko/32.0 Firefox/\\d+\\.\\d+");n[1]="Firefox OS";n[2]="2";n[3]="0";n[4]=0;i.os[101]=n;n=Object.create(null);n[0]=new RegExp("\\((?:Mobile|Tablet);.+Gecko/34.0 Firefox/\\d+\\.\\d+");n[1]="Firefox OS";n[2]="2";n[3]="1";n[4]=0;i.os[102]=n;n=Object.create(null);n[0]=new RegExp("\\((?:Mobile|Tablet);.+Firefox/\\d+\\.\\d+");n[1]="Firefox OS";n[2]=0;n[3]=0;n[4]=0;i.os[103]=n;n=Object.create(null);n[0]=new RegExp("(BREW)[ /](\\d+)\\.(\\d+)\\.(\\d+)");n[1]=0;n[2]=0;n[3]=0;n[4]=0;i.os[104]=n;n=Object.create(null);n[0]=new RegExp("(BREW);");n[1]=0;n[2]=0;n[3]=0;n[4]=0;i.os[105]=n;n=Object.create(null);n[0]=new RegExp("(Brew MP|BMP)[ /](\\d+)\\.(\\d+)\\.(\\d+)");n[1]="Brew MP";n[2]=0;n[3]=0;n[4]=0;i.os[106]=n;n=Object.create(null);n[0]=new RegExp("BMP;");n[1]="Brew MP";n[2]=0;n[3]=0;n[4]=0;i.os[107]=n;n=Object.create(null);n[0]=new RegExp("(GoogleTV)(?: (\\d+)\\.(\\d+)(?:\\.(\\d+))?|/[\\da-z]+)");n[1]=0;n[2]=0;n[3]=0;n[4]=0;i.os[108]=n;n=Object.create(null);n[0]=new RegExp("(WebTV)/(\\d+).(\\d+)");n[1]=0;n[2]=0;n[3]=0;n[4]=0;i.os[109]=n;n=Object.create(null);n[0]=new RegExp("(hpw|web)OS/(\\d+)\\.(\\d+)(?:\\.(\\d+))?");n[1]="webOS";n[2]=0;n[3]=0;n[4]=0;i.os[110]=n;n=Object.create(null);n[0]=new RegExp("(VRE);");n[1]=0;n[2]=0;n[3]=0;n[4]=0;i.os[111]=n;n=Object.create(null);n[0]=new RegExp("(Fedora|Red Hat|PCLinuxOS|Puppy|Ubuntu|Kindle|Bada|Lubuntu|BackTrack|Slackware|(?:Free|Open|Net|\\b)BSD)[/ ](\\d+)\\.(\\d+)(?:\\.(\\d+)(?:\\.(\\d+))?)?");n[1]=0;n[2]=0;n[3]=0;n[4]=0;i.os[112]=n;n=Object.create(null);n[0]=new RegExp("(Linux)[ /](\\d+)\\.(\\d+)(?:\\.(\\d+))?.*gentoo");n[1]="Gentoo";n[2]=0;n[3]=0;n[4]=0;i.os[113]=n;n=Object.create(null);n[0]=new RegExp("\\((Bada);");n[1]=0;n[2]=0;n[3]=0;n[4]=0;i.os[114]=n;n=Object.create(null);n[0]=new RegExp("(Windows|Android|WeTab|Maemo|Web0S)");n[1]=0;n[2]=0;n[3]=0;n[4]=0;i.os[115]=n;n=Object.create(null);n[0]=new RegExp("(Ubuntu|Kubuntu|Arch Linux|CentOS|Slackware|Gentoo|openSUSE|SUSE|Red Hat|Fedora|PCLinuxOS|Mageia|(?:Free|Open|Net|\\b)BSD)");n[1]=0;n[2]=0;n[3]=0;n[4]=0;i.os[116]=n;n=Object.create(null);n[0]=new RegExp("(Linux)(?:[ /](\\d+)\\.(\\d+)(?:\\.(\\d+))?)?");n[1]=0;n[2]=0;n[3]=0;n[4]=0;i.os[117]=n;n=Object.create(null);n[0]=new RegExp("SunOS");n[1]="Solaris";n[2]=0;n[3]=0;n[4]=0;i.os[118]=n;n=Object.create(null);n[0]=new RegExp("^(Roku)/DVP-(\\d+)\\.(\\d+)");n[1]=0;n[2]=0;n[3]=0;n[4]=0;i.os[119]=n;n=Object.create(null);n[0]=new RegExp("(iOS) (\\d+)\\.(\\d+)(?:\\.(\\d+))?");n[1]=0;n[2]=0;n[3]=0;n[4]=0;i.os[120]=n;i.os.length=121},{}],"37":[function(e,t,i){var n=window.SK=window.SK||{};_.extend(n,{"BackboneViewGallery":e("backboneViewGallery/backboneViewGallery")})},{"backboneViewGallery/backboneViewGallery":38}],"38":[function(e,t,i){var n=e("./buffer");var r=e("./cache");function o(e){this._$element=e.container;this._buffer=new n(e.count,this._$element.find(".backboneViewGallery-buffer"));this._cache=new r(e,this._buffer);this._offset=0;this._buffer.on("shift",function(e,t){this._offset+=e;this._displayPagination(this._cache.getPosition()+this._offset,this._cache.getCount());if(t){this._cache.preload(this._offset);t.drop();var i=this._cache.getByOffset(this._offset+e*this._buffer.getRadius());t.load(i)}}.bind(this));this._buffer.on("change",function(e){var t=e.cacheItem.getViewData();this._offset=0;this._cache.setPosition(t.position);var i=this._cache.getCount()!==t.count;var n=t.position!==e.cacheItem.requestedPosition;if(i||n){if(n){this._cache.replace(t.position,e.cacheItem)}this._buffer.reset();this._buffer.setSize(t.count);this._cache.reset();this._cache.setCount(t.count);_.defer(function(){this._cache.init()}.bind(this))}this._displayPagination(this._cache.getPosition(),this._cache.getCount());this.trigger("change",t)}.bind(this));this._displayPagination(e.position,e.count);this._enableHotkeys()}_.extend(o.prototype,Backbone.Events);o.prototype.showPrev=function(){this._buffer.showPrev()};o.prototype.showNext=function(){this._buffer.showNext()};o.prototype.destroy=function(){this._disableHotkeys();var e=this._buffer.getSlick();e.$slider.one("destroy",false);e.destroy()};o.prototype.deleteCurrent=function(){var e=this._buffer.getCurrent().cacheItem;var t=e.getViewData();var i=this._buffer.getByShift(-1).cacheItem;i.loading.then(function(){var e=i.getViewData();if(e.count===t.count){e.count-=1}if(t.position===0){e.position-=1}});this._buffer.on("change",function(){this._buffer.toggleNavigation(true)}.bind(this));this._buffer.getSlick().slickGoTo(this._buffer.getIndex(-1),true);this._buffer.toggleNavigation(false)};o.prototype.setView=function(e){this._cache.set(e.position,Promise.resolve(e));var t=this._buffer.getByView(e.view);if(t){t.setCacheItem(this._cache.get(e.position))}};o.prototype._displayPagination=function(e,t){this._$element.find(".backboneViewGallery-header .backboneViewGallery-position").text(e+1);this._$element.find(".backboneViewGallery-header .backboneViewGallery-count").text(t)};o.prototype._enableHotkeys=function(){var t=this;$(window).bind("keydown.backboneViewGallery",function(e){if($(e.target).is(":input")||e.target.isContentEditable){return}if(e.which===cm.keyCode.LEFT){t.showPrev()}if(e.which===cm.keyCode.RIGHT){t.showNext()}})};o.prototype._disableHotkeys=function(){$(window).unbind("keydown.backboneViewGallery")};t.exports=o},{"./buffer":39,"./cache":41}],"39":[function(e,t,i){var o=e("./bufferItem");function n(e,t){this._$element=t;this._items=[];this._slick=null;this._enabled=true;this._initSlick(e)}_.extend(n.prototype,Backbone.Events);n.prototype.getSize=function(){return this._slick.slideCount};n.prototype.setSize=function(e){this._ensureCapacity(Math.min(3,e))};n.prototype.getCurrent=function(){return this._items[this.getCurrentIndex()]};n.prototype.getCurrentIndex=function(){return this._slick.slickCurrentSlide()};n.prototype.get=function(e){return this._items[e]};n.prototype.getByShift=function(e){return this.get(this.getIndex(e))};n.prototype.getIndex=function(e){return(this.getCurrentIndex()+e+this.getSize())%this.getSize()};n.prototype.getSlick=function(){return this._slick};n.prototype.getByView=function(n){return _.find(this._items,function(e){var t=e.cacheItem;var i=t&&t.getViewData();return i&&i.view===n||e.$el.children()[0]===n.$el[0]})};n.prototype.calculateShift=function(e){var t=e-this.getCurrentIndex();if(Math.abs(t)===this.getSize()-1){t=t>0?-1:1}return t};n.prototype.getUtmostItem=function(e){if(this.getSize()>2){return this.getByShift(this.getRadius()*e)}return null};n.prototype.getRadius=function(){return Math.floor(this.getSize()/2)};n.prototype.reset=function(){var e=_.without(this._items,this.getCurrent());_.each(e,function(e){e.drop()})};n.prototype.toggleNavigation=function(e){this._enabled=e;this._slick.slickSetOption({"swipe":e,"arrows":e},true)};n.prototype.showNext=function(){if(this._enabled){this._slick.slickNext()}};n.prototype.showPrev=function(){if(this._enabled){this._slick.slickPrev()}};n.prototype._initSlick=function(i){var a=this;this._$element.on("init",function(e,t){a._slick=t;a.setSize(i)});this._$element.on("beforeChange",function(e,t,i,n){if(i!==n){a._beforeChangeReceived=true;var r=a.calculateShift(n);var o=a.getUtmostItem(-r);a.trigger("shift",r,o)}});this._$element.on("afterChange",function(e,t){if(a._beforeChangeReceived){a._beforeChangeReceived=false;if(t.slickGetOption("infinite")){$(".slick-cloned",t.$slider).remove();t.setupInfinite()}var i=a.getCurrent();i.whenLoaded().then(function(){if(a.getCurrent()===i){a.trigger("change",a.getCurrent())}})}});this._$element.slick({"dots":false,"accessibility":false,"prevArrow":'<a href="javascript:;" class="navigationPrevious"><span class="icon icon-arrow-left"></span></a>',"nextArrow":'<a href="javascript:;" class="navigationNext"><span class="icon icon-arrow-right"></span></a>',"infinite":false})};n.prototype._ensureCapacity=function(e){if(e>0){if(this.getSize()<e||this._items.length<e){this._addMissing(e)}else if(this.getSize()>e||this._items.length>e){this._removeObsolete(e)}}if(e>2){this._slick.slickSetOption("infinite",true,true)}else{this._slick.slickSetOption("infinite",false,true)}};n.prototype._addMissing=function(e){var t=this._$element.find(".backboneViewGallery-item:not(.slick-cloned)");for(var i=0;i<e;i++){if(!this._items[i]){var n=t.filter('[data-slick-index="'+i+'"]');if(!n.length){n=$('<div class="backboneViewGallery-item"></div>')}var r=new o(n);this._items[i]=r;this._slick.slickAdd(r.$el)}}};n.prototype._removeObsolete=function(e){while(this.getSize()>e||this._items.length>e){var t=this.getUtmostItem(1)||this.getByShift(1);t.drop();var i=t.getIndex();this._slick.slickRemove(i);this._items.splice(i,1);this._slick.refresh()}};t.exports=n},{"./bufferItem":40}],"40":[function(e,t,i){function n(e){this.$el=e;this._loadingPromise=null;this.cacheItem=null}n.prototype.setContent=function(e){if(this.$el.children()[0]!==e.$el[0]){this.$el.empty();this.$el.append(e.$el)}};n.prototype.getIndex=function(){return+this.$el.data("slick-index")};n.prototype.isEmpty=function(){return this.$el.children().length===0};n.prototype.drop=function(){this.$el.children().detach();if(this._loadingPromise&&this._loadingPromise.isPending()){this._loadingPromise.cancel()}this._loadingPromise=null;this.cacheItem=null};n.prototype.load=function(e){this.$el.html('<div class="spinner spinner-expanded"></div>');this.setCacheItem(e)};n.prototype.setCacheItem=function(e){this.cacheItem=e;var i=this;this._loadingPromise=new Promise(function(e,t){i.cacheItem.loading.then(e,t)}).then(function(e){i.setContent(e.view);return e})};n.prototype.whenLoaded=function(){if(!this._loadingPromise){throw new Error("BufferItem was not set to load")}return this._loadingPromise};t.exports=n},{}],"41":[function(e,t,i){var n=e("./cacheItem");function o(e,t){this._config=e;this._buffer=t;this._position=e.position;this._count=e.count;this._items={};this.init()}o.DIAMETER=5;o.prototype.init=function(){this._preloadDiameter=Math.min(o.DIAMETER,this._count);this._preloadRadius=Math.floor(this._preloadDiameter/2);for(var e=0;e<this._preloadDiameter;e++){var t=e%2==1?1:-1;var i=t*Math.floor((e+1)/2);if(e<this._buffer.getSize()){var n=this._buffer.getByShift(i);if(n.isEmpty()){var r=this.load(i);n.load(r)}}else{this.load(i)}}};o.prototype.reset=function(){var e=_.without(Object.keys(this._items),this._position+"");_.each(e,function(e){if(this._items[e]){this._items[e].drop();this._items[e]=null}},this)};o.prototype.getPosition=function(){return this._position};o.prototype.setPosition=function(e){this._position=e};o.prototype.get=function(e){return this._items[e]};o.prototype.getByOffset=function(e){return this.get(this._normalizeOffset(e))};o.prototype.getCount=function(){return this._count};o.prototype.setCount=function(e){this._count=e};o.prototype.load=function(e){var t=this._normalizeOffset(e);if(!this._items[t]){this.set(t,this._requestView(e))}return this._items[t]};o.prototype.set=function(e,t){if(t instanceof Promise){t=new n(e,t)}var i=this.get(e);if(i&&i!==t){i.drop()}this._items[e]=t};o.prototype.replace=function(e,t){this.set(e,t);this._items[t.requestedPosition]=null;t.requestedPosition=e};o.prototype._normalizeOffset=function(e){return this.normalizePosition(+this._position+e)};o.prototype.normalizePosition=function(e){return(e+this._count)%this._count};o.prototype.preload=function(e){var t=e/Math.abs(e);for(var i=0;i<=this._preloadRadius+1;i++){this.load(e+t*i)}};o.prototype._requestView=function(e){return this._config.requestView(e)};t.exports=o},{"./cacheItem":42}],"42":[function(e,t,i){function n(e,t){this.requestedPosition=e;this.loading=t}n.prototype.drop=function(){this.requestedPosition=null;var e=this.getViewData();if(e){e.view.remove()}if(this.loading&&this.loading.isPending()){this.loading.cancel()}this.loading=null};n.prototype.getViewData=function(){return this.loading&&this.loading.isFulfilled()&&this.loading.value()||null};t.exports=n},{}]},{},[23,24,37]);